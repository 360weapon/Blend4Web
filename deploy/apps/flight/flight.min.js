b4w.register("flight_main",function(G,a){function w(){n.resize(window.innerWidth,window.innerHeight)}function H(){var d=x.get_std_assets_path();y.set_debug_resources_root("/flight_over_island/");y.load(d+"flight_over_island/flight_over_island.json",I,J,!1);w()}function I(){e=p.get_active_camera();g=p.get_object_by_dupli_name("Cessna Rig","Cessna Armature");t=p.get_object_by_dupli_name("Cessna Rig","Engine Speaker");h=p.get_object_by_dupli_name("golf_player_fmale_rig","rig");b.apply(e,"CameraAction.001");
b.set_behavior(e,b.AB_CYCLIC);b.apply(g,"fly_cessna");b.set_behavior(g,b.AB_FINISH_STOP);b.apply(h,"fly_girl");b.set_behavior(h,b.AB_FINISH_STOP);z(g,t,h);u();n.set_render_callback(K);k=!0}function z(d,L,a){b.set_frame(d,0);b.play(d,M);b.stop(a);b.set_frame(a,0);b.play(a);q.speaker_reset_speed(L,40)}function u(){switch(c){case A:c=l;b.stop(e);break;case l:c=r;b.stop(e);break;case r:c=m;b.play(e);break;case m:c=l,b.stop(e)}B();switch(c){case l:q.listener_reset_speed(40);break;case r:q.listener_reset_speed(0);
break;case m:q.listener_reset_speed(0)}}function C(d,b){var a=document.getElementById(d),c=a.cloneNode(!0);a.parentNode.replaceChild(c,a);c.addEventListener("mouseup",function(a){var c=document.getElementById(d),e=document.getElementById("glow_down"),g=document.createElement("div");g.id="glow";g.style.top=a.target.offsetTop-25+"px";e&&(f.removeChild(e),f.appendChild(g));c.className=c.className.replace("button_down","");b()},!1);c.addEventListener("mouseover",function(d){if(!("ontouchstart"in window||
0<window.navigator.a)){var a=document.getElementById("glow");a||(a=document.createElement("div"),a.id="glow",a.style.top=d.target.offsetTop,f.appendChild(a),a=document.getElementById("glow"));a.style.top=d.target.offsetTop-20+"px"}},!1);c.addEventListener("mouseout",function(){var a=document.getElementById(d);a.className=a.className.replace("button_down","");D()},!1);c.addEventListener("mousedown",function(a){if(!("ontouchstart"in window||0<window.navigator.a)){D();var b=document.getElementById(d),
c=document.createElement("div");c.id="glow_down";c.style.marginTop=a.target.offsetTop-28+"px";f.appendChild(c);b.className+=" button_down"}},!1)}function D(){var a=document.getElementById("glow_down"),b=document.getElementById("glow");b&&f.removeChild(b);a&&f.removeChild(a)}function E(a){document.getElementById("pause_resume").className=a+" controls_button"}function J(a){F.update_preloader(a)}function M(){c!=m&&u();z(g,t,h)}function K(){B()}function B(){if(c!=m){var a=N;b.get_bone_translation(g,"Root",
a);if(c==r)var f=O;else c==l&&(f=P,Q.add(a,R,f));S.set_look_at(e,f,a,T)}}var b=a("animation"),v=a("app"),S=a("camera"),x=a("config"),y=a("data"),n=a("main"),F=a("preloader"),p=a("scenes"),q=a("sfx"),s=a("version"),Q=a("vec3"),s="DEBUG"===s.type(),R=new Float32Array([13,4.5,13]),O=new Float32Array([-20,2,120]),T=new Float32Array([0,1,0]),U={canvas_container_id:"main_canvas_container",callback:function(a,b){b?(f=document.getElementById("hover_panel"),v.enable_controls(a),F.create_advanced_preloader({img_width:165,
preloader_width:460,preloader_bar_id:"preloader_bar",fill_band_id:"fill_band",preloader_caption_id:"preloader_caption",preloader_container_id:"preloader_container",background_container_id:"background_image_container",canvas_container_id:"main_canvas_container"}),document.getElementById("preloader_frame").style.visibility="visible",C("pause_resume",function(){k?(k=!1,n.pause(),E("resume")):(k=!0,n.resume(),E("pause"))}),C("camera_view",function(){k&&u()}),window.onresize=w,document.addEventListener("keydown",
function(a){13==a.keyCode&&v.request_fullscreen(document.body)},!1),H()):console.log("b4w init failure")},gl_debug:!1,show_fps:!1,alpha:!1,physics_enabled:!1,console_verbose:s,assets_dds_available:!s,assets_min50_available:!1,quality:x.P_HIGH,context_antialias:!0},A=10,l=20,r=30,m=40,N=new Float32Array(3),P=new Float32Array(3),g=null,t=null,h=null,e=null,k=!1,c=A,f;G.init=function(){v.init(U)}});b4w.require("flight_main").init();
