b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cd","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cd","=","mix","(","cd",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ce","=","vec3","(","0.0",")",";","vec3","cf","=","vec3","(","0.0",")",";","vec3","cg","=","vec3","(","0.0",")",";","bl","(","cd",",","ce",",","cf",",","cg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ch","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ch","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","(","u_model_matrix","*","vec4","(","ch",",","1.0",")",")",".","xyz",";","mat4","cj","=","_","(","u_camera_eye",",","ci",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ck","=","(","u_model_matrix","*","vec4","(","ch",",","1.0",")",")",".","xyz",";","cj","=","cj","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ck",")",";"]}]}}]},{type:"textline",tokens:["c","cl","=","ag","(","cd","-","ch",",","ch",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cj",")",";","cl",".","b","=","ci",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","cl","=","ag","(","cd",",","ch",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cc","(","cl",".","a",",","cl",".","b",",","cm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cl",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";"]}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fg","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","fg","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","fg","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ck","(","cx",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fa","(","cD",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","gj","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["gj","=","mix","(","gj",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gk","=","vec3","(","0.0",")",";","vec3","gl","=","vec3","(","0.0",")",";","vec3","gm","=","vec3","(","0.0",")",";","bl","(","gj",",","gk",",","gl",",","gm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gn","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gn","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","go","=","fV","(","gj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gn",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gp","=","(","u_model_matrix","*","vec4","(","gn",",","1.0",")",")",".","xyz",";","mat4","gq","=","_","(","u_camera_eye",",","gp",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gr","=","(","u_model_matrix","*","vec4","(","gn",",","1.0",")",")",".","xyz",";","gq","=","gq","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gr",")",";"]}]}}]},{type:"textline",tokens:["c","go","=","ag","(","gj","-","gn",",","gn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gq",")",";","go",".","b","=","gp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","go","=","ag","(","gj",",","gn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gs","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gs","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cc","(","go",".","a",",","go",".","b",",","gs",")",";"]}]}}]},{type:"textline",tokens:["vec4","gt","=","u_view_matrix","*","vec4","(","go",".","a",",","1.0",")",";","vec4","gu","=","u_proj_matrix","*","gt",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gu",".","xy","+=","u_subpixel_jitter","*","gu",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ge","(","go",".","a",")",";","cD","=","gt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["cx","=","-","gt",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","gv","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","float","gw","=","SHADOW_TEX_RES","/","2.0",";","gv","=","floor","(","gv","*","gw","+","0.5",")","/","gw","-","gv",";","gu",".","xy","+=","gv",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gu",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gj",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gj",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","gj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","gj",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","gj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gj",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gj",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gk","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","gl","=","_","(","u_camera_eye",",","gk",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["gl","=","gl","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","gm","=","ag","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gl",")",";","gm",".","b","=","gk",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","gm","=","ag","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gn","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gm",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gj","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gj","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gj","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","gn",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","gr",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gs",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gt","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gt","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","gv","(","float","gu",")","{","return","gu","-","floor","(","gu","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gE","(","inout","float","gw",",","in","float","gx","[","gt","]",",","in","float","gy",")","{","for","(","int","gz","=","NUM_RINGS",";","gz",">","0",";","gz","--",")","{","float","gA","=","40.0","*","gx","[","gz","]",";","float","gB","=","300.0","*","(","gv","(","gA",")","-","0.005",")",";","float","gC","=","gA",";","float","gD","=","abs","(","gC","*","(","u_halo_size","*","gB","-","gy",")",")",";","gw","+=","1.0","-","min","(","gD",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","gN","(","inout","float","gF",",","in","float","gG","[","gt","]",",","in","float","gH",")","{","for","(","int","gI","=","NUM_LINES",";","gI",">","0",";","gI","--",")","{","float","gJ","=","gG","[","gI","]",";","float","gK","=","gJ",";","float","gL","=","1000.0","*","(","gv","(","gJ",")","-","0.005",")",";","float","gM","=","20.0","*","abs","(","gK","*","a",".","x","+","gL","*","a",".","y",")",";","gF","+=","1.0","-","min","(","gM",",","1.0",")",";","}","gF","*=","gH",";","}"]}]}}]},{type:"textline",tokens:["void","gU","(","inout","float","gO",",","in","vec2","gP",")","{","float","gQ",",","gR",";","gR","=","atan","(","gP",".","y",",","gP",".","x",")",";","gR","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","gS","=","cos","(","gR",")",";","float","gT","=","sin","(","gR",")",";","gR","=","(","gS","*","gP",".","x","+","gT","*","gP",".","y",")","*","(","gS","*","gP",".","y","-","gT","*","gP",".","x",")",";","gQ","=","abs","(","gR",")",";","if","(","gQ","<","1.0",")","{","gQ","=","(","0.01","*","u_halo_size",")","/","(","gQ",")",";","gO","*=","sqrt","(","min","(","gQ",",","1.0",")",")",";","}","}","void","main","(",")","{","float","gV","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","gW","=","sqrt","(","gV",")",";","gV","=","max","(","1.0","-","gV",",","0.0",")",";","gV","=","pow","(","gV",",","u_halo_hardness",")",";","float","gX","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","gY","[","gt","]",";","for","(","int","gZ","=","0",";","gZ","<","gt",";","gZ","++",")","{","gY","[","gZ","]","=","fract","(","gs","/","(","float","(","gZ",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","g_","=","0.0",";","gE","(","g_",",","gY",",","gW",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","ha","=","0.0",";","gN","(","ha",",","gY",",","gV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gU","(","gV",",","a",")",";"]}]}}]},{type:"textline",tokens:["gV","*=","gX",";","vec3","hb","=","u_diffuse_color",".","rgb","*","gV",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["g_","*=","gV",";","hb","+=","u_halo_rings_color","*","g_",";","gV","+=","g_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["ha","*=","gX",";","hb","+=","u_halo_lines_color","*","ha",";","gV","+=","ha",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gV","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","hc","=","u_halo_stars_blend","*","(","gr",".","y","-","u_halo_stars_height",")",";","gV","*=","clamp","(","hc",",","0.0",",","1.0",")",";","gV","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gn","(","hb",")",";","gq","(","hb",",","gV",")",";","gl_FragColor","=","vec4","(","hb",",","gV",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gs",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gr",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","gt","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gs","=","fract","(","gt",".","x","+","gt",".","y","+","gt",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gu","=","y","(","gt",",","u_view_matrix",")",";","mat4","gv","=","u_view_matrix",";","gv","[","3","]","[","0","]","=","0.0",";","gv","[","3","]","[","1","]","=","0.0",";","gv","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gu","=","y","(","gt",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gw","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","gx","=","gu","*","gw",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gy","=","u_proj_matrix","*","gv","*","gx",";","gy",".","z","=","0.99999","*","gy",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gr","=","gx",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","gy","=","u_proj_matrix","*","u_view_matrix","*","gx",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gy",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gt","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gt",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kf",";","varying","vec3","kg",";","varying","vec3","kh",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ki",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kW","=","kg",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kX","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","kY","=","kh",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kY","=","kY",";","else","kY","=","-","kY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kZ","=","cross","(","kY",",","ki",".","xyz",")","*","ki",".","w",";","mat3","k_","=","mat3","(","ki",".","xyz",",","kZ",",","kY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","la","=","length","(","cD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","la","<","PARALLAX_LOD_DIST",")","{","float","lb","=","clamp","(","5.0","-","0.5","*","la",",","0.0",",","1.0",")",";","float","lc","=","u_parallax_scale","*","lb",";","vec3","ld","=","normalize","(","kf","*","k_",")",";","float","le","=","1.0","/","PARALLAX_STEPS",";","vec2","lf","=","ld",".","xy","*","lc","/","(","PARALLAX_STEPS","*","ld",".","z",")",";","float","lg","=","1.0",";","float","lh","=","texture2D","(","u_normalmap0",",","kX",")",".","a",";","for","(","float","li","=","1.0",";","li","<=","PARALLAX_STEPS",";","li","++",")","{","if","(","lh","<","lg",")","{","lg","-=","le",";","kX","-=","lf",";","lh","=","texture2D","(","u_normalmap0",",","kX",")",".","a",";","}","}","vec2","lj","=","kX","+","lf",";","float","lk","=","texture2D","(","u_normalmap0",",","lj",")",".","a","-","(","lg","+","le",")",";","float","ll","=","lh","-","lg",";","float","lm","=","ll","/","(","ll","-","lk",")",";","kX","=","lm","*","lj","+","(","1.0","-","lm",")","*","kX",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ln","=","texture2D","(","u_normalmap0",",","kX","+","u_time","*","u_normalmap0_uv_velocity",")",";","vec3","lo","=","ln",".","rgb","-","0.5",";","lo","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","lo",",","u_normal_factor",")",";","vec3","lp","=","k_","*","lo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lp","=","kY",";"]}]}}]},{type:"textline",tokens:["lp","=","normalize","(","lp",")",";","vec3","lq","=","normalize","(","kf",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lr","=","kj",";","gl","(","lr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ls","=","vec4","(","lr",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","ls","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","lt","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lu","=","normalize","(","u_view_matrix_frag","*","vec4","(","lp",",","0.0",")",")",".","st",";","lu","=","lu","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lv","=","texture2D","(","u_colormap0",",","kX",")",";","gl","(","lv",".","rgb",")",";","vec4","lw",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lw","=","texture2D","(","u_colormap1",",","lu",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["lw","=","texture2D","(","u_colormap1",",","kX",")",";"]}]}}]},{type:"textline",tokens:["gl","(","lw",".","rgb",")",";","vec4","lx","=","texture2D","(","u_stencil0",",","kX",")",";","vec4","ly","=","mix","(","lv",",","lw",",","lx",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ly","=","texture2D","(","u_colormap0",",","lu",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ly","=","texture2D","(","u_colormap0",",","kX","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["gl","(","ly",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["ls",".","rgb","=","mix","(","ls",".","rgb",",","ly",".","rgb",",","u_diffuse_color_factor",")",";","float","lz","=","u_alpha_factor","*","ly",".","a",";","lz","+=","(","1.0","-","step","(","0.0",",","lz",")",")",";","ls",".","a","=","mix","(","lz",",","1.0",",","u_diffuse_color",".","a",")",";","lt","=","ly",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["ls",".","rgb","*=","mix","(","vec3","(","1.0",")",",","ly",".","rgb",",","u_diffuse_color_factor",")",";","ls",".","a","=","ly",".","a",";","lt","=","ly",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","lA","=","u_diffuse_intensity","*","ls",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lB","=","lA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lC","=","0.5","*","lp",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lD","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lp",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lD","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","lC",")",";"]}]}}]},{type:"textline",tokens:["vec3","lE","=","u_ambient","*","lD",";","float","lF","=","ff","(","lA",")",";","vec3","lG","=","u_emit","*","ls",".","rgb",";","vec3","lH","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lI","=","vec3","(","lt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lI","=","texture2D","(","u_specmap",",","kX",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["gl","(","lI",".","rgb",")",";","lH","=","mix","(","lH",",","lI",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","lJ","=","u_specular_params","[","0","]",";","vec2","lK","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","lL","=","lJ","*","lH",";","hh","lM","=","jE","(","lG",",","lE",",","lA",",","lL",",","kg",",","lp",",","lq",",","lK",",","u_diffuse_params",",","lF",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","lB","=","lM",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lN","=","u_reflect_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lN","=","0.0",";"]}]}}]},{type:"textline",tokens:["kH","(","lB",",","lq",",","lp",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lB","+=","lM",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["lB","=","max","(","lB","-","sqrt","(","0.01","*","-","min","(","kW",",","0.0",")",")",",","0.5","*","lB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["ke","(","lB",",","kW",",","u_time",",","lF",",","lp",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","kg",",","la",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","lO","=","ls",".","a",";","if","(","lO","<=","0.5",")","discard",";","lO","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lO","=","ls",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lO","+=","lM",".","a",".","a","*","lL",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lO","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lB","=","mix","(","kV","(","cC",",","lp",".","xz","*","u_refr_bump",")",",","lB",",","lO",")",";","lO","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lP","=","gF","(","u_cube_fog",",","lq",")",";","vec4","lQ","=","vec4","(","lP",",","u_fog_color_density",".","a",")",";","gl","(","lQ",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lQ","=","u_fog_color_density",";","lQ",".","rgb","*=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["gY","(","lB",",","la",",","lq",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","lQ",",","kW",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gy","(","lB",",","la",",","lQ",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lB","=","vec3","(","dJ",".","a",")",";"]}]}}]},{type:"textline",tokens:["gn","(","lB",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gq","(","lB",",","lO",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lB",",","lO",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kf",";","varying","vec3","kg",";","varying","vec3","kh",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ki",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kk",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","kW","=","a_position",";","vec3","kX","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kY","=","vec3","(","a_tangent",")",";","vec3","kZ","=","a_tangent","[","3","]","*","cross","(","kX",",","kY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kY","=","vec3","(","0.0",")",";","vec3","kZ","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kW","=","mix","(","kW",",","a_position_next",",","u_va_frame_factor",")",";","kX","=","mix","(","kX",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","k_","=","vec3","(","a_tangent",")",";","vec3","la","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","k_",")",";","kY","=","mix","(","kY",",","k_",",","u_va_frame_factor",")",";","kZ","=","mix","(","kZ",",","la",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bl","(","kW",",","kY",",","kZ",",","kX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lb","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lb","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","lc","=","fV","(","kW",",","kY",",","kZ",",","kX",",","lb",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ld","=","(","u_model_matrix","*","vec4","(","lb",",","1.0",")",")",".","xyz",";","mat4","le","=","_","(","u_camera_eye",",","ld",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lf","=","(","u_model_matrix","*","vec4","(","lb",",","1.0",")",")",".","xyz",";","le","=","le","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lf",")",";"]}]}}]},{type:"textline",tokens:["c","lc","=","ag","(","kW","-","lb",",","lb",",","kY",",","kZ",",","kX",",","le",")",";","lc",".","b","=","ld",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","lc","=","ag","(","kW",",","lb",",","kY",",","kZ",",","kX",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["float","lg","=","(","dot","(","cross","(","lc",".","e",",","lc",".","c",")",",","lc",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ki","=","vec4","(","lc",".","c",",","lg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","lc",".","a",",","lc",".","b",",","kX",")",";"]}]}}]},{type:"textline",tokens:["kg","=","lc",".","a",";","kh","=","lc",".","e",";","kf","=","u_camera_eye","-","lc",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kj","=","lc",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kj","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","lh","=","u_view_matrix","*","vec4","(","lc",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","lh",";"]}]}}]},{type:"textline",tokens:["vec4","li","=","u_proj_matrix","*","lh",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["li",".","xy","+=","u_subpixel_jitter","*","li",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["ge","(","li",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ge","(","lc",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lj","=","li",".","x",";","float","lk","=","li",".","y",";","float","ll","=","li",".","w",";","cC",".","x","=","(","lj","+","ll",")","/","2.0",";","cC",".","y","=","(","lk","+","ll",")","/","2.0",";","cC",".","z","=","ll",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kk","=","-","lh",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","li",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_ANIM_VALUES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VECTOR_VIEW","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_ANIM_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_anim_values","[","NUM_ANIM_VALUES","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kg",";","varying","vec4","cD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kh",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ki",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kk",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","kW","=","vec3","(","UNITY_VALUE_NODES",")",";","vec3","kX","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"},{type:"textline",tokens:["vec3","la","(","in","vec3","kY",",","in","float","kZ",")","{","vec3","k_","=","kX",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["k_","=","kV","(","cC",",","kY",".","xz","*","kZ",")",";"]}]}}]},{type:"textline",tokens:["return","k_",";","}"]}]}}]},{type:"textline",tokens:["vec3","ld","(","float","lb",",","vec3","lc",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","lc",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","mix","(","u_horizon_color",",","u_zenith_color",",","lb",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lk","(","vec3","le",")","{","vec4","lf","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","vec4","lg","=","mix","(","vec4","(","le",".","bg",",","lf",".","wz",")",",","vec4","(","le",".","gb",",","lf",".","xy",")",",","step","(","le",".","b",",","le",".","g",")",")",";","vec4","lh","=","mix","(","vec4","(","lg",".","xyw",",","le",".","r",")",",","vec4","(","le",".","r",",","lg",".","yzx",")",",","step","(","lg",".","x",",","le",".","r",")",")",";","float","li","=","lh",".","x","-","min","(","lh",".","w",",","lh",".","y",")",";","float","lj","=","1.0e-10",";","return","vec3","(","abs","(","lh",".","z","+","(","lh",".","w","-","lh",".","y",")","/","(","6.0","*","li","+","lj",")",")",",","li","/","(","lh",".","x","+","lj",")",",","lh",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lo","(","vec3","ll",")","{","vec4","lm","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","vec3","ln","=","abs","(","fract","(","vec3","(","ll",".","r",",","ll",".","r",",","ll",".","r",")","+","lm",".","xyz",")","*","6.0","-","lm",".","www",")",";","return","ll",".","b","*","mix","(","lm",".","xxx",",","clamp","(","ln","-","lm",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ll",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lq","(","vec2","lp",")","{","return","vec3","(","lp","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_TEXTURE_NORMAL4","||","USE_NODE_TEXTURE_COLOR4","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ls","(","vec3","lr",")","{","return","vec2","(","lr",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","lx","(","inout","vec3","lt",",","vec3","lu",",","vec3","lv",",","float","lw",")","{"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kH","(","lt",",","lu",",","lv",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kH","(","lt",",","lu",",","lv",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lw",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","hh","lQ","(","vec3","ly",",","vec3","lz",",","vec3","lA",",","vec3","lB",",","vec3","lC",",","vec3","lD",",","vec3","lE",",","vec2","lF",",","vec2","lG",",","float","lH",",","vec3","lI","[","NUM_LIGHTS","]",",","vec3","lJ","[","NUM_LIGHTS","]",",","vec3","lK","[","NUM_LIGHTS","]",",","vec4","lL","[","NUM_LIGHTS","]",",","vec4","lM","[","NUM_LIGHTS","]",",","float","lN",",","vec4","lO",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS_MAT"],group:{type:"group",parts:[{type:"textline",tokens:["return","jE","(","ly",",","lz",",","lA",",","lB",",","lC",",","lD",",","lE",",","lF",",","lG",",","lH",",","lI",",","lJ",",","lK",",","lL",",","lM",",","lN",",","lO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hh","lP",";","lP",".","a","=","vec4","(","lA",",","ZERO_VALUE_NODES",")",";","lP",".","b","=","kX",";","return","lP",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"mG",qualifier:["vec3"]},{type:"node_out",name:"mH",qualifier:["float"]},{type:"node_out",name:"mI",qualifier:["float"]},{type:"textline",tokens:["mG","=","normalize","(","mw",".","xyz",")",";","mH","=","abs","(","mw",".","z",")",";","mI","=","length","(","mw",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"mJ",qualifier:["float"]},{type:"node_in",name:"mK",qualifier:["float"]},{type:"node_in",name:"mL",qualifier:["float"]},{type:"node_out",name:"mM",qualifier:["vec3"]},{type:"textline",tokens:["mM","=","vec3","(","mJ",",","mK",",","mL",")",";"]}]}},{type:"node",name:"COMBHSV",group:{type:"group",parts:[{type:"node_in",name:"mN",qualifier:["float"]},{type:"node_in",name:"mO",qualifier:["float"]},{type:"node_in",name:"mP",qualifier:["float"]},{type:"node_out",name:"mQ",qualifier:["vec3"]},{type:"textline",tokens:["mQ","=","lo","(","vec3","(","mN",",","mO",",","mP",")",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"lR",qualifier:["varying","vec2"]},{type:"node_out",name:"mR",qualifier:["vec3"]},{type:"textline",tokens:["mR","=","lq","(","lR",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"lS",qualifier:["varying","vec3"]},{type:"node_out",name:"mS",qualifier:["vec3"]},{type:"textline",tokens:["mS","=","lS",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"lT",qualifier:["varying","float"]},{type:"node_out",name:"mT",qualifier:["float"]},{type:"textline",tokens:["mT","=","lT",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"lU",qualifier:["varying","vec2"]},{type:"node_out",name:"mU",qualifier:["float"]},{type:"node_out",name:"mV",qualifier:["float"]},{type:"textline",tokens:["mU","=","lU","[","0","]",";","mV","=","lU","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"lV",qualifier:["varying","vec3"]},{type:"node_out",name:"mW",qualifier:["float"]},{type:"node_out",name:"mX",qualifier:["float"]},{type:"node_out",name:"mY",qualifier:["float"]},{type:"textline",tokens:["mW","=","lV","[","0","]",";","mX","=","lV","[","1","]",";","mY","=","lV","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"mZ",qualifier:["vec3"]},{type:"textline",tokens:["mZ","=","ms",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"m_",qualifier:["float"]},{type:"textline",tokens:["m_","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"na",qualifier:["vec3"]},{type:"textline",tokens:["na","=","mu",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"nb",qualifier:["vec3"]},{type:"textline",tokens:["nb","=","vec3","(","mv",".","r",",","-","mv",".","b",",","mv",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"nc",qualifier:["float"]},{type:"node_in",name:"nd",qualifier:["float"]},{type:"node_in",name:"ne",qualifier:["float"]},{type:"node_in",name:"nf",qualifier:["float"]},{type:"node_in",name:"ng",qualifier:["vec3"]},{type:"node_out",name:"nh",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","ni","=","lk","(","ng",")",";","ni","[","0","]","+=","(","nc","-","0.5",")",";","if","(","ni","[","0","]",">","UNITY_VALUE_NODES",")","ni","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","ni","[","0","]","<","ZERO_VALUE_NODES",")","ni","[","0","]","+=","UNITY_VALUE_NODES",";","ni","*=","vec3","(","UNITY_VALUE_NODES",",","nd",",","ne",")",";","ni","=","mix","(","kW",",","mix","(","kX",",","ni",",","step","(","kX",",","ni",")",")",",","step","(","ni",",","kW",")",")",";","nh","=","mix","(","ng",",","lo","(","ni",")",",","nf",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"nj",qualifier:["float"]},{type:"node_in",name:"nk",qualifier:["vec3"]},{type:"node_out",name:"nl",qualifier:["vec3"]},{type:"textline",tokens:["nl","=","mix","(","nk",",","kW","-","nk",",","nj",")",";"]}]}},{type:"node",name:"LAMP",group:{type:"group",parts:[{type:"node_param",name:"lW",qualifier:["const","float"]},{type:"node_out",name:"nm",qualifier:["vec3"]},{type:"node_out",name:"nn",qualifier:["vec3"]},{type:"node_out",name:"no",qualifier:["float"]},{type:"node_out",name:"np",qualifier:["float"]},{type:"textline",tokens:["{","const","int","nq","=","int","(","lW",")",";","vec4","nr","=","u_lamp_light_factors","[","nq","]",";","vec3","ns","=","u_lamp_light_directions","[","nq","]",";","vec3","nt","=","u_lamp_light_positions","[","nq","]",";","float","nu","=","nr",".","z",";","nm","=","u_lamp_light_color_intensities","[","nq","]",";","if","(","nu","!=","-","UNITY_VALUE_NODES",")","{","nn","=","nt","-","kg",";","no","=","length","(","nn",")",";","nn","=","normalize","(","nn",")",";","np","=","nu","/","(","nu","+","no","*","no",")",";","float","nv","=","nr",".","x",";","float","nw","=","nr",".","y",";","if","(","nv",">","-","UNITY_VALUE_NODES",")","{","float","nx","=","dot","(","nn",",","ns",")",";","nx","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","nx","-","nv",")","/","nw",")",";","np","*=","nx",";","}","}","else","{","nn","=","ns",";","no","=","length","(","nt","-","kg",")",";","np","=","UNITY_VALUE_NODES",";","}","}"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"lX",qualifier:["vec3"]},{type:"node_in",name:"ny",qualifier:["vec3"]},{type:"node_out",name:"nz",qualifier:["vec3"]},{type:"node_out",name:"nA",qualifier:["float"]},{type:"textline",tokens:["nz","=","lX",";","nA","=","-","dot","(","ny",",","lX",")",";"]}]}},{type:"node",name:"VECTOR_VIEW",group:{type:"group",parts:[{type:"node_in",name:"nB",qualifier:["vec3"]},{type:"node_out",name:"nC",qualifier:["vec3"]},{type:"textline",tokens:["nC","=","-","(","u_view_matrix_frag","*","vec4","(","nB",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"lY",qualifier:["vec3"]},{type:"node_in",name:"nD",qualifier:["vec3"]},{type:"node_out",name:"nE",qualifier:["vec3"]},{type:"textline",tokens:["nE","=","nD","*","lY",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"lZ",qualifier:["mat4"]},{type:"node_param",name:"l_",qualifier:["float"]},{type:"node_param",name:"ma",qualifier:["float"]},{type:"node_param",name:"mb",qualifier:["vec3"]},{type:"node_param",name:"mc",qualifier:["vec3"]},{type:"node_in",name:"nF",qualifier:["vec3"]},{type:"node_out",name:"nG",qualifier:["vec3"]},{type:"textline",tokens:["nG","=","(","lZ","*","vec4","(","nF",",","UNITY_VALUE_NODES",")",")",".","xyz",";","if","(","l_","==","UNITY_VALUE_NODES",")","nG","=","max","(","nG",",","mb",")",";","if","(","ma","==","UNITY_VALUE_NODES",")","nG","=","min","(","nG",",","mc",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"nH",qualifier:["float"]},{type:"node_in",name:"nI",qualifier:["float"]},{type:"node_out",name:"nJ",qualifier:["float"]},{type:"textline",tokens:["nJ","=","nH","+","nI",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"nK",qualifier:["float"]},{type:"node_in",name:"nL",qualifier:["float"]},{type:"node_out",name:"nM",qualifier:["float"]},{type:"textline",tokens:["nM","=","nK","-","nL",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"nN",qualifier:["float"]},{type:"node_in",name:"nO",qualifier:["float"]},{type:"node_out",name:"nP",qualifier:["float"]},{type:"textline",tokens:["nP","=","nN","*","nO",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"nQ",qualifier:["float"]},{type:"node_in",name:"nR",qualifier:["float"]},{type:"node_out",name:"nS",qualifier:["float"]},{type:"textline",tokens:["nS","=","(","nR","!=","ZERO_VALUE_NODES",")","?","nQ","/","nR",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"nT",qualifier:["float"]},{type:"node_in",name:"nU",qualifier:["float"]},{type:"node_out",name:"nV",qualifier:["float"]},{type:"textline",tokens:["nV","=","sin","(","nT",")",";","nU",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"nW",qualifier:["float"]},{type:"node_in",name:"nX",qualifier:["float"]},{type:"node_out",name:"nY",qualifier:["float"]},{type:"textline",tokens:["nY","=","cos","(","nW",")",";","nX",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"nZ",qualifier:["float"]},{type:"node_in",name:"n_",qualifier:["float"]},{type:"node_out",name:"oa",qualifier:["float"]},{type:"textline",tokens:["oa","=","tan","(","nZ",")",";","n_",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"ob",qualifier:["float"]},{type:"node_in",name:"oc",qualifier:["float"]},{type:"node_out",name:"od",qualifier:["float"]},{type:"textline",tokens:["od","=","(","ob","<=","UNITY_VALUE_NODES","&&","ob",">=","-","UNITY_VALUE_NODES",")","?","asin","(","ob",")",":","ZERO_VALUE_NODES",";","oc",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"oe",qualifier:["float"]},{type:"node_in",name:"of",qualifier:["float"]},{type:"node_out",name:"og",qualifier:["float"]},{type:"textline",tokens:["og","=","(","oe","<=","UNITY_VALUE_NODES","&&","oe",">=","-","UNITY_VALUE_NODES",")","?","acos","(","oe",")",":","ZERO_VALUE_NODES",";","of",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"oh",qualifier:["float"]},{type:"node_in",name:"oi",qualifier:["float"]},{type:"node_out",name:"oj",qualifier:["float"]},{type:"textline",tokens:["oj","=","atan","(","oh",")",";","oi",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"ok",qualifier:["float"]},{type:"node_in",name:"ol",qualifier:["float"]},{type:"node_out",name:"om",qualifier:["float"]},{type:"textline",tokens:["if","(","ok","<","ZERO_VALUE_NODES","||","ok","==","ZERO_VALUE_NODES","&&","ol","==","ZERO_VALUE_NODES",")","om","=","ZERO_VALUE_NODES",";","else","om","=","pow","(","ok",",","ol",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"on",qualifier:["float"]},{type:"node_in",name:"oo",qualifier:["float"]},{type:"node_out",name:"op",qualifier:["float"]},{type:"textline",tokens:["op","=","(","on",">","ZERO_VALUE_NODES","&&","oo",">","ZERO_VALUE_NODES",")","?","log2","(","on",")","/","log2","(","oo",")",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"oq",qualifier:["float"]},{type:"node_in",name:"or",qualifier:["float"]},{type:"node_out",name:"os",qualifier:["float"]},{type:"textline",tokens:["os","=","min","(","oq",",","or",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"ot",qualifier:["float"]},{type:"node_in",name:"ou",qualifier:["float"]},{type:"node_out",name:"ov",qualifier:["float"]},{type:"textline",tokens:["ov","=","max","(","ot",",","ou",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"ow",qualifier:["float"]},{type:"node_in",name:"ox",qualifier:["float"]},{type:"node_out",name:"oy",qualifier:["float"]},{type:"textline",tokens:["oy","=","floor","(","ow","+","0.5",")",";","ox",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"oz",qualifier:["float"]},{type:"node_in",name:"oA",qualifier:["float"]},{type:"node_out",name:"oB",qualifier:["float"]},{type:"textline",tokens:["oB","=","(","oz","<","oA",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"oC",qualifier:["float"]},{type:"node_in",name:"oD",qualifier:["float"]},{type:"node_out",name:"oE",qualifier:["float"]},{type:"textline",tokens:["oE","=","(","oC",">","oD",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"oF",qualifier:["float"]},{type:"node_in",name:"oG",qualifier:["float"]},{type:"node_out",name:"oH",qualifier:["float"]},{type:"textline",tokens:["oH","=","abs","(","oG",")",">","0.000001","?","mod","(","oF",",","oG",")",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_ABSOLUTE",group:{type:"group",parts:[{type:"node_in",name:"oI",qualifier:["float"]},{type:"node_in",name:"oJ",qualifier:["float"]},{type:"node_out",name:"oK",qualifier:["float"]},{type:"textline",tokens:["oK","=","abs","(","oI",")",";","oJ",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"oL",qualifier:["float"]},{type:"node_in",name:"oM",qualifier:["vec3"]},{type:"node_in",name:"oN",qualifier:["vec3"]},{type:"node_out",name:"oO",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oP","=","clamp","(","oL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oO","=","mix","(","oM",",","oN",",","oP",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"oQ",qualifier:["float"]},{type:"node_in",name:"oR",qualifier:["vec3"]},{type:"node_in",name:"oS",qualifier:["vec3"]},{type:"node_out",name:"oT",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oU","=","clamp","(","oQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oT","=","mix","(","oR",",","oR","+","oS",",","oU",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"oV",qualifier:["float"]},{type:"node_in",name:"oW",qualifier:["vec3"]},{type:"node_in",name:"oX",qualifier:["vec3"]},{type:"node_out",name:"oY",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oZ","=","clamp","(","oV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oY","=","mix","(","oW",",","oW","*","oX",",","oZ",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"o_",qualifier:["float"]},{type:"node_in",name:"pa",qualifier:["vec3"]},{type:"node_in",name:"pb",qualifier:["vec3"]},{type:"node_out",name:"pc",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pd","=","clamp","(","o_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pc","=","mix","(","pa",",","pa","-","pb",",","pd",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"pe",qualifier:["float"]},{type:"node_in",name:"pf",qualifier:["vec3"]},{type:"node_in",name:"pg",qualifier:["vec3"]},{type:"node_out",name:"ph",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pi","=","clamp","(","pe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pj","=","UNITY_VALUE_NODES","-","pi",";","ph","=","kW","-","(","vec3","(","pj",")","+","pi","*","(","kW","-","pg",")",")","*","(","kW","-","pf",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"pk",qualifier:["float"]},{type:"node_in",name:"pl",qualifier:["vec3"]},{type:"node_in",name:"pm",qualifier:["vec3"]},{type:"node_out",name:"pn",qualifier:["vec3"]},{type:"textline",tokens:["{","float","po","=","clamp","(","pk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pp","=","UNITY_VALUE_NODES","-","po",";","pm","+=","step","(","pm",",","kX",")",";","pn","=","pp","*","pl","+","po","*","pl","/","pm",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"pq",qualifier:["float"]},{type:"node_in",name:"pr",qualifier:["vec3"]},{type:"node_in",name:"ps",qualifier:["vec3"]},{type:"node_out",name:"pt",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pu","=","clamp","(","pq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pt","=","mix","(","pr",",","abs","(","pr","-","ps",")",",","pu",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"pv",qualifier:["float"]},{type:"node_in",name:"pw",qualifier:["vec3"]},{type:"node_in",name:"px",qualifier:["vec3"]},{type:"node_out",name:"py",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pz","=","clamp","(","pv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","py","=","min","(","pw",".","rgb",",","px",".","rgb","*","pz",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"pA",qualifier:["float"]},{type:"node_in",name:"pB",qualifier:["vec3"]},{type:"node_in",name:"pC",qualifier:["vec3"]},{type:"node_out",name:"pD",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pE","=","clamp","(","pA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pD","=","max","(","pB",".","rgb",",","pC",".","rgb","*","pE",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"pF",qualifier:["float"]},{type:"node_in",name:"pG",qualifier:["vec3"]},{type:"node_in",name:"pH",qualifier:["vec3"]},{type:"node_out",name:"pI",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pJ","=","clamp","(","pF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pK","=","UNITY_VALUE_NODES","-","pJ",";","vec3","pL","=","vec3","(","pK",")",";","pI","=","mix","(","pG","*","(","pL","+","2.0","*","pJ","*","pH",")",",","kW","-","(","pL","+","2.0","*","pJ","*","(","kW","-","pH",")",")","*","(","kW","-","pG",")",",","step","(","0.5",",","pG",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"pM",qualifier:["float"]},{type:"node_in",name:"pN",qualifier:["vec3"]},{type:"node_in",name:"pO",qualifier:["vec3"]},{type:"node_out",name:"pP",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pQ","=","clamp","(","pM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pR","=","kW","-","pQ","*","pO",";","vec3","pS","=","pN","/","(","pR","+","step","(","pR",",","kX",")",")",";","pP","=","(","kW","-","step","(","pN",",","kX",")",")","*","mix","(","mix","(","kW",",","pS",",","step","(","pS",",","kW",")",")",",","kW",",","step","(","pR",",","kX",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"pT",qualifier:["float"]},{type:"node_in",name:"pU",qualifier:["vec3"]},{type:"node_in",name:"pV",qualifier:["vec3"]},{type:"node_out",name:"pW",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pX","=","clamp","(","pT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pY","=","kW","-","pX","*","(","kW","-","pV",")",";","vec3","pZ","=","kW","-","(","kW","-","pU",")","/","(","pY","+","step","(","pY",",","kX",")",")",";","pW","=","mix","(","mix","(","kX",",","mix","(","kW",",","pZ",",","step","(","pZ",",","kW",")",")",",","step","(","ZERO_VALUE_NODES",",","pZ",")",")",",","kX",",","step","(","pY",",","kX",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"p_",qualifier:["float"]},{type:"node_in",name:"qa",qualifier:["vec3"]},{type:"node_in",name:"qb",qualifier:["vec3"]},{type:"node_out",name:"qc",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qd","=","clamp","(","p_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qe",",","qf",",","qg",";","qc","=","qa",";","qf","=","lk","(","qb",")",";","if","(","qf",".","y","!=","ZERO_VALUE_NODES",")","{","qe","=","lk","(","qc",")",";","qe",".","x","=","qf",".","x",";","qg","=","lo","(","qe",")",";","qc","=","mix","(","qc",",","qg",",","qd",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"qh",qualifier:["float"]},{type:"node_in",name:"qi",qualifier:["vec3"]},{type:"node_in",name:"qj",qualifier:["vec3"]},{type:"node_out",name:"qk",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ql","=","clamp","(","qh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qm","=","UNITY_VALUE_NODES","-","ql",";","qk","=","qi",";","vec3","qn",",","qo",";","qn","=","lk","(","qk",")",";","if","(","qn",".","y","!=","ZERO_VALUE_NODES",")","{","qo","=","lk","(","qj",")",";","qn",".","y","=","qm","*","qn",".","y","+","ql","*","qo",".","y",";","qk","=","lo","(","qn",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"qp",qualifier:["float"]},{type:"node_in",name:"qq",qualifier:["vec3"]},{type:"node_in",name:"qr",qualifier:["vec3"]},{type:"node_out",name:"qs",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qt","=","clamp","(","qp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qu","=","UNITY_VALUE_NODES","-","qt",";","vec3","qv",",","qw",";","qv","=","lk","(","qq",")",";","qw","=","lk","(","qr",")",";","qv",".","z","=","qu","*","qv",".","z","+","qt","*","qw",".","z",";","qs","=","lo","(","qv",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"qx",qualifier:["float"]},{type:"node_in",name:"qy",qualifier:["vec3"]},{type:"node_in",name:"qz",qualifier:["vec3"]},{type:"node_out",name:"qA",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qB","=","clamp","(","qx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qC",",","qD",",","qE",";","qA","=","qy",";","qD","=","lk","(","qz",")",";","if","(","qD",".","y","!=","ZERO_VALUE_NODES",")","{","qC","=","lk","(","qA",")",";","qC",".","x","=","qD",".","x",";","qC",".","y","=","qD",".","y",";","qE","=","lo","(","qC",")",";","qA","=","mix","(","qA",",","qE",",","qB",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"qF",qualifier:["float"]},{type:"node_in",name:"qG",qualifier:["vec3"]},{type:"node_in",name:"qH",qualifier:["vec3"]},{type:"node_out",name:"qI",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qJ","=","clamp","(","qF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qK","=","UNITY_VALUE_NODES","-","qJ",";","vec3","qL","=","qH","+","qG","-","qH","*","qG",";","qI","=","qG","*","(","vec3","(","qK",")","+","vec3","(","qJ",")","*","(","(","kW","-","qG",")","*","qH","+","qL",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"qM",qualifier:["float"]},{type:"node_in",name:"qN",qualifier:["vec3"]},{type:"node_in",name:"qO",qualifier:["vec3"]},{type:"node_out",name:"qP",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qQ","=","clamp","(","qM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qP","=","clamp","(","qN","+","qQ","*","(","2.0","*","qO","-","kW",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"qR",qualifier:["vec3"]},{type:"node_in",name:"qS",qualifier:["float"]},{type:"textline",tokens:["mA","=","qR",";","mF","=","qS",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"md",qualifier:["const","vec3"]},{type:"node_param",name:"me",qualifier:["const","vec4"]},{type:"node_param",name:"mf",qualifier:["const","float"]},{type:"node_in",name:"qT",qualifier:["vec3"]},{type:"node_in",name:"qU",qualifier:["float"]},{type:"node_in",name:"qV",qualifier:["vec3"]},{type:"node_in",name:"qW",qualifier:["vec3"]},{type:"node_out",name:"qX",qualifier:["vec3"]},{type:"node_out",name:"qY",qualifier:["float"]},{type:"node_out",name:"qZ",qualifier:["vec3"]},{type:"textline",tokens:["{","qT","=","clamp","(","qT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qU","=","clamp","(","qU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qV","=","clamp","(","qV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","q_","=","qT",";","float","ra","=","md","[","0","]",";","vec2","rb","=","vec2","(","md","[","1","]",",","md","[","2","]",")",";","vec3","rc","=","mx","*","qT",";","vec3","rd","=","me","[","1","]","*","qV",";","float","re","=","me","[","0","]",";","vec2","rf","=","vec2","(","me","[","2","]",",","me","[","3","]",")",";","float","rg","=","ff","(","q_",")",";","vec3","rh",";","if","(","mf","==","UNITY_VALUE_NODES",")","rh","=","normalize","(","qW",")",";","else","rh","=","ms",";","float","ri","=","0.5","*","rh",".","y","+","0.5",";","vec3","rj","=","mz","*","u_environment_energy","*","ld","(","ri",",","rh",")",";","hh","rk","=","lQ","(","rc",",","rj",",","q_",",","rd",",","mv",",","rh",",","mu",",","rf",",","rb",",","rg",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";","qX","=","(","ra","==","UNITY_VALUE_NODES",")","?","rk",".","a",".","rgb",":","kX",";","qY","=","qU",";","qZ","=","rh",";","if","(","re","==","UNITY_VALUE_NODES",")","{","qY","+=","rk",".","a",".","a","*","rd",".","r","*","my",";","qY","=","clamp","(","qY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qX","+=","rk",".","b",";","mB","=","rk",".","b",";","}","else","{","mB","=","kX",";","}","mC","=","rh",";","mE","=","rg",";","}"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"mg",qualifier:["const","vec3"]},{type:"node_param",name:"mh",qualifier:["const","vec4"]},{type:"node_param",name:"mi",qualifier:["const","float"]},{type:"node_in",name:"rl",qualifier:["vec3"]},{type:"node_in",name:"rm",qualifier:["float"]},{type:"node_in",name:"rn",qualifier:["vec3"]},{type:"node_in",name:"ro",qualifier:["vec3"]},{type:"node_in",name:"rp",qualifier:["float"]},{type:"node_in",name:"rq",qualifier:["float"]},{type:"node_in",name:"rr",qualifier:["vec4"]},{type:"node_in",name:"rs",qualifier:["float"]},{type:"node_in",name:"rt",qualifier:["float"]},{type:"node_out",name:"ru",qualifier:["vec3"]},{type:"node_out",name:"rv",qualifier:["float"]},{type:"node_out",name:"rw",qualifier:["vec3"]},{type:"node_out",name:"rx",qualifier:["vec3"]},{type:"node_out",name:"ry",qualifier:["vec3"]},{type:"textline",tokens:["{","rl","=","clamp","(","rl",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rm","=","clamp","(","rm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rn","=","clamp","(","rn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","rz","=","rl",";","float","rA","=","mg","[","0","]",";","vec2","rB","=","vec2","(","mg","[","1","]",",","mg","[","2","]",")",";","vec3","rC","=","rp","*","rl",";","vec3","rD","=","mh","[","1","]","*","rn",";","float","rE","=","mh","[","0","]",";","vec2","rF","=","vec2","(","mh","[","2","]",",","mh","[","3","]",")",";","float","rG","=","ff","(","rz",")",";","vec3","rH",";","if","(","mi","==","UNITY_VALUE_NODES",")","rH","=","normalize","(","ro",")",";","else","rH","=","ms",";","float","rI","=","0.5","*","rH",".","y","+","0.5",";","vec3","rJ","=","mz","*","u_environment_energy","*","ld","(","rI",",","rH",")",";","hh","rK","=","lQ","(","rC",",","rJ",",","rz",",","rD",",","mv",",","rH",",","mu",",","rF",",","rB",",","rG",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","rq",",","rr",")",";","ru","=","(","rA","==","UNITY_VALUE_NODES",")","?","rK",".","a",".","rgb",":","kX",";","rv","=","rm",";","rw","=","rH",";","rx","=","rK",".","a",".","rgb",";","ry","=","rK",".","b",";","lx","(","ru",",","mu",",","rw",",","rs",")",";","if","(","rE","==","UNITY_VALUE_NODES",")","{","ru","+=","rK",".","b",";","rv","+=","rK",".","a",".","a","*","rD",".","r","*","rt",";","rv","=","clamp","(","rv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mB","=","rK",".","b",";","}","else","{","mB","=","kX",";","}","mC","=","rH",";","mE","=","rG",";","}"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"mj",qualifier:["vec3"]},{type:"node_out",name:"rL",qualifier:["vec3"]},{type:"textline",tokens:["rL","=","mj",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"rM",qualifier:["vec3"]},{type:"node_out",name:"rN",qualifier:["float"]},{type:"textline",tokens:["rN","=","rM",".","r","*","0.35","+","rM",".","g","*","0.45","+","rM",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"rO",qualifier:["vec3"]},{type:"node_out",name:"rP",qualifier:["float"]},{type:"node_out",name:"rQ",qualifier:["float"]},{type:"node_out",name:"rR",qualifier:["float"]},{type:"textline",tokens:["rP","=","rO",".","r",";","rQ","=","rO",".","g",";","rR","=","rO",".","b",";"]}]}},{type:"node",name:"SEPHSV",group:{type:"group",parts:[{type:"node_in",name:"rS",qualifier:["vec3"]},{type:"node_out",name:"rT",qualifier:["float"]},{type:"node_out",name:"rU",qualifier:["float"]},{type:"node_out",name:"rV",qualifier:["float"]},{type:"textline",tokens:["{","vec3","rW","=","lk","(","rS",")",";","rT","=","rW",".","r",";","rU","=","rW",".","g",";","rV","=","rW",".","b",";","}"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"rX",qualifier:["float"]},{type:"node_in",name:"rY",qualifier:["float"]},{type:"node_in",name:"rZ",qualifier:["float"]},{type:"node_out",name:"r_",qualifier:["float"]},{type:"textline",tokens:["r_","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","rX","-","rZ",")","*","rY",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"sa",qualifier:["vec3"]},{type:"node_out",name:"sb",qualifier:["vec3"]},{type:"textline",tokens:["sb","=","max","(","kX",",","sa",")",";","sb","=","pow","(","sb",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"sc",qualifier:["vec3"]},{type:"node_out",name:"sd",qualifier:["vec3"]},{type:"textline",tokens:["sd","=","max","(","kX",",","sc",")",";","sd","=","pow","(","sd",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"se",qualifier:["vec3"]},{type:"node_out",name:"sf",qualifier:["vec3"]},{type:"node_out",name:"sg",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sh","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","ls","(","se",")",")",";","sf","=","sh",".","xyz",";","gl","(","sf",")",";","sg","=","sh",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"si",qualifier:["vec3"]},{type:"node_out",name:"sj",qualifier:["vec3"]},{type:"node_out",name:"sk",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sl","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","ls","(","si",")",")",";","mD","=","sl",".","xyz","-","0.5",";","sj","=","normalize","(","mr","*","mD",")",";","sk","=","sl",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"sm",qualifier:["vec3"]},{type:"node_out",name:"sn",qualifier:["vec3"]},{type:"node_out",name:"so",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sp","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","sm",")",";","sn","=","sp",".","xyz",";","gl","(","sn",")",";","so","=","sp",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sq",qualifier:["vec3"]},{type:"node_in",name:"sr",qualifier:["vec3"]},{type:"node_out",name:"ss",qualifier:["vec3"]},{type:"node_out",name:"st",qualifier:["float"]},{type:"node_out",name:"su",qualifier:["vec3"]},{type:"node_out",name:"sv",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sw","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","ls","(","sq",")",")",";","ss","=","sw",".","xyz",";","gl","(","ss",")",";","st","=","sw",".","w",";","sw","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","ls","(","sr",")",")",";","su","=","sw",".","xyz",";","gl","(","su",")",";","sv","=","sw",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sx",qualifier:["vec3"]},{type:"node_in",name:"sy",qualifier:["vec3"]},{type:"node_out",name:"sz",qualifier:["vec3"]},{type:"node_out",name:"sA",qualifier:["float"]},{type:"node_out",name:"sB",qualifier:["vec3"]},{type:"node_out",name:"sC",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sD","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","ls","(","sx",")",")",";","mD","=","sD",".","xyz","-","0.5",";","sz","=","normalize","(","mr","*","mD",")",";","sA","=","sD",".","w",";","sD","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","ls","(","sy",")",")",";","mD","=","sD",".","xyz","-","0.5",";","sB","=","normalize","(","mr","*","mD",")",";","sC","=","sD",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sE",qualifier:["vec3"]},{type:"node_in",name:"sF",qualifier:["vec3"]},{type:"node_in",name:"sG",qualifier:["vec3"]},{type:"node_out",name:"sH",qualifier:["vec3"]},{type:"node_out",name:"sI",qualifier:["float"]},{type:"node_out",name:"sJ",qualifier:["vec3"]},{type:"node_out",name:"sK",qualifier:["float"]},{type:"node_out",name:"sL",qualifier:["vec3"]},{type:"node_out",name:"sM",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sN","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","ls","(","sE",")",")",";","sH","=","sN",".","xyz",";","gl","(","sH",")",";","sI","=","sN",".","w",";","sN","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","ls","(","sF",")",")",";","sJ","=","sN",".","xyz",";","gl","(","sJ",")",";","sK","=","sN",".","w",";","sN","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","ls","(","sG",")",")",";","sL","=","sN",".","xyz",";","gl","(","sL",")",";","sM","=","sN",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR4",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR4_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sO",qualifier:["vec3"]},{type:"node_in",name:"sP",qualifier:["vec3"]},{type:"node_in",name:"sQ",qualifier:["vec3"]},{type:"node_in",name:"sR",qualifier:["vec3"]},{type:"node_out",name:"sS",qualifier:["vec3"]},{type:"node_out",name:"sT",qualifier:["float"]},{type:"node_out",name:"sU",qualifier:["vec3"]},{type:"node_out",name:"sV",qualifier:["float"]},{type:"node_out",name:"sW",qualifier:["vec3"]},{type:"node_out",name:"sX",qualifier:["float"]},{type:"node_out",name:"sY",qualifier:["vec3"]},{type:"node_out",name:"sZ",qualifier:["float"]},{type:"textline",tokens:["{","vec4","s_","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","ls","(","sO",")",")",";","sS","=","s_",".","xyz",";","gl","(","sS",")",";","sT","=","s_",".","w",";","s_","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","ls","(","sP",")",")",";","sU","=","s_",".","xyz",";","gl","(","sU",")",";","sV","=","s_",".","w",";","s_","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","ls","(","sQ",")",")",";","sW","=","s_",".","xyz",";","gl","(","sW",")",";","sX","=","s_",".","w",";","s_","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","ls","(","sR",")",")",";","sY","=","s_",".","xyz",";","gl","(","sY",")",";","sZ","=","s_",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"ta",qualifier:["vec3"]},{type:"node_in",name:"tb",qualifier:["vec3"]},{type:"node_in",name:"tc",qualifier:["vec3"]},{type:"node_out",name:"td",qualifier:["vec3"]},{type:"node_out",name:"te",qualifier:["float"]},{type:"node_out",name:"tf",qualifier:["vec3"]},{type:"node_out",name:"tg",qualifier:["float"]},{type:"node_out",name:"th",qualifier:["vec3"]},{type:"node_out",name:"ti",qualifier:["float"]},{type:"textline",tokens:["{","vec4","tj","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","ls","(","ta",")",")",";","mD","=","tj",".","xyz","-","0.5",";","td","=","normalize","(","mr","*","mD",")",";","te","=","tj",".","w",";","tj","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","ls","(","tb",")",")",";","mD","=","tj",".","xyz","-","0.5",";","tf","=","normalize","(","mr","*","mD",")",";","tg","=","tj",".","w",";","tj","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","ls","(","tc",")",")",";","mD","=","tj",".","xyz","-","0.5",";","th","=","normalize","(","mr","*","mD",")",";","ti","=","tj",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL4",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL4_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"tk",qualifier:["vec3"]},{type:"node_in",name:"tl",qualifier:["vec3"]},{type:"node_in",name:"tm",qualifier:["vec3"]},{type:"node_in",name:"tn",qualifier:["vec3"]},{type:"node_out",name:"to",qualifier:["vec3"]},{type:"node_out",name:"tp",qualifier:["float"]},{type:"node_out",name:"tq",qualifier:["vec3"]},{type:"node_out",name:"tr",qualifier:["float"]},{type:"node_out",name:"ts",qualifier:["vec3"]},{type:"node_out",name:"tt",qualifier:["float"]},{type:"node_out",name:"tu",qualifier:["vec3"]},{type:"node_out",name:"tv",qualifier:["float"]},{type:"textline",tokens:["{","vec4","tw","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","ls","(","tk",")",")",";","mD","=","tw",".","xyz","-","0.5",";","to","=","normalize","(","mr","*","mD",")",";","tp","=","tw",".","w",";","tw","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","ls","(","tl",")",")",";","mD","=","tw",".","xyz","-","0.5",";","tq","=","normalize","(","mr","*","mD",")",";","tr","=","tw",".","w",";","tw","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","ls","(","tm",")",")",";","mD","=","tw",".","xyz","-","0.5",";","ts","=","normalize","(","mr","*","mD",")",";","tt","=","tw",".","w",";","tw","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","ls","(","tn",")",")",";","mD","=","tw",".","xyz","-","0.5",";","tu","=","normalize","(","mr","*","mD",")",";","tv","=","tw",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"mk",qualifier:["const","float"]},{type:"node_out",name:"tx",qualifier:["float"]},{type:"textline",tokens:["tx","=","mk",";"]}]}},{type:"node",name:"ANIM_VALUE",group:{type:"group",parts:[{type:"node_param",name:"ml",qualifier:["const","int"]},{type:"node_out",name:"ty",qualifier:["float"]},{type:"textline",tokens:["ty","=","u_anim_values","[","ml","]",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"tz",qualifier:["vec3"]},{type:"node_in",name:"tA",qualifier:["vec3"]},{type:"node_out",name:"tB",qualifier:["vec3"]},{type:"node_out",name:"tC",qualifier:["float"]},{type:"textline",tokens:["tB","=","tz","+","tA",";","tC","=","(","abs","(","tB","[","0","]",")","+","abs","(","tB","[","1","]",")","+","abs","(","tB","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"tD",qualifier:["vec3"]},{type:"node_in",name:"tE",qualifier:["vec3"]},{type:"node_out",name:"tF",qualifier:["vec3"]},{type:"node_out",name:"tG",qualifier:["float"]},{type:"textline",tokens:["tF","=","tD","-","tE",";","tG","=","(","abs","(","tF","[","0","]",")","+","abs","(","tF","[","1","]",")","+","abs","(","tF","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"tH",qualifier:["vec3"]},{type:"node_in",name:"tI",qualifier:["vec3"]},{type:"node_out",name:"tJ",qualifier:["vec3"]},{type:"node_out",name:"tK",qualifier:["float"]},{type:"textline",tokens:["tJ","=","tH","+","tI",";","tK","=","length","(","tJ",")",";","tJ","=","normalize","(","tJ",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"tL",qualifier:["vec3"]},{type:"node_in",name:"tM",qualifier:["vec3"]},{type:"node_out",name:"tN",qualifier:["vec3"]},{type:"node_out",name:"tO",qualifier:["float"]},{type:"textline",tokens:["tN","=","kX",";","tO","=","dot","(","tL",",","tM",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"tP",qualifier:["vec3"]},{type:"node_in",name:"tQ",qualifier:["vec3"]},{type:"node_out",name:"tR",qualifier:["vec3"]},{type:"node_out",name:"tS",qualifier:["float"]},{type:"textline",tokens:["tR","=","cross","(","tP",",","tQ",")",";","tS","=","length","(","tR",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"tT",qualifier:["vec3"]},{type:"node_in",name:"tU",qualifier:["vec3"]},{type:"node_out",name:"tV",qualifier:["vec3"]},{type:"node_out",name:"tW",qualifier:["float"]},{type:"textline",tokens:["tV","=","normalize","(","tT",")",";","tW","=","length","(","tT",")",";","tU",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"tX",qualifier:["vec3"]},{type:"node_in",name:"tY",qualifier:["vec3"]},{type:"node_out",name:"tZ",qualifier:["vec3"]},{type:"textline",tokens:["tZ","=","reflect","(","-","tX",",","tY",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"t_",qualifier:["vec3"]},{type:"node_in",name:"ua",qualifier:["float"]},{type:"node_in",name:"ub",qualifier:["const","float"]},{type:"node_in",name:"uc",qualifier:["const","float"]},{type:"node_out",name:"ud",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ue","=","length","(","mw",")",";","if","(","ue","<","uc",")","{","vec2","uf","=","ls","(","t_",")",";","float","ug","=","clamp","(","0.5","*","(","uc","-","ue",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","uh","=","ua","*","ug",";","vec3","ui","=","normalize","(","mu","*","mr",")",";","float","uj","=","UNITY_VALUE_NODES","/","ub",";","vec2","uk","=","ui",".","xy","*","uh","/","(","ub","*","ui",".","z",")",";","float","ul","=","UNITY_VALUE_NODES",";","float","um","=","texture2D","(","node_PARALLAX_var_texture",",","uf",")",".","a",";","for","(","float","un","=","1.0",";","un","<=","ub",";","un","++",")","{","if","(","um","<","ul",")","{","ul","-=","uj",";","uf","-=","uk",";","um","=","texture2D","(","node_PARALLAX_var_texture",",","uf",")",".","a",";","}","}","vec2","uo","=","uf","+","uk",";","float","up","=","texture2D","(","node_PARALLAX_var_texture",",","uo",")",".","a","-","(","ul","+","uj",")",";","float","uq","=","um","-","ul",";","float","ur","=","uq","/","(","uq","-","up",")",";","uf","=","ur","*","uo","+","(","UNITY_VALUE_NODES","-","ur",")","*","uf",";","ud","=","lq","(","uf",")",";","}","else","ud","=","t_",";","}"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"us",qualifier:["vec3"]},{type:"node_out",name:"ut",qualifier:["vec3"]},{type:"textline",tokens:["ut","=","clamp","(","us",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}},{type:"node",name:"REFRACTION",group:{type:"group",parts:[{type:"node_in",name:"uu",qualifier:["vec3"]},{type:"node_in",name:"uv",qualifier:["float"]},{type:"node_out",name:"uw",qualifier:["vec3"]},{type:"textline",tokens:["uw","=","la","(","uu",",","uv",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"ux",qualifier:["float"]},{type:"node_in",name:"uy",qualifier:["float"]},{type:"node_in",name:"uz",qualifier:["float"]},{type:"node_in",name:"uA",qualifier:["float"]},{type:"node_in",name:"uB",qualifier:["float"]},{type:"node_out",name:"uC",qualifier:["float"]},{type:"node_out",name:"uD",qualifier:["vec4"]},{type:"textline",tokens:["uC","=","ux",";","uD","=","vec4","(","uy",",","uz",",","uA",",","uB",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"uE",qualifier:["float"]},{type:"textline",tokens:["uE","=","u_time",";"]}]}},{type:"node",name:"SMOOTHSTEP",group:{type:"group",parts:[{type:"node_in",name:"uF",qualifier:["float"]},{type:"node_in",name:"uG",qualifier:["float"]},{type:"node_in",name:"uH",qualifier:["float"]},{type:"node_out",name:"uI",qualifier:["float"]},{type:"textline",tokens:["uI","=","smoothstep","(","uG",",","uH",",","uF",")",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mm","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","mn","=","kg",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mo","=","kh",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","mo","=","mo",";","else","mo","=","-","mo",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mp","=","cross","(","mo",",","ki",".","xyz",")","*","ki",".","w",";","mat3","mq","=","mat3","(","ki",".","xyz",",","mp",",","mo",")",";","mat3","mr","=","mq",";"]}]}}]},{type:"textline",tokens:["vec3","ms","=","normalize","(","mo",")",";"]}]}}]},{type:"textline",tokens:["vec3","mt","=","u_camera_eye_frag","-","kg",";","vec3","mu","=","normalize","(","mt",")",";","vec3","mv","=","kg",";","vec4","mw","=","cD",";","float","mx","=","u_emit",";","float","my","=","u_specular_alpha",";","float","mz","=","u_ambient",";","vec3","mA",";","vec3","mB",";","vec3","mC",";","vec3","mD",";","float","mE",";","float","mF",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","uJ","=","mA",";","float","uK","=","mF",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["uJ","=","max","(","uJ","-","sqrt","(","0.01","*","-","min","(","mn",",","ZERO_VALUE_NODES",")",")",",","0.5","*","uJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["ke","(","uJ",",","mn",",","u_time",",","mE",",","mo",",","u_sun_direction",",","mm",",","u_sun_quaternion",",","kg",",","length","(","cD",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uL","=","gF","(","u_cube_fog",",","mu",")",";","vec4","uM","=","vec4","(","uL",",","u_fog_color_density",".","a",")",";","gl","(","uM",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","uM","=","u_fog_color_density",";","uM",".","rgb","*=","mm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["gY","(","uJ",",","length","(","cD",")",",","mu",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uM",",","mn",",","length","(","mm",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gy","(","uJ",",","length","(","cD",")",",","uM",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","uK","<","0.5",")","discard",";","uK","=","UNITY_VALUE_NODES",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","uN","=","texture2DProj","(","u_shadow_mask",",","cC",")",".","rg",";","float","uO","=","uN",".","g",";","uJ","=","vec3","(","uO",")",";"]}]}}]},{type:"textline",tokens:["gn","(","uJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gq","(","uJ",",","uK",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uJ",",","uK",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kg",";","varying","vec4","cD",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kh",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ki",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kk",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"lR",qualifier:["varying","vec2"]},{type:"textline",tokens:["lR","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"lW",qualifier:["varying","vec3"]},{type:"textline",tokens:["lW","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"lX",qualifier:["varying","float"]},{type:"textline",tokens:["lX","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"lY",qualifier:["varying","vec2"]},{type:"textline",tokens:["lY","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"lZ",qualifier:["varying","vec3"]},{type:"textline",tokens:["lZ","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","l_","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ma","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mb","=","vec3","(","a_tangent",")",";","vec3","mc","=","a_tangent","[","3","]","*","cross","(","ma",",","mb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mb","=","vec3","(","0.0",")",";","vec3","mc","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ma","=","vec3","(","0.0",")",";","vec3","mb","=","vec3","(","0.0",")",";","vec3","mc","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["l_","=","mix","(","l_",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["ma","=","mix","(","ma",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","md","=","vec3","(","a_tangent",")",";","vec3","me","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","md",")",";","mb","=","mix","(","mb",",","md",",","u_va_frame_factor",")",";","mc","=","mix","(","mc",",","me",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bl","(","l_",",","mb",",","mc",",","ma",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mf","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mf","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","(","u_model_matrix","*","vec4","(","mf",",","1.0",")",")",".","xyz",";","mat4","mh","=","_","(","u_camera_eye",",","mg",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mi","=","(","u_model_matrix","*","vec4","(","mf",",","1.0",")",")",".","xyz",";","mh","=","mh","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","mi",")",";"]}]}}]},{type:"textline",tokens:["c","mj","=","ag","(","l_","-","mf",",","mf",",","mb",",","mc",",","ma",",","mh",")",";","mj",".","b","=","mg",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","mj","=","ag","(","l_",",","mf",",","mb",",","mc",",","ma",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","mj",".","a",",","mj",".","b",",","ma",")",";"]}]}}]},{type:"textline",tokens:["kg","=","mj",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kh","=","mj",".","e",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","mk","=","(","dot","(","cross","(","mj",".","e",",","mj",".","c",")",",","mj",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ki","=","vec4","(","mj",".","c",",","mk",")",";"]}]}}]}]}}]},{type:"textline",tokens:["cD","=","u_view_matrix","*","vec4","(","mj",".","a",",","1.0",")",";","vec4","ml","=","u_proj_matrix","*","cD",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["ml",".","xy","+=","u_subpixel_jitter","*","ml",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["ge","(","ml",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ge","(","mj",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","mm","=","ml",".","x",";","float","mn","=","ml",".","y",";","float","mo","=","ml",".","w",";","cC",".","x","=","(","mm","+","mo",")","/","2.0",";","cC",".","y","=","(","mn","+","mo",")","/","2.0",";","cC",".","z","=","mo",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kk","=","-","cD",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","ml",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","l_",";","varying","vec3","kj",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","ma","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","mb","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","ma",")",";","float","mc","=","u_diffuse_color",".","a","*","l_","*","(","1.0","-","clamp","(","mb",",","0.0",",","1.0",")",")",";","vec3","md","=","kj","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gy","(","md",",","length","(","cD",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["gn","(","md",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gq","(","md",",","mc",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","md",",","mc",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","l_",";","varying","vec3","kj",";","varying","vec3","cD",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","ma","mS",";","mS","=","mR","(",")",";","vec4","mT","=","u_view_matrix","*","vec4","(","mS",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","mT",";","l_","=","mS",".","c",";","kj","=","mS",".","d",";","cD","=","mT",".","xyz",";","float","mU","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","mS",".","a","*","mU",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","l_",";","varying","vec3","kj",";","varying","vec2","a",";","varying","vec3","kf",";","varying","vec3","kg",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kW","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kX","=","texture2D","(","u_sampler",",","a",")",";","gl","(","kX",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["kW",".","rgb","=","mix","(","kW",".","rgb",",","kX",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["kW",".","rgb","*=","mix","(","vec3","(","1.0",")",",","kX",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["kW",".","a","=","kX",".","a",";"]}]}}]},{type:"textline",tokens:["kW",".","rgb","*=","kj",";","vec3","kY","=","u_diffuse_intensity","*","kW",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kZ","=","u_emit","*","kW",".","rgb",";","vec3","k_","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","la","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","k_",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lb","=","0.5",";","vec3","la","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","lb",")",";"]}]}}]},{type:"textline",tokens:["vec3","lc","=","u_ambient","*","la",";","float","ld","=","u_specular_params","[","0","]",";","vec2","le","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","lf","=","ld","*","u_specular_color",";","vec3","lg","=","normalize","(","kf",")",";","hh","lh","=","jE","(","kZ",",","lc",",","kY",",","lf",",","kg",",","k_",",","lg",",","le",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","li","=","lh",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","li","=","kY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gy","(","li",",","length","(","cD",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","lj","=","kW",".","a","*","l_",";","gn","(","li",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gq","(","li",",","lj",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","li",",","lj",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";","varying","float","l_",";","varying","vec3","kj",";","varying","vec2","a",";","varying","vec3","kf",";","varying","vec3","kg",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","kY","(","vec2","kW",",","vec2","kX",")","{","return","(","atan","(","kX",".","y",",","kX",".","x",")","-","atan","(","kW",".","y",",","kW",".","x",")",")",";","}","void","main","(",")","{","ma","kZ",";","kZ","=","mR","(",")",";","float","k_",";","mat4","la",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","k_","=","kZ",".","e",";","la","=","y","(","kZ",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","k_","=","kZ",".","e",";","la","=","j","(",")",";","la","[","3","]","=","vec4","(","kZ",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","k_","=","kZ",".","e",";","la","=","n","(","radians","(","90.0",")",")",";","la","[","3","]","=","vec4","(","kZ",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","k_","=","kY","(","vec2","(","0.0",",","-","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","kZ",".","e",";","la","=","l","(","radians","(","-","90.0",")",")",";","la","[","3","]","=","vec4","(","kZ",".","b",",","1.0",")",";","}","vec4","lb","=","vec4","(","a_p_bb_vertex","*","2.0","*","kZ",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","lc","=","la","*","p","(","k_",")","*","lb",";","vec4","ld","=","u_view_matrix","*","lc",";","vec4","le","=","u_proj_matrix","*","ld",";","gl_Position","=","le",";","l_","=","kZ",".","c",";","kj","=","kZ",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","kg","=","lc",".","xyz",";","kf","=","u_camera_eye","-","lc",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","ld",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","mS",";","const","float","mT","=","0.99",";","const","float","mU","=","1.8",";","const","int","mV","=","8",";","float","ne","(","vec3","mW",",","vec3","mX",")","{","float","mY","=","dot","(","mX",",","mX",")",";","float","mZ","=","2.0","*","dot","(","mX",",","mW",")",";","float","m_","=","dot","(","mW",",","mW",")","-","1.0",";","float","na","=","mZ","*","mZ","-","4.0","*","mY","*","m_",";","float","nb","=","sqrt","(","na",")",";","float","nc","=","(","-","mZ","-","nb",")","/","2.0",";","float","nd","=","m_","/","nc",";","return","nd",";","}","float","nl","(","float","nf",",","float","ng",")","{","float","nh","=","3.0","*","(","1.0","-","ng","*","ng",")",";","float","ni","=","2.0","*","(","2.0","+","ng","*","ng",")",";","float","nj","=","1.0","+","nf","*","nf",";","float","nk","=","pow","(","1.0","+","ng","*","ng","-","2.0","*","ng","*","nf",",","1.5",")",";","nk","=","max","(","nk",",","0.00001",")",";","return","(","nh","/","ni",")","*","(","nj","/","nk",")",";","}","float","nt","(","vec3","nm",",","vec3","nn",",","float","no",")","{","float","np","=","dot","(","nn",",","-","nm",")",";","if","(","np","<","0.0",")","{","return","1.0",";","}","vec3","nq","=","nm","+","np","*","nn",";","if","(","length","(","nq",")","<","no",")","{","return","0.0",";","}","else","if","(","length","(","nq",")",">=","no",")","{","vec3","nr","=","normalize","(","nq",")","*","no","-","nm",";","float","ns","=","acos","(","dot","(","normalize","(","nr",")",",","nn",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","ns","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","nx","(","float","nu",",","vec3","nv",",","float","nw",")","{","return","nv","-","nv","*","pow","(","u_sky_color",",","vec3","(","nw","/","nu",")",")",";","}","void","main","(",")","{","vec3","ny","=","normalize","(","mS",")",";","vec3","nz","=","u_sun_direction",";","float","nA","=","dot","(","ny",",","nz",")",";","float","nB","=","nl","(","nA",",","-","0.01",")","*","u_rayleigh_brightness","*","nz",".","y",";","float","nC","=","nl","(","nA","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","nz",".","y",")",";","float","nD","=","smoothstep","(","0.0",",","100.0",",","nl","(","nA",",","0.9995",")",")","*","u_spot_brightness",";","vec3","nE","=","vec3","(","0.0",",","mT",",","0.0",")",";","float","nF","=","ne","(","nE",",","ny",")",";","float","nG","=","nF","/","float","(","mV",")",";","float","nH","=","nt","(","nE",",","ny",",","mT","-","0.3",")",";","vec3","nI","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","nJ","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","nK","=","0",";","nK","<","mV",";","nK","++",")","{","float","nL","=","nG","*","float","(","nK",")",";","vec3","nM","=","nE","+","ny","*","nL",";","float","nN","=","nt","(","nM",",","nz",",","mT","-","0.2",")",";","float","nO","=","ne","(","nM",",","nz",")",";","vec3","nP","=","nx","(","nO",",","vec3","(","mU",")",",","u_scatter_strength",")","*","nN",";","nI","+=","nx","(","sqrt","(","nL",")",",","u_sky_color","*","nP",",","u_rayleigh_strength",")",";","nJ","+=","nx","(","nL",",","nP",",","u_mie_strength",")",";","}","nI","=","nI","*","nH","*","pow","(","nF",",","u_rayleigh_collection_power",")","/","float","(","mV",")",";","nJ","=","(","nJ","*","nH","*","pow","(","nF",",","u_mie_collection_power",")",")","/","float","(","mV",")",";","vec3","nQ","=","vec3","(","nD","*","nJ","+","nC","*","nJ","+","nB","*","nI",")",";","gn","(","nQ",")",";","gl_FragColor","=","vec4","(","nQ",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","mS",";","void","main","(",")","{","vec4","kW","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","kX","=","u_cube_view_matrix","*","kW",";","mS","=","kX",".","xyz",";","gl_Position","=","kW",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_sampler",",","a",")",";","gn","(","kW",".","rgb",")",";","gq","(","kW",".","rgb",",","kW",".","a",")",";","gl_FragColor","=","kW",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","kW","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","kX","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","kW",",","0.0",")",";","kX",".","x","/=","kX",".","w",";","kX",".","y","/=","kX",".","w",";","kX","+=","99999.0","*","step","(","kX",".","z",",","0.0",")",";","kX","+=","100.0","*","(","step","(","1.0",",","abs","(","kX",".","x",")",")","+","step","(","1.0",",","abs","(","kX",".","y",")",")",")",";","kX",".","x","=","-","a_lf_dist","*","kX",".","x",";","kX",".","y","=","-","a_lf_dist","*","kX",".","y",";","float","kY","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","kZ","=","vec2","(","a_lf_bb_vertex",".","x","/","kY",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","k_","=","1.9",";","kZ","*=","(","1.0","+","k_","*","length","(","kX",".","xy",")",")",";","}","gl_Position","=","vec4","(","kX",".","xy","+","kZ",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","mS",";","void","main","(",")","{","vec3","kW","=","textureCube","(","u_sky",",","mS",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl","(","kW",".","rgb",")",";","float","kX","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","kX","=","min","(","-","kX","*","0.03",",","0.8",")",";","float","kY","=","length","(","u_sun_intensity",")","+","u_environment_energy",";","vec3","kZ","=","normalize","(","mS",")",";","vec3","k_","=","vec3","(","0.0",")",";","vec4","la","=","u_underwater_fog_color_density",";","la",".","rgb","=","mix","(","la",".","rgb",",","k_",",","min","(","-","kZ",".","y","+","kX",",","1.0",")",")","*","kY",";","float","lb","=","clamp","(","sign","(","kZ",".","y","-","0.05","*","kX",")",",","0.0",",","1.0",")",";","kW","=","mix","(","la",".","rgb",",","kW",",","lb",")",";","gn","(","kW",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kW",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","mS",";","void","main","(",")","{","vec4","kW","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","kX","=","u_sky_vp_inverse","*","kW",";","mS","=","kX",".","xyz",";","gl_Position","=","kW",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.001"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";","uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kf",";","varying","vec3","kg",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kh",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ki",";","varying","vec3","mT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mU",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","nj","(","in","vec2","mW",",","in","vec3","mX",",","in","vec3","mY",",","in","vec3","mZ",",","out","float","m_",")","{","vec3","na","=","reflect","(","-","mY",",","mX",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nb","=","mW",".","xy","+","mX",".","xz","*","REFL_BUMP","/","kk",";","m_","=","u_reflect_factor",";","vec3","nc",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["nc","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nc","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","nd","=","dot","(","mY",",","mX",")",";","m_","*=","max","(","1.0","-","1.0","/","nd",",","1.0",")",";","}","else","{","nc","=","texture2D","(","u_reflectmap",",","nb",")",".","rgb",";","gl","(","nc",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["m_","=","u_mirror_factor",";","vec3","nc","=","mZ","*","textureCube","(","u_mirrormap",",","na",")",".","rgb",";","gl","(","nc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["m_","=","1.0",";","vec3","nc","=","mZ","*","vec3","(","0.3",",","0.5",",","1.0",")",";","gl","(","nc",")",";"]}]}}]},{type:"textline",tokens:["vec3","ne","=","normalize","(","na","+","mY",")",";","float","nf","=","1.0","-","dot","(","mY",",","ne",")",";","float","ng","=","u_fresnel_params","[","3","]",";","float","nh","=","u_fresnel_params","[","2","]",";","float","ni","=","ng","+","(","1.0","-","ng",")","*","pow","(","nf",",","nh",")",";","m_","=","min","(","m_","*","ni",",","1.0",")",";","return","nc",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","nk","=","mat3","(","ki",",","mT",",","kh",")",";"]}]}}]},{type:"textline",tokens:["vec3","nl","=","normalize","(","kh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","nk","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","nl","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","(","REFLECTIVE","||","FOAM","||","(","WATER_EFFECTS","&&","!","DISABLE_FOG",")",")","||","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nm","=","kg",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nn","=","vec2","(","mU",".","x",",","-","mU",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nn","=","vec2","(","kg",".","x",",","-","kg",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nn","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","no","=","vec3","(","0.0",")",";","vec3","np","=","texture2D","(","u_normalmap0",",","nn","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","no","+=","np",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nq","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["nq","+=","np",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["np","=","texture2D","(","u_normalmap0",",","nn","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","no","+=","np",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["nq","+=","np",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["np","=","texture2D","(","u_normalmap0",",","nn","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","no","+=","np",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["nq","+=","np",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["np","=","texture2D","(","u_normalmap0",",","nn","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","no","+=","np",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["nq","+=","np",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nr","=","nk","*","nq",";","if","(","!","f","(","nr",",","vec3","(","0.0",")",")",")","nr","=","normalize","(","nr",")",";","vec3","ns","=","mix","(","nl",",","nr",",","0.2",")",";","ns","=","normalize","(","ns",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["nl","=","mix","(","nl",",","normalize","(","nk","*","no",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nl","=","mix","(","nl",",","normalize","(","nk","*","no",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["nl","=","normalize","(","nl",")",";"]}]}}]},{type:"textline",tokens:["vec3","nt","=","normalize","(","kf",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nu","=","cC",".","xy","/","cC",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","nv","=","kk","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nw","=","u_diffuse_color",".","a",";","vec4","nx","=","texture2DProj","(","u_scene_depth",",","cC",")",";","float","ny","=","co","(","nx",")",";","float","nz","=","max","(","ny","-","kk",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nA","=","nu","+","nl",".","xz","*","u_refr_bump","/","kk",";","float","nB","=","kN","(","ny",",","nA",",","nu",")",";","float","nC","=","max","(","nB","-","kk",",","0.0",")",";","float","nD","=","u_view_max_depth","/","ABSORB","*","nC",";","float","nE",";","if","(","u_cam_water_depth","<","0.0",")","nE","=","0.0",";","else","nE","=","min","(","nw","*","nD",",","1.0",")",";","float","nF","=","u_view_max_depth","/","ABSORB","*","nz",";","nw","=","min","(","15.0","*","nw","*","u_view_max_depth","*","nz",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nF","=","u_view_max_depth","/","ABSORB","*","nz",";","if","(","u_cam_water_depth",">","0.0",")","nw","=","min","(","nw","*","nF",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["nw","*=","min","(","5.0","*","nv",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nw","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","nE","=","1.0","-","nw",";","vec2","nA","=","nu","+","nl",".","xz","*","REFR_BUMP","/","kk",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nG","=","texture2D","(","u_refractmap",",","nA",")",".","rgb",";","gl","(","nG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","nH","=","pow","(","min","(","mV",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","nI","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","nH",")",";","nH","=","pow","(","min","(","mV",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","nI","=","mix","(","u_shore_water_col",",","nI",",","nH",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nI","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nJ","=","max","(","1.0","-","u_view_max_depth","*","nz",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nJ","=","1.0","-","nw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","nK","=","max","(","3.0","*","nm",",","0.0",")",";","nK","*=","nK",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nL","=","normalize","(","vec3","(","mV",".","r",",","0.0",",","mV",".","g",")",")",";","vec3","nM","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","nL",",","0.8",")",")",";","float","nN","=","max","(","2.5","*","dot","(","ns",",","nM",")","-","0.7",",","0.0",")",";","nJ","+=","nN","*","(","1.0","-","mV",".","b",")",";","nK","*=","(","1.0","-","0.95","*","pow","(","mV",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["nJ","+=","nK",";","nJ","=","min","(","u_foam_factor","*","nJ",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","nO","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","nn","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","nP","=","u_specular_params","[","0","]",";","vec2","nQ","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","nR","=","nP","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nS","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","nl",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nS","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["vec3","nT","=","u_ambient","*","nS",";","vec3","nU","=","nT","+","u_sun_intensity",";","float","nV",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nW","=","nj","(","nu",",","nl",",","nt",",","nU",",","nV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nW","=","nj","(","vec2","(","0.0",")",",","nl",",","nt",",","nU",",","nV",")",";"]}]}}]},{type:"textline",tokens:["vec3","nX","=","u_diffuse_intensity","*","nI",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS","&&","DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","nY","=","max","(","dot","(","u_sun_direction",",","-","kh",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","nt",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","nY","=","clamp","(","SSS_STRENGTH","*","nY",",","0.0",",","1.0",")",";","nX","=","mix","(","nX",",","u_shallow_water_col",",","nY",")",";","nX","=","mix","(","nX",",","u_shore_water_col",",","nY",")",";"]}]}}]},{type:"textline",tokens:["hh","nZ","=","jE","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","nX",",","nR",",","kg",",","nl",",","nt",",","nQ",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","nX","=","nZ",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["nX","=","mix","(","nG",",","nX",",","nE",")",";"]}]}}]},{type:"textline",tokens:["nX","=","mix","(","nX",",","nW",",","nV",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","n_","=","mix","(","nO",".","g",",","nO",".","r",",","clamp","(","4.0","*","(","nJ","-","0.75",")",",","0.0",",","1.0",")",")",";","n_","=","mix","(","nO",".","b",",","n_",",","clamp","(","2.0","*","nJ","-","1.0",",","0.0",",","1.0",")",")",";","n_","=","mix","(","0.0",",","n_",",","nJ",")",";","nX","=","mix","(","nX",",","nU",",","n_",")",";"]}]}}]},{type:"textline",tokens:["nX","+=","nZ",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","oa","=","gF","(","u_cube_fog",",","nt",")",";","vec4","ob","=","vec4","(","oa",",","u_fog_color_density",".","a",")",";","gl","(","ob",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","ob","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","hg","(","nX",",","nv",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";","}","else","{","gy","(","nX",",","nv",",","ob",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gy","(","nX",",","nv",",","ob",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gn","(","nX",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["nw","=","max","(","nw",",","nZ",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["nw","+=","n_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gq","(","nX",",","nw",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","nX",",","nw",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Z",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Z",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_cascad_step",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kf",";","varying","vec3","kg",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kh",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ki",";","varying","vec3","mT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mU",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lb","(","in","vec2","kW",")","{","vec2","kX","=","vec2","(","(","kW",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","SHORE_MAP_CENTER_Z","+","kW",".","y",")","/","SHORE_MAP_SIZE_Z",")","+","0.5",";","vec4","kY","=","texture2D","(","u_shore_dist_map",",","kX",")",";","const","vec2","kZ","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","k_","=","dot","(","kY",".","ba",",","kZ",")",";","vec2","la","=","normalize","(","kY",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","la",",","k_",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","lp","(","inout","vec3","lc",",","in","float","ld",",","in","vec3","le",")","{","float","lf","=","dC","(","DST_NOISE_SCALE_0","*","(","lc",".","xz","+","DST_NOISE_FREQ_0","*","ld",")",")","*","dC","(","DST_NOISE_SCALE_1","*","(","lc",".","zx","-","DST_NOISE_FREQ_1","*","ld",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lg","=","le",".","b",";","float","lh","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","li","=","sqrt","(","lg",")",";","float","lj","=","max","(","lg",",","DIR_MIN_SHR_FAC",")","*","(","sin","(","(","li","/","lh","+","DIR_FREQ","*","ld",")",")",")","*","max","(","dC","(","DIR_NOISE_SCALE","*","(","lc",".","xz","+","DIR_NOISE_FREQ","*","ld",")",")",",","DIR_MIN_NOISE_FAC",")",";","float","lk","=","WAVES_HEIGHT","*","mix","(","lj",",","lf",",","max","(","li",",","DST_MIN_FAC",")",")",";","vec2","ll","=","le",".","rg",";","float","lm","=","WAVES_HOR_FAC","*","lj","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","lg",")",",","0.0",")",";","vec2","ln","=","lm","*","ll",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lk","=","WAVES_HEIGHT","*","lf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lo","=","cX","(","20.0","/","WAVES_LENGTH","*","(","lc",".","xz","-","0.25","*","ld",")",")",".","x","+","cX","(","17.0","/","WAVES_LENGTH","*","(","lc",".","zx","+","0.1","*","ld",")",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lc",".","xz","+=","ln",";","lo","*=","lg",";"]}]}}]},{type:"textline",tokens:["lk","+=","0.05","*","lo",";"]}]}}]},{type:"textline",tokens:["lc",".","y","+=","lk",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","lq","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lr","=","abs","(","a_cascad_step",")",";","vec2","ls","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","lr",")",";","lq",".","y","+=","WATER_LEVEL",";","lq",".","xz","+=","ls",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","lt","=","ag","(","lq",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["mU","=","lt",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["mV","=","lb","(","lt",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","lu","=","length","(","u_wind",")",";","float","lv","=","u_time",";","lv","*=","lu",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lw","=","lr",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lw","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","lx","=","lt",".","a","+","vec3","(","lw",",","0.0",",","0.0",")",";","vec3","ly","=","lt",".","a","+","vec3","(","0.0",",","0.0",",","lw",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lz","=","lb","(","lx",".","xz",")",";","vec3","lA","=","lb","(","ly",".","xz",")",";","lp","(","lx",",","lv",",","lz",")",";","lp","(","ly",",","lv",",","lA",")",";","lp","(","lt",".","a",",","lv",",","mV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lp","(","lx",",","lv",",","vec3","(","0.0",")",")",";","lp","(","ly",",","lv",",","vec3","(","0.0",")",")",";","lp","(","lt",".","a",",","lv",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_cascad_step","<","0.0",")","{","lx",".","y","=","lt",".","a",".","y",";","ly",".","y","=","lt",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","lB","=","normalize","(","lx","-","lt",".","a",")",";","vec3","lC","=","normalize","(","ly","-","lt",".","a",")",";","kh","=","normalize","(","cross","(","lC",",","lB",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["ki","=","lC",";","mT","=","cross","(","kh",",","ki",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lD","=","dot","(","kh",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lE","=","clamp","(","0.8","-","lD",",","0.0",",","1.0",")",";","kh","=","mix","(","kh",",","vec3","(","0.0",",","1.0",",","0.0",")",",","lE",")",";"]}]}}]}]}}]},{type:"textline",tokens:["kg","=","lt",".","a",";","kf","=","u_camera_eye","-","lt",".","a",";","vec4","lF","=","u_view_matrix","*","vec4","(","lt",".","a",",","1.0",")",";","vec4","lG","=","u_proj_matrix","*","lF",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lH","=","lG",".","x",";","float","lI","=","lG",".","y",";","float","lJ","=","lG",".","w",";","cC",".","x","=","(","lH","+","lJ",")","/","2.0",";","cC",".","y","=","(","lI","+","lJ",")","/","2.0",";","cC",".","z","=","lJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["kk","=","-","lF",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lG",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","mW",";","const","float","mX","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","mY","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","mY","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","mZ","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","m_","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","na","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","nb","=","vec3","(","0.0",")",";","float","nc","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nd","=","sign","(","mW","-","vec3","(","0.02","*","mX",")",")",";","if","(","nd",".","x","<","0.0","||","nd",".","y","<","0.0","||","nd",".","z","<","0.0",")","{","nb","=","mY",";","nc","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nd","=","sign","(","mW","-","vec3","(","0.02","*","mX",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","nd",".","x","<","0.0","||","nd",".","y","<","0.0","||","nd",".","z","<","0.0",")","nb","=","u_wireframe_edge_color",";","else","nb","=","na",";","nc","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","nd",".","x","<","0.0","||","nd",".","y","<","0.0","||","nd",".","z","<","0.0",")","nc","=","1.0",";","else","nc","=","0.0",";","nb","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","nd",".","x","<","0.0","||","nd",".","y","<","0.0","||","nd",".","z","<","0.0",")","nb","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","nb","=","mZ",";","else","nb","=","m_",";","nc","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","ne","=","fwidth","(","mW",")",";","vec3","nf","=","smoothstep","(","vec3","(","0.0",")",",","ne","*","mX",",","mW",")",";","float","ng","=","min","(","min","(","nf",".","x",",","nf",".","y",")",",","nf",".","z",")",";","ng","=","clamp","(","ng",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","nb","=","vec3","(","mix","(","u_wireframe_edge_color",",","na",",","ng",")",")",";","nc","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","nb","=","u_wireframe_edge_color",";","nc","=","mix","(","1.0",",","0.0",",","ng",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","nb","=","mix","(","u_wireframe_edge_color",",","mZ",",","ng",")",";","else","nb","=","mix","(","u_wireframe_edge_color",",","m_",",","ng",")",";","nc","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["gn","(","nb",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gq","(","nb",",","nc",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","nb",",","nc",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","mW",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","mW","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","mW","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","mW","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","kW","=","a_position",";","vec3","kX","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","kY","=","ag","(","kW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kW","=","mix","(","kW",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kZ","=","vec3","(","0.0",")",";","vec3","k_","=","vec3","(","0.0",")",";","bl","(","kW",",","kZ",",","k_",",","kX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","la","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","la","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","kY","=","fV","(","kW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","la",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lb","=","(","u_model_matrix","*","vec4","(","la",",","1.0",")",")",".","xyz",";","mat4","lc","=","_","(","u_camera_eye",",","lb",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ld","=","(","u_model_matrix","*","vec4","(","la",",","1.0",")",")",".","xyz",";","lc","=","lc","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ld",")",";"]}]}}]},{type:"textline",tokens:["c","kY","=","ag","(","kW","-","la",",","la",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lc",")",";","kY",".","b","=","lb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","kY","=","ag","(","kW",",","la",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","kY",".","a",",","kY",".","b",",","kX",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","le","=","u_view_matrix","*","vec4","(","kY",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","le",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","kX","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","kW","[","0","]",",","kX","[","1","]",",","kX","[","2","]",",","kW","[","3","]","+","kX","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","kZ","(","float","kW",",","float","kX",")","{","vec2","kY","=","a","+","vec2","(","kW",",","kX",")","*","u_texel_size",";","return","texture2D","(","u_color",",","kY",")",";","}","float","lc","(","vec4","k_",")","{","vec3","la","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","lb","=","dot","(","k_",".","rgb",",","la",")",";","return","lb",";","}","vec4","lv","(",")","{","vec4","ld","=","kZ","(","-","1.0",",","-","1.0",")",";","vec4","le","=","kZ","(","1.0",",","-","1.0",")",";","vec4","lf","=","kZ","(","-","1.0",",","1.0",")",";","vec4","lg","=","kZ","(","1.0",",","1.0",")",";","vec4","lh","=","kZ","(","0.0",",","0.0",")",";","float","li","=","lc","(","ld",")",";","float","lj","=","lc","(","le",")",";","float","lk","=","lc","(","lf",")",";","float","ll","=","lc","(","lg",")",";","float","lm","=","lc","(","lh",")",";","float","ln","=","min","(","lm",",","min","(","min","(","li",",","lj",")",",","min","(","lk",",","ll",")",")",")",";","float","lo","=","max","(","lm",",","max","(","max","(","li",",","lj",")",",","max","(","lk",",","ll",")",")",")",";","vec2","lp",";","lp",".","x","=","-","(","(","li","+","lj",")","-","(","lk","+","ll",")",")",";","lp",".","y","=","(","(","li","+","lk",")","-","(","lj","+","ll",")",")",";","float","lq","=","max","(","(","li","+","lj","+","lk","+","ll",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","lr","=","1.0","/","(","min","(","abs","(","lp",".","x",")",",","abs","(","lp",".","y",")",")","+","lq",")",";","lp","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","lp","*","lr",")",")","*","u_texel_size",";","vec4","ls","=","0.5","*","(","texture2D","(","u_color",",","a","+","lp","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","lp","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","lt","=","ls","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","lp","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","lp","*","0.5",")",")",";","float","lu","=","lc","(","lt",")",";","if","(","(","lu","<","ln",")","||","(","lu",">","lo",")",")","return","ls",";","else","return","lt",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","om","(",")","{","vec2","lw",";","lw",".","x","=","a",".","x",";","lw",".","y","=","a",".","y",";","vec4","lx","=","texture2D","(","u_color",",","lw",")",";","vec4","ly","=","kZ","(","0.0",",","1.0",")",";","vec4","lz","=","kZ","(","1.0",",","0.0",")",";","vec4","lA","=","kZ","(","0.0",",","-","1.0",")",";","vec4","lB","=","kZ","(","-","1.0",",","0.0",")",";","float","lC","=","lc","(","ly",")",";","float","lD","=","lc","(","lz",")",";","float","lE","=","lc","(","lA",")",";","float","lF","=","lc","(","lB",")",";","float","lG","=","lc","(","lx",")",";","float","lH","=","max","(","lC",",","lG",")",";","float","lI","=","min","(","lC",",","lG",")",";","float","lJ","=","max","(","lD",",","lH",")",";","float","lK","=","min","(","lD",",","lI",")",";","float","lL","=","max","(","lE",",","lF",")",";","float","lM","=","min","(","lE",",","lF",")",";","float","lN","=","max","(","lL",",","lJ",")",";","float","lO","=","min","(","lM",",","lK",")",";","float","lP","=","lN","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","lQ","=","lN","-","lO",";","float","mX","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","lP",")",";","bool","mY","=","lQ","<","mX",";","if","(","mY",")","return","lx",";","vec4","mZ","=","kZ","(","-","1.0",",","-","1.0",")",";","vec4","m_","=","kZ","(","1.0",",","1.0",")",";","vec4","na","=","kZ","(","1.0",",","-","1.0",")",";","vec4","nb","=","kZ","(","-","1.0",",","1.0",")",";","float","nc","=","lc","(","mZ",")",";","float","nd","=","lc","(","m_",")",";","float","ne","=","lc","(","na",")",";","float","nf","=","lc","(","nb",")",";","float","ng","=","lE","+","lC",";","float","nh","=","lF","+","lD",";","float","ni","=","1.0","/","lQ",";","float","nj","=","ng","+","nh",";","float","nk","=","(","-","2.0","*","lG",")","+","ng",";","float","nl","=","(","-","2.0","*","lG",")","+","nh",";","float","nm","=","ne","+","nd",";","float","nn","=","nc","+","ne",";","float","no","=","(","-","2.0","*","lD",")","+","nm",";","float","np","=","(","-","2.0","*","lE",")","+","nn",";","float","nq","=","nc","+","nf",";","float","nr","=","nf","+","nd",";","float","ns","=","(","abs","(","nk",")","*","2.0",")","+","abs","(","no",")",";","float","nt","=","(","abs","(","nl",")","*","2.0",")","+","abs","(","np",")",";","float","nu","=","(","-","2.0","*","lF",")","+","nq",";","float","nv","=","(","-","2.0","*","lC",")","+","nr",";","float","nw","=","abs","(","nu",")","+","ns",";","float","nx","=","abs","(","nv",")","+","nt",";","float","ny","=","nq","+","nm",";","float","nz","=","u_texel_size",".","x",";","bool","nA","=","nw",">=","nx",";","float","nB","=","nj","*","2.0","+","ny",";","if","(","!","nA",")","lE","=","lF",";","if","(","!","nA",")","lC","=","lD",";","if","(","nA",")","nz","=","u_texel_size",".","y",";","float","nC","=","(","nB","*","(","1.0","/","12.0",")",")","-","lG",";","float","nD","=","lE","-","lG",";","float","nE","=","lC","-","lG",";","float","nF","=","lE","+","lG",";","float","nG","=","lC","+","lG",";","bool","nH","=","abs","(","nD",")",">=","abs","(","nE",")",";","float","nI","=","max","(","abs","(","nD",")",",","abs","(","nE",")",")",";","if","(","nH",")","nz","=","-","nz",";","float","nJ","=","clamp","(","abs","(","nC",")","*","ni",",","0.0",",","1.0",")",";","vec2","nK",";","nK",".","x","=","lw",".","x",";","nK",".","y","=","lw",".","y",";","vec2","nL",";","nL",".","x","=","(","!","nA",")","?","0.0",":","u_texel_size",".","x",";","nL",".","y","=","(","nA",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","nA",")","nK",".","x","+=","nz","*","0.5",";","if","(","nA",")","nK",".","y","+=","nz","*","0.5",";","vec2","nM",";","nM",".","x","=","nK",".","x","-","nL",".","x",";","nM",".","y","=","nK",".","y","-","nL",".","y",";","vec2","nN",";","nN",".","x","=","nK",".","x","+","nL",".","x",";","nN",".","y","=","nK",".","y","+","nL",".","y",";","float","nO","=","(","(","-","2.0",")","*","nJ",")","+","3.0",";","float","nP","=","lc","(","texture2D","(","u_color",",","nM",")",")",";","float","nQ","=","nJ","*","nJ",";","float","nR","=","lc","(","texture2D","(","u_color",",","nN",")",")",";","if","(","!","nH",")","nF","=","nG",";","float","nS","=","nI","*","1.0","/","4.0",";","float","nT","=","lG","-","nF","*","0.5",";","float","nU","=","nO","*","nQ",";","bool","nV","=","nT","<","0.0",";","nP","-=","nF","*","0.5",";","nR","-=","nF","*","0.5",";","bool","nW","=","abs","(","nP",")",">=","nS",";","bool","nX","=","abs","(","nR",")",">=","nS",";","if","(","!","nW",")","nM",".","x","-=","nL",".","x","*","1.5",";","if","(","!","nW",")","nM",".","y","-=","nL",".","y","*","1.5",";","bool","nY","=","(","!","nW",")","||","(","!","nX",")",";","if","(","!","nX",")","nN",".","x","+=","nL",".","x","*","1.5",";","if","(","!","nX",")","nN",".","y","+=","nL",".","y","*","1.5",";","if","(","nY",")","{","if","(","!","nW",")","nP","=","lc","(","texture2D","(","u_color",",","nM",".","xy",")",")",";","if","(","!","nX",")","nR","=","lc","(","texture2D","(","u_color",",","nN",".","xy",")",")",";","if","(","!","nW",")","nP","=","nP","-","nF","*","0.5",";","if","(","!","nX",")","nR","=","nR","-","nF","*","0.5",";","nW","=","abs","(","nP",")",">=","nS",";","nX","=","abs","(","nR",")",">=","nS",";","if","(","!","nW",")","nM",".","x","-=","nL",".","x","*","2.0",";","if","(","!","nW",")","nM",".","y","-=","nL",".","y","*","2.0",";","nY","=","(","!","nW",")","||","(","!","nX",")",";","if","(","!","nX",")","nN",".","x","+=","nL",".","x","*","2.0",";","if","(","!","nX",")","nN",".","y","+=","nL",".","y","*","2.0",";","if","(","nY",")","{","if","(","!","nW",")","nP","=","lc","(","texture2D","(","u_color",",","nM",".","xy",")",")",";","if","(","!","nX",")","nR","=","lc","(","texture2D","(","u_color",",","nN",".","xy",")",")",";","if","(","!","nW",")","nP","=","nP","-","nF","*","0.5",";","if","(","!","nX",")","nR","=","nR","-","nF","*","0.5",";","nW","=","abs","(","nP",")",">=","nS",";","nX","=","abs","(","nR",")",">=","nS",";","if","(","!","nW",")","nM",".","x","-=","nL",".","x","*","2.0",";","if","(","!","nW",")","nM",".","y","-=","nL",".","y","*","2.0",";","nY","=","(","!","nW",")","||","(","!","nX",")",";","if","(","!","nX",")","nN",".","x","+=","nL",".","x","*","2.0",";","if","(","!","nX",")","nN",".","y","+=","nL",".","y","*","2.0",";","if","(","nY",")","{","if","(","!","nW",")","nP","=","lc","(","texture2D","(","u_color",",","nM",".","xy",")",")",";","if","(","!","nX",")","nR","=","lc","(","texture2D","(","u_color",",","nN",".","xy",")",")",";","if","(","!","nW",")","nP","=","nP","-","nF","*","0.5",";","if","(","!","nX",")","nR","=","nR","-","nF","*","0.5",";","nW","=","abs","(","nP",")",">=","nS",";","nX","=","abs","(","nR",")",">=","nS",";","if","(","!","nW",")","nM",".","x","-=","nL",".","x","*","4.0",";","if","(","!","nW",")","nM",".","y","-=","nL",".","y","*","4.0",";","nY","=","(","!","nW",")","||","(","!","nX",")",";","if","(","!","nX",")","nN",".","x","+=","nL",".","x","*","4.0",";","if","(","!","nX",")","nN",".","y","+=","nL",".","y","*","4.0",";","if","(","nY",")","{","if","(","!","nW",")","nP","=","lc","(","texture2D","(","u_color",",","nM",".","xy",")",")",";","if","(","!","nX",")","nR","=","lc","(","texture2D","(","u_color",",","nN",".","xy",")",")",";","if","(","!","nW",")","nP","=","nP","-","nF","*","0.5",";","if","(","!","nX",")","nR","=","nR","-","nF","*","0.5",";","nW","=","abs","(","nP",")",">=","nS",";","nX","=","abs","(","nR",")",">=","nS",";","if","(","!","nW",")","nM",".","x","-=","nL",".","x","*","2.0",";","if","(","!","nW",")","nM",".","y","-=","nL",".","y","*","2.0",";","if","(","!","nX",")","nN",".","x","+=","nL",".","x","*","2.0",";","if","(","!","nX",")","nN",".","y","+=","nL",".","y","*","2.0",";","}","}","}","}","float","nZ","=","lw",".","x","-","nM",".","x",";","float","n_","=","nN",".","x","-","lw",".","x",";","if","(","!","nA",")","nZ","=","lw",".","y","-","nM",".","y",";","if","(","!","nA",")","n_","=","nN",".","y","-","lw",".","y",";","bool","oa","=","(","nP","<","0.0",")","!=","nV",";","float","ob","=","(","n_","+","nZ",")",";","bool","oc","=","(","nR","<","0.0",")","!=","nV",";","float","od","=","1.0","/","ob",";","bool","oe","=","nZ","<","n_",";","float","of","=","min","(","nZ",",","n_",")",";","bool","og","=","oe","?","oa",":","oc",";","float","oh","=","nU","*","nU",";","float","oi","=","(","of","*","(","-","od",")",")","+","0.5",";","float","oj","=","oh","*","FXAA_QUALITY_SUBPIX",";","float","ok","=","og","?","oi",":","0.0",";","float","ol","=","max","(","ok",",","oj",")",";","if","(","!","nA",")","lw",".","x","+=","ol","*","nz",";","if","(","nA",")","lw",".","y","+=","ol","*","nz",";","return","texture2D","(","u_color",",","lw",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","lv","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","om","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","kW","=","vec2","(","0.0",",","0.0",")",";","vec2","kX","=","u_texel_size",";","vec4","kY","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kY","*","0.0875447373698",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0858112354248",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0808139781061",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0731235112908",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0635705267419",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0530985673112",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0426125984122",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0328565115809",";","kW","+=","kX",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","kY",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_main",",","a",")",";","vec4","kX","=","texture2D","(","u_bloom",",","a",")",";","vec4","kY","=","kW",";","kY","+=","kX",";","gl_FragColor","=","vec4","(","kY",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_color",",","a",")",";","vec3","kX","=","kW",".","rgb",";","if","(","u_brightness","<","0.0",")","kX","=","kX","*","(","1.0","+","u_brightness",")",";","else","kX","=","kX","+","(","(","1.0","-","kX",")","*","u_brightness",")",";","kX","=","(","kX","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","kX","*=","u_exposure",";","vec3","kY","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","kZ","=","dot","(","kX",",","kY",")",";","kX","=","mix","(","vec3","(","kZ",")",",","kX",",","u_saturation",")",";","gl_FragColor","=","vec4","(","kX",",","kW",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","ck","(","clamp","(","nd","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","ne","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","nf","=","nd","(","u_depth",",","a",",","u_camera_range",")",";","nf","*=","u_view_max_depth",";","float","ng",";","if","(","nf","<","u_dof_dist",")","ng","=","(","u_dof_dist","-","nf",")","/","u_dof_front",";","else","ng","=","(","nf","-","u_dof_dist",")","/","u_dof_rear",";","ng","=","clamp","(","ng",",","0.0",",","1.0",")",";","vec4","nh","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","ne",",","nh",",","ng",")",";","}","else","gl_FragColor","=","ne",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","la","(","float","kW",",","float","kX",",","float","kY",")","{","vec2","kZ","=","a","+","vec2","(","kW",",","kX",")","*","u_texel_size",";","vec4","k_","=","texture2D","(","u_sampler",",","kZ",")","*","kY",";","return","co","(","k_",")",";","}","void","main","(",")","{","float","lb","=","(","la","(","-","1.0",",","-","1.0",",","-","1.0",")","+","la","(","0.0",",","-","1.0",",","-","1.0",")","+","la","(","1.0",",","-","1.0",",","-","1.0",")","+","la","(","-","1.0",",","0.0",",","-","1.0",")","+","la","(","0.0",",","0.0",",","8.0",")","+","la","(","1.0",",","0.0",",","-","1.0",")","+","la","(","-","1.0",",","1.0",",","-","1.0",")","+","la","(","0.0",",","1.0",",","-","1.0",")","+","la","(","1.0",",","1.0",",","-","1.0",")",")",";","lb","*=","1000.0",";","gl_FragColor","=","vec4","(","lb",",","lb",",","lb",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","kW",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","kX","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","kY","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","kZ","=","kY",".","a","-","kX",".","a",";","if","(","kZ","!=","0.0",")","{","float","k_","=","smoothstep","(","0.0",",","1.0",",","kY",".","a",")",";","if","(","kX",".","a","==","0.0",")","{","vec3","la","=","u_glow_color",";","gn","(","la",")",";","vec4","lb","=","vec4","(","clamp","(","la",",","0.0",",","1.0",")",",","k_",")",";","gl_FragColor","=","mix","(","kW",",","lb",",","k_",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ne",";","varying","vec2","nf",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","ng",";","void","main","(",")","{","vec2","nh","=","(","ng",".","xy","-","a",")",";","float","ni","=","length","(","nh",")",";","vec2","nj","=","u_radial_blur_step","*","nh","/","ni",";","float","nk","=","ni","/","u_radial_blur_step",";","nj","*=","min","(","nk",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","nk","=","max","(","nk",",","STEPS_PER_PASS",")",";","vec2","nl","=","a",";","float","nm","=","0.0",";","for","(","float","nn","=","0.0",";","nn","<","STEPS_PER_PASS",";","nn","+=","1.0",")","{","if","(","nn","<=","nk",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","no","=","nd","(","u_input",",","nl",",","u_camera_range",")",";","nm","+=","max","(","(","1.0","-","pow","(","ni",",","0.3",")",")","*","step","(","0.9",",","no",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","np","=","texture2D","(","u_input",",","nl",")",";","nm","+=","co","(","np",")",";"]}]}}]},{type:"textline",tokens:["}","nl","+=","nj",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nq","=","a","+","nf",";","float","nr","=","cX","(","vec2","(","2.5","*","(","nq",".","x",")",",","2.5","*","(","nq",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","cX","(","vec2","(","5.0","*","(","nq",".","x",")","-","0.66","*","u_time",",","5.0","*","(","nq",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dC","(","vec2","(","7.5","*","(","nq",".","x",")","+","0.33","*","u_time",",","7.5","*","(","nq",".","y",")","-","0.33","*","u_time",")",")",";","nr","*=","clamp","(","1.2","-","sqrt","(","0.2","*","ni",")",",","0.0",",","1.0",")","*","ne",";","nm","=","max","(","nr",",","nm",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","ck","(","nm","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","ne",";","varying","vec2","nf",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","ng",";","void","lc","(","in","vec4","kW",",","in","vec3","kX",",","out","vec3","kY",")","{","float","kZ","=","kW",".","w","*","kX",".","x","+","kW",".","y","*","kX",".","z","-","kW",".","z","*","kX",".","y",";","float","k_","=","kW",".","w","*","kX",".","y","+","kW",".","z","*","kX",".","x","-","kW",".","x","*","kX",".","z",";","float","la","=","kW",".","w","*","kX",".","z","+","kW",".","x","*","kX",".","y","-","kW",".","y","*","kX",".","x",";","float","lb","=","-","kW",".","x","*","kX",".","x","-","kW",".","y","*","kX",".","y","-","kW",".","z","*","kX",".","z",";","kY",".","x","=","kZ","*","kW",".","w","-","lb","*","kW",".","x","-","k_","*","kW",".","z","+","la","*","kW",".","y",";","kY",".","y","=","k_","*","kW",".","w","-","lb","*","kW",".","y","-","la","*","kW",".","x","+","kZ","*","kW",".","z",";","kY",".","z","=","la","*","kW",".","w","-","lb","*","kW",".","z","-","kZ","*","kW",".","y","+","k_","*","kW",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","ld","=","normalize","(","u_sun_direction",")",";","ng","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ld",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","ne","=","1.0",";","vec3","le","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","lf",";","lc","(","u_camera_quat",",","le",",","lf",")",";","lf","=","normalize","(","lf",")",";","float","lg","=","dot","(","lf",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lh","=","atan","(","lf",".","x",",","lf",".","z",")",";","nf","=","vec2","(","-","lh",",","acos","(","lg",")",")",";","}","else","{","ne","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["ng",".","x","/=","ng",".","w",";","ng",".","y","/=","ng",".","w",";","ng",".","x","=","0.5","*","(","ng",".","x","+","1.0",")",";","ng",".","y","=","0.5","*","(","ng",".","y","+","1.0",")",";","ng","+=","99999.0","*","step","(","ng",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_main",",","a",")",";","vec3","kX","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","gl","(","kW",".","rgb",")",";","float","kY","=","co","(","texture2D","(","u_god_rays",",","a",")",")",";","vec3","kZ","=","kW",".","rgb","+","u_god_rays_intensity","*","vec3","(","kY",")","*","kX",";","gn","(","kZ",")",";","gl_FragColor",".","rgb","=","kZ",";","gl_FragColor",".","a","=","kW",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_color",",","a",")","*","0.38026",";","kW","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","kW","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","kW","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","kW","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","kW","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","kW","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","kW","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","kW","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","kW",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_input",",","a",")",";","float","kX","=","dot","(","kW",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","kX",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","kW",";","float","kX","=","0.0",";","for","(","float","kY","=","0.025",";","kY","<","1.0",";","kY","+=","0.05",")","for","(","float","kZ","=","0.025",";","kZ","<","1.0",";","kZ","+=","0.05",")","{","kW","=","max","(","texture2D","(","u_input",",","vec2","(","kY",",","kZ",")",")",".","r",",","0.01",")",";","kX","+=","log","(","kW",")",";","}","float","k_","=","exp","(","kX","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","k_",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","nh",";","void","main","(",")","{","float","ni","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","nj","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","nk","=","texture2D","(","u_main",",","a",")",";","float","nl","=","nj","/","ni",";","float","nm","=","u_bloom_edge_lum",";","gl_FragColor","=","nk","*","max","(","nl","-","nm",",","0.0",")","*","nh",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","nh",";","const","vec3","kW","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","ld","(","in","vec4","kX",",","in","vec3","kY",",","out","vec3","kZ",")","{","float","k_","=","kX",".","w","*","kY",".","x","+","kX",".","y","*","kY",".","z","-","kX",".","z","*","kY",".","y",";","float","la","=","kX",".","w","*","kY",".","y","+","kX",".","z","*","kY",".","x","-","kX",".","x","*","kY",".","z",";","float","lb","=","kX",".","w","*","kY",".","z","+","kX",".","x","*","kY",".","y","-","kX",".","y","*","kY",".","x",";","float","lc","=","-","kX",".","x","*","kY",".","x","-","kX",".","y","*","kY",".","y","-","kX",".","z","*","kY",".","z",";","kZ",".","x","=","k_","*","kX",".","w","-","lc","*","kX",".","x","-","la","*","kX",".","z","+","lb","*","kX",".","y",";","kZ",".","y","=","la","*","kX",".","w","-","lc","*","kX",".","y","-","lb","*","kX",".","x","+","k_","*","kX",".","z",";","kZ",".","z","=","lb","*","kX",".","w","-","lc","*","kX",".","z","-","k_","*","kX",".","y","+","la","*","kX",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","le",";","ld","(","u_camera_quat",",","kW",",","le",")",";","nh","=","dot","(","-","le",",","u_sun_direction",")","*","u_bloom_key",";","nh","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","kW","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","kX","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","kW","-","kX",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","kW","+","u_motion_blur_exp","*","kX",";","}","else","{","gl_FragColor","=","kW",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kW","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","kW",".","r","+","kW",".","g","+","kW",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kX","=","vec2","(","0.0",",","0.0",")",";","vec2","kY","=","u_texel_size",";","vec4","kZ",";","kZ","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kZ","*","0.2270270270",";","kX","+=","kY",";","kZ","=","texture2D","(","u_color",",","a","+","kX",")",";","gl_FragColor","+=","kZ","*","0.1945945946",";","kZ","=","texture2D","(","u_color",",","a","-","kX",")",";","gl_FragColor","+=","kZ","*","0.1945945946",";","kX","+=","kY",";","kZ","=","texture2D","(","u_color",",","a","+","kX",")",";","gl_FragColor","+=","kZ","*","0.1216216216",";","kZ","=","texture2D","(","u_color",",","a","-","kX",")",";","gl_FragColor","+=","kZ","*","0.1216216216",";","kX","+=","kY",";","kZ","=","texture2D","(","u_color",",","a","+","kX",")",";","gl_FragColor","+=","kZ","*","0.0540540541",";","kZ","=","texture2D","(","u_color",",","a","-","kX",")",";","gl_FragColor","+=","kZ","*","0.0540540541",";","kX","+=","kY",";","kZ","=","texture2D","(","u_color",",","a","+","kX",")",";","gl_FragColor","+=","kZ","*","0.0162162162",";","kZ","=","texture2D","(","u_color",",","a","-","kX",")",";","gl_FragColor","+=","kZ","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kY","=","u_texel_size",";","vec4","kZ","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kZ",";","if","(","kZ",".","a","==","0.0",")","{","kZ","=","texture2D","(","u_color",",","a","+","kY",")",";","if","(","kZ",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","kZ",".","a",")",";","else","{","kZ","=","texture2D","(","u_color",",","a","-","kY",")",";","if","(","kZ",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","kZ",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ni",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nj",";","varying","vec4","nk",";","varying","vec4","nl",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ns","(","vec2","nn",",","sampler2D","no",")","{","float","np","=","texture2D","(","no",",","nn",")",".","r",";","float","nq","=","texture2D","(","no",",","nj",".","xy",")",".","r",";","float","nr","=","texture2D","(","no",",","nj",".","zw",")",".","r",";","return","vec3","(","np",",","nq",",","nr",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ny","(","vec2","nt",",","sampler2D","nu",")","{","vec3","nv","=","ns","(","nt",",","nu",")",";","vec2","nw","=","abs","(","nv",".","xx","-","nv",".","yz",")",";","vec2","nx","=","step","(","SMAA_PREDICATION_THRESHOLD",",","nw",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","nx",")",";","}"]}]}}]},{type:"textline",tokens:["void","nC","(","bvec2","nz",",","inout","vec2","nA",",","vec2","nB",")","{","if","(","nz",".","x",")","nA",".","x","=","nB",".","x",";","if","(","nz",".","y",")","nA",".","y","=","nB",".","y",";","}","void","nC","(","bvec4","nD",",","inout","vec4","nE",",","vec4","nF",")","{","nC","(","nD",".","xy",",","nE",".","xy",",","nF",".","xy",")",";","nC","(","nD",".","zw",",","nE",".","zw",",","nF",".","zw",")",";","}","vec2","nH","(","vec2","nG",")","{","return","sign","(","nG",")","*","floor","(","abs","(","nG",")","+",".5",")",";","}","vec4","nH","(","vec4","nI",")","{","return","sign","(","nI",")","*","floor","(","abs","(","nI",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nZ","(","vec2","nJ",",","sampler2D","nK"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nL"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nM","=","ny","(","nJ",",","nL",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nM","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","nN","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","nO","=","dot","(","texture2D","(","nK",",","nJ",")",".","rgb",",","nN",")",";","float","nP","=","dot","(","texture2D","(","nK",",","nj",".","xy",")",".","rgb",",","nN",")",";","float","nQ","=","dot","(","texture2D","(","nK",",","nj",".","zw",")",".","rgb",",","nN",")",";","vec4","nR",";","nR",".","xy","=","abs","(","nO","-","vec2","(","nP",",","nQ",")",")",";","vec2","nS","=","step","(","nM",",","nR",".","xy",")",";","if","(","dot","(","nS",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","nT","=","dot","(","texture2D","(","nK",",","nk",".","xy",")",".","rgb",",","nN",")",";","float","nU","=","dot","(","texture2D","(","nK",",","nk",".","zw",")",".","rgb",",","nN",")",";","nR",".","zw","=","abs","(","nO","-","vec2","(","nT",",","nU",")",")",";","vec2","nV","=","max","(","nR",".","xy",",","nR",".","zw",")",";","float","nW","=","dot","(","texture2D","(","nK",",","nl",".","xy",")",".","rgb",",","nN",")",";","float","nX","=","dot","(","texture2D","(","nK",",","nl",".","zw",")",".","rgb",",","nN",")",";","nR",".","zw","=","abs","(","vec2","(","nP",",","nQ",")","-","vec2","(","nW",",","nX",")",")",";","nV","=","max","(","nV",".","xy",",","nR",".","zw",")",";","float","nY","=","max","(","nV",".","x",",","nV",".","y",")",";","nS",".","xy","*=","step","(","nY",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","nR",".","xy",")",";","return","nS",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oa","(","vec2","n_",")","{","n_",".","r","=","n_",".","r","*","abs","(","5.0","*","n_",".","r","-","5.0","*","0.75",")",";","return","nH","(","n_",")",";","}","vec4","oa","(","vec4","ob",")","{","ob",".","rb","=","ob",".","rb","*","abs","(","5.0","*","ob",".","rb","-","5.0","*","0.75",")",";","return","nH","(","ob",")",";","}","vec2","oj","(","sampler2D","oc",",","vec2","od",",","vec2","oe",",","out","vec2","of",")","{","vec4","og","=","vec4","(","od",",","-","1.0",",","1.0",")",";","vec3","oh","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","oi","=","0",";","oi","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","oi","++",")","{","if","(","og",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","og",".","w",">","0.9",")","{","og",".","xyz","+=","oh","*","vec3","(","oe",",","1.0",")",";","of","=","texture2D","(","oc",",","og",".","xy",",","0.0",")",".","rg",";","og",".","w","=","dot","(","of",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","og",".","zw",";","}","vec2","or","(","sampler2D","ok",",","vec2","ol",",","vec2","om",",","out","vec2","on",")","{","vec4","oo","=","vec4","(","ol",",","-","1.0",",","1.0",")",";","oo",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","op","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","oq","=","0",";","oq","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","oq","++",")","{","if","(","oo",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","oo",".","w",">","0.9",")","{","oo",".","xyz","=","op","*","vec3","(","om",",","1.0",")","+","oo",".","xyz",";","on","=","texture2D","(","ok",",","oo",".","xy",",","0.0",")",".","rg",";","on","=","oa","(","on",")",";","oo",".","w","=","dot","(","on",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","oo",".","zw",";","}","vec2","ox","(","sampler2D","os",",","vec2","ot",",","vec2","ou",",","float","ov",")","{","vec2","ow","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","ou","+","ot",";","ow","=","SMAA_AREATEX_PIXEL_SIZE","*","ow","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","ow",".","x","+=","0.5",";","ow",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","ov",";","return","texture2D","(","os",",","ow",",","0.0",")",".","rg",";","}","vec2","oM","(","sampler2D","oy",",","sampler2D","oz",",","vec2","oA",",","vec2","oB",",","vec4","oC",")","{","vec2","oD","=","vec2","(","0.0",",","0.0",")",";","vec4","oE",";","vec2","oF",";","if","(","oB",".","r",">","0.0",")","{","oE",".","xz","=","oj","(","oy",",","oA",",","vec2","(","-","1.0",",","1.0",")",",","oF",")",";","oE",".","x","+=","float","(","oF",".","y",">","0.9",")",";","}","else","oE",".","xz","=","vec2","(","0.0",",","0.0",")",";","oE",".","yw","=","oj","(","oy",",","oA",",","vec2","(","1.0",",","-","1.0",")",",","oF",")",";","if","(","oE",".","x","+","oE",".","y",">","2.0",")","{","vec4","oG","=","vec4","(","-","oE",".","x","+","0.25",",","oE",".","x",",","oE",".","y",",","-","oE",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","oA",".","xyxy",";","vec4","oH",";","oH",".","xy","=","texture2D","(","oy",",","oG",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","oH",".","zw","=","texture2D","(","oy",",","oG",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","oH",".","yxwz","=","oa","(","oH",".","xyzw",")",";","vec2","oI","=","vec2","(","2.0",",","2.0",")","*","oH",".","xz","+","oH",".","yw",";","nC","(","bvec2","(","step","(","0.9",",","oE",".","zw",")",")",",","oI",",","vec2","(","0.0",",","0.0",")",")",";","oD","+=","ox","(","oz",",","oE",".","xy",",","oI",",","oC",".","z",")",";","}","oE",".","xz","=","or","(","oy",",","oA",",","vec2","(","-","1",",","-","1",")",",","oF",")",";","if","(","texture2D","(","oy",",","oA","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","oE",".","yw","=","or","(","oy",",","oA",",","vec2","(","1",",","1",")",",","oF",")",";","oE",".","y","+=","float","(","oF",".","y",">","0.9",")",";","}","else","oE",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","oE",".","x","+","oE",".","y",">","2.0",")","{","vec4","oJ","=","vec4","(","-","oE",".","x",",","-","oE",".","x",",","oE",".","y",",","oE",".","y",")","*","u_texel_size",".","xyxy","+","oA",".","xyxy",";","vec4","oK",";","oK",".","x","=","texture2D","(","oy",",","oJ",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","oK",".","y","=","texture2D","(","oy",",","oJ",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","oK",".","zw","=","texture2D","(","oy",",","oJ",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","oL","=","vec2","(","2.0",",","2.0",")","*","oK",".","xz","+","oK",".","yw",";","nC","(","bvec2","(","step","(","0.9",",","oE",".","zw",")",")",",","oL",",","vec2","(","0",",","0",")",")",";","oD","+=","ox","(","oz",",","oE",".","xy",",","oL",",","oC",".","w",")",".","gr",";","}","return","oD",";","}"]}]}}]},{type:"textline",tokens:["float","oS","(","sampler2D","oN",",","vec2","oO",",","float","oP",")","{","vec2","oQ","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","oR","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","oP",",","1.0",")",";","oQ","+=","vec2","(","-","1.0",",","1.0",")",";","oR","+=","vec2","(","0.5",",","-","0.5",")",";","oQ","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","oR","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","oN",",","oQ","*","oO","+","oR",",","0.0",")",".","r",";","}","float","o_","(","sampler2D","oT",",","sampler2D","oU",",","vec2","oV",",","float","oW",")","{","vec2","oX","=","vec2","(","0.0",",","1.0",")",";","for","(","int","oY","=","0",";","oY","<","SMAA_MAX_SEARCH_STEPS",";","oY","++",")","{","if","(","oV",".","x",">","oW","&&","oX",".","g",">","0.8281","&&","oX",".","r","==","0.0",")","{","oX","=","texture2D","(","oT",",","oV",",","0.0",")",".","rg",";","oV","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","oV",";","}","}","float","oZ","=","-","(","255.0","/","127.0",")","*","oS","(","oU",",","oX",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","oZ","+","oV",".","x",";","}","float","ph","(","sampler2D","pa",",","sampler2D","pb",",","vec2","pc",",","float","pd",")","{","vec2","pe","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pf","=","0",";","pf","<","SMAA_MAX_SEARCH_STEPS",";","pf","++",")","{","if","(","pc",".","x","<","pd","&&","pe",".","g",">","0.8281","&&","pe",".","r","==","0.0",")","{","pe","=","texture2D","(","pa",",","pc",",","0.0",")",".","rg",";","pc","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","pc",";","}","}","float","pg","=","-","(","255.0","/","127.0",")","*","oS","(","pb",",","pe",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","pg","+","pc",".","x",";","}","float","pp","(","sampler2D","pi",",","sampler2D","pj",",","vec2","pk",",","float","pl",")","{","vec2","pm","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pn","=","0",";","pn","<","SMAA_MAX_SEARCH_STEPS",";","pn","++",")","{","if","(","pk",".","y",">","pl","&&","pm",".","r",">","0.8281","&&","pm",".","g","==","0.0",")","{","pm","=","texture2D","(","pi",",","pk",",","0.0",")",".","rg",";","pk","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pk",";","}","}","float","po","=","-","(","255.0","/","127.0",")","*","oS","(","pj",",","pm",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","po","+","pk",".","y",";","}","float","px","(","sampler2D","pq",",","sampler2D","pr",",","vec2","ps",",","float","pt",")","{","vec2","pu","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pv","=","0",";","pv","<","SMAA_MAX_SEARCH_STEPS",";","pv","++",")","{","if","(","ps",".","y","<","pt","&&","pu",".","r",">","0.8281","&&","pu",".","g","==","0.0",")","{","pu","=","texture2D","(","pq",",","ps",",","0.0",")",".","rg",";","ps","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","ps",";","}","}","float","pw","=","-","(","255.0","/","127.0",")","*","oS","(","pr",",","pu",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","pw","+","ps",".","y",";","}","vec2","pE","(","sampler2D","py",",","vec2","pz",",","float","pA",",","float","pB",",","float","pC",")","{","vec2","pD","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","nH","(","4.0","*","vec2","(","pA",",","pB",")",")","+","pz",";","pD","=","SMAA_AREATEX_PIXEL_SIZE","*","pD","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","pD",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","pC","+","pD",".","y",";","return","texture2D","(","py",",","pD",",","0.0",")",".","rg",";","}","void","pM","(","sampler2D","pF",",","inout","vec2","pG",",","vec4","pH",",","vec2","pI",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pJ","=","step","(","pI",".","xy",",","pI",".","yx",")",";","vec2","pK","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pJ",";","pK","/=","pJ",".","x","+","pJ",".","y",";","vec2","pL","=","vec2","(","1.0",",","1.0",")",";","pL",".","x","-=","pK",".","x","*","texture2D","(","pF",",","pH",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","pL",".","x","-=","pK",".","y","*","texture2D","(","pF",",","pH",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","pL",".","y","-=","pK",".","x","*","texture2D","(","pF",",","pH",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","pL",".","y","-=","pK",".","y","*","texture2D","(","pF",",","pH",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","pG","*=","clamp","(","pL",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","pU","(","sampler2D","pN",",","inout","vec2","pO",",","vec4","pP",",","vec2","pQ",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pR","=","step","(","pQ",".","xy",",","pQ",".","yx",")",";","vec2","pS","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pR",";","pS","/=","pR",".","x","+","pR",".","y",";","vec2","pT","=","vec2","(","1.0",",","1.0",")",";","pT",".","x","-=","pS",".","x","*","texture2D","(","pN",",","pP",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","pT",".","x","-=","pS",".","y","*","texture2D","(","pN",",","pP",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","pT",".","y","-=","pS",".","x","*","texture2D","(","pN",",","pP",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","pT",".","y","-=","pS",".","y","*","texture2D","(","pN",",","pP",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","pO","*=","clamp","(","pT",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qm","(","vec2","pV",",","vec2","pW",",","sampler2D","pX",",","sampler2D","pY",",","sampler2D","pZ",",","vec4","p_",")","{","vec4","qa","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","qb","=","texture2D","(","pX",",","pV",")",".","rg",";","if","(","qb",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qa",".","rg","=","oM","(","pX",",","pY",",","pV",",","qb",",","p_",")",";","if","(","qa",".","r","==","-","qa",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","qc",";","vec3","qd",";","qd",".","x","=","o_","(","pX",",","pZ",",","nj",".","xy",",","nl",".","x",")",";","qd",".","y","=","nk",".","y",";","qc",".","x","=","qd",".","x",";","float","qe","=","texture2D","(","pX",",","qd",".","xy",",","0.0",")",".","r",";","qd",".","z","=","ph","(","pX",",","pZ",",","nj",".","zw",",","nl",".","y",")",";","qc",".","y","=","qd",".","z",";","qc","=","abs","(","nH","(","qc","/","u_texel_size",".","xx","-","pW",".","xx",")",")",";","vec2","qf","=","sqrt","(","qc",")",";","float","qg","=","texture2D","(","pX",",","qd",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","qa",".","rg","=","pE","(","pY",",","qf",",","qe",",","qg",",","p_",".","y",")",";","qd",".","y","=","pV",".","y",";","pM","(","pX",",","qa",".","rg",",","qd",".","xyzy",",","qc",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","qb",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","qb",".","r",">","0.0",")","{","vec2","qh",";","vec3","qi",";","qi",".","y","=","pp","(","pX",",","pZ",",","nk",".","xy",",","nl",".","z",")",";","qi",".","x","=","nj",".","x",";","qh",".","x","=","qi",".","y",";","float","qj","=","texture2D","(","pX",",","qi",".","xy",",","0.0",")",".","g",";","qi",".","z","=","px","(","pX",",","pZ",",","nk",".","zw",",","nl",".","w",")",";","qh",".","y","=","qi",".","z",";","qh","=","abs","(","nH","(","qh","/","u_texel_size",".","yy","-","pW",".","yy",")",")",";","vec2","qk","=","sqrt","(","qh",")",";","float","ql","=","texture2D","(","pX",",","qi",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","qa",".","ba","=","pE","(","pY",",","qk",",","qj",",","ql",",","p_",".","x",")",";","qi",".","x","=","pV",".","x",";","pU","(","pX",",","qa",".","ba",",","qi",".","xyxz",",","qh",")",";","}","return","qa",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qD","(","vec2","qn",",","sampler2D","qo",",","sampler2D","qp"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qq"]}]}}]},{type:"textline",tokens:[")","{","vec4","qr",";","qr",".","x","=","texture2D","(","qp",",","ni",".","xy",")",".","a",";","qr",".","y","=","texture2D","(","qp",",","ni",".","zw",")",".","g",";","qr",".","wz","=","texture2D","(","qp",",","qn",")",".","xz",";","if","(","dot","(","qr",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","qs","=","texture2D","(","qo",",","qn",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qt","=","texture2D","(","qq",",","a",")",";","vec2","qu","=","2.0","*","cw","(","qt",")","-","1.0",";","qs",".","a","=","sqrt","(","2.0","*","length","(","qu",")",")",";"]}]}}]},{type:"textline",tokens:["return","qs",";","}","else","{","bool","qv","=","max","(","qr",".","x",",","qr",".","z",")",">","max","(","qr",".","y",",","qr",".","w",")",";","vec4","qw","=","vec4","(","0.0",",","qr",".","y",",","0.0",",","qr",".","w",")",";","vec2","qx","=","qr",".","yw",";","nC","(","bvec4","(","qv",",","qv",",","qv",",","qv",")",",","qw",",","vec4","(","qr",".","x",",","0.0",",","qr",".","z",",","0.0",")",")",";","nC","(","bvec2","(","qv",",","qv",")",",","qx",",","qr",".","xz",")",";","qx","/=","dot","(","qx",",","vec2","(","1.0",",","1.0",")",")",";","vec4","qy","=","qw","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","qn",".","xyxy",";","vec4","qz","=","qx",".","x","*","texture2D","(","qo",",","qy",".","xy",",","0.0",")",";","qz","+=","qx",".","y","*","texture2D","(","qo",",","qy",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qA","=","texture2D","(","qq",",","qy",".","xy",")",";","vec2","qB","=","2.0","*","cw","(","qA",")","-","1.0",";","vec2","qC","=","qx",".","x","*","qB",";","qA","=","texture2D","(","qq",",","qy",".","zw",")",";","qB","=","2.0","*","cw","(","qA",")","-","1.0",";","qC","+=","qx",".","y","*","qB",";","qz",".","a","=","sqrt","(","2.0","*","length","(","qC",")",")",";"]}]}}]},{type:"textline",tokens:["return","qz",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qP","(","vec2","qE",",","sampler2D","qF",",","sampler2D","qG"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qH"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qI","=","texture2D","(","qH",",","a",")",";","vec2","qJ",";","qJ","=","2.0","*","cw","(","qI",")","-","1.0",";","vec4","qK","=","texture2D","(","qF",",","qE",")",";","vec4","qL","=","texture2D","(","qG",",","qE","-","qJ",")",";","float","qM","=","abs","(","qK",".","a","*","qK",".","a","-","qL",".","a","*","qL",".","a",")","/","2.0",";","float","qN","=","0.5","*","clamp","(","1.0","-","sqrt","(","qM",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","qO","=","mix","(","qK",",","qL",",","qN",")",";","qO",".","a","=","1.0",";","return","qO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qK","=","texture2D","(","qF",",","qE",")",";","vec4","qL","=","texture2D","(","qG",",","qE",")",";","return","mix","(","qK",",","qL",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qQ","=","vec4","(","nZ","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qQ","=","qm","(","a",",","nm",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qQ","=","qD","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qQ","=","vec4","(","qP","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qQ","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","qQ",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ni",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nj",";","varying","vec4","nk",";","varying","vec4","nl",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","kX","(","vec2","kW",")","{","nj","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","kW",".","xyxy",";","nk","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","kW",".","xyxy",";","nl","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","kW",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","k_","(","vec2","kY",",","out","vec2","kZ",")","{","kZ","=","kY","/","u_texel_size",";","nj","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","kY",".","xyxy",";","nk","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","kY",".","xyxy",";","nl","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","nj",".","xz",",","nk",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","lb","(","vec2","la",")","{","ni","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","la",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["kX","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["k_","(","a",",","nm",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["lb","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_16",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["2"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","float","u_view_max_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_dithering_amount",";","uniform","float","u_ssao_gauss_center",";","uniform","float","u_ssao_gauss_width_square",";","uniform","float","u_ssao_gauss_width_left_square",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","no","(","in","vec2","nn",")","{","return","nd","(","u_depth",",","nn",",","u_camera_range",")",";","}","float","nw","(","in","float","np",",","in","float","nq",",","inout","int","nr",")","{","float","ns","=","u_ssao_gauss_width_square",";","float","nt","=","(","np","-","nq",")","*","100.0",";","if","(","nt","<","u_ssao_gauss_center",")","ns","=","u_ssao_gauss_width_left_square",";","else","nr","=","1",";","float","nu","=","nt","-","u_ssao_gauss_center",";","float","nv","=","exp","(","-","2.0","*","nu","*","nu","/","ns",")",";","return","nv",";","}","float","nF","(","float","nx",",","vec2","ny",")","{","float","nz","=","0.0",";","float","nA","=","0.0",";","float","nB","=","max","(","1.0",",","u_view_max_depth","/","100.0",")",";","nx","*=","nB",";","ny","/=","nx",";","vec2","nC","=","a","+","ny",";","vec2","nD","=","a","-","ny",";","int","nE","=","0",";","nz","=","nw","(","nx",",","nB","*","no","(","nC",")",",","nE",")",";","if","(","nE",">","0","||","nC",".","y","<","0.0","||","nC",".","y",">","1.0","||","nC",".","x","<","0.0","||","nC",".","x",">","1.0",")","{","nA","=","nw","(","nB","*","no","(","nD",")",",","nx",",","nE",")",";","nz","+=","(","1.0","-","nz",")","*","nA",";","}","return","nz",";","}","void","main","(",")","{","vec2","nG","=","dI","(","a",")","*","u_ssao_dithering_amount",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["nG","*=","1.5",";"]}]}}]},{type:"textline",tokens:["float","nH","=","no","(","a",")",";","float","nI","=","0.0",";","vec2","nJ","=","u_texel_size","*","0.5",";","for","(","int","nK","=","0",";","nK","<","4",";","nK","++",")","{"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","nK","==","0","||","nK","==","2",")","{"]}]}}]},{type:"textline",tokens:["nI","+=","nF","(","nH",",","nJ",")",";","nI","+=","nF","(","nH",",","vec2","(","nJ",".","x",",","-","nJ",".","y",")",")",";","nI","+=","nF","(","nH",",","vec2","(","-","nJ",".","x",",","nJ",".","y",")",")",";","nI","+=","nF","(","nH",",","vec2","(","-","nJ",".","x",",","-","nJ",".","y",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","if","(","nK","==","1","||","nK","==","3",")","{"]}]}}]},{type:"textline",tokens:["nI","+=","nF","(","nH",",","vec2","(","nJ",".","x","*","1.2",",","0.0",")",")",";","nI","+=","nF","(","nH",",","vec2","(","-","nJ",".","x","*","1.2",",","0.0",")",")",";","nI","+=","nF","(","nH",",","vec2","(","0.0",",","nJ",".","y","*","1.2",")",")",";","nI","+=","nF","(","nH",",","vec2","(","0.0",",","-","nJ",".","y","*","1.2",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["nJ","+=","nG",";","nJ","*=","u_ssao_radius_increase",";","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["nI","=","1.0","-","nI","/","16.0",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["nI","=","1.0","-","nI","/","32.0",";"]}]}}]},{type:"textline",tokens:["float","nL","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","nH",")",";","nI","=","(","1.0","-","nL",")","+","nI","*","nL",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["nI","=","1.0",";"]}]}}]},{type:"textline",tokens:["float","nM","=","texture2D","(","u_color",",","a",")",".","r",";","gl_FragColor","=","vec4","(","nM",",","nI",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","kW","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","kX","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","kW","-","1.0",",","1.0",")",";","vec4","kY","=","u_view_proj_inverse","*","kX",";","vec4","kZ","=","kY","/","kY",".","w",";","vec4","k_","=","u_view_proj_prev","*","kZ",";","k_","/=","k_",".","w",";","vec2","la","=","(","kX",".","xy","-","k_",".","xy",")","/","4.0","+","0.5",";","la","=","clamp","(","la",",","0.0",",","1.0",")",";","gl_FragColor","=","ck","(","la",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","mat4","j","(",")","{","return","mat4","(","1.0",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","l","(","float","k",")","{","return","mat4","(","1.0",",","b",",","b",",","b",",","b",",","cos","(","k",")",",","sin","(","k",")",",","b",",","b",",","-","sin","(","k",")",",","cos","(","k",")",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","n","(","float","m",")","{","return","mat4","(","cos","(","m",")",",","b",",","-","sin","(","m",")",",","b",",","b",",","1.0",",","b",",","b",",","sin","(","m",")",",","b",",","cos","(","m",")",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","p","(","float","o",")","{","return","mat4","(","cos","(","o",")",",","sin","(","o",")",",","b",",","b",",","-","sin","(","o",")",",","cos","(","o",")",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",")",";","}","c","r","(","in","c","q",")","{","return","c","(","q",".","a",",","q",".","b",",","normalize","(","q",".","c",")",",","normalize","(","q",".","d",")",",","normalize","(","q",".","e",")",",","q",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","s","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","y","(","vec3","t",",","mat4","u",")","{","vec3","v","=","vec3","(","u","[","0","]","[","0","]",",","u","[","1","]","[","0","]",",","u","[","2","]","[","0","]",")",";","vec3","w","=","vec3","(","u","[","0","]","[","1","]",",","u","[","1","]","[","1","]",",","u","[","2","]","[","1","]",")",";","vec3","x","=","vec3","(","u","[","0","]","[","2","]",",","u","[","1","]","[","2","]",",","u","[","2","]","[","2","]",")",";","w","=","cross","(","x",",","v",")",";","return","mat4","(","vec4","(","v",",","0.0",")",",","vec4","(","w",",","0.0",")",",","vec4","(","x",",","0.0",")",",","vec4","(","t",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","E","(","vec3","z",",","vec3","A",")","{","vec3","B","=","z","-","A",";","B",".","y","=","0.0",";","B","=","normalize","(","B",")",";","vec3","C","=","normalize","(","cross","(","s",",","B",")",")",";","vec3","D","=","normalize","(","cross","(","B",",","C",")",")",";","return","mat4","(","vec4","(","C",",","0.0",")",",","vec4","(","D",",","0.0",")",",","vec4","(","B",",","0.0",")",",","vec4","(","A",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","P","(","in","vec3","F",",","float","G",",","float","H",",","float","I",",","vec3","J",")","{","float","L","=","fract","(","length","(","J",")","/","0.17",")",";","float","M","=","I","+","L","/","10.0",";","float","N","=","L",";","if","(","I","!=","0.0",")","N","/=","I",";","F","*=","1.0","+","0.5","*","sin","(","G",")",";","float","O","=","length","(","F",")","*","H","*","sin","(","2.0","*","3.14","*","G","*","M","+","N",")",";","return","p","(","O",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","_","(","in","vec3","Q",",","in","vec3","R",",","in","mat4","S",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","=","y","(","R",",","S",")",";"]}]}},{type:"elif",expression:["HAIR_BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","U","=","fract","(","(","R",".","x","*","1.43","+","R",".","y","*","0.123","+","R",".","z","*","6.1",")",")",";","float","V","=","2.0","*","M_PI","*","U",";","vec3","W","=","normalize","(","vec3","(","S","[","0","]","[","2","]",",","0.0",",","S","[","2","]","[","2","]",")",")",";","float","X","=","acos","(","W","[","2","]",")",";","if","(","W","[","0","]","<","0.0",")","X","=","2.0","*","M_PI","-","X",";","float","Y","=","X","-","V",";","if","(","Y","<","0.0",")","Y","=","2.0","*","M_PI","+","Y",";","float","Z","=","V",";","if","(","Y","<=","MAX_BILLBOARD_ANGLE",")","Z","+=","Y",";","else","if","(","Y","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","Z","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Y","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","Y","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","Z","+=","Y","-","M_PI",";","else","if","(","Y","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","Z","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Y","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","Z","+=","Y","-","2.0","*","M_PI",";","mat4","T","=","n","(","Z",")",";","T","[","3","]","=","vec4","(","R",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","=","E","(","Q",",","R",")",";"]}]}}]},{type:"textline",tokens:["return","T",";","}","c","ag","(","in","vec3","aa",",","in","vec3","ab",",","in","vec3","ac",",","in","vec3","ad",",","in","vec3","ae",",","in","mat4","af",")","{","aa","=","(","af","*","vec4","(","aa",",","1.0",")",")",".","xyz",";","ab","=","(","af","*","vec4","(","ab",",","1.0",")",")",".","xyz",";","ac","=","(","af","*","vec4","(","ac",",","0.0",")",")",".","xyz",";","ad","=","(","af","*","vec4","(","ad",",","0.0",")",")",".","xyz",";","ae","=","(","af","*","vec4","(","ae",",","0.0",")",")",".","xyz",";","return","r","(","c","(","aa",",","ab",",","ac",",","ad",",","ae",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","aj","(","vec2","ah",",","vec3","ai",")","{","return","(","ah","+","0.5",")","*","ai",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","as","(","in","vec4","ak",",","in","vec4","al",",","in","float","am",")","{","float","an","=","ak","[","0","]","*","al","[","0","]","+","ak","[","1","]","*","al","[","1","]","+","ak","[","2","]","*","al","[","2","]","+","ak","[","3","]","*","al","[","3","]",";","if","(","an","<","0.0",")","{","al","*=","-","1.0",";","an","=","-","an",";","}","if","(","abs","(","an",")",">=","1.0",")","return","ak",";","float","ao","=","acos","(","an",")",";","float","ap","=","sqrt","(","1.0","-","an","*","an",")",";","if","(","abs","(","ap",")","<","0.001",")","return","vec4","(","ak","*","0.5","+","al","*","0.5",")",";","float","aq","=","sin","(","(","1.0","-","am",")","*","ao",")","/","ap",";","float","ar","=","sin","(","am","*","ao",")","/","ap",";","return","ak","*","aq","+","al","*","ar",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aH","(","in","vec3","at",",","in","vec4","au",",","in","vec4","av",",","in","vec4","aw",",","in","vec4","ax",",","in","float","ay",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","az","=","as","(","au",",","av",",","ay",")",";","vec4","aA","=","mix","(","aw",",","ax",",","ay",")",";","vec3","aB","=","i","(","az",",","at",")",";","vec3","aC","=","aB","*","aA",".","w","+","aA",".","xyz",";","return","aC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aD","=","i","(","au",",","at",")",";","vec3","aE","=","i","(","av",",","at",")",";","vec3","aF","=","aD","*","aw",".","w","+","aw",".","xyz",";","vec3","aG","=","aE","*","ax",".","w","+","ax",".","xyz",";","return","mix","(","aF",",","aG",",","ay",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aQ","(","in","vec3","aI",",","in","vec4","aJ",",","in","vec4","aK",",","in","float","aL",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aM","=","as","(","aJ",",","aK",",","aL",")",";","vec3","aN","=","i","(","aM",",","aI",")",";","return","aN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aO","=","i","(","aJ",",","aI",")",";","vec3","aP","=","i","(","aK",",","aI",")",";","return","mix","(","aO",",","aP",",","aL",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aH","(","in","vec3","aR",",","in","vec4","aS",",","in","vec4","aT",")","{","vec3","aU","=","i","(","aS",",","aR",")",";","vec3","aV","=","aU","*","aT",".","w","+","aT",".","xyz",";","return","aV",";","}","vec3","aQ","(","in","vec3","aW",",","in","vec4","aX",")","{","vec3","aY","=","i","(","aX",",","aW",")",";","return","aY",";","}"]}]}}]},{type:"textline",tokens:["void","bl","(","inout","vec3","aZ",",","inout","vec3","a_",",","inout","vec3","ba",",","inout","vec3","bb",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bc","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bd","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","be","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bg","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","bh","=","0",";","bh","<","4",";","bh","++",")","{","int","bi","=","int","(","a_influence","[","bh","]",")",";","float","bj","=","fract","(","a_influence","[","bh","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bd","+=","bj","*","aH","(","aZ",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","u_transb","[","bi","]",",","u_transa","[","bi","]",",","bc",")",";","be","+=","bj","*","aQ","(","a_",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","bc",")",";","bf","+=","bj","*","aQ","(","ba",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","bc",")",";","bg","+=","bj","*","aQ","(","bb",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","bc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bd","+=","bj","*","aH","(","aZ",",","u_quatsb","[","bi","]",",","u_transb","[","bi","]",")",";","be","+=","bj","*","aQ","(","a_",",","u_quatsb","[","bi","]",")",";","bf","+=","bj","*","aQ","(","ba",",","u_quatsb","[","bi","]",")",";","bg","+=","bj","*","aQ","(","bb",",","u_quatsb","[","bi","]",")",";"]}]}}]},{type:"textline",tokens:["}","aZ","=","bd",";","a_","=","be",";","ba","=","bf",";","bb","=","bg",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bk","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bk",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aH","(","aZ",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","u_transb","[","bk","]",",","u_transa","[","bk","]",",","bc",")",";","a_","=","aQ","(","a_",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bc",")",";","ba","=","aQ","(","ba",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bc",")",";","bb","=","aQ","(","bb",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aH","(","aZ",",","u_quatsb","[","bk","]",",","u_transb","[","bk","]",")",";","a_","=","aQ","(","a_",",","u_quatsb","[","bk","]",")",";","ba","=","aQ","(","ba",",","u_quatsb","[","bk","]",")",";","bb","=","aQ","(","bb",",","u_quatsb","[","bk","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bz","(","inout","vec3","bm",",","in","vec3","bn",",","in","float","bo",",","in","float","bp",",","in","float","bq",",","in","vec3","br",",","in","float","bs",")","{","float","bt","=","length","(","bn",")",";","float","bu","=","bp","*","(","1.0","+","0.1","*","fract","(","bt",")",")",";","float","bv","=","bo","*","bs","*","(","1.0","+","sin","(","2.0","*","3.14","*","bq","*","bu","+","bt",")",")",";","float","bw","=","(","bm",".","y","-","bn",".","y",")","*","abs","(","bv",")",";","bw","+=","1.0",";","bw","*=","bw",";","bw","=","bw","*","bw","-","bw",";","vec3","bx","=","bm",";","bx",".","xz","+=","br",".","xz","*","bw","*","sign","(","bv",")",";","float","by","=","length","(","bm","-","bn",")",";","bm","=","bn","+","normalize","(","bx","-","bn",")","*","by",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bB","(","vec4","bA",")","{","return","bA","*","bA","*","(","3.0","-","2.0","*","bA",")",";","}","vec4","bD","(","vec4","bC",")","{","return","abs","(","fract","(","bC","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bF","(","vec4","bE",")","{","return","bB","(","bD","(","bE",")",")",";","}","void","bW","(","inout","vec3","bG",",","in","float","bH",",","in","vec3","bI",",","in","vec3","bJ",",","in","vec3","bK",",","in","float","bL",",","in","float","bM",",","in","float","bN",",","in","vec3","bO",")","{","float","bP",";","float","bQ",";","float","bR",";","vec2","bS",";","vec4","bT",";","vec2","bU",";","vec3","bV",";","bP","=","dot","(","bK",",","vec3","(","1.0",")",")",";","bQ","=","bP","+","bO",".","g",";","bR","=","dot","(","bG",",","vec3","(","bO",".","g",")",")",";","bS","=","(","bH","+","vec2","(","bR",",","bQ",")",")",";","bT","=","(","(","fract","(","(","bS",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bJ",")","*","bL",";","bT","=","bF","(","bT",")",";","bU","=","bT",".","xz","+","bT",".","yw",";","bU",".","y","=","0.5","-","bU",".","y",";","bV","=","bU",".","xyx","*","bO",".","rbr","*","vec3","(","bM","*","bI",".","x",",","bN",",","bM","*","bI",".","z",")",";","bG","+=","bV",";","}"]}]}}]},{type:"textline",tokens:["void","cc","(","inout","vec3","bX",",","inout","vec3","bY",",","in","vec3","bZ",")","{","vec3","b_","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ca","=","bY",";","vec3","cb","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ca","=","bX",";","vec3","cb","=","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bW","(","ca",",","u_time",",","bZ",",","b_",",","cb",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bz","(","ca",",","cb",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","b_",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bz","(","ca",",","cb",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","b_",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bX","+=","ca","-","bY",";","bY","=","ca",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bX","=","ca",";","bY","=","cb",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cd","=","255.0",";","float","ce","=","0.0",";","float","cf","=","1.0",";","vec4","ck","(","const","in","float","cg",")","{","vec4","ch","=","vec4","(","cd","*","cd","*","cd",",","cd","*","cd",",","cd",",","cf",")",";","vec4","ci","=","vec4","(","ce",",","cf","/","cd",",","cf","/","cd",",","cf","/","cd",")",";","vec4","cj","=","fract","(","cg","*","ch",")",";","cj","-=","cj",".","xxyz","*","ci",";","return","cj",";","}","float","co","(","const","in","vec4","cl",")","{","float","cm",";","vec4","cn","=","vec4","(","cf","/","(","cd","*","cd","*","cd",")",",","cf","/","(","cd","*","cd",")",",","cf","/","cd",",","cf",")",";","cm","=","dot","(","cl",",","cn",")",";","return","cm",";","}","vec4","ck","(","const","in","vec2","cp",")","{","vec2","cq","=","vec2","(","cd",",","cf",")",";","vec2","cr","=","vec2","(","ce",",","cf","/","cd",")",";","vec4","cs","=","fract","(","cp",".","xxyy","*","cq",".","xyxy",")",";","cs","-=","cs",".","xxzz","*","cr",".","xyxy",";","if","(","cp",".","r","==","cf",")","cs",".","rg","=","vec2","(","ce",",","cf",")",";","if","(","cp",".","g","==","cf",")","cs",".","ba","=","vec2","(","ce",",","cf",")",";","return","cs",";","}","vec2","cw","(","const","in","vec4","ct",")","{","vec2","cu",";","vec2","cv","=","vec2","(","cf","/","cd",",","cf",")",";","cu",".","r","=","dot","(","ct",".","rg",",","cv",")",";","cu",".","g","=","dot","(","ct",".","ba",",","cv",")",";","return","cu",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","cF","(","vec4","cE",")","{","return","cE","-","floor","(","cE","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","cF","(","vec3","cG",")","{","return","cG","-","floor","(","cG","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","cF","(","vec2","cH",")","{","return","cH","-","floor","(","cH","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","cJ","(","vec4","cI",")","{","return","cI","-","floor","(","cI","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","cL","(","vec4","cK",")","{","return","cF","(","(","34.0","*","cK","+","5.0",")","*","cK",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","cX","(","vec2","cM",")","{","vec2","cN","=","cF","(","floor","(","cM",")",")",";","vec2","cO","=","fract","(","cM",")",";","vec4","cP","=","cO",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","cQ","=","cO",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","cR","=","cL","(","cN",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","cR","=","cL","(","cR","+","cN",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","cS","=","cJ","(","cR",")","*","K","+","K2",";","vec4","cT","=","cJ","(","floor","(","cR","*","K",")",")","*","K","+","K2",";","vec4","cU","=","cP","+","JITTER","*","cS",";","vec4","cV","=","cQ","+","JITTER","*","cT",";","vec4","cW","=","cU","*","cU","+","cV","*","cV",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["cW",".","xy","=","min","(","cW",".","xy",",","cW",".","zw",")",";","cW",".","x","=","min","(","cW",".","x",",","cW",".","y",")",";","return","cW",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cW",".","xy","=","(","cW",".","x","<","cW",".","y",")","?","cW",".","xy",":","cW",".","yx",";","cW",".","xz","=","(","cW",".","x","<","cW",".","z",")","?","cW",".","xz",":","cW",".","zx",";","cW",".","xw","=","(","cW",".","x","<","cW",".","w",")","?","cW",".","xw",":","cW",".","wx",";","cW",".","y","=","min","(","cW",".","y",",","cW",".","z",")",";","cW",".","y","=","min","(","cW",".","y",",","cW",".","w",")",";","return","sqrt","(","cW",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dl","(","vec2","cY",",","float","cZ",")","{","vec2","c_","=","cF","(","floor","(","cY",")",")",";","vec2","da","=","fract","(","cY",")",";","vec4","db","=","da",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","dc","=","da",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","dd","=","cL","(","c_",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","dd","=","cL","(","dd","+","c_",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","de","=","cJ","(","dd",")","*","K","+","K2",";","vec4","df","=","cJ","(","floor","(","dd","*","K",")",")","*","K","+","K2",";","vec4","dg","=","db","+","JITTER","*","de",";","vec4","dh","=","dc","+","JITTER","*","df",";","vec4","di","=","dg","*","dg","+","dh","*","dh",";","dg","+=","cZ",";","dh","+=","cZ",";","vec4","dj","=","dg","*","dg","+","dh","*","dh",";","dg","+=","cZ",";","dh","+=","cZ",";","vec4","dk","=","dg","*","dg","+","dh","*","dh",";","di",".","xy","=","min","(","di",".","xy",",","di",".","zw",")",";","di",".","x","=","min","(","di",".","x",",","di",".","y",")",";","dj",".","xy","=","min","(","dj",".","xy",",","dj",".","zw",")",";","dj",".","x","=","min","(","dj",".","x",",","dj",".","y",")",";","dk",".","xy","=","min","(","dk",".","xy",",","dk",".","zw",")",";","dk",".","x","=","min","(","dk",".","x",",","dk",".","y",")",";","return","mat3","(","di",".","xx",",","0.0",",","dj",".","xx",",","0.0",",","dk",".","xx",",","0.0",")",";","}","vec3","dn","(","vec3","dm",")","{","return","cF","(","(","(","dm","*","34.0",")","+","1.0",")","*","dm",")",";","}","float","dC","(","vec2","dp",")","{","const","vec4","dq","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","dr","=","floor","(","dp","+","dot","(","dp",",","dq",".","yy",")",")",";","vec2","ds","=","dp","-","dr","+","dot","(","dr",",","dq",".","xx",")",";","vec2","dt",";","dt","=","(","ds",".","x",">","ds",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","du","=","ds",".","xyxy","+","dq",".","xxzz",";","du",".","xy","-=","dt",";","dr","=","cF","(","dr",")",";","vec3","dv","=","dn","(","dn","(","dr",".","y","+","vec3","(","0.0",",","dt",".","y",",","1.0",")",")","+","dr",".","x","+","vec3","(","0.0",",","dt",".","x",",","1.0",")",")",";","vec3","dw","=","max","(","0.5","-","vec3","(","dot","(","ds",",","ds",")",",","dot","(","du",".","xy",",","du",".","xy",")",",","dot","(","du",".","zw",",","du",".","zw",")",")",",","0.0",")",";","dw","=","dw","*","dw",";","dw","=","dw","*","dw",";","vec3","dx","=","2.0","*","fract","(","dv","*","dq",".","www",")","-","1.0",";","vec3","dy","=","abs","(","dx",")","-","0.5",";","vec3","dz","=","floor","(","dx","+","0.5",")",";","vec3","dA","=","dx","-","dz",";","dw","*=","1.79284291400159","-","0.85373472095314","*","(","dA","*","dA","+","dy","*","dy",")",";","vec3","dB",";","dB",".","x","=","dA",".","x","*","ds",".","x","+","dy",".","x","*","ds",".","y",";","dB",".","yz","=","dA",".","yz","*","du",".","xz","+","dy",".","yz","*","du",".","yw",";","return","130.0","*","dot","(","dw",",","dB",")",";","}","vec2","dI","(","vec2","dD",")","{","float","dE","=","dot","(","dD",",","vec2","(","12.9898",",","78.233",")",")",";","float","dF","=","dot","(","dD",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","dG","=","fract","(","sin","(","dE",")","*","43758.5453",")","*","2.0","-","1.0",";","float","dH","=","fract","(","sin","(","dF",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","dG",",","dH",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dK","=","0.1",";","const","float","dL","=","0.1",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","dM","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dN","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";"]}]}}]},{type:"textline",tokens:["float","d_","(","vec3","dO",",","sampler2D","dP",",","float","dQ",")","{","float","dR",";","dO",".","z","=","clamp","(","dO",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["dR","=","0.0",";","float","dS","=","dI","(","dO",".","xy",")",".","x","*","M_PI",";","float","dT","=","cos","(","dS",")",";","float","dU","=","sin","(","dS",")",";","mat2","dV","=","mat2","(","dT",",","dU",",","-","dU",",","dT",")",";","vec2","dW",",","dX",";","for","(","int","dY","=","0",";","dY","<","4",";","dY","++",")","for","(","int","dZ","=","0",";","dZ","<","4",";","dZ","++",")","{","dX",".","x","=","dM","[","dY","]","[","dZ","]",";","dX",".","y","=","dN","[","dY","]","[","dZ","]",";","dX","=","dV","*","dX",";","dW","=","dO",".","xy","+","dX","*","dQ","/","SHADOW_TEX_RES",";","dR","+=","step","(","dO",".","z",",","texture2D","(","dP",",","dW",")",".","r",")",";","}","dR","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dR","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","dR",",","0.0",",","1.0",")",";","}","float","er","(","vec3","ea",",","sampler2D","eb",",","vec3","ec",",","sampler2D","ed",",","float","ee",",","float","ef",",","float","eg",")","{","float","eh",",","ei",";","ea",".","z","=","clamp","(","ea",".","z",",","0.0",",","1.0",")",";","ec",".","z","=","clamp","(","ec",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","0.0",";","ei","=","0.0",";","float","ej","=","dI","(","ea",".","xy",")",".","x","*","M_PI",";","float","ek","=","cos","(","ej",")",";","float","el","=","sin","(","ej",")",";","mat2","em","=","mat2","(","ek",",","el",",","-","el",",","ek",")",";","vec2","en",",","eo",";","for","(","int","ep","=","0",";","ep","<","4",";","ep","++",")","for","(","int","eq","=","0",";","eq","<","4",";","eq","++",")","{","eo",".","x","=","dM","[","ep","]","[","eq","]",";","eo",".","y","=","dN","[","ep","]","[","eq","]",";","eo","=","em","*","eo",";","en","=","ea",".","xy","+","eo","*","ee","/","SHADOW_TEX_RES",";","eh","+=","step","(","ea",".","z",",","texture2D","(","eb",",","en",")",".","r",")",";","en","=","ec",".","xy","+","eo","*","ef","/","SHADOW_TEX_RES",";","ei","+=","step","(","ec",".","z",",","texture2D","(","ed",",","en",")",".","r",")",";","}","eh","=","mix","(","eh",",","ei",",","eg",")",";","eh","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eh","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","eh",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["bool","et","(","vec2","es",")","{","return","all","(","lessThanEqual","(","es",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThanEqual","(","es",",","vec2","(","0.0",")",")",")",";","}","float","ex","(","vec2","eu",")","{","float","ev","=","min","(","eu",".","x",",","eu",".","y",")",";","float","ew","=","min","(","1.0","-","eu",".","x",",","1.0","-","eu",".","y",")",";","return","min","(","ev",",","ew",")",";","}","float","eA","(","float","ey",",","float","ez",")","{","if","(","ez",">=","0.0","&&","ez","<=","dL",")","ey","=","(","ey","-","1.0",")","/","dL","*","ez","+","1.0",";","return","ey",";","}","float","eM","(","vec3","eB",",","vec3","eC",",","sampler2D","eD",",","sampler2D","eE",",","float","eF",",","float","eG",",","float","eH",",","float","eI",")","{","float","eJ",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eK","=","ex","(","eB",".","xy",")",";","if","(","-","eI",">","eH","&&","eK",">=","0.0","&&","eK","<=","dK","&&","et","(","eC",".","xy",")",")","{","float","eL","=","1.0","-","eK","/","dK",";","eJ","=","er","(","eB",",","eD",",","eC",",","eE",",","eF",",","eG",",","eL",")",";","}","else"]}]}}]},{type:"textline",tokens:["eJ","=","d_","(","eB",",","eD",",","eF",")",";","return","eJ",";","}","float","eU","(","vec3","eN",",","sampler2D","eO",",","float","eP",",","float","eQ",",","float","eR",")","{","float","eS","=","d_","(","eN",",","eO",",","eP",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","eR",">","eQ",")","{","float","eT","=","ex","(","eN",".","xy",")",";","eS","=","eA","(","eS",",","eT",")",";","}"]}]}}]},{type:"textline",tokens:["return","eS",";","}","float","fa","(","float","eV",")","{","float","eW","=","1.0",";","vec3","eX","=","cy",".","xyz","/","cy",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eY","=","cz",".","xyz","/","cz",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eZ","=","cA",".","xyz","/","cA",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","e_","=","cB",".","xyz","/","cB",".","w",";"]}]}}]},{type:"textline",tokens:["if","(","et","(","eX",".","xy",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["eW","=","eM","(","eX",",","eY",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","eV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eW","=","eU","(","eX",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","eV",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","et","(","eY",".","xy",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["eW","=","eM","(","eY",",","eZ",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","eV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eW","=","eU","(","eY",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","eV",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","et","(","eZ",".","xy",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["eW","=","eM","(","eZ",",","e_",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","eV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eW","=","eU","(","eZ",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","eV",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","et","(","e_",".","xy",")",")","eW","=","eU","(","e_",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","eV",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","eW",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","ff","(","inout","vec3","fb",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fc","=","texture2DProj","(","u_shadow_mask",",","cC",")",".","rg",";","vec3","fd","=","vec3","(","fc",".","r",")",";","float","fe","=","fc",".","g",";","dJ","=","vec4","(","fd",",","fe",")",";","fb","*=","dJ",".","a",";","return","dJ",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","fa","(","cD",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fk","(","vec3","fg",",","float","fh",",","vec2","fi",")","{","vec2","fj","=","vec2","(","(","fg",".","x","-","fi",".","x",")","/","fh",",","-","(","fg",".","z","-","fi",".","y",")","/","fh",")",";","return","fract","(","fj",")",";","}","vec2","fo","(","vec2","fl",",","float","fm",",","vec2","fn",")","{","return","vec2","(","fl",".","x","*","fm",",","-","fl",".","y","*","fm",")","+","fn",";","}","c","fp","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","fV","(","vec3","fq",",","vec3","fr",",","vec3","fs",",","vec3","ft",",","vec3","fu",",","sampler2D","fv",",","sampler2D","fw",",","vec3","fx",",","float","fy",",","vec3","fz",",","vec4","fA",",","mat4","fB",")","{","vec3","fC","=","i","(","fA",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","fD","=","-","fC",".","x",";","float","fE","=","-","fC",".","z",";","vec2","fF","=","vec2","(","fz",".","x","+","fy","*","(","-","1.0","-","fD",")","/","2.0",",","fz",".","z","+","fy","*","(","1.0","-","fE",")","/","2.0",")",";","vec2","fG","=","fk","(","fu",",","fy",",","fF",")",";","float","fH","=","fy","/","2.0",";","vec2","fI","=","abs","(","fo","(","fG","-","vec2","(","0.5",")",",","fy",",","vec2","(","0.0",")",")",")",";","float","fJ","=","fH","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fI",")",">","fJ",")","return","fp","(",")",";","float","fK","=","fy","/","fx",".","z",";","vec2","fL","=","(","fG","-","vec2","(","0.5",")",")","*","fK","+","vec2","(","0.5",")",";","vec3","fM","=","fC","*","(","fy","/","fx",".","z","-","1.0",")","/","2.0",";","fL",".","x","+=","fM",".","x",";","fL",".","y","-=","fM",".","z",";","vec4","fN","=","texture2D","(","fw",",","fL",")",";","float","fO","=","fN",".","r",";","if","(","fO","<","u_scale_threshold",")","return","fp","(",")",";","float","fP","=","fx",".","y","-","fx",".","x",";","float","fQ","=","fx",".","y","-","texture2D","(","fv",",","fL",")",".","r","*","fP",";","vec2","fR","=","fq",".","xz","-","fu",".","xz",";","fu",".","xz","=","fo","(","fG",",","fy",",","fF",")",";","fu",".","y","=","fQ",";","fq",".","xz","=","fu",".","xz","+","fR",";","fq",".","y","*=","fO",";","fq",".","y","+=","fQ",";","vec3","fS","=","fN",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fq","-=","fu",";","mat4","fT","=","_","(","fz",",","fu",",","fB",")",";","c","fU","=","ag","(","fq",",","fu",",","fr",",","fs",",","ft",",","fT",")",";","fU",".","b","=","fu",";","fU",".","f","=","fS",";","return","r","(","fU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","r","(","c","(","fq",",","fu",",","fr",",","fs",",","ft",",","fS",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ga","(","mat4","fW",",","vec4","fX",")","{","vec2","fY","=","(","fW","*","u_v_light_matrix","[","3","]",")",".","xy",";","float","fZ","=","SHADOW_TEX_RES","/","2.0",";","fY","=","floor","(","fY","*","fZ","+","0.5",")","/","fZ","-","fY",";","vec4","f_","=","fW","*","fX",";","f_",".","xy","+=","fY",";","f_","=","u_b_light_matrix","*","f_",";","return","f_",";","}","void","ge","(","vec3","gb",")","{","vec3","gc","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";","vec4","gd","=","u_v_light_matrix","*","vec4","(","gb","+","u_normal_offset","*","gc",",","1.0",")",";","cy","=","ga","(","u_p_light_matrix0",",","gd",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cz","=","ga","(","u_p_light_matrix1",",","gd",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cA","=","ga","(","u_p_light_matrix2",",","gd",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cB","=","ga","(","u_p_light_matrix3",",","gd",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","ge","(","vec4","gf",")","{","float","gg","=","gf",".","x",";","float","gh","=","gf",".","y",";","float","gi","=","gf",".","w",";","cC",".","x","=","(","gg","+","gi",")","/","2.0",";","cC",".","y","=","(","gh","+","gi",")","/","2.0",";","cC",".","z","=","gi",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","gl","(","inout","vec3","gk",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gk","=","max","(","vec3","(","0.0",")",",","gk",")",";","gk","=","pow","(","gk",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gn","(","inout","vec3","gm",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gm","=","max","(","vec3","(","0.0",")",",","gm",")",";","gm","=","pow","(","gm",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gq","(","inout","vec3","go",",","in","float","gp",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["go","=","go","*","gp",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","gy","(","inout","vec3","gt",",","in","float","gu",",","in","vec4","gv",")","{","float","gw","=","gv",".","w","*","gu",";","float","gx","=","exp","(","-","gw","*","gw",")",";","gx","=","clamp","(","gx",",","0.0",",","1.0",")",";","gt","=","mix","(","gv",".","rgb",",","gt",",","gx",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gF","(","in","mat4","gz",",","in","vec3","gA",")","{","vec3","gB","=","mix","(","gz","[","0","]",".","rgb",",","gz","[","1","]",".","rgb",",","max","(","sign","(","gA",".","x",")",",","0.0",")",")",";","vec3","gC","=","mix","(","gz","[","2","]",".","rgb",",","gz","[","3","]",".","rgb",",","max","(","sign","(","gA",".","z",")",",","0.0",")",")",";","vec3","gD","=","vec3","(","gz","[","0","]",".","a",",","gz","[","1","]",".","a",",","gz","[","2","]",".","a",")",";","vec3","gE","=","mix","(","gB",",","gC",",","abs","(","gA",".","z",")",")",";","gE","=","mix","(","gE",",","gD",",","abs","(","gA",".","y",")",")",";","return","gE",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gH","(","inout","float","gG",")","{","gG","-=","0.5",";","gG","=","4.0","*","(","gG","*","gG","*","gG",")","+","0.5",";","}","void","gY","(","inout","vec3","gI",",","in","float","gJ",",","in","vec3","gK",",","in","float","gL",",","in","vec4","gM",",","in","vec4","gN",",","in","float","gO",",","in","float","gP",")","{","float","gQ","=","gN",".","w","*","gJ",";","float","gR","=","exp","(","-","gQ","*","gQ",")",";","gR","=","clamp","(","gR",",","0.0",",","1.0",")",";","float","gS","=","max","(","gK",".","y",",","0.0",")",";","gJ","=","max","(","gJ","-","max","(","gL","/","gS",",","0.0",")",",","0.0",")",";","float","gT","=","gM",".","w","*","gJ",";","float","gU","=","1.0","-","gT",";","gU","=","max","(","gU",",","0.0",")",";","gH","(","gU",")",";","gU","+=","max","(","gO","-","0.5",",","0.0",")",";","if","(","gU","<","gR",")","{","vec3","gV","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","gW","=","gM",".","rgb",";","gL","=","clamp","(","-","gL","*","0.03",",","0.0",",","0.8",")",";","vec3","gX","=","mix","(","gW",",","gV",",","min","(","gS",",","1.0",")",")",";","gX","=","mix","(","gX",",","vec3","(","0.0",")",",","gL",")","*","gP",";","gI","=","mix","(","gX",",","gI",",","gU",")",";","}","if","(","gU",">=","gR",")","{","gI","=","mix","(","gN",".","rgb",",","gI",",","gR",")",";","}","}","void","hg","(","inout","vec3","gZ",",","in","float","g_",",","in","float","ha",",","in","vec4","hb",",","in","float","hc",")","{","float","hd","=","hb",".","w","*","g_",";","float","he","=","1.0","-","hd",";","he","=","clamp","(","he",",","0.0",",","1.0",")",";","gH","(","he",")",";","ha","=","clamp","(","-","ha","*","0.03",",","0.0",",","0.8",")",";","vec3","hf","=","mix","(","hb",".","rgb",",","vec3","(","0.0",")",",","ha",")","*","hc",";","gZ","=","mix","(","hf",",","gZ",",","he",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["struct","hh","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hp","(","vec3","hi",",","vec3","hj",",","vec3","hk",",","vec4","hl",",","float","hm",")","{","vec3","hn","=","normalize","(","hi","+","hj",")",";","float","ho","=","hl","[","0","]","*","max","(","dot","(","hk",",","hn",")",",","0.0",")","+","hl","[","1","]",";","return","pow","(","ho",",","hm",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hA","(","vec3","hq",",","vec3","hr",",","vec3","hs",",","float","ht",")","{","vec3","hu","=","normalize","(","hq","+","hr",")",";","float","hv","=","max","(","dot","(","hs",",","hu",")",",","0.001",")",";","float","hw","=","max","(","dot","(","hs",",","hr",")",",","0.01",")",";","float","hx","=","max","(","dot","(","hs",",","hq",")",",","0.01",")",";","float","hy","=","tan","(","acos","(","hv",")",")",";","float","hz","=","max","(","ht",",","0.001",")",";","return","hx","*","(","1.0","/","(","4.0","*","M_PI","*","hz","*","hz",")",")","*","(","exp","(","-","(","hy","*","hy",")","/","(","hz","*","hz",")",")","/","(","sqrt","(","hw","*","hx",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hI","(","vec3","hB",",","vec3","hC",",","vec3","hD",",","float","hE",",","float","hF",")","{","vec3","hG","=","normalize","(","hB","+","hC",")",";","float","hH","=","acos","(","dot","(","hG",",","hD",")",")",";","if","(","hH","<","hE",")","return","1.0",";","else","if","(","hH",">=","hE","+","hF","||","hF","==","0.0",")","return","0.0",";","else","return","1.0","-","(","hH","-","hE",")","/","hF",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","ib","(","float","hJ",",","vec3","hK",",","vec3","hL",",","vec3","hM",",","float","hN",",","inout","float","hO",")","{","if","(","hN",">","0.0",")","{","float","hP","=","max","(","dot","(","hK",",","hM",")",",","0.0",")",";","float","hQ","=","hN","*","hN",";","float","hR","=","1.0","-","0.5","*","(","hQ","/","(","hQ","+","0.33",")",")",";","vec3","hS","=","hL","-","hJ","*","hK",";","vec3","hT","=","hM","-","hP","*","hK",";","if","(","length","(","hS",")","==","0.0","||","length","(","hT",")","==","0.0","||","abs","(","hJ",")",">","1.0","||","abs","(","hP",")",">","1.0",")","hO","=","hO","*","hR",";","else","{","float","hU","=","acos","(","hJ",")",";","float","hV","=","acos","(","hP",")",";","vec3","hW","=","normalize","(","hS",")",";","vec3","hX","=","normalize","(","hT",")",";","float","hY",",","hZ",";","hY","=","max","(","hU",",","hV",")",";","hZ","=","min","(","hU",",","hV",")",";","hZ","*=","0.95",";","float","h_","=","max","(","dot","(","hW",",","hX",")",",","0.0",")",";","float","ia","=","0.45","*","(","hQ","/","(","hQ","+","0.09",")",")",";","hO","=","hO","*","(","hR","+","(","ia","*","h_","*","sin","(","hY",")","*","tan","(","hZ",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","ij","(","vec3","ic",",","vec3","id",",","float","ie",",","float","ig",",","out","float","ih",")","{","float","ii",";","if","(","ie","==","0.0",")","{","ih","=","1.0",";","}","else","{","ii","=","1.0","+","abs","(","dot","(","id",",","ic",")",")",";","ii","=","ig","+","(","1.0","-","ig",")","*","pow","(","ii",",","ie",")",";","ih","=","clamp","(","ii",",","0.0",",","1.0",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","iS","(","inout","hh","ik",",","vec3","il",",","vec3","im",",","vec3","io",",","vec3","ip",",","vec3","iq",",","vec2","ir",",","vec2","is",",","float","it",",","vec3","iu",",","vec3","iv",",","vec3","iw",",","vec4","ix",",","vec4","iy",",","float","iz",",","vec4","iA",")","{","vec3","iB","=","vec3","(","0.0",")",";","vec3","iC","=","iw","*","it",";","float","iD","=","iy",".","z",";","if","(","iD","!=","-","1.0",")","{","iB","=","iu","-","io",";","float","iE","=","length","(","iB",")",";","iC","*=","iD","/","(","iD","+","iE","*","iE",")",";","iB","=","normalize","(","iB",")",";","float","iF","=","iy",".","x",";","float","iG","=","iy",".","y",";","if","(","iF",">","-","1.0",")","{","float","iH","=","dot","(","iB",",","iv",")",";","iH","*=","smoothstep","(","0.0",",","1.0",",","(","iH","-","iF",")","/","iG",")",";","iC","*=","iH",";","}","}","else","iB","=","iv",";","float","iI",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["ij","(","ip",",","iB",",","is","[","0","]",",","is","[","1","]",",","iI",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iJ","=","max","(","dot","(","ip",",","iB",")",",","0.0",")",";","iI","=","ix","[","0","]","*","iJ","+","ix","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["ib","(","iJ",",","ip",",","iB",",","iq",",","is","[","0","]",",","iI",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","iK","=","hp","(","iB",",","iq",",","ip",",","ix",",","ir","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","iK","=","hA","(","iB",",","iq",",","ip",",","ir","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","iK","=","hI","(","iB",",","iq",",","ip",",","ir","[","0","]",",","ir","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iK","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","iB",",","ip",")","*","dot","(","iq",",","ip",")","<","0.0",")","{","float","iL","=","iA",".","x",";","float","iM","=","iA",".","y",";","float","iN","=","iA",".","z",";","float","iO","=","iA",".","w",";","float","iP","=","clamp","(","abs","(","dot","(","iB",",","ip",")",")",",","0.0",",","1.0",")",";","float","iQ","=","clamp","(","dot","(","iq",",","-","iB",")",",","0.0",",","1.0",")",";","float","iR","=","pow","(","iQ",",","iM",")",";","ik",".","a","+=","iz","*","vec4","(","iC","*","iP","*","pow","(","il",",","vec3","(","iL",")",")",",","1.0",")",";","ik",".","a","+=","iN","*","mix","(","vec4","(","il",",","1.0",")",",","vec4","(","1.0",")",",","iO",")","*","iz","*","vec4","(","iC","*","iP","*","vec3","(","iR",")",",","1.0",")",";","}","else","{","ik",".","b","+=","iC","*","im","*","iK",";","ik",".","a","+=","vec4","(","iC","*","il","*","iI",",","iK",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ik",".","b","+=","iC","*","im","*","iK",";","ik",".","a","+=","vec4","(","iC","*","il","*","iI",",","iK",")",";"]}]}}]},{type:"textline",tokens:["}","hh","jE","(","vec3","iT",",","vec3","iU",",","vec3","iV",",","vec3","iW",",","vec3","iX",",","vec3","iY",",","vec3","iZ",",","vec2","i_",",","vec2","ja",",","float","jb",",","vec3","jc","[","NUM_LIGHTS","]",",","vec3","jd","[","NUM_LIGHTS","]",",","vec3","je","[","NUM_LIGHTS","]",",","vec4","jf","[","NUM_LIGHTS","]",",","vec4","jg","[","NUM_LIGHTS","]",",","float","jh",",","vec4","ji",")","{","hh","jj",";","jj",".","a","=","vec4","(","iT","+","iV","*","iU",",","0.0",")",";","jj",".","b","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["iS","(","jj",",","iV",",","iW",",","iX",",","iY",",","iZ",",","i_",",","ja",",","jb",",","jc","[","0","]",",","jd","[","0","]",",","je","[","0","]",",","jf","[","0","]",",","jg","[","0","]",",","jh",",","ji",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["iS","(","jj",",","iV",",","iW",",","iX",",","iY",",","iZ",",","i_",",","ja",",","jb",",","jc","[","1","]",",","jd","[","1","]",",","je","[","1","]",",","jf","[","1","]",",","jg","[","1","]",",","jh",",","ji",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["iS","(","jj",",","iV",",","iW",",","iX",",","iY",",","iZ",",","i_",",","ja",",","jb",",","jc","[","2","]",",","jd","[","2","]",",","je","[","2","]",",","jf","[","2","]",",","jg","[","2","]",",","jh",",","ji",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["iS","(","jj",",","iV",",","iW",",","iX",",","iY",",","iZ",",","i_",",","ja",",","jb",",","jc","[","3","]",",","jd","[","3","]",",","je","[","3","]",",","jf","[","3","]",",","jg","[","3","]",",","jh",",","ji",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","jk","=","0",";","jk","<","NUM_LIGHTS",";","jk","++",")","{","vec4","jl","=","jf","[","jk","]",";","vec4","jm","=","jg","[","jk","]",";","if","(","jl","[","3","]","+","jm","[","3","]","!=","0.0",")","{","vec3","jn","=","vec3","(","0.0",")",";","vec3","jo","=","je","[","jk","]",";","jo","*=","jb",";","float","jp","=","jm",".","z",";","if","(","jp","!=","-","1.0",")","{","jn","=","jc","[","jk","]","-","iX",";","float","jq","=","length","(","jn",")",";","jo","*=","jp","/","(","jp","+","jq","*","jq",")",";","jn","=","normalize","(","jn",")",";","float","jr","=","jm",".","x",";","float","js","=","jm",".","y",";","if","(","jr",">","-","1.0",")","{","float","jt","=","dot","(","jn",",","jd","[","jk","]",")",";","jt","*=","smoothstep","(","0.0",",","1.0",",","(","jt","-","jr",")","/","js",")",";","jo","*=","jt",";","}","}","else","jn","=","jd","[","jk","]",";","float","ju","=","0.0",";","if","(","jl","[","3","]","!=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["ij","(","iY",",","jn",",","ja","[","0","]",",","ja","[","1","]",",","ju",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jv","=","max","(","dot","(","iY",",","jn",")",",","0.0",")",";","ju","=","jl","[","0","]","*","jv","+","jl","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["ib","(","jv",",","iY",",","jn",",","iZ",",","ja","[","0","]",",","ju",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","float","jw","=","0.0",";","if","(","jm","[","3","]","!=","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["jw","=","hp","(","jn",",","iZ",",","iY",",","jl",",","i_","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["jw","=","hA","(","jn",",","iZ",",","iY",",","i_","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["jw","=","hI","(","jn",",","iZ",",","iY",",","i_","[","0","]",",","i_","[","1","]",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","jn",",","iY",")","*","dot","(","iZ",",","iY",")","<","0.0",")","{","float","jx","=","ji",".","x",";","float","jy","=","ji",".","y",";","float","jz","=","ji",".","z",";","float","jA","=","ji",".","w",";","float","jB","=","clamp","(","abs","(","dot","(","jn",",","iY",")",")",",","0.0",",","1.0",")",";","float","jC","=","clamp","(","dot","(","iZ",",","-","jn",")",",","0.0",",","1.0",")",";","float","jD","=","pow","(","jC",",","jy",")",";","jj",".","a","+=","jh","*","vec4","(","jo","*","jB","*","pow","(","iV",",","vec3","(","jx",")",")",",","1.0",")",";","jj",".","a","+=","jz","*","mix","(","vec4","(","iV",",","1.0",")",",","vec4","(","1.0",")",",","jA",")","*","jh","*","vec4","(","jo","*","jB","*","vec3","(","jD",")",",","1.0",")",";","}","else","{","jj",".","b","+=","jo","*","iW","*","jw",";","jj",".","a","+=","vec4","(","jo","*","iV","*","ju",",","jw",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jj",".","b","+=","jo","*","iW","*","jw",";","jj",".","a","+=","vec4","(","jo","*","iV","*","ju",",","jw",")",";"]}]}}]},{type:"textline",tokens:["}","}"]}]}}]},{type:"textline",tokens:["return","jj",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","ke","(","inout","vec3","jF",",","float","jG",",","float","jH",",","float","jI",",","vec3","jJ",",","vec3","jK",",","vec3","jL",",","vec4","jM",",","vec3","jN",",","float","jO",")","{","if","(","jO",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","jP","=","jM",";","vec3","jQ","=","jN","+","jJ",";","jQ",".","xz","=","10.0","*","sin","(","0.1","*","jQ",".","xz",")",";","vec3","jR","=","jQ","+","2.0","*","cross","(","-","jP",".","xyz",",","cross","(","-","jP",".","xyz",",","jQ",")","+","jP",".","w","*","jQ",")",";","vec2","jS","=","jR",".","xz",";","vec3","jT","=","jK",";","float","jU","=","max","(","dot","(","jJ",",","jT",")",",","0.0",")",";","float","jV","=","0.025",";","jS",".","s","+=","0.5","*","sin","(","dot","(","jN","+","jH",",","vec3","(","1.0",")",")",")",";","jS",".","t","+=","0.7","*","(","-","sin","(","dot","(","jN","-","jH",",","vec3","(","-","0.7",")",")",")",")",";","jS",".","st","+=","0.23","*","cos","(","4.0","*","jG","-","CAUST_SPEED",".","x","*","jH",")",";","jS",".","st","+=","3.0","*","sin","(","jG","-","0.3","*","CAUST_SPEED",".","y","*","jH",")",";","float","jW","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","jG",",","0.0",")",")",";","mat3","jX","=","dl","(","(","jS","/","jW",")",",","jV",")",";","float","jY","=","(","jX","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","jZ","=","(","jX","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","j_","=","(","jX","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","ka","=","CAUST_BRIGHT","*","vec3","(","jY",",","jZ",",","j_",")",";","float","kb","=","jI","*","jU",";","float","kc","=","max","(","sign","(","jG",")",",","0.0",")",";","kb","=","min","(","kb","+","0.5","*","sign","(","-","jJ",".","y",")","*","kc",",","1.0",")",";","kb","*=","1.0","-","kc","*","(","0.1","*","jG",")",";","ka","*=","kb",";","ka","*=","ka",";","float","kd","=","min","(","-","jG","+","10.0",",","1.0",")",";","jF","+=","max","(","(","2.0","*","jL","*","ka",")","*","kd",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","ks","(","in","vec3","kl",",","in","vec3","km",",","in","float","kn",",","in","float","ko",")","{","vec3","kp","=","normalize","(","km","+","kl",")",";","float","kq","=","1.0","-","dot","(","kl",",","kp",")",";","float","kr","=","ko","+","(","1.0","-","ko",")","*","pow","(","kq",",","kn",")",";","return","kr",";","}","void","kH","(","inout","vec3","kt",",","in","vec3","ku",",","in","vec3","kv",",","in","float","kw",",","in","float","kx",",","in","float","ky",")","{","vec3","kz","=","reflect","(","-","ku",",","kv",")",";","float","kA","=","1.0",";","if","(","kw","!=","0.0",")","kA","=","ks","(","ku",",","kz",",","kw",",","kx",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kB","=","u_refl_plane",".","xyz","*","dot","(","kv",",","u_refl_plane",".","xyz",")",";","vec3","kC","=","kv","-","kB",";","vec2","kD","=","(","u_view_matrix_frag","*","vec4","(","kC",",","0.0",")",")",".","xy",";","vec2","kE","=","cC",".","xy","/","cC",".","z",";","kE","+=","kD","*","REFL_BUMP",";","vec3","kF","=","texture2D","(","u_reflectmap",",","kE",")",".","rgb",";","gl","(","kF",".","rgb",")",";","kt","=","mix","(","kt",",","kF",",","ky","*","kA",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kG","=","textureCube","(","u_mirrormap",",","kz",")",".","xyz",";","gl","(","kG",".","rgb",")",";","kt","=","mix","(","kt",",","kG",",","u_mirror_factor","*","kA",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kN","(","in","float","kI",",","inout","vec2","kJ",",","in","vec2","kK",")","{","vec4","kL","=","texture2D","(","u_scene_depth",",","kJ",")",";","float","kM","=","co","(","kL",")",";","if","(","kM","<","kk",")","{","kJ","=","kK",";","return","kI",";","}","else","{","return","kM",";","}","return","kI",";","}","vec3","kV","(","in","vec3","kO",",","in","vec2","kP",")","{","vec2","kQ","=","kO",".","xy","/","kO",".","z",";","vec2","kR","=","kQ","+","kP",";","vec4","kS","=","texture2DProj","(","u_scene_depth",",","kO",")",";","float","kT","=","co","(","kS",")",";","kN","(","kT",",","kR",",","kQ",")",";","vec3","kU","=","texture2D","(","u_refractmap",",","kR",")",".","rgb",";","gl","(","kU",")",";","return","kU",";","}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","ma","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mh","(","inout","float","mb",",","float","mc",",","vec2","md",",","vec2","me",")","{","float","mf","=","me",".","x","-","md",".","x",";","float","mg","=","(","mc","-","md",".","x",")","/","mf",";","mb","=","mix","(","mb",",","me",".","y",",","clamp","(","mg",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mo","(","inout","vec3","mi",",","float","mj",",","vec4","mk",",","vec4","ml",")","{","float","mm","=","ml",".","x","-","mk",".","x",";","float","mn","=","(","mj","-","mk",".","x",")","/","mm",";","mi","=","mix","(","mi",",","ml",".","yzw",",","clamp","(","mn",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","mv","(","float","mp",",","float","mq",",","vec2","mr","[","SIZE_RAMP_LENGTH","]",")","{","float","ms","=","mp","/","mq",";","float","mt","=","mr","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mh","(","mt",",","ms",",","mr","[","0","]",",","mr","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mh","(","mt",",","ms",",","mr","[","1","]",",","mr","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mh","(","mt",",","ms",",","mr","[","2","]",",","mr","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mu","=","1",";","mu","<","SIZE_RAMP_LENGTH",";","mu","++",")","mh","(","mt",",","ms",",","mr","[","mu","-","1","]",",","mr","[","mu","]",")",";"]}]}}]},{type:"textline",tokens:["return","mt",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mC","(","float","mw",",","float","mx",",","vec4","my","[","COLOR_RAMP_LENGTH","]",")","{","float","mz","=","mw","/","mx",";","vec3","mA","=","my","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mo","(","mA",",","mz",",","my","[","0","]",",","my","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mo","(","mA",",","mz",",","my","[","1","]",",","my","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mo","(","mA",",","mz",",","my","[","2","]",",","my","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mB","=","1",";","mB","<","COLOR_RAMP_LENGTH",";","mB","++",")","mo","(","mA",",","mz",",","my","[","mB","-","1","]",",","my","[","mB","]",")",";"]}]}}]},{type:"textline",tokens:["return","mA",";","}"]}]}}]},{type:"textline",tokens:["float","mL","(","float","mD",",","float","mE",",","float","mF",",","float","mG",")","{","float","mH","=","max","(","0.01",",","min","(","mE",",","mF",")",")",";","float","mI","=","max","(","0.01",",","min","(","mE",",","mG",")",")",";","float","mJ","=","mE","-","mI",";","float","mK","=","clamp","(","mD","/","mH",",","0.0",",","1.0",")","-","step","(","mJ",",","mD",")","*","(","mD","-","mJ",")","/","mI",";","return","mK",";","}","ma","mR","(",")","{","ma","mM",";","float","mN",";","if","(","u_p_cyclic","==","1",")","{","mN","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","mN","<","0.0",")","mN","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","mN","=","u_p_time","-","a_p_delay",";","}","if","(","mN","<","0.0","||","mN",">=","a_p_lifetime",")","{","mM",".","a","=","0.0001",";","mM",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","mN","<","0.0","||","mN",">=","a_p_lifetime",")",")","{","vec3","mO","=","a_position",";","vec3","mP","=","a_normal",";","mO","+=","u_p_nfactor","*","mN","*","mP",";","mO","+=","a_p_vels",".","xyz","*","mN",";","mO",".","y","-=","u_p_gravity","*","mN","*","mN","/","2.0",";","float","mQ","=","max","(","u_p_mass",",","EPSILON",")",";","mO","+=","(","u_p_wind","/","mQ",")","*","mN","*","mN","/","2.0",";","mM",".","b","=","mO",";","mM",".","e","=","a_p_vels",".","w","*","mN",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mM",".","a","=","mv","(","mN",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mM",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mM",".","d","=","mC","(","mN",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mM",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["mM",".","c","=","mL","(","mN",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","mM",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","nd","(","in","sampler2D","mX",",","in","vec2","mY",",","in","vec2","mZ",")","{","float","m_","=","texture2D","(","mX",",","mY",")",".","r",";","float","na","=","mZ",".","x",";","float","nb","=","mZ",".","y",";","float","nc","=","2.0","*","na","/","(","na","+","nb","-","(","2.0","*","m_","-","1.0",")","*","(","nb","-","na",")",")",";","return","nc",";","}"]}]}}