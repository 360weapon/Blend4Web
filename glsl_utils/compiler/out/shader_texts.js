b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cf","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cf","=","mix","(","cf",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cg","=","vec3","(","0.0",")",";","vec3","ch","=","vec3","(","0.0",")",";","vec3","ci","=","vec3","(","0.0",")",";","bn","(","cf",",","cg",",","ch",",","ci",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ck","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","mat4","cl","=","ab","(","u_camera_eye",",","ck",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","cl","=","cl","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cm",")",";"]}]}}]},{type:"textline",tokens:["b","cn","=","ai","(","cf","-","cj",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cl",")",";","cn",".","b","=","ck",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","cn","=","ai","(","cf",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","cn",".","a",",","cn",".","b",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cn",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","dl","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","dl","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","dl","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cj","(","cw",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cj","(","cw",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["float","dm","=","cw",";","float","dn","=","dm","*","dm",";","gl_FragColor","=","vec4","(","dm",",","dn",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","de","(","cC",".","z",",","u_shadow_visibility_falloff",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","eh","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","mix","(","eh",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","vec3","(","0.0",")",";","vec3","ej","=","vec3","(","0.0",")",";","vec3","ek","=","vec3","(","0.0",")",";","bn","(","eh",",","ei",",","ej",",","ek",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","em","=","ea","(","eh",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","el",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","en","=","(","u_model_matrix","*","vec4","(","el",",","1.0",")",")",".","xyz",";","mat4","eo","=","ab","(","u_camera_eye",",","en",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ep","=","(","u_model_matrix","*","vec4","(","el",",","1.0",")",")",".","xyz",";","eo","=","eo","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ep",")",";"]}]}}]},{type:"textline",tokens:["b","em","=","ai","(","eh","-","el",",","el",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","eo",")",";","em",".","b","=","en",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","em","=","ai","(","eh",",","el",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","eq","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","em",".","a",",","em",".","b",",","eq",")",";"]}]}}]},{type:"textline",tokens:["vec4","er","=","u_view_matrix","*","vec4","(","em",".","a",",","1.0",")",";","vec4","es","=","u_proj_matrix","*","er",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["es",".","xy","+=","u_subpixel_jitter","*","es",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ec","(","em",".","a",")",";","cC","=","er",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["cw","=","-","er",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","es",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eh",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eh",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","eh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","eh",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","eh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","eh",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","eh",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","ej","=","ab","(","u_camera_eye",",","ei",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["ej","=","ej","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["b","ek","=","ai","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ej",")",";","ek",".","b","=","ei",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ek","=","ai","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","el","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ek",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eh","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","el",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","ep",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","eq",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","er","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","er","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","et","(","float","es",")","{","return","es","-","floor","(","es","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eC","(","inout","float","eu",",","in","float","ev","[","er","]",",","in","float","ew",")","{","for","(","int","ex","=","NUM_RINGS",";","ex",">","0",";","ex","--",")","{","float","ey","=","40.0","*","ev","[","ex","]",";","float","ez","=","300.0","*","(","et","(","ey",")","-","0.005",")",";","float","eA","=","ey",";","float","eB","=","abs","(","eA","*","(","u_halo_size","*","ez","-","ew",")",")",";","eu","+=","1.0","-","min","(","eB",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","eL","(","inout","float","eD",",","in","float","eE","[","er","]",",","in","float","eF",")","{","for","(","int","eG","=","NUM_LINES",";","eG",">","0",";","eG","--",")","{","float","eH","=","eE","[","eG","]",";","float","eI","=","eH",";","float","eJ","=","1000.0","*","(","et","(","eH",")","-","0.005",")",";","float","eK","=","20.0","*","abs","(","eI","*","a",".","x","+","eJ","*","a",".","y",")",";","eD","+=","1.0","-","min","(","eK",",","1.0",")",";","}","eD","*=","eF",";","}"]}]}}]},{type:"textline",tokens:["void","eS","(","inout","float","eM",",","in","vec2","eN",")","{","float","eO",",","eP",";","eP","=","atan","(","eN",".","y",",","eN",".","x",")",";","eP","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","eQ","=","cos","(","eP",")",";","float","eR","=","sin","(","eP",")",";","eP","=","(","eQ","*","eN",".","x","+","eR","*","eN",".","y",")","*","(","eQ","*","eN",".","y","-","eR","*","eN",".","x",")",";","eO","=","abs","(","eP",")",";","if","(","eO","<","1.0",")","{","eO","=","(","0.01","*","u_halo_size",")","/","(","eO",")",";","eM","*=","sqrt","(","min","(","eO",",","1.0",")",")",";","}","}","void","main","(",")","{","float","eT","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","eU","=","sqrt","(","eT",")",";","eT","=","max","(","1.0","-","eT",",","0.0",")",";","eT","=","pow","(","eT",",","u_halo_hardness",")",";","float","eV","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eW","[","er","]",";","for","(","int","eX","=","0",";","eX","<","er",";","eX","++",")","{","eW","[","eX","]","=","fract","(","eq","/","float","(","eX",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","eY","=","0.0",";","eC","(","eY",",","eW",",","eU",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eZ","=","0.0",";","eL","(","eZ",",","eW",",","eT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eS","(","eT",",","a",")",";"]}]}}]},{type:"textline",tokens:["eT","*=","eV",";","vec3","e_","=","u_diffuse_color",".","rgb","*","eT",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["eY","*=","eT",";","e_","+=","u_halo_rings_color","*","eY",";","eT","+=","eY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["eZ","*=","eV",";","e_","+=","u_halo_lines_color","*","eZ",";","eT","+=","eZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eT","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","fa","=","u_halo_stars_blend","*","(","ep",".","y","-","u_halo_stars_height",")",";","eT","*=","clamp","(","fa",",","0.0",",","1.0",")",";","eT","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["el","(","e_",")",";","eo","(","e_",",","eT",")",";","gl_FragColor","=","vec4","(","e_",",","eT",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","eq",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ep",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","er","=","a_position",";","a","=","a_halo_bb_vertex","*","2.0",";","eq","=","fract","(","er",".","x","+","er",".","y","+","er",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","es","=","A","(","er",",","u_view_matrix",")",";","mat4","et","=","u_view_matrix",";","et","[","3","]","[","0","]","=","0.0",";","et","[","3","]","[","1","]","=","0.0",";","et","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","es","=","A","(","er",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","eu","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","ev","=","es","*","eu",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ew","=","u_proj_matrix","*","et","*","ev",";","ew",".","z","=","0.99999","*","ew",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ep","=","ev",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","ew","=","u_proj_matrix","*","u_view_matrix","*","ev",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ew",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","er","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","er",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jb",";","varying","vec3","jc",";","varying","vec3","jd",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","je",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jA","=","jc",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jB","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","jC","=","jd",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","jC","=","jC",";","else","jC","=","-","jC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jD","=","cross","(","jC",",","je",".","xyz",")","*","je",".","w",";","mat3","jE","=","mat3","(","je",".","xyz",",","jD",",","jC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","jF","=","length","(","cC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","jF","<","PARALLAX_LOD_DIST",")","{","float","jG","=","clamp","(","5.0","-","0.5","*","jF",",","0.0",",","1.0",")",";","float","jH","=","u_parallax_scale","*","jG",";","vec3","jI","=","normalize","(","jb","*","jE",")",";","float","jJ","=","1.0","/","PARALLAX_STEPS",";","vec2","jK","=","jI",".","xy","*","jH","/","(","PARALLAX_STEPS","*","jI",".","z",")",";","float","jL","=","1.0",";","float","jM","=","texture2D","(","u_normalmap0",",","jB",")",".","a",";","for","(","float","jN","=","1.0",";","jN","<=","PARALLAX_STEPS",";","jN","++",")","{","if","(","jM","<","jL",")","{","jL","-=","jJ",";","jB","-=","jK",";","jM","=","texture2D","(","u_normalmap0",",","jB",")",".","a",";","}","}","vec2","jO","=","jB","+","jK",";","float","jP","=","texture2D","(","u_normalmap0",",","jO",")",".","a","-","(","jL","+","jJ",")",";","float","jQ","=","jM","-","jL",";","float","jR","=","jQ","/","(","jQ","-","jP",")",";","jB","=","jR","*","jO","+","(","1.0","-","jR",")","*","jB",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jS","=","texture2D","(","u_normalmap0",",","jB","+","u_time","*","u_normalmap0_uv_velocity",")",";","vec3","jT","=","jS",".","rgb","-","0.5",";","jT","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","jT",",","u_normal_factor",")",";","vec3","jU","=","jE","*","jT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jU","=","jC",";"]}]}}]},{type:"textline",tokens:["jU","=","normalize","(","jU",")",";","vec3","jV","=","normalize","(","jb",")",";","float","jW","=","0.5","*","jU",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jX","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","jU",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jX","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","jW",")",";"]}]}}]},{type:"textline",tokens:["vec3","jY","=","u_ambient","*","jX",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jZ","=","jf",";","ej","(","jZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","j_","=","vec4","(","jZ",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","j_","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ka","=","normalize","(","u_view_matrix_frag","*","vec4","(","jU",",","0.0",")",")",".","st",";","ka","=","ka","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kb","=","texture2D","(","u_colormap0",",","jB",")",";","ej","(","kb",".","rgb",")",";","vec4","kc",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kc","=","texture2D","(","u_colormap1",",","ka",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["kc","=","texture2D","(","u_colormap1",",","jB",")",";"]}]}}]},{type:"textline",tokens:["ej","(","kc",".","rgb",")",";","vec4","kd","=","texture2D","(","u_stencil0",",","jB",")",";","vec4","ke","=","mix","(","kb",",","kc",",","kd",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ke","=","texture2D","(","u_colormap0",",","ka",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ke","=","texture2D","(","u_colormap0",",","jB","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["ej","(","ke",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["j_",".","rgb","=","mix","(","j_",".","rgb",",","ke",".","rgb",",","u_diffuse_color_factor",")",";","j_",".","a","=","ke",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["j_",".","rgb","*=","mix","(","vec3","(","1.0",")",",","ke",".","rgb",",","u_diffuse_color_factor",")",";","j_",".","a","=","ke",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","kf","=","u_diffuse_intensity","*","j_",".","rgb",";","float","kg","=","dk","(","u_shadow_visibility_falloff",",","kf",")",";","vec3","kh","=","u_emit","*","j_",".","rgb",";","vec3","ki","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kj","=","vec3","(","j_",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kj","=","texture2D","(","u_specmap",",","jB",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["ej","(","kj",".","rgb",")",";","ki","=","mix","(","ki",",","kj",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","kk","=","u_specular_params","[","0","]",";","vec2","kl","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","km","=","kk","*","ki",";","ff","kn","=","hA","(","kh",",","jY",",","kf",",","km",",","jc",",","jU",",","jV",",","kl",",","u_diffuse_params",",","kg",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","ko","=","kn",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["jz","(","ko",",","jV",",","jU",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jT",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jz","(","ko",",","jV",",","jU",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","0.0",")",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ko","+=","kn",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["ko","=","max","(","ko","-","sqrt","(","0.01","*","-","min","(","jA",",","0.0",")",")",",","0.5","*","ko",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["ja","(","ko",",","jA",",","u_time",",","kg",",","jU",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","jc",",","jF",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","kp","=","j_",".","a",";","if","(","kp","<","0.5",")","discard",";","kp","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kp","=","j_",".","a","+","kn",".","a",".","a","*","km",".","r",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kp","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kq","=","eD","(","u_cube_fog",",","jV",")",";","vec4","kr","=","vec4","(","kq",",","u_fog_color_density",".","a",")",";","ej","(","kr",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","kr","=","u_fog_color_density",";","kr",".","rgb","*=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eW","(","ko",",","jF",",","jV",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","kr",",","jA",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ew","(","ko",",","jF",",","kr",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["ko","=","vec3","(","cD",".","a",")",";"]}]}}]},{type:"textline",tokens:["el","(","ko",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","ko",",","kp",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ko",",","kp",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","jb",";","varying","vec3","jc",";","varying","vec3","jd",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","je",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","jA","=","a_position",";","vec3","jB","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jC","=","vec3","(","a_tangent",")",";","vec3","jD","=","a_tangent","[","3","]","*","cross","(","jB",",","jC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jC","=","vec3","(","0.0",")",";","vec3","jD","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jA","=","mix","(","jA",",","a_position_next",",","u_va_frame_factor",")",";","jB","=","mix","(","jB",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jE","=","vec3","(","a_tangent",")",";","vec3","jF","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","jE",")",";","jC","=","mix","(","jC",",","jE",",","u_va_frame_factor",")",";","jD","=","mix","(","jD",",","jF",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","jA",",","jC",",","jD",",","jB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jG","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jG","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","jH","=","ea","(","jA",",","jC",",","jD",",","jB",",","jG",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jI","=","(","u_model_matrix","*","vec4","(","jG",",","1.0",")",")",".","xyz",";","mat4","jJ","=","ab","(","u_camera_eye",",","jI",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jK","=","(","u_model_matrix","*","vec4","(","jG",",","1.0",")",")",".","xyz",";","jJ","=","jJ","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jK",")",";"]}]}}]},{type:"textline",tokens:["b","jH","=","ai","(","jA","-","jG",",","jG",",","jC",",","jD",",","jB",",","jJ",")",";","jH",".","b","=","jI",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jH","=","ai","(","jA",",","jG",",","jC",",","jD",",","jB",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"textline",tokens:["float","jL","=","(","dot","(","cross","(","jH",".","e",",","jH",".","c",")",",","jH",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","je","=","vec4","(","jH",".","c",",","jL",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","jH","=","ea","(","jA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jB",",","jG",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jI","=","(","u_model_matrix","*","vec4","(","jG",",","1.0",")",")",".","xyz",";","mat4","jJ","=","ab","(","u_camera_eye",",","jI",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jK","=","(","u_model_matrix","*","vec4","(","jG",",","1.0",")",")",".","xyz",";","jJ","=","jJ","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jK",")",";"]}]}}]},{type:"textline",tokens:["b","jH","=","ai","(","jA","-","jG",",","jG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jB",",","jJ",")",";","jH",".","b","=","jI",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jH","=","ai","(","jA",",","jG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jB",",","u_model_matrix",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","jH",".","a",",","jH",".","b",",","jB",")",";"]}]}}]},{type:"textline",tokens:["jc","=","jH",".","a",";","jd","=","jH",".","e",";","jb","=","u_camera_eye","-","jH",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["jf","=","jH",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["jf","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","jM","=","u_view_matrix","*","vec4","(","jH",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cC","=","jM",";"]}]}}]},{type:"textline",tokens:["vec4","jN","=","u_proj_matrix","*","jM",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["jN",".","xy","+=","u_subpixel_jitter","*","jN",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["ec","(","jN",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ec","(","jH",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","jO","=","jN",".","x",";","float","jP","=","jN",".","y",";","float","jQ","=","jN",".","w",";","cB",".","x","=","(","jO","+","jQ",")","/","2.0",";","cB",".","y","=","(","jP","+","jQ",")","/","2.0",";","cB",".","z","=","jQ",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","jN",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED","&&","WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jc",";","varying","vec4","cC",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jd",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","je",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"textline",tokens:["float","jA","=","0.0",";","float","jB","=","1.0",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jK","(","vec3","jC",")","{","float","jD",",","jE",",","jF",",","jG",",","jH",",","jI",";","vec3","jJ",";","jD","=","max","(","jC","[","0","]",",","max","(","jC","[","1","]",",","jC","[","2","]",")",")",";","jE","=","min","(","jC","[","0","]",",","min","(","jC","[","1","]",",","jC","[","2","]",")",")",";","jI","=","jD","-","jE",";","jH","=","jD",";","if","(","jD","!=","jA",")","jG","=","jI","/","jD",";","else","{","jG","=","jA",";","jF","=","jA",";","}","if","(","e","(","jG",",","jA",")",")","{","jF","=","jA",";","}","else","{","jJ","=","(","vec3","(","jD",",","jD",",","jD",")","-","jC",".","xyz",")","/","jI",";","if","(","e","(","jC",".","x",",","jD",")",")","jF","=","jJ","[","2","]","-","jJ","[","1","]",";","else","if","(","e","(","jC",".","y",",","jD",")",")","jF","=","2.0","+","jJ","[","0","]","-","jJ","[","2","]",";","else","jF","=","4.0","+","jJ","[","1","]","-","jJ","[","0","]",";","jF","/=","6.0",";","if","(","jF","<","jA",")","jF","+=","jB",";","}","return","vec3","(","jF",",","jG",",","jH",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jV","(","vec3","jL",")","{","float","jM",",","jN",",","jO",",","jP",",","jQ",",","jR",",","jS",",","jT",";","vec3","jU",";","jR","=","jL","[","0","]",";","jS","=","jL","[","1","]",";","jT","=","jL","[","2","]",";","if","(","e","(","jS",",","jA",")",")","{","jU","=","vec3","(","jT",",","jT",",","jT",")",";","}","else","{","if","(","e","(","jR",",","jA",")",")","jR","=","jA",";","jR","*=","6.0",";","jM","=","floor","(","jR",")",";","jN","=","jR","-","jM",";","jU","=","vec3","(","jN",",","jN",",","jN",")",";","jO","=","jT","*","(","jB","-","jS",")",";","jP","=","jT","*","(","jB","-","(","jS","*","jN",")",")",";","jQ","=","jT","*","(","jB","-","(","jS","*","(","jB","-","jN",")",")",")",";","if","(","e","(","jM",",","jA",")",")","jU","=","vec3","(","jT",",","jQ",",","jO",")",";","else","if","(","e","(","jM",",","jB",")",")","jU","=","vec3","(","jP",",","jT",",","jO",")",";","else","if","(","e","(","jM",",","2.0",")",")","jU","=","vec3","(","jO",",","jT",",","jQ",")",";","else","if","(","e","(","jM",",","3.0",")",")","jU","=","vec3","(","jO",",","jP",",","jT",")",";","else","if","(","e","(","jM",",","4.0",")",")","jU","=","vec3","(","jQ",",","jO",",","jT",")",";","else","jU","=","vec3","(","jT",",","jO",",","jP",")",";","}","return","jU",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jX","(","vec2","jW",")","{","return","vec3","(","jW","*","2.0","-","vec2","(","jB",",","jB",")",",","jA",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jZ","(","vec3","jY",")","{","return","vec2","(","jY",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","kd","(","inout","vec3","j_",",","vec3","ka",",","vec3","kb",",","vec3","kc",")","{"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["jz","(","j_",",","ka",",","kb",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","kc",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jz","(","j_",",","ka",",","kb",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","jA",")",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"kU",qualifier:["vec3"]},{type:"node_out",name:"kV",qualifier:["float"]},{type:"node_out",name:"kW",qualifier:["float"]},{type:"textline",tokens:["kU","=","normalize","(","kJ",".","xyz",")",";","kV","=","abs","(","kJ",".","z",")",";","kW","=","length","(","kJ",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"kX",qualifier:["float"]},{type:"node_in",name:"kY",qualifier:["float"]},{type:"node_in",name:"kZ",qualifier:["float"]},{type:"node_out",name:"k_",qualifier:["vec3"]},{type:"textline",tokens:["k_","=","vec3","(","kX",",","kY",",","kZ",")",";"]}]}},{type:"node",name:"COMBHSV",group:{type:"group",parts:[{type:"node_in",name:"la",qualifier:["float"]},{type:"node_in",name:"lb",qualifier:["float"]},{type:"node_in",name:"lc",qualifier:["float"]},{type:"node_out",name:"ld",qualifier:["vec3"]},{type:"textline",tokens:["ld","=","jV","(","vec3","(","la",",","lb",",","lc",")",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"ke",qualifier:["varying","vec2"]},{type:"node_out",name:"le",qualifier:["vec3"]},{type:"textline",tokens:["le","=","jX","(","ke",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"kf",qualifier:["varying","vec3"]},{type:"node_out",name:"lf",qualifier:["vec3"]},{type:"textline",tokens:["lf","=","kf",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"kg",qualifier:["varying","float"]},{type:"node_out",name:"lg",qualifier:["float"]},{type:"textline",tokens:["lg","=","kg",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"kh",qualifier:["varying","vec2"]},{type:"node_out",name:"lh",qualifier:["float"]},{type:"node_out",name:"li",qualifier:["float"]},{type:"textline",tokens:["lh","=","kh","[","0","]",";","li","=","kh","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"ki",qualifier:["varying","vec3"]},{type:"node_out",name:"lj",qualifier:["float"]},{type:"node_out",name:"lk",qualifier:["float"]},{type:"node_out",name:"ll",qualifier:["float"]},{type:"textline",tokens:["lj","=","ki","[","0","]",";","lk","=","ki","[","1","]",";","ll","=","ki","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"lm",qualifier:["vec3"]},{type:"textline",tokens:["lm","=","kD",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"ln",qualifier:["float"]},{type:"textline",tokens:["ln","=","(","gl_FrontFacing",")","?","jB",":","jA",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"lo",qualifier:["vec3"]},{type:"textline",tokens:["lo","=","kH",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"lp",qualifier:["vec3"]},{type:"textline",tokens:["lp","=","vec3","(","kI",".","r",",","-","kI",".","b",",","kI",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"lq",qualifier:["float"]},{type:"node_in",name:"lr",qualifier:["float"]},{type:"node_in",name:"ls",qualifier:["float"]},{type:"node_in",name:"lt",qualifier:["float"]},{type:"node_in",name:"lu",qualifier:["vec3"]},{type:"node_out",name:"lv",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","lw","=","jK","(","lu",")",";","lw","[","0","]","+=","(","lq","-","0.5",")",";","if","(","lw","[","0","]",">","jB",")","lw","[","0","]","-=","jB",";","else","if","(","lw","[","0","]","<","jA",")","lw","[","0","]","+=","jB",";","lw","[","1","]","*=","lr",";","if","(","lw","[","1","]",">","jB",")","lw","[","1","]","=","jB",";","else","if","(","lw","[","1","]","<","jA",")","lw","[","1","]","=","jA",";","lw","[","2","]","*=","ls",";","if","(","lw","[","2","]",">","jB",")","lw","[","2","]","=","jB",";","else","if","(","lw","[","2","]","<","jA",")","lw","[","2","]","=","jA",";","lv","=","mix","(","lu",",","jV","(","lw",")",",","lt",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"lx",qualifier:["float"]},{type:"node_in",name:"ly",qualifier:["vec3"]},{type:"node_out",name:"lz",qualifier:["vec3"]},{type:"textline",tokens:["lz","=","mix","(","ly",",","vec3","(","jB",")","-","ly",",","lx",")",";"]}]}},{type:"node",name:"LAMP",group:{type:"group",parts:[{type:"node_param",name:"kj",qualifier:["const","float"]},{type:"node_out",name:"lA",qualifier:["vec3"]},{type:"node_out",name:"lB",qualifier:["vec3"]},{type:"node_out",name:"lC",qualifier:["float"]},{type:"node_out",name:"lD",qualifier:["float"]},{type:"textline",tokens:["{","const","int","lE","=","int","(","kj",")",";","float","lF","=","u_lamp_light_factors","[","lE","]",".","z",";","lA","=","u_lamp_light_color_intensities","[","lE","]",";","if","(","lF","!=","-","jB",")","{","lB","=","u_lamp_light_positions","[","lE","]","-","jc",";","lC","=","length","(","lB",")",";","lB","=","normalize","(","lB",")",";","lD","=","lF","/","(","lF","+","lC","*","lC",")",";","}","else","{","lB","=","u_lamp_light_directions","[","lE","]",";","lC","=","length","(","u_lamp_light_positions","[","lE","]","-","jc",")",";","lD","=","jB",";","}","}"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"kk",qualifier:["vec3"]},{type:"node_in",name:"lG",qualifier:["vec3"]},{type:"node_out",name:"lH",qualifier:["vec3"]},{type:"node_out",name:"lI",qualifier:["float"]},{type:"textline",tokens:["lH","=","kk",";","lI","=","-","dot","(","lG",",","kk",")",";"]}]}},{type:"node",name:"NORMAL_VIEW",group:{type:"group",parts:[{type:"node_in",name:"lJ",qualifier:["vec3"]},{type:"node_out",name:"lK",qualifier:["vec3"]},{type:"textline",tokens:["lK","=","-","(","u_view_matrix_frag","*","vec4","(","lJ",",","jA",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"kl",qualifier:["vec3"]},{type:"node_in",name:"lL",qualifier:["vec3"]},{type:"node_out",name:"lM",qualifier:["vec3"]},{type:"textline",tokens:["lM","=","lL","*","kl",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"km",qualifier:["mat4"]},{type:"node_param",name:"kn",qualifier:["const","float"]},{type:"node_param",name:"ko",qualifier:["const","float"]},{type:"node_param",name:"kp",qualifier:["vec3"]},{type:"node_param",name:"kq",qualifier:["vec3"]},{type:"node_in",name:"lN",qualifier:["vec3"]},{type:"node_out",name:"lO",qualifier:["vec3"]},{type:"textline",tokens:["lO","=","(","km","*","vec4","(","lN",",","jB",")",")",".","xyz",";","if","(","kn","==","jB",")","lO","=","max","(","lO",",","kp",")",";","if","(","ko","==","jB",")","lO","=","min","(","lO",",","kq",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"lP",qualifier:["float"]},{type:"node_in",name:"lQ",qualifier:["float"]},{type:"node_out",name:"lR",qualifier:["float"]},{type:"textline",tokens:["lR","=","lP","+","lQ",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"lS",qualifier:["float"]},{type:"node_in",name:"lT",qualifier:["float"]},{type:"node_out",name:"lU",qualifier:["float"]},{type:"textline",tokens:["lU","=","lS","-","lT",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"lV",qualifier:["float"]},{type:"node_in",name:"lW",qualifier:["float"]},{type:"node_out",name:"lX",qualifier:["float"]},{type:"textline",tokens:["lX","=","lV","*","lW",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"lY",qualifier:["float"]},{type:"node_in",name:"lZ",qualifier:["float"]},{type:"node_out",name:"l_",qualifier:["float"]},{type:"textline",tokens:["l_","=","(","lZ","!=","jA",")","?","lY","/","lZ",":","jA",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"ma",qualifier:["float"]},{type:"node_in",name:"mb",qualifier:["float"]},{type:"node_out",name:"mc",qualifier:["float"]},{type:"textline",tokens:["mc","=","sin","(","ma",")",";","mb",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"md",qualifier:["float"]},{type:"node_in",name:"me",qualifier:["float"]},{type:"node_out",name:"mf",qualifier:["float"]},{type:"textline",tokens:["mf","=","cos","(","md",")",";","me",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"mg",qualifier:["float"]},{type:"node_in",name:"mh",qualifier:["float"]},{type:"node_out",name:"mi",qualifier:["float"]},{type:"textline",tokens:["mi","=","tan","(","mg",")",";","mh",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"mj",qualifier:["float"]},{type:"node_in",name:"mk",qualifier:["float"]},{type:"node_out",name:"ml",qualifier:["float"]},{type:"textline",tokens:["ml","=","(","mj","<=","jB","&&","mj",">=","-","jB",")","?","asin","(","mj",")",":","jA",";","mk",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"mm",qualifier:["float"]},{type:"node_in",name:"mn",qualifier:["float"]},{type:"node_out",name:"mo",qualifier:["float"]},{type:"textline",tokens:["mo","=","(","mm","<=","jB","&&","mm",">=","-","jB",")","?","acos","(","mm",")",":","jA",";","mn",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"mp",qualifier:["float"]},{type:"node_in",name:"mq",qualifier:["float"]},{type:"node_out",name:"mr",qualifier:["float"]},{type:"textline",tokens:["mr","=","atan","(","mp",")",";","mq",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"ms",qualifier:["float"]},{type:"node_in",name:"mt",qualifier:["float"]},{type:"node_out",name:"mu",qualifier:["float"]},{type:"textline",tokens:["if","(","ms","<","jA","||","ms","==","jA","&&","mt","==","jA",")","mu","=","jA",";","else","mu","=","pow","(","ms",",","mt",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"mv",qualifier:["float"]},{type:"node_in",name:"mw",qualifier:["float"]},{type:"node_out",name:"mx",qualifier:["float"]},{type:"textline",tokens:["mx","=","(","mv",">","jA","&&","mw",">","jA",")","?","log2","(","mv",")","/","log2","(","mw",")",":","jA",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"my",qualifier:["float"]},{type:"node_in",name:"mz",qualifier:["float"]},{type:"node_out",name:"mA",qualifier:["float"]},{type:"textline",tokens:["mA","=","min","(","my",",","mz",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"mB",qualifier:["float"]},{type:"node_in",name:"mC",qualifier:["float"]},{type:"node_out",name:"mD",qualifier:["float"]},{type:"textline",tokens:["mD","=","max","(","mB",",","mC",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"mE",qualifier:["float"]},{type:"node_in",name:"mF",qualifier:["float"]},{type:"node_out",name:"mG",qualifier:["float"]},{type:"textline",tokens:["mG","=","floor","(","mE","+","0.5",")",";","mF",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"mH",qualifier:["float"]},{type:"node_in",name:"mI",qualifier:["float"]},{type:"node_out",name:"mJ",qualifier:["float"]},{type:"textline",tokens:["mJ","=","(","mH","<","mI",")","?","jB",":","jA",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"mK",qualifier:["float"]},{type:"node_in",name:"mL",qualifier:["float"]},{type:"node_out",name:"mM",qualifier:["float"]},{type:"textline",tokens:["mM","=","mK","+","mL",";","mM","=","(","mK",">","mL",")","?","jB",":","jA",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"mN",qualifier:["float"]},{type:"node_in",name:"mO",qualifier:["float"]},{type:"node_out",name:"mP",qualifier:["float"]},{type:"textline",tokens:["mP","=","abs","(","mO",")",">","0.000001","?","mod","(","mN",",","mO",")",":","jA",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"mQ",qualifier:["float"]},{type:"node_in",name:"mR",qualifier:["vec3"]},{type:"node_in",name:"mS",qualifier:["vec3"]},{type:"node_out",name:"mT",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mU","=","clamp","(","mQ",",","jA",",","jB",")",";","mT","=","mix","(","mR",",","mS",",","mU",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"mV",qualifier:["float"]},{type:"node_in",name:"mW",qualifier:["vec3"]},{type:"node_in",name:"mX",qualifier:["vec3"]},{type:"node_out",name:"mY",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mZ","=","clamp","(","mV",",","jA",",","jB",")",";","mY","=","mix","(","mW",",","mW","+","mX",",","mZ",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"m_",qualifier:["float"]},{type:"node_in",name:"na",qualifier:["vec3"]},{type:"node_in",name:"nb",qualifier:["vec3"]},{type:"node_out",name:"nc",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nd","=","clamp","(","m_",",","jA",",","jB",")",";","nc","=","mix","(","na",",","na","*","nb",",","nd",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"ne",qualifier:["float"]},{type:"node_in",name:"nf",qualifier:["vec3"]},{type:"node_in",name:"ng",qualifier:["vec3"]},{type:"node_out",name:"nh",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ni","=","clamp","(","ne",",","jA",",","jB",")",";","nh","=","mix","(","nf",",","nf","-","ng",",","ni",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"nj",qualifier:["float"]},{type:"node_in",name:"nk",qualifier:["vec3"]},{type:"node_in",name:"nl",qualifier:["vec3"]},{type:"node_out",name:"nm",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nn","=","clamp","(","nj",",","jA",",","jB",")",";","float","no","=","jB","-","nn",";","nm","=","vec3","(","jB",")","-","(","vec3","(","no",")","+","nn","*","(","vec3","(","jB",")","-","nl",")",")","*","(","vec3","(","jB",")","-","nk",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"np",qualifier:["float"]},{type:"node_in",name:"nq",qualifier:["vec3"]},{type:"node_in",name:"nr",qualifier:["vec3"]},{type:"node_out",name:"ns",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nt","=","clamp","(","np",",","jA",",","jB",")",";","float","nu","=","jB","-","nt",";","ns","=","nq",";","if","(","nr",".","r","!=","jA",")","ns",".","r","=","nu","*","ns",".","r","+","nt","*","ns",".","r","/","nr",".","r",";","if","(","nr",".","g","!=","jA",")","ns",".","g","=","nu","*","ns",".","g","+","nt","*","ns",".","g","/","nr",".","g",";","if","(","nr",".","b","!=","jA",")","ns",".","b","=","nu","*","ns",".","b","+","nt","*","ns",".","b","/","nr",".","b",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"nv",qualifier:["float"]},{type:"node_in",name:"nw",qualifier:["vec3"]},{type:"node_in",name:"nx",qualifier:["vec3"]},{type:"node_out",name:"ny",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nz","=","clamp","(","nv",",","jA",",","jB",")",";","ny","=","mix","(","nw",",","abs","(","nw","-","nx",")",",","nz",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"nA",qualifier:["float"]},{type:"node_in",name:"nB",qualifier:["vec3"]},{type:"node_in",name:"nC",qualifier:["vec3"]},{type:"node_out",name:"nD",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nE","=","clamp","(","nA",",","jA",",","jB",")",";","nD","=","min","(","nB",".","rgb",",","nC",".","rgb","*","nE",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"nF",qualifier:["float"]},{type:"node_in",name:"nG",qualifier:["vec3"]},{type:"node_in",name:"nH",qualifier:["vec3"]},{type:"node_out",name:"nI",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nJ","=","clamp","(","nF",",","jA",",","jB",")",";","nI","=","max","(","nG",".","rgb",",","nH",".","rgb","*","nJ",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"nK",qualifier:["float"]},{type:"node_in",name:"nL",qualifier:["vec3"]},{type:"node_in",name:"nM",qualifier:["vec3"]},{type:"node_out",name:"nN",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nO","=","clamp","(","nK",",","jA",",","jB",")",";","float","nP","=","jB","-","nO",";","nN","=","nL",";","if","(","nN",".","r","<","0.5",")","nN",".","r","*=","nP","+","2.0","*","nO","*","nM",".","r",";","else","nN",".","r","=","jB","-","(","nP","+","2.0","*","nO","*","(","jB","-","nM",".","r",")",")","*","(","jB","-","nN",".","r",")",";","if","(","nN",".","g","<","0.5",")","nN",".","g","*=","nP","+","2.0","*","nO","*","nM",".","g",";","else","nN",".","g","=","jB","-","(","nP","+","2.0","*","nO","*","(","jB","-","nM",".","g",")",")","*","(","jB","-","nN",".","g",")",";","if","(","nN",".","b","<","0.5",")","nN",".","b","*=","nP","+","2.0","*","nO","*","nM",".","b",";","else","nN",".","b","=","jB","-","(","nP","+","2.0","*","nO","*","(","jB","-","nM",".","b",")",")","*","(","jB","-","nN",".","b",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"nQ",qualifier:["float"]},{type:"node_in",name:"nR",qualifier:["vec3"]},{type:"node_in",name:"nS",qualifier:["vec3"]},{type:"node_out",name:"nT",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nU","=","clamp","(","nQ",",","jA",",","jB",")",";","nT","=","nR",";","if","(","nT",".","r","!=","jA",")","{","float","nV","=","jB","-","nU","*","nS",".","r",";","if","(","nV","<=","jA",")","nT",".","r","=","jB",";","else","if","(","(","nV","=","nT",".","r","/","nV",")",">","jB",")","nT",".","r","=","jB",";","else","nT",".","r","=","nV",";","}","if","(","nT",".","g","!=","jA",")","{","float","nW","=","jB","-","nU","*","nS",".","g",";","if","(","nW","<=","jA",")","nT",".","g","=","jB",";","else","if","(","(","nW","=","nT",".","g","/","nW",")",">","jB",")","nT",".","g","=","jB",";","else","nT",".","g","=","nW",";","}","if","(","nT",".","b","!=","jA",")","{","float","nX","=","jB","-","nU","*","nS",".","b",";","if","(","nX","<=","jA",")","nT",".","b","=","jB",";","else","if","(","(","nX","=","nT",".","b","/","nX",")",">","jB",")","nT",".","b","=","jB",";","else","nT",".","b","=","nX",";","}","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"nY",qualifier:["float"]},{type:"node_in",name:"nZ",qualifier:["vec3"]},{type:"node_in",name:"n_",qualifier:["vec3"]},{type:"node_out",name:"oa",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ob","=","clamp","(","nY",",","jA",",","jB",")",";","float","oc","=","jB","-","ob",";","float","od",";","oa","=","nZ",";","od","=","oc","+","ob","*","n_",".","r",";","if","(","od","<=","jA",")","oa",".","r","=","jA",";","else","if","(","(","od","=","(","jB","-","(","jB","-","oa",".","r",")","/","od",")",")","<","jA",")","oa",".","r","=","jA",";","else","if","(","od",">","jB",")","oa",".","r","=","jB",";","else","oa",".","r","=","od",";","od","=","oc","+","ob","*","n_",".","g",";","if","(","od","<=","jA",")","oa",".","g","=","jA",";","else","if","(","(","od","=","(","jB","-","(","jB","-","oa",".","g",")","/","od",")",")","<","jA",")","oa",".","g","=","jA",";","else","if","(","od",">","jB",")","oa",".","g","=","jB",";","else","oa",".","g","=","od",";","od","=","oc","+","ob","*","n_",".","b",";","if","(","od","<=","jA",")","oa",".","b","=","jA",";","else","if","(","(","od","=","(","jB","-","(","jB","-","oa",".","b",")","/","od",")",")","<","jA",")","oa",".","b","=","jA",";","else","if","(","od",">","jB",")","oa",".","b","=","jB",";","else","oa",".","b","=","od",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"oe",qualifier:["float"]},{type:"node_in",name:"of",qualifier:["vec3"]},{type:"node_in",name:"og",qualifier:["vec3"]},{type:"node_out",name:"oh",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oi","=","clamp","(","oe",",","jA",",","jB",")",";","vec3","oj",",","ok",",","ol",";","oh","=","of",";","ok","=","jK","(","og",")",";","if","(","ok",".","y","!=","jA",")","{","oj","=","jK","(","oh",")",";","oj",".","x","=","ok",".","x",";","ol","=","jV","(","oj",")",";","oh","=","mix","(","oh",",","ol",",","oi",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"om",qualifier:["float"]},{type:"node_in",name:"on",qualifier:["vec3"]},{type:"node_in",name:"oo",qualifier:["vec3"]},{type:"node_out",name:"op",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oq","=","clamp","(","om",",","jA",",","jB",")",";","float","or","=","jB","-","oq",";","op","=","on",";","vec3","os",",","ot",";","os","=","jK","(","op",")",";","if","(","os",".","y","!=","jA",")","{","ot","=","jK","(","oo",")",";","os",".","y","=","or","*","os",".","y","+","oq","*","ot",".","y",";","op","=","jV","(","os",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"ou",qualifier:["float"]},{type:"node_in",name:"ov",qualifier:["vec3"]},{type:"node_in",name:"ow",qualifier:["vec3"]},{type:"node_out",name:"ox",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oy","=","clamp","(","ou",",","jA",",","jB",")",";","float","oz","=","jB","-","oy",";","vec3","oA",",","oB",";","oA","=","jK","(","ov",")",";","oB","=","jK","(","ow",")",";","oA",".","z","=","oz","*","oA",".","z","+","oy","*","oB",".","z",";","ox","=","jV","(","oA",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"oC",qualifier:["float"]},{type:"node_in",name:"oD",qualifier:["vec3"]},{type:"node_in",name:"oE",qualifier:["vec3"]},{type:"node_out",name:"oF",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oG","=","clamp","(","oC",",","jA",",","jB",")",";","vec3","oH",",","oI",",","oJ",";","oF","=","oD",";","oI","=","jK","(","oE",")",";","if","(","oI",".","y","!=","jA",")","{","oH","=","jK","(","oF",")",";","oH",".","x","=","oI",".","x",";","oH",".","y","=","oI",".","y",";","oJ","=","jV","(","oH",")",";","oF","=","mix","(","oF",",","oJ",",","oG",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"oK",qualifier:["float"]},{type:"node_in",name:"oL",qualifier:["vec3"]},{type:"node_in",name:"oM",qualifier:["vec3"]},{type:"node_out",name:"oN",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oO","=","clamp","(","oK",",","jA",",","jB",")",";","float","oP","=","jB","-","oO",";","vec3","oQ","=","vec3","(","jB",")",";","vec3","oR","=","oQ","-","(","oQ","-","oM",")","*","(","oQ","-","oL",")",";","oN","=","oP","*","oL","+","oO","*","(","(","oQ","-","oL",")","*","oM","*","oL","+","oL","*","oR",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"oS",qualifier:["float"]},{type:"node_in",name:"oT",qualifier:["vec3"]},{type:"node_in",name:"oU",qualifier:["vec3"]},{type:"node_out",name:"oV",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oW","=","clamp","(","oS",",","jA",",","jB",")",";","oV","=","oT",";","if","(","oU",".","r",">","0.5",")","oV",".","r","=","oT",".","r","+","oW","*","(","2.0","*","(","oU",".","r","-","0.5",")",")",";","else","oV",".","r","=","oT",".","r","+","oW","*","(","2.0","*","(","oU",".","r",")","-","jB",")",";","if","(","oU",".","g",">","0.5",")","oV",".","g","=","oT",".","g","+","oW","*","(","2.0","*","(","oU",".","g","-","0.5",")",")",";","else","oV",".","g","=","oT",".","g","+","oW","*","(","2.0","*","(","oU",".","g",")","-","jB",")",";","if","(","oU",".","b",">","0.5",")","oV",".","b","=","oT",".","b","+","oW","*","(","2.0","*","(","oU",".","b","-","0.5",")",")",";","else","oV",".","b","=","oT",".","b","+","oW","*","(","2.0","*","(","oU",".","b",")","-","jB",")",";","oV","=","clamp","(","oV",",","jA",",","jB",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"oX",qualifier:["vec3"]},{type:"node_in",name:"oY",qualifier:["float"]},{type:"textline",tokens:["kO","=","oX",";","kT","=","oY",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"kr",qualifier:["const","vec3"]},{type:"node_param",name:"ks",qualifier:["const","vec4"]},{type:"node_param",name:"kt",qualifier:["const","float"]},{type:"node_in",name:"oZ",qualifier:["vec3"]},{type:"node_in",name:"o_",qualifier:["float"]},{type:"node_in",name:"pa",qualifier:["vec3"]},{type:"node_in",name:"pb",qualifier:["vec3"]},{type:"node_out",name:"pc",qualifier:["vec3"]},{type:"node_out",name:"pd",qualifier:["float"]},{type:"node_out",name:"pe",qualifier:["vec3"]},{type:"textline",tokens:["oZ","=","clamp","(","oZ",",","jA",",","jB",")",";","o_","=","clamp","(","o_",",","jA",",","jB",")",";","pa","=","clamp","(","pa",",","jA",",","jB",")",";","vec3","pf","=","oZ",";","float","pg","=","kr","[","0","]",";","vec2","ph","=","vec2","(","kr","[","1","]",",","kr","[","2","]",")",";","vec3","pi","=","kK","*","oZ",";","vec3","pj","=","kL","*","kF",";","vec3","pk","=","ks","[","1","]","*","pa",";","float","pl","=","ks","[","0","]",";","vec2","pm","=","vec2","(","ks","[","2","]",",","ks","[","3","]",")",";","float","pn","=","dk","(","kM",",","pf",")",";","vec3","po",";","if","(","kt","==","jB",")","po","=","normalize","(","pb",")",";","else","po","=","kD",";","ff","pp","=","hA","(","pi",",","pj",",","pf",",","pk",",","kI",",","po",",","kH",",","pm",",","ph",",","pn",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","jA",",","vec4","(","jA",")",")",";","pc","=","(","pg","==","jB",")","?","pp",".","a",".","rgb",":","vec3","(","jA",")",";","pd","=","o_","+","pp",".","a",".","a","*","pk",".","r",";","pd","=","clamp","(","pd",",","jA",",","jB",")",";","pe","=","po",";","kd","(","pc",",","kH",",","pe",",","kR",")",";","if","(","pl","==","jB",")","{","pc","+=","pp",".","b",";","kP","=","pp",".","b",";","}","else","{","kP","=","vec3","(","jA",")",";","}","kQ","=","po",";","kS","=","pn",";"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"ku",qualifier:["const","vec3"]},{type:"node_param",name:"kv",qualifier:["const","vec4"]},{type:"node_param",name:"kw",qualifier:["const","float"]},{type:"node_in",name:"pq",qualifier:["vec3"]},{type:"node_in",name:"pr",qualifier:["float"]},{type:"node_in",name:"ps",qualifier:["vec3"]},{type:"node_in",name:"pt",qualifier:["vec3"]},{type:"node_in",name:"pu",qualifier:["float"]},{type:"node_in",name:"pv",qualifier:["float"]},{type:"node_in",name:"pw",qualifier:["vec4"]},{type:"node_out",name:"px",qualifier:["vec3"]},{type:"node_out",name:"py",qualifier:["float"]},{type:"node_out",name:"pz",qualifier:["vec3"]},{type:"node_out",name:"pA",qualifier:["vec3"]},{type:"node_out",name:"pB",qualifier:["vec3"]},{type:"textline",tokens:["pq","=","clamp","(","pq",",","jA",",","jB",")",";","pr","=","clamp","(","pr",",","jA",",","jB",")",";","ps","=","clamp","(","ps",",","jA",",","jB",")",";","vec3","pf","=","pq",";","float","pg","=","ku","[","0","]",";","vec2","ph","=","vec2","(","ku","[","1","]",",","ku","[","2","]",")",";","vec3","pi","=","pu","*","pq",";","vec3","pj","=","kL","*","kF",";","vec3","pk","=","kv","[","1","]","*","ps",";","float","pl","=","kv","[","0","]",";","vec2","pm","=","vec2","(","kv","[","2","]",",","kv","[","3","]",")",";","float","pn","=","dk","(","kM",",","pf",")",";","vec3","po",";","if","(","kw","==","jB",")","po","=","normalize","(","pt",")",";","else","po","=","kD",";","ff","pp","=","hA","(","pi",",","pj",",","pf",",","pk",",","kI",",","po",",","kH",",","pm",",","ph",",","pn",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","pv",",","pw",")",";","px","=","(","pg","==","jB",")","?","pp",".","a",".","rgb",":","vec3","(","jA",")",";","py","=","pr",";","pz","=","po",";","pA","=","pp",".","a",".","rgb",";","pB","=","pp",".","b",";","kd","(","px",",","kH",",","pz",",","kR",")",";","if","(","pl","==","jB",")","{","px","+=","pp",".","b",";","py","+=","pp",".","a",".","a","*","pk",".","r",";","py","=","clamp","(","py",",","jA",",","jB",")",";","kP","=","pp",".","b",";","}","else","{","kP","=","vec3","(","jA",")",";","}","kQ","=","po",";","kS","=","pn",";"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"kx",qualifier:["vec3"]},{type:"node_out",name:"pC",qualifier:["vec3"]},{type:"textline",tokens:["pC","=","kx",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"pD",qualifier:["vec3"]},{type:"node_out",name:"pE",qualifier:["float"]},{type:"textline",tokens:["pE","=","pD",".","r","*","0.35","+","pD",".","g","*","0.45","+","pD",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"pF",qualifier:["vec3"]},{type:"node_out",name:"pG",qualifier:["float"]},{type:"node_out",name:"pH",qualifier:["float"]},{type:"node_out",name:"pI",qualifier:["float"]},{type:"textline",tokens:["pG","=","pF",".","r",";","pH","=","pF",".","g",";","pI","=","pF",".","b",";"]}]}},{type:"node",name:"SEPHSV",group:{type:"group",parts:[{type:"node_in",name:"pJ",qualifier:["vec3"]},{type:"node_out",name:"pK",qualifier:["float"]},{type:"node_out",name:"pL",qualifier:["float"]},{type:"node_out",name:"pM",qualifier:["float"]},{type:"textline",tokens:["vec3","pN","=","jK","(","pJ",")",";","pK","=","pN",".","r",";","pL","=","pN",".","g",";","pM","=","pN",".","b",";"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"pO",qualifier:["float"]},{type:"node_in",name:"pP",qualifier:["float"]},{type:"node_in",name:"pQ",qualifier:["float"]},{type:"node_out",name:"pR",qualifier:["float"]},{type:"textline",tokens:["pR","=","jB","/","(","jB","+","pow","(","2.71828183",",","-","(","(","pO","-","pQ",")","*","pP",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"pS",qualifier:["vec3"]},{type:"node_out",name:"pT",qualifier:["vec3"]},{type:"textline",tokens:["pT","=","pow","(","pS",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"pU",qualifier:["vec3"]},{type:"node_out",name:"pV",qualifier:["vec3"]},{type:"textline",tokens:["pV","=","pow","(","pU",",","vec3","(","jB","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pW",qualifier:["vec3"]},{type:"node_out",name:"pX",qualifier:["vec3"]},{type:"node_out",name:"pY",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pZ","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","jZ","(","pW",")",")",";","pX","=","pZ",".","xyz",";","ej","(","pX",")",";","pY","=","pZ",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"p_",qualifier:["vec3"]},{type:"node_out",name:"qa",qualifier:["vec3"]},{type:"node_out",name:"qb",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qc","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","jZ","(","p_",")",")",";","kR","=","qc",".","xyz","-","0.5",";","qa","=","normalize","(","kN","*","kR",")",";","qb","=","qc",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"qd",qualifier:["vec3"]},{type:"node_out",name:"qe",qualifier:["vec3"]},{type:"node_out",name:"qf",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qg","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","qd",")",";","qe","=","qg",".","xyz",";","ej","(","qe",")",";","qf","=","qg",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qh",qualifier:["vec3"]},{type:"node_in",name:"qi",qualifier:["vec3"]},{type:"node_out",name:"qj",qualifier:["vec3"]},{type:"node_out",name:"qk",qualifier:["float"]},{type:"node_out",name:"ql",qualifier:["vec3"]},{type:"node_out",name:"qm",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qn","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","jZ","(","qh",")",")",";","qj","=","qn",".","xyz",";","ej","(","qj",")",";","qk","=","qn",".","w",";","qn","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","jZ","(","qi",")",")",";","ql","=","qn",".","xyz",";","ej","(","ql",")",";","qm","=","qn",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qo",qualifier:["vec3"]},{type:"node_in",name:"qp",qualifier:["vec3"]},{type:"node_out",name:"qq",qualifier:["vec3"]},{type:"node_out",name:"qr",qualifier:["float"]},{type:"node_out",name:"qs",qualifier:["vec3"]},{type:"node_out",name:"qt",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qu","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","jZ","(","qo",")",")",";","kR","=","qu",".","xyz","-","0.5",";","qq","=","normalize","(","kN","*","kR",")",";","qr","=","qu",".","w",";","qu","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","jZ","(","qp",")",")",";","kR","=","qu",".","xyz","-","0.5",";","qs","=","normalize","(","kN","*","kR",")",";","qt","=","qu",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qv",qualifier:["vec3"]},{type:"node_in",name:"qw",qualifier:["vec3"]},{type:"node_in",name:"qx",qualifier:["vec3"]},{type:"node_out",name:"qy",qualifier:["vec3"]},{type:"node_out",name:"qz",qualifier:["float"]},{type:"node_out",name:"qA",qualifier:["vec3"]},{type:"node_out",name:"qB",qualifier:["float"]},{type:"node_out",name:"qC",qualifier:["vec3"]},{type:"node_out",name:"qD",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qE","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","jZ","(","qv",")",")",";","qy","=","qE",".","xyz",";","ej","(","qy",")",";","qz","=","qE",".","w",";","qE","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","jZ","(","qw",")",")",";","qA","=","qE",".","xyz",";","ej","(","qA",")",";","qB","=","qE",".","w",";","qE","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","jZ","(","qx",")",")",";","qC","=","qE",".","xyz",";","ej","(","qC",")",";","qD","=","qE",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qF",qualifier:["vec3"]},{type:"node_in",name:"qG",qualifier:["vec3"]},{type:"node_in",name:"qH",qualifier:["vec3"]},{type:"node_out",name:"qI",qualifier:["vec3"]},{type:"node_out",name:"qJ",qualifier:["float"]},{type:"node_out",name:"qK",qualifier:["vec3"]},{type:"node_out",name:"qL",qualifier:["float"]},{type:"node_out",name:"qM",qualifier:["vec3"]},{type:"node_out",name:"qN",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qO","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","jZ","(","qF",")",")",";","kR","=","qO",".","xyz","-","0.5",";","qI","=","normalize","(","kN","*","kR",")",";","qJ","=","qO",".","w",";","qO","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","jZ","(","qG",")",")",";","kR","=","qO",".","xyz","-","0.5",";","qK","=","normalize","(","kN","*","kR",")",";","qL","=","qO",".","w",";","qO","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","jZ","(","qH",")",")",";","kR","=","qO",".","xyz","-","0.5",";","qM","=","normalize","(","kN","*","kR",")",";","qN","=","qO",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"ky",qualifier:["float"]},{type:"node_out",name:"qP",qualifier:["float"]},{type:"textline",tokens:["qP","=","ky",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"qQ",qualifier:["vec3"]},{type:"node_in",name:"qR",qualifier:["vec3"]},{type:"node_out",name:"qS",qualifier:["vec3"]},{type:"node_out",name:"qT",qualifier:["float"]},{type:"textline",tokens:["qS","=","qQ","+","qR",";","qT","=","(","abs","(","qS","[","0","]",")","+","abs","(","qS","[","1","]",")","+","abs","(","qS","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"qU",qualifier:["vec3"]},{type:"node_in",name:"qV",qualifier:["vec3"]},{type:"node_out",name:"qW",qualifier:["vec3"]},{type:"node_out",name:"qX",qualifier:["float"]},{type:"textline",tokens:["qW","=","qU","-","qV",";","qX","=","(","abs","(","qW","[","0","]",")","+","abs","(","qW","[","1","]",")","+","abs","(","qW","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"qY",qualifier:["vec3"]},{type:"node_in",name:"qZ",qualifier:["vec3"]},{type:"node_out",name:"q_",qualifier:["vec3"]},{type:"node_out",name:"ra",qualifier:["float"]},{type:"textline",tokens:["q_","=","qY","+","qZ",";","ra","=","length","(","q_",")",";","q_","=","normalize","(","q_",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"rb",qualifier:["vec3"]},{type:"node_in",name:"rc",qualifier:["vec3"]},{type:"node_out",name:"rd",qualifier:["vec3"]},{type:"node_out",name:"re",qualifier:["float"]},{type:"textline",tokens:["rd","=","vec3","(","jA",")",";","re","=","dot","(","rb",",","rc",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"rf",qualifier:["vec3"]},{type:"node_in",name:"rg",qualifier:["vec3"]},{type:"node_out",name:"rh",qualifier:["vec3"]},{type:"node_out",name:"ri",qualifier:["float"]},{type:"textline",tokens:["rh","=","cross","(","rf",",","rg",")",";","ri","=","length","(","rh",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"rj",qualifier:["vec3"]},{type:"node_in",name:"rk",qualifier:["vec3"]},{type:"node_out",name:"rl",qualifier:["vec3"]},{type:"node_out",name:"rm",qualifier:["float"]},{type:"textline",tokens:["rl","=","normalize","(","rj",")",";","rm","=","length","(","rj",")",";","rk",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"rn",qualifier:["vec3"]},{type:"node_in",name:"ro",qualifier:["vec3"]},{type:"node_out",name:"rp",qualifier:["vec3"]},{type:"textline",tokens:["rp","=","reflect","(","-","rn",",","ro",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"rq",qualifier:["vec3"]},{type:"node_in",name:"rr",qualifier:["float"]},{type:"node_in",name:"rs",qualifier:["const","float"]},{type:"node_in",name:"rt",qualifier:["const","float"]},{type:"node_out",name:"ru",qualifier:["vec3"]},{type:"textline",tokens:["float","rv","=","length","(","kJ",")",";","if","(","rv","<","rt",")","{","vec2","rw","=","jZ","(","rq",")",";","float","rx","=","clamp","(","0.5","*","(","rt","-","rv",")",",","jA",",","jB",")",";","float","ry","=","rr","*","rx",";","vec3","rz","=","normalize","(","kH","*","kN",")",";","float","rA","=","jB","/","rs",";","vec2","rB","=","rz",".","xy","*","ry","/","(","rs","*","rz",".","z",")",";","float","rC","=","jB",";","float","rD","=","texture2D","(","node_PARALLAX_var_texture",",","rw",")",".","a",";","for","(","float","rE","=","1.0",";","rE","<=","rs",";","rE","++",")","{","if","(","rD","<","rC",")","{","rC","-=","rA",";","rw","-=","rB",";","rD","=","texture2D","(","node_PARALLAX_var_texture",",","rw",")",".","a",";","}","}","vec2","rF","=","rw","+","rB",";","float","rG","=","texture2D","(","node_PARALLAX_var_texture",",","rF",")",".","a","-","(","rC","+","rA",")",";","float","rH","=","rD","-","rC",";","float","rI","=","rH","/","(","rH","-","rG",")",";","rw","=","rI","*","rF","+","(","jB","-","rI",")","*","rw",";","ru","=","jX","(","rw",")",";","}","else","ru","=","rq",";"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"rJ",qualifier:["vec3"]},{type:"node_out",name:"rK",qualifier:["vec3"]},{type:"textline",tokens:["rK","=","clamp","(","rJ",",","jA",",","jB",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"rL",qualifier:["float"]},{type:"node_in",name:"rM",qualifier:["float"]},{type:"node_in",name:"rN",qualifier:["float"]},{type:"node_in",name:"rO",qualifier:["float"]},{type:"node_in",name:"rP",qualifier:["float"]},{type:"node_out",name:"rQ",qualifier:["float"]},{type:"node_out",name:"rR",qualifier:["vec4"]},{type:"textline",tokens:["rQ","=","rL",";","rR","=","vec4","(","rM",",","rN",",","rO",",","rP",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"rS",qualifier:["float"]},{type:"textline",tokens:["rS","=","u_time",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kz","=","jc",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"textline",tokens:["vec3","kA","=","jd",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kA","=","kA",";","else","kA","=","-","kA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kB","=","cross","(","kA",",","je",".","xyz",")","*","je",".","w",";","mat3","kC","=","mat3","(","je",".","xyz",",","kB",",","kA",")",";"]}]}}]},{type:"textline",tokens:["vec3","kD","=","normalize","(","kA",")",";","float","kE","=","0.5","*","kD",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kF","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","kD",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kF","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","kE",")",";"]}]}}]},{type:"textline",tokens:["vec3","kG","=","u_camera_eye_frag","-","jc",";","vec3","kH","=","normalize","(","kG",")",";","vec3","kI","=","jc",";","vec4","kJ","=","cC",";","float","kK","=","u_emit",";","float","kL","=","u_ambient",";","float","kM","=","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","kN","=","kC",";"]}]}}]},{type:"textline",tokens:["vec3","kO",";","vec3","kP",";","vec3","kQ",";","vec3","kR",";","float","kS",";","float","kT",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","rT","=","kO",";","float","rU","=","kT",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rV","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["rT","=","max","(","rT","-","sqrt","(","0.01","*","-","min","(","kz",",","jA",")",")",",","0.5","*","rT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["ja","(","rT",",","kz",",","u_time",",","kS",",","kA",",","u_sun_direction",",","rV",",","u_sun_quaternion",",","jc",",","length","(","cC",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rW","=","eD","(","u_cube_fog",",","kH",")",";","vec4","rX","=","vec4","(","rW",",","u_fog_color_density",".","a",")",";","ej","(","rX",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","rX","=","u_fog_color_density",";","rX",".","rgb","*=","rV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eW","(","rT",",","length","(","cC",")",",","kH",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","rX",",","kz",",","length","(","rV",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ew","(","rT",",","length","(","cC",")",",","rX",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","rY","=","texture2DProj","(","u_shadow_mask",",","cB",")",".","rg",";","float","rZ","=","rY",".","g",";","rT","=","vec3","(","rZ",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kI","=","jc",";","vec4","kJ","=","cC",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kA","=","jd",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kA","=","kA",";","else","kA","=","-","kA",";"]}]}}]},{type:"textline",tokens:["vec3","kD","=","normalize","(","kA",")",";"]}]}}]},{type:"textline",tokens:["vec3","kO",";","float","kT",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","rT","=","kO",";","float","rU","=","kT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","rU","<","0.5",")","discard",";","rU","=","jB",";"]}]}}]},{type:"textline",tokens:["el","(","rT",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","rT",",","rU",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","rT",",","rU",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","jc",";","varying","vec4","cC",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jd",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","je",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"ke",qualifier:["varying","vec2"]},{type:"textline",tokens:["ke","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"kj",qualifier:["varying","vec3"]},{type:"textline",tokens:["kj","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"kk",qualifier:["varying","float"]},{type:"textline",tokens:["kk","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"kl",qualifier:["varying","vec2"]},{type:"textline",tokens:["kl","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"km",qualifier:["varying","vec3"]},{type:"textline",tokens:["km","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","kn","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ko","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kp","=","vec3","(","a_tangent",")",";","vec3","kq","=","a_tangent","[","3","]","*","cross","(","ko",",","kp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kp","=","vec3","(","0.0",")",";","vec3","kq","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"elif",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ko","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ko","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kn","=","mix","(","kn",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["ko","=","mix","(","ko",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kr","=","vec3","(","a_tangent",")",";","vec3","ks","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","kr",")",";","kp","=","mix","(","kp",",","kr",",","u_va_frame_factor",")",";","kq","=","mix","(","kq",",","ks",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","kn",",","kp",",","kq",",","ko",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kt","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kt","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ku","=","(","u_model_matrix","*","vec4","(","kt",",","1.0",")",")",".","xyz",";","mat4","kv","=","ab","(","u_camera_eye",",","ku",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kw","=","(","u_model_matrix","*","vec4","(","kt",",","1.0",")",")",".","xyz",";","kv","=","kv","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kw",")",";"]}]}}]},{type:"textline",tokens:["b","kx","=","ai","(","kn","-","kt",",","kt",",","kp",",","kq",",","ko",",","kv",")",";","kx",".","b","=","ku",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","kx","=","ai","(","kn",",","kt",",","kp",",","kq",",","ko",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["float","ky","=","(","dot","(","cross","(","kx",".","e",",","kx",".","c",")",",","kx",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","je","=","vec4","(","kx",".","c",",","ky",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ku","=","(","u_model_matrix","*","vec4","(","kt",",","1.0",")",")",".","xyz",";","mat4","kv","=","ab","(","u_camera_eye",",","ku",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kw","=","(","u_model_matrix","*","vec4","(","kt",",","1.0",")",")",".","xyz",";","kv","=","kv","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kw",")",";"]}]}}]},{type:"textline",tokens:["b","kx","=","ai","(","kn","-","kt",",","kt",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ko",",","kv",")",";","kx",".","b","=","ku",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","kx","=","ai","(","kn",",","kt",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ko",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","kx",".","a",",","kx",".","b",",","ko",")",";"]}]}}]},{type:"textline",tokens:["jc","=","kx",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["jd","=","kx",".","e",";"]}]}}]},{type:"textline",tokens:["cC","=","u_view_matrix","*","vec4","(","kx",".","a",",","1.0",")",";","vec4","kz","=","u_proj_matrix","*","cC",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["kz",".","xy","+=","u_subpixel_jitter","*","kz",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["ec","(","kz",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ec","(","kx",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kA","=","kz",".","x",";","float","kB","=","kz",".","y",";","float","kC","=","kz",".","w",";","cB",".","x","=","(","kA","+","kC",")","/","2.0",";","cB",".","y","=","(","kB","+","kC",")","/","2.0",";","cB",".","z","=","kC",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","kz",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","kn",";","varying","vec3","jf",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cC",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","ko","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","kp","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","ko",")",";","float","kq","=","u_diffuse_color",".","a","*","kn","*","(","1.0","-","clamp","(","kp",",","0.0",",","1.0",")",")",";","vec3","kr","=","jf","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ew","(","kr",",","length","(","cC",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["el","(","kr",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","kr",",","kq",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kr",",","kq",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","kn",";","varying","vec3","jf",";","varying","vec3","cC",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","ko","lh",";","lh","=","lg","(",")",";","vec4","li","=","u_view_matrix","*","vec4","(","lh",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","li",";","kn","=","lh",".","c",";","jf","=","lh",".","d",";","cC","=","li",".","xyz",";","float","lj","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","lh",".","a","*","lj",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","kn",";","varying","vec3","jf",";","varying","vec2","a",";","varying","vec3","jb",";","varying","vec3","jc",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","jA","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jB","=","texture2D","(","u_sampler",",","a",")",";","ej","(","jB",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["jA",".","rgb","=","mix","(","jA",".","rgb",",","jB",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["jA",".","rgb","*=","mix","(","vec3","(","1.0",")",",","jB",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["jA",".","a","=","jB",".","a",";"]}]}}]},{type:"textline",tokens:["jA",".","rgb","*=","jf",";","vec3","jC","=","u_diffuse_intensity","*","jA",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jD","=","u_emit","*","jA",".","rgb",";","vec3","jE","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jF","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","jE",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jG","=","0.5",";","vec3","jF","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","jG",")",";"]}]}}]},{type:"textline",tokens:["vec3","jH","=","u_ambient","*","jF",";","float","jI","=","u_specular_params","[","0","]",";","vec2","jJ","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","jK","=","jI","*","u_specular_color",";","vec3","jL","=","normalize","(","jb",")",";","ff","jM","=","hA","(","jD",",","jH",",","jC",",","jK",",","jc",",","jE",",","jL",",","jJ",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","jN","=","jM",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jN","=","jC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ew","(","jN",",","length","(","cC",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","jO","=","jA",".","a","*","kn",";","el","(","jN",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","jN",",","jO",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jN",",","jO",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";","varying","float","kn",";","varying","vec3","jf",";","varying","vec2","a",";","varying","vec3","jb",";","varying","vec3","jc",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","jC","(","vec2","jA",",","vec2","jB",")","{","return","(","atan","(","jB",".","y",",","jB",".","x",")","-","atan","(","jA",".","y",",","jA",".","x",")",")",";","}","void","main","(",")","{","ko","jD",";","jD","=","lg","(",")",";","float","jE",";","mat4","jF",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","jE","=","jD",".","e",";","jF","=","A","(","jD",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","jE","=","jD",".","e",";","jF","=","l","(",")",";","jF","[","3","]","=","vec4","(","jD",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","jE","=","jD",".","e",";","jF","=","p","(","radians","(","90.0",")",")",";","jF","[","3","]","=","vec4","(","jD",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","jE","=","jC","(","vec2","(","0.0",",","-","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","jD",".","e",";","jF","=","n","(","radians","(","-","90.0",")",")",";","jF","[","3","]","=","vec4","(","jD",".","b",",","1.0",")",";","}","vec4","jG","=","vec4","(","a_p_bb_vertex","*","2.0","*","jD",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","jH","=","jF","*","r","(","jE",")","*","jG",";","vec4","jI","=","u_view_matrix","*","jH",";","vec4","jJ","=","u_proj_matrix","*","jI",";","gl_Position","=","jJ",";","kn","=","jD",".","c",";","jf","=","jD",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","jc","=","jH",".","xyz",";","jb","=","u_camera_eye","-","jH",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cC","=","jI",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","lh",";","const","float","li","=","0.99",";","const","float","lj","=","1.8",";","const","int","lk","=","8",";","float","lu","(","vec3","ll",",","vec3","lm",")","{","float","ln","=","dot","(","lm",",","lm",")",";","float","lo","=","2.0","*","dot","(","lm",",","ll",")",";","float","lp","=","dot","(","ll",",","ll",")","-","1.0",";","float","lq","=","lo","*","lo","-","4.0","*","ln","*","lp",";","float","lr","=","sqrt","(","lq",")",";","float","ls","=","(","-","lo","-","lr",")","/","2.0",";","float","lt","=","lp","/","ls",";","return","lt",";","}","float","lB","(","float","lv",",","float","lw",")","{","float","lx","=","3.0","*","(","1.0","-","lw","*","lw",")",";","float","ly","=","2.0","*","(","2.0","+","lw","*","lw",")",";","float","lz","=","1.0","+","lv","*","lv",";","float","lA","=","pow","(","1.0","+","lw","*","lw","-","2.0","*","lw","*","lv",",","1.5",")",";","lA","=","max","(","lA",",","0.00001",")",";","return","(","lx","/","ly",")","*","(","lz","/","lA",")",";","}","float","lJ","(","vec3","lC",",","vec3","lD",",","float","lE",")","{","float","lF","=","dot","(","lD",",","-","lC",")",";","if","(","lF","<","0.0",")","{","return","1.0",";","}","vec3","lG","=","lC","+","lF","*","lD",";","if","(","length","(","lG",")","<","lE",")","{","return","0.0",";","}","else","if","(","length","(","lG",")",">=","lE",")","{","vec3","lH","=","normalize","(","lG",")","*","lE","-","lC",";","float","lI","=","acos","(","dot","(","normalize","(","lH",")",",","lD",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","lI","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","lN","(","float","lK",",","vec3","lL",",","float","lM",")","{","return","lL","-","lL","*","pow","(","u_sky_color",",","vec3","(","lM","/","lK",")",")",";","}","void","main","(",")","{","vec3","lO","=","normalize","(","lh",")",";","vec3","lP","=","u_sun_direction",";","float","lQ","=","dot","(","lO",",","lP",")",";","float","lR","=","lB","(","lQ",",","-","0.01",")","*","u_rayleigh_brightness","*","lP",".","y",";","float","lS","=","lB","(","lQ","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","lP",".","y",")",";","float","lT","=","smoothstep","(","0.0",",","100.0",",","lB","(","lQ",",","0.9995",")",")","*","u_spot_brightness",";","vec3","lU","=","vec3","(","0.0",",","li",",","0.0",")",";","float","lV","=","lu","(","lU",",","lO",")",";","float","lW","=","lV","/","float","(","lk",")",";","float","lX","=","lJ","(","lU",",","lO",",","li","-","0.3",")",";","vec3","lY","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","lZ","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","l_","=","0",";","l_","<","lk",";","l_","++",")","{","float","ma","=","lW","*","float","(","l_",")",";","vec3","mb","=","lU","+","lO","*","ma",";","float","mc","=","lJ","(","mb",",","lP",",","li","-","0.2",")",";","float","md","=","lu","(","mb",",","lP",")",";","vec3","me","=","lN","(","md",",","vec3","(","lj",")",",","u_scatter_strength",")","*","mc",";","lY","+=","lN","(","sqrt","(","ma",")",",","u_sky_color","*","me",",","u_rayleigh_strength",")",";","lZ","+=","lN","(","ma",",","me",",","u_mie_strength",")",";","}","lY","=","lY","*","lX","*","pow","(","lV",",","u_rayleigh_collection_power",")","/","float","(","lk",")",";","lZ","=","(","lZ","*","lX","*","pow","(","lV",",","u_mie_collection_power",")",")","/","float","(","lk",")",";","vec3","mf","=","vec3","(","lT","*","lZ","+","lS","*","lZ","+","lR","*","lY",")",";","el","(","mf",")",";","gl_FragColor","=","vec4","(","mf",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","lh",";","void","main","(",")","{","vec4","jA","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","jB","=","u_cube_view_matrix","*","jA",";","lh","=","jB",".","xyz",";","gl_Position","=","jA",";","}"]}]},exports["shadeless.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";","varying","vec2","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cC",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jA","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jB","=","jf",";","ej","(","jB",")",";","vec4","jC","=","vec4","(","jB",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jC","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jD","=","texture2D","(","u_colormap0",",","jA",")",";","ej","(","jD",".","rgb",")",";","vec4","jE","=","texture2D","(","u_colormap1",",","jA",")",";","ej","(","jE",".","rgb",")",";","vec4","jF","=","texture2D","(","u_stencil0",",","jA",")",";","vec4","jG","=","mix","(","jD",",","jE",",","jF",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jG","=","texture2D","(","u_colormap0",",","jA","+","u_time","*","u_colormap0_uv_velocity",")",";","ej","(","jG",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["jC",".","rgb","=","mix","(","jC",".","rgb",",","jG",".","rgb",",","u_diffuse_color_factor",")",";","jC",".","a","=","jG",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["jC",".","rgb","*=","mix","(","vec3","(","1.0",")",",","jG",".","rgb",",","u_diffuse_color_factor",")",";","jC",".","a","=","jG",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","jH","=","jC",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["float","jI","=","jC",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","jI","<","0.5",")","discard",";","jI","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jI","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ew","(","jH",",","length","(","cC",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["el","(","jH",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","jH",",","jI",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jH",",","jI",")",";","}"]}]},exports["shadeless.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cC",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jf",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","jA","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jA","=","mix","(","jA",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jB","=","vec3","(","0.0",")",";","vec3","jC","=","vec3","(","0.0",")",";","vec3","jD","=","vec3","(","0.0",")",";","bn","(","jA",",","jB",",","jC",",","jD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jE","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jE","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jF","=","(","u_model_matrix","*","vec4","(","jE",",","1.0",")",")",".","xyz",";","mat4","jG","=","ab","(","u_camera_eye",",","jF",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jH","=","(","u_model_matrix","*","vec4","(","jE",",","1.0",")",")",".","xyz",";","jG","=","jG","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jH",")",";"]}]}}]},{type:"textline",tokens:["b","jI","=","ai","(","jA","-","jE",",","jE",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jG",")",";","jI",".","b","=","jF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jI","=","ai","(","jA",",","jE",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jJ","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jJ","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","jI",".","a",",","jI",".","b",",","jJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["jf","=","a_color",";"]}]}}]},{type:"textline",tokens:["cC","=","u_view_matrix","*","vec4","(","jI",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","cC",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gl_Position",".","xy","+=","u_subpixel_jitter","*","gl_Position",".","w",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_sampler",",","a",")",";","el","(","jA",".","rgb",")",";","eo","(","jA",".","rgb",",","jA",".","a",")",";","gl_FragColor","=","jA",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","jA","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","jB","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","jA",",","0.0",")",";","jB",".","x","/=","jB",".","w",";","jB",".","y","/=","jB",".","w",";","jB","+=","99999.0","*","step","(","jB",".","z",",","0.0",")",";","jB","+=","100.0","*","(","step","(","1.0",",","abs","(","jB",".","x",")",")","+","step","(","1.0",",","abs","(","jB",".","y",")",")",")",";","jB",".","x","=","-","a_lf_dist","*","jB",".","x",";","jB",".","y","=","-","a_lf_dist","*","jB",".","y",";","float","jC","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","jD","=","vec2","(","a_lf_bb_vertex",".","x","/","jC",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","jE","=","1.9",";","jD","*=","(","1.0","+","jE","*","length","(","jB",".","xy",")",")",";","}","gl_Position","=","vec4","(","jB",".","xy","+","jD",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lh",";","void","main","(",")","{","vec3","jA","=","textureCube","(","u_sky",",","lh",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["ej","(","jA",".","rgb",")",";","float","jB","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","jB","=","min","(","-","jB","*","0.03",",","0.8",")",";","float","jC","=","length","(","u_sun_intensity",")","+","u_environment_energy",";","vec3","jD","=","normalize","(","lh",")",";","vec3","jE","=","vec3","(","0.0",")",";","vec4","jF","=","u_underwater_fog_color_density",";","jF",".","rgb","=","mix","(","jF",".","rgb",",","jE",",","min","(","-","jD",".","y","+","jB",",","1.0",")",")","*","jC",";","float","jG","=","clamp","(","sign","(","jD",".","y","-","0.05","*","jB",")",",","0.0",",","1.0",")",";","jA","=","mix","(","jF",".","rgb",",","jA",",","jG",")",";","el","(","jA",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jA",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","lh",";","void","main","(",")","{","vec4","jA","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","jB","=","u_sky_vp_inverse","*","jA",";","lh","=","jB",".","xyz",";","gl_Position","=","jA",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0001"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_depth",";"]}]}},{type:"elif",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_alphamap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";","uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jb",";","varying","vec3","jc",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jd",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","je",";","varying","vec3","li",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lj",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ll",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","lr","(","in","float","lm",",","inout","vec2","ln",",","in","vec2","lo",")","{","vec4","lp","=","texture2D","(","u_shore_depth",",","ln",")",";","float","lq","=","cn","(","lp",")",";","if","(","lq","<","ll",")","{","ln","=","lo",";","return","lm",";","}","else","{","return","lq",";","}","}"]}]}}]},{type:"textline",tokens:["vec3","lG","(","in","vec2","ls",",","in","vec3","lt",",","in","vec3","lu",",","in","vec3","lv",",","out","float","lw",")","{","vec3","lx","=","reflect","(","-","lu",",","lt",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ly","=","ls",".","xy","+","lt",".","xz","*","REFL_BUMP","/","ll",";","lw","=","u_reflect_factor",";","vec3","lz",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["lz","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lz","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","lA","=","dot","(","lu",",","lt",")",";","lw","*=","max","(","1.0","-","1.0","/","lA",",","1.0",")",";","}","else","{","lz","=","texture2D","(","u_reflectmap",",","ly",")",".","rgb",";","ej","(","lz",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["lw","=","u_mirror_factor",";","vec3","lz","=","lv","*","textureCube","(","u_mirrormap",",","lx",")",".","rgb",";","ej","(","lz",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lw","=","1.0",";","vec3","lz","=","lv","*","vec3","(","0.3",",","0.5",",","1.0",")",";","ej","(","lz",")",";"]}]}}]},{type:"textline",tokens:["vec3","lB","=","normalize","(","lx","+","lu",")",";","float","lC","=","1.0","-","dot","(","lu",",","lB",")",";","float","lD","=","u_fresnel_params","[","3","]",";","float","lE","=","u_fresnel_params","[","2","]",";","float","lF","=","lD","+","(","1.0","-","lD",")","*","pow","(","lC",",","lE",")",";","lw","=","min","(","lw","*","lF",",","1.0",")",";","return","lz",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","lH","=","mat3","(","je",",","li",",","jd",")",";"]}]}}]},{type:"textline",tokens:["vec3","lI","=","normalize","(","jd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","lH","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","lI","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","(","REFLECTIVE","||","FOAM","||","(","WATER_EFFECTS","&&","!","DISABLE_FOG",")",")","||","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lJ","=","jc",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lK","=","vec2","(","lj",".","x",",","-","lj",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lK","=","vec2","(","jc",".","x",",","-","jc",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lK","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lL","=","vec3","(","0.0",")",";","vec3","lM","=","texture2D","(","u_normalmap0",",","lK","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lL","+=","lM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lN","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["lN","+=","lM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["lM","=","texture2D","(","u_normalmap0",",","lK","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lL","+=","lM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["lN","+=","lM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["lM","=","texture2D","(","u_normalmap0",",","lK","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lL","+=","lM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["lN","+=","lM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["lM","=","texture2D","(","u_normalmap0",",","lK","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lL","+=","lM",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["lN","+=","lM",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lO","=","lH","*","lN",";","if","(","!","h","(","lO",",","vec3","(","0.0",")",")",")","lO","=","normalize","(","lO",")",";","vec3","lP","=","mix","(","lI",",","lO",",","0.2",")",";","lP","=","normalize","(","lP",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["lI","=","mix","(","lI",",","normalize","(","lH","*","lL",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lI","=","mix","(","lI",",","normalize","(","lH","*","lL",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["lI","=","normalize","(","lI",")",";"]}]}}]},{type:"textline",tokens:["vec3","lQ","=","normalize","(","jb",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lR","=","cB",".","xy","/","cB",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","lS","=","ll","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","lT","=","u_diffuse_color",".","a",";","vec4","lU","=","texture2DProj","(","u_shore_depth",",","cB",")",";","float","lV","=","cn","(","lU",")",";","float","lW","=","max","(","lV","-","ll",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lX","=","lR","+","lI",".","xz","*","REFR_BUMP","/","ll",";","float","lY","=","lr","(","lV",",","lX",",","lR",")",";","float","lZ","=","max","(","lY","-","ll",",","0.0",")",";","float","l_","=","u_view_max_depth","/","ABSORB","*","lZ",";","float","ma",";","if","(","u_cam_water_depth","<","0.0",")","ma","=","0.0",";","else","ma","=","min","(","lT","*","l_",",","1.0",")",";","float","mb","=","u_view_max_depth","/","ABSORB","*","lW",";","lT","=","min","(","15.0","*","lT","*","u_view_max_depth","*","lW",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mb","=","u_view_max_depth","/","ABSORB","*","lW",";","if","(","u_cam_water_depth",">","0.0",")","lT","=","min","(","lT","*","mb",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["lT","*=","min","(","5.0","*","lS",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","mc","=","texture2D","(","u_alphamap",",","lK",")",";","float","lT","=","mc",".","r",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lT","=","u_diffuse_color",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","ma","=","1.0","-","lT",";","vec2","lX","=","lR","+","lI",".","xz","*","REFR_BUMP","/","ll",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","md","=","texture2D","(","u_refractmap",",","lX",")",".","rgb",";","ej","(","md",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","me","=","pow","(","min","(","lk",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","mf","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","me",")",";","me","=","pow","(","min","(","lk",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","mf","=","mix","(","u_shore_water_col",",","mf",",","me",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mf","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","mg","=","max","(","1.0","-","u_view_max_depth","*","lW",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mg","=","1.0","-","lT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","mh","=","max","(","3.0","*","lJ",",","0.0",")",";","mh","*=","mh",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mi","=","normalize","(","vec3","(","lk",".","r",",","0.0",",","lk",".","g",")",")",";","vec3","mj","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","mi",",","0.8",")",")",";","float","mk","=","max","(","2.5","*","dot","(","lP",",","mj",")","-","0.7",",","0.0",")",";","mg","+=","mk","*","(","1.0","-","lk",".","b",")",";","mh","*=","(","1.0","-","0.95","*","pow","(","lk",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["mg","+=","mh",";","mg","=","min","(","u_foam_factor","*","mg",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","ml","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","lK","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","mm","=","u_specular_params","[","0","]",";","vec2","mn","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","mo","=","mm","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mp","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lI",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mp","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["vec3","mq","=","u_ambient","*","mp",";","vec3","mr","=","mq","+","u_sun_intensity",";","float","ms",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mt","=","lG","(","lR",",","lI",",","lQ",",","mr",",","ms",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mt","=","lG","(","vec2","(","0.0",")",",","lI",",","lQ",",","mr",",","ms",")",";"]}]}}]},{type:"textline",tokens:["vec3","mu","=","u_diffuse_intensity","*","mf",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS","&&","DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","mv","=","max","(","dot","(","u_sun_direction",",","-","jd",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","lQ",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","mv","=","clamp","(","SSS_STRENGTH","*","mv",",","0.0",",","1.0",")",";","mu","=","mix","(","mu",",","u_shallow_water_col",",","mv",")",";","mu","=","mix","(","mu",",","u_shore_water_col",",","mv",")",";"]}]}}]},{type:"textline",tokens:["ff","mw","=","hA","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","mu",",","mo",",","jc",",","lI",",","lQ",",","mn",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","mu","=","mw",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["mu","=","mix","(","md",",","mu",",","ma",")",";"]}]}}]},{type:"textline",tokens:["mu","=","mix","(","mu",",","mt",",","ms",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","mx","=","mix","(","ml",".","g",",","ml",".","r",",","clamp","(","4.0","*","(","mg","-","0.75",")",",","0.0",",","1.0",")",")",";","mx","=","mix","(","ml",".","b",",","mx",",","clamp","(","2.0","*","mg","-","1.0",",","0.0",",","1.0",")",")",";","mx","=","mix","(","0.0",",","mx",",","mg",")",";","mu","=","mix","(","mu",",","mr",",","mx",")",";"]}]}}]},{type:"textline",tokens:["mu","+=","mw",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","my","=","eD","(","u_cube_fog",",","lQ",")",";","vec4","mz","=","vec4","(","my",",","u_fog_color_density",".","a",")",";","ej","(","mz",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","mz","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","fe","(","mu",",","lS",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";","}","else","{","ew","(","mu",",","lS",",","mz",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ew","(","mu",",","lS",",","mz",")",";"]}]}}]}]}}]},{type:"textline",tokens:["el","(","mu",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lT","=","max","(","lT",",","mw",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["lT","+=","mx",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","mu",",","lT",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","mu",",","lT",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Z",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Z",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_cascad_step",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jb",";","varying","vec3","jc",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jd",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","je",";","varying","vec3","li",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lj",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ll",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jG","(","in","vec2","jA",")","{","vec2","jB","=","vec2","(","(","jA",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","SHORE_MAP_CENTER_Z","+","jA",".","y",")","/","SHORE_MAP_SIZE_Z",")","+","0.5",";","jB","=","clamp","(","jB",",","0.0",",","1.0",")",";","vec4","jC","=","texture2D","(","u_shore_dist_map",",","jB",")",";","const","vec2","jD","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","jE","=","dot","(","jC",".","ba",",","jD",")",";","vec2","jF","=","normalize","(","jC",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","jF",",","jE",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","jU","(","inout","vec3","jH",",","in","float","jI",",","in","vec3","jJ",")","{","float","jK","=","iA","(","DST_NOISE_SCALE_0","*","(","jH",".","xz","+","DST_NOISE_FREQ_0","*","jI",")",")","*","iA","(","DST_NOISE_SCALE_1","*","(","jH",".","zx","-","DST_NOISE_FREQ_1","*","jI",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jL","=","jJ",".","b",";","float","jM","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","jN","=","sqrt","(","jL",")",";","float","jO","=","max","(","jL",",","DIR_MIN_SHR_FAC",")","*","(","sin","(","(","jN","/","jM","+","DIR_FREQ","*","jI",")",")",")","*","max","(","iA","(","DIR_NOISE_SCALE","*","(","jH",".","xz","+","DIR_NOISE_FREQ","*","jI",")",")",",","DIR_MIN_NOISE_FAC",")",";","float","jP","=","WAVES_HEIGHT","*","mix","(","jO",",","jK",",","max","(","jN",",","DST_MIN_FAC",")",")",";","vec2","jQ","=","jJ",".","rg",";","float","jR","=","WAVES_HOR_FAC","*","jO","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","jL",")",",","0.0",")",";","vec2","jS","=","jR","*","jQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jP","=","WAVES_HEIGHT","*","jK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","jT","=","hU","(","20.0","/","WAVES_LENGTH","*","(","jH",".","xz","-","0.25","*","jI",")",")",".","x","+","hU","(","17.0","/","WAVES_LENGTH","*","(","jH",".","zx","+","0.1","*","jI",")",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["jH",".","xz","+=","jS",";","jT","*=","jL",";"]}]}}]},{type:"textline",tokens:["jP","+=","0.05","*","jT",";"]}]}}]},{type:"textline",tokens:["jH",".","y","+=","jP",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","jV","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","jW","=","abs","(","a_cascad_step",")",";","vec2","jX","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","jW",")",";","jV",".","y","+=","WATER_LEVEL",";","jV",".","xz","+=","jX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["b","jY","=","ai","(","jV",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["lj","=","jY",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lk","=","jG","(","jY",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","jZ","=","length","(","u_wind",")",";","float","j_","=","u_time",";","j_","*=","jZ",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","ka","=","jW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ka","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","kb","=","jY",".","a","+","vec3","(","ka",",","0.0",",","0.0",")",";","vec3","kc","=","jY",".","a","+","vec3","(","0.0",",","0.0",",","ka",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kd","=","jG","(","kb",".","xz",")",";","vec3","lm","=","jG","(","kc",".","xz",")",";","jU","(","kb",",","j_",",","kd",")",";","jU","(","kc",",","j_",",","lm",")",";","jU","(","jY",".","a",",","j_",",","lk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jU","(","kb",",","j_",",","vec3","(","0.0",")",")",";","jU","(","kc",",","j_",",","vec3","(","0.0",")",")",";","jU","(","jY",".","a",",","j_",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_cascad_step","<","0.0",")","{","kb",".","y","=","jY",".","a",".","y",";","kc",".","y","=","jY",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","ln","=","normalize","(","kb","-","jY",".","a",")",";","vec3","lo","=","normalize","(","kc","-","jY",".","a",")",";","jd","=","normalize","(","cross","(","lo",",","ln",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["je","=","lo",";","li","=","cross","(","jd",",","je",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lp","=","dot","(","jd",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lq","=","clamp","(","0.8","-","lp",",","0.0",",","1.0",")",";","jd","=","mix","(","jd",",","vec3","(","0.0",",","1.0",",","0.0",")",",","lq",")",";"]}]}}]}]}}]},{type:"textline",tokens:["jc","=","jY",".","a",";","jb","=","u_camera_eye","-","jY",".","a",";","vec4","lr","=","u_view_matrix","*","vec4","(","jY",".","a",",","1.0",")",";","vec4","ls","=","u_proj_matrix","*","lr",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lt","=","ls",".","x",";","float","lu","=","ls",".","y",";","float","lv","=","ls",".","w",";","cB",".","x","=","(","lt","+","lv",")","/","2.0",";","cB",".","y","=","(","lu","+","lv",")","/","2.0",";","cB",".","z","=","lv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ll","=","-","lr",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ls",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lm",";","const","float","ln","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lo","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lo","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lp","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","lq","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","lr","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","ls","=","vec3","(","0.0",")",";","float","lt","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lu","=","sign","(","lm","-","vec3","(","0.02","*","ln",")",")",";","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","{","ls","=","lo",";","lt","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lu","=","sign","(","lm","-","vec3","(","0.02","*","ln",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","ls","=","u_wireframe_edge_color",";","else","ls","=","lr",";","lt","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","lt","=","1.0",";","else","lt","=","0.0",";","ls","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","ls","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","ls","=","lp",";","else","ls","=","lq",";","lt","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","lv","=","fwidth","(","lm",")",";","vec3","lw","=","smoothstep","(","vec3","(","0.0",")",",","lv","*","ln",",","lm",")",";","float","lx","=","min","(","min","(","lw",".","x",",","lw",".","y",")",",","lw",".","z",")",";","lx","=","clamp","(","lx",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","ls","=","vec3","(","mix","(","u_wireframe_edge_color",",","lr",",","lx",")",")",";","lt","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","ls","=","u_wireframe_edge_color",";","lt","=","mix","(","1.0",",","0.0",",","lx",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","ls","=","mix","(","u_wireframe_edge_color",",","lp",",","lx",")",";","else","ls","=","mix","(","u_wireframe_edge_color",",","lq",",","lx",")",";","lt","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["el","(","ls",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","ls",",","lt",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ls",",","lt",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","lm",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","lm","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","lm","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","lm","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","jA","=","a_position",";","vec3","jB","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["b","jC","=","ai","(","jA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jA","=","mix","(","jA",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jD","=","vec3","(","0.0",")",";","vec3","jE","=","vec3","(","0.0",")",";","bn","(","jA",",","jD",",","jE",",","jB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jF","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jF","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","jC","=","ea","(","jA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jF",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jG","=","(","u_model_matrix","*","vec4","(","jF",",","1.0",")",")",".","xyz",";","mat4","jH","=","ab","(","u_camera_eye",",","jG",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jI","=","(","u_model_matrix","*","vec4","(","jF",",","1.0",")",")",".","xyz",";","jH","=","jH","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jI",")",";"]}]}}]},{type:"textline",tokens:["b","jC","=","ai","(","jA","-","jF",",","jF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jH",")",";","jC",".","b","=","jG",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jC","=","ai","(","jA",",","jF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","jC",".","a",",","jC",".","b",",","jB",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","jJ","=","u_view_matrix","*","vec4","(","jC",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","jJ",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","jB","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","jA","[","0","]",",","jB","[","1","]",",","jB","[","2","]",",","jA","[","3","]","+","jB","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","jD","(","float","jA",",","float","jB",")","{","vec2","jC","=","a","+","vec2","(","jA",",","jB",")","*","u_texel_size",";","return","texture2D","(","u_color",",","jC",")",";","}","float","jH","(","vec4","jE",")","{","vec3","jF","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","jG","=","dot","(","jE",".","rgb",",","jF",")",";","return","jG",";","}","vec4","j_","(",")","{","vec4","jI","=","jD","(","-","1.0",",","-","1.0",")",";","vec4","jJ","=","jD","(","1.0",",","-","1.0",")",";","vec4","jK","=","jD","(","-","1.0",",","1.0",")",";","vec4","jL","=","jD","(","1.0",",","1.0",")",";","vec4","jM","=","jD","(","0.0",",","0.0",")",";","float","jN","=","jH","(","jI",")",";","float","jO","=","jH","(","jJ",")",";","float","jP","=","jH","(","jK",")",";","float","jQ","=","jH","(","jL",")",";","float","jR","=","jH","(","jM",")",";","float","jS","=","min","(","jR",",","min","(","min","(","jN",",","jO",")",",","min","(","jP",",","jQ",")",")",")",";","float","jT","=","max","(","jR",",","max","(","max","(","jN",",","jO",")",",","max","(","jP",",","jQ",")",")",")",";","vec2","jU",";","jU",".","x","=","-","(","(","jN","+","jO",")","-","(","jP","+","jQ",")",")",";","jU",".","y","=","(","(","jN","+","jP",")","-","(","jO","+","jQ",")",")",";","float","jV","=","max","(","(","jN","+","jO","+","jP","+","jQ",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","jW","=","1.0","/","(","min","(","abs","(","jU",".","x",")",",","abs","(","jU",".","y",")",")","+","jV",")",";","jU","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","jU","*","jW",")",")","*","u_texel_size",";","vec4","jX","=","0.5","*","(","texture2D","(","u_color",",","a","+","jU","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","jU","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","jY","=","jX","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","jU","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","jU","*","0.5",")",")",";","float","jZ","=","jH","(","jY",")",";","if","(","(","jZ","<","jS",")","||","(","jZ",">","jT",")",")","return","jX",";","else","return","jY",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","mU","(",")","{","vec2","ka",";","ka",".","x","=","a",".","x",";","ka",".","y","=","a",".","y",";","vec4","kb","=","texture2D","(","u_color",",","ka",")",";","vec4","kc","=","jD","(","0.0",",","1.0",")",";","vec4","kd","=","jD","(","1.0",",","0.0",")",";","vec4","ln","=","jD","(","0.0",",","-","1.0",")",";","vec4","lo","=","jD","(","-","1.0",",","0.0",")",";","float","lp","=","jH","(","kc",")",";","float","lq","=","jH","(","kd",")",";","float","lr","=","jH","(","ln",")",";","float","ls","=","jH","(","lo",")",";","float","lt","=","jH","(","kb",")",";","float","lu","=","max","(","lp",",","lt",")",";","float","lv","=","min","(","lp",",","lt",")",";","float","lw","=","max","(","lq",",","lu",")",";","float","lx","=","min","(","lq",",","lv",")",";","float","ly","=","max","(","lr",",","ls",")",";","float","lz","=","min","(","lr",",","ls",")",";","float","lA","=","max","(","ly",",","lw",")",";","float","lB","=","min","(","lz",",","lx",")",";","float","lC","=","lA","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","lD","=","lA","-","lB",";","float","lE","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","lC",")",";","bool","lF","=","lD","<","lE",";","if","(","lF",")","return","kb",";","vec4","lG","=","jD","(","-","1.0",",","-","1.0",")",";","vec4","lH","=","jD","(","1.0",",","1.0",")",";","vec4","lI","=","jD","(","1.0",",","-","1.0",")",";","vec4","lJ","=","jD","(","-","1.0",",","1.0",")",";","float","lK","=","jH","(","lG",")",";","float","lL","=","jH","(","lH",")",";","float","lM","=","jH","(","lI",")",";","float","lN","=","jH","(","lJ",")",";","float","lO","=","lr","+","lp",";","float","lP","=","ls","+","lq",";","float","lQ","=","1.0","/","lD",";","float","lR","=","lO","+","lP",";","float","lS","=","(","-","2.0","*","lt",")","+","lO",";","float","lT","=","(","-","2.0","*","lt",")","+","lP",";","float","lU","=","lM","+","lL",";","float","lV","=","lK","+","lM",";","float","lW","=","(","-","2.0","*","lq",")","+","lU",";","float","lX","=","(","-","2.0","*","lr",")","+","lV",";","float","lY","=","lK","+","lN",";","float","lZ","=","lN","+","lL",";","float","l_","=","(","abs","(","lS",")","*","2.0",")","+","abs","(","lW",")",";","float","ma","=","(","abs","(","lT",")","*","2.0",")","+","abs","(","lX",")",";","float","mb","=","(","-","2.0","*","ls",")","+","lY",";","float","mc","=","(","-","2.0","*","lp",")","+","lZ",";","float","md","=","abs","(","mb",")","+","l_",";","float","me","=","abs","(","mc",")","+","ma",";","float","mf","=","lY","+","lU",";","float","mg","=","u_texel_size",".","x",";","bool","mh","=","md",">=","me",";","float","mi","=","lR","*","2.0","+","mf",";","if","(","!","mh",")","lr","=","ls",";","if","(","!","mh",")","lp","=","lq",";","if","(","mh",")","mg","=","u_texel_size",".","y",";","float","mj","=","(","mi","*","(","1.0","/","12.0",")",")","-","lt",";","float","mk","=","lr","-","lt",";","float","ml","=","lp","-","lt",";","float","mm","=","lr","+","lt",";","float","mn","=","lp","+","lt",";","bool","mo","=","abs","(","mk",")",">=","abs","(","ml",")",";","float","mp","=","max","(","abs","(","mk",")",",","abs","(","ml",")",")",";","if","(","mo",")","mg","=","-","mg",";","float","mq","=","clamp","(","abs","(","mj",")","*","lQ",",","0.0",",","1.0",")",";","vec2","mr",";","mr",".","x","=","ka",".","x",";","mr",".","y","=","ka",".","y",";","vec2","ms",";","ms",".","x","=","(","!","mh",")","?","0.0",":","u_texel_size",".","x",";","ms",".","y","=","(","mh",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","mh",")","mr",".","x","+=","mg","*","0.5",";","if","(","mh",")","mr",".","y","+=","mg","*","0.5",";","vec2","mt",";","mt",".","x","=","mr",".","x","-","ms",".","x",";","mt",".","y","=","mr",".","y","-","ms",".","y",";","vec2","mu",";","mu",".","x","=","mr",".","x","+","ms",".","x",";","mu",".","y","=","mr",".","y","+","ms",".","y",";","float","mv","=","(","(","-","2.0",")","*","mq",")","+","3.0",";","float","mw","=","jH","(","texture2D","(","u_color",",","mt",")",")",";","float","mx","=","mq","*","mq",";","float","my","=","jH","(","texture2D","(","u_color",",","mu",")",")",";","if","(","!","mo",")","mm","=","mn",";","float","mz","=","mp","*","1.0","/","4.0",";","float","mA","=","lt","-","mm","*","0.5",";","float","mB","=","mv","*","mx",";","bool","mC","=","mA","<","0.0",";","mw","-=","mm","*","0.5",";","my","-=","mm","*","0.5",";","bool","mD","=","abs","(","mw",")",">=","mz",";","bool","mE","=","abs","(","my",")",">=","mz",";","if","(","!","mD",")","mt",".","x","-=","ms",".","x","*","1.5",";","if","(","!","mD",")","mt",".","y","-=","ms",".","y","*","1.5",";","bool","mF","=","(","!","mD",")","||","(","!","mE",")",";","if","(","!","mE",")","mu",".","x","+=","ms",".","x","*","1.5",";","if","(","!","mE",")","mu",".","y","+=","ms",".","y","*","1.5",";","if","(","mF",")","{","if","(","!","mD",")","mw","=","jH","(","texture2D","(","u_color",",","mt",".","xy",")",")",";","if","(","!","mE",")","my","=","jH","(","texture2D","(","u_color",",","mu",".","xy",")",")",";","if","(","!","mD",")","mw","=","mw","-","mm","*","0.5",";","if","(","!","mE",")","my","=","my","-","mm","*","0.5",";","mD","=","abs","(","mw",")",">=","mz",";","mE","=","abs","(","my",")",">=","mz",";","if","(","!","mD",")","mt",".","x","-=","ms",".","x","*","2.0",";","if","(","!","mD",")","mt",".","y","-=","ms",".","y","*","2.0",";","mF","=","(","!","mD",")","||","(","!","mE",")",";","if","(","!","mE",")","mu",".","x","+=","ms",".","x","*","2.0",";","if","(","!","mE",")","mu",".","y","+=","ms",".","y","*","2.0",";","if","(","mF",")","{","if","(","!","mD",")","mw","=","jH","(","texture2D","(","u_color",",","mt",".","xy",")",")",";","if","(","!","mE",")","my","=","jH","(","texture2D","(","u_color",",","mu",".","xy",")",")",";","if","(","!","mD",")","mw","=","mw","-","mm","*","0.5",";","if","(","!","mE",")","my","=","my","-","mm","*","0.5",";","mD","=","abs","(","mw",")",">=","mz",";","mE","=","abs","(","my",")",">=","mz",";","if","(","!","mD",")","mt",".","x","-=","ms",".","x","*","2.0",";","if","(","!","mD",")","mt",".","y","-=","ms",".","y","*","2.0",";","mF","=","(","!","mD",")","||","(","!","mE",")",";","if","(","!","mE",")","mu",".","x","+=","ms",".","x","*","2.0",";","if","(","!","mE",")","mu",".","y","+=","ms",".","y","*","2.0",";","if","(","mF",")","{","if","(","!","mD",")","mw","=","jH","(","texture2D","(","u_color",",","mt",".","xy",")",")",";","if","(","!","mE",")","my","=","jH","(","texture2D","(","u_color",",","mu",".","xy",")",")",";","if","(","!","mD",")","mw","=","mw","-","mm","*","0.5",";","if","(","!","mE",")","my","=","my","-","mm","*","0.5",";","mD","=","abs","(","mw",")",">=","mz",";","mE","=","abs","(","my",")",">=","mz",";","if","(","!","mD",")","mt",".","x","-=","ms",".","x","*","4.0",";","if","(","!","mD",")","mt",".","y","-=","ms",".","y","*","4.0",";","mF","=","(","!","mD",")","||","(","!","mE",")",";","if","(","!","mE",")","mu",".","x","+=","ms",".","x","*","4.0",";","if","(","!","mE",")","mu",".","y","+=","ms",".","y","*","4.0",";","if","(","mF",")","{","if","(","!","mD",")","mw","=","jH","(","texture2D","(","u_color",",","mt",".","xy",")",")",";","if","(","!","mE",")","my","=","jH","(","texture2D","(","u_color",",","mu",".","xy",")",")",";","if","(","!","mD",")","mw","=","mw","-","mm","*","0.5",";","if","(","!","mE",")","my","=","my","-","mm","*","0.5",";","mD","=","abs","(","mw",")",">=","mz",";","mE","=","abs","(","my",")",">=","mz",";","if","(","!","mD",")","mt",".","x","-=","ms",".","x","*","2.0",";","if","(","!","mD",")","mt",".","y","-=","ms",".","y","*","2.0",";","if","(","!","mE",")","mu",".","x","+=","ms",".","x","*","2.0",";","if","(","!","mE",")","mu",".","y","+=","ms",".","y","*","2.0",";","}","}","}","}","float","mG","=","ka",".","x","-","mt",".","x",";","float","mH","=","mu",".","x","-","ka",".","x",";","if","(","!","mh",")","mG","=","ka",".","y","-","mt",".","y",";","if","(","!","mh",")","mH","=","mu",".","y","-","ka",".","y",";","bool","mI","=","(","mw","<","0.0",")","!=","mC",";","float","mJ","=","(","mH","+","mG",")",";","bool","mK","=","(","my","<","0.0",")","!=","mC",";","float","mL","=","1.0","/","mJ",";","bool","mM","=","mG","<","mH",";","float","mN","=","min","(","mG",",","mH",")",";","bool","mO","=","mM","?","mI",":","mK",";","float","mP","=","mB","*","mB",";","float","mQ","=","(","mN","*","(","-","mL",")",")","+","0.5",";","float","mR","=","mP","*","FXAA_QUALITY_SUBPIX",";","float","mS","=","mO","?","mQ",":","0.0",";","float","mT","=","max","(","mS",",","mR",")",";","if","(","!","mh",")","ka",".","x","+=","mT","*","mg",";","if","(","mh",")","ka",".","y","+=","mT","*","mg",";","return","texture2D","(","u_color",",","ka",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","j_","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","mU","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","jA","=","vec2","(","0.0",",","0.0",")",";","vec2","jB","=","u_texel_size",";","vec4","jC","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jC","*","0.0875447373698",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0858112354248",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0808139781061",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0731235112908",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0635705267419",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0530985673112",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0426125984122",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0328565115809",";","jA","+=","jB",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jA",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jA",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","jC",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_main",",","a",")",";","vec4","jB","=","texture2D","(","u_bloom",",","a",")",";","vec4","jC","=","jA",";","jC","+=","jB",";","gl_FragColor","=","vec4","(","jC",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/blur_depth.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","vec2","u_camera_range",";","uniform","float","u_blur_depth_edge_size",";","uniform","float","u_blur_depth_diff_threshold",";","varying","vec2","a",";","float","lw","(","in","vec2","lv",")","{","return","lu","(","u_depth",",","lv",",","u_camera_range",")",";","}","void","main","(",")","{","vec2","lx","=","u_texel_size",";","vec4","ly","=","texture2D","(","u_color",",","a",")",";","float","lz","=","lw","(","a",")",";","float","lA","=","lw","(","a","+","u_blur_depth_edge_size","*","lx",")",";","float","lB","=","lw","(","a","-","u_blur_depth_edge_size","*","lx",")",";","float","lC","=","abs","(","lz","-","lA",")",";","float","lD","=","abs","(","lz","-","lB",")",";","float","lE","=","max","(","lC",",","lD",")",";","if","(","lE",">","u_blur_depth_diff_threshold",")","{","gl_FragColor","=","ly",";","return",";","}","vec2","lF","=","vec2","(","0.0",",","0.0",")",";","gl_FragColor","=","ly","*","0.2270270270",";","lF","+=","lx",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lF",")","*","0.1945945946",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lF",")","*","0.1945945946",",","lF","+=","lx",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lF",")","*","0.1216216216",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lF",")","*","0.1216216216",",","lF","+=","lx",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lF",")","*","0.0540540541",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lF",")","*","0.0540540541",",","lF","+=","lx",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lF",")","*","0.0162162162",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lF",")","*","0.0162162162",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_color",",","a",")",";","vec3","jB","=","jA",".","rgb",";","if","(","u_brightness","<","0.0",")","jB","=","jB","*","(","1.0","+","u_brightness",")",";","else","jB","=","jB","+","(","(","1.0","-","jB",")","*","u_brightness",")",";","jB","=","(","jB","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","jB","*=","u_exposure",";","vec3","jC","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","jD","=","dot","(","jB",",","jC",")",";","jB","=","mix","(","vec3","(","jD",")",",","jB",",","u_saturation",")",";","gl_FragColor","=","vec4","(","jB",",","jA",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cj","(","clamp","(","lu","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","lv","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","lw","=","lu","(","u_depth",",","a",",","u_camera_range",")",";","lw","*=","u_view_max_depth",";","float","lx",";","if","(","lw","<","u_dof_dist",")","lx","=","(","u_dof_dist","-","lw",")","/","u_dof_front",";","else","lx","=","(","lw","-","u_dof_dist",")","/","u_dof_rear",";","lx","=","clamp","(","lx",",","0.0",",","1.0",")",";","vec4","ly","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","lv",",","ly",",","lx",")",";","}","else","gl_FragColor","=","lv",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","jF","(","float","jA",",","float","jB",",","float","jC",")","{","vec2","jD","=","a","+","vec2","(","jA",",","jB",")","*","u_texel_size",";","vec4","jE","=","texture2D","(","u_sampler",",","jD",")","*","jC",";","return","cn","(","jE",")",";","}","void","main","(",")","{","float","jG","=","(","jF","(","-","1.0",",","-","1.0",",","-","1.0",")","+","jF","(","0.0",",","-","1.0",",","-","1.0",")","+","jF","(","1.0",",","-","1.0",",","-","1.0",")","+","jF","(","-","1.0",",","0.0",",","-","1.0",")","+","jF","(","0.0",",","0.0",",","8.0",")","+","jF","(","1.0",",","0.0",",","-","1.0",")","+","jF","(","-","1.0",",","1.0",",","-","1.0",")","+","jF","(","0.0",",","1.0",",","-","1.0",")","+","jF","(","1.0",",","1.0",",","-","1.0",")",")",";","jG","*=","1000.0",";","gl_FragColor","=","vec4","(","jG",",","jG",",","jG",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","jA",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","jB","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","jC","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","jD","=","jC",".","a","-","jB",".","a",";","if","(","jD","!=","0.0",")","{","float","jE","=","smoothstep","(","0.0",",","1.0",",","jC",".","a",")",";","if","(","jB",".","a","==","0.0",")","{","vec3","jF","=","u_glow_color",";","el","(","jF",")",";","vec4","jG","=","vec4","(","clamp","(","jF",",","0.0",",","1.0",")",",","jE",")",";","gl_FragColor","=","mix","(","jA",",","jG",",","jE",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","vec3","u_sun_intensity",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","lv",";","varying","vec2","lw",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","lx",";","void","main","(",")","{","vec3","ly","=","u_sun_intensity",";","vec2","lz","=","(","lx",".","xy","-","a",")",";","float","lA","=","length","(","lz",")",";","vec2","lB","=","u_radial_blur_step","*","lz","/","lA",";","float","lC","=","lA","/","u_radial_blur_step",";","lB","*=","min","(","lC",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","lC","=","max","(","lC",",","STEPS_PER_PASS",")",";","vec2","lD","=","a",";","float","lE","=","0.0",";","for","(","float","lF","=","0.0",";","lF","<","STEPS_PER_PASS",";","lF","+=","1.0",")","{","if","(","lF","<=","lC",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","lG","=","lu","(","u_input",",","lD",",","u_camera_range",")",";","lE","+=","(","1.0","-","pow","(","lA",",","0.3",")",")","*","step","(","0.9",",","lG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lE","+=","texture2D","(","u_input",",","lD",")",".","r",";"]}]}}]},{type:"textline",tokens:["}","lD","+=","lB",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lH","=","a","+","lw",";","float","lI","=","hU","(","vec2","(","2.5","*","(","lH",".","x",")",",","2.5","*","(","lH",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","hU","(","vec2","(","5.0","*","(","lH",".","x",")","-","0.66","*","u_time",",","5.0","*","(","lH",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","iA","(","vec2","(","7.5","*","(","lH",".","x",")","+","0.33","*","u_time",",","7.5","*","(","lH",".","y",")","-","0.33","*","u_time",")",")",";","lI","*=","clamp","(","1.2","-","sqrt","(","0.2","*","lA",")",",","0.0",",","1.0",")","*","lv",";","lE","=","max","(","lI",",","lE",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lE","/","STEPS_PER_PASS","*","clamp","(","ly",",","0.4",",","0.8",")",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","lv",";","varying","vec2","lw",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","lx",";","void","jH","(","in","vec4","jA",",","in","vec3","jB",",","out","vec3","jC",")","{","float","jD","=","jA",".","w","*","jB",".","x","+","jA",".","y","*","jB",".","z","-","jA",".","z","*","jB",".","y",";","float","jE","=","jA",".","w","*","jB",".","y","+","jA",".","z","*","jB",".","x","-","jA",".","x","*","jB",".","z",";","float","jF","=","jA",".","w","*","jB",".","z","+","jA",".","x","*","jB",".","y","-","jA",".","y","*","jB",".","x",";","float","jG","=","-","jA",".","x","*","jB",".","x","-","jA",".","y","*","jB",".","y","-","jA",".","z","*","jB",".","z",";","jC",".","x","=","jD","*","jA",".","w","-","jG","*","jA",".","x","-","jE","*","jA",".","z","+","jF","*","jA",".","y",";","jC",".","y","=","jE","*","jA",".","w","-","jG","*","jA",".","y","-","jF","*","jA",".","x","+","jD","*","jA",".","z",";","jC",".","z","=","jF","*","jA",".","w","-","jG","*","jA",".","z","-","jD","*","jA",".","y","+","jE","*","jA",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","jI","=","normalize","(","u_sun_direction",")",";","lx","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","jI",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","lv","=","1.0",";","vec3","jJ","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","jK",";","jH","(","u_camera_quat",",","jJ",",","jK",")",";","jK","=","normalize","(","jK",")",";","float","jL","=","dot","(","jK",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","jM","=","atan","(","jK",".","x",",","jK",".","z",")",";","lw","=","vec2","(","-","jM",",","acos","(","jL",")",")",";","}","else","{","lv","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["lx",".","x","/=","lx",".","w",";","lx",".","y","/=","lx",".","w",";","lx",".","x","=","0.5","*","(","lx",".","x","+","1.0",")",";","lx",".","y","=","0.5","*","(","lx",".","y","+","1.0",")",";","lx","+=","99999.0","*","step","(","lx",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_main",",","a",")",";","ej","(","jA",".","rgb",")",";","vec3","jB","=","jA",".","rgb","+","u_god_rays_intensity","*","(","texture2D","(","u_god_rays",",","a",")",")",".","rgb",";","el","(","jB",")",";","gl_FragColor",".","rgb","=","jB",";","gl_FragColor",".","a","=","jA",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_color",",","a",")","*","0.38026",";","jA","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","jA","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","jA","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","jA","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","jA","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","jA","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","jA","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","jA","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","jA",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_input",",","a",")",";","float","jB","=","dot","(","jA",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","jB",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","jA",";","float","jB","=","0.0",";","for","(","float","jC","=","0.025",";","jC","<","1.0",";","jC","+=","0.05",")","for","(","float","jD","=","0.025",";","jD","<","1.0",";","jD","+=","0.05",")","{","jA","=","max","(","texture2D","(","u_input",",","vec2","(","jC",",","jD",")",")",".","r",",","0.01",")",";","jB","+=","log","(","jA",")",";","}","float","jE","=","exp","(","jB","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","jE",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","ly",";","void","main","(",")","{","float","lz","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","lA","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","lB","=","texture2D","(","u_main",",","a",")",";","float","lC","=","lA","/","lz",";","float","lD","=","u_bloom_edge_lum",";","gl_FragColor","=","lB","*","max","(","lC","-","lD",",","0.0",")","*","ly",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","ly",";","const","vec3","jA","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","jI","(","in","vec4","jB",",","in","vec3","jC",",","out","vec3","jD",")","{","float","jE","=","jB",".","w","*","jC",".","x","+","jB",".","y","*","jC",".","z","-","jB",".","z","*","jC",".","y",";","float","jF","=","jB",".","w","*","jC",".","y","+","jB",".","z","*","jC",".","x","-","jB",".","x","*","jC",".","z",";","float","jG","=","jB",".","w","*","jC",".","z","+","jB",".","x","*","jC",".","y","-","jB",".","y","*","jC",".","x",";","float","jH","=","-","jB",".","x","*","jC",".","x","-","jB",".","y","*","jC",".","y","-","jB",".","z","*","jC",".","z",";","jD",".","x","=","jE","*","jB",".","w","-","jH","*","jB",".","x","-","jF","*","jB",".","z","+","jG","*","jB",".","y",";","jD",".","y","=","jF","*","jB",".","w","-","jH","*","jB",".","y","-","jG","*","jB",".","x","+","jE","*","jB",".","z",";","jD",".","z","=","jG","*","jB",".","w","-","jH","*","jB",".","z","-","jE","*","jB",".","y","+","jF","*","jB",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","jJ",";","jI","(","u_camera_quat",",","jA",",","jJ",")",";","ly","=","dot","(","-","jJ",",","u_sun_direction",")","*","u_bloom_key",";","ly","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","jA","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","jB","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","jA","-","jB",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","jA","+","u_motion_blur_exp","*","jB",";","}","else","{","gl_FragColor","=","jA",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jA","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","jA",".","r","+","jA",".","g","+","jA",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jB","=","vec2","(","0.0",",","0.0",")",";","vec2","jC","=","u_texel_size",";","vec4","jD",";","jD","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jD","*","0.2270270270",";","jB","+=","jC",";","jD","=","texture2D","(","u_color",",","a","+","jB",")",";","gl_FragColor","+=","jD","*","0.1945945946",";","jD","=","texture2D","(","u_color",",","a","-","jB",")",";","gl_FragColor","+=","jD","*","0.1945945946",";","jB","+=","jC",";","jD","=","texture2D","(","u_color",",","a","+","jB",")",";","gl_FragColor","+=","jD","*","0.1216216216",";","jD","=","texture2D","(","u_color",",","a","-","jB",")",";","gl_FragColor","+=","jD","*","0.1216216216",";","jB","+=","jC",";","jD","=","texture2D","(","u_color",",","a","+","jB",")",";","gl_FragColor","+=","jD","*","0.0540540541",";","jD","=","texture2D","(","u_color",",","a","-","jB",")",";","gl_FragColor","+=","jD","*","0.0540540541",";","jB","+=","jC",";","jD","=","texture2D","(","u_color",",","a","+","jB",")",";","gl_FragColor","+=","jD","*","0.0162162162",";","jD","=","texture2D","(","u_color",",","a","-","jB",")",";","gl_FragColor","+=","jD","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jC","=","u_texel_size",";","vec4","jD","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jD",";","if","(","jD",".","a","==","0.0",")","{","jD","=","texture2D","(","u_color",",","a","+","jC",")",";","if","(","jD",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","jD",".","a",")",";","else","{","jD","=","texture2D","(","u_color",",","a","-","jC",")",";","if","(","jD",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","jD",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lA",";","varying","vec4","lB",";","varying","vec4","lC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","lD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lJ","(","vec2","lE",",","sampler2D","lF",")","{","float","lG","=","texture2D","(","lF",",","lE",")",".","r",";","float","lH","=","texture2D","(","lF",",","lA",".","xy",")",".","r",";","float","lI","=","texture2D","(","lF",",","lA",".","zw",")",".","r",";","return","vec3","(","lG",",","lH",",","lI",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lP","(","vec2","lK",",","sampler2D","lL",")","{","vec3","lM","=","lJ","(","lK",",","lL",")",";","vec2","lN","=","abs","(","lM",".","xx","-","lM",".","yz",")",";","vec2","lO","=","step","(","SMAA_PREDICATION_THRESHOLD",",","lN",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","lO",")",";","}"]}]}}]},{type:"textline",tokens:["void","lT","(","bvec2","lQ",",","inout","vec2","lR",",","vec2","lS",")","{","if","(","lQ",".","x",")","lR",".","x","=","lS",".","x",";","if","(","lQ",".","y",")","lR",".","y","=","lS",".","y",";","}","void","lT","(","bvec4","lU",",","inout","vec4","lV",",","vec4","lW",")","{","lT","(","lU",".","xy",",","lV",".","xy",",","lW",".","xy",")",";","lT","(","lU",".","zw",",","lV",".","zw",",","lW",".","zw",")",";","}","vec2","lY","(","vec2","lX",")","{","return","sign","(","lX",")","*","floor","(","abs","(","lX",")","+",".5",")",";","}","vec4","lY","(","vec4","lZ",")","{","return","sign","(","lZ",")","*","floor","(","abs","(","lZ",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mp","(","vec2","l_",",","sampler2D","ma"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","mb"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mc","=","lP","(","l_",",","mb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","mc","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","md","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","me","=","dot","(","texture2D","(","ma",",","l_",")",".","rgb",",","md",")",";","float","mf","=","dot","(","texture2D","(","ma",",","lA",".","xy",")",".","rgb",",","md",")",";","float","mg","=","dot","(","texture2D","(","ma",",","lA",".","zw",")",".","rgb",",","md",")",";","vec4","mh",";","mh",".","xy","=","abs","(","me","-","vec2","(","mf",",","mg",")",")",";","vec2","mi","=","step","(","mc",",","mh",".","xy",")",";","if","(","dot","(","mi",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","mj","=","dot","(","texture2D","(","ma",",","lB",".","xy",")",".","rgb",",","md",")",";","float","mk","=","dot","(","texture2D","(","ma",",","lB",".","zw",")",".","rgb",",","md",")",";","mh",".","zw","=","abs","(","me","-","vec2","(","mj",",","mk",")",")",";","vec2","ml","=","max","(","mh",".","xy",",","mh",".","zw",")",";","float","mm","=","dot","(","texture2D","(","ma",",","lC",".","xy",")",".","rgb",",","md",")",";","float","mn","=","dot","(","texture2D","(","ma",",","lC",".","zw",")",".","rgb",",","md",")",";","mh",".","zw","=","abs","(","vec2","(","mf",",","mg",")","-","vec2","(","mm",",","mn",")",")",";","ml","=","max","(","ml",".","xy",",","mh",".","zw",")",";","float","mo","=","max","(","ml",".","x",",","ml",".","y",")",";","mi",".","xy","*=","step","(","mo",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","mh",".","xy",")",";","return","mi",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mr","(","vec2","mq",")","{","mq",".","r","=","mq",".","r","*","abs","(","5.0","*","mq",".","r","-","5.0","*","0.75",")",";","return","lY","(","mq",")",";","}","vec4","mr","(","vec4","ms",")","{","ms",".","rb","=","ms",".","rb","*","abs","(","5.0","*","ms",".","rb","-","5.0","*","0.75",")",";","return","lY","(","ms",")",";","}","vec2","mA","(","sampler2D","mt",",","vec2","mu",",","vec2","mv",",","out","vec2","mw",")","{","vec4","mx","=","vec4","(","mu",",","-","1.0",",","1.0",")",";","vec3","my","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","mz","=","0",";","mz","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","mz","++",")","{","if","(","mx",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","mx",".","w",">","0.9",")","{","mx",".","xyz","+=","my","*","vec3","(","mv",",","1.0",")",";","mw","=","texture2D","(","mt",",","mx",".","xy",",","0.0",")",".","rg",";","mx",".","w","=","dot","(","mw",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","mx",".","zw",";","}","vec2","mI","(","sampler2D","mB",",","vec2","mC",",","vec2","mD",",","out","vec2","mE",")","{","vec4","mF","=","vec4","(","mC",",","-","1.0",",","1.0",")",";","mF",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","mG","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","mH","=","0",";","mH","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","mH","++",")","{","if","(","mF",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","mF",".","w",">","0.9",")","{","mF",".","xyz","=","mG","*","vec3","(","mD",",","1.0",")","+","mF",".","xyz",";","mE","=","texture2D","(","mB",",","mF",".","xy",",","0.0",")",".","rg",";","mE","=","mr","(","mE",")",";","mF",".","w","=","dot","(","mE",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","mF",".","zw",";","}","vec2","mO","(","sampler2D","mJ",",","vec2","mK",",","vec2","mL",",","float","mM",")","{","vec2","mN","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","mL","+","mK",";","mN","=","SMAA_AREATEX_PIXEL_SIZE","*","mN","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","mN",".","x","+=","0.5",";","mN",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","mM",";","return","texture2D","(","mJ",",","mN",",","0.0",")",".","rg",";","}","vec2","nc","(","sampler2D","mP",",","sampler2D","mQ",",","vec2","mR",",","vec2","mS",",","vec4","mT",")","{","vec2","mU","=","vec2","(","0.0",",","0.0",")",";","vec4","mV",";","vec2","mW",";","if","(","mS",".","r",">","0.0",")","{","mV",".","xz","=","mA","(","mP",",","mR",",","vec2","(","-","1.0",",","1.0",")",",","mW",")",";","mV",".","x","+=","float","(","mW",".","y",">","0.9",")",";","}","else","mV",".","xz","=","vec2","(","0.0",",","0.0",")",";","mV",".","yw","=","mA","(","mP",",","mR",",","vec2","(","1.0",",","-","1.0",")",",","mW",")",";","if","(","mV",".","x","+","mV",".","y",">","2.0",")","{","vec4","mX","=","vec4","(","-","mV",".","x","+","0.25",",","mV",".","x",",","mV",".","y",",","-","mV",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","mR",".","xyxy",";","vec4","mY",";","mY",".","xy","=","texture2D","(","mP",",","mX",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","mY",".","zw","=","texture2D","(","mP",",","mX",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","mY",".","yxwz","=","mr","(","mY",".","xyzw",")",";","vec2","mZ","=","vec2","(","2.0",",","2.0",")","*","mY",".","xz","+","mY",".","yw",";","lT","(","bvec2","(","step","(","0.9",",","mV",".","zw",")",")",",","mZ",",","vec2","(","0.0",",","0.0",")",")",";","mU","+=","mO","(","mQ",",","mV",".","xy",",","mZ",",","mT",".","z",")",";","}","mV",".","xz","=","mI","(","mP",",","mR",",","vec2","(","-","1",",","-","1",")",",","mW",")",";","if","(","texture2D","(","mP",",","mR","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","mV",".","yw","=","mI","(","mP",",","mR",",","vec2","(","1",",","1",")",",","mW",")",";","mV",".","y","+=","float","(","mW",".","y",">","0.9",")",";","}","else","mV",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","mV",".","x","+","mV",".","y",">","2.0",")","{","vec4","m_","=","vec4","(","-","mV",".","x",",","-","mV",".","x",",","mV",".","y",",","mV",".","y",")","*","u_texel_size",".","xyxy","+","mR",".","xyxy",";","vec4","na",";","na",".","x","=","texture2D","(","mP",",","m_",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","na",".","y","=","texture2D","(","mP",",","m_",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","na",".","zw","=","texture2D","(","mP",",","m_",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","nb","=","vec2","(","2.0",",","2.0",")","*","na",".","xz","+","na",".","yw",";","lT","(","bvec2","(","step","(","0.9",",","mV",".","zw",")",")",",","nb",",","vec2","(","0",",","0",")",")",";","mU","+=","mO","(","mQ",",","mV",".","xy",",","nb",",","mT",".","w",")",".","gr",";","}","return","mU",";","}"]}]}}]},{type:"textline",tokens:["float","ni","(","sampler2D","nd",",","vec2","ne",",","float","nf",")","{","vec2","ng","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","nh","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","nf",",","1.0",")",";","ng","+=","vec2","(","-","1.0",",","1.0",")",";","nh","+=","vec2","(","0.5",",","-","0.5",")",";","ng","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","nh","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","nd",",","ng","*","ne","+","nh",",","0.0",")",".","r",";","}","float","nq","(","sampler2D","nj",",","sampler2D","nk",",","vec2","nl",",","float","nm",")","{","vec2","nn","=","vec2","(","0.0",",","1.0",")",";","for","(","int","no","=","0",";","no","<","SMAA_MAX_SEARCH_STEPS",";","no","++",")","{","if","(","nl",".","x",">","nm","&&","nn",".","g",">","0.8281","&&","nn",".","r","==","0.0",")","{","nn","=","texture2D","(","nj",",","nl",",","0.0",")",".","rg",";","nl","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","nl",";","}","}","float","np","=","-","(","255.0","/","127.0",")","*","ni","(","nk",",","nn",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","np","+","nl",".","x",";","}","float","ny","(","sampler2D","nr",",","sampler2D","ns",",","vec2","nt",",","float","nu",")","{","vec2","nv","=","vec2","(","0.0",",","1.0",")",";","for","(","int","nw","=","0",";","nw","<","SMAA_MAX_SEARCH_STEPS",";","nw","++",")","{","if","(","nt",".","x","<","nu","&&","nv",".","g",">","0.8281","&&","nv",".","r","==","0.0",")","{","nv","=","texture2D","(","nr",",","nt",",","0.0",")",".","rg",";","nt","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","nt",";","}","}","float","nx","=","-","(","255.0","/","127.0",")","*","ni","(","ns",",","nv",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","nx","+","nt",".","x",";","}","float","nG","(","sampler2D","nz",",","sampler2D","nA",",","vec2","nB",",","float","nC",")","{","vec2","nD","=","vec2","(","1.0",",","0.0",")",";","for","(","int","nE","=","0",";","nE","<","SMAA_MAX_SEARCH_STEPS",";","nE","++",")","{","if","(","nB",".","y",">","nC","&&","nD",".","r",">","0.8281","&&","nD",".","g","==","0.0",")","{","nD","=","texture2D","(","nz",",","nB",",","0.0",")",".","rg",";","nB","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","nB",";","}","}","float","nF","=","-","(","255.0","/","127.0",")","*","ni","(","nA",",","nD",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","nF","+","nB",".","y",";","}","float","nO","(","sampler2D","nH",",","sampler2D","nI",",","vec2","nJ",",","float","nK",")","{","vec2","nL","=","vec2","(","1.0",",","0.0",")",";","for","(","int","nM","=","0",";","nM","<","SMAA_MAX_SEARCH_STEPS",";","nM","++",")","{","if","(","nJ",".","y","<","nK","&&","nL",".","r",">","0.8281","&&","nL",".","g","==","0.0",")","{","nL","=","texture2D","(","nH",",","nJ",",","0.0",")",".","rg",";","nJ","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","nJ",";","}","}","float","nN","=","-","(","255.0","/","127.0",")","*","ni","(","nI",",","nL",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","nN","+","nJ",".","y",";","}","vec2","nV","(","sampler2D","nP",",","vec2","nQ",",","float","nR",",","float","nS",",","float","nT",")","{","vec2","nU","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","lY","(","4.0","*","vec2","(","nR",",","nS",")",")","+","nQ",";","nU","=","SMAA_AREATEX_PIXEL_SIZE","*","nU","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","nU",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","nT","+","nU",".","y",";","return","texture2D","(","nP",",","nU",",","0.0",")",".","rg",";","}","void","oc","(","sampler2D","nW",",","inout","vec2","nX",",","vec4","nY",",","vec2","nZ",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","n_","=","step","(","nZ",".","xy",",","nZ",".","yx",")",";","vec2","oa","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","n_",";","oa","/=","n_",".","x","+","n_",".","y",";","vec2","ob","=","vec2","(","1.0",",","1.0",")",";","ob",".","x","-=","oa",".","x","*","texture2D","(","nW",",","nY",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","ob",".","x","-=","oa",".","y","*","texture2D","(","nW",",","nY",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","ob",".","y","-=","oa",".","x","*","texture2D","(","nW",",","nY",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","ob",".","y","-=","oa",".","y","*","texture2D","(","nW",",","nY",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","nX","*=","clamp","(","ob",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","ok","(","sampler2D","od",",","inout","vec2","oe",",","vec4","of",",","vec2","og",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oh","=","step","(","og",".","xy",",","og",".","yx",")",";","vec2","oi","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","oh",";","oi","/=","oh",".","x","+","oh",".","y",";","vec2","oj","=","vec2","(","1.0",",","1.0",")",";","oj",".","x","-=","oi",".","x","*","texture2D","(","od",",","of",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","oj",".","x","-=","oi",".","y","*","texture2D","(","od",",","of",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","oj",".","y","-=","oi",".","x","*","texture2D","(","od",",","of",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","oj",".","y","-=","oi",".","y","*","texture2D","(","od",",","of",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","oe","*=","clamp","(","oj",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oD","(","vec2","ol",",","vec2","om",",","sampler2D","on",",","sampler2D","oo",",","sampler2D","op",",","vec4","oq",")","{","vec4","or","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","os","=","texture2D","(","on",",","ol",")",".","rg",";","if","(","os",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["or",".","rg","=","nc","(","on",",","oo",",","ol",",","os",",","oq",")",";","if","(","or",".","r","==","-","or",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","ot",";","vec3","ou",";","ou",".","x","=","nq","(","on",",","op",",","lA",".","xy",",","lC",".","x",")",";","ou",".","y","=","lB",".","y",";","ot",".","x","=","ou",".","x",";","float","ov","=","texture2D","(","on",",","ou",".","xy",",","0.0",")",".","r",";","ou",".","z","=","ny","(","on",",","op",",","lA",".","zw",",","lC",".","y",")",";","ot",".","y","=","ou",".","z",";","ot","=","abs","(","lY","(","ot","/","u_texel_size",".","xx","-","om",".","xx",")",")",";","vec2","ow","=","sqrt","(","ot",")",";","float","ox","=","texture2D","(","on",",","ou",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","or",".","rg","=","nV","(","oo",",","ow",",","ov",",","ox",",","oq",".","y",")",";","ou",".","y","=","ol",".","y",";","oc","(","on",",","or",".","rg",",","ou",".","xyzy",",","ot",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","os",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","os",".","r",">","0.0",")","{","vec2","oy",";","vec3","oz",";","oz",".","y","=","nG","(","on",",","op",",","lB",".","xy",",","lC",".","z",")",";","oz",".","x","=","lA",".","x",";","oy",".","x","=","oz",".","y",";","float","oA","=","texture2D","(","on",",","oz",".","xy",",","0.0",")",".","g",";","oz",".","z","=","nO","(","on",",","op",",","lB",".","zw",",","lC",".","w",")",";","oy",".","y","=","oz",".","z",";","oy","=","abs","(","lY","(","oy","/","u_texel_size",".","yy","-","om",".","yy",")",")",";","vec2","oB","=","sqrt","(","oy",")",";","float","oC","=","texture2D","(","on",",","oz",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","or",".","ba","=","nV","(","oo",",","oB",",","oA",",","oC",",","oq",".","x",")",";","oz",".","x","=","ol",".","x",";","ok","(","on",",","or",".","ba",",","oz",".","xyxz",",","oy",")",";","}","return","or",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oU","(","vec2","oE",",","sampler2D","oF",",","sampler2D","oG"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","oH"]}]}}]},{type:"textline",tokens:[")","{","vec4","oI",";","oI",".","x","=","texture2D","(","oG",",","lz",".","xy",")",".","a",";","oI",".","y","=","texture2D","(","oG",",","lz",".","zw",")",".","g",";","oI",".","wz","=","texture2D","(","oG",",","oE",")",".","xz",";","if","(","dot","(","oI",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","oJ","=","texture2D","(","oF",",","oE",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oK","=","texture2D","(","oH",",","a",")",";","vec2","oL","=","2.0","*","cv","(","oK",")","-","1.0",";","oJ",".","a","=","sqrt","(","2.0","*","length","(","oL",")",")",";"]}]}}]},{type:"textline",tokens:["return","oJ",";","}","else","{","bool","oM","=","max","(","oI",".","x",",","oI",".","z",")",">","max","(","oI",".","y",",","oI",".","w",")",";","vec4","oN","=","vec4","(","0.0",",","oI",".","y",",","0.0",",","oI",".","w",")",";","vec2","oO","=","oI",".","yw",";","lT","(","bvec4","(","oM",",","oM",",","oM",",","oM",")",",","oN",",","vec4","(","oI",".","x",",","0.0",",","oI",".","z",",","0.0",")",")",";","lT","(","bvec2","(","oM",",","oM",")",",","oO",",","oI",".","xz",")",";","oO","/=","dot","(","oO",",","vec2","(","1.0",",","1.0",")",")",";","vec4","oP","=","oN","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","oE",".","xyxy",";","vec4","oQ","=","oO",".","x","*","texture2D","(","oF",",","oP",".","xy",",","0.0",")",";","oQ","+=","oO",".","y","*","texture2D","(","oF",",","oP",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oR","=","texture2D","(","oH",",","oP",".","xy",")",";","vec2","oS","=","2.0","*","cv","(","oR",")","-","1.0",";","vec2","oT","=","oO",".","x","*","oS",";","oR","=","texture2D","(","oH",",","oP",".","zw",")",";","oS","=","2.0","*","cv","(","oR",")","-","1.0",";","oT","+=","oO",".","y","*","oS",";","oQ",".","a","=","sqrt","(","2.0","*","length","(","oT",")",")",";"]}]}}]},{type:"textline",tokens:["return","oQ",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pf","(","vec2","oV",",","sampler2D","oW",",","sampler2D","oX"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","oY"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oZ","=","texture2D","(","oY",",","a",")",";","vec2","o_",";","o_","=","2.0","*","cv","(","oZ",")","-","1.0",";","vec4","pa","=","texture2D","(","oW",",","oV",")",";","vec4","pb","=","texture2D","(","oX",",","oV","-","o_",")",";","float","pc","=","abs","(","pa",".","a","*","pa",".","a","-","pb",".","a","*","pb",".","a",")","/","2.0",";","float","pd","=","0.5","*","clamp","(","1.0","-","sqrt","(","pc",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","pe","=","mix","(","pa",",","pb",",","pd",")",";","pe",".","a","=","1.0",";","return","pe",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","pa","=","texture2D","(","oW",",","oV",")",";","vec4","pb","=","texture2D","(","oX",",","oV",")",";","return","mix","(","pa",",","pb",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pg","=","vec4","(","mp","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pg","=","oD","(","a",",","lD",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pg","=","oU","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pg","=","vec4","(","pf","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","pg","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","pg",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lA",";","varying","vec4","lB",";","varying","vec4","lC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","lD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","jB","(","vec2","jA",")","{","lA","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","jA",".","xyxy",";","lB","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","jA",".","xyxy",";","lC","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","jA",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","jE","(","vec2","jC",",","out","vec2","jD",")","{","jD","=","jC","/","u_texel_size",";","lA","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","jC",".","xyxy",";","lB","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","jC",".","xyxy",";","lC","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","lA",".","xz",",","lB",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","jG","(","vec2","jF",")","{","lz","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","jF",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["jB","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["jE","(","a",",","lD",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["jG","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"define",name:"SSAO_QUALITY_16",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["2"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","float","u_view_max_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_dithering_amount",";","uniform","float","u_ssao_gauss_center",";","uniform","float","u_ssao_gauss_width_square",";","uniform","float","u_ssao_gauss_width_left_square",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","vec2","lJ","(","vec2","lE",")","{","float","lF","=","dot","(","lE",",","vec2","(","12.9898",",","78.233",")",")",";","float","lG","=","dot","(","lE",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","lH","=","fract","(","sin","(","lF",")","*","43758.5453",")","*","2.0","-","1.0",";","float","lI","=","fract","(","sin","(","lG",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","lH",",","lI",")",";","}","float","lL","(","in","vec2","lK",")","{","return","lu","(","u_depth",",","lK",",","u_camera_range",")",";","}","float","lT","(","in","float","lM",",","in","float","lN",",","inout","int","lO",")","{","float","lP","=","u_ssao_gauss_width_square",";","float","lQ","=","(","lM","-","lN",")","*","100.0",";","if","(","lQ","<","u_ssao_gauss_center",")","lP","=","u_ssao_gauss_width_left_square",";","else","lO","=","1",";","float","lR","=","lQ","-","u_ssao_gauss_center",";","float","lS","=","exp","(","-","2.0","*","lR","*","lR","/","lP",")",";","return","lS",";","}","float","mb","(","float","lU",",","vec2","lV",")","{","float","lW","=","0.0",";","float","lX","=","0.0",";","float","lY","=","max","(","1.0",",","u_view_max_depth","/","100.0",")",";","lU","*=","lY",";","lV","/=","lU",";","vec2","lZ","=","a","+","lV",";","vec2","l_","=","a","-","lV",";","int","ma","=","0",";","lW","=","lT","(","lU",",","lY","*","lL","(","lZ",")",",","ma",")",";","if","(","ma",">","0","||","lZ",".","y","<","0.0","||","lZ",".","y",">","1.0","||","lZ",".","x","<","0.0","||","lZ",".","x",">","1.0",")","{","lX","=","lT","(","lY","*","lL","(","l_",")",",","lU",",","ma",")",";","lW","+=","(","1.0","-","lW",")","*","lX",";","}","return","lW",";","}","void","main","(",")","{","vec2","mc","=","lJ","(","a",")","*","u_ssao_dithering_amount",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["mc","*=","1.5",";"]}]}}]},{type:"textline",tokens:["float","md","=","lL","(","a",")",";","float","me","=","0.0",";","vec2","mf","=","u_texel_size","*","0.5",";","for","(","int","mg","=","0",";","mg","<","4",";","mg","++",")","{"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","mg","==","0","||","mg","==","2",")","{"]}]}}]},{type:"textline",tokens:["me","+=","mb","(","md",",","mf",")",";","me","+=","mb","(","md",",","vec2","(","mf",".","x",",","-","mf",".","y",")",")",";","me","+=","mb","(","md",",","vec2","(","-","mf",".","x",",","mf",".","y",")",")",";","me","+=","mb","(","md",",","vec2","(","-","mf",".","x",",","-","mf",".","y",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","if","(","mg","==","1","||","mg","==","3",")","{"]}]}}]},{type:"textline",tokens:["me","+=","mb","(","md",",","vec2","(","mf",".","x","*","1.2",",","0.0",")",")",";","me","+=","mb","(","md",",","vec2","(","-","mf",".","x","*","1.2",",","0.0",")",")",";","me","+=","mb","(","md",",","vec2","(","0.0",",","mf",".","y","*","1.2",")",")",";","me","+=","mb","(","md",",","vec2","(","0.0",",","-","mf",".","y","*","1.2",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["mf","+=","mc",";","mf","*=","u_ssao_radius_increase",";","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","1.0","-","me","/","16.0",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","1.0","-","me","/","32.0",";"]}]}}]},{type:"textline",tokens:["float","mh","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","md",")",";","me","=","(","1.0","-","mh",")","+","me","*","mh",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","1.0",";"]}]}}]},{type:"textline",tokens:["float","mi","=","texture2D","(","u_color",",","a",")",".","r",";","gl_FragColor","=","vec4","(","mi",",","me",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","jA","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","jB","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","jA","-","1.0",",","1.0",")",";","vec4","jC","=","u_view_proj_inverse","*","jB",";","vec4","jD","=","jC","/","jC",".","w",";","vec4","jE","=","u_view_proj_prev","*","jD",";","jE","/=","jE",".","w",";","vec2","jF","=","(","jB",".","xy","-","jE",".","xy",")","/","4.0","+","0.5",";","jF","=","clamp","(","jF",",","0.0",",","1.0",")",";","gl_FragColor","=","cj","(","jF",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","b","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","e","(","float","c",",","float","d",")","{","return","abs","(","c","-","d",")","<","EPSILON",";","}","bool","h","(","vec3","f",",","vec3","g",")","{","return","any","(","lessThan","(","abs","(","f","-","g",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","k","(","in","vec4","i",",","in","vec3","j",")","{","return","j","+","2.0","*","cross","(","i",".","xyz",",","cross","(","i",".","xyz",",","j",")","+","i",".","w","*","j",")",";","}","mat4","l","(",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","n","(","float","m",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","cos","(","m",")",",","sin","(","m",")",",","0.0",",","0.0",",","-","sin","(","m",")",",","cos","(","m",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","p","(","float","o",")","{","return","mat4","(","cos","(","o",")",",","0.0",",","-","sin","(","o",")",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","sin","(","o",")",",","0.0",",","cos","(","o",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","r","(","float","q",")","{","return","mat4","(","cos","(","q",")",",","sin","(","q",")",",","0.0",",","0.0",",","-","sin","(","q",")",",","cos","(","q",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","b","t","(","in","b","s",")","{","return","b","(","s",".","a",",","s",".","b",",","normalize","(","s",".","c",")",",","normalize","(","s",".","d",")",",","normalize","(","s",".","e",")",",","s",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","u","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","A","(","vec3","v",",","mat4","w",")","{","vec3","x","=","vec3","(","w","[","0","]","[","0","]",",","w","[","1","]","[","0","]",",","w","[","2","]","[","0","]",")",";","vec3","y","=","vec3","(","w","[","0","]","[","1","]",",","w","[","1","]","[","1","]",",","w","[","2","]","[","1","]",")",";","vec3","z","=","vec3","(","w","[","0","]","[","2","]",",","w","[","1","]","[","2","]",",","w","[","2","]","[","2","]",")",";","y","=","cross","(","z",",","x",")",";","return","mat4","(","vec4","(","x",",","0.0",")",",","vec4","(","y",",","0.0",")",",","vec4","(","z",",","0.0",")",",","vec4","(","v",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","G","(","vec3","B",",","vec3","C",")","{","vec3","D","=","B","-","C",";","D",".","y","=","0.0",";","D","=","normalize","(","D",")",";","vec3","E","=","normalize","(","cross","(","u",",","D",")",")",";","vec3","F","=","normalize","(","cross","(","D",",","E",")",")",";","return","mat4","(","vec4","(","E",",","0.0",")",",","vec4","(","F",",","0.0",")",",","vec4","(","D",",","0.0",")",",","vec4","(","C",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","R","(","in","vec3","H",",","float","I",",","float","J",",","float","L",",","vec3","M",")","{","float","N","=","fract","(","length","(","M",")","/","0.17",")",";","float","O","=","L","+","N","/","10.0",";","float","P","=","N",";","if","(","L","!=","0.0",")","P","/=","L",";","H","*=","1.0","+","0.5","*","sin","(","I",")",";","float","Q","=","length","(","H",")","*","J","*","sin","(","2.0","*","3.14","*","I","*","O","+","P",")",";","return","r","(","Q",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ab","(","in","vec3","S",",","in","vec3","T",",","in","mat4","U",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","V","=","A","(","T",",","U",")",";"]}]}},{type:"elif",expression:["HAIR_BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","W","=","fract","(","(","T",".","x","*","1.43","+","T",".","y","*","0.123","+","T",".","z","*","6.1",")",")",";","float","X","=","2.0","*","M_PI","*","W",";","vec3","Y","=","normalize","(","vec3","(","U","[","0","]","[","2","]",",","0.0",",","U","[","2","]","[","2","]",")",")",";","float","Z","=","acos","(","Y","[","2","]",")",";","if","(","Y","[","0","]","<","0.0",")","Z","=","2.0","*","M_PI","-","Z",";","float","_","=","Z","-","X",";","if","(","_","<","0.0",")","_","=","2.0","*","M_PI","+","_",";","float","aa","=","X",";","if","(","_","<=","MAX_BILLBOARD_ANGLE",")","aa","+=","_",";","else","if","(","_","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","aa","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","_","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","_","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","aa","+=","_","-","M_PI",";","else","if","(","_","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","aa","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","_","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","aa","+=","_","-","2.0","*","M_PI",";","mat4","V","=","p","(","aa",")",";","V","[","3","]","=","vec4","(","T",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","V","=","G","(","S",",","T",")",";"]}]}}]},{type:"textline",tokens:["return","V",";","}","b","ai","(","in","vec3","ac",",","in","vec3","ad",",","in","vec3","ae",",","in","vec3","af",",","in","vec3","ag",",","in","mat4","ah",")","{","ac","=","(","ah","*","vec4","(","ac",",","1.0",")",")",".","xyz",";","ad","=","(","ah","*","vec4","(","ad",",","1.0",")",")",".","xyz",";","ae","=","(","ah","*","vec4","(","ae",",","0.0",")",")",".","xyz",";","af","=","(","ah","*","vec4","(","af",",","0.0",")",")",".","xyz",";","ag","=","(","ah","*","vec4","(","ag",",","0.0",")",")",".","xyz",";","return","t","(","b","(","ac",",","ad",",","ae",",","af",",","ag",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","al","(","vec2","aj",",","vec3","ak",")","{","return","(","aj","+","0.5",")","*","ak",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","au","(","in","vec4","am",",","in","vec4","an",",","in","float","ao",")","{","float","ap","=","am","[","0","]","*","an","[","0","]","+","am","[","1","]","*","an","[","1","]","+","am","[","2","]","*","an","[","2","]","+","am","[","3","]","*","an","[","3","]",";","if","(","ap","<","0.0",")","{","an","*=","-","1.0",";","ap","=","-","ap",";","}","if","(","abs","(","ap",")",">=","1.0",")","return","am",";","float","aq","=","acos","(","ap",")",";","float","ar","=","sqrt","(","1.0","-","ap","*","ap",")",";","if","(","abs","(","ar",")","<","0.001",")","return","vec4","(","am","*","0.5","+","an","*","0.5",")",";","float","as","=","sin","(","(","1.0","-","ao",")","*","aq",")","/","ar",";","float","at","=","sin","(","ao","*","aq",")","/","ar",";","return","am","*","as","+","an","*","at",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aJ","(","in","vec3","av",",","in","vec4","aw",",","in","vec4","ax",",","in","vec4","ay",",","in","vec4","az",",","in","float","aA",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aB","=","au","(","aw",",","ax",",","aA",")",";","vec4","aC","=","mix","(","ay",",","az",",","aA",")",";","vec3","aD","=","k","(","aB",",","av",")",";","vec3","aE","=","aD","*","aC",".","w","+","aC",".","xyz",";","return","aE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aF","=","k","(","aw",",","av",")",";","vec3","aG","=","k","(","ax",",","av",")",";","vec3","aH","=","aF","*","ay",".","w","+","ay",".","xyz",";","vec3","aI","=","aG","*","az",".","w","+","az",".","xyz",";","return","mix","(","aH",",","aI",",","aA",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aS","(","in","vec3","aK",",","in","vec4","aL",",","in","vec4","aM",",","in","float","aN",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aO","=","au","(","aL",",","aM",",","aN",")",";","vec3","aP","=","k","(","aO",",","aK",")",";","return","aP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aQ","=","k","(","aL",",","aK",")",";","vec3","aR","=","k","(","aM",",","aK",")",";","return","mix","(","aQ",",","aR",",","aN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aJ","(","in","vec3","aT",",","in","vec4","aU",",","in","vec4","aV",")","{","vec3","aW","=","k","(","aU",",","aT",")",";","vec3","aX","=","aW","*","aV",".","w","+","aV",".","xyz",";","return","aX",";","}","vec3","aS","(","in","vec3","aY",",","in","vec4","aZ",")","{","vec3","a_","=","k","(","aZ",",","aY",")",";","return","a_",";","}"]}]}}]},{type:"textline",tokens:["void","bn","(","inout","vec3","ba",",","inout","vec3","bb",",","inout","vec3","bc",",","inout","vec3","bd",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","be","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bg","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bh","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bi","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","bj","=","0",";","bj","<","4",";","bj","++",")","{","int","bk","=","int","(","a_influence","[","bj","]",")",";","float","bl","=","fract","(","a_influence","[","bj","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bf","+=","bl","*","aJ","(","ba",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","u_transb","[","bk","]",",","u_transa","[","bk","]",",","be",")",";","bg","+=","bl","*","aS","(","bb",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";","bh","+=","bl","*","aS","(","bc",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";","bi","+=","bl","*","aS","(","bd",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bf","+=","bl","*","aJ","(","ba",",","u_quatsb","[","bk","]",",","u_transb","[","bk","]",")",";","bg","+=","bl","*","aS","(","bb",",","u_quatsb","[","bk","]",")",";","bh","+=","bl","*","aS","(","bc",",","u_quatsb","[","bk","]",")",";","bi","+=","bl","*","aS","(","bd",",","u_quatsb","[","bk","]",")",";"]}]}}]},{type:"textline",tokens:["}","ba","=","bf",";","bb","=","bg",";","bc","=","bh",";","bd","=","bi",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bm","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bm",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["ba","=","aJ","(","ba",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","u_transb","[","bm","]",",","u_transa","[","bm","]",",","be",")",";","bb","=","aS","(","bb",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";","bc","=","aS","(","bc",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";","bd","=","aS","(","bd",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ba","=","aJ","(","ba",",","u_quatsb","[","bm","]",",","u_transb","[","bm","]",")",";","bb","=","aS","(","bb",",","u_quatsb","[","bm","]",")",";","bc","=","aS","(","bc",",","u_quatsb","[","bm","]",")",";","bd","=","aS","(","bd",",","u_quatsb","[","bm","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bB","(","inout","vec3","bo",",","in","vec3","bp",",","in","float","bq",",","in","float","br",",","in","float","bs",",","in","vec3","bt",",","in","float","bu",")","{","float","bv","=","length","(","bp",")",";","float","bw","=","br","*","(","1.0","+","0.1","*","fract","(","bv",")",")",";","float","bx","=","bq","*","bu","*","(","1.0","+","sin","(","2.0","*","3.14","*","bs","*","bw","+","bv",")",")",";","float","by","=","(","bo",".","y","-","bp",".","y",")","*","abs","(","bx",")",";","by","+=","1.0",";","by","*=","by",";","by","=","by","*","by","-","by",";","vec3","bz","=","bo",";","bz",".","xz","+=","bt",".","xz","*","by","*","sign","(","bx",")",";","float","bA","=","length","(","bo","-","bp",")",";","bo","=","bp","+","normalize","(","bz","-","bp",")","*","bA",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bD","(","vec4","bC",")","{","return","bC","*","bC","*","(","3.0","-","2.0","*","bC",")",";","}","vec4","bF","(","vec4","bE",")","{","return","abs","(","fract","(","bE","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bH","(","vec4","bG",")","{","return","bD","(","bF","(","bG",")",")",";","}","void","bY","(","inout","vec3","bI",",","in","float","bJ",",","in","vec3","bK",",","in","vec3","bL",",","in","vec3","bM",",","in","float","bN",",","in","float","bO",",","in","float","bP",",","in","vec3","bQ",")","{","float","bR",";","float","bS",";","float","bT",";","vec2","bU",";","vec4","bV",";","vec2","bW",";","vec3","bX",";","bR","=","dot","(","bM",",","vec3","(","1.0",")",")",";","bS","=","bR","+","bQ",".","g",";","bT","=","dot","(","bI",",","vec3","(","bQ",".","g",")",")",";","bU","=","(","bJ","+","vec2","(","bT",",","bS",")",")",";","bV","=","(","(","fract","(","(","bU",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bL",")","*","bN",";","bV","=","bH","(","bV",")",";","bW","=","bV",".","xz","+","bV",".","yw",";","bW",".","y","=","0.5","-","bW",".","y",";","bX","=","bW",".","xyx","*","bQ",".","rbr","*","vec3","(","bO","*","bK",".","x",",","bP",",","bO","*","bK",".","z",")",";","bI","+=","bX",";","}"]}]}}]},{type:"textline",tokens:["void","ce","(","inout","vec3","bZ",",","inout","vec3","b_",",","in","vec3","ca",")","{","vec3","cb","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","b_",";","vec3","cd","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","bZ",";","vec3","cd","=","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bY","(","cc",",","u_time",",","ca",",","cb",",","cd",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bZ","+=","cc","-","b_",";","b_","=","cc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bZ","=","cc",";","b_","=","cd",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_SRC_RGBA_PCF",tokens:["3"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["4"]},{type:"define",name:"SHADOW_SRC_VSM",tokens:["5"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["6"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["3"]},{type:"define",name:"SHADOW_DST_VSM",tokens:["4"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","cj","(","const","in","float","cf",")","{","const","vec4","cg","=","vec4","(","255.0","*","255.0","*","255.0",",","255.0","*","255.0",",","255.0",",","1.0",")",";","const","vec4","ch","=","vec4","(","0.0",",","1.0","/","255.0",",","1.0","/","255.0",",","1.0","/","255.0",")",";","vec4","ci","=","fract","(","cf","*","cg",")",";","ci","-=","ci",".","xxyz","*","ch",";","return","ci",";","}","float","cn","(","const","in","vec4","ck",")","{","float","cl",";","const","vec4","cm","=","vec4","(","1.0","/","(","255.0","*","255.0","*","255.0",")",",","1.0","/","(","255.0","*","255.0",")",",","1.0","/","255.0",",","1.0",")",";","cl","=","dot","(","ck",",","cm",")",";","return","cl",";","}","vec4","cj","(","const","in","vec2","co",")","{","const","vec2","cp","=","vec2","(","255.0",",","1.0",")",";","const","vec2","cq","=","vec2","(","0.0",",","1.0","/","255.0",")",";","vec4","cr","=","fract","(","co",".","xxyy","*","cp",".","xyxy",")",";","cr","-=","cr",".","xxzz","*","cq",".","xyxy",";","if","(","co",".","r","==","1.0",")","cr",".","rg","=","vec2","(","0.0",",","1.0",")",";","if","(","co",".","g","==","1.0",")","cr",".","ba","=","vec2","(","0.0",",","1.0",")",";","return","cr",";","}","vec2","cv","(","const","in","vec4","cs",")","{","vec2","ct",";","const","vec2","cu","=","vec2","(","1.0","/","255.0",",","1.0",")",";","ct",".","r","=","dot","(","cs",".","rg",",","cu",")",";","ct",".","g","=","dot","(","cs",".","ba",",","cu",")",";","return","ct",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_SECTION_DIST0",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST1",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST2",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST3",tokens:["0.0"]},{type:"var",name:"PCF_TEXEL_SIZE",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["float","cK","(","sampler2D","cE",",","vec3","cF",",","float","cG",",","float","cH",")","{","vec2","cI","=","cF",".","xy","+","vec2","(","cG",",","cH",")","*","PCF_TEXEL_SIZE",";","vec4","cJ","=","texture2D","(","cE",",","cI",")",";","return","cn","(","cJ",")",";","}"]}]}}]},{type:"textline",tokens:["float","cZ","(","vec3","cL",",","sampler2D","cM",",","float","cN",")","{","float","cO",";","cL",".","z","=","clamp","(","cL",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cP","=","texture2D","(","cM",",","cL",".","xy",")",";","float","cQ","=","cn","(","cP",")",";","if","(","all","(","lessThan","(","cL",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cL",".","xy",",","vec2","(","0.0",")",")",")","&&","cQ","<","cL",".","z",")","{","float","cR","=","cL",".","z","-","cQ",";","cO","=","exp","(","-","cR","*","cN",")",";","}","else","cO","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cQ",";","cQ",".","r","=","cK","(","cM",",","cL",",","0.5",",","0.5",")",";","cQ",".","g","=","cK","(","cM",",","cL",",","0.5",",","-","0.5",")",";","cQ",".","b","=","cK","(","cM",",","cL",",","-","0.5",",","-","0.5",")",";","cQ",".","a","=","cK","(","cM",",","cL",",","-","0.5",",","0.5",")",";","vec4","cS","=","vec4","(","cL",".","z",",","cL",".","z",",","cL",".","z",",","cL",".","z",")",";","if","(","all","(","lessThan","(","cL",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cL",".","xy",",","vec2","(","0.0",")",")",")",")","cO","=","dot","(","vec4","(","greaterThanEqual","(","cQ",",","cS",")",")",",","vec4","(","0.25",",","0.25",",","0.25",",","0.25",")",")",";","else","cO","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cT","=","texture2D","(","cM",",","cL",".","xy",")",";","float","cU","=","cT",".","r",";","float","cV","=","cT",".","g",";","if","(","all","(","lessThan","(","cL",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cL",".","xy",",","vec2","(","0.0",")",")",")","&&","cU","<","cL",".","z",")","{","float","cW","=","cV","-","cU","*","cU",";","float","cX","=","cL",".","z","-","cU",";","cO","=","cW","/","(","cW","+","cX","*","cX",")",";","}","else","cO","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","cQ","=","texture2D","(","cM",",","cL",".","xy",")",".","r",";","if","(","all","(","lessThan","(","cL",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cL",".","xy",",","vec2","(","0.0",")",")",")","&&","cQ","<","cL",".","z",")","{","cO","=","0.0",";","float","cY","=","cL",".","z","-","cQ",";","cO","=","exp","(","-","cY","*","cN",")",";","}","else","cO","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","cO",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","de","(","float","c_",",","float","da",")","{","vec3","db",";","float","dc","=","1.0",";","float","dd","=","-","c_",";","if","(","dd","<","CSM_SECTION_DIST0",")","{","db","=","cx",".","xyz","/","cx",".","w",";","dc","=","cZ","(","db",",","u_shadow_map0",",","da",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","dd","<","CSM_SECTION_DIST1",")","{","db","=","cy",".","xyz","/","cy",".","w",";","dc","=","cZ","(","db",",","u_shadow_map1",",","da",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","dd","<","CSM_SECTION_DIST2",")","{","db","=","cz",".","xyz","/","cz",".","w",";","dc","=","cZ","(","db",",","u_shadow_map2",",","da",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","dd","<","CSM_SECTION_DIST3",")","{","db","=","cA",".","xyz","/","cA",".","w",";","dc","=","cZ","(","db",",","u_shadow_map3",",","da",")",";","}"]}]}}]},{type:"textline",tokens:["return","dc",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","dk","(","in","float","df",",","inout","vec3","dg",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","dh","=","texture2DProj","(","u_shadow_mask",",","cB",")",".","rg",";","vec3","di","=","vec3","(","dh",".","r",")",";","float","dj","=","dh",".","g",";","cD","=","vec4","(","di",",","dj",")",";","dg","*=","cD",".","a",";","return","cD",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","de","(","cC",".","z",",","df",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","dq","(","vec3","dl",",","float","dm",",","vec2","dn",")","{","vec2","dp","=","vec2","(","(","dl",".","x","-","dn",".","x",")","/","dm",",","-","(","dl",".","z","-","dn",".","y",")","/","dm",")",";","return","fract","(","dp",")",";","}","vec2","du","(","vec2","dr",",","float","ds",",","vec2","dt",")","{","return","vec2","(","dr",".","x","*","ds",",","-","dr",".","y","*","ds",")","+","dt",";","}","b","dv","(",")","{","return","b","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","b","ea","(","vec3","dw",",","vec3","dx",",","vec3","dy",",","vec3","dz",",","vec3","dA",",","sampler2D","dB",",","sampler2D","dC",",","vec3","dD",",","float","dE",",","vec3","dF",",","vec4","dG",",","mat4","dH",")","{","vec3","dI","=","k","(","dG",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","dJ","=","-","dI",".","x",";","float","dK","=","-","dI",".","z",";","vec2","dL","=","vec2","(","dF",".","x","+","dE","*","(","-","1.0","-","dJ",")","/","2.0",",","dF",".","z","+","dE","*","(","1.0","-","dK",")","/","2.0",")",";","vec2","dM","=","dq","(","dA",",","dE",",","dL",")",";","float","dN","=","dE","/","2.0",";","vec2","dO","=","abs","(","du","(","dM","-","vec2","(","0.5",")",",","dE",",","vec2","(","0.0",")",")",")",";","float","dP","=","dN","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","dO",")",">","dP",")","return","dv","(",")",";","float","dQ","=","dE","/","dD",".","z",";","vec2","dR","=","(","dM","-","vec2","(","0.5",")",")","*","dQ","+","vec2","(","0.5",")",";","vec3","dS","=","dI","*","(","dE","/","dD",".","z","-","1.0",")","/","2.0",";","dR",".","x","+=","dS",".","x",";","dR",".","y","-=","dS",".","z",";","vec4","dT","=","texture2D","(","dC",",","dR",")",";","float","dU","=","dT",".","r",";","if","(","dU","<","u_scale_threshold",")","return","dv","(",")",";","float","dV","=","dD",".","y","-","dD",".","x",";","float","dW","=","dD",".","y","-","texture2D","(","dB",",","dR",")",".","r","*","dV",";","vec2","dX","=","dw",".","xz","-","dA",".","xz",";","dA",".","xz","=","du","(","dM",",","dE",",","dL",")",";","dA",".","y","=","dW",";","dw",".","xz","=","dA",".","xz","+","dX",";","dw",".","y","*=","dU",";","dw",".","y","+=","dW",";","vec3","dY","=","dT",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["dw","-=","dA",";","mat4","dZ","=","ab","(","dF",",","dA",",","dH",")",";","b","d_","=","ai","(","dw",",","dA",",","dx",",","dy",",","dz",",","dZ",")",";","d_",".","b","=","dA",";","d_",".","f","=","dY",";","return","t","(","d_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","t","(","b","(","dw",",","dA",",","dx",",","dy",",","dz",",","dY",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["void","ec","(","vec3","eb",")","{","cx","=","u_b_light_matrix","*","u_p_light_matrix0","*","u_v_light_matrix","*","vec4","(","eb",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cy","=","u_b_light_matrix","*","u_p_light_matrix1","*","u_v_light_matrix","*","vec4","(","eb",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cz","=","u_b_light_matrix","*","u_p_light_matrix2","*","u_v_light_matrix","*","vec4","(","eb",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cA","=","u_b_light_matrix","*","u_p_light_matrix3","*","u_v_light_matrix","*","vec4","(","eb",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","ec","(","vec4","ed",")","{","float","ee","=","ed",".","x",";","float","ef","=","ed",".","y",";","float","eg","=","ed",".","w",";","cB",".","x","=","(","ee","+","eg",")","/","2.0",";","cB",".","y","=","(","ef","+","eg",")","/","2.0",";","cB",".","z","=","eg",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","ej","(","inout","vec3","ei",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ei","=","pow","(","ei",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","el","(","inout","vec3","ek",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","pow","(","ek",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","eo","(","inout","vec3","em",",","in","float","en",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["em","=","em","*","en",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","ew","(","inout","vec3","er",",","in","float","es",",","in","vec4","et",")","{","float","eu","=","et",".","w","*","es",";","float","ev","=","exp","(","-","eu","*","eu",")",";","ev","=","clamp","(","ev",",","0.0",",","1.0",")",";","er","=","mix","(","et",".","rgb",",","er",",","ev",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eD","(","in","mat4","ex",",","in","vec3","ey",")","{","vec3","ez","=","mix","(","ex","[","0","]",".","rgb",",","ex","[","1","]",".","rgb",",","max","(","sign","(","ey",".","x",")",",","0.0",")",")",";","vec3","eA","=","mix","(","ex","[","2","]",".","rgb",",","ex","[","3","]",".","rgb",",","max","(","sign","(","ey",".","z",")",",","0.0",")",")",";","vec3","eB","=","vec3","(","ex","[","0","]",".","a",",","ex","[","1","]",".","a",",","ex","[","2","]",".","a",")",";","vec3","eC","=","mix","(","ez",",","eA",",","abs","(","ey",".","z",")",")",";","eC","=","mix","(","eC",",","eB",",","abs","(","ey",".","y",")",")",";","return","eC",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eF","(","inout","float","eE",")","{","eE","-=","0.5",";","eE","=","4.0","*","(","eE","*","eE","*","eE",")","+","0.5",";","}","void","eW","(","inout","vec3","eG",",","in","float","eH",",","in","vec3","eI",",","in","float","eJ",",","in","vec4","eK",",","in","vec4","eL",",","in","float","eM",",","in","float","eN",")","{","float","eO","=","eL",".","w","*","eH",";","float","eP","=","exp","(","-","eO","*","eO",")",";","eP","=","clamp","(","eP",",","0.0",",","1.0",")",";","float","eQ","=","max","(","eI",".","y",",","0.0",")",";","eH","=","max","(","eH","-","max","(","eJ","/","eQ",",","0.0",")",",","0.0",")",";","float","eR","=","eK",".","w","*","eH",";","float","eS","=","1.0","-","eR",";","eS","=","clamp","(","eS",",","0.0",",","1.0",")",";","eS","+=","max","(","eM",",","0.0",")",";","eF","(","eS",")",";","if","(","eS","<","eP",")","{","vec3","eT","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","eU","=","eK",".","rgb",";","eJ","=","clamp","(","-","eJ","*","0.03",",","0.0",",","0.8",")",";","vec3","eV","=","mix","(","eU",",","eT",",","min","(","eQ",",","1.0",")",")",";","eV","=","mix","(","eV",",","vec3","(","0.0",")",",","eJ",")","*","eN",";","eG","=","mix","(","eV",",","eG",",","eS",")",";","}","if","(","eS",">=","eP",")","{","eG","=","mix","(","eL",".","rgb",",","eG",",","eP",")",";","}","}","void","fe","(","inout","vec3","eX",",","in","float","eY",",","in","float","eZ",",","in","vec4","e_",",","in","float","fa",")","{","float","fb","=","e_",".","w","*","eY",";","float","fc","=","1.0","-","fb",";","fc","=","clamp","(","fc",",","0.0",",","1.0",")",";","eF","(","fc",")",";","eZ","=","clamp","(","-","eZ","*","0.03",",","0.0",",","0.8",")",";","vec3","fd","=","mix","(","e_",".","rgb",",","vec3","(","0.0",")",",","eZ",")","*","fa",";","eX","=","mix","(","fd",",","eX",",","fc",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["struct","ff","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fn","(","vec3","fg",",","vec3","fh",",","vec3","fi",",","vec4","fj",",","float","fk",")","{","vec3","fl","=","normalize","(","fg","+","fh",")",";","float","fm","=","fj","[","0","]","*","max","(","dot","(","fi",",","fl",")",",","0.0",")","+","fj","[","1","]",";","return","pow","(","fm",",","fk",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","fy","(","vec3","fo",",","vec3","fp",",","vec3","fq",",","float","fr",")","{","vec3","fs","=","normalize","(","fo","+","fp",")",";","float","ft","=","max","(","dot","(","fq",",","fs",")",",","0.001",")",";","float","fu","=","max","(","dot","(","fq",",","fp",")",",","0.001",")",";","float","fv","=","max","(","dot","(","fq",",","fo",")",",","0.001",")",";","float","fw","=","tan","(","acos","(","ft",")",")",";","float","fx","=","max","(","fr",",","0.001",")",";","return","fv","*","(","1.0","/","(","4.0","*","M_PI","*","fx","*","fx",")",")","*","(","exp","(","-","(","fw","*","fw",")","/","(","fx","*","fx",")",")","/","(","sqrt","(","fu","*","fv",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","fG","(","vec3","fz",",","vec3","fA",",","vec3","fB",",","float","fC",",","float","fD",")","{","vec3","fE","=","normalize","(","fz","+","fA",")",";","float","fF","=","acos","(","dot","(","fE",",","fB",")",")",";","if","(","fF","<","fC",")","return","1.0",";","else","if","(","fF",">=","fC","+","fD","||","fD","==","0.0",")","return","0.0",";","else","return","1.0","-","(","fF","-","fC",")","/","fD",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","f_","(","float","fH",",","vec3","fI",",","vec3","fJ",",","vec3","fK",",","float","fL",",","inout","float","fM",")","{","if","(","fL",">","0.0",")","{","float","fN","=","max","(","dot","(","fI",",","fK",")",",","0.0",")",";","float","fO","=","fL","*","fL",";","float","fP","=","1.0","-","0.5","*","(","fO","/","(","fO","+","0.33",")",")",";","vec3","fQ","=","fJ","-","fH","*","fI",";","vec3","fR","=","fK","-","fN","*","fI",";","if","(","length","(","fQ",")","==","0.0","||","length","(","fR",")","==","0.0","||","abs","(","fH",")",">","1.0","||","abs","(","fN",")",">","1.0",")","fM","=","fM","*","fP",";","else","{","float","fS","=","acos","(","fH",")",";","float","fT","=","acos","(","fN",")",";","vec3","fU","=","normalize","(","fQ",")",";","vec3","fV","=","normalize","(","fR",")",";","float","fW",",","fX",";","fW","=","max","(","fS",",","fT",")",";","fX","=","min","(","fS",",","fT",")",";","fX","*=","0.95",";","float","fY","=","max","(","dot","(","fU",",","fV",")",",","0.0",")",";","float","fZ","=","0.45","*","(","fO","/","(","fO","+","0.09",")",")",";","fM","=","fM","*","(","fP","+","(","fZ","*","fY","*","sin","(","fW",")","*","tan","(","fX",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","gg","(","vec3","ga",",","vec3","gb",",","float","gc",",","float","gd",",","out","float","ge",")","{","float","gf",";","if","(","gc","==","0.0",")","{","ge","=","1.0",";","}","else","{","gf","=","1.0","+","abs","(","dot","(","gb",",","ga",")",")",";","gf","=","gd","+","(","1.0","-","gd",")","*","pow","(","gf",",","gc",")",";","ge","=","clamp","(","gf",",","0.0",",","1.0",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","gO","(","inout","ff","gh",",","vec3","gi",",","vec3","gj",",","vec3","gk",",","vec3","gl",",","vec3","gm",",","vec2","gn",",","vec2","go",",","float","gp",",","vec3","gq",",","vec3","gr",",","vec3","gs",",","vec4","gt",",","vec4","gu",",","float","gv",",","vec4","gw",")","{","vec3","gx","=","vec3","(","0.0",")",";","vec3","gy","=","gs","*","gp",";","float","gz","=","gu",".","z",";","if","(","gz","!=","-","1.0",")","{","gx","=","gq","-","gk",";","float","gA","=","length","(","gx",")",";","gy","*=","gz","/","(","gz","+","gA","*","gA",")",";","gx","=","normalize","(","gx",")",";","float","gB","=","gu",".","x",";","float","gC","=","gu",".","y",";","if","(","gB",">","-","1.0",")","{","float","gD","=","dot","(","gx",",","gr",")",";","gD","*=","smoothstep","(","0.0",",","1.0",",","(","gD","-","gB",")","/","gC",")",";","gy","*=","gD",";","}","}","else","gx","=","gr",";","float","gE",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["gg","(","gl",",","gx",",","go","[","0","]",",","go","[","1","]",",","gE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gF","=","max","(","dot","(","gl",",","gx",")",",","0.0",")",";","gE","=","gt","[","0","]","*","gF","+","gt","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","gF",",","gl",",","gx",",","gm",",","go","[","0","]",",","gE",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","gG","=","fn","(","gx",",","gm",",","gl",",","gt",",","gn","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","gG","=","fy","(","gx",",","gm",",","gl",",","gn","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","gG","=","fG","(","gx",",","gm",",","gl",",","gn","[","0","]",",","gn","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gG","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","gx",",","gl",")","*","dot","(","gm",",","gl",")","<","0.0",")","{","float","gH","=","gw",".","x",";","float","gI","=","gw",".","y",";","float","gJ","=","gw",".","z",";","float","gK","=","gw",".","w",";","float","gL","=","clamp","(","abs","(","dot","(","gx",",","gl",")",")",",","0.0",",","1.0",")",";","float","gM","=","clamp","(","dot","(","gm",",","-","gx",")",",","0.0",",","1.0",")",";","float","gN","=","pow","(","gM",",","gI",")",";","gh",".","a","+=","gv","*","vec4","(","gy","*","gL","*","pow","(","gi",",","vec3","(","gH",")",")",",","1.0",")",";","gh",".","a","+=","gJ","*","mix","(","vec4","(","gi",",","1.0",")",",","vec4","(","1.0",")",",","gK",")","*","gv","*","vec4","(","gy","*","gL","*","vec3","(","gN",")",",","1.0",")",";","}","else","{","gh",".","b","+=","gy","*","gj","*","gG",";","gh",".","a","+=","vec4","(","gy","*","gi","*","gE",",","gG",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gh",".","b","+=","gy","*","gj","*","gG",";","gh",".","a","+=","vec4","(","gy","*","gi","*","gE",",","gG",")",";"]}]}}]},{type:"textline",tokens:["}","ff","hA","(","vec3","gP",",","vec3","gQ",",","vec3","gR",",","vec3","gS",",","vec3","gT",",","vec3","gU",",","vec3","gV",",","vec2","gW",",","vec2","gX",",","float","gY",",","vec3","gZ","[","NUM_LIGHTS","]",",","vec3","g_","[","NUM_LIGHTS","]",",","vec3","ha","[","NUM_LIGHTS","]",",","vec4","hb","[","NUM_LIGHTS","]",",","vec4","hc","[","NUM_LIGHTS","]",",","float","hd",",","vec4","he",")","{","ff","hf",";","hf",".","a","=","vec4","(","gP","+","gR","*","gQ",",","0.0",")",";","hf",".","b","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","(","hf",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX",",","gY",",","gZ","[","0","]",",","g_","[","0","]",",","ha","[","0","]",",","hb","[","0","]",",","hc","[","0","]",",","hd",",","he",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["gO","(","hf",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX",",","gY",",","gZ","[","1","]",",","g_","[","1","]",",","ha","[","1","]",",","hb","[","1","]",",","hc","[","1","]",",","hd",",","he",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["gO","(","hf",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX",",","gY",",","gZ","[","2","]",",","g_","[","2","]",",","ha","[","2","]",",","hb","[","2","]",",","hc","[","2","]",",","hd",",","he",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["gO","(","hf",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX",",","gY",",","gZ","[","3","]",",","g_","[","3","]",",","ha","[","3","]",",","hb","[","3","]",",","hc","[","3","]",",","hd",",","he",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","hg","=","0",";","hg","<","NUM_LIGHTS",";","hg","++",")","{","vec4","hh","=","hb","[","hg","]",";","vec4","hi","=","hc","[","hg","]",";","vec3","hj","=","vec3","(","0.0",")",";","vec3","hk","=","ha","[","hg","]",";","hk","*=","gY",";","float","hl","=","hi",".","z",";","if","(","hl","!=","-","1.0",")","{","hj","=","gZ","[","hg","]","-","gT",";","float","hm","=","length","(","hj",")",";","hk","*=","hl","/","(","hl","+","hm","*","hm",")",";","hj","=","normalize","(","hj",")",";","float","hn","=","hi",".","x",";","float","ho","=","hi",".","y",";","if","(","hn",">","-","1.0",")","{","float","hp","=","dot","(","hj",",","g_","[","hg","]",")",";","hp","*=","smoothstep","(","0.0",",","1.0",",","(","hp","-","hn",")","/","ho",")",";","hk","*=","hp",";","}","}","else","hj","=","g_","[","hg","]",";","float","hq",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["gg","(","gU",",","hj",",","gX","[","0","]",",","gX","[","1","]",",","hq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","hr","=","max","(","dot","(","gU",",","hj",")",",","0.0",")",";","hq","=","hh","[","0","]","*","hr","+","hh","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","hr",",","gU",",","hj",",","gV",",","gX","[","0","]",",","hq",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hs","=","fn","(","hj",",","gV",",","gU",",","hh",",","gW","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hs","=","fy","(","hj",",","gV",",","gU",",","gW","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hs","=","fG","(","hj",",","gV",",","gU",",","gW","[","0","]",",","gW","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","hs","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","hj",",","gU",")","*","dot","(","gV",",","gU",")","<","0.0",")","{","float","ht","=","he",".","x",";","float","hu","=","he",".","y",";","float","hv","=","he",".","z",";","float","hw","=","he",".","w",";","float","hx","=","clamp","(","abs","(","dot","(","hj",",","gU",")",")",",","0.0",",","1.0",")",";","float","hy","=","clamp","(","dot","(","gV",",","-","hj",")",",","0.0",",","1.0",")",";","float","hz","=","pow","(","hy",",","hu",")",";","hf",".","a","+=","hd","*","vec4","(","hk","*","hx","*","pow","(","gR",",","vec3","(","ht",")",")",",","1.0",")",";","hf",".","a","+=","hv","*","mix","(","vec4","(","gR",",","1.0",")",",","vec4","(","1.0",")",",","hw",")","*","hd","*","vec4","(","hk","*","hx","*","vec3","(","hz",")",",","1.0",")",";","}","else","{","hf",".","b","+=","hk","*","gS","*","hs",";","hf",".","a","+=","vec4","(","hk","*","gR","*","hq",",","hs",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hf",".","b","+=","hk","*","gS","*","hs",";","hf",".","a","+=","vec4","(","hk","*","gR","*","hq",",","hs",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","hf",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","hC","(","vec4","hB",")","{","return","hB","-","floor","(","hB","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","hC","(","vec3","hD",")","{","return","hD","-","floor","(","hD","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","hC","(","vec2","hE",")","{","return","hE","-","floor","(","hE","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","hG","(","vec4","hF",")","{","return","hF","-","floor","(","hF","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","hI","(","vec4","hH",")","{","return","hC","(","(","34.0","*","hH","+","5.0",")","*","hH",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","hU","(","vec2","hJ",")","{","vec2","hK","=","hC","(","floor","(","hJ",")",")",";","vec2","hL","=","fract","(","hJ",")",";","vec4","hM","=","hL",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","hN","=","hL",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","hO","=","hI","(","hK",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","hO","=","hI","(","hO","+","hK",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","hP","=","hG","(","hO",")","*","K","+","K2",";","vec4","hQ","=","hG","(","floor","(","hO","*","K",")",")","*","K","+","K2",";","vec4","hR","=","hM","+","JITTER","*","hP",";","vec4","hS","=","hN","+","JITTER","*","hQ",";","vec4","hT","=","hR","*","hR","+","hS","*","hS",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["hT",".","xy","=","min","(","hT",".","xy",",","hT",".","zw",")",";","hT",".","x","=","min","(","hT",".","x",",","hT",".","y",")",";","return","hT",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hT",".","xy","=","(","hT",".","x","<","hT",".","y",")","?","hT",".","xy",":","hT",".","yx",";","hT",".","xz","=","(","hT",".","x","<","hT",".","z",")","?","hT",".","xz",":","hT",".","zx",";","hT",".","xw","=","(","hT",".","x","<","hT",".","w",")","?","hT",".","xw",":","hT",".","wx",";","hT",".","y","=","min","(","hT",".","y",",","hT",".","z",")",";","hT",".","y","=","min","(","hT",".","y",",","hT",".","w",")",";","return","sqrt","(","hT",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","ij","(","vec2","hV",",","float","hW",")","{","vec2","hX","=","hC","(","floor","(","hV",")",")",";","vec2","hY","=","fract","(","hV",")",";","vec4","hZ","=","hY",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","h_","=","hY",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","ia","=","hI","(","hX",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","ia","=","hI","(","ia","+","hX",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","ib","=","hG","(","ia",")","*","K","+","K2",";","vec4","ic","=","hG","(","floor","(","ia","*","K",")",")","*","K","+","K2",";","vec4","id","=","hZ","+","JITTER","*","ib",";","vec4","ie","=","h_","+","JITTER","*","ic",";","vec4","ig","=","id","*","id","+","ie","*","ie",";","id","+=","hW",";","ie","+=","hW",";","vec4","ih","=","id","*","id","+","ie","*","ie",";","id","+=","hW",";","ie","+=","hW",";","vec4","ii","=","id","*","id","+","ie","*","ie",";","ig",".","xy","=","min","(","ig",".","xy",",","ig",".","zw",")",";","ig",".","x","=","min","(","ig",".","x",",","ig",".","y",")",";","ih",".","xy","=","min","(","ih",".","xy",",","ih",".","zw",")",";","ih",".","x","=","min","(","ih",".","x",",","ih",".","y",")",";","ii",".","xy","=","min","(","ii",".","xy",",","ii",".","zw",")",";","ii",".","x","=","min","(","ii",".","x",",","ii",".","y",")",";","return","mat3","(","ig",".","xx",",","0.0",",","ih",".","xx",",","0.0",",","ii",".","xx",",","0.0",")",";","}","vec3","il","(","vec3","ik",")","{","return","hC","(","(","(","ik","*","34.0",")","+","1.0",")","*","ik",")",";","}","float","iA","(","vec2","im",")","{","const","vec4","io","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","ip","=","floor","(","im","+","dot","(","im",",","io",".","yy",")",")",";","vec2","iq","=","im","-","ip","+","dot","(","ip",",","io",".","xx",")",";","vec2","ir",";","ir","=","(","iq",".","x",">","iq",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","is","=","iq",".","xyxy","+","io",".","xxzz",";","is",".","xy","-=","ir",";","ip","=","hC","(","ip",")",";","vec3","it","=","il","(","il","(","ip",".","y","+","vec3","(","0.0",",","ir",".","y",",","1.0",")",")","+","ip",".","x","+","vec3","(","0.0",",","ir",".","x",",","1.0",")",")",";","vec3","iu","=","max","(","0.5","-","vec3","(","dot","(","iq",",","iq",")",",","dot","(","is",".","xy",",","is",".","xy",")",",","dot","(","is",".","zw",",","is",".","zw",")",")",",","0.0",")",";","iu","=","iu","*","iu",";","iu","=","iu","*","iu",";","vec3","iv","=","2.0","*","fract","(","it","*","io",".","www",")","-","1.0",";","vec3","iw","=","abs","(","iv",")","-","0.5",";","vec3","ix","=","floor","(","iv","+","0.5",")",";","vec3","iy","=","iv","-","ix",";","iu","*=","1.79284291400159","-","0.85373472095314","*","(","iy","*","iy","+","iw","*","iw",")",";","vec3","iz",";","iz",".","x","=","iy",".","x","*","iq",".","x","+","iw",".","x","*","iq",".","y",";","iz",".","yz","=","iy",".","yz","*","is",".","xz","+","iw",".","yz","*","is",".","yw",";","return","130.0","*","dot","(","iu",",","iz",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","ja","(","inout","vec3","iB",",","float","iC",",","float","iD",",","float","iE",",","vec3","iF",",","vec3","iG",",","vec3","iH",",","vec4","iI",",","vec3","iJ",",","float","iK",")","{","if","(","iK",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","iL","=","iI",";","vec3","iM","=","iJ","+","iF",";","iM",".","xz","=","10.0","*","sin","(","0.1","*","iM",".","xz",")",";","vec3","iN","=","iM","+","2.0","*","cross","(","-","iL",".","xyz",",","cross","(","-","iL",".","xyz",",","iM",")","+","iL",".","w","*","iM",")",";","vec2","iO","=","iN",".","xz",";","vec3","iP","=","iG",";","float","iQ","=","max","(","dot","(","iF",",","iP",")",",","0.0",")",";","float","iR","=","0.025",";","iO",".","s","+=","0.5","*","sin","(","dot","(","iJ","+","iD",",","vec3","(","1.0",")",")",")",";","iO",".","t","+=","0.7","*","(","-","sin","(","dot","(","iJ","-","iD",",","vec3","(","-","0.7",")",")",")",")",";","iO",".","st","+=","0.23","*","cos","(","4.0","*","iC","-","CAUST_SPEED",".","x","*","iD",")",";","iO",".","st","+=","3.0","*","sin","(","iC","-","0.3","*","CAUST_SPEED",".","y","*","iD",")",";","float","iS","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","iC",",","0.0",")",")",";","mat3","iT","=","ij","(","(","iO","/","iS",")",",","iR",")",";","float","iU","=","(","iT","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","iV","=","(","iT","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","iW","=","(","iT","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","iX","=","CAUST_BRIGHT","*","vec3","(","iU",",","iV",",","iW",")",";","float","iY","=","iE","*","iQ",";","float","iZ","=","max","(","sign","(","iC",")",",","0.0",")",";","iY","=","min","(","iY","+","0.5","*","sign","(","-","iF",".","y",")","*","iZ",",","1.0",")",";","iY","*=","1.0","-","iZ","*","(","0.1","*","iC",")",";","iX","*=","iY",";","iX","*=","iX",";","float","i_","=","min","(","-","iC","+","10.0",",","1.0",")",";","iB","+=","max","(","(","2.0","*","iH","*","iX",")","*","i_",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","jn","(","in","vec3","jg",",","in","vec3","jh",",","in","float","ji",",","in","float","jj",")","{","vec3","jk","=","normalize","(","jh","+","jg",")",";","float","jl","=","1.0","-","dot","(","jg",",","jk",")",";","float","jm","=","jj","+","(","1.0","-","jj",")","*","pow","(","jl",",","ji",")",";","return","jm",";","}","void","jz","(","inout","vec3","jo",",","in","vec3","jp",",","in","vec3","jq",",","in","float","jr",",","in","float","js",",","in","vec2","jt",")","{","vec3","ju","=","reflect","(","-","jp",",","jq",")",";","float","jv","=","jn","(","jp",",","ju",",","jr",",","js",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jw","=","cB",".","xy","/","cB",".","z",";","jw","+=","jt","*","BUMP",";","vec3","jx","=","texture2D","(","u_reflectmap",",","jw",")",".","rgb",";","ej","(","jx",".","rgb",")",";","jo","=","mix","(","jo",",","jx",",","u_reflect_factor","*","jv",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jy","=","textureCube","(","u_mirrormap",",","ju",")",".","xyz",";","ej","(","jy",".","rgb",")",";","jo","=","mix","(","jo",",","jy",",","u_mirror_factor","*","jv",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","ko","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";","void","kv","(","inout","float","kp",",","float","kq",",","vec2","kr",",","vec2","ks",")","{","float","kt","=","ks",".","x","-","kr",".","x",";","float","ku","=","(","kq","-","kr",".","x",")","/","kt",";","kp","=","mix","(","kp",",","ks",".","y",",","clamp","(","ku",",","0.0",",","1.0",")",")",";","}","void","kC","(","inout","vec3","kw",",","float","kx",",","vec4","ky",",","vec4","kz",")","{","float","kA","=","kz",".","x","-","ky",".","x",";","float","kB","=","(","kx","-","ky",".","x",")","/","kA",";","kw","=","mix","(","kw",",","kz",".","yzw",",","clamp","(","kB",",","0.0",",","1.0",")",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","kJ","(","float","kD",",","float","kE",",","vec2","kF","[","SIZE_RAMP_LENGTH","]",")","{","float","kG","=","kD","/","kE",";","float","kH","=","kF","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["kv","(","kH",",","kG",",","kF","[","0","]",",","kF","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["kv","(","kH",",","kG",",","kF","[","1","]",",","kF","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["kv","(","kH",",","kG",",","kF","[","2","]",",","kF","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","kI","=","1",";","kI","<","SIZE_RAMP_LENGTH",";","kI","++",")","kv","(","kH",",","kG",",","kF","[","kI","-","1","]",",","kF","[","kI","]",")",";"]}]}}]},{type:"textline",tokens:["return","kH",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kQ","(","float","kK",",","float","kL",",","vec4","kM","[","COLOR_RAMP_LENGTH","]",")","{","float","kN","=","kK","/","kL",";","vec3","kO","=","kM","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["kC","(","kO",",","kN",",","kM","[","0","]",",","kM","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["kC","(","kO",",","kN",",","kM","[","1","]",",","kM","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["kC","(","kO",",","kN",",","kM","[","2","]",",","kM","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","kP","=","1",";","kP","<","COLOR_RAMP_LENGTH",";","kP","++",")","kC","(","kO",",","kN",",","kM","[","kP","-","1","]",",","kM","[","kP","]",")",";"]}]}}]},{type:"textline",tokens:["return","kO",";","}"]}]}}]},{type:"textline",tokens:["float","kZ","(","float","kR",",","float","kS",",","float","kT",",","float","kU",")","{","float","kV","=","max","(","0.01",",","min","(","kS",",","kT",")",")",";","float","kW","=","max","(","0.01",",","min","(","kS",",","kU",")",")",";","float","kX","=","kS","-","kW",";","float","kY","=","clamp","(","kR","/","kV",",","0.0",",","1.0",")","-","step","(","kX",",","kR",")","*","(","kR","-","kX",")","/","kW",";","return","kY",";","}","ko","lg","(",")","{","float","k_","=","u_p_time","-","u_p_starttime",";","ko","la",";","if","(","k_","<","0.0",")","{","la",".","a","=","0.0001",";","la",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","k_","<","0.0",")",")","{","float","lb",";","if","(","u_p_cyclic","==","1",")","{","float","lc","=","u_p_endtime","-","u_p_starttime",";","lb","=","mod","(","k_",",","lc",")","-","a_p_delay",";","if","(","lb","<","0.0",")","lb","+=","lc",";","}","if","(","u_p_cyclic","!=","1",")","{","lb","=","k_","-","a_p_delay",";","}","if","(","lb","<","0.0","||","lb",">=","a_p_lifetime",")","{","la",".","a","=","0.0001",";","la",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","lb","<","0.0","||","lb",">=","a_p_lifetime",")",")","{","vec3","ld","=","a_position",";","vec3","le","=","a_normal",";","ld","+=","u_p_nfactor","*","lb","*","le",";","ld","+=","a_p_vels",".","xyz","*","lb",";","ld",".","y","-=","u_p_gravity","*","lb","*","lb","/","2.0",";","float","lf","=","max","(","u_p_mass",",","EPSILON",")",";","ld","+=","(","u_p_wind","/","lf",")","*","lb","*","lb","/","2.0",";","la",".","b","=","ld",";","la",".","e","=","a_p_vels",".","w","*","lb",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["la",".","a","=","kJ","(","lb",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["la",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["la",".","d","=","kQ","(","lb",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["la",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["la",".","c","=","kZ","(","lb",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","}","return","la",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","lu","(","in","sampler2D","ln",",","in","vec2","lo",",","in","vec2","lp",")","{","float","lq","=","texture2D","(","ln",",","lo",")",".","r",";","float","lr","=","lp",".","x",";","float","ls","=","lp",".","y",";","float","lt","=","2.0","*","lr","/","(","lr","+","ls","-","(","2.0","*","lq","-","1.0",")","*","(","ls","-","lr",")",")",";","return","lt",";","}"]}]}}