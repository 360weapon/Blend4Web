b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","ci","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ci","=","mix","(","ci",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","vec3","(","0.0",")",";","vec3","ck","=","vec3","(","0.0",")",";","vec3","cl","=","vec3","(","0.0",")",";","bq","(","ci",",","cj",",","ck",",","cl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cn","=","(","u_model_matrix","*","vec4","(","cm",",","1.0",")",")",".","xyz",";","mat4","co","=","ae","(","u_camera_eye",",","cn",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cp","=","(","u_model_matrix","*","vec4","(","cm",",","1.0",")",")",".","xyz",";","co","=","co","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cp",")",";"]}]}}]},{type:"textline",tokens:["c","cq","=","al","(","ci","-","cm",",","cm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","co",")",";","cq",".","b","=","cn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","cq","=","al","(","ci",",","cm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cr","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cr","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ch","(","cq",".","a",",","cq",".","b",",","cr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ao","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cq",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","dg","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","dg","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","dg","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cm","(","cr",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cm","(","cr",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["float","dh","=","cr",";","float","di","=","dh","*","dh",";","gl_FragColor","=","vec4","(","dh",",","di",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","c_","(","cx",".","z",",","u_shadow_visibility_falloff",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"dynamic_grass.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","ee","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ee","=","mix","(","ee",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ef","=","vec3","(","0.0",")",";","vec3","eg","=","vec3","(","0.0",")",";","vec3","eh","=","vec3","(","0.0",")",";","bq","(","ee",",","ef",",","eg",",","eh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","ej","=","dY","(","ee",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ei",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ek","=","(","u_model_matrix","*","vec4","(","ei",",","1.0",")",")",".","xyz",";","mat4","el","=","ae","(","u_camera_eye",",","ek",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","em","=","(","u_model_matrix","*","vec4","(","ei",",","1.0",")",")",".","xyz",";","el","=","el","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","em",")",";"]}]}}]},{type:"textline",tokens:["c","ej","=","al","(","ee","-","ei",",","ei",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","el",")",";","ej",".","b","=","ek",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","ej","=","al","(","ee",",","ei",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","en","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","en","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ch","(","ej",".","a",",","ej",".","b",",","en",")",";"]}]}}]},{type:"textline",tokens:["vec4","eo","=","u_view_matrix","*","vec4","(","ej",".","a",",","1.0",")",";","vec4","ep","=","u_proj_matrix","*","eo",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ao","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["d_","(","ej",".","a",")",";","cx","=","eo",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["cr","=","-","eo",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ep",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ee",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ee",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ee",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ee",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","ee",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","ee",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ee",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ee",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ee",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ef","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","eg","=","ae","(","u_camera_eye",",","ef",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","eg","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","eh","=","al","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","eg",")",";","eh",".","b","=","ef",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","eh","=","al","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","ei","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","eh",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ee","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ee","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ee","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ei",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","em",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","en",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","eo","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","eo","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","eq","(","float","ep",")","{","return","ep","-","floor","(","ep","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","ez","(","inout","float","er",",","in","float","es","[","eo","]",",","in","float","et",")","{","for","(","int","eu","=","NUM_RINGS",";","eu",">","0",";","eu","--",")","{","float","ev","=","40.0","*","es","[","eu","]",";","float","ew","=","300.0","*","(","eq","(","ev",")","-","0.005",")",";","float","ex","=","ev",";","float","ey","=","abs","(","ex","*","(","u_halo_size","*","ew","-","et",")",")",";","er","+=","1.0","-","min","(","ey",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","eI","(","inout","float","eA",",","in","float","eB","[","eo","]",",","in","float","eC",")","{","for","(","int","eD","=","NUM_LINES",";","eD",">","0",";","eD","--",")","{","float","eE","=","eB","[","eD","]",";","float","eF","=","eE",";","float","eG","=","1000.0","*","(","eq","(","eE",")","-","0.005",")",";","float","eH","=","20.0","*","abs","(","eF","*","a",".","x","+","eG","*","a",".","y",")",";","eA","+=","1.0","-","min","(","eH",",","1.0",")",";","}","eA","*=","eC",";","}"]}]}}]},{type:"textline",tokens:["void","eP","(","inout","float","eJ",",","in","vec2","eK",")","{","float","eL",",","eM",";","eM","=","atan","(","eK",".","y",",","eK",".","x",")",";","eM","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","eN","=","cos","(","eM",")",";","float","eO","=","sin","(","eM",")",";","eM","=","(","eN","*","eK",".","x","+","eO","*","eK",".","y",")","*","(","eN","*","eK",".","y","-","eO","*","eK",".","x",")",";","eL","=","abs","(","eM",")",";","if","(","eL","<","1.0",")","{","eL","=","(","0.01","*","u_halo_size",")","/","(","eL",")",";","eJ","*=","sqrt","(","min","(","eL",",","1.0",")",")",";","}","}","void","main","(",")","{","float","eQ","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","eR","=","sqrt","(","eQ",")",";","eQ","=","max","(","1.0","-","eQ",",","0.0",")",";","eQ","=","pow","(","eQ",",","u_halo_hardness",")",";","float","eS","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eT","[","eo","]",";","for","(","int","eU","=","0",";","eU","<","eo",";","eU","++",")","{","eT","[","eU","]","=","fract","(","en","/","float","(","eU",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","eV","=","0.0",";","ez","(","eV",",","eT",",","eR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eW","=","0.0",";","eI","(","eW",",","eT",",","eQ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eP","(","eQ",",","a",")",";"]}]}}]},{type:"textline",tokens:["eQ","*=","eS",";","vec3","eX","=","u_diffuse_color",".","rgb","*","eQ",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["eV","*=","eQ",";","eX","+=","u_halo_rings_color","*","eV",";","eQ","+=","eV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["eW","*=","eS",";","eX","+=","u_halo_lines_color","*","eW",";","eQ","+=","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eQ","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","eY","=","u_halo_stars_blend","*","(","em",".","y","-","u_halo_stars_height",")",";","eQ","*=","clamp","(","eY",",","0.0",",","1.0",")",";","eQ","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ei","(","eX",")",";","el","(","eX",",","eQ",")",";","gl_FragColor","=","vec4","(","eX",",","eQ",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","en",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","em",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","eo","=","a_position",";","a","=","a_halo_bb_vertex","*","2.0",";","en","=","fract","(","eo",".","x","+","eo",".","y","+","eo",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ep","=","B","(","eo",",","u_view_matrix",")",";","mat4","eq","=","u_view_matrix",";","eq","[","3","]","[","0","]","=","0.0",";","eq","[","3","]","[","1","]","=","0.0",";","eq","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","ep","=","B","(","eo",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","er","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","es","=","ep","*","er",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","et","=","u_proj_matrix","*","eq","*","es",";","et",".","z","=","0.99999","*","et",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["em","=","es",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","et","=","u_proj_matrix","*","u_view_matrix","*","es",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","et",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","eo","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","eo",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";","varying","vec3","ia",";","varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","iB","=","h_",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iC","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","iD","=","ia",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")","iD","=","-","iD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","cross","(","iD",",","ib",".","xyz",")","*","ib",".","w",";","mat3","iF","=","mat3","(","ib",".","xyz",",","iE",",","iD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","=","normalize","(","hZ","*","iF",")",";","float","iH","=","1.0","/","PARALLAX_STEPS",";","vec2","iI","=","iG",".","xy","*","u_parallax_scale","/","(","PARALLAX_STEPS","*","iG",".","z",")",";","float","iJ","=","1.0",";","float","iK","=","texture2D","(","u_normalmap0",",","iC",")",".","a",";","for","(","float","iL","=","1.0",";","iL","<=","PARALLAX_STEPS",";","iL","++",")","{","if","(","iK","<","iJ",")","{","iJ","-=","iH",";","iC","-=","iI",";","iK","=","texture2D","(","u_normalmap0",",","iC",")",".","a",";","}","}","vec2","iM","=","iC","+","iI",";","float","iN","=","texture2D","(","u_normalmap0",",","iM",")",".","a","-","(","iJ","+","iH",")",";","float","iO","=","iK","-","iJ",";","float","iP","=","iO","/","(","iO","-","iN",")",";","iC","=","iP","*","iM","+","(","1.0","-","iP",")","*","iC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iQ","=","texture2D","(","u_normalmap0",",","iC","+","u_time","*","u_normalmap0_uv_velocity",")",";","vec3","iR","=","iQ",".","rgb","-","0.5",";","iR","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","iR",",","u_normal_factor",")",";","vec3","iS","=","iF","*","iR",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iS","=","iD",";"]}]}}]},{type:"textline",tokens:["iS","=","normalize","(","iS",")",";","vec3","iT","=","normalize","(","hZ",")",";","float","iU","=","0.5","*","iS",".","y","+","0.5",";","vec3","iV","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","iU",")",";","vec3","iW","=","u_ambient","*","iV",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iX","=","ic",";","eg","(","iX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iY","=","vec4","(","iX",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iY","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iZ","=","normalize","(","u_view_matrix_frag","*","vec4","(","iS",",","0.0",")",")",".","st",";","iZ","=","iZ","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","i_","=","texture2D","(","u_colormap0",",","iC",")",";","eg","(","i_",".","rgb",")",";","vec4","ja",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["ja","=","texture2D","(","u_colormap1",",","iZ",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["ja","=","texture2D","(","u_colormap1",",","iC",")",";"]}]}}]},{type:"textline",tokens:["eg","(","ja",".","rgb",")",";","vec4","jb","=","texture2D","(","u_stencil0",",","iC",")",";","vec4","jc","=","mix","(","i_",",","ja",",","jb",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jc","=","texture2D","(","u_colormap0",",","iZ",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jc","=","texture2D","(","u_colormap0",",","iC","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["eg","(","jc",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["iY",".","rgb","=","mix","(","iY",".","rgb",",","jc",".","rgb",",","u_diffuse_color_factor",")",";","iY",".","a","=","jc",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["iY",".","rgb","*=","mix","(","vec3","(","1.0",")",",","jc",".","rgb",",","u_diffuse_color_factor",")",";","iY",".","a","=","jc",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","jd","=","u_diffuse_intensity","*","iY",".","rgb",";","float","je","=","df","(","u_shadow_visibility_falloff",",","jd",")",";","vec3","jf","=","u_emit","*","iY",".","rgb",";","vec3","jg","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jh","=","vec3","(","iY",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jh","=","texture2D","(","u_specmap",",","iC",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["eg","(","jh",".","rgb",")",";","jg","=","mix","(","jg",",","jh",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","ji","=","u_specular_params","[","0","]",";","float","jj","=","u_specular_params","[","1","]",";","vec3","jk","=","ji","*","jg",";","fa","jl","=","gE","(","jf",",","iW",",","jd",",","jk",",","h_",",","iS",",","iT",",","jj",",","u_diffuse_params",",","je",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","jm","=","jl",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["iA","(","jm",",","iT",",","iS",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jg",",","iR",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iA","(","jm",",","iT",",","iS",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jg",",","vec2","(","0.0",")",")",";"]}]}}]}]}}]},{type:"textline",tokens:["jm","+=","jl",".","b",";","float","jn","=","jl",".","a",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["jm","=","max","(","jm","-","sqrt","(","0.01","*","-","min","(","iB",",","0.0",")",")",",","0.5","*","jm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jo","=","u_sun_quaternion",";","vec3","jp","=","h_",";","jp",".","xz","=","10.0","*","sin","(","0.1","*","jp",".","xz",")",";","vec3","jq","=","jp","+","2.0","*","cross","(","-","jo",".","xyz",",","cross","(","-","jo",".","xyz",",","jp",")","+","jo",".","w","*","jp",")",";","vec2","jr","=","jq",".","xz",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","js","=","(","iF",")",";","vec3","jt","=","js","*","iS",";","jr","+=","jt",".","st",";"]}]}}]},{type:"textline",tokens:["hY","(","jm",",","jr",".","st",",","iB",",","u_time",",","je",",","iS",",","u_sun_direction",",","u_sun_intensity",",","h_",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","ju","=","iY",".","a",";","if","(","ju","<","0.5",")","discard",";","ju","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ju","=","iY",".","a","+","jn","*","jk",".","r",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ju","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jv","=","eA","(","u_cube_fog",",","iT",")",";","vec4","jw","=","vec4","(","jv",",","u_fog_color_density",".","a",")",";","eg","(","jw",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jw","=","u_fog_color_density",";","jw",".","rgb","*=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eR","(","jm",",","length","(","cx",")",",","iT",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","jw",",","iB",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["et","(","jm",",","length","(","cx",")",",","jw",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["jm","=","vec3","(","cy",".","a",")",";"]}]}}]},{type:"textline",tokens:["ei","(","jm",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","jm",",","ju",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jm",",","ju",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"dynamic_grass.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";","varying","vec3","ia",";","varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","iB","=","a_position",";","vec3","iC","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iD","=","vec3","(","a_tangent",")",";","vec3","iE","=","a_tangent","[","3","]","*","cross","(","iC",",","iD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iD","=","vec3","(","0.0",")",";","vec3","iE","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iB","=","mix","(","iB",",","a_position_next",",","u_va_frame_factor",")",";","iC","=","mix","(","iC",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","vec3","(","a_tangent",")",";","vec3","iG","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","iF",")",";","iD","=","mix","(","iD",",","iF",",","u_va_frame_factor",")",";","iE","=","mix","(","iE",",","iG",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bq","(","iB",",","iD",",","iE",",","iC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iH","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iH","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","iI","=","dY","(","iB",",","iD",",","iE",",","iC",",","iH",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iJ","=","(","u_model_matrix","*","vec4","(","iH",",","1.0",")",")",".","xyz",";","mat4","iK","=","ae","(","u_camera_eye",",","iJ",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iL","=","(","u_model_matrix","*","vec4","(","iH",",","1.0",")",")",".","xyz",";","iK","=","iK","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iL",")",";"]}]}}]},{type:"textline",tokens:["c","iI","=","al","(","iB","-","iH",",","iH",",","iD",",","iE",",","iC",",","iK",")",";","iI",".","b","=","iJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","iI","=","al","(","iB",",","iH",",","iD",",","iE",",","iC",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"textline",tokens:["float","iM","=","(","dot","(","cross","(","iI",".","e",",","iI",".","c",")",",","iI",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ib","=","vec4","(","iI",".","c",",","iM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","iI","=","dY","(","iB",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iC",",","iH",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iJ","=","(","u_model_matrix","*","vec4","(","iH",",","1.0",")",")",".","xyz",";","mat4","iK","=","ae","(","u_camera_eye",",","iJ",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iL","=","(","u_model_matrix","*","vec4","(","iH",",","1.0",")",")",".","xyz",";","iK","=","iK","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iL",")",";"]}]}}]},{type:"textline",tokens:["c","iI","=","al","(","iB","-","iH",",","iH",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iC",",","iK",")",";","iI",".","b","=","iJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","iI","=","al","(","iB",",","iH",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iC",",","u_model_matrix",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ch","(","iI",".","a",",","iI",".","b",",","iC",")",";"]}]}}]},{type:"textline",tokens:["h_","=","iI",".","a",";","ia","=","iI",".","e",";","hZ","=","u_camera_eye","-","iI",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ao","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["ic","=","iI",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ic","=","a_color",";"]}]}}]},{type:"textline",tokens:["cx","=","u_view_matrix","*","vec4","(","iI",".","a",",","1.0",")",";","vec4","iN","=","u_proj_matrix","*","cx",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["d_","(","iN",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["d_","(","iI",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","iO","=","iN",".","x",";","float","iP","=","iN",".","y",";","float","iQ","=","iN",".","w",";","cw",".","x","=","(","iO","+","iQ",")","/","2.0",";","cw",".","y","=","(","iP","+","iQ",")","/","2.0",";","cw",".","z","=","iQ",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","iN",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED","&&","WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","h_",";","varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iJ","(","vec3","iB",")","{","float","iC",",","iD",",","iE",",","iF",",","iG",",","iH",";","vec3","iI",";","iC","=","max","(","iB","[","0","]",",","max","(","iB","[","1","]",",","iB","[","2","]",")",")",";","iD","=","min","(","iB","[","0","]",",","min","(","iB","[","1","]",",","iB","[","2","]",")",")",";","iH","=","iC","-","iD",";","iG","=","iC",";","if","(","iC","!=","0.0",")","iF","=","iH","/","iC",";","else","{","iF","=","0.0",";","iE","=","0.0",";","}","if","(","f","(","iF",",","0.0",")",")","{","iE","=","0.0",";","}","else","{","iI","=","(","vec3","(","iC",",","iC",",","iC",")","-","iB",".","xyz",")","/","iH",";","if","(","f","(","iB",".","x",",","iC",")",")","iE","=","iI","[","2","]","-","iI","[","1","]",";","else","if","(","f","(","iB",".","y",",","iC",")",")","iE","=","2.0","+","iI","[","0","]","-","iI","[","2","]",";","else","iE","=","4.0","+","iI","[","1","]","-","iI","[","0","]",";","iE","/=","6.0",";","if","(","iE","<","0.0",")","iE","+=","1.0",";","}","return","vec3","(","iE",",","iF",",","iG",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iU","(","vec3","iK",")","{","float","iL",",","iM",",","iN",",","iO",",","iP",",","iQ",",","iR",",","iS",";","vec3","iT",";","iQ","=","iK","[","0","]",";","iR","=","iK","[","1","]",";","iS","=","iK","[","2","]",";","if","(","f","(","iR",",","0.0",")",")","{","iT","=","vec3","(","iS",",","iS",",","iS",")",";","}","else","{","if","(","f","(","iQ",",","0.0",")",")","iQ","=","0.0",";","iQ","*=","6.0",";","iL","=","floor","(","iQ",")",";","iM","=","iQ","-","iL",";","iT","=","vec3","(","iM",",","iM",",","iM",")",";","iN","=","iS","*","(","1.0","-","iR",")",";","iO","=","iS","*","(","1.0","-","(","iR","*","iM",")",")",";","iP","=","iS","*","(","1.0","-","(","iR","*","(","1.0","-","iM",")",")",")",";","if","(","f","(","iL",",","0.0",")",")","iT","=","vec3","(","iS",",","iP",",","iN",")",";","else","if","(","f","(","iL",",","1.0",")",")","iT","=","vec3","(","iO",",","iS",",","iN",")",";","else","if","(","f","(","iL",",","2.0",")",")","iT","=","vec3","(","iN",",","iS",",","iP",")",";","else","if","(","f","(","iL",",","3.0",")",")","iT","=","vec3","(","iN",",","iO",",","iS",")",";","else","if","(","f","(","iL",",","4.0",")",")","iT","=","vec3","(","iP",",","iN",",","iS",")",";","else","iT","=","vec3","(","iS",",","iN",",","iO",")",";","}","return","iT",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iW","(","vec2","iV",")","{","return","vec3","(","iV","*","2.0","-","vec2","(","1.0",",","1.0",")",",","0.0",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iY","(","vec3","iX",")","{","return","vec2","(","iX",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"jN",qualifier:["vec3"]},{type:"node_out",name:"jO",qualifier:["float"]},{type:"node_out",name:"jP",qualifier:["float"]},{type:"textline",tokens:["jN","=","normalize","(","jC",".","xyz",")",";","jO","=","abs","(","jC",".","z",")",";","jP","=","length","(","jC",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"jQ",qualifier:["float"]},{type:"node_in",name:"jR",qualifier:["float"]},{type:"node_in",name:"jS",qualifier:["float"]},{type:"node_out",name:"jT",qualifier:["vec3"]},{type:"textline",tokens:["jT","=","vec3","(","jQ",",","jR",",","jS",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"iZ",qualifier:["varying","vec2"]},{type:"node_out",name:"jU",qualifier:["vec3"]},{type:"textline",tokens:["jU","=","iW","(","iZ",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"i_",qualifier:["varying","vec3"]},{type:"node_out",name:"jV",qualifier:["vec3"]},{type:"textline",tokens:["jV","=","i_",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"ja",qualifier:["varying","float"]},{type:"node_out",name:"jW",qualifier:["float"]},{type:"textline",tokens:["jW","=","ja",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"jb",qualifier:["varying","vec2"]},{type:"node_out",name:"jX",qualifier:["float"]},{type:"node_out",name:"jY",qualifier:["float"]},{type:"textline",tokens:["jX","=","jb","[","0","]",";","jY","=","jb","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"jc",qualifier:["varying","vec3"]},{type:"node_out",name:"jZ",qualifier:["float"]},{type:"node_out",name:"j_",qualifier:["float"]},{type:"node_out",name:"ka",qualifier:["float"]},{type:"textline",tokens:["jZ","=","jc","[","0","]",";","j_","=","jc","[","1","]",";","ka","=","jc","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"kb",qualifier:["vec3"]},{type:"textline",tokens:["kb","=","jw",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"kc",qualifier:["float"]},{type:"textline",tokens:["kc","=","(","gl_FrontFacing",")","?","1.0",":","0.0",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"kd",qualifier:["vec3"]},{type:"textline",tokens:["kd","=","jA",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"ke",qualifier:["vec3"]},{type:"textline",tokens:["ke","=","vec3","(","jB",".","r",",","-","jB",".","b",",","jB",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"kf",qualifier:["float"]},{type:"node_in",name:"kg",qualifier:["float"]},{type:"node_in",name:"kh",qualifier:["float"]},{type:"node_in",name:"ki",qualifier:["float"]},{type:"node_in",name:"kj",qualifier:["vec3"]},{type:"node_out",name:"kk",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","kl","=","iJ","(","kj",")",";","kl","[","0","]","+=","(","kf","-","0.5",")",";","if","(","kl","[","0","]",">","1.0",")","kl","[","0","]","-=","1.0",";","else","if","(","kl","[","0","]","<","0.0",")","kl","[","0","]","+=","1.0",";","kl","[","1","]","*=","kg",";","if","(","kl","[","1","]",">","1.0",")","kl","[","1","]","=","1.0",";","else","if","(","kl","[","1","]","<","0.0",")","kl","[","1","]","=","0.0",";","kl","[","2","]","*=","kh",";","if","(","kl","[","2","]",">","1.0",")","kl","[","2","]","=","1.0",";","else","if","(","kl","[","2","]","<","0.0",")","kl","[","2","]","=","0.0",";","kk","=","mix","(","kj",",","iU","(","kl",")",",","ki",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"km",qualifier:["float"]},{type:"node_in",name:"kn",qualifier:["vec3"]},{type:"node_out",name:"ko",qualifier:["vec3"]},{type:"textline",tokens:["ko","=","mix","(","kn",",","vec3","(","1.0",")","-","kn",",","km",")",";"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"jd",qualifier:["vec3"]},{type:"node_in",name:"kp",qualifier:["vec3"]},{type:"node_out",name:"kq",qualifier:["vec3"]},{type:"node_out",name:"kr",qualifier:["float"]},{type:"textline",tokens:["kq","=","jd",";","kr","=","-","dot","(","kp",",","jd",")",";"]}]}},{type:"node",name:"NORMAL_VIEW",group:{type:"group",parts:[{type:"node_in",name:"ks",qualifier:["vec3"]},{type:"node_out",name:"kt",qualifier:["vec3"]},{type:"textline",tokens:["kt","=","-","(","u_view_matrix_frag","*","vec4","(","ks",",","0.0",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"je",qualifier:["vec3"]},{type:"node_in",name:"ku",qualifier:["vec3"]},{type:"node_out",name:"kv",qualifier:["vec3"]},{type:"textline",tokens:["kv","=","ku","*","je",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"jf",qualifier:["mat4"]},{type:"node_param",name:"jg",qualifier:["const","float"]},{type:"node_param",name:"jh",qualifier:["const","float"]},{type:"node_param",name:"ji",qualifier:["vec3"]},{type:"node_param",name:"jj",qualifier:["vec3"]},{type:"node_in",name:"kw",qualifier:["vec3"]},{type:"node_out",name:"kx",qualifier:["vec3"]},{type:"textline",tokens:["kx","=","(","jf","*","vec4","(","kw",",","1.0",")",")",".","xyz",";","if","(","jg","==","1.0",")","kx","=","max","(","kx",",","ji",")",";","if","(","jh","==","1.0",")","kx","=","min","(","kx",",","jj",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"ky",qualifier:["float"]},{type:"node_in",name:"kz",qualifier:["float"]},{type:"node_out",name:"kA",qualifier:["float"]},{type:"textline",tokens:["kA","=","ky","+","kz",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"kB",qualifier:["float"]},{type:"node_in",name:"kC",qualifier:["float"]},{type:"node_out",name:"kD",qualifier:["float"]},{type:"textline",tokens:["kD","=","kB","-","kC",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"kE",qualifier:["float"]},{type:"node_in",name:"kF",qualifier:["float"]},{type:"node_out",name:"kG",qualifier:["float"]},{type:"textline",tokens:["kG","=","kE","*","kF",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"kH",qualifier:["float"]},{type:"node_in",name:"kI",qualifier:["float"]},{type:"node_out",name:"kJ",qualifier:["float"]},{type:"textline",tokens:["kJ","=","(","kI","!=","0.0",")","?","kH","/","kI",":","0.0",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"kK",qualifier:["float"]},{type:"node_in",name:"kL",qualifier:["float"]},{type:"node_out",name:"kM",qualifier:["float"]},{type:"textline",tokens:["kM","=","sin","(","kK",")",";","kL",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"kN",qualifier:["float"]},{type:"node_in",name:"kO",qualifier:["float"]},{type:"node_out",name:"kP",qualifier:["float"]},{type:"textline",tokens:["kP","=","cos","(","kN",")",";","kO",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"kQ",qualifier:["float"]},{type:"node_in",name:"kR",qualifier:["float"]},{type:"node_out",name:"kS",qualifier:["float"]},{type:"textline",tokens:["kS","=","tan","(","kQ",")",";","kR",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"kT",qualifier:["float"]},{type:"node_in",name:"kU",qualifier:["float"]},{type:"node_out",name:"kV",qualifier:["float"]},{type:"textline",tokens:["kV","=","(","kT","<=","1.0","&&","kT",">=","-","1.0",")","?","asin","(","kT",")",":","0.0",";","kU",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"kW",qualifier:["float"]},{type:"node_in",name:"kX",qualifier:["float"]},{type:"node_out",name:"kY",qualifier:["float"]},{type:"textline",tokens:["kY","=","(","kW","<=","1.0","&&","kW",">=","-","1.0",")","?","acos","(","kW",")",":","0.0",";","kX",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"kZ",qualifier:["float"]},{type:"node_in",name:"k_",qualifier:["float"]},{type:"node_out",name:"la",qualifier:["float"]},{type:"textline",tokens:["la","=","atan","(","kZ",")",";","k_",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"lb",qualifier:["float"]},{type:"node_in",name:"lc",qualifier:["float"]},{type:"node_out",name:"ld",qualifier:["float"]},{type:"textline",tokens:["ld","=","pow","(","lb",",","lc",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"le",qualifier:["float"]},{type:"node_in",name:"lf",qualifier:["float"]},{type:"node_out",name:"lg",qualifier:["float"]},{type:"textline",tokens:["lg","=","(","le",">","0.0","&&","lf",">","0.0",")","?","log2","(","le",")","/","log2","(","lf",")",":","0.0",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"lh",qualifier:["float"]},{type:"node_in",name:"li",qualifier:["float"]},{type:"node_out",name:"lj",qualifier:["float"]},{type:"textline",tokens:["lj","=","min","(","lh",",","li",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"lk",qualifier:["float"]},{type:"node_in",name:"ll",qualifier:["float"]},{type:"node_out",name:"lm",qualifier:["float"]},{type:"textline",tokens:["lm","=","max","(","lk",",","ll",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"ln",qualifier:["float"]},{type:"node_in",name:"lo",qualifier:["float"]},{type:"node_out",name:"lp",qualifier:["float"]},{type:"textline",tokens:["lp","=","floor","(","ln","+","0.5",")",";","lo",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"lq",qualifier:["float"]},{type:"node_in",name:"lr",qualifier:["float"]},{type:"node_out",name:"ls",qualifier:["float"]},{type:"textline",tokens:["ls","=","(","lq","<","lr",")","?","1.0",":","0.0",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"lt",qualifier:["float"]},{type:"node_in",name:"lu",qualifier:["float"]},{type:"node_out",name:"lv",qualifier:["float"]},{type:"textline",tokens:["lv","=","lt","+","lu",";","lv","=","(","lt",">","lu",")","?","1.0",":","0.0",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"lw",qualifier:["float"]},{type:"node_in",name:"lx",qualifier:["float"]},{type:"node_out",name:"ly",qualifier:["float"]},{type:"textline",tokens:["ly","=","abs","(","lx",")","<","0.000001","?","mod","(","lw",",","lx",")",":","0.0",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"lz",qualifier:["float"]},{type:"node_in",name:"lA",qualifier:["vec3"]},{type:"node_in",name:"lB",qualifier:["vec3"]},{type:"node_out",name:"lC",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lD","=","clamp","(","lz",",","0.0",",","1.0",")",";","lC","=","mix","(","lA",",","lB",",","lD",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"lE",qualifier:["float"]},{type:"node_in",name:"lF",qualifier:["vec3"]},{type:"node_in",name:"lG",qualifier:["vec3"]},{type:"node_out",name:"lH",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lI","=","clamp","(","lE",",","0.0",",","1.0",")",";","lH","=","mix","(","lF",",","lF","+","lG",",","lI",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"lJ",qualifier:["float"]},{type:"node_in",name:"lK",qualifier:["vec3"]},{type:"node_in",name:"lL",qualifier:["vec3"]},{type:"node_out",name:"lM",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lN","=","clamp","(","lJ",",","0.0",",","1.0",")",";","lM","=","mix","(","lK",",","lK","*","lL",",","lN",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"lO",qualifier:["float"]},{type:"node_in",name:"lP",qualifier:["vec3"]},{type:"node_in",name:"lQ",qualifier:["vec3"]},{type:"node_out",name:"lR",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lS","=","clamp","(","lO",",","0.0",",","1.0",")",";","lR","=","mix","(","lP",",","lP","-","lQ",",","lS",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"lT",qualifier:["float"]},{type:"node_in",name:"lU",qualifier:["vec3"]},{type:"node_in",name:"lV",qualifier:["vec3"]},{type:"node_out",name:"lW",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lX","=","clamp","(","lT",",","0.0",",","1.0",")",";","float","lY","=","1.0","-","lX",";","lW","=","vec3","(","1.0",")","-","(","vec3","(","lY",")","+","lX","*","(","vec3","(","1.0",")","-","lV",")",")","*","(","vec3","(","1.0",")","-","lU",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"lZ",qualifier:["float"]},{type:"node_in",name:"l_",qualifier:["vec3"]},{type:"node_in",name:"ma",qualifier:["vec3"]},{type:"node_out",name:"mb",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mc","=","clamp","(","lZ",",","0.0",",","1.0",")",";","float","md","=","1.0","-","mc",";","mb","=","l_",";","if","(","ma",".","r","!=","0.0",")","mb",".","r","=","md","*","mb",".","r","+","mc","*","mb",".","r","/","ma",".","r",";","if","(","ma",".","g","!=","0.0",")","mb",".","g","=","md","*","mb",".","g","+","mc","*","mb",".","g","/","ma",".","g",";","if","(","ma",".","b","!=","0.0",")","mb",".","b","=","md","*","mb",".","b","+","mc","*","mb",".","b","/","ma",".","b",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"me",qualifier:["float"]},{type:"node_in",name:"mf",qualifier:["vec3"]},{type:"node_in",name:"mg",qualifier:["vec3"]},{type:"node_out",name:"mh",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mi","=","clamp","(","me",",","0.0",",","1.0",")",";","mh","=","mix","(","mf",",","abs","(","mf","-","mg",")",",","mi",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"mj",qualifier:["float"]},{type:"node_in",name:"mk",qualifier:["vec3"]},{type:"node_in",name:"ml",qualifier:["vec3"]},{type:"node_out",name:"mm",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mn","=","clamp","(","mj",",","0.0",",","1.0",")",";","mm","=","min","(","mk",".","rgb",",","ml",".","rgb","*","mn",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"mo",qualifier:["float"]},{type:"node_in",name:"mp",qualifier:["vec3"]},{type:"node_in",name:"mq",qualifier:["vec3"]},{type:"node_out",name:"mr",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ms","=","clamp","(","mo",",","0.0",",","1.0",")",";","mr","=","max","(","mp",".","rgb",",","mq",".","rgb","*","ms",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"mt",qualifier:["float"]},{type:"node_in",name:"mu",qualifier:["vec3"]},{type:"node_in",name:"mv",qualifier:["vec3"]},{type:"node_out",name:"mw",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mx","=","clamp","(","mt",",","0.0",",","1.0",")",";","float","my","=","1.0","-","mx",";","mw","=","mu",";","if","(","mw",".","r","<","0.5",")","mw",".","r","*=","my","+","2.0","*","mx","*","mv",".","r",";","else","mw",".","r","=","1.0","-","(","my","+","2.0","*","mx","*","(","1.0","-","mv",".","r",")",")","*","(","1.0","-","mw",".","r",")",";","if","(","mw",".","g","<","0.5",")","mw",".","g","*=","my","+","2.0","*","mx","*","mv",".","g",";","else","mw",".","g","=","1.0","-","(","my","+","2.0","*","mx","*","(","1.0","-","mv",".","g",")",")","*","(","1.0","-","mw",".","g",")",";","if","(","mw",".","b","<","0.5",")","mw",".","b","*=","my","+","2.0","*","mx","*","mv",".","b",";","else","mw",".","b","=","1.0","-","(","my","+","2.0","*","mx","*","(","1.0","-","mv",".","b",")",")","*","(","1.0","-","mw",".","b",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"mz",qualifier:["float"]},{type:"node_in",name:"mA",qualifier:["vec3"]},{type:"node_in",name:"mB",qualifier:["vec3"]},{type:"node_out",name:"mC",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mD","=","clamp","(","mz",",","0.0",",","1.0",")",";","mC","=","mA",";","if","(","mC",".","r","!=","0.0",")","{","float","mE","=","1.0","-","mD","*","mB",".","r",";","if","(","mE","<=","0.0",")","mC",".","r","=","1.0",";","else","if","(","(","mE","=","mC",".","r","/","mE",")",">","1.0",")","mC",".","r","=","1.0",";","else","mC",".","r","=","mE",";","}","if","(","mC",".","g","!=","0.0",")","{","float","mF","=","1.0","-","mD","*","mB",".","g",";","if","(","mF","<=","0.0",")","mC",".","g","=","1.0",";","else","if","(","(","mF","=","mC",".","g","/","mF",")",">","1.0",")","mC",".","g","=","1.0",";","else","mC",".","g","=","mF",";","}","if","(","mC",".","b","!=","0.0",")","{","float","mG","=","1.0","-","mD","*","mB",".","b",";","if","(","mG","<=","0.0",")","mC",".","b","=","1.0",";","else","if","(","(","mG","=","mC",".","b","/","mG",")",">","1.0",")","mC",".","b","=","1.0",";","else","mC",".","b","=","mG",";","}","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"mH",qualifier:["float"]},{type:"node_in",name:"mI",qualifier:["vec3"]},{type:"node_in",name:"mJ",qualifier:["vec3"]},{type:"node_out",name:"mK",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mL","=","clamp","(","mH",",","0.0",",","1.0",")",";","float","mM","=","1.0","-","mL",";","float","mN",";","mK","=","mI",";","mN","=","mM","+","mL","*","mJ",".","r",";","if","(","mN","<=","0.0",")","mK",".","r","=","0.0",";","else","if","(","(","mN","=","(","1.0","-","(","1.0","-","mK",".","r",")","/","mN",")",")","<","0.0",")","mK",".","r","=","0.0",";","else","if","(","mN",">","1.0",")","mK",".","r","=","1.0",";","else","mK",".","r","=","mN",";","mN","=","mM","+","mL","*","mJ",".","g",";","if","(","mN","<=","0.0",")","mK",".","g","=","0.0",";","else","if","(","(","mN","=","(","1.0","-","(","1.0","-","mK",".","g",")","/","mN",")",")","<","0.0",")","mK",".","g","=","0.0",";","else","if","(","mN",">","1.0",")","mK",".","g","=","1.0",";","else","mK",".","g","=","mN",";","mN","=","mM","+","mL","*","mJ",".","b",";","if","(","mN","<=","0.0",")","mK",".","b","=","0.0",";","else","if","(","(","mN","=","(","1.0","-","(","1.0","-","mK",".","b",")","/","mN",")",")","<","0.0",")","mK",".","b","=","0.0",";","else","if","(","mN",">","1.0",")","mK",".","b","=","1.0",";","else","mK",".","b","=","mN",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"mO",qualifier:["float"]},{type:"node_in",name:"mP",qualifier:["vec3"]},{type:"node_in",name:"mQ",qualifier:["vec3"]},{type:"node_out",name:"mR",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mS","=","clamp","(","mO",",","0.0",",","1.0",")",";","vec3","mT",",","mU",",","mV",";","mR","=","mP",";","mU","=","iJ","(","mQ",")",";","if","(","mU",".","y","!=","0.0",")","{","mT","=","iJ","(","mR",")",";","mT",".","x","=","mU",".","x",";","mV","=","iU","(","mT",")",";","mR","=","mix","(","mR",",","mV",",","mS",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"mW",qualifier:["float"]},{type:"node_in",name:"mX",qualifier:["vec3"]},{type:"node_in",name:"mY",qualifier:["vec3"]},{type:"node_out",name:"mZ",qualifier:["vec3"]},{type:"textline",tokens:["{","float","m_","=","clamp","(","mW",",","0.0",",","1.0",")",";","float","na","=","1.0","-","m_",";","mZ","=","mX",";","vec3","nb",",","nc",";","nb","=","iJ","(","mZ",")",";","if","(","nb",".","y","!=","0.0",")","{","nc","=","iJ","(","mY",")",";","nb",".","y","=","na","*","nb",".","y","+","m_","*","nc",".","y",";","mZ","=","iU","(","nb",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"nd",qualifier:["float"]},{type:"node_in",name:"ne",qualifier:["vec3"]},{type:"node_in",name:"nf",qualifier:["vec3"]},{type:"node_out",name:"ng",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nh","=","clamp","(","nd",",","0.0",",","1.0",")",";","float","ni","=","1.0","-","nh",";","vec3","nj",",","nk",";","nj","=","iJ","(","ne",")",";","nk","=","iJ","(","nf",")",";","nj",".","z","=","ni","*","nj",".","z","+","nh","*","nk",".","z",";","ng","=","iU","(","nj",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"nl",qualifier:["float"]},{type:"node_in",name:"nm",qualifier:["vec3"]},{type:"node_in",name:"nn",qualifier:["vec3"]},{type:"node_out",name:"no",qualifier:["vec3"]},{type:"textline",tokens:["{","float","np","=","clamp","(","nl",",","0.0",",","1.0",")",";","vec3","nq",",","nr",",","ns",";","no","=","nm",";","nr","=","iJ","(","nn",")",";","if","(","nr",".","y","!=","0.0",")","{","nq","=","iJ","(","no",")",";","nq",".","x","=","nr",".","x",";","nq",".","y","=","nr",".","y",";","ns","=","iU","(","nq",")",";","no","=","mix","(","no",",","ns",",","np",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"nt",qualifier:["float"]},{type:"node_in",name:"nu",qualifier:["vec3"]},{type:"node_in",name:"nv",qualifier:["vec3"]},{type:"node_out",name:"nw",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nx","=","clamp","(","nt",",","0.0",",","1.0",")",";","float","ny","=","1.0","-","nx",";","vec3","nz","=","vec3","(","1.0",")",";","vec3","nA","=","nz","-","(","nz","-","nv",")","*","(","nz","-","nu",")",";","nw","=","ny","*","nu","+","nx","*","(","(","nz","-","nu",")","*","nv","*","nu","+","nu","*","nA",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"nB",qualifier:["float"]},{type:"node_in",name:"nC",qualifier:["vec3"]},{type:"node_in",name:"nD",qualifier:["vec3"]},{type:"node_out",name:"nE",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nF","=","clamp","(","nB",",","0.0",",","1.0",")",";","nE","=","nC",";","if","(","nD",".","r",">","0.5",")","nE",".","r","=","nC",".","r","+","nF","*","(","2.0","*","(","nD",".","r","-","0.5",")",")",";","else","nE",".","r","=","nC",".","r","+","nF","*","(","2.0","*","(","nD",".","r",")","-","1.0",")",";","if","(","nD",".","g",">","0.5",")","nE",".","g","=","nC",".","g","+","nF","*","(","2.0","*","(","nD",".","g","-","0.5",")",")",";","else","nE",".","g","=","nC",".","g","+","nF","*","(","2.0","*","(","nD",".","g",")","-","1.0",")",";","if","(","nD",".","b",">","0.5",")","nE",".","b","=","nC",".","b","+","nF","*","(","2.0","*","(","nD",".","b","-","0.5",")",")",";","else","nE",".","b","=","nC",".","b","+","nF","*","(","2.0","*","(","nD",".","b",")","-","1.0",")",";","nE","=","clamp","(","nE",",","0.0",",","1.0",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"nG",qualifier:["vec3"]},{type:"node_in",name:"nH",qualifier:["float"]},{type:"textline",tokens:["jH","=","nG",";","jM","=","nH",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"jk",qualifier:["const","vec3"]},{type:"node_param",name:"jl",qualifier:["const","vec3"]},{type:"node_param",name:"jm",qualifier:["const","float"]},{type:"node_in",name:"nI",qualifier:["vec3"]},{type:"node_in",name:"nJ",qualifier:["float"]},{type:"node_in",name:"nK",qualifier:["vec3"]},{type:"node_in",name:"nL",qualifier:["vec3"]},{type:"node_out",name:"nM",qualifier:["vec3"]},{type:"node_out",name:"nN",qualifier:["float"]},{type:"node_out",name:"nO",qualifier:["vec3"]},{type:"textline",tokens:["nI","=","clamp","(","nI",",","0.0",",","1.0",")",";","nJ","=","clamp","(","nJ",",","0.0",",","1.0",")",";","nK","=","clamp","(","nK",",","0.0",",","1.0",")",";","vec3","nP","=","nI",";","float","nQ","=","jk","[","0","]",";","vec2","nR","=","vec2","(","jk","[","1","]",",","jk","[","2","]",")",";","vec3","nS","=","jD","*","nI",";","vec3","nT","=","jE","*","jy",";","vec3","nU","=","jl","[","1","]","*","nK",";","float","nV","=","jl","[","0","]",";","float","nW","=","jl","[","2","]",";","float","nX","=","df","(","jF",",","nP",")",";","vec3","nY",";","if","(","jm","==","1.0",")","nY","=","normalize","(","nL",")",";","else","nY","=","jw",";","fa","nZ","=","gE","(","nS",",","nT",",","nP",",","nU",",","jB",",","nY",",","jA",",","nW",",","nR",",","nX",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","nM","=","(","nQ","==","1.0",")","?","nZ",".","a",".","rgb",":","vec3","(","0.0",")",";","nN","=","nJ",";","nO","=","nY",";","if","(","nV","==","1.0",")","{","nM","+=","nZ",".","b",";","jI","=","nZ",".","b",";","}","else","{","jI","=","vec3","(","0.0",")",";","}","jJ","=","nY",";","jL","=","nX",";"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"jn",qualifier:["const","vec3"]},{type:"node_param",name:"jo",qualifier:["const","vec3"]},{type:"node_param",name:"jp",qualifier:["const","float"]},{type:"node_in",name:"n_",qualifier:["vec3"]},{type:"node_in",name:"oa",qualifier:["float"]},{type:"node_in",name:"ob",qualifier:["vec3"]},{type:"node_in",name:"oc",qualifier:["vec3"]},{type:"node_in",name:"od",qualifier:["float"]},{type:"node_in",name:"oe",qualifier:["float"]},{type:"node_in",name:"of",qualifier:["vec4"]},{type:"node_out",name:"og",qualifier:["vec3"]},{type:"node_out",name:"oh",qualifier:["float"]},{type:"node_out",name:"oi",qualifier:["vec3"]},{type:"node_out",name:"oj",qualifier:["vec3"]},{type:"node_out",name:"ok",qualifier:["vec3"]},{type:"textline",tokens:["n_","=","clamp","(","n_",",","0.0",",","1.0",")",";","oa","=","clamp","(","oa",",","0.0",",","1.0",")",";","ob","=","clamp","(","ob",",","0.0",",","1.0",")",";","vec3","nP","=","n_",";","float","nQ","=","jn","[","0","]",";","vec2","nR","=","vec2","(","jn","[","1","]",",","jn","[","2","]",")",";","vec3","nS","=","od","*","n_",";","vec3","nT","=","jE","*","jy",";","vec3","nU","=","jo","[","1","]","*","ob",";","float","nV","=","jo","[","0","]",";","float","nW","=","jo","[","2","]",";","float","nX","=","df","(","jF",",","nP",")",";","vec3","nY",";","if","(","jp","==","1.0",")","nY","=","normalize","(","oc",")",";","else","nY","=","jw",";","fa","nZ","=","gE","(","nS",",","nT",",","nP",",","nU",",","jB",",","nY",",","jA",",","nW",",","nR",",","nX",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","oe",",","of",")",";","og","=","(","nQ","==","1.0",")","?","nZ",".","a",".","rgb",":","vec3","(","0.0",")",";","oh","=","oa",";","oi","=","nY",";","oj","=","nZ",".","a",".","rgb",";","ok","=","nZ",".","b",";","if","(","nV","==","1.0",")","{","og","+=","nZ",".","b",";","jI","=","nZ",".","b",";","}","else","{","jI","=","vec3","(","0.0",")",";","}","jJ","=","nY",";","jL","=","nX",";"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"jq",qualifier:["vec3"]},{type:"node_out",name:"ol",qualifier:["vec3"]},{type:"textline",tokens:["ol","=","jq",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"om",qualifier:["vec3"]},{type:"node_out",name:"on",qualifier:["float"]},{type:"textline",tokens:["on","=","om",".","r","*","0.35","+","om",".","g","*","0.45","+","om",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"oo",qualifier:["vec3"]},{type:"node_out",name:"op",qualifier:["float"]},{type:"node_out",name:"oq",qualifier:["float"]},{type:"node_out",name:"or",qualifier:["float"]},{type:"textline",tokens:["op","=","oo",".","r",";","oq","=","oo",".","g",";","or","=","oo",".","b",";"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"os",qualifier:["float"]},{type:"node_in",name:"ot",qualifier:["float"]},{type:"node_in",name:"ou",qualifier:["float"]},{type:"node_out",name:"ov",qualifier:["float"]},{type:"textline",tokens:["ov","=","1.0","/","(","1.0","+","pow","(","2.71828183",",","-","(","(","os","-","ou",")","*","ot",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"ow",qualifier:["vec3"]},{type:"node_out",name:"ox",qualifier:["vec3"]},{type:"textline",tokens:["ox","=","pow","(","ow",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"oy",qualifier:["vec3"]},{type:"node_out",name:"oz",qualifier:["vec3"]},{type:"textline",tokens:["oz","=","pow","(","oy",",","vec3","(","1.0","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oA",qualifier:["vec3"]},{type:"node_out",name:"oB",qualifier:["vec3"]},{type:"node_out",name:"oC",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oD","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","iY","(","oA",")",")",";","oB","=","oD",".","xyz",";","eg","(","oB",")",";","oC","=","oD",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oE",qualifier:["vec3"]},{type:"node_out",name:"oF",qualifier:["vec3"]},{type:"node_out",name:"oG",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oH","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","iY","(","oE",")",")",";","jK","=","oH",".","xyz","-","0.5",";","oF","=","normalize","(","jG","*","jK",")",";","oG","=","oH",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"oI",qualifier:["vec3"]},{type:"node_out",name:"oJ",qualifier:["vec3"]},{type:"node_out",name:"oK",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oL","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","oI",")",";","oJ","=","oL",".","xyz",";","eg","(","oJ",")",";","oK","=","oL",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oM",qualifier:["vec3"]},{type:"node_in",name:"oN",qualifier:["vec3"]},{type:"node_out",name:"oO",qualifier:["vec3"]},{type:"node_out",name:"oP",qualifier:["float"]},{type:"node_out",name:"oQ",qualifier:["vec3"]},{type:"node_out",name:"oR",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oS","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","iY","(","oM",")",")",";","oO","=","oS",".","xyz",";","eg","(","oO",")",";","oP","=","oS",".","w",";","oS","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","iY","(","oN",")",")",";","oQ","=","oS",".","xyz",";","eg","(","oQ",")",";","oR","=","oS",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oT",qualifier:["vec3"]},{type:"node_in",name:"oU",qualifier:["vec3"]},{type:"node_out",name:"oV",qualifier:["vec3"]},{type:"node_out",name:"oW",qualifier:["float"]},{type:"node_out",name:"oX",qualifier:["vec3"]},{type:"node_out",name:"oY",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oZ","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","iY","(","oT",")",")",";","jK","=","oZ",".","xyz","-","0.5",";","oV","=","normalize","(","jG","*","jK",")",";","oW","=","oZ",".","w",";","oZ","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","iY","(","oU",")",")",";","jK","=","oZ",".","xyz","-","0.5",";","oX","=","normalize","(","jG","*","jK",")",";","oY","=","oZ",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"o_",qualifier:["vec3"]},{type:"node_in",name:"pa",qualifier:["vec3"]},{type:"node_in",name:"pb",qualifier:["vec3"]},{type:"node_out",name:"pc",qualifier:["vec3"]},{type:"node_out",name:"pd",qualifier:["float"]},{type:"node_out",name:"pe",qualifier:["vec3"]},{type:"node_out",name:"pf",qualifier:["float"]},{type:"node_out",name:"pg",qualifier:["vec3"]},{type:"node_out",name:"ph",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pi","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iY","(","o_",")",")",";","pc","=","pi",".","xyz",";","eg","(","pc",")",";","pd","=","pi",".","w",";","pi","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iY","(","pa",")",")",";","pe","=","pi",".","xyz",";","eg","(","pe",")",";","pf","=","pi",".","w",";","pi","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iY","(","pb",")",")",";","pg","=","pi",".","xyz",";","eg","(","pg",")",";","ph","=","pi",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pj",qualifier:["vec3"]},{type:"node_in",name:"pk",qualifier:["vec3"]},{type:"node_in",name:"pl",qualifier:["vec3"]},{type:"node_out",name:"pm",qualifier:["vec3"]},{type:"node_out",name:"pn",qualifier:["float"]},{type:"node_out",name:"po",qualifier:["vec3"]},{type:"node_out",name:"pp",qualifier:["float"]},{type:"node_out",name:"pq",qualifier:["vec3"]},{type:"node_out",name:"pr",qualifier:["float"]},{type:"textline",tokens:["{","vec4","ps","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iY","(","pj",")",")",";","jK","=","ps",".","xyz","-","0.5",";","pm","=","normalize","(","jG","*","jK",")",";","pn","=","ps",".","w",";","ps","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iY","(","pk",")",")",";","jK","=","ps",".","xyz","-","0.5",";","po","=","normalize","(","jG","*","jK",")",";","pp","=","ps",".","w",";","ps","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iY","(","pl",")",")",";","jK","=","ps",".","xyz","-","0.5",";","pq","=","normalize","(","jG","*","jK",")",";","pr","=","ps",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"jr",qualifier:["float"]},{type:"node_out",name:"pt",qualifier:["float"]},{type:"textline",tokens:["pt","=","jr",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"pu",qualifier:["vec3"]},{type:"node_in",name:"pv",qualifier:["vec3"]},{type:"node_out",name:"pw",qualifier:["vec3"]},{type:"node_out",name:"px",qualifier:["float"]},{type:"textline",tokens:["pw","=","pu","+","pv",";","px","=","(","abs","(","pw","[","0","]",")","+","abs","(","pw","[","1","]",")","+","abs","(","pw","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"py",qualifier:["vec3"]},{type:"node_in",name:"pz",qualifier:["vec3"]},{type:"node_out",name:"pA",qualifier:["vec3"]},{type:"node_out",name:"pB",qualifier:["float"]},{type:"textline",tokens:["pA","=","py","-","pz",";","pB","=","(","abs","(","pA","[","0","]",")","+","abs","(","pA","[","1","]",")","+","abs","(","pA","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"pC",qualifier:["vec3"]},{type:"node_in",name:"pD",qualifier:["vec3"]},{type:"node_out",name:"pE",qualifier:["vec3"]},{type:"node_out",name:"pF",qualifier:["float"]},{type:"textline",tokens:["pE","=","pC","+","pD",";","pF","=","length","(","pE",")",";","pE","=","normalize","(","pE",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"pG",qualifier:["vec3"]},{type:"node_in",name:"pH",qualifier:["vec3"]},{type:"node_out",name:"pI",qualifier:["vec3"]},{type:"node_out",name:"pJ",qualifier:["float"]},{type:"textline",tokens:["pI","=","vec3","(","0.0",")",";","pJ","=","dot","(","pG",",","pH",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"pK",qualifier:["vec3"]},{type:"node_in",name:"pL",qualifier:["vec3"]},{type:"node_out",name:"pM",qualifier:["vec3"]},{type:"node_out",name:"pN",qualifier:["float"]},{type:"textline",tokens:["pM","=","cross","(","pK",",","pL",")",";","pN","=","length","(","pM",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"pO",qualifier:["vec3"]},{type:"node_in",name:"pP",qualifier:["vec3"]},{type:"node_out",name:"pQ",qualifier:["vec3"]},{type:"node_out",name:"pR",qualifier:["float"]},{type:"textline",tokens:["pQ","=","normalize","(","pO",")",";","pR","=","length","(","pO",")",";","pP",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"pS",qualifier:["vec3"]},{type:"node_in",name:"pT",qualifier:["vec3"]},{type:"node_out",name:"pU",qualifier:["vec3"]},{type:"textline",tokens:["pU","=","reflect","(","-","pS",",","pT",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pV",qualifier:["vec3"]},{type:"node_in",name:"pW",qualifier:["float"]},{type:"node_in",name:"pX",qualifier:["const","float"]},{type:"node_out",name:"pY",qualifier:["vec3"]},{type:"textline",tokens:["vec3","pZ","=","normalize","(","jA","*","jG",")",";","float","p_","=","1.0","/","pX",";","vec2","qa","=","pZ",".","xy","*","pW","/","(","pX","*","pZ",".","z",")",";","float","qb","=","1.0",";","vec2","qc","=","iY","(","pV",")",";","float","qd","=","texture2D","(","node_PARALLAX_var_texture",",","qc",")",".","a",";","for","(","float","qe","=","1.0",";","qe","<=","pX",";","qe","++",")","{","if","(","qd","<","qb",")","{","qb","-=","p_",";","qc","-=","qa",";","qd","=","texture2D","(","node_PARALLAX_var_texture",",","qc",")",".","a",";","}","}","vec2","qf","=","qc","+","qa",";","float","qg","=","texture2D","(","node_PARALLAX_var_texture",",","qf",")",".","a","-","(","qb","+","p_",")",";","float","qh","=","qd","-","qb",";","float","qi","=","qh","/","(","qh","-","qg",")",";","qc","=","qi","*","qf","+","(","1.0","-","qi",")","*","qc",";","pY","=","iW","(","qc",")",";"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"qj",qualifier:["vec3"]},{type:"node_out",name:"qk",qualifier:["vec3"]},{type:"textline",tokens:["qk","=","clamp","(","qj",",","0.0",",","1.0",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"ql",qualifier:["float"]},{type:"node_in",name:"qm",qualifier:["float"]},{type:"node_in",name:"qn",qualifier:["float"]},{type:"node_in",name:"qo",qualifier:["float"]},{type:"node_in",name:"qp",qualifier:["float"]},{type:"node_out",name:"qq",qualifier:["float"]},{type:"node_out",name:"qr",qualifier:["vec4"]},{type:"textline",tokens:["qq","=","ql",";","qr","=","vec4","(","qm",",","qn",",","qo",",","qp",")",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","js","=","h_",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"textline",tokens:["vec3","jt","=","ia",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")","jt","=","-","jt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ju","=","cross","(","jt",",","ib",".","xyz",")","*","ib",".","w",";","mat3","jv","=","mat3","(","ib",".","xyz",",","ju",",","jt",")",";"]}]}}]},{type:"textline",tokens:["vec3","jw","=","normalize","(","jt",")",";","float","jx","=","0.5","*","jw",".","y","+","0.5",";","vec3","jy","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","jx",")",";","vec3","jz","=","u_camera_eye_frag","-","h_",";","vec3","jA","=","normalize","(","jz",")",";","vec3","jB","=","h_",";","vec4","jC","=","cx",";","float","jD","=","u_emit",";","float","jE","=","u_ambient",";","float","jF","=","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","jG","=","jv",";"]}]}}]},{type:"textline",tokens:["vec3","jH",";","vec3","jI",";","vec3","jJ",";","vec3","jK",";","float","jL",";","float","jM",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","qs","=","jH",";","float","qt","=","jM",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["iA","(","qs",",","jA",",","jJ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jI",",","jK",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iA","(","qs",",","jA",",","jJ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jI",",","vec2","(","0.0",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","qu","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["qs","=","max","(","qs","-","sqrt","(","0.01","*","-","min","(","js",",","0.0",")",")",",","0.5","*","qs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qv","=","u_sun_quaternion",";","vec3","qw","=","h_",";","qw",".","xz","=","10.0","*","sin","(","0.1","*","qw",".","xz",")",";","vec3","qx","=","qw","+","2.0","*","cross","(","-","qv",".","xyz",",","cross","(","-","qv",".","xyz",",","qw",")","+","qv",".","w","*","qw",")",";","vec2","qy","=","qx",".","xz",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","qz","=","(","jv",")",";","vec3","qA","=","qz","*","jJ",";","qy","+=","qA",".","st",";"]}]}}]},{type:"textline",tokens:["hY","(","qs",",","qy",".","st",",","js",",","u_time",",","jL",",","jt",",","u_sun_direction",",","qu",",","h_",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","qB","=","eA","(","u_cube_fog",",","jA",")",";","vec4","qC","=","vec4","(","qB",",","u_fog_color_density",".","a",")",";","eg","(","qC",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qC","=","u_fog_color_density",";","qC",".","rgb","*=","qu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eR","(","qs",",","length","(","cx",")",",","jA",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","qC",",","js",",","length","(","qu",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["et","(","qs",",","length","(","cx",")",",","qC",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","qD","=","texture2DProj","(","u_shadow_mask",",","cw",")",".","rg",";","float","qE","=","qD",".","g",";","qs","=","vec3","(","qE",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jB","=","h_",";","vec4","jC","=","cx",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jw","=","normalize","(","ia",")",";"]}]}}]},{type:"textline",tokens:["vec3","jH",";","float","jM",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","qs","=","jH",";","float","qt","=","jM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","qt","<","0.5",")","discard",";","qt","=","1.0",";"]}]}}]},{type:"textline",tokens:["ei","(","qs",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","qs",",","qt",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","qs",",","qt",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","h_",";","varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"iZ",qualifier:["varying","vec2"]},{type:"textline",tokens:["iZ","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"jd",qualifier:["varying","vec3"]},{type:"textline",tokens:["jd","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"je",qualifier:["varying","float"]},{type:"textline",tokens:["je","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"jf",qualifier:["varying","vec2"]},{type:"textline",tokens:["jf","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"jg",qualifier:["varying","vec3"]},{type:"textline",tokens:["jg","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","jh","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jj","=","vec3","(","a_tangent",")",";","vec3","jk","=","a_tangent","[","3","]","*","cross","(","ji",",","jj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jj","=","vec3","(","0.0",")",";","vec3","jk","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"elif",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jh","=","mix","(","jh",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["ji","=","mix","(","ji",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jl","=","vec3","(","a_tangent",")",";","vec3","jm","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","jl",")",";","jj","=","mix","(","jj",",","jl",",","u_va_frame_factor",")",";","jk","=","mix","(","jk",",","jm",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bq","(","jh",",","jj",",","jk",",","ji",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","mat4","jp","=","ae","(","u_camera_eye",",","jo",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","jp","=","jp","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jq",")",";"]}]}}]},{type:"textline",tokens:["c","jr","=","al","(","jh","-","jn",",","jn",",","jj",",","jk",",","ji",",","jp",")",";","jr",".","b","=","jo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","jr","=","al","(","jh",",","jn",",","jj",",","jk",",","ji",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["float","js","=","(","dot","(","cross","(","jr",".","e",",","jr",".","c",")",",","jr",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ib","=","vec4","(","jr",".","c",",","js",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","mat4","jp","=","ae","(","u_camera_eye",",","jo",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","jp","=","jp","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jq",")",";"]}]}}]},{type:"textline",tokens:["c","jr","=","al","(","jh","-","jn",",","jn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ji",",","jp",")",";","jr",".","b","=","jo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","jr","=","al","(","jh",",","jn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ji",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ch","(","jr",".","a",",","jr",".","b",",","ji",")",";"]}]}}]},{type:"textline",tokens:["h_","=","jr",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["ia","=","jr",".","e",";"]}]}}]},{type:"textline",tokens:["cx","=","u_view_matrix","*","vec4","(","jr",".","a",",","1.0",")",";","vec4","jt","=","u_proj_matrix","*","cx",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["d_","(","jt",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["d_","(","jr",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","ju","=","jt",".","x",";","float","jv","=","jt",".","y",";","float","jw","=","jt",".","w",";","cw",".","x","=","(","ju","+","jw",")","/","2.0",";","cw",".","y","=","(","jv","+","jw",")","/","2.0",";","cw",".","z","=","jw",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","jt",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec3","cx",";","void","main","(",")","{","float","ji","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","jj","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","ji",")",";","float","jk","=","u_diffuse_color",".","a","*","jh","*","(","1.0","-","clamp","(","jj",",","0.0",",","1.0",")",")",";","vec3","jl","=","ic","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["et","(","jl",",","length","(","cx",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ei","(","jl",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","jl",",","jk",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jl",",","jk",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"include",file:"particles.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec3","cx",";","struct","jP","{","float","iB",";","vec3","iC",";","float","iD",";","vec3","iE",";","float","iF",";","}",";","jP","jW","(",")","{","float","jQ","=","u_p_time","-","u_p_starttime",";","jP","jR",";","if","(","jQ","<","0.0",")","{","jR",".","iB","=","0.0001",";","jR",".","iC","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","else","{","float","jS",";","if","(","u_p_cyclic","==","1",")","{","float","jT","=","u_p_endtime","-","u_p_starttime",";","jS","=","mod","(","jQ",",","jT",")","-","a_p_delay",";","if","(","jS","<","0.0",")","jS","+=","jT",";","}","else","{","jS","=","jQ","-","a_p_delay",";","}","if","(","jS","<","0.0","||","jS",">=","a_p_lifetime",")","{","jR",".","iB","=","0.0001",";","jR",".","iC","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","else","{","vec3","jU","=","a_position",";","vec3","jV","=","a_normal",";","jU","+=","u_p_nfactor","*","jS","*","jV",";","jU","+=","a_p_vels",".","xyz","*","jS",";","jU",".","y","-=","u_p_gravity","*","jS","*","jS","/","2.0",";","jU","+=","(","u_p_wind","/","u_p_mass",")","*","jS","*","jS","/","2.0",";","jR",".","iC","=","jU",";","jR",".","iF","=","a_p_vels",".","w","*","jS",";","jR",".","iB","=","jt","(","jS",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","jR",".","iD","=","jO","(","jS",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","jR",".","iE","=","jF","(","jS",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","jR",";","}","void","main","(",")","{","jP","jX",";","jX","=","jW","(",")",";","vec4","jY","=","u_view_matrix","*","vec4","(","jX",".","iC",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","jY",";","jh","=","jX",".","iD",";","ic","=","jX",".","iE",";","cx","=","jY",".","xyz",";","float","jZ","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","jX",".","iB","*","jZ",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_sampler",",","a",")",";","vec3","iC","=","iB",".","rgb",";","eg","(","iC",")",";","iC","*=","ic",";","float","iD","=","iB",".","a","*","jh",";","ei","(","iC",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","iC",",","iD",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iC",",","iD",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"include",file:"particles.glslv"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","float","u_p_size",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec2","a",";","varying","vec4","cx",";","struct","jP","{","float","iB",";","vec3","iC",";","float","iD",";","vec3","iE",";","float","iF",";","}",";","jP","jW","(",")","{","float","jQ","=","u_p_time","-","u_p_starttime",";","jP","jR",";","if","(","jQ","<","0.0",")","{","jR",".","iB","=","0.0001",";","jR",".","iC","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","else","{","float","jS",";","if","(","u_p_cyclic","==","1",")","{","float","jT","=","u_p_endtime","-","u_p_starttime",";","jS","=","mod","(","jQ",",","jT",")","-","a_p_delay",";","if","(","jS","<","0.0",")","jS","+=","jT",";","}","else","{","jS","=","jQ","-","a_p_delay",";","}","if","(","jS","<","0.0","||","jS",">=","a_p_lifetime",")","{","jR",".","iB","=","0.0001",";","jR",".","iC","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","else","{","vec3","jU","=","a_position",";","vec3","jV","=","a_normal",";","jU","+=","u_p_nfactor","*","jS","*","jV",";","jU","+=","a_p_vels",".","xyz","*","jS",";","jU",".","y","-=","u_p_gravity","*","jS","*","jS","/","2.0",";","jU","+=","(","u_p_wind","/","u_p_mass",")","*","jS","*","jS","/","2.0",";","jR",".","iC","=","jU",";","jR",".","iF","=","a_p_vels",".","w","*","jS",";","jR",".","iB","=","jt","(","jS",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","jR",".","iD","=","jO","(","jS",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","jR",".","iE","=","jF","(","jS",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","jR",";","}","float","jZ","(","vec2","jX",",","vec2","jY",")","{","return","(","atan","(","jY",".","y",",","jY",".","x",")","-","atan","(","jX",".","y",",","jX",".","x",")",")",";","}","void","main","(",")","{","jP","j_",";","j_","=","jW","(",")",";","float","ka",";","mat4","kb",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","ka","=","j_",".","iF",";","kb","=","B","(","j_",".","iC",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","ka","=","j_",".","iF",";","kb","=","m","(",")",";","kb","[","3","]","=","vec4","(","j_",".","iC",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","ka","=","j_",".","iF",";","kb","=","q","(","radians","(","-","90.0",")",")",";","kb","[","3","]","=","vec4","(","j_",".","iC",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","ka","=","jZ","(","vec2","(","0.0",",","-","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","j_",".","iF",";","kb","=","o","(","radians","(","90.0",")",")",";","kb","[","3","]","=","vec4","(","j_",".","iC",",","1.0",")",";","}","vec4","kc","=","vec4","(","a_p_bb_vertex","*","2.0","*","j_",".","iB","*","u_p_size",",","0.0",",","1.0",")",";","vec4","kd","=","kb","*","s","(","ka",")","*","kc",";","cx","=","u_view_matrix","*","kd",";","vec4","ke","=","u_proj_matrix","*","cx",";","gl_Position","=","ke",";","jh","=","j_",".","iD",";","ic","=","j_",".","iE",";","a","=","a_p_bb_vertex","+","0.5",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","jP",";","const","float","jQ","=","0.99",";","const","float","jR","=","1.8",";","const","int","jS","=","8",";","float","kb","(","vec3","jT",",","vec3","jU",")","{","float","jV","=","dot","(","jU",",","jU",")",";","float","jW","=","2.0","*","dot","(","jU",",","jT",")",";","float","jX","=","dot","(","jT",",","jT",")","-","1.0",";","float","jY","=","jW","*","jW","-","4.0","*","jV","*","jX",";","float","jZ","=","sqrt","(","jY",")",";","float","j_","=","(","-","jW","-","jZ",")","/","2.0",";","float","ka","=","jX","/","j_",";","return","ka",";","}","float","ki","(","float","kc",",","float","kd",")","{","float","ke","=","3.0","*","(","1.0","-","kd","*","kd",")",";","float","kf","=","2.0","*","(","2.0","+","kd","*","kd",")",";","float","kg","=","1.0","+","kc","*","kc",";","float","kh","=","pow","(","1.0","+","kd","*","kd","-","2.0","*","kd","*","kc",",","1.5",")",";","return","(","ke","/","kf",")","*","(","kg","/","kh",")",";","}","float","kq","(","vec3","kj",",","vec3","kk",",","float","kl",")","{","float","km","=","dot","(","kk",",","-","kj",")",";","if","(","km","<","0.0",")","{","return","1.0",";","}","vec3","kn","=","kj","+","km","*","kk",";","if","(","length","(","kn",")","<","kl",")","{","return","0.0",";","}","else","if","(","length","(","kn",")",">=","kl",")","{","vec3","ko","=","normalize","(","kn",")","*","kl","-","kj",";","float","kp","=","acos","(","dot","(","normalize","(","ko",")",",","kk",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","kp","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","ku","(","float","kr",",","vec3","ks",",","float","kt",")","{","return","ks","-","ks","*","pow","(","u_sky_color",",","vec3","(","kt","/","kr",")",")",";","}","void","main","(",")","{","vec3","kv","=","normalize","(","jP",")",";","vec3","kw","=","u_sun_direction",";","float","kx","=","dot","(","kv",",","kw",")",";","float","ky","=","ki","(","kx",",","-","0.01",")","*","u_rayleigh_brightness","*","kw",".","y",";","float","kz","=","ki","(","kx","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","kw",".","y",")",";","float","kA","=","smoothstep","(","0.0",",","100.0",",","ki","(","kx",",","0.9995",")",")","*","u_spot_brightness",";","vec3","kB","=","vec3","(","0.0",",","jQ",",","0.0",")",";","float","kC","=","kb","(","kB",",","kv",")",";","float","kD","=","kC","/","float","(","jS",")",";","float","kE","=","kq","(","kB",",","kv",",","jQ","-","0.3",")",";","vec3","kF","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","kG","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","kH","=","0",";","kH","<","jS",";","kH","++",")","{","float","kI","=","kD","*","float","(","kH",")",";","vec3","kJ","=","kB","+","kv","*","kI",";","float","kK","=","kq","(","kJ",",","kw",",","jQ","-","0.2",")",";","float","kL","=","kb","(","kJ",",","kw",")",";","vec3","kM","=","ku","(","kL",",","vec3","(","jR",")",",","u_scatter_strength",")","*","kK",";","kF","+=","ku","(","sqrt","(","kI",")",",","u_sky_color","*","kM",",","u_rayleigh_strength",")",";","kG","+=","ku","(","kI",",","kM",",","u_mie_strength",")",";","}","kF","=","kF","*","kE","*","pow","(","kC",",","u_rayleigh_collection_power",")","/","float","(","jS",")",";","kG","=","(","kG","*","kE","*","pow","(","kC",",","u_mie_collection_power",")",")","/","float","(","jS",")",";","vec3","kN","=","vec3","(","kA","*","kG","+","kz","*","kG","+","ky","*","kF",")",";","ei","(","kN",")",";","gl_FragColor","=","vec4","(","kN",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","jP",";","void","main","(",")","{","vec4","iB","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","iC","=","u_cube_view_matrix","*","iB",";","jP","=","iC",".","xyz",";","gl_Position","=","iB",";","}"]}]},exports["shadeless.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";","varying","vec2","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cx",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iB","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","=","ic",";","eg","(","iC",")",";","vec4","iD","=","vec4","(","iC",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iD","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iE","=","texture2D","(","u_colormap0",",","iB",")",";","eg","(","iE",".","rgb",")",";","vec4","iF","=","texture2D","(","u_colormap1",",","iB",")",";","eg","(","iF",".","rgb",")",";","vec4","iG","=","texture2D","(","u_stencil0",",","iB",")",";","vec4","iH","=","mix","(","iE",",","iF",",","iG",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iH","=","texture2D","(","u_colormap0",",","iB","+","u_time","*","u_colormap0_uv_velocity",")",";","eg","(","iH",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["iD",".","rgb","=","mix","(","iD",".","rgb",",","iH",".","rgb",",","u_diffuse_color_factor",")",";","iD",".","a","=","iH",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["iD",".","rgb","*=","mix","(","vec3","(","1.0",")",",","iH",".","rgb",",","u_diffuse_color_factor",")",";","iD",".","a","=","iH",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","iI","=","iD",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["float","iJ","=","iD",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","iJ","<","0.5",")","discard",";","iJ","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iJ","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["et","(","iI",",","length","(","cx",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ei","(","iI",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","iI",",","iJ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iI",",","iJ",")",";","}"]}]},exports["shadeless.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cx",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","iB","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iB","=","mix","(","iB",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","=","vec3","(","0.0",")",";","vec3","iD","=","vec3","(","0.0",")",";","vec3","iE","=","vec3","(","0.0",")",";","bq","(","iB",",","iC",",","iD",",","iE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","=","(","u_model_matrix","*","vec4","(","iF",",","1.0",")",")",".","xyz",";","mat4","iH","=","ae","(","u_camera_eye",",","iG",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iI","=","(","u_model_matrix","*","vec4","(","iF",",","1.0",")",")",".","xyz",";","iH","=","iH","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iI",")",";"]}]}}]},{type:"textline",tokens:["c","iJ","=","al","(","iB","-","iF",",","iF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iH",")",";","iJ",".","b","=","iG",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","iJ","=","al","(","iB",",","iF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iK","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iK","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ch","(","iJ",".","a",",","iJ",".","b",",","iK",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ao","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ic","=","a_color",";"]}]}}]},{type:"textline",tokens:["cx","=","u_view_matrix","*","vec4","(","iJ",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","cx",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_sampler",",","a",")",";","ei","(","iB",".","rgb",")",";","el","(","iB",".","rgb",",","iB",".","a",")",";","gl_FragColor","=","iB",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","iB","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","iC","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","iB",",","0.0",")",";","iC",".","x","/=","iC",".","w",";","iC",".","y","/=","iC",".","w",";","iC","+=","99999.0","*","step","(","iC",".","z",",","0.0",")",";","iC","+=","100.0","*","(","step","(","1.0",",","abs","(","iC",".","x",")",")","+","step","(","1.0",",","abs","(","iC",".","y",")",")",")",";","iC",".","x","=","-","a_lf_dist","*","iC",".","x",";","iC",".","y","=","-","a_lf_dist","*","iC",".","y",";","float","iD","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","iE","=","vec2","(","a_lf_bb_vertex",".","x","/","iD",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","1.0",")","{","const","float","iF","=","1.9",";","iE","*=","(","1.0","+","iF","*","length","(","iC",".","xy",")",")",";","}","gl_Position","=","vec4","(","iC",".","xy","+","iE",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jP",";","void","main","(",")","{","vec3","iB","=","textureCube","(","u_sky",",","jP",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","iB",".","rgb",")",";","float","iC","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","iC","=","min","(","-","iC","*","0.03",",","0.8",")",";","float","iD","=","length","(","u_sun_intensity",")","+","u_environment_energy",";","vec3","iE","=","normalize","(","jP",")",";","vec3","iF","=","vec3","(","0.0",")",";","vec4","iG","=","u_underwater_fog_color_density",";","iG",".","rgb","=","mix","(","iG",".","rgb",",","iF",",","min","(","-","iE",".","y","+","iC",",","1.0",")",")","*","iD",";","float","iH","=","clamp","(","sign","(","iE",".","y","-","0.05","*","iC",")",",","0.0",",","1.0",")",";","iB","=","mix","(","iG",".","rgb",",","iB",",","iH",")",";","ei","(","iB",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iB",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","jP",";","void","main","(",")","{","vec4","iB","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","iC","=","u_sky_vp_inverse","*","iB",";","jP","=","iC",".","xyz",";","gl_Position","=","iB",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0001"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_depth",";"]}]}},{type:"elif",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_alphamap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";","uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ib",";","varying","vec3","jQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jR",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","jZ","(","in","float","jU",",","inout","vec2","jV",",","in","vec2","jW",")","{","vec4","jX","=","texture2D","(","u_shore_depth",",","jV",")",";","float","jY","=","cq","(","jX",")",";","if","(","jY","<","jT",")","{","jV","=","jW",";","return","jU",";","}","else","{","return","jY",";","}","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","j_","=","mat3","(","ib",",","jQ",",","ia",")",";"]}]}}]},{type:"textline",tokens:["vec3","ka","=","normalize","(","ia",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","j_","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","ka","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","(","REFLECTIVE","||","FOAM","||","(","WATER_EFFECTS","&&","!","DISABLE_FOG",")",")","||","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","kb","=","h_",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kc","=","vec2","(","jR",".","x",",","-","jR",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","kc","=","vec2","(","h_",".","x",",","-","h_",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","kc","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kd","=","vec3","(","0.0",")",";","vec3","ke","=","texture2D","(","u_normalmap0",",","kc","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kd","+=","ke",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kf","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["kf","+=","ke",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["ke","=","texture2D","(","u_normalmap0",",","kc","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kd","+=","ke",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["kf","+=","ke",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["ke","=","texture2D","(","u_normalmap0",",","kc","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kd","+=","ke",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["kf","+=","ke",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["ke","=","texture2D","(","u_normalmap0",",","kc","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kd","+=","ke",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["kf","+=","ke",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kg","=","mix","(","ka",",","normalize","(","j_","*","kf",")",",","0.2",")",";","kg","=","normalize","(","kg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["ka","=","mix","(","ka",",","normalize","(","j_","*","kd",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ka","=","mix","(","ka",",","normalize","(","j_","*","kd",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["ka","=","normalize","(","ka",")",";"]}]}}]},{type:"textline",tokens:["vec3","kh","=","normalize","(","hZ",")",";","vec3","ki","=","reflect","(","-","kh",",","ka",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kj","=","cw",".","xy","/","cw",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","kk","=","jT","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","kl","=","u_diffuse_color",".","a",";","vec4","km","=","texture2DProj","(","u_shore_depth",",","cw",")",";","float","kn","=","cq","(","km",")",";","float","ko","=","max","(","kn","-","jT",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kp","=","kj",".","xy","+","ka",".","xz","*","REFR_BUMP","/","jT",";","float","kq","=","jZ","(","kn",",","kp",",","kj",")",";","float","kr","=","max","(","kq","-","jT",",","0.0",")",";","float","ks","=","u_view_max_depth","/","ABSORB","*","kr",";","float","kt",";","if","(","u_cam_water_depth","<","0.0",")","kt","=","0.0",";","else","kt","=","min","(","kl","*","ks",",","1.0",")",";","float","ku","=","u_view_max_depth","/","ABSORB","*","ko",";","kl","=","min","(","15.0","*","kl","*","u_view_max_depth","*","ko",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ku","=","u_view_max_depth","/","ABSORB","*","ko",";","kl","=","min","(","kl","*","ku",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["kl","*=","min","(","5.0","*","kk",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kv","=","texture2D","(","u_alphamap",",","kc",")",";","float","kl","=","kv",".","r",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kl","=","u_diffuse_color",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kt","=","1.0","-","kl",";","vec2","kp","=","kj",".","xy","+","ka",".","xz","*","REFR_BUMP","/","jT",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kw","=","texture2D","(","u_refractmap",",","kp",")",".","rgb",";","eg","(","kw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kx","=","pow","(","min","(","jS",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","ky","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","kx",")",";","kx","=","pow","(","min","(","jS",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","ky","=","mix","(","u_shore_water_col",",","ky",",","kx",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ky","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["vec3","kz","=","u_diffuse_intensity","*","ky",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","kA","=","max","(","1.0","-","u_view_max_depth","*","ko",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kA","=","1.0","-","kl",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","kB","=","max","(","3.0","*","kb",",","0.0",")",";","kB","*=","kB",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kC","=","normalize","(","vec3","(","jS",".","r",",","0.0",",","jS",".","g",")",")",";","vec3","kD","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","kC",",","0.8",")",")",";","float","kE","=","max","(","2.5","*","dot","(","kg",",","kD",")","-","0.7",",","0.0",")",";","kA","+=","kE","*","(","1.0","-","jS",".","b",")",";","kB","*=","(","1.0","-","0.95","*","pow","(","jS",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["kA","+=","kB",";","kA","=","min","(","u_foam_factor","*","kA",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","kF","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","kc","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","kG","=","u_specular_params","[","0","]",";","float","kH","=","u_specular_params","[","1","]",";","vec3","kI","=","kG","*","u_specular_color",";","vec3","kJ","=","u_environment_energy","*","u_zenith_color",";","vec3","kK","=","u_ambient","*","kJ",";","vec3","kL","=","kK","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kM","=","kj",".","xy","+","ka",".","xz","*","REFL_BUMP","/","jT",";","float","kN","=","u_reflect_factor",";","vec3","kO",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kO","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kO","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","kP","=","dot","(","kh",",","ka",")",";","kN","*=","max","(","1.0","-","1.0","/","kP",",","1.0",")",";","}","else","{","kO","=","texture2D","(","u_reflectmap",",","kM",")",".","rgb",";","eg","(","kO",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["float","kN","=","u_mirror_factor",";","vec3","kO","=","kL","*","textureCube","(","u_mirrormap",",","ki",")",".","rgb",";","eg","(","kO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kN","=","1.0",";","vec3","kO","=","kL","*","vec3","(","0.3",",","0.5",",","1.0",")",";","eg","(","kO",")",";"]}]}}]},{type:"textline",tokens:["vec3","kQ","=","normalize","(","ki","+","kh",")",";","float","kR","=","1.0","-","dot","(","kh",",","kQ",")",";","float","kS","=","u_fresnel_params","[","3","]",";","float","kT","=","u_fresnel_params","[","2","]",";","float","kU","=","kS","+","(","1.0","-","kS",")","*","pow","(","kR",",","kT",")",";","kN","=","min","(","kN","*","kU",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS","&&","DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","kV","=","max","(","dot","(","u_sun_direction",",","-","ia",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","kh",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","kV","=","clamp","(","SSS_STRENGTH","*","kV",",","0.0",",","1.0",")",";","kz","=","mix","(","kz",",","u_shallow_water_col",",","kV",")",";","kz","=","mix","(","kz",",","u_shore_water_col",",","kV",")",";"]}]}}]},{type:"textline",tokens:["fa","kW","=","gE","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","kz",",","kI",",","h_",",","ka",",","kh",",","kH",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","kz","=","kW",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","mix","(","kw",",","kz",",","kt",")",";"]}]}}]},{type:"textline",tokens:["kz","=","mix","(","kz",",","kO",",","kN",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","kX","=","mix","(","kF",".","g",",","kF",".","r",",","clamp","(","4.0","*","(","kA","-","0.75",")",",","0.0",",","1.0",")",")",";","kX","=","mix","(","kF",".","b",",","kX",",","clamp","(","2.0","*","kA","-","1.0",",","0.0",",","1.0",")",")",";","kX","=","mix","(","0.0",",","kX",",","kA",")",";","kz","=","mix","(","kz",",","kL",",","kX",")",";"]}]}}]},{type:"textline",tokens:["kz","+=","kW",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kY","=","eA","(","u_cube_fog",",","kh",")",";","vec4","kZ","=","vec4","(","kY",",","u_fog_color_density",".","a",")",";","eg","(","kZ",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","kZ","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","e_","(","kz",",","kk",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";","}","else","{","et","(","kz",",","kk",",","kZ",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["et","(","kz",",","kk",",","kZ",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ei","(","kz",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kl","=","min","(","max","(","kl",",","kW",".","b",".","r",")",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["kl","+=","kX",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","kz",",","kl",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kz",",","kl",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Z",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Z",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_cascad_step",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ib",";","varying","vec3","jQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jR",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iH","(","in","vec2","iB",")","{","vec2","iC","=","vec2","(","(","iB",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","SHORE_MAP_CENTER_Z","+","iB",".","y",")","/","SHORE_MAP_SIZE_Z",")","+","0.5",";","iC","=","clamp","(","iC",",","0.0",",","1.0",")",";","vec4","iD","=","texture2D","(","u_shore_dist_map",",","iC",")",";","const","vec2","iE","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","iF","=","dot","(","iD",".","ba",",","iE",")",";","vec2","iG","=","normalize","(","iD",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","iG",",","iF",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","iV","(","inout","vec3","iI",",","in","float","iJ",",","in","vec3","iK",")","{","float","iL","=","hC","(","DST_NOISE_SCALE_0","*","(","iI",".","xz","+","DST_NOISE_FREQ_0","*","iJ",")",")","*","hC","(","DST_NOISE_SCALE_1","*","(","iI",".","zx","-","DST_NOISE_FREQ_1","*","iJ",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","iM","=","iK",".","b",";","float","iN","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","iO","=","sqrt","(","iM",")",";","float","iP","=","max","(","iM",",","DIR_MIN_SHR_FAC",")","*","(","sin","(","(","iO","/","iN","+","DIR_FREQ","*","iJ",")",")",")","*","max","(","hC","(","DIR_NOISE_SCALE","*","(","iI",".","xz","+","DIR_NOISE_FREQ","*","iJ",")",")",",","DIR_MIN_NOISE_FAC",")",";","float","iQ","=","WAVES_HEIGHT","*","mix","(","iP",",","iL",",","max","(","iO",",","DST_MIN_FAC",")",")",";","vec2","iR","=","iK",".","rg",";","float","iS","=","WAVES_HOR_FAC","*","iP","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","iM",")",",","0.0",")",";","vec2","iT","=","iS","*","iR",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iQ","=","WAVES_HEIGHT","*","iL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","iU","=","gY","(","20.0","/","WAVES_LENGTH","*","(","iI",".","xz","-","0.25","*","iJ",")",")",".","x","+","gY","(","17.0","/","WAVES_LENGTH","*","(","iI",".","zx","+","0.1","*","iJ",")",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["iI",".","xz","+=","iT",";","iU","*=","iM",";"]}]}}]},{type:"textline",tokens:["iQ","+=","0.05","*","iU",";"]}]}}]},{type:"textline",tokens:["iI",".","y","+=","iQ",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","iW","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","iX","=","abs","(","a_cascad_step",")",";","vec2","iY","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","iX",")",";","iW",".","y","+=","WATER_LEVEL",";","iW",".","xz","+=","iY",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","jU","=","al","(","iW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["jR","=","jU",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["jS","=","iH","(","jU",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","jV","=","length","(","u_wind",")",";","float","jW","=","u_time",";","jW","*=","jV",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","jX","=","iX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jX","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","jY","=","jU",".","a","+","vec3","(","jX",",","0.0",",","0.0",")",";","vec3","jZ","=","jU",".","a","+","vec3","(","0.0",",","0.0",",","jX",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","j_","=","iH","(","jY",".","xz",")",";","vec3","ka","=","iH","(","jZ",".","xz",")",";","iV","(","jY",",","jW",",","j_",")",";","iV","(","jZ",",","jW",",","ka",")",";","iV","(","jU",".","a",",","jW",",","jS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iV","(","jY",",","jW",",","vec3","(","0.0",")",")",";","iV","(","jZ",",","jW",",","vec3","(","0.0",")",")",";","iV","(","jU",".","a",",","jW",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_cascad_step","<","0.0",")","{","jY",".","y","=","jU",".","a",".","y",";","jZ",".","y","=","jU",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","kb","=","normalize","(","jY","-","jU",".","a",")",";","vec3","kc","=","normalize","(","jZ","-","jU",".","a",")",";","ia","=","normalize","(","cross","(","kc",",","kb",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["ib","=","kc",";","jQ","=","cross","(","ia",",","ib",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kd","=","dot","(","ia",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","ke","=","clamp","(","0.8","-","kd",",","0.0",",","1.0",")",";","ia","=","mix","(","ia",",","vec3","(","0.0",",","1.0",",","0.0",")",",","ke",")",";"]}]}}]}]}}]},{type:"textline",tokens:["h_","=","jU",".","a",";","hZ","=","u_camera_eye","-","jU",".","a",";","vec4","kf","=","u_view_matrix","*","vec4","(","jU",".","a",",","1.0",")",";","vec4","kg","=","u_proj_matrix","*","kf",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kh","=","kg",".","x",";","float","ki","=","kg",".","y",";","float","kj","=","kg",".","w",";","cw",".","x","=","(","kh","+","kj",")","/","2.0",";","cw",".","y","=","(","ki","+","kj",")","/","2.0",";","cw",".","z","=","kj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["jT","=","-","kf",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","kg",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jU",";","const","float","jV","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jW","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jW","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jX","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","jY","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","jZ","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","j_","=","vec3","(","0.0",")",";","float","ka","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kb","=","sign","(","jU","-","vec3","(","0.02","*","jV",")",")",";","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","{","j_","=","jW",";","ka","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kb","=","sign","(","jU","-","vec3","(","0.02","*","jV",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","j_","=","u_wireframe_edge_color",";","else","j_","=","jZ",";","ka","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","ka","=","1.0",";","else","ka","=","0.0",";","j_","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","j_","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","j_","=","jX",";","else","j_","=","jY",";","ka","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","kc","=","fwidth","(","jU",")",";","vec3","kd","=","smoothstep","(","vec3","(","0.0",")",",","kc","*","jV",",","jU",")",";","float","ke","=","min","(","min","(","kd",".","x",",","kd",".","y",")",",","kd",".","z",")",";","ke","=","clamp","(","ke",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","j_","=","vec3","(","mix","(","u_wireframe_edge_color",",","jZ",",","ke",")",")",";","ka","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","j_","=","u_wireframe_edge_color",";","ka","=","mix","(","1.0",",","0.0",",","ke",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","j_","=","mix","(","u_wireframe_edge_color",",","jX",",","ke",")",";","else","j_","=","mix","(","u_wireframe_edge_color",",","jY",",","ke",")",";","ka","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["ei","(","j_",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","j_",",","ka",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","j_",",","ka",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","jU",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","jU","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","jU","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","jU","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","iB","=","a_position",";","vec3","iC","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","iD","=","al","(","iB",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iB","=","mix","(","iB",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","vec3","(","0.0",")",";","vec3","iF","=","vec3","(","0.0",")",";","bq","(","iB",",","iE",",","iF",",","iC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","iD","=","dY","(","iB",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iG",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iH","=","(","u_model_matrix","*","vec4","(","iG",",","1.0",")",")",".","xyz",";","mat4","iI","=","ae","(","u_camera_eye",",","iH",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iJ","=","(","u_model_matrix","*","vec4","(","iG",",","1.0",")",")",".","xyz",";","iI","=","iI","*","S","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iJ",")",";"]}]}}]},{type:"textline",tokens:["c","iD","=","al","(","iB","-","iG",",","iG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iI",")",";","iD",".","b","=","iH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","iD","=","al","(","iB",",","iG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ch","(","iD",".","a",",","iD",".","b",",","iC",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","iK","=","u_view_matrix","*","vec4","(","iD",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","iK",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","iC","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","iB","[","0","]",",","iC","[","1","]",",","iC","[","2","]",",","iB","[","3","]","+","iC","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","iE","(","float","iB",",","float","iC",")","{","vec2","iD","=","a","+","vec2","(","iB",",","iC",")","*","u_texel_size",";","return","texture2D","(","u_color",",","iD",")",";","}","float","iI","(","vec4","iF",")","{","vec3","iG","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","iH","=","dot","(","iF",".","rgb",",","iG",")",";","return","iH",";","}","vec4","jX","(",")","{","vec4","iJ","=","iE","(","-","1.0",",","-","1.0",")",";","vec4","iK","=","iE","(","1.0",",","-","1.0",")",";","vec4","iL","=","iE","(","-","1.0",",","1.0",")",";","vec4","iM","=","iE","(","1.0",",","1.0",")",";","vec4","iN","=","iE","(","0.0",",","0.0",")",";","float","iO","=","iI","(","iJ",")",";","float","iP","=","iI","(","iK",")",";","float","iQ","=","iI","(","iL",")",";","float","iR","=","iI","(","iM",")",";","float","iS","=","iI","(","iN",")",";","float","iT","=","min","(","iS",",","min","(","min","(","iO",",","iP",")",",","min","(","iQ",",","iR",")",")",")",";","float","iU","=","max","(","iS",",","max","(","max","(","iO",",","iP",")",",","max","(","iQ",",","iR",")",")",")",";","vec2","iV",";","iV",".","x","=","-","(","(","iO","+","iP",")","-","(","iQ","+","iR",")",")",";","iV",".","y","=","(","(","iO","+","iQ",")","-","(","iP","+","iR",")",")",";","float","iW","=","max","(","(","iO","+","iP","+","iQ","+","iR",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","iX","=","1.0","/","(","min","(","abs","(","iV",".","x",")",",","abs","(","iV",".","y",")",")","+","iW",")",";","iV","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","iV","*","iX",")",")","*","u_texel_size",";","vec4","iY","=","0.5","*","(","texture2D","(","u_color",",","a","+","iV","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","iV","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","jV","=","iY","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","iV","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","iV","*","0.5",")",")",";","float","jW","=","iI","(","jV",")",";","if","(","(","jW","<","iT",")","||","(","jW",">","iU",")",")","return","iY",";","else","return","jV",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","lI","(",")","{","vec2","jY",";","jY",".","x","=","a",".","x",";","jY",".","y","=","a",".","y",";","vec4","jZ","=","texture2D","(","u_color",",","jY",")",";","vec4","j_","=","iE","(","0.0",",","1.0",")",";","vec4","ka","=","iE","(","1.0",",","0.0",")",";","vec4","kb","=","iE","(","0.0",",","-","1.0",")",";","vec4","kc","=","iE","(","-","1.0",",","0.0",")",";","float","kd","=","iI","(","j_",")",";","float","ke","=","iI","(","ka",")",";","float","kf","=","iI","(","kb",")",";","float","kg","=","iI","(","kc",")",";","float","kh","=","iI","(","jZ",")",";","float","ki","=","max","(","kd",",","kh",")",";","float","kj","=","min","(","kd",",","kh",")",";","float","kk","=","max","(","ke",",","ki",")",";","float","kl","=","min","(","ke",",","kj",")",";","float","km","=","max","(","kf",",","kg",")",";","float","kn","=","min","(","kf",",","kg",")",";","float","ko","=","max","(","km",",","kk",")",";","float","kp","=","min","(","kn",",","kl",")",";","float","kq","=","ko","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","kr","=","ko","-","kp",";","float","ks","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","kq",")",";","bool","kt","=","kr","<","ks",";","if","(","kt",")","return","jZ",";","vec4","ku","=","iE","(","-","1.0",",","-","1.0",")",";","vec4","kv","=","iE","(","1.0",",","1.0",")",";","vec4","kw","=","iE","(","1.0",",","-","1.0",")",";","vec4","kx","=","iE","(","-","1.0",",","1.0",")",";","float","ky","=","iI","(","ku",")",";","float","kz","=","iI","(","kv",")",";","float","kA","=","iI","(","kw",")",";","float","kB","=","iI","(","kx",")",";","float","kC","=","kf","+","kd",";","float","kD","=","kg","+","ke",";","float","kE","=","1.0","/","kr",";","float","kF","=","kC","+","kD",";","float","kG","=","(","-","2.0","*","kh",")","+","kC",";","float","kH","=","(","-","2.0","*","kh",")","+","kD",";","float","kI","=","kA","+","kz",";","float","kJ","=","ky","+","kA",";","float","kK","=","(","-","2.0","*","ke",")","+","kI",";","float","kL","=","(","-","2.0","*","kf",")","+","kJ",";","float","kM","=","ky","+","kB",";","float","kN","=","kB","+","kz",";","float","kO","=","(","abs","(","kG",")","*","2.0",")","+","abs","(","kK",")",";","float","kP","=","(","abs","(","kH",")","*","2.0",")","+","abs","(","kL",")",";","float","kQ","=","(","-","2.0","*","kg",")","+","kM",";","float","kR","=","(","-","2.0","*","kd",")","+","kN",";","float","kS","=","abs","(","kQ",")","+","kO",";","float","kT","=","abs","(","kR",")","+","kP",";","float","kU","=","kM","+","kI",";","float","kV","=","u_texel_size",".","x",";","bool","kW","=","kS",">=","kT",";","float","kX","=","kF","*","2.0","+","kU",";","if","(","!","kW",")","kf","=","kg",";","if","(","!","kW",")","kd","=","ke",";","if","(","kW",")","kV","=","u_texel_size",".","y",";","float","kY","=","(","kX","*","(","1.0","/","12.0",")",")","-","kh",";","float","kZ","=","kf","-","kh",";","float","k_","=","kd","-","kh",";","float","la","=","kf","+","kh",";","float","lb","=","kd","+","kh",";","bool","lc","=","abs","(","kZ",")",">=","abs","(","k_",")",";","float","ld","=","max","(","abs","(","kZ",")",",","abs","(","k_",")",")",";","if","(","lc",")","kV","=","-","kV",";","float","le","=","clamp","(","abs","(","kY",")","*","kE",",","0.0",",","1.0",")",";","vec2","lf",";","lf",".","x","=","jY",".","x",";","lf",".","y","=","jY",".","y",";","vec2","lg",";","lg",".","x","=","(","!","kW",")","?","0.0",":","u_texel_size",".","x",";","lg",".","y","=","(","kW",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","kW",")","lf",".","x","+=","kV","*","0.5",";","if","(","kW",")","lf",".","y","+=","kV","*","0.5",";","vec2","lh",";","lh",".","x","=","lf",".","x","-","lg",".","x",";","lh",".","y","=","lf",".","y","-","lg",".","y",";","vec2","li",";","li",".","x","=","lf",".","x","+","lg",".","x",";","li",".","y","=","lf",".","y","+","lg",".","y",";","float","lj","=","(","(","-","2.0",")","*","le",")","+","3.0",";","float","lk","=","iI","(","texture2D","(","u_color",",","lh",")",")",";","float","ll","=","le","*","le",";","float","lm","=","iI","(","texture2D","(","u_color",",","li",")",")",";","if","(","!","lc",")","la","=","lb",";","float","ln","=","ld","*","1.0","/","4.0",";","float","lo","=","kh","-","la","*","0.5",";","float","lp","=","lj","*","ll",";","bool","lq","=","lo","<","0.0",";","lk","-=","la","*","0.5",";","lm","-=","la","*","0.5",";","bool","lr","=","abs","(","lk",")",">=","ln",";","bool","ls","=","abs","(","lm",")",">=","ln",";","if","(","!","lr",")","lh",".","x","-=","lg",".","x","*","1.5",";","if","(","!","lr",")","lh",".","y","-=","lg",".","y","*","1.5",";","bool","lt","=","(","!","lr",")","||","(","!","ls",")",";","if","(","!","ls",")","li",".","x","+=","lg",".","x","*","1.5",";","if","(","!","ls",")","li",".","y","+=","lg",".","y","*","1.5",";","if","(","lt",")","{","if","(","!","lr",")","lk","=","iI","(","texture2D","(","u_color",",","lh",".","xy",")",")",";","if","(","!","ls",")","lm","=","iI","(","texture2D","(","u_color",",","li",".","xy",")",")",";","if","(","!","lr",")","lk","=","lk","-","la","*","0.5",";","if","(","!","ls",")","lm","=","lm","-","la","*","0.5",";","lr","=","abs","(","lk",")",">=","ln",";","ls","=","abs","(","lm",")",">=","ln",";","if","(","!","lr",")","lh",".","x","-=","lg",".","x","*","2.0",";","if","(","!","lr",")","lh",".","y","-=","lg",".","y","*","2.0",";","lt","=","(","!","lr",")","||","(","!","ls",")",";","if","(","!","ls",")","li",".","x","+=","lg",".","x","*","2.0",";","if","(","!","ls",")","li",".","y","+=","lg",".","y","*","2.0",";","if","(","lt",")","{","if","(","!","lr",")","lk","=","iI","(","texture2D","(","u_color",",","lh",".","xy",")",")",";","if","(","!","ls",")","lm","=","iI","(","texture2D","(","u_color",",","li",".","xy",")",")",";","if","(","!","lr",")","lk","=","lk","-","la","*","0.5",";","if","(","!","ls",")","lm","=","lm","-","la","*","0.5",";","lr","=","abs","(","lk",")",">=","ln",";","ls","=","abs","(","lm",")",">=","ln",";","if","(","!","lr",")","lh",".","x","-=","lg",".","x","*","2.0",";","if","(","!","lr",")","lh",".","y","-=","lg",".","y","*","2.0",";","lt","=","(","!","lr",")","||","(","!","ls",")",";","if","(","!","ls",")","li",".","x","+=","lg",".","x","*","2.0",";","if","(","!","ls",")","li",".","y","+=","lg",".","y","*","2.0",";","if","(","lt",")","{","if","(","!","lr",")","lk","=","iI","(","texture2D","(","u_color",",","lh",".","xy",")",")",";","if","(","!","ls",")","lm","=","iI","(","texture2D","(","u_color",",","li",".","xy",")",")",";","if","(","!","lr",")","lk","=","lk","-","la","*","0.5",";","if","(","!","ls",")","lm","=","lm","-","la","*","0.5",";","lr","=","abs","(","lk",")",">=","ln",";","ls","=","abs","(","lm",")",">=","ln",";","if","(","!","lr",")","lh",".","x","-=","lg",".","x","*","4.0",";","if","(","!","lr",")","lh",".","y","-=","lg",".","y","*","4.0",";","lt","=","(","!","lr",")","||","(","!","ls",")",";","if","(","!","ls",")","li",".","x","+=","lg",".","x","*","4.0",";","if","(","!","ls",")","li",".","y","+=","lg",".","y","*","4.0",";","if","(","lt",")","{","if","(","!","lr",")","lk","=","iI","(","texture2D","(","u_color",",","lh",".","xy",")",")",";","if","(","!","ls",")","lm","=","iI","(","texture2D","(","u_color",",","li",".","xy",")",")",";","if","(","!","lr",")","lk","=","lk","-","la","*","0.5",";","if","(","!","ls",")","lm","=","lm","-","la","*","0.5",";","lr","=","abs","(","lk",")",">=","ln",";","ls","=","abs","(","lm",")",">=","ln",";","if","(","!","lr",")","lh",".","x","-=","lg",".","x","*","2.0",";","if","(","!","lr",")","lh",".","y","-=","lg",".","y","*","2.0",";","if","(","!","ls",")","li",".","x","+=","lg",".","x","*","2.0",";","if","(","!","ls",")","li",".","y","+=","lg",".","y","*","2.0",";","}","}","}","}","float","lu","=","jY",".","x","-","lh",".","x",";","float","lv","=","li",".","x","-","jY",".","x",";","if","(","!","kW",")","lu","=","jY",".","y","-","lh",".","y",";","if","(","!","kW",")","lv","=","li",".","y","-","jY",".","y",";","bool","lw","=","(","lk","<","0.0",")","!=","lq",";","float","lx","=","(","lv","+","lu",")",";","bool","ly","=","(","lm","<","0.0",")","!=","lq",";","float","lz","=","1.0","/","lx",";","bool","lA","=","lu","<","lv",";","float","lB","=","min","(","lu",",","lv",")",";","bool","lC","=","lA","?","lw",":","ly",";","float","lD","=","lp","*","lp",";","float","lE","=","(","lB","*","(","-","lz",")",")","+","0.5",";","float","lF","=","lD","*","FXAA_QUALITY_SUBPIX",";","float","lG","=","lC","?","lE",":","0.0",";","float","lH","=","max","(","lG",",","lF",")",";","if","(","!","kW",")","jY",".","x","+=","lH","*","kV",";","if","(","kW",")","jY",".","y","+=","lH","*","kV",";","return","texture2D","(","u_color",",","jY",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","jX","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","lI","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","iB","=","vec2","(","0.0",",","0.0",")",";","vec2","iC","=","u_texel_size",";","vec4","iD","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iD","*","0.0875447373698",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0858112354248",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0808139781061",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0731235112908",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0635705267419",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0530985673112",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0426125984122",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0328565115809",";","iB","+=","iC",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iB",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iB",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","iD",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_main",",","a",")",";","vec4","iC","=","texture2D","(","u_bloom",",","a",")",";","vec4","iD","=","iB",";","iD","+=","iC",";","gl_FragColor","=","vec4","(","iD",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/blur_depth.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","vec2","u_camera_range",";","uniform","float","u_blur_depth_edge_size",";","uniform","float","u_blur_depth_diff_threshold",";","varying","vec2","a",";","float","kd","(","in","vec2","kc",")","{","return","kb","(","u_depth",",","kc",",","u_camera_range",")",";","}","void","main","(",")","{","vec2","ke","=","u_texel_size",";","vec4","kf","=","texture2D","(","u_color",",","a",")",";","float","kg","=","kd","(","a",")",";","float","kh","=","kd","(","a","+","u_blur_depth_edge_size","*","ke",")",";","float","ki","=","kd","(","a","-","u_blur_depth_edge_size","*","ke",")",";","float","kj","=","abs","(","kg","-","kh",")",";","float","kk","=","abs","(","kg","-","ki",")",";","float","kl","=","max","(","kj",",","kk",")",";","if","(","kl",">","u_blur_depth_diff_threshold",")","{","gl_FragColor","=","kf",";","return",";","}","vec2","km","=","vec2","(","0.0",",","0.0",")",";","gl_FragColor","=","kf","*","0.2270270270",";","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.1945945946",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.1945945946",",","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.1216216216",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.1216216216",",","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.0540540541",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.0540540541",",","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.0162162162",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.0162162162",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_color",",","a",")",";","vec3","iC","=","iB",".","rgb",";","if","(","u_brightness","<","0.0",")","iC","=","iC","*","(","1.0","+","u_brightness",")",";","else","iC","=","iC","+","(","(","1.0","-","iC",")","*","u_brightness",")",";","iC","=","(","iC","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","iC","*=","u_exposure",";","vec3","iD","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","iE","=","dot","(","iC",",","iD",")",";","iC","=","mix","(","vec3","(","iE",")",",","iC",",","u_saturation",")",";","gl_FragColor","=","vec4","(","iC",",","iB",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cm","(","clamp","(","kb","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","kc","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","kd","=","kb","(","u_depth",",","a",",","u_camera_range",")",";","kd","*=","u_view_max_depth",";","float","ke",";","if","(","kd","<","u_dof_dist",")","ke","=","(","u_dof_dist","-","kd",")","/","u_dof_front",";","else","ke","=","(","kd","-","u_dof_dist",")","/","u_dof_rear",";","ke","=","clamp","(","ke",",","0.0",",","1.0",")",";","vec4","kf","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","kc",",","kf",",","ke",")",";","}","else","gl_FragColor","=","kc",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","iG","(","float","iB",",","float","iC",",","float","iD",")","{","vec2","iE","=","a","+","vec2","(","iB",",","iC",")","*","u_texel_size",";","vec4","iF","=","texture2D","(","u_sampler",",","iE",")","*","iD",";","return","cq","(","iF",")",";","}","void","main","(",")","{","float","iH","=","(","iG","(","-","1.0",",","-","1.0",",","-","1.0",")","+","iG","(","0.0",",","-","1.0",",","-","1.0",")","+","iG","(","1.0",",","-","1.0",",","-","1.0",")","+","iG","(","-","1.0",",","0.0",",","-","1.0",")","+","iG","(","0.0",",","0.0",",","8.0",")","+","iG","(","1.0",",","0.0",",","-","1.0",")","+","iG","(","-","1.0",",","1.0",",","-","1.0",")","+","iG","(","0.0",",","1.0",",","-","1.0",")","+","iG","(","1.0",",","1.0",",","-","1.0",")",")",";","iH","*=","1000.0",";","gl_FragColor","=","vec4","(","iH",",","iH",",","iH",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","iB",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","iC","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","iD","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","iE","=","iD",".","a","-","iC",".","a",";","if","(","iE","!=","0.0",")","{","float","iF","=","smoothstep","(","0.0",",","1.0",",","iD",".","a",")",";","if","(","iC",".","a","==","0.0",")","{","vec3","iG","=","u_glow_color",";","ei","(","iG",")",";","vec4","iH","=","vec4","(","clamp","(","iG",",","0.0",",","1.0",")",",","iF",")",";","gl_FragColor","=","mix","(","iB",",","iH",",","iF",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","vec3","u_sun_intensity",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kc",";","varying","vec2","kd",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","ke",";","void","main","(",")","{","vec3","kf","=","u_sun_intensity",";","vec2","kg","=","(","ke",".","xy","-","a",")",";","float","kh","=","length","(","kg",")",";","vec2","ki","=","u_radial_blur_step","*","kg","/","kh",";","float","kj","=","kh","/","u_radial_blur_step",";","ki","*=","min","(","kj",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","kj","=","max","(","kj",",","STEPS_PER_PASS",")",";","vec2","kk","=","a",";","float","kl","=","0.0",";","for","(","float","km","=","0.0",";","km","<","STEPS_PER_PASS",";","km","+=","1.0",")","{","if","(","km","<=","kj",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","kn","=","kb","(","u_input",",","kk",",","u_camera_range",")",";","kl","+=","(","1.0","-","pow","(","kh",",","0.3",")",")","*","kn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kl","+=","texture2D","(","u_input",",","kk",")",".","r",";"]}]}}]},{type:"textline",tokens:["}","kk","+=","ki",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ko","=","a","+","kd",";","float","kp","=","gY","(","vec2","(","2.5","*","(","ko",".","x",")",",","2.5","*","(","ko",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","gY","(","vec2","(","5.0","*","(","ko",".","x",")","-","0.66","*","u_time",",","5.0","*","(","ko",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","hC","(","vec2","(","7.5","*","(","ko",".","x",")","+","0.33","*","u_time",",","7.5","*","(","ko",".","y",")","-","0.33","*","u_time",")",")",";","kp","*=","clamp","(","1.2","-","sqrt","(","0.2","*","kh",")",",","0.0",",","1.0",")","*","kc",";","kl","=","max","(","kp",",","kl",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kl","/","STEPS_PER_PASS","*","clamp","(","kf",",","0.4",",","0.8",")",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","kc",";","varying","vec2","kd",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","ke",";","void","iI","(","in","vec4","iB",",","in","vec3","iC",",","out","vec3","iD",")","{","float","iE","=","iB",".","w","*","iC",".","x","+","iB",".","y","*","iC",".","z","-","iB",".","z","*","iC",".","y",";","float","iF","=","iB",".","w","*","iC",".","y","+","iB",".","z","*","iC",".","x","-","iB",".","x","*","iC",".","z",";","float","iG","=","iB",".","w","*","iC",".","z","+","iB",".","x","*","iC",".","y","-","iB",".","y","*","iC",".","x",";","float","iH","=","-","iB",".","x","*","iC",".","x","-","iB",".","y","*","iC",".","y","-","iB",".","z","*","iC",".","z",";","iD",".","x","=","iE","*","iB",".","w","-","iH","*","iB",".","x","-","iF","*","iB",".","z","+","iG","*","iB",".","y",";","iD",".","y","=","iF","*","iB",".","w","-","iH","*","iB",".","y","-","iG","*","iB",".","x","+","iE","*","iB",".","z",";","iD",".","z","=","iG","*","iB",".","w","-","iH","*","iB",".","z","-","iE","*","iB",".","y","+","iF","*","iB",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","iJ","=","normalize","(","u_sun_direction",")",";","ke","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","iJ",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","kc","=","1.0",";","vec3","iK","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","iL",";","iI","(","u_camera_quat",",","iK",",","iL",")",";","iL","=","normalize","(","iL",")",";","float","iM","=","dot","(","iL",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","iN","=","atan","(","iL",".","x",",","iL",".","z",")",";","kd","=","vec2","(","-","iN",",","acos","(","iM",")",")",";","}","else","{","kc","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["ke",".","x","/=","ke",".","w",";","ke",".","y","/=","ke",".","w",";","ke",".","x","=","0.5","*","(","ke",".","x","+","1.0",")",";","ke",".","y","=","0.5","*","(","ke",".","y","+","1.0",")",";","ke","+=","99999.0","*","step","(","ke",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_main",",","a",")",";","eg","(","iB",".","rgb",")",";","vec3","iC","=","iB",".","rgb","+","u_god_rays_intensity","*","(","texture2D","(","u_god_rays",",","a",")",")",".","rgb",";","ei","(","iC",")",";","gl_FragColor",".","rgb","=","iC",";","gl_FragColor",".","a","=","iB",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_color",",","a",")","*","0.38026",";","iB","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","iB","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","iB","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","iB","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","iB","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","iB","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","iB","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","iB","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","iB",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_input",",","a",")",";","float","iC","=","dot","(","iB",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","iC",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","iB",";","float","iC","=","0.0",";","for","(","float","iD","=","0.025",";","iD","<","1.0",";","iD","+=","0.05",")","for","(","float","iE","=","0.025",";","iE","<","1.0",";","iE","+=","0.05",")","{","iB","=","max","(","texture2D","(","u_input",",","vec2","(","iD",",","iE",")",")",".","r",",","0.01",")",";","iC","+=","log","(","iB",")",";","}","float","iF","=","exp","(","iC","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","iF",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","kf",";","void","main","(",")","{","float","kg","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","kh","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","ki","=","texture2D","(","u_main",",","a",")",";","float","kj","=","kh","/","kg",";","float","kk","=","u_bloom_edge_lum",";","gl_FragColor","=","ki","*","max","(","kj","-","kk",",","0.0",")","*","kf",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","kf",";","const","vec3","iB","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","iJ","(","in","vec4","iC",",","in","vec3","iD",",","out","vec3","iE",")","{","float","iF","=","iC",".","w","*","iD",".","x","+","iC",".","y","*","iD",".","z","-","iC",".","z","*","iD",".","y",";","float","iG","=","iC",".","w","*","iD",".","y","+","iC",".","z","*","iD",".","x","-","iC",".","x","*","iD",".","z",";","float","iH","=","iC",".","w","*","iD",".","z","+","iC",".","x","*","iD",".","y","-","iC",".","y","*","iD",".","x",";","float","iI","=","-","iC",".","x","*","iD",".","x","-","iC",".","y","*","iD",".","y","-","iC",".","z","*","iD",".","z",";","iE",".","x","=","iF","*","iC",".","w","-","iI","*","iC",".","x","-","iG","*","iC",".","z","+","iH","*","iC",".","y",";","iE",".","y","=","iG","*","iC",".","w","-","iI","*","iC",".","y","-","iH","*","iC",".","x","+","iF","*","iC",".","z",";","iE",".","z","=","iH","*","iC",".","w","-","iI","*","iC",".","z","-","iF","*","iC",".","y","+","iG","*","iC",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","iK",";","iJ","(","u_camera_quat",",","iB",",","iK",")",";","kf","=","dot","(","-","iK",",","u_sun_direction",")","*","u_bloom_key",";","kf","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","iB","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","iC","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","iB","-","iC",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","iB","+","u_motion_blur_exp","*","iC",";","}","else","{","gl_FragColor","=","iB",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iB","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","iB",".","r","+","iB",".","g","+","iB",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iC","=","vec2","(","0.0",",","0.0",")",";","vec2","iD","=","u_texel_size",";","vec4","iE",";","iE","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iE","*","0.2270270270",";","iC","+=","iD",";","iE","=","texture2D","(","u_color",",","a","+","iC",")",";","gl_FragColor","+=","iE","*","0.1945945946",";","iE","=","texture2D","(","u_color",",","a","-","iC",")",";","gl_FragColor","+=","iE","*","0.1945945946",";","iC","+=","iD",";","iE","=","texture2D","(","u_color",",","a","+","iC",")",";","gl_FragColor","+=","iE","*","0.1216216216",";","iE","=","texture2D","(","u_color",",","a","-","iC",")",";","gl_FragColor","+=","iE","*","0.1216216216",";","iC","+=","iD",";","iE","=","texture2D","(","u_color",",","a","+","iC",")",";","gl_FragColor","+=","iE","*","0.0540540541",";","iE","=","texture2D","(","u_color",",","a","-","iC",")",";","gl_FragColor","+=","iE","*","0.0540540541",";","iC","+=","iD",";","iE","=","texture2D","(","u_color",",","a","+","iC",")",";","gl_FragColor","+=","iE","*","0.0162162162",";","iE","=","texture2D","(","u_color",",","a","-","iC",")",";","gl_FragColor","+=","iE","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iD","=","u_texel_size",";","vec4","iE","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iE",";","if","(","iE",".","a","==","0.0",")","{","iE","=","texture2D","(","u_color",",","a","+","iD",")",";","if","(","iE",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","iE",".","a",")",";","else","{","iE","=","texture2D","(","u_color",",","a","-","iD",")",";","if","(","iE",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","iE",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg","[","3","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","kh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"textline",tokens:["vec3","ko","(","vec2","ki",",","vec4","kj","[","3","]",",","sampler2D","kk",")","{","float","kl","=","texture2D","(","kk",",","ki",")",".","r",";","float","km","=","texture2D","(","kk",",","kj","[","0","]",".","xy",")",".","r",";","float","kn","=","texture2D","(","kk",",","kj","[","0","]",".","zw",")",".","r",";","return","vec3","(","kl",",","km",",","kn",")",";","}","vec2","kv","(","vec2","kp",",","vec4","kq","[","3","]",",","sampler2D","kr",")","{","vec3","ks","=","ko","(","kp",",","kq",",","kr",")",";","vec2","kt","=","abs","(","ks",".","xx","-","ks",".","yz",")",";","vec2","ku","=","step","(","SMAA_PREDICATION_THRESHOLD",",","kt",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","ku",")",";","}","void","kz","(","bvec2","kw",",","inout","vec2","kx",",","vec2","ky",")","{","if","(","kw",".","x",")","kx",".","x","=","ky",".","x",";","if","(","kw",".","y",")","kx",".","y","=","ky",".","y",";","}","void","kz","(","bvec4","kA",",","inout","vec4","kB",",","vec4","kC",")","{","kz","(","kA",".","xy",",","kB",".","xy",",","kC",".","xy",")",";","kz","(","kA",".","zw",",","kB",".","zw",",","kC",".","zw",")",";","}","vec2","kE","(","vec2","kD",")","{","return","sign","(","kD",")","*","floor","(","abs","(","kD",")","+",".5",")",";","}","vec4","kE","(","vec4","kF",")","{","return","sign","(","kF",")","*","floor","(","abs","(","kF",")","+",".5",")",";","}","vec2","kX","(","vec2","kG",",","vec4","kH","[","3","]",",","sampler2D","kI"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","kJ"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kK","=","kv","(","kG",",","kH",",","kJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","kK","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","kL","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","kM","=","dot","(","texture2D","(","kI",",","kG",")",".","rgb",",","kL",")",";","float","kN","=","dot","(","texture2D","(","kI",",","kH","[","0","]",".","xy",")",".","rgb",",","kL",")",";","float","kO","=","dot","(","texture2D","(","kI",",","kH","[","0","]",".","zw",")",".","rgb",",","kL",")",";","vec4","kP",";","kP",".","xy","=","abs","(","kM","-","vec2","(","kN",",","kO",")",")",";","vec2","kQ","=","step","(","kK",",","kP",".","xy",")",";","if","(","dot","(","kQ",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","kR","=","dot","(","texture2D","(","kI",",","kH","[","1","]",".","xy",")",".","rgb",",","kL",")",";","float","kS","=","dot","(","texture2D","(","kI",",","kH","[","1","]",".","zw",")",".","rgb",",","kL",")",";","kP",".","zw","=","abs","(","kM","-","vec2","(","kR",",","kS",")",")",";","vec2","kT","=","max","(","kP",".","xy",",","kP",".","zw",")",";","float","kU","=","dot","(","texture2D","(","kI",",","kH","[","2","]",".","xy",")",".","rgb",",","kL",")",";","float","kV","=","dot","(","texture2D","(","kI",",","kH","[","2","]",".","zw",")",".","rgb",",","kL",")",";","kP",".","zw","=","abs","(","vec2","(","kN",",","kO",")","-","vec2","(","kU",",","kV",")",")",";","kT","=","max","(","kT",".","xy",",","kP",".","zw",")",";","float","kW","=","max","(","kT",".","x",",","kT",".","y",")",";","kQ",".","xy","*=","step","(","kW",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","kP",".","xy",")",";","return","kQ",";","}","vec2","lo","(","vec2","kY",",","vec4","kZ","[","3","]",",","sampler2D","k_"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","la"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lb","=","kv","(","kY",",","kZ",",","la",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lb","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec4","lc",";","vec3","ld","=","texture2D","(","k_",",","kY",")",".","rgb",";","vec3","le","=","texture2D","(","k_",",","kZ","[","0","]",".","xy",")",".","rgb",";","vec3","lf","=","abs","(","ld","-","le",")",";","lc",".","x","=","max","(","max","(","lf",".","r",",","lf",".","g",")",",","lf",".","b",")",";","vec3","lg","=","texture2D","(","k_",",","kZ","[","0","]",".","zw",")",".","rgb",";","lf","=","abs","(","ld","-","lg",")",";","lc",".","y","=","max","(","max","(","lf",".","r",",","lf",".","g",")",",","lf",".","b",")",";","vec2","lh","=","step","(","lb",",","lc",".","xy",")",";","if","(","dot","(","lh",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","vec3","li","=","texture2D","(","k_",",","kZ","[","1","]",".","xy",")",".","rgb",";","lf","=","abs","(","ld","-","li",")",";","lc",".","z","=","max","(","max","(","lf",".","r",",","lf",".","g",")",",","lf",".","b",")",";","vec3","lj","=","texture2D","(","k_",",","kZ","[","1","]",".","zw",")",".","rgb",";","lf","=","abs","(","ld","-","lj",")",";","lc",".","w","=","max","(","max","(","lf",".","r",",","lf",".","g",")",",","lf",".","b",")",";","vec2","lk","=","max","(","lc",".","xy",",","lc",".","zw",")",";","vec3","ll","=","texture2D","(","k_",",","kZ","[","2","]",".","xy",")",".","rgb",";","lf","=","abs","(","ld","-","ll",")",";","lc",".","z","=","max","(","max","(","lf",".","r",",","lf",".","g",")",",","lf",".","b",")",";","vec3","lm","=","texture2D","(","k_",",","kZ","[","2","]",".","zw",")",".","rgb",";","lf","=","abs","(","ld","-","lm",")",";","lc",".","w","=","max","(","max","(","lf",".","r",",","lf",".","g",")",",","lf",".","b",")",";","lk","=","max","(","lk",".","xy",",","lc",".","zw",")",";","float","ln","=","max","(","lk",".","x",",","lk",".","y",")",";","lh",".","xy","*=","step","(","ln",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","lc",".","xy",")",";","return","lh",";","}","vec2","lv","(","vec2","lp",",","vec4","lq","[","3","]",",","sampler2D","lr",")","{","vec3","ls","=","ko","(","lp",",","lq",",","lr",")",";","vec2","lt","=","abs","(","ls",".","xx","-","vec2","(","ls",".","y",",","ls",".","z",")",")",";","vec2","lu","=","step","(","SMAA_DEPTH_THRESHOLD",",","lt",")",";","if","(","dot","(","lu",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","return","lu",";","}"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lx","(","vec2","lw",")","{","lw",".","r","=","lw",".","r","*","abs","(","5.0","*","lw",".","r","-","5.0","*","0.75",")",";","return","kE","(","lw",")",";","}","vec4","lx","(","vec4","ly",")","{","ly",".","rb","=","ly",".","rb","*","abs","(","5.0","*","ly",".","rb","-","5.0","*","0.75",")",";","return","kE","(","ly",")",";","}","vec2","lG","(","sampler2D","lz",",","vec2","lA",",","vec2","lB",",","out","vec2","lC",")","{","vec4","lD","=","vec4","(","lA",",","-","1.0",",","1.0",")",";","vec3","lE","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","lF","=","0",";","lF","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","lF","++",")","{","if","(","lD",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","lD",".","w",">","0.9",")","{","lD",".","xyz","+=","lE","*","vec3","(","lB",",","1.0",")",";","lC","=","texture2D","(","lz",",","lD",".","xy",",","0.0",")",".","rg",";","lD",".","w","=","dot","(","lC",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","lD",".","zw",";","}","vec2","lO","(","sampler2D","lH",",","vec2","lI",",","vec2","lJ",",","out","vec2","lK",")","{","vec4","lL","=","vec4","(","lI",",","-","1.0",",","1.0",")",";","lL",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","lM","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","lN","=","0",";","lN","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","lN","++",")","{","if","(","lL",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","lL",".","w",">","0.9",")","{","lL",".","xyz","=","lM","*","vec3","(","lJ",",","1.0",")","+","lL",".","xyz",";","lK","=","texture2D","(","lH",",","lL",".","xy",",","0.0",")",".","rg",";","lK","=","lx","(","lK",")",";","lL",".","w","=","dot","(","lK",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","lL",".","zw",";","}","vec2","lU","(","sampler2D","lP",",","vec2","lQ",",","vec2","lR",",","float","lS",")","{","vec2","lT","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","lR","+","lQ",";","lT","=","SMAA_AREATEX_PIXEL_SIZE","*","lT","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","lT",".","x","+=","0.5",";","lT",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","lS",";","return","texture2D","(","lP",",","lT",",","0.0",")",".","rg",";","}","vec2","mi","(","sampler2D","lV",",","sampler2D","lW",",","vec2","lX",",","vec2","lY",",","vec4","lZ",")","{","vec2","l_","=","vec2","(","0.0",",","0.0",")",";","vec4","ma",";","vec2","mb",";","if","(","lY",".","r",">","0.0",")","{","ma",".","xz","=","lG","(","lV",",","lX",",","vec2","(","-","1.0",",","1.0",")",",","mb",")",";","ma",".","x","+=","float","(","mb",".","y",">","0.9",")",";","}","else","ma",".","xz","=","vec2","(","0.0",",","0.0",")",";","ma",".","yw","=","lG","(","lV",",","lX",",","vec2","(","1.0",",","-","1.0",")",",","mb",")",";","if","(","ma",".","x","+","ma",".","y",">","2.0",")","{","vec4","mc","=","vec4","(","-","ma",".","x","+","0.25",",","ma",".","x",",","ma",".","y",",","-","ma",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","lX",".","xyxy",";","vec4","md",";","md",".","xy","=","texture2D","(","lV",",","mc",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","md",".","zw","=","texture2D","(","lV",",","mc",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","md",".","yxwz","=","lx","(","md",".","xyzw",")",";","vec2","me","=","vec2","(","2.0",",","2.0",")","*","md",".","xz","+","md",".","yw",";","kz","(","bvec2","(","step","(","0.9",",","ma",".","zw",")",")",",","me",",","vec2","(","0.0",",","0.0",")",")",";","l_","+=","lU","(","lW",",","ma",".","xy",",","me",",","lZ",".","z",")",";","}","ma",".","xz","=","lO","(","lV",",","lX",",","vec2","(","-","1",",","-","1",")",",","mb",")",";","if","(","texture2D","(","lV",",","lX","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","ma",".","yw","=","lO","(","lV",",","lX",",","vec2","(","1",",","1",")",",","mb",")",";","ma",".","y","+=","float","(","mb",".","y",">","0.9",")",";","}","else","ma",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","ma",".","x","+","ma",".","y",">","2.0",")","{","vec4","mf","=","vec4","(","-","ma",".","x",",","-","ma",".","x",",","ma",".","y",",","ma",".","y",")","*","u_texel_size",".","xyxy","+","lX",".","xyxy",";","vec4","mg",";","mg",".","x","=","texture2D","(","lV",",","mf",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","mg",".","y","=","texture2D","(","lV",",","mf",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","mg",".","zw","=","texture2D","(","lV",",","mf",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","mh","=","vec2","(","2.0",",","2.0",")","*","mg",".","xz","+","mg",".","yw",";","kz","(","bvec2","(","step","(","0.9",",","ma",".","zw",")",")",",","mh",",","vec2","(","0",",","0",")",")",";","l_","+=","lU","(","lW",",","ma",".","xy",",","mh",",","lZ",".","w",")",".","gr",";","}","return","l_",";","}"]}]}}]},{type:"textline",tokens:["float","mo","(","sampler2D","mj",",","vec2","mk",",","float","ml",")","{","vec2","mm","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","mn","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","ml",",","1.0",")",";","mm","+=","vec2","(","-","1.0",",","1.0",")",";","mn","+=","vec2","(","0.5",",","-","0.5",")",";","mm","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","mn","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","mj",",","mm","*","mk","+","mn",",","0.0",")",".","r",";","}","float","mw","(","sampler2D","mp",",","sampler2D","mq",",","vec2","mr",",","float","ms",")","{","vec2","mt","=","vec2","(","0.0",",","1.0",")",";","for","(","int","mu","=","0",";","mu","<","SMAA_MAX_SEARCH_STEPS",";","mu","++",")","{","if","(","mr",".","x",">","ms","&&","mt",".","g",">","0.8281","&&","mt",".","r","==","0.0",")","{","mt","=","texture2D","(","mp",",","mr",",","0.0",")",".","rg",";","mr","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","mr",";","}","}","float","mv","=","-","(","255.0","/","127.0",")","*","mo","(","mq",",","mt",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","mv","+","mr",".","x",";","}","float","mE","(","sampler2D","mx",",","sampler2D","my",",","vec2","mz",",","float","mA",")","{","vec2","mB","=","vec2","(","0.0",",","1.0",")",";","for","(","int","mC","=","0",";","mC","<","SMAA_MAX_SEARCH_STEPS",";","mC","++",")","{","if","(","mz",".","x","<","mA","&&","mB",".","g",">","0.8281","&&","mB",".","r","==","0.0",")","{","mB","=","texture2D","(","mx",",","mz",",","0.0",")",".","rg",";","mz","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","mz",";","}","}","float","mD","=","-","(","255.0","/","127.0",")","*","mo","(","my",",","mB",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","mD","+","mz",".","x",";","}","float","mM","(","sampler2D","mF",",","sampler2D","mG",",","vec2","mH",",","float","mI",")","{","vec2","mJ","=","vec2","(","1.0",",","0.0",")",";","for","(","int","mK","=","0",";","mK","<","SMAA_MAX_SEARCH_STEPS",";","mK","++",")","{","if","(","mH",".","y",">","mI","&&","mJ",".","r",">","0.8281","&&","mJ",".","g","==","0.0",")","{","mJ","=","texture2D","(","mF",",","mH",",","0.0",")",".","rg",";","mH","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","mH",";","}","}","float","mL","=","-","(","255.0","/","127.0",")","*","mo","(","mG",",","mJ",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","mL","+","mH",".","y",";","}","float","mU","(","sampler2D","mN",",","sampler2D","mO",",","vec2","mP",",","float","mQ",")","{","vec2","mR","=","vec2","(","1.0",",","0.0",")",";","for","(","int","mS","=","0",";","mS","<","SMAA_MAX_SEARCH_STEPS",";","mS","++",")","{","if","(","mP",".","y","<","mQ","&&","mR",".","r",">","0.8281","&&","mR",".","g","==","0.0",")","{","mR","=","texture2D","(","mN",",","mP",",","0.0",")",".","rg",";","mP","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","mP",";","}","}","float","mT","=","-","(","255.0","/","127.0",")","*","mo","(","mO",",","mR",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","mT","+","mP",".","y",";","}","vec2","na","(","sampler2D","mV",",","vec2","mW",",","float","mX",",","float","mY",",","float","mZ",")","{","vec2","m_","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","kE","(","4.0","*","vec2","(","mX",",","mY",")",")","+","mW",";","m_","=","SMAA_AREATEX_PIXEL_SIZE","*","m_","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","m_",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","mZ","+","m_",".","y",";","return","texture2D","(","mV",",","m_",",","0.0",")",".","rg",";","}","void","ni","(","sampler2D","nb",",","inout","vec2","nc",",","vec4","nd",",","vec2","ne",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nf","=","step","(","ne",".","xy",",","ne",".","yx",")",";","vec2","ng","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","nf",";","ng","/=","nf",".","x","+","nf",".","y",";","vec2","nh","=","vec2","(","1.0",",","1.0",")",";","nh",".","x","-=","ng",".","x","*","texture2D","(","nb",",","nd",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","nh",".","x","-=","ng",".","y","*","texture2D","(","nb",",","nd",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","nh",".","y","-=","ng",".","x","*","texture2D","(","nb",",","nd",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","nh",".","y","-=","ng",".","y","*","texture2D","(","nb",",","nd",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","nc","*=","clamp","(","nh",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","nq","(","sampler2D","nj",",","inout","vec2","nk",",","vec4","nl",",","vec2","nm",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nn","=","step","(","nm",".","xy",",","nm",".","yx",")",";","vec2","no","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","nn",";","no","/=","nn",".","x","+","nn",".","y",";","vec2","np","=","vec2","(","1.0",",","1.0",")",";","np",".","x","-=","no",".","x","*","texture2D","(","nj",",","nl",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","np",".","x","-=","no",".","y","*","texture2D","(","nj",",","nl",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","np",".","y","-=","no",".","x","*","texture2D","(","nj",",","nl",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","np",".","y","-=","no",".","y","*","texture2D","(","nj",",","nl",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","nk","*=","clamp","(","np",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","vec4","nK","(","vec2","nr",",","vec2","ns",",","vec4","nt","[","3","]",",","sampler2D","nu",",","sampler2D","nv",",","sampler2D","nw",",","vec4","nx",")","{","vec4","ny","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","nz","=","texture2D","(","nu",",","nr",")",".","rg",";","if","(","nz",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ny",".","rg","=","mi","(","nu",",","nv",",","nr",",","nz",",","nx",")",";","if","(","ny",".","r","==","-","ny",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","nA",";","vec3","nB",";","nB",".","x","=","mw","(","nu",",","nw",",","nt","[","0","]",".","xy",",","nt","[","2","]",".","x",")",";","nB",".","y","=","nt","[","1","]",".","y",";","nA",".","x","=","nB",".","x",";","float","nC","=","texture2D","(","nu",",","nB",".","xy",",","0.0",")",".","r",";","nB",".","z","=","mE","(","nu",",","nw",",","nt","[","0","]",".","zw",",","nt","[","2","]",".","y",")",";","nA",".","y","=","nB",".","z",";","nA","=","abs","(","kE","(","nA","/","u_texel_size",".","xx","-","ns",".","xx",")",")",";","vec2","nD","=","sqrt","(","nA",")",";","float","nE","=","texture2D","(","nu",",","nB",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","ny",".","rg","=","na","(","nv",",","nD",",","nC",",","nE",",","nx",".","y",")",";","nB",".","y","=","nr",".","y",";","ni","(","nu",",","ny",".","rg",",","nB",".","xyzy",",","nA",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","nz",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","nz",".","r",">","0.0",")","{","vec2","nF",";","vec3","nG",";","nG",".","y","=","mM","(","nu",",","nw",",","nt","[","1","]",".","xy",",","nt","[","2","]",".","z",")",";","nG",".","x","=","nt","[","0","]",".","x",";","nF",".","x","=","nG",".","y",";","float","nH","=","texture2D","(","nu",",","nG",".","xy",",","0.0",")",".","g",";","nG",".","z","=","mU","(","nu",",","nw",",","nt","[","1","]",".","zw",",","nt","[","2","]",".","w",")",";","nF",".","y","=","nG",".","z",";","nF","=","abs","(","kE","(","nF","/","u_texel_size",".","yy","-","ns",".","yy",")",")",";","vec2","nI","=","sqrt","(","nF",")",";","float","nJ","=","texture2D","(","nu",",","nG",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","ny",".","ba","=","na","(","nv",",","nI",",","nH",",","nJ",",","nx",".","x",")",";","nG",".","x","=","nr",".","x",";","nq","(","nu",",","ny",".","ba",",","nG",".","xyxz",",","nF",")",";","}","return","ny",";","}","vec4","nZ","(","vec2","nL",",","vec4","nM",",","sampler2D","nN",",","sampler2D","nO"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nP"]}]}}]},{type:"textline",tokens:[")","{","vec4","nQ",";","nQ",".","x","=","texture2D","(","nO",",","nM",".","xy",")",".","a",";","nQ",".","y","=","texture2D","(","nO",",","nM",".","zw",")",".","g",";","nQ",".","wz","=","texture2D","(","nO",",","nL",")",".","xz",";","if","(","dot","(","nQ",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","nR","=","texture2D","(","nN",",","nL",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nS","=","texture2D","(","nP",",","nL",",","0.0",")",".","rg",";","nR",".","a","=","sqrt","(","5.0","*","length","(","nS",")",")",";"]}]}}]},{type:"textline",tokens:["return","nR",";","}","else","{","bool","nT","=","max","(","nQ",".","x",",","nQ",".","z",")",">","max","(","nQ",".","y",",","nQ",".","w",")",";","vec4","nU","=","vec4","(","0.0",",","nQ",".","y",",","0.0",",","nQ",".","w",")",";","vec2","nV","=","nQ",".","yw",";","kz","(","bvec4","(","nT",",","nT",",","nT",",","nT",")",",","nU",",","vec4","(","nQ",".","x",",","0.0",",","nQ",".","z",",","0.0",")",")",";","kz","(","bvec2","(","nT",",","nT",")",",","nV",",","nQ",".","xz",")",";","nV","/=","dot","(","nV",",","vec2","(","1.0",",","1.0",")",")",";","vec4","nW","=","nU","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","nL",".","xyxy",";","vec4","nX","=","nV",".","x","*","texture2D","(","nN",",","nW",".","xy",",","0.0",")",";","nX","+=","nV",".","y","*","texture2D","(","nN",",","nW",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nY","=","nV",".","x","*","texture2D","(","nP",",","nW",".","xy",",","0.0",")",".","rg",";","nY","+=","nV",".","y","*","texture2D","(","nP",",","nW",".","zw",",","0.0",")",".","rg",";","nX",".","a","=","sqrt","(","5.0","*","length","(","nY",")",")",";"]}]}}]},{type:"textline",tokens:["return","nX",";","}","}","vec4","oi","(","vec2","n_",",","sampler2D","oa",",","sampler2D","ob"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","oc"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","od","=","-","texture2D","(","oc",",","n_",")",".","rg",";","vec4","oe","=","texture2D","(","oa",",","n_",")",";","vec4","of","=","texture2D","(","ob",",","n_","+","od",")",";","float","og","=","abs","(","oe",".","a","*","oe",".","a","-","of",".","a","*","of",".","a",")","/","5.0",";","float","oh","=","0.5","*","clamp","(","1.0","-","sqrt","(","og",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","return","mix","(","oe",",","of",",","oh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","oe","=","texture2D","(","oa",",","n_",")",";","vec4","of","=","texture2D","(","ob",",","n_",")",";","return","mix","(","oe",",","of",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oj","=","vec4","(","kX","(","a",",","kg",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ok","=","vec4","(","0.0",")",";","vec4","oj","=","nK","(","a",",","kh",",","kg",",","u_color",",","u_area_tex",",","u_search_tex",",","ok",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oj","=","nZ","(","a",",","kg",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","oj","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","oj",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg","[","3","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","kh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"textline",tokens:["void","iD","(","vec2","iB",",","out","vec4","iC","[","3","]",")","{","iC","[","0","]","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","iB",".","xyxy",";","iC","[","1","]","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","iB",".","xyxy",";","iC","[","2","]","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","iB",".","xyxy",";","}","void","iH","(","vec2","iE",",","out","vec2","iF",",","out","vec4","iG","[","3","]",")","{","iF","=","iE","/","u_texel_size",";","iG","[","0","]","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","iE",".","xyxy",";","iG","[","1","]","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","iE",".","xyxy",";","iG","[","2","]","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","iG","[","0","]",".","xz",",","iG","[","1","]",".","yw",")",";","}","void","iK","(","vec2","iI",",","out","vec4","iJ",")","{","iJ","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","iI",".","xyxy",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["iD","(","a",",","kg",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["iH","(","a",",","kh",",","kg",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["iK","(","a",",","kg",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"define",name:"SSAO_QUALITY_16",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["2"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","float","u_view_max_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_dithering_amount",";","uniform","float","u_ssao_gauss_center",";","uniform","float","u_ssao_gauss_width_square",";","uniform","float","u_ssao_gauss_width_left_square",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","vec2","kn","(","vec2","ki",")","{","float","kj","=","dot","(","ki",",","vec2","(","12.9898",",","78.233",")",")",";","float","kk","=","dot","(","ki",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","kl","=","fract","(","sin","(","kj",")","*","43758.5453",")","*","2.0","-","1.0",";","float","km","=","fract","(","sin","(","kk",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","kl",",","km",")",";","}","float","kp","(","in","vec2","ko",")","{","return","kb","(","u_depth",",","ko",",","u_camera_range",")",";","}","float","kx","(","in","float","kq",",","in","float","kr",",","inout","int","ks",")","{","float","kt","=","u_ssao_gauss_width_square",";","float","ku","=","(","kq","-","kr",")","*","100.0",";","if","(","ku","<","u_ssao_gauss_center",")","kt","=","u_ssao_gauss_width_left_square",";","else","ks","=","1",";","float","kv","=","ku","-","u_ssao_gauss_center",";","float","kw","=","exp","(","-","2.0","*","kv","*","kv","/","kt",")",";","return","kw",";","}","float","kG","(","float","ky",",","vec2","kz",")","{","float","kA","=","0.0",";","float","kB","=","0.0",";","float","kC","=","max","(","1.0",",","u_view_max_depth","/","100.0",")",";","ky","*=","kC",";","kz","/=","ky",";","vec2","kD","=","a","+","kz",";","vec2","kE","=","a","-","kz",";","int","kF","=","0",";","kA","=","kx","(","ky",",","kC","*","kp","(","kD",")",",","kF",")",";","if","(","kF",">","0","||","kD",".","y","<","0.0","||","kD",".","y",">","1.0","||","kD",".","x","<","0.0","||","kD",".","x",">","1.0",")","{","kB","=","kx","(","kC","*","kp","(","kE",")",",","ky",",","kF",")",";","kA","+=","(","1.0","-","kA",")","*","kB",";","}","return","kA",";","}","void","main","(",")","{","vec2","kH","=","kn","(","a",")","*","u_ssao_dithering_amount",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["kH","*=","1.5",";"]}]}}]},{type:"textline",tokens:["float","kI","=","kp","(","a",")",";","float","kJ","=","0.0",";","vec2","kK","=","u_texel_size","*","0.5",";","for","(","int","kL","=","0",";","kL","<","4",";","kL","++",")","{"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","kL","==","0","||","kL","==","2",")","{"]}]}}]},{type:"textline",tokens:["kJ","+=","kG","(","kI",",","kK",")",";","kJ","+=","kG","(","kI",",","vec2","(","kK",".","x",",","-","kK",".","y",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","-","kK",".","x",",","kK",".","y",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","-","kK",".","x",",","-","kK",".","y",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","if","(","kL","==","1","||","kL","==","3",")","{"]}]}}]},{type:"textline",tokens:["kJ","+=","kG","(","kI",",","vec2","(","kK",".","x","*","1.2",",","0.0",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","-","kK",".","x","*","1.2",",","0.0",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","0.0",",","kK",".","y","*","1.2",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","0.0",",","-","kK",".","y","*","1.2",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["kK","+=","kH",";","kK","*=","u_ssao_radius_increase",";","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","1.0","-","kJ","/","16.0",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","1.0","-","kJ","/","32.0",";"]}]}}]},{type:"textline",tokens:["float","kM","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","kI",")",";","kJ","=","(","1.0","-","kM",")","+","kJ","*","kM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","1.0",";"]}]}}]},{type:"textline",tokens:["float","kN","=","texture2D","(","u_color",",","a",")",".","r",";","gl_FragColor","=","vec4","(","kN",",","kJ",",","0.0",",","1.0",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"textline",tokens:["float","b","=",".000001",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","float","d",",","float","e",")","{","return","abs","(","d","-","e",")","<","b",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","mat3","l","(","mat3","j",")","{","mat3","k","=","j",";","k","[","0","]","[","1","]","=","j","[","1","]","[","0","]",";","k","[","0","]","[","2","]","=","j","[","2","]","[","0","]",";","k","[","1","]","[","0","]","=","j","[","0","]","[","1","]",";","k","[","1","]","[","2","]","=","j","[","2","]","[","1","]",";","k","[","2","]","[","0","]","=","j","[","0","]","[","2","]",";","k","[","2","]","[","1","]","=","j","[","1","]","[","2","]",";","return","k",";","}","mat4","m","(",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","o","(","float","n",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","cos","(","n",")",",","-","sin","(","n",")",",","0.0",",","0.0",",","sin","(","n",")",",","cos","(","n",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","q","(","float","p",")","{","return","mat4","(","cos","(","p",")",",","0.0",",","sin","(","p",")",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","-","sin","(","p",")",",","0.0",",","cos","(","p",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","s","(","float","r",")","{","return","mat4","(","cos","(","r",")",",","-","sin","(","r",")",",","0.0",",","0.0",",","sin","(","r",")",",","cos","(","r",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","c","u","(","in","c","t",")","{","return","c","(","t",".","a",",","t",".","b",",","normalize","(","t",".","c",")",",","normalize","(","t",".","d",")",",","normalize","(","t",".","e",")",",","t",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"BILLBOARD_THRESHOLD",tokens:["M_PI","/","3.0"]},{type:"textline",tokens:["const","vec3","v","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","B","(","vec3","w",",","mat4","x",")","{","vec3","y","=","vec3","(","x","[","0","]","[","0","]",",","x","[","1","]","[","0","]",",","x","[","2","]","[","0","]",")",";","vec3","z","=","vec3","(","x","[","0","]","[","1","]",",","x","[","1","]","[","1","]",",","x","[","2","]","[","1","]",")",";","vec3","A","=","vec3","(","x","[","0","]","[","2","]",",","x","[","1","]","[","2","]",",","x","[","2","]","[","2","]",")",";","z","=","cross","(","A",",","y",")",";","return","mat4","(","vec4","(","y",",","0.0",")",",","vec4","(","z",",","0.0",")",",","vec4","(","A",",","0.0",")",",","vec4","(","w",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","H","(","vec3","C",",","vec3","D",")","{","vec3","E","=","C","-","D",";","E",".","y","=","0.0",";","E","=","normalize","(","E",")",";","vec3","F","=","normalize","(","cross","(","v",",","E",")",")",";","vec3","G","=","normalize","(","cross","(","E",",","F",")",")",";","return","mat4","(","vec4","(","F",",","0.0",")",",","vec4","(","G",",","0.0",")",",","vec4","(","E",",","0.0",")",",","vec4","(","D",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","S","(","in","vec3","I",",","float","J",",","float","L",",","float","M",",","vec3","N",")","{","float","O","=","fract","(","length","(","N",")","/","0.17",")",";","float","P","=","M","+","O","/","10.0",";","float","Q","=","O","/","M",";","I","*=","1.0","+","0.5","*","sin","(","J",")",";","float","R","=","length","(","I",")","*","L","*","sin","(","2.0","*","3.14","*","J","*","P","+","Q",")",";","return","s","(","R",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ae","(","in","vec3","T",",","in","vec3","U",",","in","mat4","V",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","W","=","B","(","U",",","V",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","W","=","H","(","T",",","U",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","X","=","T","-","U",";","X","[","1","]","=","0.0",";","float","Y","=","fract","(","dot","(","U",",","U",")","/","127.0",")",";","float","Z","=","2.0","*","M_PI","*","Y",";","X","=","(","q","(","Z",")","*","vec4","(","X",",","0.0",")",")",".","xyz",";","X","=","normalize","(","X",")",";","float","_","=","X","[","2","]",";","float","aa","=","X","[","0","]",";","if","(","abs","(","_",")",">","cos","(","BILLBOARD_THRESHOLD",")",")","{","if","(","_","<","0.0",")","W","=","W","*","q","(","M_PI",")",";","}","else","{","float","ab","=","acos","(","_",")",";","if","(","aa","<","0.0",")","ab","=","2.0","*","M_PI","-","ab",";","float","ac","=","BILLBOARD_THRESHOLD","/","(","M_PI","/","2.0","-","BILLBOARD_THRESHOLD",")",";","float","ad","=","(","ac","+","1.0",")","*","(","ab","-","sign","(","aa",")","*","BILLBOARD_THRESHOLD",")",";","W","=","W","*","q","(","ad",")",";","}"]}]}}]},{type:"textline",tokens:["return","W",";","}","c","al","(","in","vec3","af",",","in","vec3","ag",",","in","vec3","ah",",","in","vec3","ai",",","in","vec3","aj",",","in","mat4","ak",")","{","af","=","(","ak","*","vec4","(","af",",","1.0",")",")",".","xyz",";","ag","=","(","ak","*","vec4","(","ag",",","1.0",")",")",".","xyz",";","ah","=","(","ak","*","vec4","(","ah",",","0.0",")",")",".","xyz",";","ai","=","(","ak","*","vec4","(","ai",",","0.0",")",")",".","xyz",";","aj","=","(","ak","*","vec4","(","aj",",","0.0",")",")",".","xyz",";","return","u","(","c","(","af",",","ag",",","ah",",","ai",",","aj",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","ao","(","vec2","am",",","vec3","an",")","{","return","(","am","+","0.5",")","*","an",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ax","(","in","vec4","ap",",","in","vec4","aq",",","in","float","ar",")","{","float","as","=","ap","[","0","]","*","aq","[","0","]","+","ap","[","1","]","*","aq","[","1","]","+","ap","[","2","]","*","aq","[","2","]","+","ap","[","3","]","*","aq","[","3","]",";","if","(","as","<","0.0",")","{","aq","*=","-","1.0",";","as","=","-","as",";","}","if","(","abs","(","as",")",">=","1.0",")","return","ap",";","float","at","=","acos","(","as",")",";","float","au","=","sqrt","(","1.0","-","as","*","as",")",";","if","(","abs","(","au",")","<","0.001",")","return","vec4","(","ap","*","0.5","+","aq","*","0.5",")",";","float","av","=","sin","(","(","1.0","-","ar",")","*","at",")","/","au",";","float","aw","=","sin","(","ar","*","at",")","/","au",";","return","ap","*","av","+","aq","*","aw",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aM","(","in","vec3","ay",",","in","vec4","az",",","in","vec4","aA",",","in","vec4","aB",",","in","vec4","aC",",","in","float","aD",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aE","=","ax","(","az",",","aA",",","aD",")",";","vec4","aF","=","mix","(","aB",",","aC",",","aD",")",";","vec3","aG","=","i","(","aE",",","ay",")",";","vec3","aH","=","aG","*","aF",".","w","+","aF",".","xyz",";","return","aH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aI","=","i","(","az",",","ay",")",";","vec3","aJ","=","i","(","aA",",","ay",")",";","vec3","aK","=","aI","*","aB",".","w","+","aB",".","xyz",";","vec3","aL","=","aJ","*","aC",".","w","+","aC",".","xyz",";","return","mix","(","aK",",","aL",",","aD",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aV","(","in","vec3","aN",",","in","vec4","aO",",","in","vec4","aP",",","in","float","aQ",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aR","=","ax","(","aO",",","aP",",","aQ",")",";","vec3","aS","=","i","(","aR",",","aN",")",";","return","aS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aT","=","i","(","aO",",","aN",")",";","vec3","aU","=","i","(","aP",",","aN",")",";","return","mix","(","aT",",","aU",",","aQ",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aM","(","in","vec3","aW",",","in","vec4","aX",",","in","vec4","aY",")","{","vec3","aZ","=","i","(","aX",",","aW",")",";","vec3","a_","=","aZ","*","aY",".","w","+","aY",".","xyz",";","return","a_",";","}","vec3","aV","(","in","vec3","ba",",","in","vec4","bb",")","{","vec3","bc","=","i","(","bb",",","ba",")",";","return","bc",";","}"]}]}}]},{type:"textline",tokens:["void","bq","(","inout","vec3","bd",",","inout","vec3","be",",","inout","vec3","bf",",","inout","vec3","bg",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bh","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bi","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bj","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bk","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bl","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","bm","=","0",";","bm","<","4",";","bm","++",")","{","int","bn","=","int","(","a_influence","[","bm","]",")",";","float","bo","=","fract","(","a_influence","[","bm","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bi","+=","bo","*","aM","(","bd",",","u_quatsb","[","bn","]",",","u_quatsa","[","bn","]",",","u_transb","[","bn","]",",","u_transa","[","bn","]",",","bh",")",";","bj","+=","bo","*","aV","(","be",",","u_quatsb","[","bn","]",",","u_quatsa","[","bn","]",",","bh",")",";","bk","+=","bo","*","aV","(","bf",",","u_quatsb","[","bn","]",",","u_quatsa","[","bn","]",",","bh",")",";","bl","+=","bo","*","aV","(","bg",",","u_quatsb","[","bn","]",",","u_quatsa","[","bn","]",",","bh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bi","+=","bo","*","aM","(","bd",",","u_quatsb","[","bn","]",",","u_transb","[","bn","]",")",";","bj","+=","bo","*","aV","(","be",",","u_quatsb","[","bn","]",")",";","bk","+=","bo","*","aV","(","bf",",","u_quatsb","[","bn","]",")",";","bl","+=","bo","*","aV","(","bg",",","u_quatsb","[","bn","]",")",";"]}]}}]},{type:"textline",tokens:["}","bd","=","bi",";","be","=","bj",";","bf","=","bk",";","bg","=","bl",";","}","else","{","int","bp","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bp",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bd","=","aM","(","bd",",","u_quatsb","[","bp","]",",","u_quatsa","[","bp","]",",","u_transb","[","bp","]",",","u_transa","[","bp","]",",","bh",")",";","be","=","aV","(","be",",","u_quatsb","[","bp","]",",","u_quatsa","[","bp","]",",","bh",")",";","bf","=","aV","(","bf",",","u_quatsb","[","bp","]",",","u_quatsa","[","bp","]",",","bh",")",";","bg","=","aV","(","bg",",","u_quatsb","[","bp","]",",","u_quatsa","[","bp","]",",","bh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bd","=","aM","(","bd",",","u_quatsb","[","bp","]",",","u_transb","[","bp","]",")",";","be","=","aV","(","be",",","u_quatsb","[","bp","]",")",";","bf","=","aV","(","bf",",","u_quatsb","[","bp","]",")",";","bg","=","aV","(","bg",",","u_quatsb","[","bp","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bE","(","inout","vec3","br",",","in","vec3","bs",",","in","float","bt",",","in","float","bu",",","in","float","bv",",","in","vec3","bw",",","in","float","bx",")","{","float","by","=","length","(","bs",")",";","float","bz","=","bu","*","(","1.0","+","0.1","*","fract","(","by",")",")",";","float","bA","=","bt","*","bx","*","(","1.0","+","sin","(","2.0","*","3.14","*","bv","*","bz","+","by",")",")",";","float","bB","=","(","br",".","y","-","bs",".","y",")","*","abs","(","bA",")",";","bB","+=","1.0",";","bB","*=","bB",";","bB","=","bB","*","bB","-","bB",";","vec3","bC","=","br",";","bC",".","xz","+=","bw",".","xz","*","bB","*","sign","(","bA",")",";","float","bD","=","length","(","br","-","bs",")",";","br","=","bs","+","normalize","(","bC","-","bs",")","*","bD",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bG","(","vec4","bF",")","{","return","bF","*","bF","*","(","3.0","-","2.0","*","bF",")",";","}","vec4","bI","(","vec4","bH",")","{","return","abs","(","fract","(","bH","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bK","(","vec4","bJ",")","{","return","bG","(","bI","(","bJ",")",")",";","}","void","ca","(","inout","vec3","bL",",","in","float","bM",",","in","vec3","bN",",","in","vec3","bO",",","in","vec3","bP",",","in","float","bQ",",","in","float","bR",",","in","float","bS",",","in","vec3","bT",")","{","float","bU",";","float","bV",";","float","bW",";","vec2","bX",";","vec4","bY",";","vec2","bZ",";","vec3","b_",";","bU","=","dot","(","bP",",","vec3","(","1.0",")",")",";","bV","=","bU","+","bT",".","g",";","bW","=","dot","(","bL",",","vec3","(","bT",".","g",")",")",";","bX","=","(","bM","+","vec2","(","bW",",","bV",")",")",";","bY","=","(","(","fract","(","(","bX",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bO",")","*","bQ",";","bY","=","bK","(","bY",")",";","bZ","=","bY",".","xz","+","bY",".","yw",";","bZ",".","y","=","0.5","-","bZ",".","y",";","b_","=","bZ",".","xyx","*","bT",".","rbr","*","vec3","(","bR","*","bN",".","x",",","bS",",","bR","*","bN",".","z",")",";","bL","+=","b_",";","}"]}]}}]},{type:"textline",tokens:["void","ch","(","inout","vec3","cb",",","inout","vec3","cc",",","in","vec3","cd",")","{","vec3","ce","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cf","=","cc",";","vec3","cg","=","(","u_model_matrix","*","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",")",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cf","=","cb",";","vec3","cg","=","cc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ca","(","cf",",","u_time",",","cd",",","ce",",","cg",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bE","(","cf",",","cg",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ce",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bE","(","cf",",","cg",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ce",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["cb","+=","cf","-","cc",";","cc","=","cf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cb","=","cf",";","cc","=","cg",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_SRC_RGBA_PCF",tokens:["3"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["4"]},{type:"define",name:"SHADOW_SRC_VSM",tokens:["5"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["6"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["3"]},{type:"define",name:"SHADOW_DST_VSM",tokens:["4"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","cm","(","const","in","float","ci",")","{","const","vec4","cj","=","vec4","(","255.0","*","255.0","*","255.0",",","255.0","*","255.0",",","255.0",",","1.0",")",";","const","vec4","ck","=","vec4","(","0.0",",","1.0","/","255.0",",","1.0","/","255.0",",","1.0","/","255.0",")",";","vec4","cl","=","fract","(","ci","*","cj",")",";","cl","-=","cl",".","xxyz","*","ck",";","return","cl",";","}","float","cq","(","const","in","vec4","cn",")","{","float","co",";","const","vec4","cp","=","vec4","(","1.0","/","(","255.0","*","255.0","*","255.0",")",",","1.0","/","(","255.0","*","255.0",")",",","1.0","/","255.0",",","1.0",")",";","co","=","dot","(","cn",",","cp",")",";","return","co",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_SECTION_DIST0",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST1",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST2",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST3",tokens:["0.0"]},{type:"var",name:"PCF_TEXEL_SIZE",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["float","cF","(","sampler2D","cz",",","vec3","cA",",","float","cB",",","float","cC",")","{","vec2","cD","=","cA",".","xy","+","vec2","(","cB",",","cC",")","*","PCF_TEXEL_SIZE",";","vec4","cE","=","texture2D","(","cz",",","cD",")",";","return","cq","(","cE",")",";","}"]}]}}]},{type:"textline",tokens:["float","cU","(","vec3","cG",",","sampler2D","cH",",","float","cI",")","{","float","cJ",";","cG",".","z","=","clamp","(","cG",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cK","=","texture2D","(","cH",",","cG",".","xy",")",";","float","cL","=","cq","(","cK",")",";","if","(","all","(","lessThan","(","cG",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cG",".","xy",",","vec2","(","0.0",")",")",")","&&","cL","<","cG",".","z",")","{","float","cM","=","cG",".","z","-","cL",";","cJ","=","exp","(","-","cM","*","cI",")",";","}","else","cJ","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cL",";","cL",".","r","=","cF","(","cH",",","cG",",","0.5",",","0.5",")",";","cL",".","g","=","cF","(","cH",",","cG",",","0.5",",","-","0.5",")",";","cL",".","b","=","cF","(","cH",",","cG",",","-","0.5",",","-","0.5",")",";","cL",".","a","=","cF","(","cH",",","cG",",","-","0.5",",","0.5",")",";","vec4","cN","=","vec4","(","cG",".","z",",","cG",".","z",",","cG",".","z",",","cG",".","z",")",";","if","(","all","(","lessThan","(","cG",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cG",".","xy",",","vec2","(","0.0",")",")",")",")","cJ","=","dot","(","vec4","(","greaterThanEqual","(","cL",",","cN",")",")",",","vec4","(","0.25",",","0.25",",","0.25",",","0.25",")",")",";","else","cJ","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cO","=","texture2D","(","cH",",","cG",".","xy",")",";","float","cP","=","cO",".","r",";","float","cQ","=","cO",".","g",";","if","(","all","(","lessThan","(","cG",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cG",".","xy",",","vec2","(","0.0",")",")",")","&&","cP","<","cG",".","z",")","{","float","cR","=","cQ","-","cP","*","cP",";","float","cS","=","cG",".","z","-","cP",";","cJ","=","cR","/","(","cR","+","cS","*","cS",")",";","}","else","cJ","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","cL","=","texture2D","(","cH",",","cG",".","xy",")",".","r",";","if","(","all","(","lessThan","(","cG",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cG",".","xy",",","vec2","(","0.0",")",")",")","&&","cL","<","cG",".","z",")","{","cJ","=","0.0",";","float","cT","=","cG",".","z","-","cL",";","cJ","=","exp","(","-","cT","*","cI",")",";","}","else","cJ","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","cJ",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","c_","(","float","cV",",","float","cW",")","{","vec3","cX",";","float","cY","=","1.0",";","float","cZ","=","-","cV",";","if","(","cZ","<","CSM_SECTION_DIST0",")","{","cX","=","cs",".","xyz","/","cs",".","w",";","cY","=","cU","(","cX",",","u_shadow_map0",",","cW",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cZ","<","CSM_SECTION_DIST1",")","{","cX","=","ct",".","xyz","/","ct",".","w",";","cY","=","cU","(","cX",",","u_shadow_map1",",","cW",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cZ","<","CSM_SECTION_DIST2",")","{","cX","=","cu",".","xyz","/","cu",".","w",";","cY","=","cU","(","cX",",","u_shadow_map2",",","cW",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cZ","<","CSM_SECTION_DIST3",")","{","cX","=","cv",".","xyz","/","cv",".","w",";","cY","=","cU","(","cX",",","u_shadow_map3",",","cW",")",";","}"]}]}}]},{type:"textline",tokens:["return","cY",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","df","(","in","float","da",",","inout","vec3","db",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","dc","=","texture2DProj","(","u_shadow_mask",",","cw",")",".","rg",";","vec3","dd","=","vec3","(","dc",".","r",")",";","float","de","=","dc",".","g",";","cy","=","vec4","(","dd",",","de",")",";","db","*=","cy",".","a",";","return","cy",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","c_","(","cx",".","z",",","da",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dg","=","2.0",";","const","float","dh","=","0.3",";","vec2","dm","(","vec3","di",",","float","dj",",","vec2","dk",")","{","vec2","dl","=","vec2","(","(","di",".","x","-","dk",".","x",")","/","dj",",","-","(","di",".","z","-","dk",".","y",")","/","dj",")",";","return","fract","(","dl",")",";","}","vec2","dr","(","vec2","dn",",","float","dp",",","vec2","dq",")","{","return","vec2","(","dn",".","x","*","dp",",","-","dn",".","y","*","dp",")","+","dq",";","}","c","ds","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","dY","(","vec3","dt",",","vec3","du",",","vec3","dv",",","vec3","dw",",","vec3","dx",",","sampler2D","dy",",","sampler2D","dz",",","vec3","dA",",","float","dB",",","vec3","dC",",","vec4","dD",",","mat4","dE",")","{","vec3","dF","=","i","(","dD",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","dG","=","-","dF",".","x",";","float","dH","=","-","dF",".","z",";","vec2","dI","=","vec2","(","dC",".","x","+","dB","*","(","-","1.0","-","dG",")","/","2.0",",","dC",".","z","+","dB","*","(","1.0","-","dH",")","/","2.0",")",";","vec2","dJ","=","dm","(","dx",",","dB",",","dI",")",";","float","dK","=","dB","/","dA",".","z",";","vec2","dL","=","(","dJ","-","vec2","(","0.5",")",")","*","dK","+","vec2","(","0.5",")",";","vec3","dM","=","dF","*","(","dB","/","dA",".","z","-","1.0",")","/","2.0",";","dL",".","x","+=","dM",".","x",";","dL",".","y","-=","dM",".","z",";","float","dN","=","dB","/","2.0","-","dg",";","vec2","dO","=","abs","(","dr","(","dJ","-","vec2","(","0.5",")",",","dB",",","vec2","(","0.0",")",")",")",";","if","(","(","dO",".","x",">","dN",")","||","(","dO",".","y",">","dN",")",")","return","ds","(",")",";","float","dP","=","dN","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","dO",")",">","dP",")","return","ds","(",")",";","vec4","dQ","=","texture2D","(","dz",",","dL",")",";","float","dR","=","dQ",".","r",";","if","(","dR","<","dh",")","return","ds","(",")",";","dt",".","y","*=","dR",";","vec3","dS","=","dQ",".","gba",";","vec2","dT","=","dm","(","dt",",","dB",",","dI",")",";","dt",".","xz","=","dr","(","dT",",","dB",",","dI",")",";","float","dU","=","dA",".","y","-","dA",".","x",";","float","dV","=","dA",".","y","-","texture2D","(","dy",",","dL",")",".","r","*","dU",";","dt",".","y","+=","dV",";","dx",".","xz","=","dr","(","dJ",",","dB",",","dI",")",";","dx",".","y","=","dV",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["dt","-=","dx",";","mat4","dW","=","ae","(","dC",",","dx",",","dE",")",";","c","dX","=","al","(","dt",",","dx",",","du",",","dv",",","dw",",","dW",")",";","dX",".","b","=","dx",";","dX",".","f","=","dS",";","return","u","(","dX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","u","(","c","(","dt",",","dx",",","du",",","dv",",","dw",",","dS",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["void","d_","(","vec3","dZ",")","{","cs","=","u_b_light_matrix","*","u_p_light_matrix0","*","u_v_light_matrix","*","vec4","(","dZ",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["ct","=","u_b_light_matrix","*","u_p_light_matrix1","*","u_v_light_matrix","*","vec4","(","dZ",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cu","=","u_b_light_matrix","*","u_p_light_matrix2","*","u_v_light_matrix","*","vec4","(","dZ",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cv","=","u_b_light_matrix","*","u_p_light_matrix3","*","u_v_light_matrix","*","vec4","(","dZ",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","d_","(","vec4","ea",")","{","float","eb","=","ea",".","x",";","float","ec","=","ea",".","y",";","float","ed","=","ea",".","w",";","cw",".","x","=","(","eb","+","ed",")","/","2.0",";","cw",".","y","=","(","ec","+","ed",")","/","2.0",";","cw",".","z","=","ed",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","eg","(","inout","vec3","ef",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ef","=","pow","(","ef",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ei","(","inout","vec3","eh",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","pow","(","eh",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","el","(","inout","vec3","ej",",","in","float","ek",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ej","=","ej","*","ek",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["float","et","(","inout","vec3","eo",",","in","float","ep",",","in","vec4","eq",")","{","float","er","=","eq",".","w","*","ep",";","float","es","=","exp","(","-","er","*","er",")",";","es","=","clamp","(","es",",","0.0",",","1.0",")",";","eo","=","mix","(","eq",".","rgb",",","eo",",","es",")",";","return","es",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eA","(","in","mat4","eu",",","in","vec3","ev",")","{","vec3","ew","=","mix","(","eu","[","0","]",".","rgb",",","eu","[","1","]",".","rgb",",","max","(","sign","(","ev",".","x",")",",","0.0",")",")",";","vec3","ex","=","mix","(","eu","[","2","]",".","rgb",",","eu","[","3","]",".","rgb",",","max","(","sign","(","ev",".","z",")",",","0.0",")",")",";","vec3","ey","=","vec3","(","eu","[","0","]",".","a",",","eu","[","1","]",".","a",",","eu","[","2","]",".","a",")",";","vec3","ez","=","mix","(","ew",",","ex",",","abs","(","ev",".","z",")",")",";","ez","=","mix","(","ez",",","ey",",","abs","(","ev",".","y",")",")",";","return","ez",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eC","(","inout","float","eB",")","{","eB","-=","0.5",";","eB","=","4.0","*","(","eB","*","eB","*","eB",")","+","0.5",";","}","float","eR","(","inout","vec3","eD",",","in","float","eE",",","in","float","eF",",","in","float","eG",",","in","vec4","eH",",","in","vec4","eI",",","in","float","eJ",",","in","float","eK",")","{","eF","=","clamp","(","eF",",","0.0",",","1.0",")",";","float","eL","=","eI",".","w","*","eE",";","float","eM","=","exp","(","-","eL","*","eL",")",";","eM","=","clamp","(","eM",",","0.0",",","1.0",")",";","eE","=","max","(","eE","-","max","(","eG","/","eF",",","0.0",")",",","0.0",")",";","eL","=","eH",".","w","*","eE",";","float","eN","=","1.0","-","eL",";","eN","+=","max","(","eJ","-","WAVES_HEIGHT","-","0.05",",","0.0",")",";","+","max","(","eJ","/","WAVES_HEIGHT",",","0.0",")",";","eN","=","clamp","(","eN",",","0.0",",","1.0",")",";","eC","(","eN",")",";","if","(","eN","<","eM",")","{","vec3","eO","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","eP","=","eH",".","rgb",";","eG","=","clamp","(","-","eG","*","0.03",",","0.0",",","0.8",")",";","vec3","eQ","=","mix","(","eP",",","eO",",","min","(","eF",",","1.0",")",")",";","eQ","=","mix","(","eQ",",","vec3","(","0.0",")",",","eG",")","*","eK",";","eD","=","mix","(","eQ",",","eD",",","eN",")",";","return","eN",";","}","else","if","(","eN",">=","eM",")","{","eD","=","mix","(","eI",".","rgb",",","eD",",","eM",")",";","return","eM",";","}","}","float","e_","(","inout","vec3","eS",",","in","float","eT",",","in","float","eU",",","in","vec4","eV",",","in","float","eW",")","{","float","eX","=","eV",".","w","*","eT",";","float","eY","=","1.0","-","eX",";","eY","=","clamp","(","eY",",","0.0",",","1.0",")",";","eC","(","eY",")",";","eU","=","clamp","(","-","eU","*","0.03",",","0.0",",","0.8",")",";","vec3","eZ","=","mix","(","eV",".","rgb",",","vec3","(","0.0",")",",","eU",")","*","eW",";","eS","=","mix","(","eZ",",","eS",",","eY",")",";","return","eY",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["struct","fa","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fi","(","vec3","fb",",","vec3","fc",",","vec3","fd",",","vec4","fe",",","float","ff",")","{","vec3","fg","=","normalize","(","fb","+","fc",")",";","float","fh","=","fe","[","0","]","*","max","(","dot","(","fd",",","fg",")",",","0.0",")","+","fe","[","1","]",";","return","pow","(","fh",",","ff",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","ft","(","vec3","fj",",","vec3","fk",",","vec3","fl",",","float","fm",")","{","vec3","fn","=","normalize","(","fj","+","fk",")",";","float","fo","=","max","(","dot","(","fl",",","fn",")",",","0.001",")",";","float","fp","=","max","(","dot","(","fl",",","fk",")",",","0.001",")",";","float","fq","=","max","(","dot","(","fl",",","fj",")",",","0.001",")",";","float","fr","=","tan","(","acos","(","fo",")",")",";","float","fs","=","max","(","fm",",","0.001",")",";","return","fq","*","(","1.0","/","(","4.0","*","M_PI","*","fs","*","fs",")",")","*","(","exp","(","-","(","fr","*","fr",")","/","(","fs","*","fs",")",")","/","(","sqrt","(","fp","*","fq",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","fL","(","float","fu",",","vec3","fv",",","vec3","fw",",","vec3","fx",",","float","fy",",","inout","float","fz",")","{","if","(","fy",">","0.0",")","{","float","fA","=","max","(","dot","(","fv",",","fx",")",",","0.0",")",";","float","fB","=","acos","(","fu",")",";","float","fC","=","acos","(","fA",")",";","vec3","fD","=","normalize","(","fw","-","fu","*","fv",")",";","vec3","fE","=","normalize","(","fx","-","fA","*","fv",")",";","float","fF","=","max","(","dot","(","fD",",","fE",")",",","0.0",")",";","float","fG",",","fH",";","fG","=","max","(","fB",",","fC",")",";","fH","=","min","(","fB",",","fC",")",";","float","fI","=","fy","*","fy",";","float","fJ","=","1.0","-","0.5","*","(","fI","/","(","fI","+","0.33",")",")",";","float","fK","=","0.45","*","(","fI","/","(","fI","+","0.09",")",")",";","fH","*=","0.95",";","fz","=","fz","*","(","fJ","+","(","fK","*","fF","*","sin","(","fG",")","*","tan","(","fH",")",")",")",";","}","else","{","fz","=","fz",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","fS","(","vec3","fM",",","vec3","fN",",","float","fO",",","float","fP",",","out","float","fQ",")","{","float","fR",";","if","(","fO","==","0.0",")","{","fQ","=","1.0",";","}","else","{","fR","=","1.0","+","abs","(","dot","(","fN",",","fM",")",")",";","fR","=","fP","+","(","1.0","-","fP",")","*","pow","(","fR",",","fO",")",";","fQ","=","clamp","(","fR",",","0.0",",","1.0",")",";","}","}"]}]}}]},{type:"textline",tokens:["fa","gE","(","vec3","fT",",","vec3","fU",",","vec3","fV",",","vec3","fW",",","vec3","fX",",","vec3","fY",",","vec3","fZ",",","float","f_",",","vec2","ga",",","float","gb",",","vec3","gc","[","NUM_LIGHTS","]",",","vec3","gd","[","NUM_LIGHTS","]",",","vec3","ge","[","NUM_LIGHTS","]",",","vec4","gf","[","NUM_LIGHTS","]",",","vec4","gg","[","NUM_LIGHTS","]",",","float","gh",",","vec4","gi",")","{","fa","gj",";","gj",".","a","=","vec4","(","fT","+","fV","*","fU",",","0.0",")",";","gj",".","b","=","vec3","(","0.0",")",";","for","(","int","gk","=","0",";","gk","<","NUM_LIGHTS",";","gk","++",")","{","vec4","gl","=","gf","[","gk","]",";","vec4","gm","=","gg","[","gk","]",";","vec3","gn","=","vec3","(","0.0",")",";","vec3","go","=","ge","[","gk","]",";","go","*=","gb",";","float","gp","=","gm",".","z",";","if","(","gp",">","-","1.0",")","{","gn","=","gc","[","gk","]","-","fX",";","float","gq","=","length","(","gn",")",";","go","*=","gp","/","(","gp","+","gq","*","gq",")",";","gn","=","normalize","(","gn",")",";","float","gr","=","gm",".","x",";","float","gs","=","gm",".","y",";","if","(","gr",">","-","1.0",")","{","float","gt","=","dot","(","gn",",","gd","[","gk","]",")",";","gt","*=","smoothstep","(","0.0",",","1.0",",","(","gt","-","gr",")","/","gs",")",";","go","*=","gt",";","}","}","else","if","(","gp","==","-","1.0",")","{","gn","=","gd","[","gk","]",";","}","float","gu",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["fS","(","fY",",","gn",",","ga","[","0","]",",","ga","[","1","]",",","gu",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gv","=","max","(","dot","(","fY",",","gn",")",",","0.0",")",";","gu","=","gl","[","0","]","*","gv","+","gl","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["fL","(","gv",",","fY",",","gn",",","fZ",",","ga","[","0","]",",","gu",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","gw","=","fi","(","gn",",","fZ",",","fY",",","gl",",","f_",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","gw","=","ft","(","gn",",","fZ",",","fY",",","f_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gw","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","gn",",","fY",")","*","dot","(","fZ",",","fY",")","<","0.0",")","{","float","gx","=","gi",".","x",";","float","gy","=","gi",".","y",";","float","gz","=","gi",".","z",";","float","gA","=","gi",".","w",";","float","gB","=","clamp","(","abs","(","dot","(","gn",",","fY",")",")",",","0.0",",","1.0",")",";","float","gC","=","clamp","(","dot","(","fZ",",","-","gn",")",",","0.0",",","1.0",")",";","float","gD","=","pow","(","gC",",","gy",")",";","gj",".","a","+=","gh","*","vec4","(","go","*","gB","*","pow","(","fV",",","vec3","(","gx",")",")",",","1.0",")",";","gj",".","a","+=","gz","*","mix","(","vec4","(","fV",",","1.0",")",",","vec4","(","1.0",")",",","gA",")","*","gh","*","vec4","(","go","*","gB","*","vec3","(","gD",")",",","1.0",")",";","}","else","{","gj",".","b","+=","go","*","fW","*","gw",";","gj",".","a","+=","vec4","(","go","*","fV","*","gu",",","gw",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gj",".","b","+=","go","*","fW","*","gw",";","gj",".","a","+=","vec4","(","go","*","fV","*","gu",",","gw",")",";"]}]}}]},{type:"textline",tokens:["}","return","gj",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","gG","(","vec4","gF",")","{","return","gF","-","floor","(","gF","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","gG","(","vec3","gH",")","{","return","gH","-","floor","(","gH","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","gG","(","vec2","gI",")","{","return","gI","-","floor","(","gI","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","gK","(","vec4","gJ",")","{","return","gJ","-","floor","(","gJ","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","gM","(","vec4","gL",")","{","return","gG","(","(","34.0","*","gL","+","5.0",")","*","gL",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","gY","(","vec2","gN",")","{","vec2","gO","=","gG","(","floor","(","gN",")",")",";","vec2","gP","=","fract","(","gN",")",";","vec4","gQ","=","gP",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","gR","=","gP",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","gS","=","gM","(","gO",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","gS","=","gM","(","gS","+","gO",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","gT","=","gK","(","gS",")","*","K","+","K2",";","vec4","gU","=","gK","(","floor","(","gS","*","K",")",")","*","K","+","K2",";","vec4","gV","=","gQ","+","JITTER","*","gT",";","vec4","gW","=","gR","+","JITTER","*","gU",";","vec4","gX","=","gV","*","gV","+","gW","*","gW",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["gX",".","xy","=","min","(","gX",".","xy",",","gX",".","zw",")",";","gX",".","x","=","min","(","gX",".","x",",","gX",".","y",")",";","return","gX",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gX",".","xy","=","(","gX",".","x","<","gX",".","y",")","?","gX",".","xy",":","gX",".","yx",";","gX",".","xz","=","(","gX",".","x","<","gX",".","z",")","?","gX",".","xz",":","gX",".","zx",";","gX",".","xw","=","(","gX",".","x","<","gX",".","w",")","?","gX",".","xw",":","gX",".","wx",";","gX",".","y","=","min","(","gX",".","y",",","gX",".","z",")",";","gX",".","y","=","min","(","gX",".","y",",","gX",".","w",")",";","return","sqrt","(","gX",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","hm","(","vec2","gZ",",","float","g_",")","{","vec2","ha","=","gG","(","floor","(","gZ",")",")",";","vec2","hb","=","fract","(","gZ",")",";","vec4","hc","=","hb",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","hd","=","hb",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","he","=","gM","(","ha",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","he","=","gM","(","he","+","ha",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","hf","=","gK","(","he",")","*","K","+","K2",";","vec4","hg","=","gK","(","floor","(","he","*","K",")",")","*","K","+","K2",";","vec4","hh","=","hc","+","JITTER","*","hf",";","vec4","hi","=","hd","+","JITTER","*","hg",";","vec4","hj","=","hh","*","hh","+","hi","*","hi",";","hh","+=","g_",";","hi","+=","g_",";","vec4","hk","=","hh","*","hh","+","hi","*","hi",";","hh","+=","g_",";","hi","+=","g_",";","vec4","hl","=","hh","*","hh","+","hi","*","hi",";","hj",".","xy","=","min","(","hj",".","xy",",","hj",".","zw",")",";","hj",".","x","=","min","(","hj",".","x",",","hj",".","y",")",";","hk",".","xy","=","min","(","hk",".","xy",",","hk",".","zw",")",";","hk",".","x","=","min","(","hk",".","x",",","hk",".","y",")",";","hl",".","xy","=","min","(","hl",".","xy",",","hl",".","zw",")",";","hl",".","x","=","min","(","hl",".","x",",","hl",".","y",")",";","return","mat3","(","hj",".","xx",",","0.0",",","hk",".","xx",",","0.0",",","hl",".","xx",",","0.0",")",";","}","vec3","ho","(","vec3","hn",")","{","return","gG","(","(","(","hn","*","34.0",")","+","1.0",")","*","hn",")",";","}","float","hC","(","vec2","hp",")","{","const","vec4","hq","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","hr","=","floor","(","hp","+","dot","(","hp",",","hq",".","yy",")",")",";","vec2","hs","=","hp","-","hr","+","dot","(","hr",",","hq",".","xx",")",";","vec2","ht",";","ht","=","(","hs",".","x",">","hs",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","hu","=","hs",".","xyxy","+","hq",".","xxzz",";","hu",".","xy","-=","ht",";","hr","=","gG","(","hr",")",";","vec3","hv","=","ho","(","ho","(","hr",".","y","+","vec3","(","0.0",",","ht",".","y",",","1.0",")",")","+","hr",".","x","+","vec3","(","0.0",",","ht",".","x",",","1.0",")",")",";","vec3","hw","=","max","(","0.5","-","vec3","(","dot","(","hs",",","hs",")",",","dot","(","hu",".","xy",",","hu",".","xy",")",",","dot","(","hu",".","zw",",","hu",".","zw",")",")",",","0.0",")",";","hw","=","hw","*","hw",";","hw","=","hw","*","hw",";","vec3","hx","=","2.0","*","fract","(","hv","*","hq",".","www",")","-","1.0",";","vec3","hy","=","abs","(","hx",")","-","0.5",";","vec3","hz","=","floor","(","hx","+","0.5",")",";","vec3","hA","=","hx","-","hz",";","hw","*=","1.79284291400159","-","0.85373472095314","*","(","hA","*","hA","+","hy","*","hy",")",";","vec3","hB",";","hB",".","x","=","hA",".","x","*","hs",".","x","+","hy",".","x","*","hs",".","y",";","hB",".","yz","=","hA",".","yz","*","hu",".","xz","+","hy",".","yz","*","hu",".","yw",";","return","130.0","*","dot","(","hw",",","hB",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","hY","(","inout","vec3","hD",",","vec2","hE",",","float","hF",",","float","hG",",","float","hH",",","vec3","hI",",","vec3","hJ",",","vec3","hK",",","in","vec3","hL",")","{","vec3","hM","=","hJ",";","float","hN","=","max","(","dot","(","hI",",","hM",")",",","0.0",")",";","float","hO","=","0.025",";","hE",".","s","+=","0.5","*","sin","(","dot","(","hL","+","hG",",","vec3","(","1.0",")",")",")",";","hE",".","t","+=","0.7","*","(","-","sin","(","dot","(","hL","-","hG",",","vec3","(","-","0.7",")",")",")",")",";","hE",".","st","+=","0.23","*","cos","(","4.0","*","hF","-","CAUST_SPEED",".","x","*","hG",")",";","hE",".","st","+=","3.0","*","sin","(","hF","-","0.3","*","CAUST_SPEED",".","y","*","hG",")",";","float","hP","=","max","(","sign","(","hF",")",",","0.0",")",";","float","hQ","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","hF",",","0.0",")",")",";","mat3","hR","=","hm","(","(","hE","/","hQ",")",",","hO",")",";","float","hS","=","(","hR","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","hT","=","(","hR","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","hU","=","(","hR","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","hV","=","CAUST_BRIGHT","*","vec3","(","hS",",","hT",",","hU",")",";","float","hW","=","hH","*","hN",";","hW","=","min","(","hW","+","0.5","*","sign","(","-","hI",".","y",")","*","hP",",","1.0",")",";","hW","*=","1.0","-","hP","*","(","0.1","*","hF",")",";","hV","*=","hW",";","hV","*=","hV",";","float","hX","=","min","(","-","hF","+","10.0",",","1.0",")",";","hD","+=","max","(","(","2.0","*","hK","*","hV",")","*","hX",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["float","il","(","in","vec3","id",",","in","vec3","ie",",","in","float","ig",",","in","float","ih",")","{","vec3","ii","=","normalize","(","ie","+","id",")",";","float","ij","=","1.0","-","dot","(","id",",","ii",")",";","float","ik","=","ih","+","(","1.0","-","ih",")","*","pow","(","ij",",","ig",")",";","return","ik",";","}","void","iA","(","inout","vec3","im",",","in","vec3","io",",","in","vec3","ip",",","in","float","iq",",","in","float","ir",",","in","vec3","is",",","in","vec2","it",")","{","vec3","iu","=","reflect","(","-","io",",","ip",")",";","float","iv","=","il","(","io",",","iu",",","iq",",","ir",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","iw","=","0.1",";","vec2","ix","=","cw",".","xy","/","cw",".","z",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["ix","+=","it","*","iw",";"]}]}}]},{type:"textline",tokens:["vec3","iy","=","texture2D","(","u_reflectmap",",","ix",")",".","rgb",";","eg","(","iy",".","rgb",")",";","iy","*=","is",";","im","=","mix","(","im",",","iy",",","u_reflect_factor","*","iv",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iz","=","textureCube","(","u_mirrormap",",","iu",")",".","xyz",";","eg","(","iz",".","rgb",")",";","iz","*=","is",";","im","=","mix","(","im",",","iz",",","u_mirror_factor","*","iv",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"define",name:"RAMPSIZE",tokens:["4"]},{type:"textline",tokens:["float","jt","(","float","ji",",","float","jj",",","vec2","jk","[","RAMPSIZE","]",")","{","if","(","jk","[","0","]","[","0","]","<","0.0",")","return","1.0",";","float","jl","=","ji","/","jj",";","bool","jm","=","false",";","float","jn","=","0.0",";","float","jo","=","jk","[","0","]","[","1","]",";","float","jp","=","1.0",";","float","jq","=","1.0",";","for","(","int","jr","=","0",";","jr","<","RAMPSIZE",";","jr","++",")","{","if","(","!","jm",")","{","if","(","jk","[","jr","]","[","0","]",">=","0.0",")","{","if","(","jl",">=","jn","&&","jl","<","jk","[","jr","]","[","0","]",")","{","jp","=","jk","[","jr","]","[","0","]",";","jq","=","jk","[","jr","]","[","1","]",";","jm","=","true",";","}","else","if","(","jl","<","jn","||","jl",">=","jk","[","jr","]","[","0","]",")","{","jn","=","jk","[","jr","]","[","0","]",";","jo","=","jk","[","jr","]","[","1","]",";","}","}","else","if","(","jk","[","jr","]","[","0","]","<","0.0",")","{","jq","=","jo",";","jm","=","true",";","}","}","}","if","(","!","jm",")","jq","=","jo",";","float","js","=","(","jq","-","jo",")","/","(","jp","-","jn",")",";","return","jo","+","js","*","(","jl","-","jn",")",";","}","vec3","jF","(","float","ju",",","float","jv",",","vec4","jw","[","RAMPSIZE","]",")","{","if","(","jw","[","0","]","[","0","]","<","0.0",")","return","vec3","(","1.0",",","1.0",",","1.0",")",";","float","jx","=","ju","/","jv",";","bool","jy","=","false",";","float","jz","=","0.0",";","vec3","jA","=","jw","[","0","]",".","yzw",";","float","jB","=","1.0",";","vec3","jC","=","vec3","(","1.0",",","1.0",",","1.0",")",";","for","(","int","jD","=","0",";","jD","<","RAMPSIZE",";","jD","++",")","{","if","(","!","jy",")","{","if","(","jw","[","jD","]","[","0","]",">=","0.0",")","{","if","(","jx",">=","jz","&&","jx","<","jw","[","jD","]","[","0","]",")","{","jB","=","jw","[","jD","]","[","0","]",";","jC","=","jw","[","jD","]",".","yzw",";","jy","=","true",";","}","else","if","(","jx","<","jz","||","jx",">=","jw","[","jD","]","[","0","]",")","{","jz","=","jw","[","jD","]","[","0","]",";","jA","=","jw","[","jD","]",".","yzw",";","}","}","else","if","(","jw","[","jD","]","[","0","]","<","0.0",")","{","jC","=","jA",";","jy","=","true",";","}","}","}","if","(","!","jy",")","jC","=","jA",";","vec3","jE","=","(","jC","-","jA",")","/","(","jB","-","jz",")",";","return","jA","+","jE","*","(","jx","-","jz",")",";","}","float","jO","(","float","jG",",","float","jH",",","float","jI",",","float","jJ",")","{","float","jK","=","max","(","0.01",",","min","(","jH",",","jI",")",")",";","float","jL","=","max","(","0.01",",","min","(","jH",",","jJ",")",")",";","float","jM","=","jH","-","jL",";","float","jN","=","clamp","(","jG","/","jK",",","0.0",",","1.0",")","-","step","(","jM",",","jG",")","*","(","jG","-","jM",")","/","jL",";","return","jN",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","kb","(","in","sampler2D","jV",",","in","vec2","jW",",","in","vec2","jX",")","{","float","jY","=","texture2D","(","jV",",","jW",")",".","r",";","float","jZ","=","jX",".","x",";","float","j_","=","jX",".","y",";","float","ka","=","2.0","*","jZ","/","(","jZ","+","j_","-","(","2.0","*","jY","-","1.0",")","*","(","j_","-","jZ",")",")",";","return","ka",";","}"]}]}}