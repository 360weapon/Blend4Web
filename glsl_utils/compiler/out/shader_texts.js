b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cf","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cf","=","mix","(","cf",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cg","=","vec3","(","0.0",")",";","vec3","ch","=","vec3","(","0.0",")",";","vec3","ci","=","vec3","(","0.0",")",";","bn","(","cf",",","cg",",","ch",",","ci",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ck","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","mat4","cl","=","ab","(","u_camera_eye",",","ck",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","cl","=","cl","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cm",")",";"]}]}}]},{type:"textline",tokens:["b","cn","=","ai","(","cf","-","cj",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cl",")",";","cn",".","b","=","ck",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","cn","=","ai","(","cf",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","cn",".","a",",","cn",".","b",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cn",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","dd","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","dd","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","dd","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cj","(","co",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cj","(","co",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["float","de","=","co",";","float","df","=","de","*","de",";","gl_FragColor","=","vec4","(","de",",","df",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","cX","(","cu",".","z",",","u_shadow_visibility_falloff",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","d_","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["d_","=","mix","(","d_",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ea","=","vec3","(","0.0",")",";","vec3","eb","=","vec3","(","0.0",")",";","vec3","ec","=","vec3","(","0.0",")",";","bn","(","d_",",","ea",",","eb",",","ec",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ed","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ed","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","ee","=","dT","(","d_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ed",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ef","=","(","u_model_matrix","*","vec4","(","ed",",","1.0",")",")",".","xyz",";","mat4","eg","=","ab","(","u_camera_eye",",","ef",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eh","=","(","u_model_matrix","*","vec4","(","ed",",","1.0",")",")",".","xyz",";","eg","=","eg","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","eh",")",";"]}]}}]},{type:"textline",tokens:["b","ee","=","ai","(","d_","-","ed",",","ed",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","eg",")",";","ee",".","b","=","ef",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ee","=","ai","(","d_",",","ed",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","ee",".","a",",","ee",".","b",",","ei",")",";"]}]}}]},{type:"textline",tokens:["vec4","ej","=","u_view_matrix","*","vec4","(","ee",".","a",",","1.0",")",";","vec4","ek","=","u_proj_matrix","*","ej",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["ek",".","xy","+=","u_subpixel_jitter","*","ek",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","ee",".","a",")",";","cu","=","ej",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["co","=","-","ej",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ek",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","d_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","d_",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","d_",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","d_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","d_",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","d_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","d_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","d_",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","d_",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ea","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","eb","=","ab","(","u_camera_eye",",","ea",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["eb","=","eb","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["b","ec","=","ai","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","eb",")",";","ec",".","b","=","ea",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ec","=","ai","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","ed","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ec",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["d_","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d_","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["d_","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ed",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","eh",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","ei",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","ej","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","ej","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","el","(","float","ek",")","{","return","ek","-","floor","(","ek","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eu","(","inout","float","em",",","in","float","en","[","ej","]",",","in","float","eo",")","{","for","(","int","ep","=","NUM_RINGS",";","ep",">","0",";","ep","--",")","{","float","eq","=","40.0","*","en","[","ep","]",";","float","er","=","300.0","*","(","el","(","eq",")","-","0.005",")",";","float","es","=","eq",";","float","et","=","abs","(","es","*","(","u_halo_size","*","er","-","eo",")",")",";","em","+=","1.0","-","min","(","et",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","eD","(","inout","float","ev",",","in","float","ew","[","ej","]",",","in","float","ex",")","{","for","(","int","ey","=","NUM_LINES",";","ey",">","0",";","ey","--",")","{","float","ez","=","ew","[","ey","]",";","float","eA","=","ez",";","float","eB","=","1000.0","*","(","el","(","ez",")","-","0.005",")",";","float","eC","=","20.0","*","abs","(","eA","*","a",".","x","+","eB","*","a",".","y",")",";","ev","+=","1.0","-","min","(","eC",",","1.0",")",";","}","ev","*=","ex",";","}"]}]}}]},{type:"textline",tokens:["void","eK","(","inout","float","eE",",","in","vec2","eF",")","{","float","eG",",","eH",";","eH","=","atan","(","eF",".","y",",","eF",".","x",")",";","eH","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","eI","=","cos","(","eH",")",";","float","eJ","=","sin","(","eH",")",";","eH","=","(","eI","*","eF",".","x","+","eJ","*","eF",".","y",")","*","(","eI","*","eF",".","y","-","eJ","*","eF",".","x",")",";","eG","=","abs","(","eH",")",";","if","(","eG","<","1.0",")","{","eG","=","(","0.01","*","u_halo_size",")","/","(","eG",")",";","eE","*=","sqrt","(","min","(","eG",",","1.0",")",")",";","}","}","void","main","(",")","{","float","eL","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","eM","=","sqrt","(","eL",")",";","eL","=","max","(","1.0","-","eL",",","0.0",")",";","eL","=","pow","(","eL",",","u_halo_hardness",")",";","float","eN","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eO","[","ej","]",";","for","(","int","eP","=","0",";","eP","<","ej",";","eP","++",")","{","eO","[","eP","]","=","fract","(","ei","/","float","(","eP",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","eQ","=","0.0",";","eu","(","eQ",",","eO",",","eM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eR","=","0.0",";","eD","(","eR",",","eO",",","eL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eK","(","eL",",","a",")",";"]}]}}]},{type:"textline",tokens:["eL","*=","eN",";","vec3","eS","=","u_diffuse_color",".","rgb","*","eL",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["eQ","*=","eL",";","eS","+=","u_halo_rings_color","*","eQ",";","eL","+=","eQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["eR","*=","eN",";","eS","+=","u_halo_lines_color","*","eR",";","eL","+=","eR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eL","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","eT","=","u_halo_stars_blend","*","(","eh",".","y","-","u_halo_stars_height",")",";","eL","*=","clamp","(","eT",",","0.0",",","1.0",")",";","eL","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ed","(","eS",")",";","eg","(","eS",",","eL",")",";","gl_FragColor","=","vec4","(","eS",",","eL",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","ei",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eh",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","ej","=","a_position",";","a","=","a_halo_bb_vertex","*","2.0",";","ei","=","fract","(","ej",".","x","+","ej",".","y","+","ej",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ek","=","A","(","ej",",","u_view_matrix",")",";","mat4","el","=","u_view_matrix",";","el","[","3","]","[","0","]","=","0.0",";","el","[","3","]","[","1","]","=","0.0",";","el","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","ek","=","A","(","ej",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","em","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","en","=","ek","*","em",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","eo","=","u_proj_matrix","*","el","*","en",";","eo",".","z","=","0.99999","*","eo",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","en",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","eo","=","u_proj_matrix","*","u_view_matrix","*","en",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","eo",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","ej","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ej",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";","varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","iz","=","h_",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iA","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","iB","=","ia",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","iB","=","iB",";","else","iB","=","-","iB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","=","cross","(","iB",",","ib",".","xyz",")","*","ib",".","w",";","mat3","iD","=","mat3","(","ib",".","xyz",",","iC",",","iB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","iE","=","length","(","cu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","iE","<","10.0",")","{","float","iF","=","clamp","(","5.0","-","0.5","*","iE",",","0.0",",","1.0",")",";","float","iG","=","u_parallax_scale","*","iF",";","vec3","iH","=","normalize","(","hZ","*","iD",")",";","float","iI","=","1.0","/","PARALLAX_STEPS",";","vec2","iJ","=","iH",".","xy","*","iG","/","(","PARALLAX_STEPS","*","iH",".","z",")",";","float","iK","=","1.0",";","float","iL","=","texture2D","(","u_normalmap0",",","iA",")",".","a",";","for","(","float","iM","=","1.0",";","iM","<=","PARALLAX_STEPS",";","iM","++",")","{","if","(","iL","<","iK",")","{","iK","-=","iI",";","iA","-=","iJ",";","iL","=","texture2D","(","u_normalmap0",",","iA",")",".","a",";","}","}","vec2","iN","=","iA","+","iJ",";","float","iO","=","texture2D","(","u_normalmap0",",","iN",")",".","a","-","(","iK","+","iI",")",";","float","iP","=","iL","-","iK",";","float","iQ","=","iP","/","(","iP","-","iO",")",";","iA","=","iQ","*","iN","+","(","1.0","-","iQ",")","*","iA",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iR","=","texture2D","(","u_normalmap0",",","iA","+","u_time","*","u_normalmap0_uv_velocity",")",";","vec3","iS","=","iR",".","rgb","-","0.5",";","iS","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","iS",",","u_normal_factor",")",";","vec3","iT","=","iD","*","iS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iT","=","iB",";"]}]}}]},{type:"textline",tokens:["iT","=","normalize","(","iT",")",";","vec3","iU","=","normalize","(","hZ",")",";","float","iV","=","0.5","*","iT",".","y","+","0.5",";","vec3","iW","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","iV",")",";","vec3","iX","=","u_ambient","*","iW",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iY","=","ic",";","eb","(","iY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iZ","=","vec4","(","iY",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iZ","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","i_","=","normalize","(","u_view_matrix_frag","*","vec4","(","iT",",","0.0",")",")",".","st",";","i_","=","i_","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ja","=","texture2D","(","u_colormap0",",","iA",")",";","eb","(","ja",".","rgb",")",";","vec4","jb",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["jb","=","texture2D","(","u_colormap1",",","i_",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["jb","=","texture2D","(","u_colormap1",",","iA",")",";"]}]}}]},{type:"textline",tokens:["eb","(","jb",".","rgb",")",";","vec4","jc","=","texture2D","(","u_stencil0",",","iA",")",";","vec4","jd","=","mix","(","ja",",","jb",",","jc",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jd","=","texture2D","(","u_colormap0",",","i_",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jd","=","texture2D","(","u_colormap0",",","iA","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["eb","(","jd",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["iZ",".","rgb","=","mix","(","iZ",".","rgb",",","jd",".","rgb",",","u_diffuse_color_factor",")",";","iZ",".","a","=","jd",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["iZ",".","rgb","*=","mix","(","vec3","(","1.0",")",",","jd",".","rgb",",","u_diffuse_color_factor",")",";","iZ",".","a","=","jd",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","je","=","u_diffuse_intensity","*","iZ",".","rgb",";","float","jf","=","dc","(","u_shadow_visibility_falloff",",","je",")",";","vec3","jg","=","u_emit","*","iZ",".","rgb",";","vec3","jh","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","vec3","(","iZ",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","texture2D","(","u_specmap",",","iA",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["eb","(","ji",".","rgb",")",";","jh","=","mix","(","jh",",","ji",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","jj","=","u_specular_params","[","0","]",";","float","jk","=","u_specular_params","[","1","]",";","vec3","jl","=","jj","*","jh",";","eW","jm","=","gz","(","jg",",","iX",",","je",",","jl",",","h_",",","iT",",","iU",",","jk",",","u_diffuse_params",",","jf",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","jn","=","jm",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["iy","(","jn",",","iU",",","iT",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","iS",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iy","(","jn",",","iU",",","iT",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","0.0",")",")",";"]}]}}]}]}}]},{type:"textline",tokens:["jn","+=","jm",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["jn","=","max","(","jn","-","sqrt","(","0.01","*","-","min","(","iz",",","0.0",")",")",",","0.5","*","jn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["hY","(","jn",",","iz",",","u_time",",","jf",",","iT",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","h_",",","iE",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","jo","=","iZ",".","a",";","if","(","jo","<","0.5",")","discard",";","jo","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jo","=","iZ",".","a","+","jm",".","a",".","a","*","jl",".","r",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jo","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jp","=","ev","(","u_cube_fog",",","iU",")",";","vec4","jq","=","vec4","(","jp",",","u_fog_color_density",".","a",")",";","eb","(","jq",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jq","=","u_fog_color_density",";","jq",".","rgb","*=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eM","(","jn",",","iE",",","iU",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","jq",",","iz",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eo","(","jn",",","iE",",","jq",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["jn","=","vec3","(","cv",".","a",")",";"]}]}}]},{type:"textline",tokens:["ed","(","jn",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","jn",",","jo",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jn",",","jo",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";","varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","iz","=","a_position",";","vec3","iA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iB","=","vec3","(","a_tangent",")",";","vec3","iC","=","a_tangent","[","3","]","*","cross","(","iA",",","iB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iB","=","vec3","(","0.0",")",";","vec3","iC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iz","=","mix","(","iz",",","a_position_next",",","u_va_frame_factor",")",";","iA","=","mix","(","iA",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iD","=","vec3","(","a_tangent",")",";","vec3","iE","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","iD",")",";","iB","=","mix","(","iB",",","iD",",","u_va_frame_factor",")",";","iC","=","mix","(","iC",",","iE",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","iz",",","iB",",","iC",",","iA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","iG","=","dT","(","iz",",","iB",",","iC",",","iA",",","iF",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iH","=","(","u_model_matrix","*","vec4","(","iF",",","1.0",")",")",".","xyz",";","mat4","iI","=","ab","(","u_camera_eye",",","iH",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iJ","=","(","u_model_matrix","*","vec4","(","iF",",","1.0",")",")",".","xyz",";","iI","=","iI","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iJ",")",";"]}]}}]},{type:"textline",tokens:["b","iG","=","ai","(","iz","-","iF",",","iF",",","iB",",","iC",",","iA",",","iI",")",";","iG",".","b","=","iH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iG","=","ai","(","iz",",","iF",",","iB",",","iC",",","iA",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"textline",tokens:["float","iK","=","(","dot","(","cross","(","iG",".","e",",","iG",".","c",")",",","iG",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ib","=","vec4","(","iG",".","c",",","iK",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","iG","=","dT","(","iz",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iA",",","iF",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iH","=","(","u_model_matrix","*","vec4","(","iF",",","1.0",")",")",".","xyz",";","mat4","iI","=","ab","(","u_camera_eye",",","iH",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iJ","=","(","u_model_matrix","*","vec4","(","iF",",","1.0",")",")",".","xyz",";","iI","=","iI","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iJ",")",";"]}]}}]},{type:"textline",tokens:["b","iG","=","ai","(","iz","-","iF",",","iF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iA",",","iI",")",";","iG",".","b","=","iH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iG","=","ai","(","iz",",","iF",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iA",",","u_model_matrix",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","iG",".","a",",","iG",".","b",",","iA",")",";"]}]}}]},{type:"textline",tokens:["h_","=","iG",".","a",";","ia","=","iG",".","e",";","hZ","=","u_camera_eye","-","iG",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["ic","=","iG",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ic","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","iL","=","u_view_matrix","*","vec4","(","iG",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cu","=","iL",";"]}]}}]},{type:"textline",tokens:["vec4","iM","=","u_proj_matrix","*","iL",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["iM",".","xy","+=","u_subpixel_jitter","*","iM",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","iM",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","iG",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","iN","=","iM",".","x",";","float","iO","=","iM",".","y",";","float","iP","=","iM",".","w",";","ct",".","x","=","(","iN","+","iP",")","/","2.0",";","ct",".","y","=","(","iO","+","iP",")","/","2.0",";","ct",".","z","=","iP",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","iM",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED","&&","WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","h_",";","varying","vec4","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"textline",tokens:["float","iz","=","0.0",";","float","iA","=","1.0",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iJ","(","vec3","iB",")","{","float","iC",",","iD",",","iE",",","iF",",","iG",",","iH",";","vec3","iI",";","iC","=","max","(","iB","[","0","]",",","max","(","iB","[","1","]",",","iB","[","2","]",")",")",";","iD","=","min","(","iB","[","0","]",",","min","(","iB","[","1","]",",","iB","[","2","]",")",")",";","iH","=","iC","-","iD",";","iG","=","iC",";","if","(","iC","!=","iz",")","iF","=","iH","/","iC",";","else","{","iF","=","iz",";","iE","=","iz",";","}","if","(","e","(","iF",",","iz",")",")","{","iE","=","iz",";","}","else","{","iI","=","(","vec3","(","iC",",","iC",",","iC",")","-","iB",".","xyz",")","/","iH",";","if","(","e","(","iB",".","x",",","iC",")",")","iE","=","iI","[","2","]","-","iI","[","1","]",";","else","if","(","e","(","iB",".","y",",","iC",")",")","iE","=","2.0","+","iI","[","0","]","-","iI","[","2","]",";","else","iE","=","4.0","+","iI","[","1","]","-","iI","[","0","]",";","iE","/=","6.0",";","if","(","iE","<","iz",")","iE","+=","iA",";","}","return","vec3","(","iE",",","iF",",","iG",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iU","(","vec3","iK",")","{","float","iL",",","iM",",","iN",",","iO",",","iP",",","iQ",",","iR",",","iS",";","vec3","iT",";","iQ","=","iK","[","0","]",";","iR","=","iK","[","1","]",";","iS","=","iK","[","2","]",";","if","(","e","(","iR",",","iz",")",")","{","iT","=","vec3","(","iS",",","iS",",","iS",")",";","}","else","{","if","(","e","(","iQ",",","iz",")",")","iQ","=","iz",";","iQ","*=","6.0",";","iL","=","floor","(","iQ",")",";","iM","=","iQ","-","iL",";","iT","=","vec3","(","iM",",","iM",",","iM",")",";","iN","=","iS","*","(","iA","-","iR",")",";","iO","=","iS","*","(","iA","-","(","iR","*","iM",")",")",";","iP","=","iS","*","(","iA","-","(","iR","*","(","iA","-","iM",")",")",")",";","if","(","e","(","iL",",","iz",")",")","iT","=","vec3","(","iS",",","iP",",","iN",")",";","else","if","(","e","(","iL",",","iA",")",")","iT","=","vec3","(","iO",",","iS",",","iN",")",";","else","if","(","e","(","iL",",","2.0",")",")","iT","=","vec3","(","iN",",","iS",",","iP",")",";","else","if","(","e","(","iL",",","3.0",")",")","iT","=","vec3","(","iN",",","iO",",","iS",")",";","else","if","(","e","(","iL",",","4.0",")",")","iT","=","vec3","(","iP",",","iN",",","iS",")",";","else","iT","=","vec3","(","iS",",","iN",",","iO",")",";","}","return","iT",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iW","(","vec2","iV",")","{","return","vec3","(","iV","*","2.0","-","vec2","(","iA",",","iA",")",",","iz",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iY","(","vec3","iX",")","{","return","vec2","(","iX",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"jN",qualifier:["vec3"]},{type:"node_out",name:"jO",qualifier:["float"]},{type:"node_out",name:"jP",qualifier:["float"]},{type:"textline",tokens:["jN","=","normalize","(","jC",".","xyz",")",";","jO","=","abs","(","jC",".","z",")",";","jP","=","length","(","jC",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"jQ",qualifier:["float"]},{type:"node_in",name:"jR",qualifier:["float"]},{type:"node_in",name:"jS",qualifier:["float"]},{type:"node_out",name:"jT",qualifier:["vec3"]},{type:"textline",tokens:["jT","=","vec3","(","jQ",",","jR",",","jS",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"iZ",qualifier:["varying","vec2"]},{type:"node_out",name:"jU",qualifier:["vec3"]},{type:"textline",tokens:["jU","=","iW","(","iZ",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"i_",qualifier:["varying","vec3"]},{type:"node_out",name:"jV",qualifier:["vec3"]},{type:"textline",tokens:["jV","=","i_",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"ja",qualifier:["varying","float"]},{type:"node_out",name:"jW",qualifier:["float"]},{type:"textline",tokens:["jW","=","ja",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"jb",qualifier:["varying","vec2"]},{type:"node_out",name:"jX",qualifier:["float"]},{type:"node_out",name:"jY",qualifier:["float"]},{type:"textline",tokens:["jX","=","jb","[","0","]",";","jY","=","jb","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"jc",qualifier:["varying","vec3"]},{type:"node_out",name:"jZ",qualifier:["float"]},{type:"node_out",name:"j_",qualifier:["float"]},{type:"node_out",name:"ka",qualifier:["float"]},{type:"textline",tokens:["jZ","=","jc","[","0","]",";","j_","=","jc","[","1","]",";","ka","=","jc","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"kb",qualifier:["vec3"]},{type:"textline",tokens:["kb","=","jw",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"kc",qualifier:["float"]},{type:"textline",tokens:["kc","=","(","gl_FrontFacing",")","?","iA",":","iz",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"kd",qualifier:["vec3"]},{type:"textline",tokens:["kd","=","jA",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"ke",qualifier:["vec3"]},{type:"textline",tokens:["ke","=","vec3","(","jB",".","r",",","-","jB",".","b",",","jB",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"kf",qualifier:["float"]},{type:"node_in",name:"kg",qualifier:["float"]},{type:"node_in",name:"kh",qualifier:["float"]},{type:"node_in",name:"ki",qualifier:["float"]},{type:"node_in",name:"kj",qualifier:["vec3"]},{type:"node_out",name:"kk",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","kl","=","iJ","(","kj",")",";","kl","[","0","]","+=","(","kf","-","0.5",")",";","if","(","kl","[","0","]",">","iA",")","kl","[","0","]","-=","iA",";","else","if","(","kl","[","0","]","<","iz",")","kl","[","0","]","+=","iA",";","kl","[","1","]","*=","kg",";","if","(","kl","[","1","]",">","iA",")","kl","[","1","]","=","iA",";","else","if","(","kl","[","1","]","<","iz",")","kl","[","1","]","=","iz",";","kl","[","2","]","*=","kh",";","if","(","kl","[","2","]",">","iA",")","kl","[","2","]","=","iA",";","else","if","(","kl","[","2","]","<","iz",")","kl","[","2","]","=","iz",";","kk","=","mix","(","kj",",","iU","(","kl",")",",","ki",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"km",qualifier:["float"]},{type:"node_in",name:"kn",qualifier:["vec3"]},{type:"node_out",name:"ko",qualifier:["vec3"]},{type:"textline",tokens:["ko","=","mix","(","kn",",","vec3","(","iA",")","-","kn",",","km",")",";"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"jd",qualifier:["vec3"]},{type:"node_in",name:"kp",qualifier:["vec3"]},{type:"node_out",name:"kq",qualifier:["vec3"]},{type:"node_out",name:"kr",qualifier:["float"]},{type:"textline",tokens:["kq","=","jd",";","kr","=","-","dot","(","kp",",","jd",")",";"]}]}},{type:"node",name:"NORMAL_VIEW",group:{type:"group",parts:[{type:"node_in",name:"ks",qualifier:["vec3"]},{type:"node_out",name:"kt",qualifier:["vec3"]},{type:"textline",tokens:["kt","=","-","(","u_view_matrix_frag","*","vec4","(","ks",",","iz",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"je",qualifier:["vec3"]},{type:"node_in",name:"ku",qualifier:["vec3"]},{type:"node_out",name:"kv",qualifier:["vec3"]},{type:"textline",tokens:["kv","=","ku","*","je",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"jf",qualifier:["mat4"]},{type:"node_param",name:"jg",qualifier:["const","float"]},{type:"node_param",name:"jh",qualifier:["const","float"]},{type:"node_param",name:"ji",qualifier:["vec3"]},{type:"node_param",name:"jj",qualifier:["vec3"]},{type:"node_in",name:"kw",qualifier:["vec3"]},{type:"node_out",name:"kx",qualifier:["vec3"]},{type:"textline",tokens:["kx","=","(","jf","*","vec4","(","kw",",","iA",")",")",".","xyz",";","if","(","jg","==","iA",")","kx","=","max","(","kx",",","ji",")",";","if","(","jh","==","iA",")","kx","=","min","(","kx",",","jj",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"ky",qualifier:["float"]},{type:"node_in",name:"kz",qualifier:["float"]},{type:"node_out",name:"kA",qualifier:["float"]},{type:"textline",tokens:["kA","=","ky","+","kz",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"kB",qualifier:["float"]},{type:"node_in",name:"kC",qualifier:["float"]},{type:"node_out",name:"kD",qualifier:["float"]},{type:"textline",tokens:["kD","=","kB","-","kC",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"kE",qualifier:["float"]},{type:"node_in",name:"kF",qualifier:["float"]},{type:"node_out",name:"kG",qualifier:["float"]},{type:"textline",tokens:["kG","=","kE","*","kF",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"kH",qualifier:["float"]},{type:"node_in",name:"kI",qualifier:["float"]},{type:"node_out",name:"kJ",qualifier:["float"]},{type:"textline",tokens:["kJ","=","(","kI","!=","iz",")","?","kH","/","kI",":","iz",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"kK",qualifier:["float"]},{type:"node_in",name:"kL",qualifier:["float"]},{type:"node_out",name:"kM",qualifier:["float"]},{type:"textline",tokens:["kM","=","sin","(","kK",")",";","kL",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"kN",qualifier:["float"]},{type:"node_in",name:"kO",qualifier:["float"]},{type:"node_out",name:"kP",qualifier:["float"]},{type:"textline",tokens:["kP","=","cos","(","kN",")",";","kO",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"kQ",qualifier:["float"]},{type:"node_in",name:"kR",qualifier:["float"]},{type:"node_out",name:"kS",qualifier:["float"]},{type:"textline",tokens:["kS","=","tan","(","kQ",")",";","kR",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"kT",qualifier:["float"]},{type:"node_in",name:"kU",qualifier:["float"]},{type:"node_out",name:"kV",qualifier:["float"]},{type:"textline",tokens:["kV","=","(","kT","<=","iA","&&","kT",">=","-","iA",")","?","asin","(","kT",")",":","iz",";","kU",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"kW",qualifier:["float"]},{type:"node_in",name:"kX",qualifier:["float"]},{type:"node_out",name:"kY",qualifier:["float"]},{type:"textline",tokens:["kY","=","(","kW","<=","iA","&&","kW",">=","-","iA",")","?","acos","(","kW",")",":","iz",";","kX",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"kZ",qualifier:["float"]},{type:"node_in",name:"k_",qualifier:["float"]},{type:"node_out",name:"la",qualifier:["float"]},{type:"textline",tokens:["la","=","atan","(","kZ",")",";","k_",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"lb",qualifier:["float"]},{type:"node_in",name:"lc",qualifier:["float"]},{type:"node_out",name:"ld",qualifier:["float"]},{type:"textline",tokens:["ld","=","pow","(","lb",",","lc",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"le",qualifier:["float"]},{type:"node_in",name:"lf",qualifier:["float"]},{type:"node_out",name:"lg",qualifier:["float"]},{type:"textline",tokens:["lg","=","(","le",">","iz","&&","lf",">","iz",")","?","log2","(","le",")","/","log2","(","lf",")",":","iz",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"lh",qualifier:["float"]},{type:"node_in",name:"li",qualifier:["float"]},{type:"node_out",name:"lj",qualifier:["float"]},{type:"textline",tokens:["lj","=","min","(","lh",",","li",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"lk",qualifier:["float"]},{type:"node_in",name:"ll",qualifier:["float"]},{type:"node_out",name:"lm",qualifier:["float"]},{type:"textline",tokens:["lm","=","max","(","lk",",","ll",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"ln",qualifier:["float"]},{type:"node_in",name:"lo",qualifier:["float"]},{type:"node_out",name:"lp",qualifier:["float"]},{type:"textline",tokens:["lp","=","floor","(","ln","+","0.5",")",";","lo",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"lq",qualifier:["float"]},{type:"node_in",name:"lr",qualifier:["float"]},{type:"node_out",name:"ls",qualifier:["float"]},{type:"textline",tokens:["ls","=","(","lq","<","lr",")","?","iA",":","iz",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"lt",qualifier:["float"]},{type:"node_in",name:"lu",qualifier:["float"]},{type:"node_out",name:"lv",qualifier:["float"]},{type:"textline",tokens:["lv","=","lt","+","lu",";","lv","=","(","lt",">","lu",")","?","iA",":","iz",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"lw",qualifier:["float"]},{type:"node_in",name:"lx",qualifier:["float"]},{type:"node_out",name:"ly",qualifier:["float"]},{type:"textline",tokens:["ly","=","abs","(","lx",")",">","0.000001","?","mod","(","lw",",","lx",")",":","iz",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"lz",qualifier:["float"]},{type:"node_in",name:"lA",qualifier:["vec3"]},{type:"node_in",name:"lB",qualifier:["vec3"]},{type:"node_out",name:"lC",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lD","=","clamp","(","lz",",","iz",",","iA",")",";","lC","=","mix","(","lA",",","lB",",","lD",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"lE",qualifier:["float"]},{type:"node_in",name:"lF",qualifier:["vec3"]},{type:"node_in",name:"lG",qualifier:["vec3"]},{type:"node_out",name:"lH",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lI","=","clamp","(","lE",",","iz",",","iA",")",";","lH","=","mix","(","lF",",","lF","+","lG",",","lI",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"lJ",qualifier:["float"]},{type:"node_in",name:"lK",qualifier:["vec3"]},{type:"node_in",name:"lL",qualifier:["vec3"]},{type:"node_out",name:"lM",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lN","=","clamp","(","lJ",",","iz",",","iA",")",";","lM","=","mix","(","lK",",","lK","*","lL",",","lN",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"lO",qualifier:["float"]},{type:"node_in",name:"lP",qualifier:["vec3"]},{type:"node_in",name:"lQ",qualifier:["vec3"]},{type:"node_out",name:"lR",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lS","=","clamp","(","lO",",","iz",",","iA",")",";","lR","=","mix","(","lP",",","lP","-","lQ",",","lS",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"lT",qualifier:["float"]},{type:"node_in",name:"lU",qualifier:["vec3"]},{type:"node_in",name:"lV",qualifier:["vec3"]},{type:"node_out",name:"lW",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lX","=","clamp","(","lT",",","iz",",","iA",")",";","float","lY","=","iA","-","lX",";","lW","=","vec3","(","iA",")","-","(","vec3","(","lY",")","+","lX","*","(","vec3","(","iA",")","-","lV",")",")","*","(","vec3","(","iA",")","-","lU",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"lZ",qualifier:["float"]},{type:"node_in",name:"l_",qualifier:["vec3"]},{type:"node_in",name:"ma",qualifier:["vec3"]},{type:"node_out",name:"mb",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mc","=","clamp","(","lZ",",","iz",",","iA",")",";","float","md","=","iA","-","mc",";","mb","=","l_",";","if","(","ma",".","r","!=","iz",")","mb",".","r","=","md","*","mb",".","r","+","mc","*","mb",".","r","/","ma",".","r",";","if","(","ma",".","g","!=","iz",")","mb",".","g","=","md","*","mb",".","g","+","mc","*","mb",".","g","/","ma",".","g",";","if","(","ma",".","b","!=","iz",")","mb",".","b","=","md","*","mb",".","b","+","mc","*","mb",".","b","/","ma",".","b",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"me",qualifier:["float"]},{type:"node_in",name:"mf",qualifier:["vec3"]},{type:"node_in",name:"mg",qualifier:["vec3"]},{type:"node_out",name:"mh",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mi","=","clamp","(","me",",","iz",",","iA",")",";","mh","=","mix","(","mf",",","abs","(","mf","-","mg",")",",","mi",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"mj",qualifier:["float"]},{type:"node_in",name:"mk",qualifier:["vec3"]},{type:"node_in",name:"ml",qualifier:["vec3"]},{type:"node_out",name:"mm",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mn","=","clamp","(","mj",",","iz",",","iA",")",";","mm","=","min","(","mk",".","rgb",",","ml",".","rgb","*","mn",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"mo",qualifier:["float"]},{type:"node_in",name:"mp",qualifier:["vec3"]},{type:"node_in",name:"mq",qualifier:["vec3"]},{type:"node_out",name:"mr",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ms","=","clamp","(","mo",",","iz",",","iA",")",";","mr","=","max","(","mp",".","rgb",",","mq",".","rgb","*","ms",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"mt",qualifier:["float"]},{type:"node_in",name:"mu",qualifier:["vec3"]},{type:"node_in",name:"mv",qualifier:["vec3"]},{type:"node_out",name:"mw",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mx","=","clamp","(","mt",",","iz",",","iA",")",";","float","my","=","iA","-","mx",";","mw","=","mu",";","if","(","mw",".","r","<","0.5",")","mw",".","r","*=","my","+","2.0","*","mx","*","mv",".","r",";","else","mw",".","r","=","iA","-","(","my","+","2.0","*","mx","*","(","iA","-","mv",".","r",")",")","*","(","iA","-","mw",".","r",")",";","if","(","mw",".","g","<","0.5",")","mw",".","g","*=","my","+","2.0","*","mx","*","mv",".","g",";","else","mw",".","g","=","iA","-","(","my","+","2.0","*","mx","*","(","iA","-","mv",".","g",")",")","*","(","iA","-","mw",".","g",")",";","if","(","mw",".","b","<","0.5",")","mw",".","b","*=","my","+","2.0","*","mx","*","mv",".","b",";","else","mw",".","b","=","iA","-","(","my","+","2.0","*","mx","*","(","iA","-","mv",".","b",")",")","*","(","iA","-","mw",".","b",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"mz",qualifier:["float"]},{type:"node_in",name:"mA",qualifier:["vec3"]},{type:"node_in",name:"mB",qualifier:["vec3"]},{type:"node_out",name:"mC",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mD","=","clamp","(","mz",",","iz",",","iA",")",";","mC","=","mA",";","if","(","mC",".","r","!=","iz",")","{","float","mE","=","iA","-","mD","*","mB",".","r",";","if","(","mE","<=","iz",")","mC",".","r","=","iA",";","else","if","(","(","mE","=","mC",".","r","/","mE",")",">","iA",")","mC",".","r","=","iA",";","else","mC",".","r","=","mE",";","}","if","(","mC",".","g","!=","iz",")","{","float","mF","=","iA","-","mD","*","mB",".","g",";","if","(","mF","<=","iz",")","mC",".","g","=","iA",";","else","if","(","(","mF","=","mC",".","g","/","mF",")",">","iA",")","mC",".","g","=","iA",";","else","mC",".","g","=","mF",";","}","if","(","mC",".","b","!=","iz",")","{","float","mG","=","iA","-","mD","*","mB",".","b",";","if","(","mG","<=","iz",")","mC",".","b","=","iA",";","else","if","(","(","mG","=","mC",".","b","/","mG",")",">","iA",")","mC",".","b","=","iA",";","else","mC",".","b","=","mG",";","}","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"mH",qualifier:["float"]},{type:"node_in",name:"mI",qualifier:["vec3"]},{type:"node_in",name:"mJ",qualifier:["vec3"]},{type:"node_out",name:"mK",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mL","=","clamp","(","mH",",","iz",",","iA",")",";","float","mM","=","iA","-","mL",";","float","mN",";","mK","=","mI",";","mN","=","mM","+","mL","*","mJ",".","r",";","if","(","mN","<=","iz",")","mK",".","r","=","iz",";","else","if","(","(","mN","=","(","iA","-","(","iA","-","mK",".","r",")","/","mN",")",")","<","iz",")","mK",".","r","=","iz",";","else","if","(","mN",">","iA",")","mK",".","r","=","iA",";","else","mK",".","r","=","mN",";","mN","=","mM","+","mL","*","mJ",".","g",";","if","(","mN","<=","iz",")","mK",".","g","=","iz",";","else","if","(","(","mN","=","(","iA","-","(","iA","-","mK",".","g",")","/","mN",")",")","<","iz",")","mK",".","g","=","iz",";","else","if","(","mN",">","iA",")","mK",".","g","=","iA",";","else","mK",".","g","=","mN",";","mN","=","mM","+","mL","*","mJ",".","b",";","if","(","mN","<=","iz",")","mK",".","b","=","iz",";","else","if","(","(","mN","=","(","iA","-","(","iA","-","mK",".","b",")","/","mN",")",")","<","iz",")","mK",".","b","=","iz",";","else","if","(","mN",">","iA",")","mK",".","b","=","iA",";","else","mK",".","b","=","mN",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"mO",qualifier:["float"]},{type:"node_in",name:"mP",qualifier:["vec3"]},{type:"node_in",name:"mQ",qualifier:["vec3"]},{type:"node_out",name:"mR",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mS","=","clamp","(","mO",",","iz",",","iA",")",";","vec3","mT",",","mU",",","mV",";","mR","=","mP",";","mU","=","iJ","(","mQ",")",";","if","(","mU",".","y","!=","iz",")","{","mT","=","iJ","(","mR",")",";","mT",".","x","=","mU",".","x",";","mV","=","iU","(","mT",")",";","mR","=","mix","(","mR",",","mV",",","mS",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"mW",qualifier:["float"]},{type:"node_in",name:"mX",qualifier:["vec3"]},{type:"node_in",name:"mY",qualifier:["vec3"]},{type:"node_out",name:"mZ",qualifier:["vec3"]},{type:"textline",tokens:["{","float","m_","=","clamp","(","mW",",","iz",",","iA",")",";","float","na","=","iA","-","m_",";","mZ","=","mX",";","vec3","nb",",","nc",";","nb","=","iJ","(","mZ",")",";","if","(","nb",".","y","!=","iz",")","{","nc","=","iJ","(","mY",")",";","nb",".","y","=","na","*","nb",".","y","+","m_","*","nc",".","y",";","mZ","=","iU","(","nb",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"nd",qualifier:["float"]},{type:"node_in",name:"ne",qualifier:["vec3"]},{type:"node_in",name:"nf",qualifier:["vec3"]},{type:"node_out",name:"ng",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nh","=","clamp","(","nd",",","iz",",","iA",")",";","float","ni","=","iA","-","nh",";","vec3","nj",",","nk",";","nj","=","iJ","(","ne",")",";","nk","=","iJ","(","nf",")",";","nj",".","z","=","ni","*","nj",".","z","+","nh","*","nk",".","z",";","ng","=","iU","(","nj",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"nl",qualifier:["float"]},{type:"node_in",name:"nm",qualifier:["vec3"]},{type:"node_in",name:"nn",qualifier:["vec3"]},{type:"node_out",name:"no",qualifier:["vec3"]},{type:"textline",tokens:["{","float","np","=","clamp","(","nl",",","iz",",","iA",")",";","vec3","nq",",","nr",",","ns",";","no","=","nm",";","nr","=","iJ","(","nn",")",";","if","(","nr",".","y","!=","iz",")","{","nq","=","iJ","(","no",")",";","nq",".","x","=","nr",".","x",";","nq",".","y","=","nr",".","y",";","ns","=","iU","(","nq",")",";","no","=","mix","(","no",",","ns",",","np",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"nt",qualifier:["float"]},{type:"node_in",name:"nu",qualifier:["vec3"]},{type:"node_in",name:"nv",qualifier:["vec3"]},{type:"node_out",name:"nw",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nx","=","clamp","(","nt",",","iz",",","iA",")",";","float","ny","=","iA","-","nx",";","vec3","nz","=","vec3","(","iA",")",";","vec3","nA","=","nz","-","(","nz","-","nv",")","*","(","nz","-","nu",")",";","nw","=","ny","*","nu","+","nx","*","(","(","nz","-","nu",")","*","nv","*","nu","+","nu","*","nA",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"nB",qualifier:["float"]},{type:"node_in",name:"nC",qualifier:["vec3"]},{type:"node_in",name:"nD",qualifier:["vec3"]},{type:"node_out",name:"nE",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nF","=","clamp","(","nB",",","iz",",","iA",")",";","nE","=","nC",";","if","(","nD",".","r",">","0.5",")","nE",".","r","=","nC",".","r","+","nF","*","(","2.0","*","(","nD",".","r","-","0.5",")",")",";","else","nE",".","r","=","nC",".","r","+","nF","*","(","2.0","*","(","nD",".","r",")","-","iA",")",";","if","(","nD",".","g",">","0.5",")","nE",".","g","=","nC",".","g","+","nF","*","(","2.0","*","(","nD",".","g","-","0.5",")",")",";","else","nE",".","g","=","nC",".","g","+","nF","*","(","2.0","*","(","nD",".","g",")","-","iA",")",";","if","(","nD",".","b",">","0.5",")","nE",".","b","=","nC",".","b","+","nF","*","(","2.0","*","(","nD",".","b","-","0.5",")",")",";","else","nE",".","b","=","nC",".","b","+","nF","*","(","2.0","*","(","nD",".","b",")","-","iA",")",";","nE","=","clamp","(","nE",",","iz",",","iA",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"nG",qualifier:["vec3"]},{type:"node_in",name:"nH",qualifier:["float"]},{type:"textline",tokens:["jH","=","nG",";","jM","=","nH",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"jk",qualifier:["const","vec3"]},{type:"node_param",name:"jl",qualifier:["const","vec3"]},{type:"node_param",name:"jm",qualifier:["const","float"]},{type:"node_in",name:"nI",qualifier:["vec3"]},{type:"node_in",name:"nJ",qualifier:["float"]},{type:"node_in",name:"nK",qualifier:["vec3"]},{type:"node_in",name:"nL",qualifier:["vec3"]},{type:"node_out",name:"nM",qualifier:["vec3"]},{type:"node_out",name:"nN",qualifier:["float"]},{type:"node_out",name:"nO",qualifier:["vec3"]},{type:"textline",tokens:["nI","=","clamp","(","nI",",","iz",",","iA",")",";","nJ","=","clamp","(","nJ",",","iz",",","iA",")",";","nK","=","clamp","(","nK",",","iz",",","iA",")",";","vec3","nP","=","nI",";","float","nQ","=","jk","[","0","]",";","vec2","nR","=","vec2","(","jk","[","1","]",",","jk","[","2","]",")",";","vec3","nS","=","jD","*","nI",";","vec3","nT","=","jE","*","jy",";","vec3","nU","=","jl","[","1","]","*","nK",";","float","nV","=","jl","[","0","]",";","float","nW","=","jl","[","2","]",";","float","nX","=","dc","(","jF",",","nP",")",";","vec3","nY",";","if","(","jm","==","iA",")","nY","=","normalize","(","nL",")",";","else","nY","=","jw",";","eW","nZ","=","gz","(","nS",",","nT",",","nP",",","nU",",","jB",",","nY",",","jA",",","nW",",","nR",",","nX",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","iz",",","vec4","(","iz",")",")",";","nM","=","(","nQ","==","iA",")","?","nZ",".","a",".","rgb",":","vec3","(","iz",")",";","nN","=","nJ","+","nZ",".","a",".","a","*","nU",".","r",";","nO","=","nY",";","if","(","nV","==","iA",")","{","nM","+=","nZ",".","b",";","jI","=","nZ",".","b",";","}","else","{","jI","=","vec3","(","iz",")",";","}","jJ","=","nY",";","jL","=","nX",";"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"jn",qualifier:["const","vec3"]},{type:"node_param",name:"jo",qualifier:["const","vec3"]},{type:"node_param",name:"jp",qualifier:["const","float"]},{type:"node_in",name:"n_",qualifier:["vec3"]},{type:"node_in",name:"oa",qualifier:["float"]},{type:"node_in",name:"ob",qualifier:["vec3"]},{type:"node_in",name:"oc",qualifier:["vec3"]},{type:"node_in",name:"od",qualifier:["float"]},{type:"node_in",name:"oe",qualifier:["float"]},{type:"node_in",name:"of",qualifier:["vec4"]},{type:"node_out",name:"og",qualifier:["vec3"]},{type:"node_out",name:"oh",qualifier:["float"]},{type:"node_out",name:"oi",qualifier:["vec3"]},{type:"node_out",name:"oj",qualifier:["vec3"]},{type:"node_out",name:"ok",qualifier:["vec3"]},{type:"textline",tokens:["n_","=","clamp","(","n_",",","iz",",","iA",")",";","oa","=","clamp","(","oa",",","iz",",","iA",")",";","ob","=","clamp","(","ob",",","iz",",","iA",")",";","vec3","nP","=","n_",";","float","nQ","=","jn","[","0","]",";","vec2","nR","=","vec2","(","jn","[","1","]",",","jn","[","2","]",")",";","vec3","nS","=","od","*","n_",";","vec3","nT","=","jE","*","jy",";","vec3","nU","=","jo","[","1","]","*","ob",";","float","nV","=","jo","[","0","]",";","float","nW","=","jo","[","2","]",";","float","nX","=","dc","(","jF",",","nP",")",";","vec3","nY",";","if","(","jp","==","iA",")","nY","=","normalize","(","oc",")",";","else","nY","=","jw",";","eW","nZ","=","gz","(","nS",",","nT",",","nP",",","nU",",","jB",",","nY",",","jA",",","nW",",","nR",",","nX",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","oe",",","of",")",";","og","=","(","nQ","==","iA",")","?","nZ",".","a",".","rgb",":","vec3","(","iz",")",";","oh","=","oa","+","nZ",".","a",".","a","*","nU",".","r",";","oi","=","nY",";","oj","=","nZ",".","a",".","rgb",";","ok","=","nZ",".","b",";","if","(","nV","==","iA",")","{","og","+=","nZ",".","b",";","jI","=","nZ",".","b",";","}","else","{","jI","=","vec3","(","iz",")",";","}","jJ","=","nY",";","jL","=","nX",";"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"jq",qualifier:["vec3"]},{type:"node_out",name:"ol",qualifier:["vec3"]},{type:"textline",tokens:["ol","=","jq",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"om",qualifier:["vec3"]},{type:"node_out",name:"on",qualifier:["float"]},{type:"textline",tokens:["on","=","om",".","r","*","0.35","+","om",".","g","*","0.45","+","om",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"oo",qualifier:["vec3"]},{type:"node_out",name:"op",qualifier:["float"]},{type:"node_out",name:"oq",qualifier:["float"]},{type:"node_out",name:"or",qualifier:["float"]},{type:"textline",tokens:["op","=","oo",".","r",";","oq","=","oo",".","g",";","or","=","oo",".","b",";"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"os",qualifier:["float"]},{type:"node_in",name:"ot",qualifier:["float"]},{type:"node_in",name:"ou",qualifier:["float"]},{type:"node_out",name:"ov",qualifier:["float"]},{type:"textline",tokens:["ov","=","iA","/","(","iA","+","pow","(","2.71828183",",","-","(","(","os","-","ou",")","*","ot",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"ow",qualifier:["vec3"]},{type:"node_out",name:"ox",qualifier:["vec3"]},{type:"textline",tokens:["ox","=","pow","(","ow",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"oy",qualifier:["vec3"]},{type:"node_out",name:"oz",qualifier:["vec3"]},{type:"textline",tokens:["oz","=","pow","(","oy",",","vec3","(","iA","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oA",qualifier:["vec3"]},{type:"node_out",name:"oB",qualifier:["vec3"]},{type:"node_out",name:"oC",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oD","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","iY","(","oA",")",")",";","oB","=","oD",".","xyz",";","eb","(","oB",")",";","oC","=","oD",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oE",qualifier:["vec3"]},{type:"node_out",name:"oF",qualifier:["vec3"]},{type:"node_out",name:"oG",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oH","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","iY","(","oE",")",")",";","jK","=","oH",".","xyz","-","0.5",";","oF","=","normalize","(","jG","*","jK",")",";","oG","=","oH",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"oI",qualifier:["vec3"]},{type:"node_out",name:"oJ",qualifier:["vec3"]},{type:"node_out",name:"oK",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oL","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","oI",")",";","oJ","=","oL",".","xyz",";","eb","(","oJ",")",";","oK","=","oL",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oM",qualifier:["vec3"]},{type:"node_in",name:"oN",qualifier:["vec3"]},{type:"node_out",name:"oO",qualifier:["vec3"]},{type:"node_out",name:"oP",qualifier:["float"]},{type:"node_out",name:"oQ",qualifier:["vec3"]},{type:"node_out",name:"oR",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oS","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","iY","(","oM",")",")",";","oO","=","oS",".","xyz",";","eb","(","oO",")",";","oP","=","oS",".","w",";","oS","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","iY","(","oN",")",")",";","oQ","=","oS",".","xyz",";","eb","(","oQ",")",";","oR","=","oS",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oT",qualifier:["vec3"]},{type:"node_in",name:"oU",qualifier:["vec3"]},{type:"node_out",name:"oV",qualifier:["vec3"]},{type:"node_out",name:"oW",qualifier:["float"]},{type:"node_out",name:"oX",qualifier:["vec3"]},{type:"node_out",name:"oY",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oZ","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","iY","(","oT",")",")",";","jK","=","oZ",".","xyz","-","0.5",";","oV","=","normalize","(","jG","*","jK",")",";","oW","=","oZ",".","w",";","oZ","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","iY","(","oU",")",")",";","jK","=","oZ",".","xyz","-","0.5",";","oX","=","normalize","(","jG","*","jK",")",";","oY","=","oZ",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"o_",qualifier:["vec3"]},{type:"node_in",name:"pa",qualifier:["vec3"]},{type:"node_in",name:"pb",qualifier:["vec3"]},{type:"node_out",name:"pc",qualifier:["vec3"]},{type:"node_out",name:"pd",qualifier:["float"]},{type:"node_out",name:"pe",qualifier:["vec3"]},{type:"node_out",name:"pf",qualifier:["float"]},{type:"node_out",name:"pg",qualifier:["vec3"]},{type:"node_out",name:"ph",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pi","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iY","(","o_",")",")",";","pc","=","pi",".","xyz",";","eb","(","pc",")",";","pd","=","pi",".","w",";","pi","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iY","(","pa",")",")",";","pe","=","pi",".","xyz",";","eb","(","pe",")",";","pf","=","pi",".","w",";","pi","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iY","(","pb",")",")",";","pg","=","pi",".","xyz",";","eb","(","pg",")",";","ph","=","pi",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pj",qualifier:["vec3"]},{type:"node_in",name:"pk",qualifier:["vec3"]},{type:"node_in",name:"pl",qualifier:["vec3"]},{type:"node_out",name:"pm",qualifier:["vec3"]},{type:"node_out",name:"pn",qualifier:["float"]},{type:"node_out",name:"po",qualifier:["vec3"]},{type:"node_out",name:"pp",qualifier:["float"]},{type:"node_out",name:"pq",qualifier:["vec3"]},{type:"node_out",name:"pr",qualifier:["float"]},{type:"textline",tokens:["{","vec4","ps","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iY","(","pj",")",")",";","jK","=","ps",".","xyz","-","0.5",";","pm","=","normalize","(","jG","*","jK",")",";","pn","=","ps",".","w",";","ps","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iY","(","pk",")",")",";","jK","=","ps",".","xyz","-","0.5",";","po","=","normalize","(","jG","*","jK",")",";","pp","=","ps",".","w",";","ps","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iY","(","pl",")",")",";","jK","=","ps",".","xyz","-","0.5",";","pq","=","normalize","(","jG","*","jK",")",";","pr","=","ps",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"jr",qualifier:["float"]},{type:"node_out",name:"pt",qualifier:["float"]},{type:"textline",tokens:["pt","=","jr",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"pu",qualifier:["vec3"]},{type:"node_in",name:"pv",qualifier:["vec3"]},{type:"node_out",name:"pw",qualifier:["vec3"]},{type:"node_out",name:"px",qualifier:["float"]},{type:"textline",tokens:["pw","=","pu","+","pv",";","px","=","(","abs","(","pw","[","0","]",")","+","abs","(","pw","[","1","]",")","+","abs","(","pw","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"py",qualifier:["vec3"]},{type:"node_in",name:"pz",qualifier:["vec3"]},{type:"node_out",name:"pA",qualifier:["vec3"]},{type:"node_out",name:"pB",qualifier:["float"]},{type:"textline",tokens:["pA","=","py","-","pz",";","pB","=","(","abs","(","pA","[","0","]",")","+","abs","(","pA","[","1","]",")","+","abs","(","pA","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"pC",qualifier:["vec3"]},{type:"node_in",name:"pD",qualifier:["vec3"]},{type:"node_out",name:"pE",qualifier:["vec3"]},{type:"node_out",name:"pF",qualifier:["float"]},{type:"textline",tokens:["pE","=","pC","+","pD",";","pF","=","length","(","pE",")",";","pE","=","normalize","(","pE",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"pG",qualifier:["vec3"]},{type:"node_in",name:"pH",qualifier:["vec3"]},{type:"node_out",name:"pI",qualifier:["vec3"]},{type:"node_out",name:"pJ",qualifier:["float"]},{type:"textline",tokens:["pI","=","vec3","(","iz",")",";","pJ","=","dot","(","pG",",","pH",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"pK",qualifier:["vec3"]},{type:"node_in",name:"pL",qualifier:["vec3"]},{type:"node_out",name:"pM",qualifier:["vec3"]},{type:"node_out",name:"pN",qualifier:["float"]},{type:"textline",tokens:["pM","=","cross","(","pK",",","pL",")",";","pN","=","length","(","pM",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"pO",qualifier:["vec3"]},{type:"node_in",name:"pP",qualifier:["vec3"]},{type:"node_out",name:"pQ",qualifier:["vec3"]},{type:"node_out",name:"pR",qualifier:["float"]},{type:"textline",tokens:["pQ","=","normalize","(","pO",")",";","pR","=","length","(","pO",")",";","pP",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"pS",qualifier:["vec3"]},{type:"node_in",name:"pT",qualifier:["vec3"]},{type:"node_out",name:"pU",qualifier:["vec3"]},{type:"textline",tokens:["pU","=","reflect","(","-","pS",",","pT",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pV",qualifier:["vec3"]},{type:"node_in",name:"pW",qualifier:["float"]},{type:"node_in",name:"pX",qualifier:["const","float"]},{type:"node_out",name:"pY",qualifier:["vec3"]},{type:"textline",tokens:["float","pZ","=","length","(","jC",")",";","if","(","pZ","<","10.0",")","{","float","p_","=","clamp","(","5.0","-","0.5","*","pZ",",","iz",",","iA",")",";","float","qa","=","pW","*","p_",";","vec3","qb","=","normalize","(","jA","*","jG",")",";","float","qc","=","iA","/","pX",";","vec2","qd","=","qb",".","xy","*","qa","/","(","pX","*","qb",".","z",")",";","float","qe","=","iA",";","vec2","qf","=","iY","(","pV",")",";","float","qg","=","texture2D","(","node_PARALLAX_var_texture",",","qf",")",".","a",";","for","(","float","qh","=","1.0",";","qh","<=","pX",";","qh","++",")","{","if","(","qg","<","qe",")","{","qe","-=","qc",";","qf","-=","qd",";","qg","=","texture2D","(","node_PARALLAX_var_texture",",","qf",")",".","a",";","}","}","vec2","qi","=","qf","+","qd",";","float","qj","=","texture2D","(","node_PARALLAX_var_texture",",","qi",")",".","a","-","(","qe","+","qc",")",";","float","qk","=","qg","-","qe",";","float","ql","=","qk","/","(","qk","-","qj",")",";","qf","=","ql","*","qi","+","(","iA","-","ql",")","*","qf",";","pY","=","iW","(","qf",")",";","}","else","pY","=","pV",";"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"qm",qualifier:["vec3"]},{type:"node_out",name:"qn",qualifier:["vec3"]},{type:"textline",tokens:["qn","=","clamp","(","qm",",","iz",",","iA",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"qo",qualifier:["float"]},{type:"node_in",name:"qp",qualifier:["float"]},{type:"node_in",name:"qq",qualifier:["float"]},{type:"node_in",name:"qr",qualifier:["float"]},{type:"node_in",name:"qs",qualifier:["float"]},{type:"node_out",name:"qt",qualifier:["float"]},{type:"node_out",name:"qu",qualifier:["vec4"]},{type:"textline",tokens:["qt","=","qo",";","qu","=","vec4","(","qp",",","qq",",","qr",",","qs",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"qv",qualifier:["float"]},{type:"textline",tokens:["qv","=","u_time",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","js","=","h_",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"textline",tokens:["vec3","jt","=","ia",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","jt","=","jt",";","else","jt","=","-","jt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ju","=","cross","(","jt",",","ib",".","xyz",")","*","ib",".","w",";","mat3","jv","=","mat3","(","ib",".","xyz",",","ju",",","jt",")",";"]}]}}]},{type:"textline",tokens:["vec3","jw","=","normalize","(","jt",")",";","float","jx","=","0.5","*","jw",".","y","+","0.5",";","vec3","jy","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","jx",")",";","vec3","jz","=","u_camera_eye_frag","-","h_",";","vec3","jA","=","normalize","(","jz",")",";","vec3","jB","=","h_",";","vec4","jC","=","cu",";","float","jD","=","u_emit",";","float","jE","=","u_ambient",";","float","jF","=","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","jG","=","jv",";"]}]}}]},{type:"textline",tokens:["vec3","jH",";","vec3","jI",";","vec3","jJ",";","vec3","jK",";","float","jL",";","float","jM",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","qw","=","jH",";","float","qx","=","jM",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["iy","(","qw",",","jA",",","jJ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jK",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iy","(","qw",",","jA",",","jJ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","iz",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","qy","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["qw","=","max","(","qw","-","sqrt","(","0.01","*","-","min","(","js",",","iz",")",")",",","0.5","*","qw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["hY","(","qw",",","js",",","u_time",",","jL",",","jt",",","u_sun_direction",",","qy",",","u_sun_quaternion",",","h_",",","length","(","cu",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","qz","=","ev","(","u_cube_fog",",","jA",")",";","vec4","qA","=","vec4","(","qz",",","u_fog_color_density",".","a",")",";","eb","(","qA",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qA","=","u_fog_color_density",";","qA",".","rgb","*=","qy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eM","(","qw",",","length","(","cu",")",",","jA",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","qA",",","js",",","length","(","qy",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eo","(","qw",",","length","(","cu",")",",","qA",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","qB","=","texture2DProj","(","u_shadow_mask",",","ct",")",".","rg",";","float","qC","=","qB",".","g",";","qw","=","vec3","(","qC",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jB","=","h_",";","vec4","jC","=","cu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jt","=","ia",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","jt","=","jt",";","else","jt","=","-","jt",";"]}]}}]},{type:"textline",tokens:["vec3","jw","=","normalize","(","jt",")",";"]}]}}]},{type:"textline",tokens:["vec3","jH",";","float","jM",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","qw","=","jH",";","float","qx","=","jM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","qx","<","0.5",")","discard",";","qx","=","iA",";"]}]}}]},{type:"textline",tokens:["ed","(","qw",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","qw",",","qx",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","qw",",","qx",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","h_",";","varying","vec4","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ib",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"iZ",qualifier:["varying","vec2"]},{type:"textline",tokens:["iZ","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"jd",qualifier:["varying","vec3"]},{type:"textline",tokens:["jd","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"je",qualifier:["varying","float"]},{type:"textline",tokens:["je","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"jf",qualifier:["varying","vec2"]},{type:"textline",tokens:["jf","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"jg",qualifier:["varying","vec3"]},{type:"textline",tokens:["jg","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","jh","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jj","=","vec3","(","a_tangent",")",";","vec3","jk","=","a_tangent","[","3","]","*","cross","(","ji",",","jj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jj","=","vec3","(","0.0",")",";","vec3","jk","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"elif",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jh","=","mix","(","jh",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["ji","=","mix","(","ji",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jl","=","vec3","(","a_tangent",")",";","vec3","jm","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","jl",")",";","jj","=","mix","(","jj",",","jl",",","u_va_frame_factor",")",";","jk","=","mix","(","jk",",","jm",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","jh",",","jj",",","jk",",","ji",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","mat4","jp","=","ab","(","u_camera_eye",",","jo",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","jp","=","jp","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jq",")",";"]}]}}]},{type:"textline",tokens:["b","jr","=","ai","(","jh","-","jn",",","jn",",","jj",",","jk",",","ji",",","jp",")",";","jr",".","b","=","jo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jr","=","ai","(","jh",",","jn",",","jj",",","jk",",","ji",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["float","js","=","(","dot","(","cross","(","jr",".","e",",","jr",".","c",")",",","jr",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ib","=","vec4","(","jr",".","c",",","js",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","mat4","jp","=","ab","(","u_camera_eye",",","jo",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","jp","=","jp","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jq",")",";"]}]}}]},{type:"textline",tokens:["b","jr","=","ai","(","jh","-","jn",",","jn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ji",",","jp",")",";","jr",".","b","=","jo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jr","=","ai","(","jh",",","jn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ji",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","jr",".","a",",","jr",".","b",",","ji",")",";"]}]}}]},{type:"textline",tokens:["h_","=","jr",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["ia","=","jr",".","e",";"]}]}}]},{type:"textline",tokens:["cu","=","u_view_matrix","*","vec4","(","jr",".","a",",","1.0",")",";","vec4","jt","=","u_proj_matrix","*","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["jt",".","xy","+=","u_subpixel_jitter","*","jt",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","jt",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","jr",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","ju","=","jt",".","x",";","float","jv","=","jt",".","y",";","float","jw","=","jt",".","w",";","ct",".","x","=","(","ju","+","jw",")","/","2.0",";","ct",".","y","=","(","jv","+","jw",")","/","2.0",";","ct",".","z","=","jw",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","jt",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec3","cu",";","void","main","(",")","{","float","ji","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","jj","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","ji",")",";","float","jk","=","u_diffuse_color",".","a","*","jh","*","(","1.0","-","clamp","(","jj",",","0.0",",","1.0",")",")",";","vec3","jl","=","ic","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","jl",",","length","(","cu",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ed","(","jl",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","jl",",","jk",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jl",",","jk",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"include",file:"particles.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec3","cu",";","struct","jP","{","float","iz",";","vec3","iA",";","float","iB",";","vec3","iC",";","float","iD",";","}",";","jP","jW","(",")","{","float","jQ","=","u_p_time","-","u_p_starttime",";","jP","jR",";","if","(","jQ","<","0.0",")","{","jR",".","iz","=","0.0001",";","jR",".","iA","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jQ","<","0.0",")",")","{","float","jS",";","if","(","u_p_cyclic","==","1",")","{","float","jT","=","u_p_endtime","-","u_p_starttime",";","jS","=","mod","(","jQ",",","jT",")","-","a_p_delay",";","if","(","jS","<","0.0",")","jS","+=","jT",";","}","if","(","u_p_cyclic","!=","1",")","{","jS","=","jQ","-","a_p_delay",";","}","if","(","jS","<","0.0","||","jS",">=","a_p_lifetime",")","{","jR",".","iz","=","0.0001",";","jR",".","iA","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jS","<","0.0","||","jS",">=","a_p_lifetime",")",")","{","vec3","jU","=","a_position",";","vec3","jV","=","a_normal",";","jU","+=","u_p_nfactor","*","jS","*","jV",";","jU","+=","a_p_vels",".","xyz","*","jS",";","jU",".","y","-=","u_p_gravity","*","jS","*","jS","/","2.0",";","jU","+=","(","u_p_wind","/","u_p_mass",")","*","jS","*","jS","/","2.0",";","jR",".","iA","=","jU",";","jR",".","iD","=","a_p_vels",".","w","*","jS",";","jR",".","iz","=","jt","(","jS",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","jR",".","iB","=","jO","(","jS",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","jR",".","iC","=","jF","(","jS",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","jR",";","}","void","main","(",")","{","jP","jX",";","jX","=","jW","(",")",";","vec4","jY","=","u_view_matrix","*","vec4","(","jX",".","iA",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","jY",";","jh","=","jX",".","iB",";","ic","=","jX",".","iC",";","cu","=","jY",".","xyz",";","float","jZ","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","jX",".","iz","*","jZ",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_sampler",",","a",")",";","vec3","iA","=","iz",".","rgb",";","eb","(","iA",")",";","iA","*=","ic",";","float","iB","=","iz",".","a","*","jh",";","ed","(","iA",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","iA",",","iB",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iA",",","iB",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"include",file:"particles.glslv"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","float","u_p_size",";","varying","float","jh",";","varying","vec3","ic",";","varying","vec2","a",";","varying","vec4","cu",";","struct","jP","{","float","iz",";","vec3","iA",";","float","iB",";","vec3","iC",";","float","iD",";","}",";","jP","jW","(",")","{","float","jQ","=","u_p_time","-","u_p_starttime",";","jP","jR",";","if","(","jQ","<","0.0",")","{","jR",".","iz","=","0.0001",";","jR",".","iA","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jQ","<","0.0",")",")","{","float","jS",";","if","(","u_p_cyclic","==","1",")","{","float","jT","=","u_p_endtime","-","u_p_starttime",";","jS","=","mod","(","jQ",",","jT",")","-","a_p_delay",";","if","(","jS","<","0.0",")","jS","+=","jT",";","}","if","(","u_p_cyclic","!=","1",")","{","jS","=","jQ","-","a_p_delay",";","}","if","(","jS","<","0.0","||","jS",">=","a_p_lifetime",")","{","jR",".","iz","=","0.0001",";","jR",".","iA","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jS","<","0.0","||","jS",">=","a_p_lifetime",")",")","{","vec3","jU","=","a_position",";","vec3","jV","=","a_normal",";","jU","+=","u_p_nfactor","*","jS","*","jV",";","jU","+=","a_p_vels",".","xyz","*","jS",";","jU",".","y","-=","u_p_gravity","*","jS","*","jS","/","2.0",";","jU","+=","(","u_p_wind","/","u_p_mass",")","*","jS","*","jS","/","2.0",";","jR",".","iA","=","jU",";","jR",".","iD","=","a_p_vels",".","w","*","jS",";","jR",".","iz","=","jt","(","jS",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","jR",".","iB","=","jO","(","jS",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","jR",".","iC","=","jF","(","jS",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","jR",";","}","float","jZ","(","vec2","jX",",","vec2","jY",")","{","return","(","atan","(","jY",".","y",",","jY",".","x",")","-","atan","(","jX",".","y",",","jX",".","x",")",")",";","}","void","main","(",")","{","jP","j_",";","j_","=","jW","(",")",";","float","ka",";","mat4","kb",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","ka","=","j_",".","iD",";","kb","=","A","(","j_",".","iA",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","ka","=","j_",".","iD",";","kb","=","l","(",")",";","kb","[","3","]","=","vec4","(","j_",".","iA",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","ka","=","j_",".","iD",";","kb","=","p","(","radians","(","90.0",")",")",";","kb","[","3","]","=","vec4","(","j_",".","iA",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","ka","=","jZ","(","vec2","(","0.0",",","-","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","j_",".","iD",";","kb","=","n","(","radians","(","-","90.0",")",")",";","kb","[","3","]","=","vec4","(","j_",".","iA",",","1.0",")",";","}","vec4","kc","=","vec4","(","a_p_bb_vertex","*","2.0","*","j_",".","iz","*","u_p_size",",","0.0",",","1.0",")",";","vec4","kd","=","kb","*","r","(","ka",")","*","kc",";","cu","=","u_view_matrix","*","kd",";","vec4","ke","=","u_proj_matrix","*","cu",";","gl_Position","=","ke",";","jh","=","j_",".","iB",";","ic","=","j_",".","iC",";","a","=","a_p_bb_vertex","+","0.5",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","jP",";","const","float","jQ","=","0.99",";","const","float","jR","=","1.8",";","const","int","jS","=","8",";","float","kb","(","vec3","jT",",","vec3","jU",")","{","float","jV","=","dot","(","jU",",","jU",")",";","float","jW","=","2.0","*","dot","(","jU",",","jT",")",";","float","jX","=","dot","(","jT",",","jT",")","-","1.0",";","float","jY","=","jW","*","jW","-","4.0","*","jV","*","jX",";","float","jZ","=","sqrt","(","jY",")",";","float","j_","=","(","-","jW","-","jZ",")","/","2.0",";","float","ka","=","jX","/","j_",";","return","ka",";","}","float","ki","(","float","kc",",","float","kd",")","{","float","ke","=","3.0","*","(","1.0","-","kd","*","kd",")",";","float","kf","=","2.0","*","(","2.0","+","kd","*","kd",")",";","float","kg","=","1.0","+","kc","*","kc",";","float","kh","=","pow","(","1.0","+","kd","*","kd","-","2.0","*","kd","*","kc",",","1.5",")",";","return","(","ke","/","kf",")","*","(","kg","/","kh",")",";","}","float","kq","(","vec3","kj",",","vec3","kk",",","float","kl",")","{","float","km","=","dot","(","kk",",","-","kj",")",";","if","(","km","<","0.0",")","{","return","1.0",";","}","vec3","kn","=","kj","+","km","*","kk",";","if","(","length","(","kn",")","<","kl",")","{","return","0.0",";","}","else","if","(","length","(","kn",")",">=","kl",")","{","vec3","ko","=","normalize","(","kn",")","*","kl","-","kj",";","float","kp","=","acos","(","dot","(","normalize","(","ko",")",",","kk",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","kp","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","ku","(","float","kr",",","vec3","ks",",","float","kt",")","{","return","ks","-","ks","*","pow","(","u_sky_color",",","vec3","(","kt","/","kr",")",")",";","}","void","main","(",")","{","vec3","kv","=","normalize","(","jP",")",";","vec3","kw","=","u_sun_direction",";","float","kx","=","dot","(","kv",",","kw",")",";","float","ky","=","ki","(","kx",",","-","0.01",")","*","u_rayleigh_brightness","*","kw",".","y",";","float","kz","=","ki","(","kx","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","kw",".","y",")",";","float","kA","=","smoothstep","(","0.0",",","100.0",",","ki","(","kx",",","0.9995",")",")","*","u_spot_brightness",";","vec3","kB","=","vec3","(","0.0",",","jQ",",","0.0",")",";","float","kC","=","kb","(","kB",",","kv",")",";","float","kD","=","kC","/","float","(","jS",")",";","float","kE","=","kq","(","kB",",","kv",",","jQ","-","0.3",")",";","vec3","kF","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","kG","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","kH","=","0",";","kH","<","jS",";","kH","++",")","{","float","kI","=","kD","*","float","(","kH",")",";","vec3","kJ","=","kB","+","kv","*","kI",";","float","kK","=","kq","(","kJ",",","kw",",","jQ","-","0.2",")",";","float","kL","=","kb","(","kJ",",","kw",")",";","vec3","kM","=","ku","(","kL",",","vec3","(","jR",")",",","u_scatter_strength",")","*","kK",";","kF","+=","ku","(","sqrt","(","kI",")",",","u_sky_color","*","kM",",","u_rayleigh_strength",")",";","kG","+=","ku","(","kI",",","kM",",","u_mie_strength",")",";","}","kF","=","kF","*","kE","*","pow","(","kC",",","u_rayleigh_collection_power",")","/","float","(","jS",")",";","kG","=","(","kG","*","kE","*","pow","(","kC",",","u_mie_collection_power",")",")","/","float","(","jS",")",";","vec3","kN","=","vec3","(","kA","*","kG","+","kz","*","kG","+","ky","*","kF",")",";","ed","(","kN",")",";","gl_FragColor","=","vec4","(","kN",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","jP",";","void","main","(",")","{","vec4","iz","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","iA","=","u_cube_view_matrix","*","iz",";","jP","=","iA",".","xyz",";","gl_Position","=","iz",";","}"]}]},exports["shadeless.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";","varying","vec2","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cu",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iz","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iA","=","ic",";","eb","(","iA",")",";","vec4","iB","=","vec4","(","iA",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iB","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iC","=","texture2D","(","u_colormap0",",","iz",")",";","eb","(","iC",".","rgb",")",";","vec4","iD","=","texture2D","(","u_colormap1",",","iz",")",";","eb","(","iD",".","rgb",")",";","vec4","iE","=","texture2D","(","u_stencil0",",","iz",")",";","vec4","iF","=","mix","(","iC",",","iD",",","iE",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iF","=","texture2D","(","u_colormap0",",","iz","+","u_time","*","u_colormap0_uv_velocity",")",";","eb","(","iF",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["iB",".","rgb","=","mix","(","iB",".","rgb",",","iF",".","rgb",",","u_diffuse_color_factor",")",";","iB",".","a","=","iF",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["iB",".","rgb","*=","mix","(","vec3","(","1.0",")",",","iF",".","rgb",",","u_diffuse_color_factor",")",";","iB",".","a","=","iF",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","iG","=","iB",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["float","iH","=","iB",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","iH","<","0.5",")","discard",";","iH","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iH","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","iG",",","length","(","cu",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ed","(","iG",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","iG",",","iH",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iG",",","iH",")",";","}"]}]},exports["shadeless.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cu",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ic",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","iz","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iz","=","mix","(","iz",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iA","=","vec3","(","0.0",")",";","vec3","iB","=","vec3","(","0.0",")",";","vec3","iC","=","vec3","(","0.0",")",";","bn","(","iz",",","iA",",","iB",",","iC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iD","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iD","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","(","u_model_matrix","*","vec4","(","iD",",","1.0",")",")",".","xyz",";","mat4","iF","=","ab","(","u_camera_eye",",","iE",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","=","(","u_model_matrix","*","vec4","(","iD",",","1.0",")",")",".","xyz",";","iF","=","iF","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iG",")",";"]}]}}]},{type:"textline",tokens:["b","iH","=","ai","(","iz","-","iD",",","iD",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iF",")",";","iH",".","b","=","iE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iH","=","ai","(","iz",",","iD",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iI","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iI","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","iH",".","a",",","iH",".","b",",","iI",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ic","=","a_color",";"]}]}}]},{type:"textline",tokens:["cu","=","u_view_matrix","*","vec4","(","iH",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gl_Position",".","xy","+=","u_subpixel_jitter","*","gl_Position",".","w",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_sampler",",","a",")",";","ed","(","iz",".","rgb",")",";","eg","(","iz",".","rgb",",","iz",".","a",")",";","gl_FragColor","=","iz",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","iz","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","iA","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","iz",",","0.0",")",";","iA",".","x","/=","iA",".","w",";","iA",".","y","/=","iA",".","w",";","iA","+=","99999.0","*","step","(","iA",".","z",",","0.0",")",";","iA","+=","100.0","*","(","step","(","1.0",",","abs","(","iA",".","x",")",")","+","step","(","1.0",",","abs","(","iA",".","y",")",")",")",";","iA",".","x","=","-","a_lf_dist","*","iA",".","x",";","iA",".","y","=","-","a_lf_dist","*","iA",".","y",";","float","iB","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","iC","=","vec2","(","a_lf_bb_vertex",".","x","/","iB",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","iD","=","1.9",";","iC","*=","(","1.0","+","iD","*","length","(","iA",".","xy",")",")",";","}","gl_Position","=","vec4","(","iA",".","xy","+","iC",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jP",";","void","main","(",")","{","vec3","iz","=","textureCube","(","u_sky",",","jP",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["eb","(","iz",".","rgb",")",";","float","iA","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","iA","=","min","(","-","iA","*","0.03",",","0.8",")",";","float","iB","=","length","(","u_sun_intensity",")","+","u_environment_energy",";","vec3","iC","=","normalize","(","jP",")",";","vec3","iD","=","vec3","(","0.0",")",";","vec4","iE","=","u_underwater_fog_color_density",";","iE",".","rgb","=","mix","(","iE",".","rgb",",","iD",",","min","(","-","iC",".","y","+","iA",",","1.0",")",")","*","iB",";","float","iF","=","clamp","(","sign","(","iC",".","y","-","0.05","*","iA",")",",","0.0",",","1.0",")",";","iz","=","mix","(","iE",".","rgb",",","iz",",","iF",")",";","ed","(","iz",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iz",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","jP",";","void","main","(",")","{","vec4","iz","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","iA","=","u_sky_vp_inverse","*","iz",";","jP","=","iA",".","xyz",";","gl_Position","=","iz",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0001"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_depth",";"]}]}},{type:"elif",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_alphamap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";","uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ib",";","varying","vec3","jQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jR",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","jZ","(","in","float","jU",",","inout","vec2","jV",",","in","vec2","jW",")","{","vec4","jX","=","texture2D","(","u_shore_depth",",","jV",")",";","float","jY","=","cn","(","jX",")",";","if","(","jY","<","jT",")","{","jV","=","jW",";","return","jU",";","}","else","{","return","jY",";","}","}"]}]}}]},{type:"textline",tokens:["vec3","kn","(","in","vec2","j_",",","in","vec3","ka",",","in","vec3","kb",",","in","vec3","kc",",","out","float","kd",")","{","vec3","ke","=","reflect","(","-","kb",",","ka",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kf","=","j_",".","xy","+","ka",".","xz","*","REFL_BUMP","/","jT",";","kd","=","u_reflect_factor",";","vec3","kg",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kg","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kg","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","kh","=","dot","(","kb",",","ka",")",";","kd","*=","max","(","1.0","-","1.0","/","kh",",","1.0",")",";","}","else","{","kg","=","texture2D","(","u_reflectmap",",","kf",")",".","rgb",";","eb","(","kg",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["kd","=","u_mirror_factor",";","vec3","kg","=","kc","*","textureCube","(","u_mirrormap",",","ke",")",".","rgb",";","eb","(","kg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kd","=","1.0",";","vec3","kg","=","kc","*","vec3","(","0.3",",","0.5",",","1.0",")",";","eb","(","kg",")",";"]}]}}]},{type:"textline",tokens:["vec3","ki","=","normalize","(","ke","+","kb",")",";","float","kj","=","1.0","-","dot","(","kb",",","ki",")",";","float","kk","=","u_fresnel_params","[","3","]",";","float","kl","=","u_fresnel_params","[","2","]",";","float","km","=","kk","+","(","1.0","-","kk",")","*","pow","(","kj",",","kl",")",";","kd","=","min","(","kd","*","km",",","1.0",")",";","return","kg",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","ko","=","mat3","(","ib",",","jQ",",","ia",")",";"]}]}}]},{type:"textline",tokens:["vec3","kp","=","normalize","(","ia",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","ko","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","kp","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","(","REFLECTIVE","||","FOAM","||","(","WATER_EFFECTS","&&","!","DISABLE_FOG",")",")","||","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","kq","=","h_",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kr","=","vec2","(","jR",".","x",",","-","jR",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","kr","=","vec2","(","h_",".","x",",","-","h_",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","kr","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ks","=","vec3","(","0.0",")",";","vec3","kt","=","texture2D","(","u_normalmap0",",","kr","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","ks","+=","kt",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ku","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["ku","+=","kt",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_normalmap0",",","kr","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","ks","+=","kt",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["ku","+=","kt",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_normalmap0",",","kr","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","ks","+=","kt",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["ku","+=","kt",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_normalmap0",",","kr","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","ks","+=","kt",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["ku","+=","kt",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kv","=","ko","*","ku",";","if","(","!","h","(","kv",",","vec3","(","0.0",")",")",")","kv","=","normalize","(","kv",")",";","vec3","kw","=","mix","(","kp",",","kv",",","0.2",")",";","kw","=","normalize","(","kw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["kp","=","mix","(","kp",",","normalize","(","ko","*","ks",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kp","=","mix","(","kp",",","normalize","(","ko","*","ks",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["kp","=","normalize","(","kp",")",";"]}]}}]},{type:"textline",tokens:["vec3","kx","=","normalize","(","hZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ky","=","ct",".","xy","/","ct",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","kz","=","jT","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","kA","=","u_diffuse_color",".","a",";","vec4","kB","=","texture2DProj","(","u_shore_depth",",","ct",")",";","float","kC","=","cn","(","kB",")",";","float","kD","=","max","(","kC","-","jT",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kE","=","ky","+","kp",".","xz","*","REFR_BUMP","/","jT",";","float","kF","=","jZ","(","kC",",","kE",",","ky",")",";","float","kG","=","max","(","kF","-","jT",",","0.0",")",";","float","kH","=","u_view_max_depth","/","ABSORB","*","kG",";","float","kI",";","if","(","u_cam_water_depth","<","0.0",")","kI","=","0.0",";","else","kI","=","min","(","kA","*","kH",",","1.0",")",";","float","kJ","=","u_view_max_depth","/","ABSORB","*","kD",";","kA","=","min","(","15.0","*","kA","*","u_view_max_depth","*","kD",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kJ","=","u_view_max_depth","/","ABSORB","*","kD",";","if","(","u_cam_water_depth",">","0.0",")","kA","=","min","(","kA","*","kJ",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["kA","*=","min","(","5.0","*","kz",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kK","=","texture2D","(","u_alphamap",",","kr",")",";","float","kA","=","kK",".","r",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kA","=","u_diffuse_color",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kI","=","1.0","-","kA",";","vec2","kE","=","ky","+","kp",".","xz","*","REFR_BUMP","/","jT",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kL","=","texture2D","(","u_refractmap",",","kE",")",".","rgb",";","eb","(","kL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kM","=","pow","(","min","(","jS",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","kN","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","kM",")",";","kM","=","pow","(","min","(","jS",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","kN","=","mix","(","u_shore_water_col",",","kN",",","kM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kN","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","kO","=","max","(","1.0","-","u_view_max_depth","*","kD",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kO","=","1.0","-","kA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","kP","=","max","(","3.0","*","kq",",","0.0",")",";","kP","*=","kP",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kQ","=","normalize","(","vec3","(","jS",".","r",",","0.0",",","jS",".","g",")",")",";","vec3","kR","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","kQ",",","0.8",")",")",";","float","kS","=","max","(","2.5","*","dot","(","kw",",","kR",")","-","0.7",",","0.0",")",";","kO","+=","kS","*","(","1.0","-","jS",".","b",")",";","kP","*=","(","1.0","-","0.95","*","pow","(","jS",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["kO","+=","kP",";","kO","=","min","(","u_foam_factor","*","kO",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","kT","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","kr","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","kU","=","u_specular_params","[","0","]",";","float","kV","=","u_specular_params","[","1","]",";","vec3","kW","=","kU","*","u_specular_color",";","vec3","kX","=","u_environment_energy","*","u_zenith_color",";","vec3","kY","=","u_ambient","*","kX",";","vec3","kZ","=","kY","+","u_sun_intensity",";","float","k_",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","la","=","kn","(","ky",",","kp",",","kx",",","kZ",",","k_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","la","=","kn","(","vec2","(","0.0",")",",","kp",",","kx",",","kZ",",","k_",")",";"]}]}}]},{type:"textline",tokens:["vec3","lb","=","u_diffuse_intensity","*","kN",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS","&&","DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","lc","=","max","(","dot","(","u_sun_direction",",","-","ia",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","kx",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","lc","=","clamp","(","SSS_STRENGTH","*","lc",",","0.0",",","1.0",")",";","lb","=","mix","(","lb",",","u_shallow_water_col",",","lc",")",";","lb","=","mix","(","lb",",","u_shore_water_col",",","lc",")",";"]}]}}]},{type:"textline",tokens:["eW","ld","=","gz","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lb",",","kW",",","h_",",","kp",",","kx",",","kV",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","lb","=","ld",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lb","=","mix","(","kL",",","lb",",","kI",")",";"]}]}}]},{type:"textline",tokens:["lb","=","mix","(","lb",",","la",",","k_",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","le","=","mix","(","kT",".","g",",","kT",".","r",",","clamp","(","4.0","*","(","kO","-","0.75",")",",","0.0",",","1.0",")",")",";","le","=","mix","(","kT",".","b",",","le",",","clamp","(","2.0","*","kO","-","1.0",",","0.0",",","1.0",")",")",";","le","=","mix","(","0.0",",","le",",","kO",")",";","lb","=","mix","(","lb",",","kZ",",","le",")",";"]}]}}]},{type:"textline",tokens:["lb","+=","ld",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lf","=","ev","(","u_cube_fog",",","kx",")",";","vec4","lg","=","vec4","(","lf",",","u_fog_color_density",".","a",")",";","eb","(","lg",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lg","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","eV","(","lb",",","kz",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";","}","else","{","eo","(","lb",",","kz",",","lg",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eo","(","lb",",","kz",",","lg",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ed","(","lb",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","max","(","kA",",","ld",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["kA","+=","le",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","lb",",","kA",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lb",",","kA",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Z",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Z",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_cascad_step",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","h_",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ia",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ib",";","varying","vec3","jQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jR",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","(","in","vec2","iz",")","{","vec2","iA","=","vec2","(","(","iz",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","SHORE_MAP_CENTER_Z","+","iz",".","y",")","/","SHORE_MAP_SIZE_Z",")","+","0.5",";","iA","=","clamp","(","iA",",","0.0",",","1.0",")",";","vec4","iB","=","texture2D","(","u_shore_dist_map",",","iA",")",";","const","vec2","iC","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","iD","=","dot","(","iB",".","ba",",","iC",")",";","vec2","iE","=","normalize","(","iB",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","iE",",","iD",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","iT","(","inout","vec3","iG",",","in","float","iH",",","in","vec3","iI",")","{","float","iJ","=","hx","(","DST_NOISE_SCALE_0","*","(","iG",".","xz","+","DST_NOISE_FREQ_0","*","iH",")",")","*","hx","(","DST_NOISE_SCALE_1","*","(","iG",".","zx","-","DST_NOISE_FREQ_1","*","iH",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","iK","=","iI",".","b",";","float","iL","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","iM","=","sqrt","(","iK",")",";","float","iN","=","max","(","iK",",","DIR_MIN_SHR_FAC",")","*","(","sin","(","(","iM","/","iL","+","DIR_FREQ","*","iH",")",")",")","*","max","(","hx","(","DIR_NOISE_SCALE","*","(","iG",".","xz","+","DIR_NOISE_FREQ","*","iH",")",")",",","DIR_MIN_NOISE_FAC",")",";","float","iO","=","WAVES_HEIGHT","*","mix","(","iN",",","iJ",",","max","(","iM",",","DST_MIN_FAC",")",")",";","vec2","iP","=","iI",".","rg",";","float","iQ","=","WAVES_HOR_FAC","*","iN","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","iK",")",",","0.0",")",";","vec2","iR","=","iQ","*","iP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iO","=","WAVES_HEIGHT","*","iJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","iS","=","gT","(","20.0","/","WAVES_LENGTH","*","(","iG",".","xz","-","0.25","*","iH",")",")",".","x","+","gT","(","17.0","/","WAVES_LENGTH","*","(","iG",".","zx","+","0.1","*","iH",")",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["iG",".","xz","+=","iR",";","iS","*=","iK",";"]}]}}]},{type:"textline",tokens:["iO","+=","0.05","*","iS",";"]}]}}]},{type:"textline",tokens:["iG",".","y","+=","iO",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","iU","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","iV","=","abs","(","a_cascad_step",")",";","vec2","iW","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","iV",")",";","iU",".","y","+=","WATER_LEVEL",";","iU",".","xz","+=","iW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["b","iX","=","ai","(","iU",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["jR","=","iX",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["jS","=","iF","(","iX",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","iY","=","length","(","u_wind",")",";","float","jU","=","u_time",";","jU","*=","iY",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","jV","=","iV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jV","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","jW","=","iX",".","a","+","vec3","(","jV",",","0.0",",","0.0",")",";","vec3","jX","=","iX",".","a","+","vec3","(","0.0",",","0.0",",","jV",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jY","=","iF","(","jW",".","xz",")",";","vec3","jZ","=","iF","(","jX",".","xz",")",";","iT","(","jW",",","jU",",","jY",")",";","iT","(","jX",",","jU",",","jZ",")",";","iT","(","iX",".","a",",","jU",",","jS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iT","(","jW",",","jU",",","vec3","(","0.0",")",")",";","iT","(","jX",",","jU",",","vec3","(","0.0",")",")",";","iT","(","iX",".","a",",","jU",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_cascad_step","<","0.0",")","{","jW",".","y","=","iX",".","a",".","y",";","jX",".","y","=","iX",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","j_","=","normalize","(","jW","-","iX",".","a",")",";","vec3","ka","=","normalize","(","jX","-","iX",".","a",")",";","ia","=","normalize","(","cross","(","ka",",","j_",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["ib","=","ka",";","jQ","=","cross","(","ia",",","ib",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kb","=","dot","(","ia",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","kc","=","clamp","(","0.8","-","kb",",","0.0",",","1.0",")",";","ia","=","mix","(","ia",",","vec3","(","0.0",",","1.0",",","0.0",")",",","kc",")",";"]}]}}]}]}}]},{type:"textline",tokens:["h_","=","iX",".","a",";","hZ","=","u_camera_eye","-","iX",".","a",";","vec4","kd","=","u_view_matrix","*","vec4","(","iX",".","a",",","1.0",")",";","vec4","ke","=","u_proj_matrix","*","kd",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kf","=","ke",".","x",";","float","kg","=","ke",".","y",";","float","kh","=","ke",".","w",";","ct",".","x","=","(","kf","+","kh",")","/","2.0",";","ct",".","y","=","(","kg","+","kh",")","/","2.0",";","ct",".","z","=","kh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["jT","=","-","kd",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ke",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jU",";","const","float","jV","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jW","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jW","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jX","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","jY","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","jZ","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","j_","=","vec3","(","0.0",")",";","float","ka","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kb","=","sign","(","jU","-","vec3","(","0.02","*","jV",")",")",";","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","{","j_","=","jW",";","ka","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kb","=","sign","(","jU","-","vec3","(","0.02","*","jV",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","j_","=","u_wireframe_edge_color",";","else","j_","=","jZ",";","ka","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","ka","=","1.0",";","else","ka","=","0.0",";","j_","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","kb",".","x","<","0.0","||","kb",".","y","<","0.0","||","kb",".","z","<","0.0",")","j_","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","j_","=","jX",";","else","j_","=","jY",";","ka","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","kc","=","fwidth","(","jU",")",";","vec3","kd","=","smoothstep","(","vec3","(","0.0",")",",","kc","*","jV",",","jU",")",";","float","ke","=","min","(","min","(","kd",".","x",",","kd",".","y",")",",","kd",".","z",")",";","ke","=","clamp","(","ke",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","j_","=","vec3","(","mix","(","u_wireframe_edge_color",",","jZ",",","ke",")",")",";","ka","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","j_","=","u_wireframe_edge_color",";","ka","=","mix","(","1.0",",","0.0",",","ke",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","j_","=","mix","(","u_wireframe_edge_color",",","jX",",","ke",")",";","else","j_","=","mix","(","u_wireframe_edge_color",",","jY",",","ke",")",";","ka","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["ed","(","j_",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","j_",",","ka",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","j_",",","ka",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","jU",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","jU","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","jU","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","jU","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","iz","=","a_position",";","vec3","iA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["b","iB","=","ai","(","iz",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iz","=","mix","(","iz",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","=","vec3","(","0.0",")",";","vec3","iD","=","vec3","(","0.0",")",";","bn","(","iz",",","iC",",","iD",",","iA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","iB","=","dT","(","iz",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iE",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","(","u_model_matrix","*","vec4","(","iE",",","1.0",")",")",".","xyz",";","mat4","iG","=","ab","(","u_camera_eye",",","iF",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iH","=","(","u_model_matrix","*","vec4","(","iE",",","1.0",")",")",".","xyz",";","iG","=","iG","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iH",")",";"]}]}}]},{type:"textline",tokens:["b","iB","=","ai","(","iz","-","iE",",","iE",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iG",")",";","iB",".","b","=","iF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iB","=","ai","(","iz",",","iE",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","iB",".","a",",","iB",".","b",",","iA",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","iI","=","u_view_matrix","*","vec4","(","iB",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","iI",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","iA","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","iz","[","0","]",",","iA","[","1","]",",","iA","[","2","]",",","iz","[","3","]","+","iA","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","iC","(","float","iz",",","float","iA",")","{","vec2","iB","=","a","+","vec2","(","iz",",","iA",")","*","u_texel_size",";","return","texture2D","(","u_color",",","iB",")",";","}","float","iG","(","vec4","iD",")","{","vec3","iE","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","iF","=","dot","(","iD",".","rgb",",","iE",")",";","return","iF",";","}","vec4","jV","(",")","{","vec4","iH","=","iC","(","-","1.0",",","-","1.0",")",";","vec4","iI","=","iC","(","1.0",",","-","1.0",")",";","vec4","iJ","=","iC","(","-","1.0",",","1.0",")",";","vec4","iK","=","iC","(","1.0",",","1.0",")",";","vec4","iL","=","iC","(","0.0",",","0.0",")",";","float","iM","=","iG","(","iH",")",";","float","iN","=","iG","(","iI",")",";","float","iO","=","iG","(","iJ",")",";","float","iP","=","iG","(","iK",")",";","float","iQ","=","iG","(","iL",")",";","float","iR","=","min","(","iQ",",","min","(","min","(","iM",",","iN",")",",","min","(","iO",",","iP",")",")",")",";","float","iS","=","max","(","iQ",",","max","(","max","(","iM",",","iN",")",",","max","(","iO",",","iP",")",")",")",";","vec2","iT",";","iT",".","x","=","-","(","(","iM","+","iN",")","-","(","iO","+","iP",")",")",";","iT",".","y","=","(","(","iM","+","iO",")","-","(","iN","+","iP",")",")",";","float","iU","=","max","(","(","iM","+","iN","+","iO","+","iP",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","iV","=","1.0","/","(","min","(","abs","(","iT",".","x",")",",","abs","(","iT",".","y",")",")","+","iU",")",";","iT","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","iT","*","iV",")",")","*","u_texel_size",";","vec4","iW","=","0.5","*","(","texture2D","(","u_color",",","a","+","iT","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","iT","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","iX","=","iW","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","iT","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","iT","*","0.5",")",")",";","float","iY","=","iG","(","iX",")",";","if","(","(","iY","<","iR",")","||","(","iY",">","iS",")",")","return","iW",";","else","return","iX",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","lG","(",")","{","vec2","jW",";","jW",".","x","=","a",".","x",";","jW",".","y","=","a",".","y",";","vec4","jX","=","texture2D","(","u_color",",","jW",")",";","vec4","jY","=","iC","(","0.0",",","1.0",")",";","vec4","jZ","=","iC","(","1.0",",","0.0",")",";","vec4","j_","=","iC","(","0.0",",","-","1.0",")",";","vec4","ka","=","iC","(","-","1.0",",","0.0",")",";","float","kb","=","iG","(","jY",")",";","float","kc","=","iG","(","jZ",")",";","float","kd","=","iG","(","j_",")",";","float","ke","=","iG","(","ka",")",";","float","kf","=","iG","(","jX",")",";","float","kg","=","max","(","kb",",","kf",")",";","float","kh","=","min","(","kb",",","kf",")",";","float","ki","=","max","(","kc",",","kg",")",";","float","kj","=","min","(","kc",",","kh",")",";","float","kk","=","max","(","kd",",","ke",")",";","float","kl","=","min","(","kd",",","ke",")",";","float","km","=","max","(","kk",",","ki",")",";","float","kn","=","min","(","kl",",","kj",")",";","float","ko","=","km","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","kp","=","km","-","kn",";","float","kq","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","ko",")",";","bool","kr","=","kp","<","kq",";","if","(","kr",")","return","jX",";","vec4","ks","=","iC","(","-","1.0",",","-","1.0",")",";","vec4","kt","=","iC","(","1.0",",","1.0",")",";","vec4","ku","=","iC","(","1.0",",","-","1.0",")",";","vec4","kv","=","iC","(","-","1.0",",","1.0",")",";","float","kw","=","iG","(","ks",")",";","float","kx","=","iG","(","kt",")",";","float","ky","=","iG","(","ku",")",";","float","kz","=","iG","(","kv",")",";","float","kA","=","kd","+","kb",";","float","kB","=","ke","+","kc",";","float","kC","=","1.0","/","kp",";","float","kD","=","kA","+","kB",";","float","kE","=","(","-","2.0","*","kf",")","+","kA",";","float","kF","=","(","-","2.0","*","kf",")","+","kB",";","float","kG","=","ky","+","kx",";","float","kH","=","kw","+","ky",";","float","kI","=","(","-","2.0","*","kc",")","+","kG",";","float","kJ","=","(","-","2.0","*","kd",")","+","kH",";","float","kK","=","kw","+","kz",";","float","kL","=","kz","+","kx",";","float","kM","=","(","abs","(","kE",")","*","2.0",")","+","abs","(","kI",")",";","float","kN","=","(","abs","(","kF",")","*","2.0",")","+","abs","(","kJ",")",";","float","kO","=","(","-","2.0","*","ke",")","+","kK",";","float","kP","=","(","-","2.0","*","kb",")","+","kL",";","float","kQ","=","abs","(","kO",")","+","kM",";","float","kR","=","abs","(","kP",")","+","kN",";","float","kS","=","kK","+","kG",";","float","kT","=","u_texel_size",".","x",";","bool","kU","=","kQ",">=","kR",";","float","kV","=","kD","*","2.0","+","kS",";","if","(","!","kU",")","kd","=","ke",";","if","(","!","kU",")","kb","=","kc",";","if","(","kU",")","kT","=","u_texel_size",".","y",";","float","kW","=","(","kV","*","(","1.0","/","12.0",")",")","-","kf",";","float","kX","=","kd","-","kf",";","float","kY","=","kb","-","kf",";","float","kZ","=","kd","+","kf",";","float","k_","=","kb","+","kf",";","bool","la","=","abs","(","kX",")",">=","abs","(","kY",")",";","float","lb","=","max","(","abs","(","kX",")",",","abs","(","kY",")",")",";","if","(","la",")","kT","=","-","kT",";","float","lc","=","clamp","(","abs","(","kW",")","*","kC",",","0.0",",","1.0",")",";","vec2","ld",";","ld",".","x","=","jW",".","x",";","ld",".","y","=","jW",".","y",";","vec2","le",";","le",".","x","=","(","!","kU",")","?","0.0",":","u_texel_size",".","x",";","le",".","y","=","(","kU",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","kU",")","ld",".","x","+=","kT","*","0.5",";","if","(","kU",")","ld",".","y","+=","kT","*","0.5",";","vec2","lf",";","lf",".","x","=","ld",".","x","-","le",".","x",";","lf",".","y","=","ld",".","y","-","le",".","y",";","vec2","lg",";","lg",".","x","=","ld",".","x","+","le",".","x",";","lg",".","y","=","ld",".","y","+","le",".","y",";","float","lh","=","(","(","-","2.0",")","*","lc",")","+","3.0",";","float","li","=","iG","(","texture2D","(","u_color",",","lf",")",")",";","float","lj","=","lc","*","lc",";","float","lk","=","iG","(","texture2D","(","u_color",",","lg",")",")",";","if","(","!","la",")","kZ","=","k_",";","float","ll","=","lb","*","1.0","/","4.0",";","float","lm","=","kf","-","kZ","*","0.5",";","float","ln","=","lh","*","lj",";","bool","lo","=","lm","<","0.0",";","li","-=","kZ","*","0.5",";","lk","-=","kZ","*","0.5",";","bool","lp","=","abs","(","li",")",">=","ll",";","bool","lq","=","abs","(","lk",")",">=","ll",";","if","(","!","lp",")","lf",".","x","-=","le",".","x","*","1.5",";","if","(","!","lp",")","lf",".","y","-=","le",".","y","*","1.5",";","bool","lr","=","(","!","lp",")","||","(","!","lq",")",";","if","(","!","lq",")","lg",".","x","+=","le",".","x","*","1.5",";","if","(","!","lq",")","lg",".","y","+=","le",".","y","*","1.5",";","if","(","lr",")","{","if","(","!","lp",")","li","=","iG","(","texture2D","(","u_color",",","lf",".","xy",")",")",";","if","(","!","lq",")","lk","=","iG","(","texture2D","(","u_color",",","lg",".","xy",")",")",";","if","(","!","lp",")","li","=","li","-","kZ","*","0.5",";","if","(","!","lq",")","lk","=","lk","-","kZ","*","0.5",";","lp","=","abs","(","li",")",">=","ll",";","lq","=","abs","(","lk",")",">=","ll",";","if","(","!","lp",")","lf",".","x","-=","le",".","x","*","2.0",";","if","(","!","lp",")","lf",".","y","-=","le",".","y","*","2.0",";","lr","=","(","!","lp",")","||","(","!","lq",")",";","if","(","!","lq",")","lg",".","x","+=","le",".","x","*","2.0",";","if","(","!","lq",")","lg",".","y","+=","le",".","y","*","2.0",";","if","(","lr",")","{","if","(","!","lp",")","li","=","iG","(","texture2D","(","u_color",",","lf",".","xy",")",")",";","if","(","!","lq",")","lk","=","iG","(","texture2D","(","u_color",",","lg",".","xy",")",")",";","if","(","!","lp",")","li","=","li","-","kZ","*","0.5",";","if","(","!","lq",")","lk","=","lk","-","kZ","*","0.5",";","lp","=","abs","(","li",")",">=","ll",";","lq","=","abs","(","lk",")",">=","ll",";","if","(","!","lp",")","lf",".","x","-=","le",".","x","*","2.0",";","if","(","!","lp",")","lf",".","y","-=","le",".","y","*","2.0",";","lr","=","(","!","lp",")","||","(","!","lq",")",";","if","(","!","lq",")","lg",".","x","+=","le",".","x","*","2.0",";","if","(","!","lq",")","lg",".","y","+=","le",".","y","*","2.0",";","if","(","lr",")","{","if","(","!","lp",")","li","=","iG","(","texture2D","(","u_color",",","lf",".","xy",")",")",";","if","(","!","lq",")","lk","=","iG","(","texture2D","(","u_color",",","lg",".","xy",")",")",";","if","(","!","lp",")","li","=","li","-","kZ","*","0.5",";","if","(","!","lq",")","lk","=","lk","-","kZ","*","0.5",";","lp","=","abs","(","li",")",">=","ll",";","lq","=","abs","(","lk",")",">=","ll",";","if","(","!","lp",")","lf",".","x","-=","le",".","x","*","4.0",";","if","(","!","lp",")","lf",".","y","-=","le",".","y","*","4.0",";","lr","=","(","!","lp",")","||","(","!","lq",")",";","if","(","!","lq",")","lg",".","x","+=","le",".","x","*","4.0",";","if","(","!","lq",")","lg",".","y","+=","le",".","y","*","4.0",";","if","(","lr",")","{","if","(","!","lp",")","li","=","iG","(","texture2D","(","u_color",",","lf",".","xy",")",")",";","if","(","!","lq",")","lk","=","iG","(","texture2D","(","u_color",",","lg",".","xy",")",")",";","if","(","!","lp",")","li","=","li","-","kZ","*","0.5",";","if","(","!","lq",")","lk","=","lk","-","kZ","*","0.5",";","lp","=","abs","(","li",")",">=","ll",";","lq","=","abs","(","lk",")",">=","ll",";","if","(","!","lp",")","lf",".","x","-=","le",".","x","*","2.0",";","if","(","!","lp",")","lf",".","y","-=","le",".","y","*","2.0",";","if","(","!","lq",")","lg",".","x","+=","le",".","x","*","2.0",";","if","(","!","lq",")","lg",".","y","+=","le",".","y","*","2.0",";","}","}","}","}","float","ls","=","jW",".","x","-","lf",".","x",";","float","lt","=","lg",".","x","-","jW",".","x",";","if","(","!","kU",")","ls","=","jW",".","y","-","lf",".","y",";","if","(","!","kU",")","lt","=","lg",".","y","-","jW",".","y",";","bool","lu","=","(","li","<","0.0",")","!=","lo",";","float","lv","=","(","lt","+","ls",")",";","bool","lw","=","(","lk","<","0.0",")","!=","lo",";","float","lx","=","1.0","/","lv",";","bool","ly","=","ls","<","lt",";","float","lz","=","min","(","ls",",","lt",")",";","bool","lA","=","ly","?","lu",":","lw",";","float","lB","=","ln","*","ln",";","float","lC","=","(","lz","*","(","-","lx",")",")","+","0.5",";","float","lD","=","lB","*","FXAA_QUALITY_SUBPIX",";","float","lE","=","lA","?","lC",":","0.0",";","float","lF","=","max","(","lE",",","lD",")",";","if","(","!","kU",")","jW",".","x","+=","lF","*","kT",";","if","(","kU",")","jW",".","y","+=","lF","*","kT",";","return","texture2D","(","u_color",",","jW",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","jV","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","lG","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","iz","=","vec2","(","0.0",",","0.0",")",";","vec2","iA","=","u_texel_size",";","vec4","iB","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iB","*","0.0875447373698",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0858112354248",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0808139781061",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0731235112908",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0635705267419",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0530985673112",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0426125984122",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0328565115809",";","iz","+=","iA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iz",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iz",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","iB",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_main",",","a",")",";","vec4","iA","=","texture2D","(","u_bloom",",","a",")",";","vec4","iB","=","iz",";","iB","+=","iA",";","gl_FragColor","=","vec4","(","iB",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/blur_depth.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","vec2","u_camera_range",";","uniform","float","u_blur_depth_edge_size",";","uniform","float","u_blur_depth_diff_threshold",";","varying","vec2","a",";","float","kd","(","in","vec2","kc",")","{","return","kb","(","u_depth",",","kc",",","u_camera_range",")",";","}","void","main","(",")","{","vec2","ke","=","u_texel_size",";","vec4","kf","=","texture2D","(","u_color",",","a",")",";","float","kg","=","kd","(","a",")",";","float","kh","=","kd","(","a","+","u_blur_depth_edge_size","*","ke",")",";","float","ki","=","kd","(","a","-","u_blur_depth_edge_size","*","ke",")",";","float","kj","=","abs","(","kg","-","kh",")",";","float","kk","=","abs","(","kg","-","ki",")",";","float","kl","=","max","(","kj",",","kk",")",";","if","(","kl",">","u_blur_depth_diff_threshold",")","{","gl_FragColor","=","kf",";","return",";","}","vec2","km","=","vec2","(","0.0",",","0.0",")",";","gl_FragColor","=","kf","*","0.2270270270",";","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.1945945946",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.1945945946",",","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.1216216216",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.1216216216",",","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.0540540541",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.0540540541",",","km","+=","ke",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","km",")","*","0.0162162162",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","km",")","*","0.0162162162",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_color",",","a",")",";","vec3","iA","=","iz",".","rgb",";","if","(","u_brightness","<","0.0",")","iA","=","iA","*","(","1.0","+","u_brightness",")",";","else","iA","=","iA","+","(","(","1.0","-","iA",")","*","u_brightness",")",";","iA","=","(","iA","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","iA","*=","u_exposure",";","vec3","iB","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","iC","=","dot","(","iA",",","iB",")",";","iA","=","mix","(","vec3","(","iC",")",",","iA",",","u_saturation",")",";","gl_FragColor","=","vec4","(","iA",",","iz",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cj","(","clamp","(","kb","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","kc","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","kd","=","kb","(","u_depth",",","a",",","u_camera_range",")",";","kd","*=","u_view_max_depth",";","float","ke",";","if","(","kd","<","u_dof_dist",")","ke","=","(","u_dof_dist","-","kd",")","/","u_dof_front",";","else","ke","=","(","kd","-","u_dof_dist",")","/","u_dof_rear",";","ke","=","clamp","(","ke",",","0.0",",","1.0",")",";","vec4","kf","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","kc",",","kf",",","ke",")",";","}","else","gl_FragColor","=","kc",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","iE","(","float","iz",",","float","iA",",","float","iB",")","{","vec2","iC","=","a","+","vec2","(","iz",",","iA",")","*","u_texel_size",";","vec4","iD","=","texture2D","(","u_sampler",",","iC",")","*","iB",";","return","cn","(","iD",")",";","}","void","main","(",")","{","float","iF","=","(","iE","(","-","1.0",",","-","1.0",",","-","1.0",")","+","iE","(","0.0",",","-","1.0",",","-","1.0",")","+","iE","(","1.0",",","-","1.0",",","-","1.0",")","+","iE","(","-","1.0",",","0.0",",","-","1.0",")","+","iE","(","0.0",",","0.0",",","8.0",")","+","iE","(","1.0",",","0.0",",","-","1.0",")","+","iE","(","-","1.0",",","1.0",",","-","1.0",")","+","iE","(","0.0",",","1.0",",","-","1.0",")","+","iE","(","1.0",",","1.0",",","-","1.0",")",")",";","iF","*=","1000.0",";","gl_FragColor","=","vec4","(","iF",",","iF",",","iF",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","iz",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","iA","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","iB","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","iC","=","iB",".","a","-","iA",".","a",";","if","(","iC","!=","0.0",")","{","float","iD","=","smoothstep","(","0.0",",","1.0",",","iB",".","a",")",";","if","(","iA",".","a","==","0.0",")","{","vec3","iE","=","u_glow_color",";","ed","(","iE",")",";","vec4","iF","=","vec4","(","clamp","(","iE",",","0.0",",","1.0",")",",","iD",")",";","gl_FragColor","=","mix","(","iz",",","iF",",","iD",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","vec3","u_sun_intensity",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kc",";","varying","vec2","kd",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","ke",";","void","main","(",")","{","vec3","kf","=","u_sun_intensity",";","vec2","kg","=","(","ke",".","xy","-","a",")",";","float","kh","=","length","(","kg",")",";","vec2","ki","=","u_radial_blur_step","*","kg","/","kh",";","float","kj","=","kh","/","u_radial_blur_step",";","ki","*=","min","(","kj",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","kj","=","max","(","kj",",","STEPS_PER_PASS",")",";","vec2","kk","=","a",";","float","kl","=","0.0",";","for","(","float","km","=","0.0",";","km","<","STEPS_PER_PASS",";","km","+=","1.0",")","{","if","(","km","<=","kj",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","kn","=","kb","(","u_input",",","kk",",","u_camera_range",")",";","kl","+=","(","1.0","-","pow","(","kh",",","0.3",")",")","*","step","(","0.9",",","kn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kl","+=","texture2D","(","u_input",",","kk",")",".","r",";"]}]}}]},{type:"textline",tokens:["}","kk","+=","ki",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ko","=","a","+","kd",";","float","kp","=","gT","(","vec2","(","2.5","*","(","ko",".","x",")",",","2.5","*","(","ko",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","gT","(","vec2","(","5.0","*","(","ko",".","x",")","-","0.66","*","u_time",",","5.0","*","(","ko",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","hx","(","vec2","(","7.5","*","(","ko",".","x",")","+","0.33","*","u_time",",","7.5","*","(","ko",".","y",")","-","0.33","*","u_time",")",")",";","kp","*=","clamp","(","1.2","-","sqrt","(","0.2","*","kh",")",",","0.0",",","1.0",")","*","kc",";","kl","=","max","(","kp",",","kl",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kl","/","STEPS_PER_PASS","*","clamp","(","kf",",","0.4",",","0.8",")",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","kc",";","varying","vec2","kd",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","ke",";","void","iG","(","in","vec4","iz",",","in","vec3","iA",",","out","vec3","iB",")","{","float","iC","=","iz",".","w","*","iA",".","x","+","iz",".","y","*","iA",".","z","-","iz",".","z","*","iA",".","y",";","float","iD","=","iz",".","w","*","iA",".","y","+","iz",".","z","*","iA",".","x","-","iz",".","x","*","iA",".","z",";","float","iE","=","iz",".","w","*","iA",".","z","+","iz",".","x","*","iA",".","y","-","iz",".","y","*","iA",".","x",";","float","iF","=","-","iz",".","x","*","iA",".","x","-","iz",".","y","*","iA",".","y","-","iz",".","z","*","iA",".","z",";","iB",".","x","=","iC","*","iz",".","w","-","iF","*","iz",".","x","-","iD","*","iz",".","z","+","iE","*","iz",".","y",";","iB",".","y","=","iD","*","iz",".","w","-","iF","*","iz",".","y","-","iE","*","iz",".","x","+","iC","*","iz",".","z",";","iB",".","z","=","iE","*","iz",".","w","-","iF","*","iz",".","z","-","iC","*","iz",".","y","+","iD","*","iz",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","iH","=","normalize","(","u_sun_direction",")",";","ke","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","iH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","kc","=","1.0",";","vec3","iI","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","iJ",";","iG","(","u_camera_quat",",","iI",",","iJ",")",";","iJ","=","normalize","(","iJ",")",";","float","iK","=","dot","(","iJ",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","iL","=","atan","(","iJ",".","x",",","iJ",".","z",")",";","kd","=","vec2","(","-","iL",",","acos","(","iK",")",")",";","}","else","{","kc","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["ke",".","x","/=","ke",".","w",";","ke",".","y","/=","ke",".","w",";","ke",".","x","=","0.5","*","(","ke",".","x","+","1.0",")",";","ke",".","y","=","0.5","*","(","ke",".","y","+","1.0",")",";","ke","+=","99999.0","*","step","(","ke",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_main",",","a",")",";","eb","(","iz",".","rgb",")",";","vec3","iA","=","iz",".","rgb","+","u_god_rays_intensity","*","(","texture2D","(","u_god_rays",",","a",")",")",".","rgb",";","ed","(","iA",")",";","gl_FragColor",".","rgb","=","iA",";","gl_FragColor",".","a","=","iz",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_color",",","a",")","*","0.38026",";","iz","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","iz","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","iz","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","iz","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","iz","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","iz","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","iz","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","iz","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","iz",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_input",",","a",")",";","float","iA","=","dot","(","iz",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","iA",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","iz",";","float","iA","=","0.0",";","for","(","float","iB","=","0.025",";","iB","<","1.0",";","iB","+=","0.05",")","for","(","float","iC","=","0.025",";","iC","<","1.0",";","iC","+=","0.05",")","{","iz","=","max","(","texture2D","(","u_input",",","vec2","(","iB",",","iC",")",")",".","r",",","0.01",")",";","iA","+=","log","(","iz",")",";","}","float","iD","=","exp","(","iA","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","iD",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","kf",";","void","main","(",")","{","float","kg","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","kh","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","ki","=","texture2D","(","u_main",",","a",")",";","float","kj","=","kh","/","kg",";","float","kk","=","u_bloom_edge_lum",";","gl_FragColor","=","ki","*","max","(","kj","-","kk",",","0.0",")","*","kf",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","kf",";","const","vec3","iz","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","iH","(","in","vec4","iA",",","in","vec3","iB",",","out","vec3","iC",")","{","float","iD","=","iA",".","w","*","iB",".","x","+","iA",".","y","*","iB",".","z","-","iA",".","z","*","iB",".","y",";","float","iE","=","iA",".","w","*","iB",".","y","+","iA",".","z","*","iB",".","x","-","iA",".","x","*","iB",".","z",";","float","iF","=","iA",".","w","*","iB",".","z","+","iA",".","x","*","iB",".","y","-","iA",".","y","*","iB",".","x",";","float","iG","=","-","iA",".","x","*","iB",".","x","-","iA",".","y","*","iB",".","y","-","iA",".","z","*","iB",".","z",";","iC",".","x","=","iD","*","iA",".","w","-","iG","*","iA",".","x","-","iE","*","iA",".","z","+","iF","*","iA",".","y",";","iC",".","y","=","iE","*","iA",".","w","-","iG","*","iA",".","y","-","iF","*","iA",".","x","+","iD","*","iA",".","z",";","iC",".","z","=","iF","*","iA",".","w","-","iG","*","iA",".","z","-","iD","*","iA",".","y","+","iE","*","iA",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","iI",";","iH","(","u_camera_quat",",","iz",",","iI",")",";","kf","=","dot","(","-","iI",",","u_sun_direction",")","*","u_bloom_key",";","kf","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","iz","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","iA","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","iz","-","iA",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","iz","+","u_motion_blur_exp","*","iA",";","}","else","{","gl_FragColor","=","iz",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iz","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","iz",".","r","+","iz",".","g","+","iz",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iA","=","vec2","(","0.0",",","0.0",")",";","vec2","iB","=","u_texel_size",";","vec4","iC",";","iC","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iC","*","0.2270270270",";","iA","+=","iB",";","iC","=","texture2D","(","u_color",",","a","+","iA",")",";","gl_FragColor","+=","iC","*","0.1945945946",";","iC","=","texture2D","(","u_color",",","a","-","iA",")",";","gl_FragColor","+=","iC","*","0.1945945946",";","iA","+=","iB",";","iC","=","texture2D","(","u_color",",","a","+","iA",")",";","gl_FragColor","+=","iC","*","0.1216216216",";","iC","=","texture2D","(","u_color",",","a","-","iA",")",";","gl_FragColor","+=","iC","*","0.1216216216",";","iA","+=","iB",";","iC","=","texture2D","(","u_color",",","a","+","iA",")",";","gl_FragColor","+=","iC","*","0.0540540541",";","iC","=","texture2D","(","u_color",",","a","-","iA",")",";","gl_FragColor","+=","iC","*","0.0540540541",";","iA","+=","iB",";","iC","=","texture2D","(","u_color",",","a","+","iA",")",";","gl_FragColor","+=","iC","*","0.0162162162",";","iC","=","texture2D","(","u_color",",","a","-","iA",")",";","gl_FragColor","+=","iC","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iB","=","u_texel_size",";","vec4","iC","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iC",";","if","(","iC",".","a","==","0.0",")","{","iC","=","texture2D","(","u_color",",","a","+","iB",")",";","if","(","iC",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","iC",".","a",")",";","else","{","iC","=","texture2D","(","u_color",",","a","-","iB",")",";","if","(","iC",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","iC",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg","[","3","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","kh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"textline",tokens:["vec3","ko","(","vec2","ki",",","vec4","kj","[","3","]",",","sampler2D","kk",")","{","float","kl","=","texture2D","(","kk",",","ki",")",".","r",";","float","km","=","texture2D","(","kk",",","kj","[","0","]",".","xy",")",".","r",";","float","kn","=","texture2D","(","kk",",","kj","[","0","]",".","zw",")",".","r",";","return","vec3","(","kl",",","km",",","kn",")",";","}","vec2","kv","(","vec2","kp",",","vec4","kq","[","3","]",",","sampler2D","kr",")","{","vec3","ks","=","ko","(","kp",",","kq",",","kr",")",";","vec2","kt","=","abs","(","ks",".","xx","-","ks",".","yz",")",";","vec2","ku","=","step","(","SMAA_PREDICATION_THRESHOLD",",","kt",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","ku",")",";","}","void","kz","(","bvec2","kw",",","inout","vec2","kx",",","vec2","ky",")","{","if","(","kw",".","x",")","kx",".","x","=","ky",".","x",";","if","(","kw",".","y",")","kx",".","y","=","ky",".","y",";","}","void","kz","(","bvec4","kA",",","inout","vec4","kB",",","vec4","kC",")","{","kz","(","kA",".","xy",",","kB",".","xy",",","kC",".","xy",")",";","kz","(","kA",".","zw",",","kB",".","zw",",","kC",".","zw",")",";","}","vec2","kE","(","vec2","kD",")","{","return","sign","(","kD",")","*","floor","(","abs","(","kD",")","+",".5",")",";","}","vec4","kE","(","vec4","kF",")","{","return","sign","(","kF",")","*","floor","(","abs","(","kF",")","+",".5",")",";","}","vec2","kX","(","vec2","kG",",","vec4","kH","[","3","]",",","sampler2D","kI"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","kJ"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kK","=","kv","(","kG",",","kH",",","kJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","kK","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","kL","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","kM","=","dot","(","texture2D","(","kI",",","kG",")",".","rgb",",","kL",")",";","float","kN","=","dot","(","texture2D","(","kI",",","kH","[","0","]",".","xy",")",".","rgb",",","kL",")",";","float","kO","=","dot","(","texture2D","(","kI",",","kH","[","0","]",".","zw",")",".","rgb",",","kL",")",";","vec4","kP",";","kP",".","xy","=","abs","(","kM","-","vec2","(","kN",",","kO",")",")",";","vec2","kQ","=","step","(","kK",",","kP",".","xy",")",";","if","(","dot","(","kQ",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","kR","=","dot","(","texture2D","(","kI",",","kH","[","1","]",".","xy",")",".","rgb",",","kL",")",";","float","kS","=","dot","(","texture2D","(","kI",",","kH","[","1","]",".","zw",")",".","rgb",",","kL",")",";","kP",".","zw","=","abs","(","kM","-","vec2","(","kR",",","kS",")",")",";","vec2","kT","=","max","(","kP",".","xy",",","kP",".","zw",")",";","float","kU","=","dot","(","texture2D","(","kI",",","kH","[","2","]",".","xy",")",".","rgb",",","kL",")",";","float","kV","=","dot","(","texture2D","(","kI",",","kH","[","2","]",".","zw",")",".","rgb",",","kL",")",";","kP",".","zw","=","abs","(","vec2","(","kN",",","kO",")","-","vec2","(","kU",",","kV",")",")",";","kT","=","max","(","kT",".","xy",",","kP",".","zw",")",";","float","kW","=","max","(","kT",".","x",",","kT",".","y",")",";","kQ",".","xy","*=","step","(","kW",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","kP",".","xy",")",";","return","kQ",";","}"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kZ","(","vec2","kY",")","{","kY",".","r","=","kY",".","r","*","abs","(","5.0","*","kY",".","r","-","5.0","*","0.75",")",";","return","kE","(","kY",")",";","}","vec4","kZ","(","vec4","k_",")","{","k_",".","rb","=","k_",".","rb","*","abs","(","5.0","*","k_",".","rb","-","5.0","*","0.75",")",";","return","kE","(","k_",")",";","}","vec2","lh","(","sampler2D","la",",","vec2","lb",",","vec2","lc",",","out","vec2","ld",")","{","vec4","le","=","vec4","(","lb",",","-","1.0",",","1.0",")",";","vec3","lf","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","lg","=","0",";","lg","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","lg","++",")","{","if","(","le",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","le",".","w",">","0.9",")","{","le",".","xyz","+=","lf","*","vec3","(","lc",",","1.0",")",";","ld","=","texture2D","(","la",",","le",".","xy",",","0.0",")",".","rg",";","le",".","w","=","dot","(","ld",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","le",".","zw",";","}","vec2","lp","(","sampler2D","li",",","vec2","lj",",","vec2","lk",",","out","vec2","ll",")","{","vec4","lm","=","vec4","(","lj",",","-","1.0",",","1.0",")",";","lm",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","ln","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","lo","=","0",";","lo","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","lo","++",")","{","if","(","lm",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","lm",".","w",">","0.9",")","{","lm",".","xyz","=","ln","*","vec3","(","lk",",","1.0",")","+","lm",".","xyz",";","ll","=","texture2D","(","li",",","lm",".","xy",",","0.0",")",".","rg",";","ll","=","kZ","(","ll",")",";","lm",".","w","=","dot","(","ll",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","lm",".","zw",";","}","vec2","lv","(","sampler2D","lq",",","vec2","lr",",","vec2","ls",",","float","lt",")","{","vec2","lu","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","ls","+","lr",";","lu","=","SMAA_AREATEX_PIXEL_SIZE","*","lu","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","lu",".","x","+=","0.5",";","lu",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","lt",";","return","texture2D","(","lq",",","lu",",","0.0",")",".","rg",";","}","vec2","lK","(","sampler2D","lw",",","sampler2D","lx",",","vec2","ly",",","vec2","lz",",","vec4","lA",")","{","vec2","lB","=","vec2","(","0.0",",","0.0",")",";","vec4","lC",";","vec2","lD",";","if","(","lz",".","r",">","0.0",")","{","lC",".","xz","=","lh","(","lw",",","ly",",","vec2","(","-","1.0",",","1.0",")",",","lD",")",";","lC",".","x","+=","float","(","lD",".","y",">","0.9",")",";","}","else","lC",".","xz","=","vec2","(","0.0",",","0.0",")",";","lC",".","yw","=","lh","(","lw",",","ly",",","vec2","(","1.0",",","-","1.0",")",",","lD",")",";","if","(","lC",".","x","+","lC",".","y",">","2.0",")","{","vec4","lE","=","vec4","(","-","lC",".","x","+","0.25",",","lC",".","x",",","lC",".","y",",","-","lC",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","ly",".","xyxy",";","vec4","lF",";","lF",".","xy","=","texture2D","(","lw",",","lE",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","lF",".","zw","=","texture2D","(","lw",",","lE",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","lF",".","yxwz","=","kZ","(","lF",".","xyzw",")",";","vec2","lG","=","vec2","(","2.0",",","2.0",")","*","lF",".","xz","+","lF",".","yw",";","kz","(","bvec2","(","step","(","0.9",",","lC",".","zw",")",")",",","lG",",","vec2","(","0.0",",","0.0",")",")",";","lB","+=","lv","(","lx",",","lC",".","xy",",","lG",",","lA",".","z",")",";","}","lC",".","xz","=","lp","(","lw",",","ly",",","vec2","(","-","1",",","-","1",")",",","lD",")",";","if","(","texture2D","(","lw",",","ly","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","lC",".","yw","=","lp","(","lw",",","ly",",","vec2","(","1",",","1",")",",","lD",")",";","lC",".","y","+=","float","(","lD",".","y",">","0.9",")",";","}","else","lC",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","lC",".","x","+","lC",".","y",">","2.0",")","{","vec4","lH","=","vec4","(","-","lC",".","x",",","-","lC",".","x",",","lC",".","y",",","lC",".","y",")","*","u_texel_size",".","xyxy","+","ly",".","xyxy",";","vec4","lI",";","lI",".","x","=","texture2D","(","lw",",","lH",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","lI",".","y","=","texture2D","(","lw",",","lH",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","lI",".","zw","=","texture2D","(","lw",",","lH",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","lJ","=","vec2","(","2.0",",","2.0",")","*","lI",".","xz","+","lI",".","yw",";","kz","(","bvec2","(","step","(","0.9",",","lC",".","zw",")",")",",","lJ",",","vec2","(","0",",","0",")",")",";","lB","+=","lv","(","lx",",","lC",".","xy",",","lJ",",","lA",".","w",")",".","gr",";","}","return","lB",";","}"]}]}}]},{type:"textline",tokens:["float","lQ","(","sampler2D","lL",",","vec2","lM",",","float","lN",")","{","vec2","lO","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","lP","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","lN",",","1.0",")",";","lO","+=","vec2","(","-","1.0",",","1.0",")",";","lP","+=","vec2","(","0.5",",","-","0.5",")",";","lO","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","lP","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","lL",",","lO","*","lM","+","lP",",","0.0",")",".","r",";","}","float","lY","(","sampler2D","lR",",","sampler2D","lS",",","vec2","lT",",","float","lU",")","{","vec2","lV","=","vec2","(","0.0",",","1.0",")",";","for","(","int","lW","=","0",";","lW","<","SMAA_MAX_SEARCH_STEPS",";","lW","++",")","{","if","(","lT",".","x",">","lU","&&","lV",".","g",">","0.8281","&&","lV",".","r","==","0.0",")","{","lV","=","texture2D","(","lR",",","lT",",","0.0",")",".","rg",";","lT","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","lT",";","}","}","float","lX","=","-","(","255.0","/","127.0",")","*","lQ","(","lS",",","lV",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","lX","+","lT",".","x",";","}","float","mf","(","sampler2D","lZ",",","sampler2D","l_",",","vec2","ma",",","float","mb",")","{","vec2","mc","=","vec2","(","0.0",",","1.0",")",";","for","(","int","md","=","0",";","md","<","SMAA_MAX_SEARCH_STEPS",";","md","++",")","{","if","(","ma",".","x","<","mb","&&","mc",".","g",">","0.8281","&&","mc",".","r","==","0.0",")","{","mc","=","texture2D","(","lZ",",","ma",",","0.0",")",".","rg",";","ma","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","ma",";","}","}","float","me","=","-","(","255.0","/","127.0",")","*","lQ","(","l_",",","mc",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","me","+","ma",".","x",";","}","float","mn","(","sampler2D","mg",",","sampler2D","mh",",","vec2","mi",",","float","mj",")","{","vec2","mk","=","vec2","(","1.0",",","0.0",")",";","for","(","int","ml","=","0",";","ml","<","SMAA_MAX_SEARCH_STEPS",";","ml","++",")","{","if","(","mi",".","y",">","mj","&&","mk",".","r",">","0.8281","&&","mk",".","g","==","0.0",")","{","mk","=","texture2D","(","mg",",","mi",",","0.0",")",".","rg",";","mi","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","mi",";","}","}","float","mm","=","-","(","255.0","/","127.0",")","*","lQ","(","mh",",","mk",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","mm","+","mi",".","y",";","}","float","mv","(","sampler2D","mo",",","sampler2D","mp",",","vec2","mq",",","float","mr",")","{","vec2","ms","=","vec2","(","1.0",",","0.0",")",";","for","(","int","mt","=","0",";","mt","<","SMAA_MAX_SEARCH_STEPS",";","mt","++",")","{","if","(","mq",".","y","<","mr","&&","ms",".","r",">","0.8281","&&","ms",".","g","==","0.0",")","{","ms","=","texture2D","(","mo",",","mq",",","0.0",")",".","rg",";","mq","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","mq",";","}","}","float","mu","=","-","(","255.0","/","127.0",")","*","lQ","(","mp",",","ms",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","mu","+","mq",".","y",";","}","vec2","mC","(","sampler2D","mw",",","vec2","mx",",","float","my",",","float","mz",",","float","mA",")","{","vec2","mB","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","kE","(","4.0","*","vec2","(","my",",","mz",")",")","+","mx",";","mB","=","SMAA_AREATEX_PIXEL_SIZE","*","mB","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","mB",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","mA","+","mB",".","y",";","return","texture2D","(","mw",",","mB",",","0.0",")",".","rg",";","}","void","mK","(","sampler2D","mD",",","inout","vec2","mE",",","vec4","mF",",","vec2","mG",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mH","=","step","(","mG",".","xy",",","mG",".","yx",")",";","vec2","mI","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","mH",";","mI","/=","mH",".","x","+","mH",".","y",";","vec2","mJ","=","vec2","(","1.0",",","1.0",")",";","mJ",".","x","-=","mI",".","x","*","texture2D","(","mD",",","mF",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","mJ",".","x","-=","mI",".","y","*","texture2D","(","mD",",","mF",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","mJ",".","y","-=","mI",".","x","*","texture2D","(","mD",",","mF",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","mJ",".","y","-=","mI",".","y","*","texture2D","(","mD",",","mF",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","mE","*=","clamp","(","mJ",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","mS","(","sampler2D","mL",",","inout","vec2","mM",",","vec4","mN",",","vec2","mO",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mP","=","step","(","mO",".","xy",",","mO",".","yx",")",";","vec2","mQ","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","mP",";","mQ","/=","mP",".","x","+","mP",".","y",";","vec2","mR","=","vec2","(","1.0",",","1.0",")",";","mR",".","x","-=","mQ",".","x","*","texture2D","(","mL",",","mN",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","mR",".","x","-=","mQ",".","y","*","texture2D","(","mL",",","mN",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","mR",".","y","-=","mQ",".","x","*","texture2D","(","mL",",","mN",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","mR",".","y","-=","mQ",".","y","*","texture2D","(","mL",",","mN",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","mM","*=","clamp","(","mR",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","vec4","nl","(","vec2","mT",",","vec2","mU",",","vec4","mV","[","3","]",",","sampler2D","mW",",","sampler2D","mX",",","sampler2D","mY",",","vec4","mZ",")","{","vec4","m_","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","na","=","texture2D","(","mW",",","mT",")",".","rg",";","if","(","na",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["m_",".","rg","=","lK","(","mW",",","mX",",","mT",",","na",",","mZ",")",";","if","(","m_",".","r","==","-","m_",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","nb",";","vec3","nc",";","nc",".","x","=","lY","(","mW",",","mY",",","mV","[","0","]",".","xy",",","mV","[","2","]",".","x",")",";","nc",".","y","=","mV","[","1","]",".","y",";","nb",".","x","=","nc",".","x",";","float","nd","=","texture2D","(","mW",",","nc",".","xy",",","0.0",")",".","r",";","nc",".","z","=","mf","(","mW",",","mY",",","mV","[","0","]",".","zw",",","mV","[","2","]",".","y",")",";","nb",".","y","=","nc",".","z",";","nb","=","abs","(","kE","(","nb","/","u_texel_size",".","xx","-","mU",".","xx",")",")",";","vec2","ne","=","sqrt","(","nb",")",";","float","nf","=","texture2D","(","mW",",","nc",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","m_",".","rg","=","mC","(","mX",",","ne",",","nd",",","nf",",","mZ",".","y",")",";","nc",".","y","=","mT",".","y",";","mK","(","mW",",","m_",".","rg",",","nc",".","xyzy",",","nb",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","na",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","na",".","r",">","0.0",")","{","vec2","ng",";","vec3","nh",";","nh",".","y","=","mn","(","mW",",","mY",",","mV","[","1","]",".","xy",",","mV","[","2","]",".","z",")",";","nh",".","x","=","mV","[","0","]",".","x",";","ng",".","x","=","nh",".","y",";","float","ni","=","texture2D","(","mW",",","nh",".","xy",",","0.0",")",".","g",";","nh",".","z","=","mv","(","mW",",","mY",",","mV","[","1","]",".","zw",",","mV","[","2","]",".","w",")",";","ng",".","y","=","nh",".","z",";","ng","=","abs","(","kE","(","ng","/","u_texel_size",".","yy","-","mU",".","yy",")",")",";","vec2","nj","=","sqrt","(","ng",")",";","float","nk","=","texture2D","(","mW",",","nh",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","m_",".","ba","=","mC","(","mX",",","nj",",","ni",",","nk",",","mZ",".","x",")",";","nh",".","x","=","mT",".","x",";","mS","(","mW",",","m_",".","ba",",","nh",".","xyxz",",","ng",")",";","}","return","m_",";","}","vec4","nA","(","vec2","nm",",","vec4","nn",",","sampler2D","no",",","sampler2D","np"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nq"]}]}}]},{type:"textline",tokens:[")","{","vec4","nr",";","nr",".","x","=","texture2D","(","np",",","nn",".","xy",")",".","a",";","nr",".","y","=","texture2D","(","np",",","nn",".","zw",")",".","g",";","nr",".","wz","=","texture2D","(","np",",","nm",")",".","xz",";","if","(","dot","(","nr",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","ns","=","texture2D","(","no",",","nm",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nt","=","2.0","*","texture2D","(","nq",",","nm",")",".","rg","-","1.0",";","if","(","ns",".","a","!=","0.0",")","ns",".","a","=","sqrt","(","5.0","*","length","(","nt",")",")",";"]}]}}]},{type:"textline",tokens:["return","ns",";","}","else","{","bool","nu","=","max","(","nr",".","x",",","nr",".","z",")",">","max","(","nr",".","y",",","nr",".","w",")",";","vec4","nv","=","vec4","(","0.0",",","nr",".","y",",","0.0",",","nr",".","w",")",";","vec2","nw","=","nr",".","yw",";","kz","(","bvec4","(","nu",",","nu",",","nu",",","nu",")",",","nv",",","vec4","(","nr",".","x",",","0.0",",","nr",".","z",",","0.0",")",")",";","kz","(","bvec2","(","nu",",","nu",")",",","nw",",","nr",".","xz",")",";","nw","/=","dot","(","nw",",","vec2","(","1.0",",","1.0",")",")",";","vec4","nx","=","nv","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","nm",".","xyxy",";","vec4","ny","=","nw",".","x","*","texture2D","(","no",",","nx",".","xy",",","0.0",")",";","ny","+=","nw",".","y","*","texture2D","(","no",",","nx",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nz","=","nw",".","x","*","(","2.0","*","texture2D","(","nq",",","nx",".","xy",",","0.0",")",".","rg","-","1.0",")",";","nz","+=","nw",".","y","*","(","2.0","*","texture2D","(","nq",",","nx",".","zw",",","0.0",")",".","rg","-","1.0",")",";","if","(","ny",".","a","!=","0.0",")","ny",".","a","=","sqrt","(","5.0","*","length","(","nz",")",")",";"]}]}}]},{type:"textline",tokens:["return","ny",";","}","}","vec4","nK","(","vec2","nB",",","sampler2D","nC",",","sampler2D","nD"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nE"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nF","=","texture2D","(","nC",",","nB",")",";","vec4","nG","=","texture2D","(","nD",",","nB",")",";","float","nH","=","abs","(","nF",".","a","*","nF",".","a","-","nG",".","a","*","nG",".","a",")","/","5.0",";","float","nI","=","0.5","*","clamp","(","1.0","-","sqrt","(","nH",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","nJ","=","mix","(","nF",",","nG",",","nI",")",";","nJ",".","a","=","1.0",";","return","nJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nF","=","texture2D","(","nC",",","nB",")",";","vec4","nG","=","texture2D","(","nD",",","nB",")",";","return","mix","(","nF",",","nG",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nL","=","vec4","(","kX","(","a",",","kg",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nL","=","nl","(","a",",","kh",",","kg",",","u_color",",","u_area_tex",",","u_search_tex",",","vec4","(","0.0",")",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nL","=","nA","(","a",",","kg",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nL","=","vec4","(","nK","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nL","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","nL",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kg","[","3","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","kh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"textline",tokens:["void","iB","(","vec2","iz",",","out","vec4","iA","[","3","]",")","{","iA","[","0","]","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","iz",".","xyxy",";","iA","[","1","]","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","iz",".","xyxy",";","iA","[","2","]","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","iz",".","xyxy",";","}","void","iF","(","vec2","iC",",","out","vec2","iD",",","out","vec4","iE","[","3","]",")","{","iD","=","iC","/","u_texel_size",";","iE","[","0","]","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","iC",".","xyxy",";","iE","[","1","]","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","iC",".","xyxy",";","iE","[","2","]","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","iE","[","0","]",".","xz",",","iE","[","1","]",".","yw",")",";","}","void","iI","(","vec2","iG",",","out","vec4","iH",")","{","iH","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","iG",".","xyxy",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["iB","(","a",",","kg",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["iF","(","a",",","kh",",","kg",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["iI","(","a",",","kg",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"define",name:"SSAO_QUALITY_16",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["2"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","float","u_view_max_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_dithering_amount",";","uniform","float","u_ssao_gauss_center",";","uniform","float","u_ssao_gauss_width_square",";","uniform","float","u_ssao_gauss_width_left_square",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","vec2","kn","(","vec2","ki",")","{","float","kj","=","dot","(","ki",",","vec2","(","12.9898",",","78.233",")",")",";","float","kk","=","dot","(","ki",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","kl","=","fract","(","sin","(","kj",")","*","43758.5453",")","*","2.0","-","1.0",";","float","km","=","fract","(","sin","(","kk",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","kl",",","km",")",";","}","float","kp","(","in","vec2","ko",")","{","return","kb","(","u_depth",",","ko",",","u_camera_range",")",";","}","float","kx","(","in","float","kq",",","in","float","kr",",","inout","int","ks",")","{","float","kt","=","u_ssao_gauss_width_square",";","float","ku","=","(","kq","-","kr",")","*","100.0",";","if","(","ku","<","u_ssao_gauss_center",")","kt","=","u_ssao_gauss_width_left_square",";","else","ks","=","1",";","float","kv","=","ku","-","u_ssao_gauss_center",";","float","kw","=","exp","(","-","2.0","*","kv","*","kv","/","kt",")",";","return","kw",";","}","float","kG","(","float","ky",",","vec2","kz",")","{","float","kA","=","0.0",";","float","kB","=","0.0",";","float","kC","=","max","(","1.0",",","u_view_max_depth","/","100.0",")",";","ky","*=","kC",";","kz","/=","ky",";","vec2","kD","=","a","+","kz",";","vec2","kE","=","a","-","kz",";","int","kF","=","0",";","kA","=","kx","(","ky",",","kC","*","kp","(","kD",")",",","kF",")",";","if","(","kF",">","0","||","kD",".","y","<","0.0","||","kD",".","y",">","1.0","||","kD",".","x","<","0.0","||","kD",".","x",">","1.0",")","{","kB","=","kx","(","kC","*","kp","(","kE",")",",","ky",",","kF",")",";","kA","+=","(","1.0","-","kA",")","*","kB",";","}","return","kA",";","}","void","main","(",")","{","vec2","kH","=","kn","(","a",")","*","u_ssao_dithering_amount",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["kH","*=","1.5",";"]}]}}]},{type:"textline",tokens:["float","kI","=","kp","(","a",")",";","float","kJ","=","0.0",";","vec2","kK","=","u_texel_size","*","0.5",";","for","(","int","kL","=","0",";","kL","<","4",";","kL","++",")","{"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","kL","==","0","||","kL","==","2",")","{"]}]}}]},{type:"textline",tokens:["kJ","+=","kG","(","kI",",","kK",")",";","kJ","+=","kG","(","kI",",","vec2","(","kK",".","x",",","-","kK",".","y",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","-","kK",".","x",",","kK",".","y",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","-","kK",".","x",",","-","kK",".","y",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","if","(","kL","==","1","||","kL","==","3",")","{"]}]}}]},{type:"textline",tokens:["kJ","+=","kG","(","kI",",","vec2","(","kK",".","x","*","1.2",",","0.0",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","-","kK",".","x","*","1.2",",","0.0",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","0.0",",","kK",".","y","*","1.2",")",")",";","kJ","+=","kG","(","kI",",","vec2","(","0.0",",","-","kK",".","y","*","1.2",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["kK","+=","kH",";","kK","*=","u_ssao_radius_increase",";","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","1.0","-","kJ","/","16.0",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","1.0","-","kJ","/","32.0",";"]}]}}]},{type:"textline",tokens:["float","kM","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","kI",")",";","kJ","=","(","1.0","-","kM",")","+","kJ","*","kM",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","1.0",";"]}]}}]},{type:"textline",tokens:["float","kN","=","texture2D","(","u_color",",","a",")",".","r",";","gl_FragColor","=","vec4","(","kN",",","kJ",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","iz","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","iA","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","iz","-","1.0",",","1.0",")",";","vec4","iB","=","u_view_proj_inverse","*","iA",";","vec4","iC","=","iB","/","iB",".","w",";","vec4","iD","=","iA",";","vec4","iE","=","u_view_proj_prev","*","iC",";","iE","/=","iE",".","w",";","vec2","iF","=","(","iD",".","xy","-","iE",".","xy",")","/","2.0",";","gl_FragColor","=","vec4","(","iF","/","2.0","+","0.5",",","0.0",",","1.0",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","b","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","e","(","float","c",",","float","d",")","{","return","abs","(","c","-","d",")","<","EPSILON",";","}","bool","h","(","vec3","f",",","vec3","g",")","{","return","any","(","lessThan","(","abs","(","f","-","g",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","k","(","in","vec4","i",",","in","vec3","j",")","{","return","j","+","2.0","*","cross","(","i",".","xyz",",","cross","(","i",".","xyz",",","j",")","+","i",".","w","*","j",")",";","}","mat4","l","(",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","n","(","float","m",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","cos","(","m",")",",","sin","(","m",")",",","0.0",",","0.0",",","-","sin","(","m",")",",","cos","(","m",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","p","(","float","o",")","{","return","mat4","(","cos","(","o",")",",","0.0",",","-","sin","(","o",")",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","sin","(","o",")",",","0.0",",","cos","(","o",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","r","(","float","q",")","{","return","mat4","(","cos","(","q",")",",","sin","(","q",")",",","0.0",",","0.0",",","-","sin","(","q",")",",","cos","(","q",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","b","t","(","in","b","s",")","{","return","b","(","s",".","a",",","s",".","b",",","normalize","(","s",".","c",")",",","normalize","(","s",".","d",")",",","normalize","(","s",".","e",")",",","s",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","u","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","A","(","vec3","v",",","mat4","w",")","{","vec3","x","=","vec3","(","w","[","0","]","[","0","]",",","w","[","1","]","[","0","]",",","w","[","2","]","[","0","]",")",";","vec3","y","=","vec3","(","w","[","0","]","[","1","]",",","w","[","1","]","[","1","]",",","w","[","2","]","[","1","]",")",";","vec3","z","=","vec3","(","w","[","0","]","[","2","]",",","w","[","1","]","[","2","]",",","w","[","2","]","[","2","]",")",";","y","=","cross","(","z",",","x",")",";","return","mat4","(","vec4","(","x",",","0.0",")",",","vec4","(","y",",","0.0",")",",","vec4","(","z",",","0.0",")",",","vec4","(","v",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","G","(","vec3","B",",","vec3","C",")","{","vec3","D","=","B","-","C",";","D",".","y","=","0.0",";","D","=","normalize","(","D",")",";","vec3","E","=","normalize","(","cross","(","u",",","D",")",")",";","vec3","F","=","normalize","(","cross","(","D",",","E",")",")",";","return","mat4","(","vec4","(","E",",","0.0",")",",","vec4","(","F",",","0.0",")",",","vec4","(","D",",","0.0",")",",","vec4","(","C",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","R","(","in","vec3","H",",","float","I",",","float","J",",","float","L",",","vec3","M",")","{","float","N","=","fract","(","length","(","M",")","/","0.17",")",";","float","O","=","L","+","N","/","10.0",";","float","P","=","N","/","L",";","H","*=","1.0","+","0.5","*","sin","(","I",")",";","float","Q","=","length","(","H",")","*","J","*","sin","(","2.0","*","3.14","*","I","*","O","+","P",")",";","return","r","(","Q",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ab","(","in","vec3","S",",","in","vec3","T",",","in","mat4","U",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","V","=","A","(","T",",","U",")",";"]}]}},{type:"elif",expression:["HAIR_BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","W","=","fract","(","(","T",".","x","*","1.43","+","T",".","y","*","0.123","+","T",".","z","*","6.1",")",")",";","float","X","=","2.0","*","M_PI","*","W",";","vec3","Y","=","normalize","(","vec3","(","U","[","0","]","[","2","]",",","0.0",",","U","[","2","]","[","2","]",")",")",";","float","Z","=","acos","(","Y","[","2","]",")",";","if","(","Y","[","0","]","<","0.0",")","Z","=","2.0","*","M_PI","-","Z",";","float","_","=","Z","-","X",";","if","(","_","<","0.0",")","_","=","2.0","*","M_PI","+","_",";","float","aa","=","X",";","if","(","_","<=","MAX_BILLBOARD_ANGLE",")","aa","+=","_",";","else","if","(","_","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","aa","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","_","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","_","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","aa","+=","_","-","M_PI",";","else","if","(","_","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","aa","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","_","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","aa","+=","_","-","2.0","*","M_PI",";","mat4","V","=","p","(","aa",")",";","V","[","3","]","=","vec4","(","T",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","V","=","G","(","S",",","T",")",";"]}]}}]},{type:"textline",tokens:["return","V",";","}","b","ai","(","in","vec3","ac",",","in","vec3","ad",",","in","vec3","ae",",","in","vec3","af",",","in","vec3","ag",",","in","mat4","ah",")","{","ac","=","(","ah","*","vec4","(","ac",",","1.0",")",")",".","xyz",";","ad","=","(","ah","*","vec4","(","ad",",","1.0",")",")",".","xyz",";","ae","=","(","ah","*","vec4","(","ae",",","0.0",")",")",".","xyz",";","af","=","(","ah","*","vec4","(","af",",","0.0",")",")",".","xyz",";","ag","=","(","ah","*","vec4","(","ag",",","0.0",")",")",".","xyz",";","return","t","(","b","(","ac",",","ad",",","ae",",","af",",","ag",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","al","(","vec2","aj",",","vec3","ak",")","{","return","(","aj","+","0.5",")","*","ak",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","au","(","in","vec4","am",",","in","vec4","an",",","in","float","ao",")","{","float","ap","=","am","[","0","]","*","an","[","0","]","+","am","[","1","]","*","an","[","1","]","+","am","[","2","]","*","an","[","2","]","+","am","[","3","]","*","an","[","3","]",";","if","(","ap","<","0.0",")","{","an","*=","-","1.0",";","ap","=","-","ap",";","}","if","(","abs","(","ap",")",">=","1.0",")","return","am",";","float","aq","=","acos","(","ap",")",";","float","ar","=","sqrt","(","1.0","-","ap","*","ap",")",";","if","(","abs","(","ar",")","<","0.001",")","return","vec4","(","am","*","0.5","+","an","*","0.5",")",";","float","as","=","sin","(","(","1.0","-","ao",")","*","aq",")","/","ar",";","float","at","=","sin","(","ao","*","aq",")","/","ar",";","return","am","*","as","+","an","*","at",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aJ","(","in","vec3","av",",","in","vec4","aw",",","in","vec4","ax",",","in","vec4","ay",",","in","vec4","az",",","in","float","aA",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aB","=","au","(","aw",",","ax",",","aA",")",";","vec4","aC","=","mix","(","ay",",","az",",","aA",")",";","vec3","aD","=","k","(","aB",",","av",")",";","vec3","aE","=","aD","*","aC",".","w","+","aC",".","xyz",";","return","aE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aF","=","k","(","aw",",","av",")",";","vec3","aG","=","k","(","ax",",","av",")",";","vec3","aH","=","aF","*","ay",".","w","+","ay",".","xyz",";","vec3","aI","=","aG","*","az",".","w","+","az",".","xyz",";","return","mix","(","aH",",","aI",",","aA",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aS","(","in","vec3","aK",",","in","vec4","aL",",","in","vec4","aM",",","in","float","aN",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aO","=","au","(","aL",",","aM",",","aN",")",";","vec3","aP","=","k","(","aO",",","aK",")",";","return","aP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aQ","=","k","(","aL",",","aK",")",";","vec3","aR","=","k","(","aM",",","aK",")",";","return","mix","(","aQ",",","aR",",","aN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aJ","(","in","vec3","aT",",","in","vec4","aU",",","in","vec4","aV",")","{","vec3","aW","=","k","(","aU",",","aT",")",";","vec3","aX","=","aW","*","aV",".","w","+","aV",".","xyz",";","return","aX",";","}","vec3","aS","(","in","vec3","aY",",","in","vec4","aZ",")","{","vec3","a_","=","k","(","aZ",",","aY",")",";","return","a_",";","}"]}]}}]},{type:"textline",tokens:["void","bn","(","inout","vec3","ba",",","inout","vec3","bb",",","inout","vec3","bc",",","inout","vec3","bd",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","be","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bg","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bh","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bi","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","bj","=","0",";","bj","<","4",";","bj","++",")","{","int","bk","=","int","(","a_influence","[","bj","]",")",";","float","bl","=","fract","(","a_influence","[","bj","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bf","+=","bl","*","aJ","(","ba",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","u_transb","[","bk","]",",","u_transa","[","bk","]",",","be",")",";","bg","+=","bl","*","aS","(","bb",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";","bh","+=","bl","*","aS","(","bc",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";","bi","+=","bl","*","aS","(","bd",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bf","+=","bl","*","aJ","(","ba",",","u_quatsb","[","bk","]",",","u_transb","[","bk","]",")",";","bg","+=","bl","*","aS","(","bb",",","u_quatsb","[","bk","]",")",";","bh","+=","bl","*","aS","(","bc",",","u_quatsb","[","bk","]",")",";","bi","+=","bl","*","aS","(","bd",",","u_quatsb","[","bk","]",")",";"]}]}}]},{type:"textline",tokens:["}","ba","=","bf",";","bb","=","bg",";","bc","=","bh",";","bd","=","bi",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bm","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bm",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["ba","=","aJ","(","ba",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","u_transb","[","bm","]",",","u_transa","[","bm","]",",","be",")",";","bb","=","aS","(","bb",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";","bc","=","aS","(","bc",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";","bd","=","aS","(","bd",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ba","=","aJ","(","ba",",","u_quatsb","[","bm","]",",","u_transb","[","bm","]",")",";","bb","=","aS","(","bb",",","u_quatsb","[","bm","]",")",";","bc","=","aS","(","bc",",","u_quatsb","[","bm","]",")",";","bd","=","aS","(","bd",",","u_quatsb","[","bm","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bB","(","inout","vec3","bo",",","in","vec3","bp",",","in","float","bq",",","in","float","br",",","in","float","bs",",","in","vec3","bt",",","in","float","bu",")","{","float","bv","=","length","(","bp",")",";","float","bw","=","br","*","(","1.0","+","0.1","*","fract","(","bv",")",")",";","float","bx","=","bq","*","bu","*","(","1.0","+","sin","(","2.0","*","3.14","*","bs","*","bw","+","bv",")",")",";","float","by","=","(","bo",".","y","-","bp",".","y",")","*","abs","(","bx",")",";","by","+=","1.0",";","by","*=","by",";","by","=","by","*","by","-","by",";","vec3","bz","=","bo",";","bz",".","xz","+=","bt",".","xz","*","by","*","sign","(","bx",")",";","float","bA","=","length","(","bo","-","bp",")",";","bo","=","bp","+","normalize","(","bz","-","bp",")","*","bA",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bD","(","vec4","bC",")","{","return","bC","*","bC","*","(","3.0","-","2.0","*","bC",")",";","}","vec4","bF","(","vec4","bE",")","{","return","abs","(","fract","(","bE","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bH","(","vec4","bG",")","{","return","bD","(","bF","(","bG",")",")",";","}","void","bY","(","inout","vec3","bI",",","in","float","bJ",",","in","vec3","bK",",","in","vec3","bL",",","in","vec3","bM",",","in","float","bN",",","in","float","bO",",","in","float","bP",",","in","vec3","bQ",")","{","float","bR",";","float","bS",";","float","bT",";","vec2","bU",";","vec4","bV",";","vec2","bW",";","vec3","bX",";","bR","=","dot","(","bM",",","vec3","(","1.0",")",")",";","bS","=","bR","+","bQ",".","g",";","bT","=","dot","(","bI",",","vec3","(","bQ",".","g",")",")",";","bU","=","(","bJ","+","vec2","(","bT",",","bS",")",")",";","bV","=","(","(","fract","(","(","bU",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bL",")","*","bN",";","bV","=","bH","(","bV",")",";","bW","=","bV",".","xz","+","bV",".","yw",";","bW",".","y","=","0.5","-","bW",".","y",";","bX","=","bW",".","xyx","*","bQ",".","rbr","*","vec3","(","bO","*","bK",".","x",",","bP",",","bO","*","bK",".","z",")",";","bI","+=","bX",";","}"]}]}}]},{type:"textline",tokens:["void","ce","(","inout","vec3","bZ",",","inout","vec3","b_",",","in","vec3","ca",")","{","vec3","cb","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","b_",";","vec3","cd","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","bZ",";","vec3","cd","=","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bY","(","cc",",","u_time",",","ca",",","cb",",","cd",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bZ","+=","cc","-","b_",";","b_","=","cc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bZ","=","cc",";","b_","=","cd",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_SRC_RGBA_PCF",tokens:["3"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["4"]},{type:"define",name:"SHADOW_SRC_VSM",tokens:["5"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["6"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["3"]},{type:"define",name:"SHADOW_DST_VSM",tokens:["4"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","cj","(","const","in","float","cf",")","{","const","vec4","cg","=","vec4","(","255.0","*","255.0","*","255.0",",","255.0","*","255.0",",","255.0",",","1.0",")",";","const","vec4","ch","=","vec4","(","0.0",",","1.0","/","255.0",",","1.0","/","255.0",",","1.0","/","255.0",")",";","vec4","ci","=","fract","(","cf","*","cg",")",";","ci","-=","ci",".","xxyz","*","ch",";","return","ci",";","}","float","cn","(","const","in","vec4","ck",")","{","float","cl",";","const","vec4","cm","=","vec4","(","1.0","/","(","255.0","*","255.0","*","255.0",")",",","1.0","/","(","255.0","*","255.0",")",",","1.0","/","255.0",",","1.0",")",";","cl","=","dot","(","ck",",","cm",")",";","return","cl",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_SECTION_DIST0",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST1",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST2",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST3",tokens:["0.0"]},{type:"var",name:"PCF_TEXEL_SIZE",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["float","cC","(","sampler2D","cw",",","vec3","cx",",","float","cy",",","float","cz",")","{","vec2","cA","=","cx",".","xy","+","vec2","(","cy",",","cz",")","*","PCF_TEXEL_SIZE",";","vec4","cB","=","texture2D","(","cw",",","cA",")",";","return","cn","(","cB",")",";","}"]}]}}]},{type:"textline",tokens:["float","cR","(","vec3","cD",",","sampler2D","cE",",","float","cF",")","{","float","cG",";","cD",".","z","=","clamp","(","cD",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cH","=","texture2D","(","cE",",","cD",".","xy",")",";","float","cI","=","cn","(","cH",")",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")","&&","cI","<","cD",".","z",")","{","float","cJ","=","cD",".","z","-","cI",";","cG","=","exp","(","-","cJ","*","cF",")",";","}","else","cG","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cI",";","cI",".","r","=","cC","(","cE",",","cD",",","0.5",",","0.5",")",";","cI",".","g","=","cC","(","cE",",","cD",",","0.5",",","-","0.5",")",";","cI",".","b","=","cC","(","cE",",","cD",",","-","0.5",",","-","0.5",")",";","cI",".","a","=","cC","(","cE",",","cD",",","-","0.5",",","0.5",")",";","vec4","cK","=","vec4","(","cD",".","z",",","cD",".","z",",","cD",".","z",",","cD",".","z",")",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")",")","cG","=","dot","(","vec4","(","greaterThanEqual","(","cI",",","cK",")",")",",","vec4","(","0.25",",","0.25",",","0.25",",","0.25",")",")",";","else","cG","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cL","=","texture2D","(","cE",",","cD",".","xy",")",";","float","cM","=","cL",".","r",";","float","cN","=","cL",".","g",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")","&&","cM","<","cD",".","z",")","{","float","cO","=","cN","-","cM","*","cM",";","float","cP","=","cD",".","z","-","cM",";","cG","=","cO","/","(","cO","+","cP","*","cP",")",";","}","else","cG","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","cI","=","texture2D","(","cE",",","cD",".","xy",")",".","r",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")","&&","cI","<","cD",".","z",")","{","cG","=","0.0",";","float","cQ","=","cD",".","z","-","cI",";","cG","=","exp","(","-","cQ","*","cF",")",";","}","else","cG","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","cG",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","cX","(","float","cS",",","float","cT",")","{","vec3","cU",";","float","cV","=","1.0",";","float","cW","=","-","cS",";","if","(","cW","<","CSM_SECTION_DIST0",")","{","cU","=","cp",".","xyz","/","cp",".","w",";","cV","=","cR","(","cU",",","u_shadow_map0",",","cT",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cW","<","CSM_SECTION_DIST1",")","{","cU","=","cq",".","xyz","/","cq",".","w",";","cV","=","cR","(","cU",",","u_shadow_map1",",","cT",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cW","<","CSM_SECTION_DIST2",")","{","cU","=","cr",".","xyz","/","cr",".","w",";","cV","=","cR","(","cU",",","u_shadow_map2",",","cT",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cW","<","CSM_SECTION_DIST3",")","{","cU","=","cs",".","xyz","/","cs",".","w",";","cV","=","cR","(","cU",",","u_shadow_map3",",","cT",")",";","}"]}]}}]},{type:"textline",tokens:["return","cV",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","dc","(","in","float","cY",",","inout","vec3","cZ",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","c_","=","texture2DProj","(","u_shadow_mask",",","ct",")",".","rg",";","vec3","da","=","vec3","(","c_",".","r",")",";","float","db","=","c_",".","g",";","cv","=","vec4","(","da",",","db",")",";","cZ","*=","cv",".","a",";","return","cv",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","cX","(","cu",".","z",",","cY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","dh","(","vec3","dd",",","float","de",",","vec2","df",")","{","vec2","dg","=","vec2","(","(","dd",".","x","-","df",".","x",")","/","de",",","-","(","dd",".","z","-","df",".","y",")","/","de",")",";","return","fract","(","dg",")",";","}","vec2","dl","(","vec2","di",",","float","dj",",","vec2","dk",")","{","return","vec2","(","di",".","x","*","dj",",","-","di",".","y","*","dj",")","+","dk",";","}","b","dm","(",")","{","return","b","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","b","dT","(","vec3","dn",",","vec3","dp",",","vec3","dq",",","vec3","dr",",","vec3","ds",",","sampler2D","dt",",","sampler2D","du",",","vec3","dv",",","float","dw",",","vec3","dx",",","vec4","dy",",","mat4","dz",")","{","vec3","dA","=","k","(","dy",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","dB","=","-","dA",".","x",";","float","dC","=","-","dA",".","z",";","vec2","dD","=","vec2","(","dx",".","x","+","dw","*","(","-","1.0","-","dB",")","/","2.0",",","dx",".","z","+","dw","*","(","1.0","-","dC",")","/","2.0",")",";","vec2","dE","=","dh","(","ds",",","dw",",","dD",")",";","float","dF","=","dw","/","2.0",";","vec2","dG","=","abs","(","dl","(","dE","-","vec2","(","0.5",")",",","dw",",","vec2","(","0.0",")",")",")",";","float","dH","=","dF","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","dG",")",">","dH",")","return","dm","(",")",";","float","dI","=","dw","/","dv",".","z",";","vec2","dJ","=","(","dE","-","vec2","(","0.5",")",")","*","dI","+","vec2","(","0.5",")",";","vec3","dK","=","dA","*","(","dw","/","dv",".","z","-","1.0",")","/","2.0",";","dJ",".","x","+=","dK",".","x",";","dJ",".","y","-=","dK",".","z",";","vec4","dL","=","texture2D","(","du",",","dJ",")",";","float","dM","=","dL",".","r",";","if","(","dM","<","u_scale_threshold",")","return","dm","(",")",";","float","dN","=","dv",".","y","-","dv",".","x",";","float","dO","=","dv",".","y","-","texture2D","(","dt",",","dJ",")",".","r","*","dN",";","vec2","dP","=","dn",".","xz","-","ds",".","xz",";","ds",".","xz","=","dl","(","dE",",","dw",",","dD",")",";","ds",".","y","=","dO",";","dn",".","xz","=","ds",".","xz","+","dP",";","dn",".","y","*=","dM",";","dn",".","y","+=","dO",";","vec3","dQ","=","dL",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["dn","-=","ds",";","mat4","dR","=","ab","(","dx",",","ds",",","dz",")",";","b","dS","=","ai","(","dn",",","ds",",","dp",",","dq",",","dr",",","dR",")",";","dS",".","b","=","ds",";","dS",".","f","=","dQ",";","return","t","(","dS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","t","(","b","(","dn",",","ds",",","dp",",","dq",",","dr",",","dQ",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["void","dV","(","vec3","dU",")","{","cp","=","u_b_light_matrix","*","u_p_light_matrix0","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cq","=","u_b_light_matrix","*","u_p_light_matrix1","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cr","=","u_b_light_matrix","*","u_p_light_matrix2","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cs","=","u_b_light_matrix","*","u_p_light_matrix3","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","dV","(","vec4","dW",")","{","float","dX","=","dW",".","x",";","float","dY","=","dW",".","y",";","float","dZ","=","dW",".","w",";","ct",".","x","=","(","dX","+","dZ",")","/","2.0",";","ct",".","y","=","(","dY","+","dZ",")","/","2.0",";","ct",".","z","=","dZ",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","eb","(","inout","vec3","ea",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ea","=","pow","(","ea",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ed","(","inout","vec3","ec",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","pow","(","ec",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","eg","(","inout","vec3","ee",",","in","float","ef",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ee","=","ee","*","ef",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["float","eo","(","inout","vec3","ej",",","in","float","ek",",","in","vec4","el",")","{","float","em","=","el",".","w","*","ek",";","float","en","=","exp","(","-","em","*","em",")",";","en","=","clamp","(","en",",","0.0",",","1.0",")",";","ej","=","mix","(","el",".","rgb",",","ej",",","en",")",";","return","en",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ev","(","in","mat4","ep",",","in","vec3","eq",")","{","vec3","er","=","mix","(","ep","[","0","]",".","rgb",",","ep","[","1","]",".","rgb",",","max","(","sign","(","eq",".","x",")",",","0.0",")",")",";","vec3","es","=","mix","(","ep","[","2","]",".","rgb",",","ep","[","3","]",".","rgb",",","max","(","sign","(","eq",".","z",")",",","0.0",")",")",";","vec3","et","=","vec3","(","ep","[","0","]",".","a",",","ep","[","1","]",".","a",",","ep","[","2","]",".","a",")",";","vec3","eu","=","mix","(","er",",","es",",","abs","(","eq",".","z",")",")",";","eu","=","mix","(","eu",",","et",",","abs","(","eq",".","y",")",")",";","return","eu",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","ex","(","inout","float","ew",")","{","ew","-=","0.5",";","ew","=","4.0","*","(","ew","*","ew","*","ew",")","+","0.5",";","}","float","eM","(","inout","vec3","ey",",","in","float","ez",",","in","float","eA",",","in","float","eB",",","in","vec4","eC",",","in","vec4","eD",",","in","float","eE",",","in","float","eF",")","{","eA","=","clamp","(","eA",",","0.0",",","1.0",")",";","float","eG","=","eD",".","w","*","ez",";","float","eH","=","exp","(","-","eG","*","eG",")",";","eH","=","clamp","(","eH",",","0.0",",","1.0",")",";","ez","=","max","(","ez","-","max","(","eB","/","eA",",","0.0",")",",","0.0",")",";","eG","=","eC",".","w","*","ez",";","float","eI","=","1.0","-","eG",";","eI","+=","max","(","eE","-","WAVES_HEIGHT","-","0.05",",","0.0",")",";","+","max","(","eE","/","WAVES_HEIGHT",",","0.0",")",";","eI","=","clamp","(","eI",",","0.0",",","1.0",")",";","ex","(","eI",")",";","if","(","eI","<","eH",")","{","vec3","eJ","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","eK","=","eC",".","rgb",";","eB","=","clamp","(","-","eB","*","0.03",",","0.0",",","0.8",")",";","vec3","eL","=","mix","(","eK",",","eJ",",","min","(","eA",",","1.0",")",")",";","eL","=","mix","(","eL",",","vec3","(","0.0",")",",","eB",")","*","eF",";","ey","=","mix","(","eL",",","ey",",","eI",")",";","return","eI",";","}","if","(","eI",">=","eH",")","{","ey","=","mix","(","eD",".","rgb",",","ey",",","eH",")",";","return","eH",";","}","}","float","eV","(","inout","vec3","eN",",","in","float","eO",",","in","float","eP",",","in","vec4","eQ",",","in","float","eR",")","{","float","eS","=","eQ",".","w","*","eO",";","float","eT","=","1.0","-","eS",";","eT","=","clamp","(","eT",",","0.0",",","1.0",")",";","ex","(","eT",")",";","eP","=","clamp","(","-","eP","*","0.03",",","0.0",",","0.8",")",";","vec3","eU","=","mix","(","eQ",".","rgb",",","vec3","(","0.0",")",",","eP",")","*","eR",";","eN","=","mix","(","eU",",","eN",",","eT",")",";","return","eT",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["struct","eW","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fd","(","vec3","eX",",","vec3","eY",",","vec3","eZ",",","vec4","e_",",","float","fa",")","{","vec3","fb","=","normalize","(","eX","+","eY",")",";","float","fc","=","e_","[","0","]","*","max","(","dot","(","eZ",",","fb",")",",","0.0",")","+","e_","[","1","]",";","return","pow","(","fc",",","fa",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","fo","(","vec3","fe",",","vec3","ff",",","vec3","fg",",","float","fh",")","{","vec3","fi","=","normalize","(","fe","+","ff",")",";","float","fj","=","max","(","dot","(","fg",",","fi",")",",","0.001",")",";","float","fk","=","max","(","dot","(","fg",",","ff",")",",","0.001",")",";","float","fl","=","max","(","dot","(","fg",",","fe",")",",","0.001",")",";","float","fm","=","tan","(","acos","(","fj",")",")",";","float","fn","=","max","(","fh",",","0.001",")",";","return","fl","*","(","1.0","/","(","4.0","*","M_PI","*","fn","*","fn",")",")","*","(","exp","(","-","(","fm","*","fm",")","/","(","fn","*","fn",")",")","/","(","sqrt","(","fk","*","fl",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","fG","(","float","fp",",","vec3","fq",",","vec3","fr",",","vec3","fs",",","float","ft",",","inout","float","fu",")","{","if","(","ft",">","0.0",")","{","float","fv","=","max","(","dot","(","fq",",","fs",")",",","0.0",")",";","float","fw","=","acos","(","fp",")",";","float","fx","=","acos","(","fv",")",";","vec3","fy","=","normalize","(","fr","-","fp","*","fq",")",";","vec3","fz","=","normalize","(","fs","-","fv","*","fq",")",";","float","fA","=","max","(","dot","(","fy",",","fz",")",",","0.0",")",";","float","fB",",","fC",";","fB","=","max","(","fw",",","fx",")",";","fC","=","min","(","fw",",","fx",")",";","float","fD","=","ft","*","ft",";","float","fE","=","1.0","-","0.5","*","(","fD","/","(","fD","+","0.33",")",")",";","float","fF","=","0.45","*","(","fD","/","(","fD","+","0.09",")",")",";","fC","*=","0.95",";","fu","=","fu","*","(","fE","+","(","fF","*","fA","*","sin","(","fB",")","*","tan","(","fC",")",")",")",";","}","else","{","fu","=","fu",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","fN","(","vec3","fH",",","vec3","fI",",","float","fJ",",","float","fK",",","out","float","fL",")","{","float","fM",";","if","(","fJ","==","0.0",")","{","fL","=","1.0",";","}","else","{","fM","=","1.0","+","abs","(","dot","(","fI",",","fH",")",")",";","fM","=","fK","+","(","1.0","-","fK",")","*","pow","(","fM",",","fJ",")",";","fL","=","clamp","(","fM",",","0.0",",","1.0",")",";","}","}"]}]}}]},{type:"textline",tokens:["eW","gz","(","vec3","fO",",","vec3","fP",",","vec3","fQ",",","vec3","fR",",","vec3","fS",",","vec3","fT",",","vec3","fU",",","float","fV",",","vec2","fW",",","float","fX",",","vec3","fY","[","NUM_LIGHTS","]",",","vec3","fZ","[","NUM_LIGHTS","]",",","vec3","f_","[","NUM_LIGHTS","]",",","vec4","ga","[","NUM_LIGHTS","]",",","vec4","gb","[","NUM_LIGHTS","]",",","float","gc",",","vec4","gd",")","{","eW","ge",";","ge",".","a","=","vec4","(","fO","+","fQ","*","fP",",","0.0",")",";","ge",".","b","=","vec3","(","0.0",")",";","for","(","int","gf","=","0",";","gf","<","NUM_LIGHTS",";","gf","++",")","{","vec4","gg","=","ga","[","gf","]",";","vec4","gh","=","gb","[","gf","]",";","vec3","gi","=","vec3","(","0.0",")",";","vec3","gj","=","f_","[","gf","]",";","gj","*=","fX",";","float","gk","=","gh",".","z",";","if","(","gk","!=","-","1.0",")","{","gi","=","fY","[","gf","]","-","fS",";","float","gl","=","length","(","gi",")",";","gj","*=","gk","/","(","gk","+","gl","*","gl",")",";","gi","=","normalize","(","gi",")",";","float","gm","=","gh",".","x",";","float","gn","=","gh",".","y",";","if","(","gm",">","-","1.0",")","{","float","go","=","dot","(","gi",",","fZ","[","gf","]",")",";","go","*=","smoothstep","(","0.0",",","1.0",",","(","go","-","gm",")","/","gn",")",";","gj","*=","go",";","}","}","else","gi","=","fZ","[","gf","]",";","float","gp",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["fN","(","fT",",","gi",",","fW","[","0","]",",","fW","[","1","]",",","gp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gq","=","max","(","dot","(","fT",",","gi",")",",","0.0",")",";","gp","=","gg","[","0","]","*","gq","+","gg","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["fG","(","gq",",","fT",",","gi",",","fU",",","fW","[","0","]",",","gp",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","gr","=","fd","(","gi",",","fU",",","fT",",","gg",",","fV",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","gr","=","fo","(","gi",",","fU",",","fT",",","fV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gr","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","gi",",","fT",")","*","dot","(","fU",",","fT",")","<","0.0",")","{","float","gs","=","gd",".","x",";","float","gt","=","gd",".","y",";","float","gu","=","gd",".","z",";","float","gv","=","gd",".","w",";","float","gw","=","clamp","(","abs","(","dot","(","gi",",","fT",")",")",",","0.0",",","1.0",")",";","float","gx","=","clamp","(","dot","(","fU",",","-","gi",")",",","0.0",",","1.0",")",";","float","gy","=","pow","(","gx",",","gt",")",";","ge",".","a","+=","gc","*","vec4","(","gj","*","gw","*","pow","(","fQ",",","vec3","(","gs",")",")",",","1.0",")",";","ge",".","a","+=","gu","*","mix","(","vec4","(","fQ",",","1.0",")",",","vec4","(","1.0",")",",","gv",")","*","gc","*","vec4","(","gj","*","gw","*","vec3","(","gy",")",",","1.0",")",";","}","else","{","ge",".","b","+=","gj","*","fR","*","gr",";","ge",".","a","+=","vec4","(","gj","*","fQ","*","gp",",","gr",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ge",".","b","+=","gj","*","fR","*","gr",";","ge",".","a","+=","vec4","(","gj","*","fQ","*","gp",",","gr",")",";"]}]}}]},{type:"textline",tokens:["}","return","ge",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","gB","(","vec4","gA",")","{","return","gA","-","floor","(","gA","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","gB","(","vec3","gC",")","{","return","gC","-","floor","(","gC","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","gB","(","vec2","gD",")","{","return","gD","-","floor","(","gD","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","gF","(","vec4","gE",")","{","return","gE","-","floor","(","gE","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","gH","(","vec4","gG",")","{","return","gB","(","(","34.0","*","gG","+","5.0",")","*","gG",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","gT","(","vec2","gI",")","{","vec2","gJ","=","gB","(","floor","(","gI",")",")",";","vec2","gK","=","fract","(","gI",")",";","vec4","gL","=","gK",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","gM","=","gK",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","gN","=","gH","(","gJ",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","gN","=","gH","(","gN","+","gJ",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","gO","=","gF","(","gN",")","*","K","+","K2",";","vec4","gP","=","gF","(","floor","(","gN","*","K",")",")","*","K","+","K2",";","vec4","gQ","=","gL","+","JITTER","*","gO",";","vec4","gR","=","gM","+","JITTER","*","gP",";","vec4","gS","=","gQ","*","gQ","+","gR","*","gR",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["gS",".","xy","=","min","(","gS",".","xy",",","gS",".","zw",")",";","gS",".","x","=","min","(","gS",".","x",",","gS",".","y",")",";","return","gS",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gS",".","xy","=","(","gS",".","x","<","gS",".","y",")","?","gS",".","xy",":","gS",".","yx",";","gS",".","xz","=","(","gS",".","x","<","gS",".","z",")","?","gS",".","xz",":","gS",".","zx",";","gS",".","xw","=","(","gS",".","x","<","gS",".","w",")","?","gS",".","xw",":","gS",".","wx",";","gS",".","y","=","min","(","gS",".","y",",","gS",".","z",")",";","gS",".","y","=","min","(","gS",".","y",",","gS",".","w",")",";","return","sqrt","(","gS",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","hh","(","vec2","gU",",","float","gV",")","{","vec2","gW","=","gB","(","floor","(","gU",")",")",";","vec2","gX","=","fract","(","gU",")",";","vec4","gY","=","gX",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","gZ","=","gX",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","g_","=","gH","(","gW",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","g_","=","gH","(","g_","+","gW",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","ha","=","gF","(","g_",")","*","K","+","K2",";","vec4","hb","=","gF","(","floor","(","g_","*","K",")",")","*","K","+","K2",";","vec4","hc","=","gY","+","JITTER","*","ha",";","vec4","hd","=","gZ","+","JITTER","*","hb",";","vec4","he","=","hc","*","hc","+","hd","*","hd",";","hc","+=","gV",";","hd","+=","gV",";","vec4","hf","=","hc","*","hc","+","hd","*","hd",";","hc","+=","gV",";","hd","+=","gV",";","vec4","hg","=","hc","*","hc","+","hd","*","hd",";","he",".","xy","=","min","(","he",".","xy",",","he",".","zw",")",";","he",".","x","=","min","(","he",".","x",",","he",".","y",")",";","hf",".","xy","=","min","(","hf",".","xy",",","hf",".","zw",")",";","hf",".","x","=","min","(","hf",".","x",",","hf",".","y",")",";","hg",".","xy","=","min","(","hg",".","xy",",","hg",".","zw",")",";","hg",".","x","=","min","(","hg",".","x",",","hg",".","y",")",";","return","mat3","(","he",".","xx",",","0.0",",","hf",".","xx",",","0.0",",","hg",".","xx",",","0.0",")",";","}","vec3","hj","(","vec3","hi",")","{","return","gB","(","(","(","hi","*","34.0",")","+","1.0",")","*","hi",")",";","}","float","hx","(","vec2","hk",")","{","const","vec4","hl","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","hm","=","floor","(","hk","+","dot","(","hk",",","hl",".","yy",")",")",";","vec2","hn","=","hk","-","hm","+","dot","(","hm",",","hl",".","xx",")",";","vec2","ho",";","ho","=","(","hn",".","x",">","hn",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","hp","=","hn",".","xyxy","+","hl",".","xxzz",";","hp",".","xy","-=","ho",";","hm","=","gB","(","hm",")",";","vec3","hq","=","hj","(","hj","(","hm",".","y","+","vec3","(","0.0",",","ho",".","y",",","1.0",")",")","+","hm",".","x","+","vec3","(","0.0",",","ho",".","x",",","1.0",")",")",";","vec3","hr","=","max","(","0.5","-","vec3","(","dot","(","hn",",","hn",")",",","dot","(","hp",".","xy",",","hp",".","xy",")",",","dot","(","hp",".","zw",",","hp",".","zw",")",")",",","0.0",")",";","hr","=","hr","*","hr",";","hr","=","hr","*","hr",";","vec3","hs","=","2.0","*","fract","(","hq","*","hl",".","www",")","-","1.0",";","vec3","ht","=","abs","(","hs",")","-","0.5",";","vec3","hu","=","floor","(","hs","+","0.5",")",";","vec3","hv","=","hs","-","hu",";","hr","*=","1.79284291400159","-","0.85373472095314","*","(","hv","*","hv","+","ht","*","ht",")",";","vec3","hw",";","hw",".","x","=","hv",".","x","*","hn",".","x","+","ht",".","x","*","hn",".","y",";","hw",".","yz","=","hv",".","yz","*","hp",".","xz","+","ht",".","yz","*","hp",".","yw",";","return","130.0","*","dot","(","hr",",","hw",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","hY","(","inout","vec3","hy",",","float","hz",",","float","hA",",","float","hB",",","vec3","hC",",","vec3","hD",",","vec3","hE",",","vec4","hF",",","vec3","hG",",","float","hH",")","{","if","(","hH",">","100.0",")","return",";","vec4","hI","=","hF",";","vec3","hJ","=","hG","+","hC",";","hJ",".","xz","=","10.0","*","sin","(","0.1","*","hJ",".","xz",")",";","vec3","hK","=","hJ","+","2.0","*","cross","(","-","hI",".","xyz",",","cross","(","-","hI",".","xyz",",","hJ",")","+","hI",".","w","*","hJ",")",";","vec2","hL","=","hK",".","xz",";","vec3","hM","=","hD",";","float","hN","=","max","(","dot","(","hC",",","hM",")",",","0.0",")",";","float","hO","=","0.025",";","hL",".","s","+=","0.5","*","sin","(","dot","(","hG","+","hA",",","vec3","(","1.0",")",")",")",";","hL",".","t","+=","0.7","*","(","-","sin","(","dot","(","hG","-","hA",",","vec3","(","-","0.7",")",")",")",")",";","hL",".","st","+=","0.23","*","cos","(","4.0","*","hz","-","CAUST_SPEED",".","x","*","hA",")",";","hL",".","st","+=","3.0","*","sin","(","hz","-","0.3","*","CAUST_SPEED",".","y","*","hA",")",";","float","hP","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","hz",",","0.0",")",")",";","mat3","hQ","=","hh","(","(","hL","/","hP",")",",","hO",")",";","float","hR","=","(","hQ","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","hS","=","(","hQ","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","hT","=","(","hQ","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","hU","=","CAUST_BRIGHT","*","vec3","(","hR",",","hS",",","hT",")",";","float","hV","=","hB","*","hN",";","float","hW","=","max","(","sign","(","hz",")",",","0.0",")",";","hV","=","min","(","hV","+","0.5","*","sign","(","-","hC",".","y",")","*","hW",",","1.0",")",";","hV","*=","1.0","-","hW","*","(","0.1","*","hz",")",";","hU","*=","hV",";","hU","*=","hU",";","float","hX","=","min","(","-","hz","+","10.0",",","1.0",")",";","hy","+=","max","(","(","2.0","*","hE","*","hU",")","*","hX",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","il","(","in","vec3","id",",","in","vec3","ie",",","in","float","ig",",","in","float","ih",")","{","vec3","ii","=","normalize","(","ie","+","id",")",";","float","ij","=","1.0","-","dot","(","id",",","ii",")",";","float","ik","=","ih","+","(","1.0","-","ih",")","*","pow","(","ij",",","ig",")",";","return","ik",";","}","void","iy","(","inout","vec3","im",",","in","vec3","io",",","in","vec3","ip",",","in","float","iq",",","in","float","ir",",","in","vec2","is",")","{","vec3","it","=","reflect","(","-","io",",","ip",")",";","float","iu","=","il","(","io",",","it",",","iq",",","ir",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iv","=","ct",".","xy","/","ct",".","z",";","iv","+=","is","*","BUMP",";","vec3","iw","=","texture2D","(","u_reflectmap",",","iv",")",".","rgb",";","eb","(","iw",".","rgb",")",";","im","=","mix","(","im",",","iw",",","u_reflect_factor","*","iu",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ix","=","textureCube","(","u_mirrormap",",","it",")",".","xyz",";","eb","(","ix",".","rgb",")",";","im","=","mix","(","im",",","ix",",","u_mirror_factor","*","iu",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"define",name:"RAMPSIZE",tokens:["4"]},{type:"textline",tokens:["float","jt","(","float","ji",",","float","jj",",","vec2","jk","[","RAMPSIZE","]",")","{","if","(","jk","[","0","]","[","0","]","<","0.0",")","return","1.0",";","float","jl","=","ji","/","jj",";","bool","jm","=","false",";","float","jn","=","0.0",";","float","jo","=","jk","[","0","]","[","1","]",";","float","jp","=","1.0",";","float","jq","=","1.0",";","for","(","int","jr","=","0",";","jr","<","RAMPSIZE",";","jr","++",")","{","if","(","!","jm",")","{","if","(","jk","[","jr","]","[","0","]",">=","0.0",")","{","if","(","jl",">=","jn","&&","jl","<","jk","[","jr","]","[","0","]",")","{","jp","=","jk","[","jr","]","[","0","]",";","jq","=","jk","[","jr","]","[","1","]",";","jm","=","true",";","}","else","if","(","jl","<","jn","||","jl",">=","jk","[","jr","]","[","0","]",")","{","jn","=","jk","[","jr","]","[","0","]",";","jo","=","jk","[","jr","]","[","1","]",";","}","}","else","if","(","jk","[","jr","]","[","0","]","<","0.0",")","{","jq","=","jo",";","jm","=","true",";","}","}","}","if","(","!","jm",")","jq","=","jo",";","float","js","=","(","jq","-","jo",")","/","(","jp","-","jn",")",";","return","jo","+","js","*","(","jl","-","jn",")",";","}","vec3","jF","(","float","ju",",","float","jv",",","vec4","jw","[","RAMPSIZE","]",")","{","if","(","jw","[","0","]","[","0","]","<","0.0",")","return","vec3","(","1.0",",","1.0",",","1.0",")",";","float","jx","=","ju","/","jv",";","bool","jy","=","false",";","float","jz","=","0.0",";","vec3","jA","=","jw","[","0","]",".","yzw",";","float","jB","=","1.0",";","vec3","jC","=","vec3","(","1.0",",","1.0",",","1.0",")",";","for","(","int","jD","=","0",";","jD","<","RAMPSIZE",";","jD","++",")","{","if","(","!","jy",")","{","if","(","jw","[","jD","]","[","0","]",">=","0.0",")","{","if","(","jx",">=","jz","&&","jx","<","jw","[","jD","]","[","0","]",")","{","jB","=","jw","[","jD","]","[","0","]",";","jC","=","jw","[","jD","]",".","yzw",";","jy","=","true",";","}","else","if","(","jx","<","jz","||","jx",">=","jw","[","jD","]","[","0","]",")","{","jz","=","jw","[","jD","]","[","0","]",";","jA","=","jw","[","jD","]",".","yzw",";","}","}","else","if","(","jw","[","jD","]","[","0","]","<","0.0",")","{","jC","=","jA",";","jy","=","true",";","}","}","}","if","(","!","jy",")","jC","=","jA",";","vec3","jE","=","(","jC","-","jA",")","/","(","jB","-","jz",")",";","return","jA","+","jE","*","(","jx","-","jz",")",";","}","float","jO","(","float","jG",",","float","jH",",","float","jI",",","float","jJ",")","{","float","jK","=","max","(","0.01",",","min","(","jH",",","jI",")",")",";","float","jL","=","max","(","0.01",",","min","(","jH",",","jJ",")",")",";","float","jM","=","jH","-","jL",";","float","jN","=","clamp","(","jG","/","jK",",","0.0",",","1.0",")","-","step","(","jM",",","jG",")","*","(","jG","-","jM",")","/","jL",";","return","jN",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","kb","(","in","sampler2D","jV",",","in","vec2","jW",",","in","vec2","jX",")","{","float","jY","=","texture2D","(","jV",",","jW",")",".","r",";","float","jZ","=","jX",".","x",";","float","j_","=","jX",".","y",";","float","ka","=","2.0","*","jZ","/","(","jZ","+","j_","-","(","2.0","*","jY","-","1.0",")","*","(","j_","-","jZ",")",")",";","return","ka",";","}"]}]}}