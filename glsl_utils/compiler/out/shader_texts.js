b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cc","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cc","=","mix","(","cc",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cd","=","vec3","(","0.0",")",";","vec3","ce","=","vec3","(","0.0",")",";","vec3","cf","=","vec3","(","0.0",")",";","bk","(","cc",",","cd",",","ce",",","cf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cg","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cg","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ch","=","(","u_model_matrix","*","vec4","(","cg",",","1.0",")",")",".","xyz",";","mat4","ci","=","Z","(","u_camera_eye",",","ch",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","(","u_model_matrix","*","vec4","(","cg",",","1.0",")",")",".","xyz",";","ci","=","ci","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cj",")",";"]}]}}]},{type:"textline",tokens:["b","ck","=","af","(","cc","-","cg",",","cg",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ci",")",";","ck",".","b","=","ch",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ck","=","af","(","cc",",","cg",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cl","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cl","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cb","(","ck",".","a",",","ck",".","b",",","cl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ai","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ck",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cl",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cm",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","da","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","da","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","da","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cg","(","cl",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cg","(","cl",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["float","db","=","cl",";","float","dc","=","db","*","db",";","gl_FragColor","=","vec4","(","db",",","dc",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","cU","(","cr",".","z",",","u_shadow_visibility_falloff",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cl",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cm",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","dX","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["dX","=","mix","(","dX",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","dY","=","vec3","(","0.0",")",";","vec3","dZ","=","vec3","(","0.0",")",";","vec3","d_","=","vec3","(","0.0",")",";","bk","(","dX",",","dY",",","dZ",",","d_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ea","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ea","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","eb","=","dQ","(","dX",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ea",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ec","=","(","u_model_matrix","*","vec4","(","ea",",","1.0",")",")",".","xyz",";","mat4","ed","=","Z","(","u_camera_eye",",","ec",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ee","=","(","u_model_matrix","*","vec4","(","ea",",","1.0",")",")",".","xyz",";","ed","=","ed","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ee",")",";"]}]}}]},{type:"textline",tokens:["b","eb","=","af","(","dX","-","ea",",","ea",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ed",")",";","eb",".","b","=","ec",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","eb","=","af","(","dX",",","ea",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ef","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ef","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cb","(","eb",".","a",",","eb",".","b",",","ef",")",";"]}]}}]},{type:"textline",tokens:["vec4","eg","=","u_view_matrix","*","vec4","(","eb",".","a",",","1.0",")",";","vec4","eh","=","u_proj_matrix","*","eg",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["eh",".","xy","+=","u_subpixel_jitter","*","eh",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ai","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dS","(","eb",".","a",")",";","cr","=","eg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["cl","=","-","eg",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","eh",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","dX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","dX",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","dX",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","dX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","dX",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","dX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","dX",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","dX",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","dX",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","dY","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","dZ","=","Z","(","u_camera_eye",",","dY",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["dZ","=","dZ","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["b","d_","=","af","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","dZ",")",";","d_",".","b","=","dY",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","d_","=","af","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","ea","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","d_",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dX","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dX","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["dX","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ea",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","ee",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","ef",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","eg","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","eg","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","ei","(","float","eh",")","{","return","eh","-","floor","(","eh","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","er","(","inout","float","ej",",","in","float","ek","[","eg","]",",","in","float","el",")","{","for","(","int","em","=","NUM_RINGS",";","em",">","0",";","em","--",")","{","float","en","=","40.0","*","ek","[","em","]",";","float","eo","=","300.0","*","(","ei","(","en",")","-","0.005",")",";","float","ep","=","en",";","float","eq","=","abs","(","ep","*","(","u_halo_size","*","eo","-","el",")",")",";","ej","+=","1.0","-","min","(","eq",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","eA","(","inout","float","es",",","in","float","et","[","eg","]",",","in","float","eu",")","{","for","(","int","ev","=","NUM_LINES",";","ev",">","0",";","ev","--",")","{","float","ew","=","et","[","ev","]",";","float","ex","=","ew",";","float","ey","=","1000.0","*","(","ei","(","ew",")","-","0.005",")",";","float","ez","=","20.0","*","abs","(","ex","*","a",".","x","+","ey","*","a",".","y",")",";","es","+=","1.0","-","min","(","ez",",","1.0",")",";","}","es","*=","eu",";","}"]}]}}]},{type:"textline",tokens:["void","eH","(","inout","float","eB",",","in","vec2","eC",")","{","float","eD",",","eE",";","eE","=","atan","(","eC",".","y",",","eC",".","x",")",";","eE","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","eF","=","cos","(","eE",")",";","float","eG","=","sin","(","eE",")",";","eE","=","(","eF","*","eC",".","x","+","eG","*","eC",".","y",")","*","(","eF","*","eC",".","y","-","eG","*","eC",".","x",")",";","eD","=","abs","(","eE",")",";","if","(","eD","<","1.0",")","{","eD","=","(","0.01","*","u_halo_size",")","/","(","eD",")",";","eB","*=","sqrt","(","min","(","eD",",","1.0",")",")",";","}","}","void","main","(",")","{","float","eI","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","eJ","=","sqrt","(","eI",")",";","eI","=","max","(","1.0","-","eI",",","0.0",")",";","eI","=","pow","(","eI",",","u_halo_hardness",")",";","float","eK","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eL","[","eg","]",";","for","(","int","eM","=","0",";","eM","<","eg",";","eM","++",")","{","eL","[","eM","]","=","fract","(","ef","/","float","(","eM",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","eN","=","0.0",";","er","(","eN",",","eL",",","eJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eO","=","0.0",";","eA","(","eO",",","eL",",","eI",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eH","(","eI",",","a",")",";"]}]}}]},{type:"textline",tokens:["eI","*=","eK",";","vec3","eP","=","u_diffuse_color",".","rgb","*","eI",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["eN","*=","eI",";","eP","+=","u_halo_rings_color","*","eN",";","eI","+=","eN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["eO","*=","eK",";","eP","+=","u_halo_lines_color","*","eO",";","eI","+=","eO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eI","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","eQ","=","u_halo_stars_blend","*","(","ee",".","y","-","u_halo_stars_height",")",";","eI","*=","clamp","(","eQ",",","0.0",",","1.0",")",";","eI","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ea","(","eP",")",";","ed","(","eP",",","eI",")",";","gl_FragColor","=","vec4","(","eP",",","eI",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","ef",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ee",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","eg","=","a_position",";","a","=","a_halo_bb_vertex","*","2.0",";","ef","=","fract","(","eg",".","x","+","eg",".","y","+","eg",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","eh","=","x","(","eg",",","u_view_matrix",")",";","mat4","ei","=","u_view_matrix",";","ei","[","3","]","[","0","]","=","0.0",";","ei","[","3","]","[","1","]","=","0.0",";","ei","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","eh","=","x","(","eg",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","ej","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","ek","=","eh","*","ej",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","el","=","u_proj_matrix","*","ei","*","ek",";","el",".","z","=","0.99999","*","el",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ee","=","ek",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","el","=","u_proj_matrix","*","u_view_matrix","*","ek",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","el",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","eg","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","eg",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hW",";","varying","vec3","hX",";","varying","vec3","hY",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","hZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","h_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cm",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","iw","=","hX",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ix","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","iy","=","hY",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")","iy","=","-","iy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iz","=","cross","(","iy",",","hZ",".","xyz",")","*","hZ",".","w",";","mat3","iA","=","mat3","(","hZ",".","xyz",",","iz",",","iy",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","iB","=","length","(","cr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","iB","<","10.0",")","{","float","iC","=","clamp","(","5.0","-","0.5","*","iB",",","0.0",",","1.0",")",";","float","iD","=","u_parallax_scale","*","iC",";","vec3","iE","=","normalize","(","hW","*","iA",")",";","float","iF","=","1.0","/","PARALLAX_STEPS",";","vec2","iG","=","iE",".","xy","*","iD","/","(","PARALLAX_STEPS","*","iE",".","z",")",";","float","iH","=","1.0",";","float","iI","=","texture2D","(","u_normalmap0",",","ix",")",".","a",";","for","(","float","iJ","=","1.0",";","iJ","<=","PARALLAX_STEPS",";","iJ","++",")","{","if","(","iI","<","iH",")","{","iH","-=","iF",";","ix","-=","iG",";","iI","=","texture2D","(","u_normalmap0",",","ix",")",".","a",";","}","}","vec2","iK","=","ix","+","iG",";","float","iL","=","texture2D","(","u_normalmap0",",","iK",")",".","a","-","(","iH","+","iF",")",";","float","iM","=","iI","-","iH",";","float","iN","=","iM","/","(","iM","-","iL",")",";","ix","=","iN","*","iK","+","(","1.0","-","iN",")","*","ix",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iO","=","texture2D","(","u_normalmap0",",","ix","+","u_time","*","u_normalmap0_uv_velocity",")",";","vec3","iP","=","iO",".","rgb","-","0.5",";","iP","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","iP",",","u_normal_factor",")",";","vec3","iQ","=","iA","*","iP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iQ","=","iy",";"]}]}}]},{type:"textline",tokens:["iQ","=","normalize","(","iQ",")",";","vec3","iR","=","normalize","(","hW",")",";","float","iS","=","0.5","*","iQ",".","y","+","0.5",";","vec3","iT","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","iS",")",";","vec3","iU","=","u_ambient","*","iT",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iV","=","h_",";","dZ","(","iV",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iW","=","vec4","(","iV",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iW","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iX","=","normalize","(","u_view_matrix_frag","*","vec4","(","iQ",",","0.0",")",")",".","st",";","iX","=","iX","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iY","=","texture2D","(","u_colormap0",",","ix",")",";","dZ","(","iY",".","rgb",")",";","vec4","iZ",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["iZ","=","texture2D","(","u_colormap1",",","iX",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["iZ","=","texture2D","(","u_colormap1",",","ix",")",";"]}]}}]},{type:"textline",tokens:["dZ","(","iZ",".","rgb",")",";","vec4","i_","=","texture2D","(","u_stencil0",",","ix",")",";","vec4","ja","=","mix","(","iY",",","iZ",",","i_",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ja","=","texture2D","(","u_colormap0",",","iX",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ja","=","texture2D","(","u_colormap0",",","ix","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["dZ","(","ja",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["iW",".","rgb","=","mix","(","iW",".","rgb",",","ja",".","rgb",",","u_diffuse_color_factor",")",";","iW",".","a","=","ja",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["iW",".","rgb","*=","mix","(","vec3","(","1.0",")",",","ja",".","rgb",",","u_diffuse_color_factor",")",";","iW",".","a","=","ja",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","jb","=","u_diffuse_intensity","*","iW",".","rgb",";","float","jc","=","c_","(","u_shadow_visibility_falloff",",","jb",")",";","vec3","jd","=","u_emit","*","iW",".","rgb",";","vec3","je","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jf","=","vec3","(","iW",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jf","=","texture2D","(","u_specmap",",","ix",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["dZ","(","jf",".","rgb",")",";","je","=","mix","(","je",",","jf",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","jg","=","u_specular_params","[","0","]",";","float","jh","=","u_specular_params","[","1","]",";","vec3","ji","=","jg","*","je",";","eT","jj","=","gw","(","jd",",","iU",",","jb",",","ji",",","hX",",","iQ",",","iR",",","jh",",","u_diffuse_params",",","jc",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","jk","=","jj",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["iv","(","jk",",","iR",",","iQ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","iP",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iv","(","jk",",","iR",",","iQ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","0.0",")",")",";"]}]}}]}]}}]},{type:"textline",tokens:["jk","+=","jj",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["jk","=","max","(","jk","-","sqrt","(","0.01","*","-","min","(","iw",",","0.0",")",")",",","0.5","*","jk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["hV","(","jk",",","iw",",","u_time",",","jc",",","iQ",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","hX",",","iB",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","jl","=","iW",".","a",";","if","(","jl","<","0.5",")","discard",";","jl","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jl","=","iW",".","a","+","jj",".","a",".","a","*","ji",".","r",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jl","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jm","=","es","(","u_cube_fog",",","iR",")",";","vec4","jn","=","vec4","(","jm",",","u_fog_color_density",".","a",")",";","dZ","(","jn",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jn","=","u_fog_color_density",";","jn",".","rgb","*=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eJ","(","jk",",","iB",",","iR",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","jn",",","iw",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","(","jk",",","iB",",","jn",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["jk","=","vec3","(","cs",".","a",")",";"]}]}}]},{type:"textline",tokens:["ea","(","jk",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","jk",",","jl",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jk",",","jl",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","hW",";","varying","vec3","hX",";","varying","vec3","hY",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","hZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","h_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cm",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","iw","=","a_position",";","vec3","ix","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iy","=","vec3","(","a_tangent",")",";","vec3","iz","=","a_tangent","[","3","]","*","cross","(","ix",",","iy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iy","=","vec3","(","0.0",")",";","vec3","iz","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iw","=","mix","(","iw",",","a_position_next",",","u_va_frame_factor",")",";","ix","=","mix","(","ix",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iA","=","vec3","(","a_tangent",")",";","vec3","iB","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","iA",")",";","iy","=","mix","(","iy",",","iA",",","u_va_frame_factor",")",";","iz","=","mix","(","iz",",","iB",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bk","(","iw",",","iy",",","iz",",","ix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","iD","=","dQ","(","iw",",","iy",",","iz",",","ix",",","iC",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","(","u_model_matrix","*","vec4","(","iC",",","1.0",")",")",".","xyz",";","mat4","iF","=","Z","(","u_camera_eye",",","iE",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","=","(","u_model_matrix","*","vec4","(","iC",",","1.0",")",")",".","xyz",";","iF","=","iF","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iG",")",";"]}]}}]},{type:"textline",tokens:["b","iD","=","af","(","iw","-","iC",",","iC",",","iy",",","iz",",","ix",",","iF",")",";","iD",".","b","=","iE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iD","=","af","(","iw",",","iC",",","iy",",","iz",",","ix",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"textline",tokens:["float","iH","=","(","dot","(","cross","(","iD",".","e",",","iD",".","c",")",",","iD",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","hZ","=","vec4","(","iD",".","c",",","iH",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","iD","=","dQ","(","iw",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ix",",","iC",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","(","u_model_matrix","*","vec4","(","iC",",","1.0",")",")",".","xyz",";","mat4","iF","=","Z","(","u_camera_eye",",","iE",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","=","(","u_model_matrix","*","vec4","(","iC",",","1.0",")",")",".","xyz",";","iF","=","iF","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iG",")",";"]}]}}]},{type:"textline",tokens:["b","iD","=","af","(","iw","-","iC",",","iC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ix",",","iF",")",";","iD",".","b","=","iE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iD","=","af","(","iw",",","iC",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ix",",","u_model_matrix",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cb","(","iD",".","a",",","iD",".","b",",","ix",")",";"]}]}}]},{type:"textline",tokens:["hX","=","iD",".","a",";","hY","=","iD",".","e",";","hW","=","u_camera_eye","-","iD",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ai","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["h_","=","iD",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["h_","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","iI","=","u_view_matrix","*","vec4","(","iD",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cr","=","iI",";"]}]}}]},{type:"textline",tokens:["vec4","iJ","=","u_proj_matrix","*","iI",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["iJ",".","xy","+=","u_subpixel_jitter","*","iJ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["dS","(","iJ",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dS","(","iD",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","iK","=","iJ",".","x",";","float","iL","=","iJ",".","y",";","float","iM","=","iJ",".","w",";","cq",".","x","=","(","iK","+","iM",")","/","2.0",";","cq",".","y","=","(","iL","+","iM",")","/","2.0",";","cq",".","z","=","iM",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","iJ",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED","&&","WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hX",";","varying","vec4","cr",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","hY",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","hZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cm",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"textline",tokens:["float","iw","=","0.0",";","float","ix","=","1.0",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iG","(","vec3","iy",")","{","float","iz",",","iA",",","iB",",","iC",",","iD",",","iE",";","vec3","iF",";","iz","=","max","(","iy","[","0","]",",","max","(","iy","[","1","]",",","iy","[","2","]",")",")",";","iA","=","min","(","iy","[","0","]",",","min","(","iy","[","1","]",",","iy","[","2","]",")",")",";","iE","=","iz","-","iA",";","iD","=","iz",";","if","(","iz","!=","iw",")","iC","=","iE","/","iz",";","else","{","iC","=","iw",";","iB","=","iw",";","}","if","(","e","(","iC",",","iw",")",")","{","iB","=","iw",";","}","else","{","iF","=","(","vec3","(","iz",",","iz",",","iz",")","-","iy",".","xyz",")","/","iE",";","if","(","e","(","iy",".","x",",","iz",")",")","iB","=","iF","[","2","]","-","iF","[","1","]",";","else","if","(","e","(","iy",".","y",",","iz",")",")","iB","=","2.0","+","iF","[","0","]","-","iF","[","2","]",";","else","iB","=","4.0","+","iF","[","1","]","-","iF","[","0","]",";","iB","/=","6.0",";","if","(","iB","<","iw",")","iB","+=","ix",";","}","return","vec3","(","iB",",","iC",",","iD",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iR","(","vec3","iH",")","{","float","iI",",","iJ",",","iK",",","iL",",","iM",",","iN",",","iO",",","iP",";","vec3","iQ",";","iN","=","iH","[","0","]",";","iO","=","iH","[","1","]",";","iP","=","iH","[","2","]",";","if","(","e","(","iO",",","iw",")",")","{","iQ","=","vec3","(","iP",",","iP",",","iP",")",";","}","else","{","if","(","e","(","iN",",","iw",")",")","iN","=","iw",";","iN","*=","6.0",";","iI","=","floor","(","iN",")",";","iJ","=","iN","-","iI",";","iQ","=","vec3","(","iJ",",","iJ",",","iJ",")",";","iK","=","iP","*","(","ix","-","iO",")",";","iL","=","iP","*","(","ix","-","(","iO","*","iJ",")",")",";","iM","=","iP","*","(","ix","-","(","iO","*","(","ix","-","iJ",")",")",")",";","if","(","e","(","iI",",","iw",")",")","iQ","=","vec3","(","iP",",","iM",",","iK",")",";","else","if","(","e","(","iI",",","ix",")",")","iQ","=","vec3","(","iL",",","iP",",","iK",")",";","else","if","(","e","(","iI",",","2.0",")",")","iQ","=","vec3","(","iK",",","iP",",","iM",")",";","else","if","(","e","(","iI",",","3.0",")",")","iQ","=","vec3","(","iK",",","iL",",","iP",")",";","else","if","(","e","(","iI",",","4.0",")",")","iQ","=","vec3","(","iM",",","iK",",","iP",")",";","else","iQ","=","vec3","(","iP",",","iK",",","iL",")",";","}","return","iQ",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iT","(","vec2","iS",")","{","return","vec3","(","iS","*","2.0","-","vec2","(","ix",",","ix",")",",","iw",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iV","(","vec3","iU",")","{","return","vec2","(","iU",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"jK",qualifier:["vec3"]},{type:"node_out",name:"jL",qualifier:["float"]},{type:"node_out",name:"jM",qualifier:["float"]},{type:"textline",tokens:["jK","=","normalize","(","jz",".","xyz",")",";","jL","=","abs","(","jz",".","z",")",";","jM","=","length","(","jz",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"jN",qualifier:["float"]},{type:"node_in",name:"jO",qualifier:["float"]},{type:"node_in",name:"jP",qualifier:["float"]},{type:"node_out",name:"jQ",qualifier:["vec3"]},{type:"textline",tokens:["jQ","=","vec3","(","jN",",","jO",",","jP",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"iW",qualifier:["varying","vec2"]},{type:"node_out",name:"jR",qualifier:["vec3"]},{type:"textline",tokens:["jR","=","iT","(","iW",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"iX",qualifier:["varying","vec3"]},{type:"node_out",name:"jS",qualifier:["vec3"]},{type:"textline",tokens:["jS","=","iX",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"iY",qualifier:["varying","float"]},{type:"node_out",name:"jT",qualifier:["float"]},{type:"textline",tokens:["jT","=","iY",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"iZ",qualifier:["varying","vec2"]},{type:"node_out",name:"jU",qualifier:["float"]},{type:"node_out",name:"jV",qualifier:["float"]},{type:"textline",tokens:["jU","=","iZ","[","0","]",";","jV","=","iZ","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"i_",qualifier:["varying","vec3"]},{type:"node_out",name:"jW",qualifier:["float"]},{type:"node_out",name:"jX",qualifier:["float"]},{type:"node_out",name:"jY",qualifier:["float"]},{type:"textline",tokens:["jW","=","i_","[","0","]",";","jX","=","i_","[","1","]",";","jY","=","i_","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"jZ",qualifier:["vec3"]},{type:"textline",tokens:["jZ","=","jt",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"j_",qualifier:["float"]},{type:"textline",tokens:["j_","=","(","gl_FrontFacing",")","?","ix",":","iw",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"ka",qualifier:["vec3"]},{type:"textline",tokens:["ka","=","jx",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"kb",qualifier:["vec3"]},{type:"textline",tokens:["kb","=","vec3","(","jy",".","r",",","-","jy",".","b",",","jy",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"kc",qualifier:["float"]},{type:"node_in",name:"kd",qualifier:["float"]},{type:"node_in",name:"ke",qualifier:["float"]},{type:"node_in",name:"kf",qualifier:["float"]},{type:"node_in",name:"kg",qualifier:["vec3"]},{type:"node_out",name:"kh",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","ki","=","iG","(","kg",")",";","ki","[","0","]","+=","(","kc","-","0.5",")",";","if","(","ki","[","0","]",">","ix",")","ki","[","0","]","-=","ix",";","else","if","(","ki","[","0","]","<","iw",")","ki","[","0","]","+=","ix",";","ki","[","1","]","*=","kd",";","if","(","ki","[","1","]",">","ix",")","ki","[","1","]","=","ix",";","else","if","(","ki","[","1","]","<","iw",")","ki","[","1","]","=","iw",";","ki","[","2","]","*=","ke",";","if","(","ki","[","2","]",">","ix",")","ki","[","2","]","=","ix",";","else","if","(","ki","[","2","]","<","iw",")","ki","[","2","]","=","iw",";","kh","=","mix","(","kg",",","iR","(","ki",")",",","kf",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"kj",qualifier:["float"]},{type:"node_in",name:"kk",qualifier:["vec3"]},{type:"node_out",name:"kl",qualifier:["vec3"]},{type:"textline",tokens:["kl","=","mix","(","kk",",","vec3","(","ix",")","-","kk",",","kj",")",";"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"ja",qualifier:["vec3"]},{type:"node_in",name:"km",qualifier:["vec3"]},{type:"node_out",name:"kn",qualifier:["vec3"]},{type:"node_out",name:"ko",qualifier:["float"]},{type:"textline",tokens:["kn","=","ja",";","ko","=","-","dot","(","km",",","ja",")",";"]}]}},{type:"node",name:"NORMAL_VIEW",group:{type:"group",parts:[{type:"node_in",name:"kp",qualifier:["vec3"]},{type:"node_out",name:"kq",qualifier:["vec3"]},{type:"textline",tokens:["kq","=","-","(","u_view_matrix_frag","*","vec4","(","kp",",","iw",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"jb",qualifier:["vec3"]},{type:"node_in",name:"kr",qualifier:["vec3"]},{type:"node_out",name:"ks",qualifier:["vec3"]},{type:"textline",tokens:["ks","=","kr","*","jb",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"jc",qualifier:["mat4"]},{type:"node_param",name:"jd",qualifier:["const","float"]},{type:"node_param",name:"je",qualifier:["const","float"]},{type:"node_param",name:"jf",qualifier:["vec3"]},{type:"node_param",name:"jg",qualifier:["vec3"]},{type:"node_in",name:"kt",qualifier:["vec3"]},{type:"node_out",name:"ku",qualifier:["vec3"]},{type:"textline",tokens:["ku","=","(","jc","*","vec4","(","kt",",","ix",")",")",".","xyz",";","if","(","jd","==","ix",")","ku","=","max","(","ku",",","jf",")",";","if","(","je","==","ix",")","ku","=","min","(","ku",",","jg",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"kv",qualifier:["float"]},{type:"node_in",name:"kw",qualifier:["float"]},{type:"node_out",name:"kx",qualifier:["float"]},{type:"textline",tokens:["kx","=","kv","+","kw",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"ky",qualifier:["float"]},{type:"node_in",name:"kz",qualifier:["float"]},{type:"node_out",name:"kA",qualifier:["float"]},{type:"textline",tokens:["kA","=","ky","-","kz",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"kB",qualifier:["float"]},{type:"node_in",name:"kC",qualifier:["float"]},{type:"node_out",name:"kD",qualifier:["float"]},{type:"textline",tokens:["kD","=","kB","*","kC",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"kE",qualifier:["float"]},{type:"node_in",name:"kF",qualifier:["float"]},{type:"node_out",name:"kG",qualifier:["float"]},{type:"textline",tokens:["kG","=","(","kF","!=","iw",")","?","kE","/","kF",":","iw",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"kH",qualifier:["float"]},{type:"node_in",name:"kI",qualifier:["float"]},{type:"node_out",name:"kJ",qualifier:["float"]},{type:"textline",tokens:["kJ","=","sin","(","kH",")",";","kI",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"kK",qualifier:["float"]},{type:"node_in",name:"kL",qualifier:["float"]},{type:"node_out",name:"kM",qualifier:["float"]},{type:"textline",tokens:["kM","=","cos","(","kK",")",";","kL",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"kN",qualifier:["float"]},{type:"node_in",name:"kO",qualifier:["float"]},{type:"node_out",name:"kP",qualifier:["float"]},{type:"textline",tokens:["kP","=","tan","(","kN",")",";","kO",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"kQ",qualifier:["float"]},{type:"node_in",name:"kR",qualifier:["float"]},{type:"node_out",name:"kS",qualifier:["float"]},{type:"textline",tokens:["kS","=","(","kQ","<=","ix","&&","kQ",">=","-","ix",")","?","asin","(","kQ",")",":","iw",";","kR",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"kT",qualifier:["float"]},{type:"node_in",name:"kU",qualifier:["float"]},{type:"node_out",name:"kV",qualifier:["float"]},{type:"textline",tokens:["kV","=","(","kT","<=","ix","&&","kT",">=","-","ix",")","?","acos","(","kT",")",":","iw",";","kU",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"kW",qualifier:["float"]},{type:"node_in",name:"kX",qualifier:["float"]},{type:"node_out",name:"kY",qualifier:["float"]},{type:"textline",tokens:["kY","=","atan","(","kW",")",";","kX",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"kZ",qualifier:["float"]},{type:"node_in",name:"k_",qualifier:["float"]},{type:"node_out",name:"la",qualifier:["float"]},{type:"textline",tokens:["la","=","pow","(","kZ",",","k_",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"lb",qualifier:["float"]},{type:"node_in",name:"lc",qualifier:["float"]},{type:"node_out",name:"ld",qualifier:["float"]},{type:"textline",tokens:["ld","=","(","lb",">","iw","&&","lc",">","iw",")","?","log2","(","lb",")","/","log2","(","lc",")",":","iw",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"le",qualifier:["float"]},{type:"node_in",name:"lf",qualifier:["float"]},{type:"node_out",name:"lg",qualifier:["float"]},{type:"textline",tokens:["lg","=","min","(","le",",","lf",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"lh",qualifier:["float"]},{type:"node_in",name:"li",qualifier:["float"]},{type:"node_out",name:"lj",qualifier:["float"]},{type:"textline",tokens:["lj","=","max","(","lh",",","li",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"lk",qualifier:["float"]},{type:"node_in",name:"ll",qualifier:["float"]},{type:"node_out",name:"lm",qualifier:["float"]},{type:"textline",tokens:["lm","=","floor","(","lk","+","0.5",")",";","ll",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"ln",qualifier:["float"]},{type:"node_in",name:"lo",qualifier:["float"]},{type:"node_out",name:"lp",qualifier:["float"]},{type:"textline",tokens:["lp","=","(","ln","<","lo",")","?","ix",":","iw",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"lq",qualifier:["float"]},{type:"node_in",name:"lr",qualifier:["float"]},{type:"node_out",name:"ls",qualifier:["float"]},{type:"textline",tokens:["ls","=","lq","+","lr",";","ls","=","(","lq",">","lr",")","?","ix",":","iw",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"lt",qualifier:["float"]},{type:"node_in",name:"lu",qualifier:["float"]},{type:"node_out",name:"lv",qualifier:["float"]},{type:"textline",tokens:["lv","=","abs","(","lu",")",">","0.000001","?","mod","(","lt",",","lu",")",":","iw",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"lw",qualifier:["float"]},{type:"node_in",name:"lx",qualifier:["vec3"]},{type:"node_in",name:"ly",qualifier:["vec3"]},{type:"node_out",name:"lz",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lA","=","clamp","(","lw",",","iw",",","ix",")",";","lz","=","mix","(","lx",",","ly",",","lA",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"lB",qualifier:["float"]},{type:"node_in",name:"lC",qualifier:["vec3"]},{type:"node_in",name:"lD",qualifier:["vec3"]},{type:"node_out",name:"lE",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lF","=","clamp","(","lB",",","iw",",","ix",")",";","lE","=","mix","(","lC",",","lC","+","lD",",","lF",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"lG",qualifier:["float"]},{type:"node_in",name:"lH",qualifier:["vec3"]},{type:"node_in",name:"lI",qualifier:["vec3"]},{type:"node_out",name:"lJ",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lK","=","clamp","(","lG",",","iw",",","ix",")",";","lJ","=","mix","(","lH",",","lH","*","lI",",","lK",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"lL",qualifier:["float"]},{type:"node_in",name:"lM",qualifier:["vec3"]},{type:"node_in",name:"lN",qualifier:["vec3"]},{type:"node_out",name:"lO",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lP","=","clamp","(","lL",",","iw",",","ix",")",";","lO","=","mix","(","lM",",","lM","-","lN",",","lP",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"lQ",qualifier:["float"]},{type:"node_in",name:"lR",qualifier:["vec3"]},{type:"node_in",name:"lS",qualifier:["vec3"]},{type:"node_out",name:"lT",qualifier:["vec3"]},{type:"textline",tokens:["{","float","lU","=","clamp","(","lQ",",","iw",",","ix",")",";","float","lV","=","ix","-","lU",";","lT","=","vec3","(","ix",")","-","(","vec3","(","lV",")","+","lU","*","(","vec3","(","ix",")","-","lS",")",")","*","(","vec3","(","ix",")","-","lR",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"lW",qualifier:["float"]},{type:"node_in",name:"lX",qualifier:["vec3"]},{type:"node_in",name:"lY",qualifier:["vec3"]},{type:"node_out",name:"lZ",qualifier:["vec3"]},{type:"textline",tokens:["{","float","l_","=","clamp","(","lW",",","iw",",","ix",")",";","float","ma","=","ix","-","l_",";","lZ","=","lX",";","if","(","lY",".","r","!=","iw",")","lZ",".","r","=","ma","*","lZ",".","r","+","l_","*","lZ",".","r","/","lY",".","r",";","if","(","lY",".","g","!=","iw",")","lZ",".","g","=","ma","*","lZ",".","g","+","l_","*","lZ",".","g","/","lY",".","g",";","if","(","lY",".","b","!=","iw",")","lZ",".","b","=","ma","*","lZ",".","b","+","l_","*","lZ",".","b","/","lY",".","b",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"mb",qualifier:["float"]},{type:"node_in",name:"mc",qualifier:["vec3"]},{type:"node_in",name:"md",qualifier:["vec3"]},{type:"node_out",name:"me",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mf","=","clamp","(","mb",",","iw",",","ix",")",";","me","=","mix","(","mc",",","abs","(","mc","-","md",")",",","mf",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"mg",qualifier:["float"]},{type:"node_in",name:"mh",qualifier:["vec3"]},{type:"node_in",name:"mi",qualifier:["vec3"]},{type:"node_out",name:"mj",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mk","=","clamp","(","mg",",","iw",",","ix",")",";","mj","=","min","(","mh",".","rgb",",","mi",".","rgb","*","mk",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"ml",qualifier:["float"]},{type:"node_in",name:"mm",qualifier:["vec3"]},{type:"node_in",name:"mn",qualifier:["vec3"]},{type:"node_out",name:"mo",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mp","=","clamp","(","ml",",","iw",",","ix",")",";","mo","=","max","(","mm",".","rgb",",","mn",".","rgb","*","mp",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"mq",qualifier:["float"]},{type:"node_in",name:"mr",qualifier:["vec3"]},{type:"node_in",name:"ms",qualifier:["vec3"]},{type:"node_out",name:"mt",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mu","=","clamp","(","mq",",","iw",",","ix",")",";","float","mv","=","ix","-","mu",";","mt","=","mr",";","if","(","mt",".","r","<","0.5",")","mt",".","r","*=","mv","+","2.0","*","mu","*","ms",".","r",";","else","mt",".","r","=","ix","-","(","mv","+","2.0","*","mu","*","(","ix","-","ms",".","r",")",")","*","(","ix","-","mt",".","r",")",";","if","(","mt",".","g","<","0.5",")","mt",".","g","*=","mv","+","2.0","*","mu","*","ms",".","g",";","else","mt",".","g","=","ix","-","(","mv","+","2.0","*","mu","*","(","ix","-","ms",".","g",")",")","*","(","ix","-","mt",".","g",")",";","if","(","mt",".","b","<","0.5",")","mt",".","b","*=","mv","+","2.0","*","mu","*","ms",".","b",";","else","mt",".","b","=","ix","-","(","mv","+","2.0","*","mu","*","(","ix","-","ms",".","b",")",")","*","(","ix","-","mt",".","b",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"mw",qualifier:["float"]},{type:"node_in",name:"mx",qualifier:["vec3"]},{type:"node_in",name:"my",qualifier:["vec3"]},{type:"node_out",name:"mz",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mA","=","clamp","(","mw",",","iw",",","ix",")",";","mz","=","mx",";","if","(","mz",".","r","!=","iw",")","{","float","mB","=","ix","-","mA","*","my",".","r",";","if","(","mB","<=","iw",")","mz",".","r","=","ix",";","else","if","(","(","mB","=","mz",".","r","/","mB",")",">","ix",")","mz",".","r","=","ix",";","else","mz",".","r","=","mB",";","}","if","(","mz",".","g","!=","iw",")","{","float","mC","=","ix","-","mA","*","my",".","g",";","if","(","mC","<=","iw",")","mz",".","g","=","ix",";","else","if","(","(","mC","=","mz",".","g","/","mC",")",">","ix",")","mz",".","g","=","ix",";","else","mz",".","g","=","mC",";","}","if","(","mz",".","b","!=","iw",")","{","float","mD","=","ix","-","mA","*","my",".","b",";","if","(","mD","<=","iw",")","mz",".","b","=","ix",";","else","if","(","(","mD","=","mz",".","b","/","mD",")",">","ix",")","mz",".","b","=","ix",";","else","mz",".","b","=","mD",";","}","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"mE",qualifier:["float"]},{type:"node_in",name:"mF",qualifier:["vec3"]},{type:"node_in",name:"mG",qualifier:["vec3"]},{type:"node_out",name:"mH",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mI","=","clamp","(","mE",",","iw",",","ix",")",";","float","mJ","=","ix","-","mI",";","float","mK",";","mH","=","mF",";","mK","=","mJ","+","mI","*","mG",".","r",";","if","(","mK","<=","iw",")","mH",".","r","=","iw",";","else","if","(","(","mK","=","(","ix","-","(","ix","-","mH",".","r",")","/","mK",")",")","<","iw",")","mH",".","r","=","iw",";","else","if","(","mK",">","ix",")","mH",".","r","=","ix",";","else","mH",".","r","=","mK",";","mK","=","mJ","+","mI","*","mG",".","g",";","if","(","mK","<=","iw",")","mH",".","g","=","iw",";","else","if","(","(","mK","=","(","ix","-","(","ix","-","mH",".","g",")","/","mK",")",")","<","iw",")","mH",".","g","=","iw",";","else","if","(","mK",">","ix",")","mH",".","g","=","ix",";","else","mH",".","g","=","mK",";","mK","=","mJ","+","mI","*","mG",".","b",";","if","(","mK","<=","iw",")","mH",".","b","=","iw",";","else","if","(","(","mK","=","(","ix","-","(","ix","-","mH",".","b",")","/","mK",")",")","<","iw",")","mH",".","b","=","iw",";","else","if","(","mK",">","ix",")","mH",".","b","=","ix",";","else","mH",".","b","=","mK",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"mL",qualifier:["float"]},{type:"node_in",name:"mM",qualifier:["vec3"]},{type:"node_in",name:"mN",qualifier:["vec3"]},{type:"node_out",name:"mO",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mP","=","clamp","(","mL",",","iw",",","ix",")",";","vec3","mQ",",","mR",",","mS",";","mO","=","mM",";","mR","=","iG","(","mN",")",";","if","(","mR",".","y","!=","iw",")","{","mQ","=","iG","(","mO",")",";","mQ",".","x","=","mR",".","x",";","mS","=","iR","(","mQ",")",";","mO","=","mix","(","mO",",","mS",",","mP",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"mT",qualifier:["float"]},{type:"node_in",name:"mU",qualifier:["vec3"]},{type:"node_in",name:"mV",qualifier:["vec3"]},{type:"node_out",name:"mW",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mX","=","clamp","(","mT",",","iw",",","ix",")",";","float","mY","=","ix","-","mX",";","mW","=","mU",";","vec3","mZ",",","m_",";","mZ","=","iG","(","mW",")",";","if","(","mZ",".","y","!=","iw",")","{","m_","=","iG","(","mV",")",";","mZ",".","y","=","mY","*","mZ",".","y","+","mX","*","m_",".","y",";","mW","=","iR","(","mZ",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"na",qualifier:["float"]},{type:"node_in",name:"nb",qualifier:["vec3"]},{type:"node_in",name:"nc",qualifier:["vec3"]},{type:"node_out",name:"nd",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ne","=","clamp","(","na",",","iw",",","ix",")",";","float","nf","=","ix","-","ne",";","vec3","ng",",","nh",";","ng","=","iG","(","nb",")",";","nh","=","iG","(","nc",")",";","ng",".","z","=","nf","*","ng",".","z","+","ne","*","nh",".","z",";","nd","=","iR","(","ng",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"ni",qualifier:["float"]},{type:"node_in",name:"nj",qualifier:["vec3"]},{type:"node_in",name:"nk",qualifier:["vec3"]},{type:"node_out",name:"nl",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nm","=","clamp","(","ni",",","iw",",","ix",")",";","vec3","nn",",","no",",","np",";","nl","=","nj",";","no","=","iG","(","nk",")",";","if","(","no",".","y","!=","iw",")","{","nn","=","iG","(","nl",")",";","nn",".","x","=","no",".","x",";","nn",".","y","=","no",".","y",";","np","=","iR","(","nn",")",";","nl","=","mix","(","nl",",","np",",","nm",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"nq",qualifier:["float"]},{type:"node_in",name:"nr",qualifier:["vec3"]},{type:"node_in",name:"ns",qualifier:["vec3"]},{type:"node_out",name:"nt",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nu","=","clamp","(","nq",",","iw",",","ix",")",";","float","nv","=","ix","-","nu",";","vec3","nw","=","vec3","(","ix",")",";","vec3","nx","=","nw","-","(","nw","-","ns",")","*","(","nw","-","nr",")",";","nt","=","nv","*","nr","+","nu","*","(","(","nw","-","nr",")","*","ns","*","nr","+","nr","*","nx",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"ny",qualifier:["float"]},{type:"node_in",name:"nz",qualifier:["vec3"]},{type:"node_in",name:"nA",qualifier:["vec3"]},{type:"node_out",name:"nB",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nC","=","clamp","(","ny",",","iw",",","ix",")",";","nB","=","nz",";","if","(","nA",".","r",">","0.5",")","nB",".","r","=","nz",".","r","+","nC","*","(","2.0","*","(","nA",".","r","-","0.5",")",")",";","else","nB",".","r","=","nz",".","r","+","nC","*","(","2.0","*","(","nA",".","r",")","-","ix",")",";","if","(","nA",".","g",">","0.5",")","nB",".","g","=","nz",".","g","+","nC","*","(","2.0","*","(","nA",".","g","-","0.5",")",")",";","else","nB",".","g","=","nz",".","g","+","nC","*","(","2.0","*","(","nA",".","g",")","-","ix",")",";","if","(","nA",".","b",">","0.5",")","nB",".","b","=","nz",".","b","+","nC","*","(","2.0","*","(","nA",".","b","-","0.5",")",")",";","else","nB",".","b","=","nz",".","b","+","nC","*","(","2.0","*","(","nA",".","b",")","-","ix",")",";","nB","=","clamp","(","nB",",","iw",",","ix",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"nD",qualifier:["vec3"]},{type:"node_in",name:"nE",qualifier:["float"]},{type:"textline",tokens:["jE","=","nD",";","jJ","=","nE",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"jh",qualifier:["const","vec3"]},{type:"node_param",name:"ji",qualifier:["const","vec3"]},{type:"node_param",name:"jj",qualifier:["const","float"]},{type:"node_in",name:"nF",qualifier:["vec3"]},{type:"node_in",name:"nG",qualifier:["float"]},{type:"node_in",name:"nH",qualifier:["vec3"]},{type:"node_in",name:"nI",qualifier:["vec3"]},{type:"node_out",name:"nJ",qualifier:["vec3"]},{type:"node_out",name:"nK",qualifier:["float"]},{type:"node_out",name:"nL",qualifier:["vec3"]},{type:"textline",tokens:["nF","=","clamp","(","nF",",","iw",",","ix",")",";","nG","=","clamp","(","nG",",","iw",",","ix",")",";","nH","=","clamp","(","nH",",","iw",",","ix",")",";","vec3","nM","=","nF",";","float","nN","=","jh","[","0","]",";","vec2","nO","=","vec2","(","jh","[","1","]",",","jh","[","2","]",")",";","vec3","nP","=","jA","*","nF",";","vec3","nQ","=","jB","*","jv",";","vec3","nR","=","ji","[","1","]","*","nH",";","float","nS","=","ji","[","0","]",";","float","nT","=","ji","[","2","]",";","float","nU","=","c_","(","jC",",","nM",")",";","vec3","nV",";","if","(","jj","==","ix",")","nV","=","normalize","(","nI",")",";","else","nV","=","jt",";","eT","nW","=","gw","(","nP",",","nQ",",","nM",",","nR",",","jy",",","nV",",","jx",",","nT",",","nO",",","nU",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","iw",",","vec4","(","iw",")",")",";","nJ","=","(","nN","==","ix",")","?","nW",".","a",".","rgb",":","vec3","(","iw",")",";","nK","=","nG","+","nW",".","a",".","a","*","nR",".","r",";","nL","=","nV",";","if","(","nS","==","ix",")","{","nJ","+=","nW",".","b",";","jF","=","nW",".","b",";","}","else","{","jF","=","vec3","(","iw",")",";","}","jG","=","nV",";","jI","=","nU",";"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"jk",qualifier:["const","vec3"]},{type:"node_param",name:"jl",qualifier:["const","vec3"]},{type:"node_param",name:"jm",qualifier:["const","float"]},{type:"node_in",name:"nX",qualifier:["vec3"]},{type:"node_in",name:"nY",qualifier:["float"]},{type:"node_in",name:"nZ",qualifier:["vec3"]},{type:"node_in",name:"n_",qualifier:["vec3"]},{type:"node_in",name:"oa",qualifier:["float"]},{type:"node_in",name:"ob",qualifier:["float"]},{type:"node_in",name:"oc",qualifier:["vec4"]},{type:"node_out",name:"od",qualifier:["vec3"]},{type:"node_out",name:"oe",qualifier:["float"]},{type:"node_out",name:"of",qualifier:["vec3"]},{type:"node_out",name:"og",qualifier:["vec3"]},{type:"node_out",name:"oh",qualifier:["vec3"]},{type:"textline",tokens:["nX","=","clamp","(","nX",",","iw",",","ix",")",";","nY","=","clamp","(","nY",",","iw",",","ix",")",";","nZ","=","clamp","(","nZ",",","iw",",","ix",")",";","vec3","nM","=","nX",";","float","nN","=","jk","[","0","]",";","vec2","nO","=","vec2","(","jk","[","1","]",",","jk","[","2","]",")",";","vec3","nP","=","oa","*","nX",";","vec3","nQ","=","jB","*","jv",";","vec3","nR","=","jl","[","1","]","*","nZ",";","float","nS","=","jl","[","0","]",";","float","nT","=","jl","[","2","]",";","float","nU","=","c_","(","jC",",","nM",")",";","vec3","nV",";","if","(","jm","==","ix",")","nV","=","normalize","(","n_",")",";","else","nV","=","jt",";","eT","nW","=","gw","(","nP",",","nQ",",","nM",",","nR",",","jy",",","nV",",","jx",",","nT",",","nO",",","nU",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","ob",",","oc",")",";","od","=","(","nN","==","ix",")","?","nW",".","a",".","rgb",":","vec3","(","iw",")",";","oe","=","nY","+","nW",".","a",".","a","*","nR",".","r",";","of","=","nV",";","og","=","nW",".","a",".","rgb",";","oh","=","nW",".","b",";","if","(","nS","==","ix",")","{","od","+=","nW",".","b",";","jF","=","nW",".","b",";","}","else","{","jF","=","vec3","(","iw",")",";","}","jG","=","nV",";","jI","=","nU",";"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"jn",qualifier:["vec3"]},{type:"node_out",name:"oi",qualifier:["vec3"]},{type:"textline",tokens:["oi","=","jn",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"oj",qualifier:["vec3"]},{type:"node_out",name:"ok",qualifier:["float"]},{type:"textline",tokens:["ok","=","oj",".","r","*","0.35","+","oj",".","g","*","0.45","+","oj",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"ol",qualifier:["vec3"]},{type:"node_out",name:"om",qualifier:["float"]},{type:"node_out",name:"on",qualifier:["float"]},{type:"node_out",name:"oo",qualifier:["float"]},{type:"textline",tokens:["om","=","ol",".","r",";","on","=","ol",".","g",";","oo","=","ol",".","b",";"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"op",qualifier:["float"]},{type:"node_in",name:"oq",qualifier:["float"]},{type:"node_in",name:"or",qualifier:["float"]},{type:"node_out",name:"os",qualifier:["float"]},{type:"textline",tokens:["os","=","ix","/","(","ix","+","pow","(","2.71828183",",","-","(","(","op","-","or",")","*","oq",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"ot",qualifier:["vec3"]},{type:"node_out",name:"ou",qualifier:["vec3"]},{type:"textline",tokens:["ou","=","pow","(","ot",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"ov",qualifier:["vec3"]},{type:"node_out",name:"ow",qualifier:["vec3"]},{type:"textline",tokens:["ow","=","pow","(","ov",",","vec3","(","ix","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"ox",qualifier:["vec3"]},{type:"node_out",name:"oy",qualifier:["vec3"]},{type:"node_out",name:"oz",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oA","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","iV","(","ox",")",")",";","oy","=","oA",".","xyz",";","dZ","(","oy",")",";","oz","=","oA",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oB",qualifier:["vec3"]},{type:"node_out",name:"oC",qualifier:["vec3"]},{type:"node_out",name:"oD",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oE","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","iV","(","oB",")",")",";","jH","=","oE",".","xyz","-","0.5",";","oC","=","normalize","(","jD","*","jH",")",";","oD","=","oE",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"oF",qualifier:["vec3"]},{type:"node_out",name:"oG",qualifier:["vec3"]},{type:"node_out",name:"oH",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oI","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","oF",")",";","oG","=","oI",".","xyz",";","dZ","(","oG",")",";","oH","=","oI",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oJ",qualifier:["vec3"]},{type:"node_in",name:"oK",qualifier:["vec3"]},{type:"node_out",name:"oL",qualifier:["vec3"]},{type:"node_out",name:"oM",qualifier:["float"]},{type:"node_out",name:"oN",qualifier:["vec3"]},{type:"node_out",name:"oO",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oP","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","iV","(","oJ",")",")",";","oL","=","oP",".","xyz",";","dZ","(","oL",")",";","oM","=","oP",".","w",";","oP","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","iV","(","oK",")",")",";","oN","=","oP",".","xyz",";","dZ","(","oN",")",";","oO","=","oP",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oQ",qualifier:["vec3"]},{type:"node_in",name:"oR",qualifier:["vec3"]},{type:"node_out",name:"oS",qualifier:["vec3"]},{type:"node_out",name:"oT",qualifier:["float"]},{type:"node_out",name:"oU",qualifier:["vec3"]},{type:"node_out",name:"oV",qualifier:["float"]},{type:"textline",tokens:["{","vec4","oW","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","iV","(","oQ",")",")",";","jH","=","oW",".","xyz","-","0.5",";","oS","=","normalize","(","jD","*","jH",")",";","oT","=","oW",".","w",";","oW","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","iV","(","oR",")",")",";","jH","=","oW",".","xyz","-","0.5",";","oU","=","normalize","(","jD","*","jH",")",";","oV","=","oW",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"oX",qualifier:["vec3"]},{type:"node_in",name:"oY",qualifier:["vec3"]},{type:"node_in",name:"oZ",qualifier:["vec3"]},{type:"node_out",name:"o_",qualifier:["vec3"]},{type:"node_out",name:"pa",qualifier:["float"]},{type:"node_out",name:"pb",qualifier:["vec3"]},{type:"node_out",name:"pc",qualifier:["float"]},{type:"node_out",name:"pd",qualifier:["vec3"]},{type:"node_out",name:"pe",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pf","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iV","(","oX",")",")",";","o_","=","pf",".","xyz",";","dZ","(","o_",")",";","pa","=","pf",".","w",";","pf","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iV","(","oY",")",")",";","pb","=","pf",".","xyz",";","dZ","(","pb",")",";","pc","=","pf",".","w",";","pf","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","iV","(","oZ",")",")",";","pd","=","pf",".","xyz",";","dZ","(","pd",")",";","pe","=","pf",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pg",qualifier:["vec3"]},{type:"node_in",name:"ph",qualifier:["vec3"]},{type:"node_in",name:"pi",qualifier:["vec3"]},{type:"node_out",name:"pj",qualifier:["vec3"]},{type:"node_out",name:"pk",qualifier:["float"]},{type:"node_out",name:"pl",qualifier:["vec3"]},{type:"node_out",name:"pm",qualifier:["float"]},{type:"node_out",name:"pn",qualifier:["vec3"]},{type:"node_out",name:"po",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pp","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iV","(","pg",")",")",";","jH","=","pp",".","xyz","-","0.5",";","pj","=","normalize","(","jD","*","jH",")",";","pk","=","pp",".","w",";","pp","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iV","(","ph",")",")",";","jH","=","pp",".","xyz","-","0.5",";","pl","=","normalize","(","jD","*","jH",")",";","pm","=","pp",".","w",";","pp","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","iV","(","pi",")",")",";","jH","=","pp",".","xyz","-","0.5",";","pn","=","normalize","(","jD","*","jH",")",";","po","=","pp",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"jo",qualifier:["float"]},{type:"node_out",name:"pq",qualifier:["float"]},{type:"textline",tokens:["pq","=","jo",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"pr",qualifier:["vec3"]},{type:"node_in",name:"ps",qualifier:["vec3"]},{type:"node_out",name:"pt",qualifier:["vec3"]},{type:"node_out",name:"pu",qualifier:["float"]},{type:"textline",tokens:["pt","=","pr","+","ps",";","pu","=","(","abs","(","pt","[","0","]",")","+","abs","(","pt","[","1","]",")","+","abs","(","pt","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"pv",qualifier:["vec3"]},{type:"node_in",name:"pw",qualifier:["vec3"]},{type:"node_out",name:"px",qualifier:["vec3"]},{type:"node_out",name:"py",qualifier:["float"]},{type:"textline",tokens:["px","=","pv","-","pw",";","py","=","(","abs","(","px","[","0","]",")","+","abs","(","px","[","1","]",")","+","abs","(","px","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"pz",qualifier:["vec3"]},{type:"node_in",name:"pA",qualifier:["vec3"]},{type:"node_out",name:"pB",qualifier:["vec3"]},{type:"node_out",name:"pC",qualifier:["float"]},{type:"textline",tokens:["pB","=","pz","+","pA",";","pC","=","length","(","pB",")",";","pB","=","normalize","(","pB",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"pD",qualifier:["vec3"]},{type:"node_in",name:"pE",qualifier:["vec3"]},{type:"node_out",name:"pF",qualifier:["vec3"]},{type:"node_out",name:"pG",qualifier:["float"]},{type:"textline",tokens:["pF","=","vec3","(","iw",")",";","pG","=","dot","(","pD",",","pE",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"pH",qualifier:["vec3"]},{type:"node_in",name:"pI",qualifier:["vec3"]},{type:"node_out",name:"pJ",qualifier:["vec3"]},{type:"node_out",name:"pK",qualifier:["float"]},{type:"textline",tokens:["pJ","=","cross","(","pH",",","pI",")",";","pK","=","length","(","pJ",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"pL",qualifier:["vec3"]},{type:"node_in",name:"pM",qualifier:["vec3"]},{type:"node_out",name:"pN",qualifier:["vec3"]},{type:"node_out",name:"pO",qualifier:["float"]},{type:"textline",tokens:["pN","=","normalize","(","pL",")",";","pO","=","length","(","pL",")",";","pM",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"pP",qualifier:["vec3"]},{type:"node_in",name:"pQ",qualifier:["vec3"]},{type:"node_out",name:"pR",qualifier:["vec3"]},{type:"textline",tokens:["pR","=","reflect","(","-","pP",",","pQ",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pS",qualifier:["vec3"]},{type:"node_in",name:"pT",qualifier:["float"]},{type:"node_in",name:"pU",qualifier:["const","float"]},{type:"node_out",name:"pV",qualifier:["vec3"]},{type:"textline",tokens:["float","pW","=","length","(","jz",")",";","if","(","pW","<","10.0",")","{","float","pX","=","clamp","(","5.0","-","0.5","*","pW",",","iw",",","ix",")",";","float","pY","=","pT","*","pX",";","vec3","pZ","=","normalize","(","jx","*","jD",")",";","float","p_","=","ix","/","pU",";","vec2","qa","=","pZ",".","xy","*","pY","/","(","pU","*","pZ",".","z",")",";","float","qb","=","ix",";","vec2","qc","=","iV","(","pS",")",";","float","qd","=","texture2D","(","node_PARALLAX_var_texture",",","qc",")",".","a",";","for","(","float","qe","=","1.0",";","qe","<=","pU",";","qe","++",")","{","if","(","qd","<","qb",")","{","qb","-=","p_",";","qc","-=","qa",";","qd","=","texture2D","(","node_PARALLAX_var_texture",",","qc",")",".","a",";","}","}","vec2","qf","=","qc","+","qa",";","float","qg","=","texture2D","(","node_PARALLAX_var_texture",",","qf",")",".","a","-","(","qb","+","p_",")",";","float","qh","=","qd","-","qb",";","float","qi","=","qh","/","(","qh","-","qg",")",";","qc","=","qi","*","qf","+","(","ix","-","qi",")","*","qc",";","pV","=","iT","(","qc",")",";","}","else","pV","=","pS",";"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"qj",qualifier:["vec3"]},{type:"node_out",name:"qk",qualifier:["vec3"]},{type:"textline",tokens:["qk","=","clamp","(","qj",",","iw",",","ix",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"ql",qualifier:["float"]},{type:"node_in",name:"qm",qualifier:["float"]},{type:"node_in",name:"qn",qualifier:["float"]},{type:"node_in",name:"qo",qualifier:["float"]},{type:"node_in",name:"qp",qualifier:["float"]},{type:"node_out",name:"qq",qualifier:["float"]},{type:"node_out",name:"qr",qualifier:["vec4"]},{type:"textline",tokens:["qq","=","ql",";","qr","=","vec4","(","qm",",","qn",",","qo",",","qp",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"qs",qualifier:["float"]},{type:"textline",tokens:["qs","=","u_time",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jp","=","hX",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"textline",tokens:["vec3","jq","=","hY",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")","jq","=","-","jq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jr","=","cross","(","jq",",","hZ",".","xyz",")","*","hZ",".","w",";","mat3","js","=","mat3","(","hZ",".","xyz",",","jr",",","jq",")",";"]}]}}]},{type:"textline",tokens:["vec3","jt","=","normalize","(","jq",")",";","float","ju","=","0.5","*","jt",".","y","+","0.5",";","vec3","jv","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","ju",")",";","vec3","jw","=","u_camera_eye_frag","-","hX",";","vec3","jx","=","normalize","(","jw",")",";","vec3","jy","=","hX",";","vec4","jz","=","cr",";","float","jA","=","u_emit",";","float","jB","=","u_ambient",";","float","jC","=","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","jD","=","js",";"]}]}}]},{type:"textline",tokens:["vec3","jE",";","vec3","jF",";","vec3","jG",";","vec3","jH",";","float","jI",";","float","jJ",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","qt","=","jE",";","float","qu","=","jJ",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["iv","(","qt",",","jx",",","jG",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jH",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iv","(","qt",",","jx",",","jG",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","iw",")",")",";"]}]}}]}]}}]},{type:"textline",tokens:["qt","+=","jF",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","qv","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["qt","=","max","(","qt","-","sqrt","(","0.01","*","-","min","(","jp",",","iw",")",")",",","0.5","*","qt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["hV","(","qt",",","jp",",","u_time",",","jI",",","jq",",","u_sun_direction",",","qv",",","u_sun_quaternion",",","hX",",","length","(","cr",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","qw","=","es","(","u_cube_fog",",","jx",")",";","vec4","qx","=","vec4","(","qw",",","u_fog_color_density",".","a",")",";","dZ","(","qx",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qx","=","u_fog_color_density",";","qx",".","rgb","*=","qv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eJ","(","qt",",","length","(","cr",")",",","jx",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","qx",",","jp",",","length","(","qv",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","(","qt",",","length","(","cr",")",",","qx",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","qy","=","texture2DProj","(","u_shadow_mask",",","cq",")",".","rg",";","float","qz","=","qy",".","g",";","qt","=","vec3","(","qz",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jy","=","hX",";","vec4","jz","=","cr",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","hY",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","gl_FrontFacing",")","jq","=","-","jq",";"]}]}}]},{type:"textline",tokens:["vec3","jt","=","normalize","(","jq",")",";"]}]}}]},{type:"textline",tokens:["vec3","jE",";","float","jJ",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","qt","=","jE",";","float","qu","=","jJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","qu","<","0.5",")","discard",";","qu","=","ix",";"]}]}}]},{type:"textline",tokens:["ea","(","qt",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","qt",",","qu",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","qt",",","qu",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","hX",";","varying","vec4","cr",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","hY",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","hZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cm",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"iW",qualifier:["varying","vec2"]},{type:"textline",tokens:["iW","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"ja",qualifier:["varying","vec3"]},{type:"textline",tokens:["ja","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"jb",qualifier:["varying","float"]},{type:"textline",tokens:["jb","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"jc",qualifier:["varying","vec2"]},{type:"textline",tokens:["jc","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"jd",qualifier:["varying","vec3"]},{type:"textline",tokens:["jd","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","je","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jf","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jg","=","vec3","(","a_tangent",")",";","vec3","jh","=","a_tangent","[","3","]","*","cross","(","jf",",","jg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jg","=","vec3","(","0.0",")",";","vec3","jh","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"elif",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jf","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jf","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["je","=","mix","(","je",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["jf","=","mix","(","jf",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ji","=","vec3","(","a_tangent",")",";","vec3","jj","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","ji",")",";","jg","=","mix","(","jg",",","ji",",","u_va_frame_factor",")",";","jh","=","mix","(","jh",",","jj",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bk","(","je",",","jg",",","jh",",","jf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jk","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jl","=","(","u_model_matrix","*","vec4","(","jk",",","1.0",")",")",".","xyz",";","mat4","jm","=","Z","(","u_camera_eye",",","jl",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","(","u_model_matrix","*","vec4","(","jk",",","1.0",")",")",".","xyz",";","jm","=","jm","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jn",")",";"]}]}}]},{type:"textline",tokens:["b","jo","=","af","(","je","-","jk",",","jk",",","jg",",","jh",",","jf",",","jm",")",";","jo",".","b","=","jl",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jo","=","af","(","je",",","jk",",","jg",",","jh",",","jf",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["float","jp","=","(","dot","(","cross","(","jo",".","e",",","jo",".","c",")",",","jo",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","hZ","=","vec4","(","jo",".","c",",","jp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jl","=","(","u_model_matrix","*","vec4","(","jk",",","1.0",")",")",".","xyz",";","mat4","jm","=","Z","(","u_camera_eye",",","jl",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","(","u_model_matrix","*","vec4","(","jk",",","1.0",")",")",".","xyz",";","jm","=","jm","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jn",")",";"]}]}}]},{type:"textline",tokens:["b","jo","=","af","(","je","-","jk",",","jk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jf",",","jm",")",";","jo",".","b","=","jl",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jo","=","af","(","je",",","jk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jf",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cb","(","jo",".","a",",","jo",".","b",",","jf",")",";"]}]}}]},{type:"textline",tokens:["hX","=","jo",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["hY","=","jo",".","e",";"]}]}}]},{type:"textline",tokens:["cr","=","u_view_matrix","*","vec4","(","jo",".","a",",","1.0",")",";","vec4","jq","=","u_proj_matrix","*","cr",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["jq",".","xy","+=","u_subpixel_jitter","*","jq",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["dS","(","jq",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dS","(","jo",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","jr","=","jq",".","x",";","float","js","=","jq",".","y",";","float","jt","=","jq",".","w",";","cq",".","x","=","(","jr","+","jt",")","/","2.0",";","cq",".","y","=","(","js","+","jt",")","/","2.0",";","cq",".","z","=","jt",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","jq",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","je",";","varying","vec3","h_",";","varying","vec3","cr",";","void","main","(",")","{","float","jf","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","jg","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","jf",")",";","float","jh","=","u_diffuse_color",".","a","*","je","*","(","1.0","-","clamp","(","jg",",","0.0",",","1.0",")",")",";","vec3","ji","=","h_","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","ji",",","length","(","cr",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ea","(","ji",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","ji",",","jh",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ji",",","jh",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"include",file:"particles.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","je",";","varying","vec3","h_",";","varying","vec3","cr",";","struct","jM","{","float","iw",";","vec3","ix",";","float","iy",";","vec3","iz",";","float","iA",";","}",";","jM","jT","(",")","{","float","jN","=","u_p_time","-","u_p_starttime",";","jM","jO",";","if","(","jN","<","0.0",")","{","jO",".","iw","=","0.0001",";","jO",".","ix","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jN","<","0.0",")",")","{","float","jP",";","if","(","u_p_cyclic","==","1",")","{","float","jQ","=","u_p_endtime","-","u_p_starttime",";","jP","=","mod","(","jN",",","jQ",")","-","a_p_delay",";","if","(","jP","<","0.0",")","jP","+=","jQ",";","}","if","(","u_p_cyclic","!=","1",")","{","jP","=","jN","-","a_p_delay",";","}","if","(","jP","<","0.0","||","jP",">=","a_p_lifetime",")","{","jO",".","iw","=","0.0001",";","jO",".","ix","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jP","<","0.0","||","jP",">=","a_p_lifetime",")",")","{","vec3","jR","=","a_position",";","vec3","jS","=","a_normal",";","jR","+=","u_p_nfactor","*","jP","*","jS",";","jR","+=","a_p_vels",".","xyz","*","jP",";","jR",".","y","-=","u_p_gravity","*","jP","*","jP","/","2.0",";","jR","+=","(","u_p_wind","/","u_p_mass",")","*","jP","*","jP","/","2.0",";","jO",".","ix","=","jR",";","jO",".","iA","=","a_p_vels",".","w","*","jP",";","jO",".","iw","=","jq","(","jP",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","jO",".","iy","=","jL","(","jP",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","jO",".","iz","=","jC","(","jP",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","jO",";","}","void","main","(",")","{","jM","jU",";","jU","=","jT","(",")",";","vec4","jV","=","u_view_matrix","*","vec4","(","jU",".","ix",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","jV",";","je","=","jU",".","iy",";","h_","=","jU",".","iz",";","cr","=","jV",".","xyz",";","float","jW","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","jU",".","iw","*","jW",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","float","je",";","varying","vec3","h_",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_sampler",",","a",")",";","vec3","ix","=","iw",".","rgb",";","dZ","(","ix",")",";","ix","*=","h_",";","float","iy","=","iw",".","a","*","je",";","ea","(","ix",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","ix",",","iy",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ix",",","iy",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"include",file:"particles.glslv"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","float","u_p_size",";","varying","float","je",";","varying","vec3","h_",";","varying","vec2","a",";","varying","vec4","cr",";","struct","jM","{","float","iw",";","vec3","ix",";","float","iy",";","vec3","iz",";","float","iA",";","}",";","jM","jT","(",")","{","float","jN","=","u_p_time","-","u_p_starttime",";","jM","jO",";","if","(","jN","<","0.0",")","{","jO",".","iw","=","0.0001",";","jO",".","ix","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jN","<","0.0",")",")","{","float","jP",";","if","(","u_p_cyclic","==","1",")","{","float","jQ","=","u_p_endtime","-","u_p_starttime",";","jP","=","mod","(","jN",",","jQ",")","-","a_p_delay",";","if","(","jP","<","0.0",")","jP","+=","jQ",";","}","if","(","u_p_cyclic","!=","1",")","{","jP","=","jN","-","a_p_delay",";","}","if","(","jP","<","0.0","||","jP",">=","a_p_lifetime",")","{","jO",".","iw","=","0.0001",";","jO",".","ix","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","jP","<","0.0","||","jP",">=","a_p_lifetime",")",")","{","vec3","jR","=","a_position",";","vec3","jS","=","a_normal",";","jR","+=","u_p_nfactor","*","jP","*","jS",";","jR","+=","a_p_vels",".","xyz","*","jP",";","jR",".","y","-=","u_p_gravity","*","jP","*","jP","/","2.0",";","jR","+=","(","u_p_wind","/","u_p_mass",")","*","jP","*","jP","/","2.0",";","jO",".","ix","=","jR",";","jO",".","iA","=","a_p_vels",".","w","*","jP",";","jO",".","iw","=","jq","(","jP",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","jO",".","iy","=","jL","(","jP",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","jO",".","iz","=","jC","(","jP",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","jO",";","}","float","jW","(","vec2","jU",",","vec2","jV",")","{","return","(","atan","(","jV",".","y",",","jV",".","x",")","-","atan","(","jU",".","y",",","jU",".","x",")",")",";","}","void","main","(",")","{","jM","jX",";","jX","=","jT","(",")",";","float","jY",";","mat4","jZ",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","jY","=","jX",".","iA",";","jZ","=","x","(","jX",".","ix",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","jY","=","jX",".","iA",";","jZ","=","i","(",")",";","jZ","[","3","]","=","vec4","(","jX",".","ix",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","jY","=","jX",".","iA",";","jZ","=","m","(","radians","(","90.0",")",")",";","jZ","[","3","]","=","vec4","(","jX",".","ix",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","jY","=","jW","(","vec2","(","0.0",",","-","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","jX",".","iA",";","jZ","=","k","(","radians","(","-","90.0",")",")",";","jZ","[","3","]","=","vec4","(","jX",".","ix",",","1.0",")",";","}","vec4","j_","=","vec4","(","a_p_bb_vertex","*","2.0","*","jX",".","iw","*","u_p_size",",","0.0",",","1.0",")",";","vec4","ka","=","jZ","*","o","(","jY",")","*","j_",";","cr","=","u_view_matrix","*","ka",";","vec4","kb","=","u_proj_matrix","*","cr",";","gl_Position","=","kb",";","je","=","jX",".","iy",";","h_","=","jX",".","iz",";","a","=","a_p_bb_vertex","+","0.5",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","jM",";","const","float","jN","=","0.99",";","const","float","jO","=","1.8",";","const","int","jP","=","8",";","float","jZ","(","vec3","jQ",",","vec3","jR",")","{","float","jS","=","dot","(","jR",",","jR",")",";","float","jT","=","2.0","*","dot","(","jR",",","jQ",")",";","float","jU","=","dot","(","jQ",",","jQ",")","-","1.0",";","float","jV","=","jT","*","jT","-","4.0","*","jS","*","jU",";","float","jW","=","sqrt","(","jV",")",";","float","jX","=","(","-","jT","-","jW",")","/","2.0",";","float","jY","=","jU","/","jX",";","return","jY",";","}","float","kf","(","float","j_",",","float","ka",")","{","float","kb","=","3.0","*","(","1.0","-","ka","*","ka",")",";","float","kc","=","2.0","*","(","2.0","+","ka","*","ka",")",";","float","kd","=","1.0","+","j_","*","j_",";","float","ke","=","pow","(","1.0","+","ka","*","ka","-","2.0","*","ka","*","j_",",","1.5",")",";","return","(","kb","/","kc",")","*","(","kd","/","ke",")",";","}","float","kn","(","vec3","kg",",","vec3","kh",",","float","ki",")","{","float","kj","=","dot","(","kh",",","-","kg",")",";","if","(","kj","<","0.0",")","{","return","1.0",";","}","vec3","kk","=","kg","+","kj","*","kh",";","if","(","length","(","kk",")","<","ki",")","{","return","0.0",";","}","else","if","(","length","(","kk",")",">=","ki",")","{","vec3","kl","=","normalize","(","kk",")","*","ki","-","kg",";","float","km","=","acos","(","dot","(","normalize","(","kl",")",",","kh",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","km","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","kr","(","float","ko",",","vec3","kp",",","float","kq",")","{","return","kp","-","kp","*","pow","(","u_sky_color",",","vec3","(","kq","/","ko",")",")",";","}","void","main","(",")","{","vec3","ks","=","normalize","(","jM",")",";","vec3","kt","=","u_sun_direction",";","float","ku","=","dot","(","ks",",","kt",")",";","float","kv","=","kf","(","ku",",","-","0.01",")","*","u_rayleigh_brightness","*","kt",".","y",";","float","kw","=","kf","(","ku","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","kt",".","y",")",";","float","kx","=","smoothstep","(","0.0",",","100.0",",","kf","(","ku",",","0.9995",")",")","*","u_spot_brightness",";","vec3","ky","=","vec3","(","0.0",",","jN",",","0.0",")",";","float","kz","=","jZ","(","ky",",","ks",")",";","float","kA","=","kz","/","float","(","jP",")",";","float","kB","=","kn","(","ky",",","ks",",","jN","-","0.3",")",";","vec3","kC","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","kD","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","kE","=","0",";","kE","<","jP",";","kE","++",")","{","float","kF","=","kA","*","float","(","kE",")",";","vec3","kG","=","ky","+","ks","*","kF",";","float","kH","=","kn","(","kG",",","kt",",","jN","-","0.2",")",";","float","kI","=","jZ","(","kG",",","kt",")",";","vec3","kJ","=","kr","(","kI",",","vec3","(","jO",")",",","u_scatter_strength",")","*","kH",";","kC","+=","kr","(","sqrt","(","kF",")",",","u_sky_color","*","kJ",",","u_rayleigh_strength",")",";","kD","+=","kr","(","kF",",","kJ",",","u_mie_strength",")",";","}","kC","=","kC","*","kB","*","pow","(","kz",",","u_rayleigh_collection_power",")","/","float","(","jP",")",";","kD","=","(","kD","*","kB","*","pow","(","kz",",","u_mie_collection_power",")",")","/","float","(","jP",")",";","vec3","kK","=","vec3","(","kx","*","kD","+","kw","*","kD","+","kv","*","kC",")",";","ea","(","kK",")",";","gl_FragColor","=","vec4","(","kK",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","jM",";","void","main","(",")","{","vec4","iw","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","ix","=","u_cube_view_matrix","*","iw",";","jM","=","ix",".","xyz",";","gl_Position","=","iw",";","}"]}]},exports["shadeless.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";","varying","vec2","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","h_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cr",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iw","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ix","=","h_",";","dZ","(","ix",")",";","vec4","iy","=","vec4","(","ix",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iy","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iz","=","texture2D","(","u_colormap0",",","iw",")",";","dZ","(","iz",".","rgb",")",";","vec4","iA","=","texture2D","(","u_colormap1",",","iw",")",";","dZ","(","iA",".","rgb",")",";","vec4","iB","=","texture2D","(","u_stencil0",",","iw",")",";","vec4","iC","=","mix","(","iz",",","iA",",","iB",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","iC","=","texture2D","(","u_colormap0",",","iw","+","u_time","*","u_colormap0_uv_velocity",")",";","dZ","(","iC",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["iy",".","rgb","=","mix","(","iy",".","rgb",",","iC",".","rgb",",","u_diffuse_color_factor",")",";","iy",".","a","=","iC",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["iy",".","rgb","*=","mix","(","vec3","(","1.0",")",",","iC",".","rgb",",","u_diffuse_color_factor",")",";","iy",".","a","=","iC",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","iD","=","iy",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["float","iE","=","iy",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","iE","<","0.5",")","discard",";","iE","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iE","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["el","(","iD",",","length","(","cr",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ea","(","iD",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","iD",",","iE",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iD",",","iE",")",";","}"]}]},exports["shadeless.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cr",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","h_",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","iw","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iw","=","mix","(","iw",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ix","=","vec3","(","0.0",")",";","vec3","iy","=","vec3","(","0.0",")",";","vec3","iz","=","vec3","(","0.0",")",";","bk","(","iw",",","ix",",","iy",",","iz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iA","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iB","=","(","u_model_matrix","*","vec4","(","iA",",","1.0",")",")",".","xyz",";","mat4","iC","=","Z","(","u_camera_eye",",","iB",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iD","=","(","u_model_matrix","*","vec4","(","iA",",","1.0",")",")",".","xyz",";","iC","=","iC","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iD",")",";"]}]}}]},{type:"textline",tokens:["b","iE","=","af","(","iw","-","iA",",","iA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iC",")",";","iE",".","b","=","iB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iE","=","af","(","iw",",","iA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iF","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cb","(","iE",".","a",",","iE",".","b",",","iF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ai","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["h_","=","a_color",";"]}]}}]},{type:"textline",tokens:["cr","=","u_view_matrix","*","vec4","(","iE",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","cr",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gl_Position",".","xy","+=","u_subpixel_jitter","*","gl_Position",".","w",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_sampler",",","a",")",";","ea","(","iw",".","rgb",")",";","ed","(","iw",".","rgb",",","iw",".","a",")",";","gl_FragColor","=","iw",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","iw","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","ix","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","iw",",","0.0",")",";","ix",".","x","/=","ix",".","w",";","ix",".","y","/=","ix",".","w",";","ix","+=","99999.0","*","step","(","ix",".","z",",","0.0",")",";","ix","+=","100.0","*","(","step","(","1.0",",","abs","(","ix",".","x",")",")","+","step","(","1.0",",","abs","(","ix",".","y",")",")",")",";","ix",".","x","=","-","a_lf_dist","*","ix",".","x",";","ix",".","y","=","-","a_lf_dist","*","ix",".","y",";","float","iy","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","iz","=","vec2","(","a_lf_bb_vertex",".","x","/","iy",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","iA","=","1.9",";","iz","*=","(","1.0","+","iA","*","length","(","ix",".","xy",")",")",";","}","gl_Position","=","vec4","(","ix",".","xy","+","iz",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jM",";","void","main","(",")","{","vec3","iw","=","textureCube","(","u_sky",",","jM",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["dZ","(","iw",".","rgb",")",";","float","ix","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","ix","=","min","(","-","ix","*","0.03",",","0.8",")",";","float","iy","=","length","(","u_sun_intensity",")","+","u_environment_energy",";","vec3","iz","=","normalize","(","jM",")",";","vec3","iA","=","vec3","(","0.0",")",";","vec4","iB","=","u_underwater_fog_color_density",";","iB",".","rgb","=","mix","(","iB",".","rgb",",","iA",",","min","(","-","iz",".","y","+","ix",",","1.0",")",")","*","iy",";","float","iC","=","clamp","(","sign","(","iz",".","y","-","0.05","*","ix",")",",","0.0",",","1.0",")",";","iw","=","mix","(","iB",".","rgb",",","iw",",","iC",")",";","ea","(","iw",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","iw",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","jM",";","void","main","(",")","{","vec4","iw","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","ix","=","u_sky_vp_inverse","*","iw",";","jM","=","ix",".","xyz",";","gl_Position","=","iw",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0001"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_depth",";"]}]}},{type:"elif",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_alphamap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";","uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hW",";","varying","vec3","hX",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","hY",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","jN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jO",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","jW","(","in","float","jR",",","inout","vec2","jS",",","in","vec2","jT",")","{","vec4","jU","=","texture2D","(","u_shore_depth",",","jS",")",";","float","jV","=","ck","(","jU",")",";","if","(","jV","<","jQ",")","{","jS","=","jT",";","return","jR",";","}","else","{","return","jV",";","}","}"]}]}}]},{type:"textline",tokens:["vec3","kk","(","in","vec2","jX",",","in","vec3","jY",",","in","vec3","jZ",",","in","vec3","j_",",","out","float","ka",")","{","vec3","kb","=","reflect","(","-","jZ",",","jY",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kc","=","jX",".","xy","+","jY",".","xz","*","REFL_BUMP","/","jQ",";","ka","=","u_reflect_factor",";","vec3","kd",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kd","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kd","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","ke","=","dot","(","jZ",",","jY",")",";","ka","*=","max","(","1.0","-","1.0","/","ke",",","1.0",")",";","}","else","{","kd","=","texture2D","(","u_reflectmap",",","kc",")",".","rgb",";","dZ","(","kd",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["ka","=","u_mirror_factor",";","vec3","kd","=","j_","*","textureCube","(","u_mirrormap",",","kb",")",".","rgb",";","dZ","(","kd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ka","=","1.0",";","vec3","kd","=","j_","*","vec3","(","0.3",",","0.5",",","1.0",")",";","dZ","(","kd",")",";"]}]}}]},{type:"textline",tokens:["vec3","kf","=","normalize","(","kb","+","jZ",")",";","float","kg","=","1.0","-","dot","(","jZ",",","kf",")",";","float","kh","=","u_fresnel_params","[","3","]",";","float","ki","=","u_fresnel_params","[","2","]",";","float","kj","=","kh","+","(","1.0","-","kh",")","*","pow","(","kg",",","ki",")",";","ka","=","min","(","ka","*","kj",",","1.0",")",";","return","kd",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","kl","=","mat3","(","hZ",",","jN",",","hY",")",";"]}]}}]},{type:"textline",tokens:["vec3","km","=","normalize","(","hY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","kl","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","km","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","(","REFLECTIVE","||","FOAM","||","(","WATER_EFFECTS","&&","!","DISABLE_FOG",")",")","||","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","kn","=","hX",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ko","=","vec2","(","jO",".","x",",","-","jO",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","ko","=","vec2","(","hX",".","x",",","-","hX",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","ko","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kp","=","vec3","(","0.0",")",";","vec3","kq","=","texture2D","(","u_normalmap0",",","ko","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kp","+=","kq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kr","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["kr","+=","kq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","texture2D","(","u_normalmap0",",","ko","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kp","+=","kq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["kr","+=","kq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","texture2D","(","u_normalmap0",",","ko","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kp","+=","kq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["kr","+=","kq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","texture2D","(","u_normalmap0",",","ko","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","kp","+=","kq",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["kr","+=","kq",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ks","=","mix","(","km",",","normalize","(","kl","*","kr",")",",","0.2",")",";","ks","=","normalize","(","ks",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["km","=","mix","(","km",",","normalize","(","kl","*","kp",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["km","=","mix","(","km",",","normalize","(","kl","*","kp",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["km","=","normalize","(","km",")",";"]}]}}]},{type:"textline",tokens:["vec3","kt","=","normalize","(","hW",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ku","=","cq",".","xy","/","cq",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","kv","=","jQ","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","kw","=","u_diffuse_color",".","a",";","vec4","kx","=","texture2DProj","(","u_shore_depth",",","cq",")",";","float","ky","=","ck","(","kx",")",";","float","kz","=","max","(","ky","-","jQ",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kA","=","ku","+","km",".","xz","*","REFR_BUMP","/","jQ",";","float","kB","=","jW","(","ky",",","kA",",","ku",")",";","float","kC","=","max","(","kB","-","jQ",",","0.0",")",";","float","kD","=","u_view_max_depth","/","ABSORB","*","kC",";","float","kE",";","if","(","u_cam_water_depth","<","0.0",")","kE","=","0.0",";","else","kE","=","min","(","kw","*","kD",",","1.0",")",";","float","kF","=","u_view_max_depth","/","ABSORB","*","kz",";","kw","=","min","(","15.0","*","kw","*","u_view_max_depth","*","kz",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kF","=","u_view_max_depth","/","ABSORB","*","kz",";","if","(","u_cam_water_depth",">","0.0",")","kw","=","min","(","kw","*","kF",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["kw","*=","min","(","5.0","*","kv",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kG","=","texture2D","(","u_alphamap",",","ko",")",";","float","kw","=","kG",".","r",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kw","=","u_diffuse_color",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kE","=","1.0","-","kw",";","vec2","kA","=","ku","+","km",".","xz","*","REFR_BUMP","/","jQ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kH","=","texture2D","(","u_refractmap",",","kA",")",".","rgb",";","dZ","(","kH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kI","=","pow","(","min","(","jP",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","kJ","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","kI",")",";","kI","=","pow","(","min","(","jP",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","kJ","=","mix","(","u_shore_water_col",",","kJ",",","kI",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kJ","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","kK","=","max","(","1.0","-","u_view_max_depth","*","kz",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kK","=","1.0","-","kw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","kL","=","max","(","3.0","*","kn",",","0.0",")",";","kL","*=","kL",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kM","=","normalize","(","vec3","(","jP",".","r",",","0.0",",","jP",".","g",")",")",";","vec3","kN","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","kM",",","0.8",")",")",";","float","kO","=","max","(","2.5","*","dot","(","ks",",","kN",")","-","0.7",",","0.0",")",";","kK","+=","kO","*","(","1.0","-","jP",".","b",")",";","kL","*=","(","1.0","-","0.95","*","pow","(","jP",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["kK","+=","kL",";","kK","=","min","(","u_foam_factor","*","kK",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","kP","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","ko","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","kQ","=","u_specular_params","[","0","]",";","float","kR","=","u_specular_params","[","1","]",";","vec3","kS","=","kQ","*","u_specular_color",";","vec3","kT","=","u_environment_energy","*","u_zenith_color",";","vec3","kU","=","u_ambient","*","kT",";","vec3","kV","=","kU","+","u_sun_intensity",";","float","kW",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kX","=","kk","(","ku",",","km",",","kt",",","kV",",","kW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kX","=","kk","(","vec2","(","0.0",")",",","km",",","kt",",","kV",",","kW",")",";"]}]}}]},{type:"textline",tokens:["vec3","kY","=","u_diffuse_intensity","*","kJ",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS","&&","DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","kZ","=","max","(","dot","(","u_sun_direction",",","-","hY",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","kt",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","kZ","=","clamp","(","SSS_STRENGTH","*","kZ",",","0.0",",","1.0",")",";","kY","=","mix","(","kY",",","u_shallow_water_col",",","kZ",")",";","kY","=","mix","(","kY",",","u_shore_water_col",",","kZ",")",";"]}]}}]},{type:"textline",tokens:["eT","k_","=","gw","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","kY",",","kS",",","hX",",","km",",","kt",",","kR",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","kY","=","k_",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kY","=","mix","(","kH",",","kY",",","kE",")",";"]}]}}]},{type:"textline",tokens:["kY","=","mix","(","kY",",","kX",",","kW",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","la","=","mix","(","kP",".","g",",","kP",".","r",",","clamp","(","4.0","*","(","kK","-","0.75",")",",","0.0",",","1.0",")",")",";","la","=","mix","(","kP",".","b",",","la",",","clamp","(","2.0","*","kK","-","1.0",",","0.0",",","1.0",")",")",";","la","=","mix","(","0.0",",","la",",","kK",")",";","kY","=","mix","(","kY",",","kV",",","la",")",";"]}]}}]},{type:"textline",tokens:["kY","+=","k_",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lb","=","es","(","u_cube_fog",",","kt",")",";","vec4","lc","=","vec4","(","lb",",","u_fog_color_density",".","a",")",";","dZ","(","lc",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lc","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","eS","(","kY",",","kv",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";","}","else","{","el","(","kY",",","kv",",","lc",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["el","(","kY",",","kv",",","lc",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ea","(","kY",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kw","=","max","(","kw",",","k_",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["kw","+=","la",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","kY",",","kw",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kY",",","kw",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Z",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Z",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_cascad_step",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","hW",";","varying","vec3","hX",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","hY",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","hZ",";","varying","vec3","jN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jO",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","(","in","vec2","iw",")","{","vec2","ix","=","vec2","(","(","iw",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","SHORE_MAP_CENTER_Z","+","iw",".","y",")","/","SHORE_MAP_SIZE_Z",")","+","0.5",";","ix","=","clamp","(","ix",",","0.0",",","1.0",")",";","vec4","iy","=","texture2D","(","u_shore_dist_map",",","ix",")",";","const","vec2","iz","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","iA","=","dot","(","iy",".","ba",",","iz",")",";","vec2","iB","=","normalize","(","iy",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","iB",",","iA",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","iQ","(","inout","vec3","iD",",","in","float","iE",",","in","vec3","iF",")","{","float","iG","=","hu","(","DST_NOISE_SCALE_0","*","(","iD",".","xz","+","DST_NOISE_FREQ_0","*","iE",")",")","*","hu","(","DST_NOISE_SCALE_1","*","(","iD",".","zx","-","DST_NOISE_FREQ_1","*","iE",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","iH","=","iF",".","b",";","float","iI","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","iJ","=","sqrt","(","iH",")",";","float","iK","=","max","(","iH",",","DIR_MIN_SHR_FAC",")","*","(","sin","(","(","iJ","/","iI","+","DIR_FREQ","*","iE",")",")",")","*","max","(","hu","(","DIR_NOISE_SCALE","*","(","iD",".","xz","+","DIR_NOISE_FREQ","*","iE",")",")",",","DIR_MIN_NOISE_FAC",")",";","float","iL","=","WAVES_HEIGHT","*","mix","(","iK",",","iG",",","max","(","iJ",",","DST_MIN_FAC",")",")",";","vec2","iM","=","iF",".","rg",";","float","iN","=","WAVES_HOR_FAC","*","iK","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","iH",")",",","0.0",")",";","vec2","iO","=","iN","*","iM",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iL","=","WAVES_HEIGHT","*","iG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","iP","=","gQ","(","20.0","/","WAVES_LENGTH","*","(","iD",".","xz","-","0.25","*","iE",")",")",".","x","+","gQ","(","17.0","/","WAVES_LENGTH","*","(","iD",".","zx","+","0.1","*","iE",")",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["iD",".","xz","+=","iO",";","iP","*=","iH",";"]}]}}]},{type:"textline",tokens:["iL","+=","0.05","*","iP",";"]}]}}]},{type:"textline",tokens:["iD",".","y","+=","iL",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","iR","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","iS","=","abs","(","a_cascad_step",")",";","vec2","iT","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","iS",")",";","iR",".","y","+=","WATER_LEVEL",";","iR",".","xz","+=","iT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["b","iU","=","af","(","iR",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["jO","=","iU",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["jP","=","iC","(","iU",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","iV","=","length","(","u_wind",")",";","float","jR","=","u_time",";","jR","*=","iV",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","jS","=","iS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jS","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","jT","=","iU",".","a","+","vec3","(","jS",",","0.0",",","0.0",")",";","vec3","jU","=","iU",".","a","+","vec3","(","0.0",",","0.0",",","jS",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jV","=","iC","(","jT",".","xz",")",";","vec3","jW","=","iC","(","jU",".","xz",")",";","iQ","(","jT",",","jR",",","jV",")",";","iQ","(","jU",",","jR",",","jW",")",";","iQ","(","iU",".","a",",","jR",",","jP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iQ","(","jT",",","jR",",","vec3","(","0.0",")",")",";","iQ","(","jU",",","jR",",","vec3","(","0.0",")",")",";","iQ","(","iU",".","a",",","jR",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_cascad_step","<","0.0",")","{","jT",".","y","=","iU",".","a",".","y",";","jU",".","y","=","iU",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","jX","=","normalize","(","jT","-","iU",".","a",")",";","vec3","jY","=","normalize","(","jU","-","iU",".","a",")",";","hY","=","normalize","(","cross","(","jY",",","jX",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hZ","=","jY",";","jN","=","cross","(","hY",",","hZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jZ","=","dot","(","hY",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","j_","=","clamp","(","0.8","-","jZ",",","0.0",",","1.0",")",";","hY","=","mix","(","hY",",","vec3","(","0.0",",","1.0",",","0.0",")",",","j_",")",";"]}]}}]}]}}]},{type:"textline",tokens:["hX","=","iU",".","a",";","hW","=","u_camera_eye","-","iU",".","a",";","vec4","ka","=","u_view_matrix","*","vec4","(","iU",".","a",",","1.0",")",";","vec4","kb","=","u_proj_matrix","*","ka",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kc","=","kb",".","x",";","float","kd","=","kb",".","y",";","float","ke","=","kb",".","w",";","cq",".","x","=","(","kc","+","ke",")","/","2.0",";","cq",".","y","=","(","kd","+","ke",")","/","2.0",";","cq",".","z","=","ke",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["jQ","=","-","ka",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","kb",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jR",";","const","float","jS","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jT","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jT","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","jU","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","jV","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","jW","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","jX","=","vec3","(","0.0",")",";","float","jY","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jZ","=","sign","(","jR","-","vec3","(","0.02","*","jS",")",")",";","if","(","jZ",".","x","<","0.0","||","jZ",".","y","<","0.0","||","jZ",".","z","<","0.0",")","{","jX","=","jT",";","jY","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jZ","=","sign","(","jR","-","vec3","(","0.02","*","jS",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","jZ",".","x","<","0.0","||","jZ",".","y","<","0.0","||","jZ",".","z","<","0.0",")","jX","=","u_wireframe_edge_color",";","else","jX","=","jW",";","jY","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","jZ",".","x","<","0.0","||","jZ",".","y","<","0.0","||","jZ",".","z","<","0.0",")","jY","=","1.0",";","else","jY","=","0.0",";","jX","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","jZ",".","x","<","0.0","||","jZ",".","y","<","0.0","||","jZ",".","z","<","0.0",")","jX","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","jX","=","jU",";","else","jX","=","jV",";","jY","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","j_","=","fwidth","(","jR",")",";","vec3","ka","=","smoothstep","(","vec3","(","0.0",")",",","j_","*","jS",",","jR",")",";","float","kb","=","min","(","min","(","ka",".","x",",","ka",".","y",")",",","ka",".","z",")",";","kb","=","clamp","(","kb",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","jX","=","vec3","(","mix","(","u_wireframe_edge_color",",","jW",",","kb",")",")",";","jY","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","jX","=","u_wireframe_edge_color",";","jY","=","mix","(","1.0",",","0.0",",","kb",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","jX","=","mix","(","u_wireframe_edge_color",",","jU",",","kb",")",";","else","jX","=","mix","(","u_wireframe_edge_color",",","jV",",","kb",")",";","jY","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["ea","(","jX",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ed","(","jX",",","jY",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jX",",","jY",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","jR",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","jR","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","jR","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","jR","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","iw","=","a_position",";","vec3","ix","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["b","iy","=","af","(","iw",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["iw","=","mix","(","iw",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iz","=","vec3","(","0.0",")",";","vec3","iA","=","vec3","(","0.0",")",";","bk","(","iw",",","iz",",","iA",",","ix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iB","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","iB","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","iy","=","dQ","(","iw",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iB",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iC","=","(","u_model_matrix","*","vec4","(","iB",",","1.0",")",")",".","xyz",";","mat4","iD","=","Z","(","u_camera_eye",",","iC",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iE","=","(","u_model_matrix","*","vec4","(","iB",",","1.0",")",")",".","xyz",";","iD","=","iD","*","O","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","iE",")",";"]}]}}]},{type:"textline",tokens:["b","iy","=","af","(","iw","-","iB",",","iB",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","iD",")",";","iy",".","b","=","iC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","iy","=","af","(","iw",",","iB",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cb","(","iy",".","a",",","iy",".","b",",","ix",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","iF","=","u_view_matrix","*","vec4","(","iy",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","iF",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","ix","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","iw","[","0","]",",","ix","[","1","]",",","ix","[","2","]",",","iw","[","3","]","+","ix","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","iz","(","float","iw",",","float","ix",")","{","vec2","iy","=","a","+","vec2","(","iw",",","ix",")","*","u_texel_size",";","return","texture2D","(","u_color",",","iy",")",";","}","float","iD","(","vec4","iA",")","{","vec3","iB","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","iC","=","dot","(","iA",".","rgb",",","iB",")",";","return","iC",";","}","vec4","jS","(",")","{","vec4","iE","=","iz","(","-","1.0",",","-","1.0",")",";","vec4","iF","=","iz","(","1.0",",","-","1.0",")",";","vec4","iG","=","iz","(","-","1.0",",","1.0",")",";","vec4","iH","=","iz","(","1.0",",","1.0",")",";","vec4","iI","=","iz","(","0.0",",","0.0",")",";","float","iJ","=","iD","(","iE",")",";","float","iK","=","iD","(","iF",")",";","float","iL","=","iD","(","iG",")",";","float","iM","=","iD","(","iH",")",";","float","iN","=","iD","(","iI",")",";","float","iO","=","min","(","iN",",","min","(","min","(","iJ",",","iK",")",",","min","(","iL",",","iM",")",")",")",";","float","iP","=","max","(","iN",",","max","(","max","(","iJ",",","iK",")",",","max","(","iL",",","iM",")",")",")",";","vec2","iQ",";","iQ",".","x","=","-","(","(","iJ","+","iK",")","-","(","iL","+","iM",")",")",";","iQ",".","y","=","(","(","iJ","+","iL",")","-","(","iK","+","iM",")",")",";","float","iR","=","max","(","(","iJ","+","iK","+","iL","+","iM",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","iS","=","1.0","/","(","min","(","abs","(","iQ",".","x",")",",","abs","(","iQ",".","y",")",")","+","iR",")",";","iQ","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","iQ","*","iS",")",")","*","u_texel_size",";","vec4","iT","=","0.5","*","(","texture2D","(","u_color",",","a","+","iQ","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","iQ","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","iU","=","iT","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","iQ","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","iQ","*","0.5",")",")",";","float","iV","=","iD","(","iU",")",";","if","(","(","iV","<","iO",")","||","(","iV",">","iP",")",")","return","iT",";","else","return","iU",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","lD","(",")","{","vec2","jT",";","jT",".","x","=","a",".","x",";","jT",".","y","=","a",".","y",";","vec4","jU","=","texture2D","(","u_color",",","jT",")",";","vec4","jV","=","iz","(","0.0",",","1.0",")",";","vec4","jW","=","iz","(","1.0",",","0.0",")",";","vec4","jX","=","iz","(","0.0",",","-","1.0",")",";","vec4","jY","=","iz","(","-","1.0",",","0.0",")",";","float","jZ","=","iD","(","jV",")",";","float","j_","=","iD","(","jW",")",";","float","ka","=","iD","(","jX",")",";","float","kb","=","iD","(","jY",")",";","float","kc","=","iD","(","jU",")",";","float","kd","=","max","(","jZ",",","kc",")",";","float","ke","=","min","(","jZ",",","kc",")",";","float","kf","=","max","(","j_",",","kd",")",";","float","kg","=","min","(","j_",",","ke",")",";","float","kh","=","max","(","ka",",","kb",")",";","float","ki","=","min","(","ka",",","kb",")",";","float","kj","=","max","(","kh",",","kf",")",";","float","kk","=","min","(","ki",",","kg",")",";","float","kl","=","kj","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","km","=","kj","-","kk",";","float","kn","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","kl",")",";","bool","ko","=","km","<","kn",";","if","(","ko",")","return","jU",";","vec4","kp","=","iz","(","-","1.0",",","-","1.0",")",";","vec4","kq","=","iz","(","1.0",",","1.0",")",";","vec4","kr","=","iz","(","1.0",",","-","1.0",")",";","vec4","ks","=","iz","(","-","1.0",",","1.0",")",";","float","kt","=","iD","(","kp",")",";","float","ku","=","iD","(","kq",")",";","float","kv","=","iD","(","kr",")",";","float","kw","=","iD","(","ks",")",";","float","kx","=","ka","+","jZ",";","float","ky","=","kb","+","j_",";","float","kz","=","1.0","/","km",";","float","kA","=","kx","+","ky",";","float","kB","=","(","-","2.0","*","kc",")","+","kx",";","float","kC","=","(","-","2.0","*","kc",")","+","ky",";","float","kD","=","kv","+","ku",";","float","kE","=","kt","+","kv",";","float","kF","=","(","-","2.0","*","j_",")","+","kD",";","float","kG","=","(","-","2.0","*","ka",")","+","kE",";","float","kH","=","kt","+","kw",";","float","kI","=","kw","+","ku",";","float","kJ","=","(","abs","(","kB",")","*","2.0",")","+","abs","(","kF",")",";","float","kK","=","(","abs","(","kC",")","*","2.0",")","+","abs","(","kG",")",";","float","kL","=","(","-","2.0","*","kb",")","+","kH",";","float","kM","=","(","-","2.0","*","jZ",")","+","kI",";","float","kN","=","abs","(","kL",")","+","kJ",";","float","kO","=","abs","(","kM",")","+","kK",";","float","kP","=","kH","+","kD",";","float","kQ","=","u_texel_size",".","x",";","bool","kR","=","kN",">=","kO",";","float","kS","=","kA","*","2.0","+","kP",";","if","(","!","kR",")","ka","=","kb",";","if","(","!","kR",")","jZ","=","j_",";","if","(","kR",")","kQ","=","u_texel_size",".","y",";","float","kT","=","(","kS","*","(","1.0","/","12.0",")",")","-","kc",";","float","kU","=","ka","-","kc",";","float","kV","=","jZ","-","kc",";","float","kW","=","ka","+","kc",";","float","kX","=","jZ","+","kc",";","bool","kY","=","abs","(","kU",")",">=","abs","(","kV",")",";","float","kZ","=","max","(","abs","(","kU",")",",","abs","(","kV",")",")",";","if","(","kY",")","kQ","=","-","kQ",";","float","k_","=","clamp","(","abs","(","kT",")","*","kz",",","0.0",",","1.0",")",";","vec2","la",";","la",".","x","=","jT",".","x",";","la",".","y","=","jT",".","y",";","vec2","lb",";","lb",".","x","=","(","!","kR",")","?","0.0",":","u_texel_size",".","x",";","lb",".","y","=","(","kR",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","kR",")","la",".","x","+=","kQ","*","0.5",";","if","(","kR",")","la",".","y","+=","kQ","*","0.5",";","vec2","lc",";","lc",".","x","=","la",".","x","-","lb",".","x",";","lc",".","y","=","la",".","y","-","lb",".","y",";","vec2","ld",";","ld",".","x","=","la",".","x","+","lb",".","x",";","ld",".","y","=","la",".","y","+","lb",".","y",";","float","le","=","(","(","-","2.0",")","*","k_",")","+","3.0",";","float","lf","=","iD","(","texture2D","(","u_color",",","lc",")",")",";","float","lg","=","k_","*","k_",";","float","lh","=","iD","(","texture2D","(","u_color",",","ld",")",")",";","if","(","!","kY",")","kW","=","kX",";","float","li","=","kZ","*","1.0","/","4.0",";","float","lj","=","kc","-","kW","*","0.5",";","float","lk","=","le","*","lg",";","bool","ll","=","lj","<","0.0",";","lf","-=","kW","*","0.5",";","lh","-=","kW","*","0.5",";","bool","lm","=","abs","(","lf",")",">=","li",";","bool","ln","=","abs","(","lh",")",">=","li",";","if","(","!","lm",")","lc",".","x","-=","lb",".","x","*","1.5",";","if","(","!","lm",")","lc",".","y","-=","lb",".","y","*","1.5",";","bool","lo","=","(","!","lm",")","||","(","!","ln",")",";","if","(","!","ln",")","ld",".","x","+=","lb",".","x","*","1.5",";","if","(","!","ln",")","ld",".","y","+=","lb",".","y","*","1.5",";","if","(","lo",")","{","if","(","!","lm",")","lf","=","iD","(","texture2D","(","u_color",",","lc",".","xy",")",")",";","if","(","!","ln",")","lh","=","iD","(","texture2D","(","u_color",",","ld",".","xy",")",")",";","if","(","!","lm",")","lf","=","lf","-","kW","*","0.5",";","if","(","!","ln",")","lh","=","lh","-","kW","*","0.5",";","lm","=","abs","(","lf",")",">=","li",";","ln","=","abs","(","lh",")",">=","li",";","if","(","!","lm",")","lc",".","x","-=","lb",".","x","*","2.0",";","if","(","!","lm",")","lc",".","y","-=","lb",".","y","*","2.0",";","lo","=","(","!","lm",")","||","(","!","ln",")",";","if","(","!","ln",")","ld",".","x","+=","lb",".","x","*","2.0",";","if","(","!","ln",")","ld",".","y","+=","lb",".","y","*","2.0",";","if","(","lo",")","{","if","(","!","lm",")","lf","=","iD","(","texture2D","(","u_color",",","lc",".","xy",")",")",";","if","(","!","ln",")","lh","=","iD","(","texture2D","(","u_color",",","ld",".","xy",")",")",";","if","(","!","lm",")","lf","=","lf","-","kW","*","0.5",";","if","(","!","ln",")","lh","=","lh","-","kW","*","0.5",";","lm","=","abs","(","lf",")",">=","li",";","ln","=","abs","(","lh",")",">=","li",";","if","(","!","lm",")","lc",".","x","-=","lb",".","x","*","2.0",";","if","(","!","lm",")","lc",".","y","-=","lb",".","y","*","2.0",";","lo","=","(","!","lm",")","||","(","!","ln",")",";","if","(","!","ln",")","ld",".","x","+=","lb",".","x","*","2.0",";","if","(","!","ln",")","ld",".","y","+=","lb",".","y","*","2.0",";","if","(","lo",")","{","if","(","!","lm",")","lf","=","iD","(","texture2D","(","u_color",",","lc",".","xy",")",")",";","if","(","!","ln",")","lh","=","iD","(","texture2D","(","u_color",",","ld",".","xy",")",")",";","if","(","!","lm",")","lf","=","lf","-","kW","*","0.5",";","if","(","!","ln",")","lh","=","lh","-","kW","*","0.5",";","lm","=","abs","(","lf",")",">=","li",";","ln","=","abs","(","lh",")",">=","li",";","if","(","!","lm",")","lc",".","x","-=","lb",".","x","*","4.0",";","if","(","!","lm",")","lc",".","y","-=","lb",".","y","*","4.0",";","lo","=","(","!","lm",")","||","(","!","ln",")",";","if","(","!","ln",")","ld",".","x","+=","lb",".","x","*","4.0",";","if","(","!","ln",")","ld",".","y","+=","lb",".","y","*","4.0",";","if","(","lo",")","{","if","(","!","lm",")","lf","=","iD","(","texture2D","(","u_color",",","lc",".","xy",")",")",";","if","(","!","ln",")","lh","=","iD","(","texture2D","(","u_color",",","ld",".","xy",")",")",";","if","(","!","lm",")","lf","=","lf","-","kW","*","0.5",";","if","(","!","ln",")","lh","=","lh","-","kW","*","0.5",";","lm","=","abs","(","lf",")",">=","li",";","ln","=","abs","(","lh",")",">=","li",";","if","(","!","lm",")","lc",".","x","-=","lb",".","x","*","2.0",";","if","(","!","lm",")","lc",".","y","-=","lb",".","y","*","2.0",";","if","(","!","ln",")","ld",".","x","+=","lb",".","x","*","2.0",";","if","(","!","ln",")","ld",".","y","+=","lb",".","y","*","2.0",";","}","}","}","}","float","lp","=","jT",".","x","-","lc",".","x",";","float","lq","=","ld",".","x","-","jT",".","x",";","if","(","!","kR",")","lp","=","jT",".","y","-","lc",".","y",";","if","(","!","kR",")","lq","=","ld",".","y","-","jT",".","y",";","bool","lr","=","(","lf","<","0.0",")","!=","ll",";","float","ls","=","(","lq","+","lp",")",";","bool","lt","=","(","lh","<","0.0",")","!=","ll",";","float","lu","=","1.0","/","ls",";","bool","lv","=","lp","<","lq",";","float","lw","=","min","(","lp",",","lq",")",";","bool","lx","=","lv","?","lr",":","lt",";","float","ly","=","lk","*","lk",";","float","lz","=","(","lw","*","(","-","lu",")",")","+","0.5",";","float","lA","=","ly","*","FXAA_QUALITY_SUBPIX",";","float","lB","=","lx","?","lz",":","0.0",";","float","lC","=","max","(","lB",",","lA",")",";","if","(","!","kR",")","jT",".","x","+=","lC","*","kQ",";","if","(","kR",")","jT",".","y","+=","lC","*","kQ",";","return","texture2D","(","u_color",",","jT",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","jS","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","lD","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","iw","=","vec2","(","0.0",",","0.0",")",";","vec2","ix","=","u_texel_size",";","vec4","iy","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iy","*","0.0875447373698",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0858112354248",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0808139781061",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0731235112908",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0635705267419",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0530985673112",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0426125984122",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0328565115809",";","iw","+=","ix",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","iw",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","iw",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","iy",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_main",",","a",")",";","vec4","ix","=","texture2D","(","u_bloom",",","a",")",";","vec4","iy","=","iw",";","iy","+=","ix",";","gl_FragColor","=","vec4","(","iy",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/blur_depth.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","vec2","u_camera_range",";","uniform","float","u_blur_depth_edge_size",";","uniform","float","u_blur_depth_diff_threshold",";","varying","vec2","a",";","float","ka","(","in","vec2","j_",")","{","return","jZ","(","u_depth",",","j_",",","u_camera_range",")",";","}","void","main","(",")","{","vec2","kb","=","u_texel_size",";","vec4","kc","=","texture2D","(","u_color",",","a",")",";","float","kd","=","ka","(","a",")",";","float","ke","=","ka","(","a","+","u_blur_depth_edge_size","*","kb",")",";","float","kf","=","ka","(","a","-","u_blur_depth_edge_size","*","kb",")",";","float","kg","=","abs","(","kd","-","ke",")",";","float","kh","=","abs","(","kd","-","kf",")",";","float","ki","=","max","(","kg",",","kh",")",";","if","(","ki",">","u_blur_depth_diff_threshold",")","{","gl_FragColor","=","kc",";","return",";","}","vec2","kj","=","vec2","(","0.0",",","0.0",")",";","gl_FragColor","=","kc","*","0.2270270270",";","kj","+=","kb",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kj",")","*","0.1945945946",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kj",")","*","0.1945945946",",","kj","+=","kb",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kj",")","*","0.1216216216",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kj",")","*","0.1216216216",",","kj","+=","kb",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kj",")","*","0.0540540541",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kj",")","*","0.0540540541",",","kj","+=","kb",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kj",")","*","0.0162162162",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kj",")","*","0.0162162162",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_color",",","a",")",";","vec3","ix","=","iw",".","rgb",";","if","(","u_brightness","<","0.0",")","ix","=","ix","*","(","1.0","+","u_brightness",")",";","else","ix","=","ix","+","(","(","1.0","-","ix",")","*","u_brightness",")",";","ix","=","(","ix","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","ix","*=","u_exposure",";","vec3","iy","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","iz","=","dot","(","ix",",","iy",")",";","ix","=","mix","(","vec3","(","iz",")",",","ix",",","u_saturation",")",";","gl_FragColor","=","vec4","(","ix",",","iw",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cg","(","clamp","(","jZ","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","j_","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","ka","=","jZ","(","u_depth",",","a",",","u_camera_range",")",";","ka","*=","u_view_max_depth",";","float","kb",";","if","(","ka","<","u_dof_dist",")","kb","=","(","u_dof_dist","-","ka",")","/","u_dof_front",";","else","kb","=","(","ka","-","u_dof_dist",")","/","u_dof_rear",";","kb","=","clamp","(","kb",",","0.0",",","1.0",")",";","vec4","kc","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","j_",",","kc",",","kb",")",";","}","else","gl_FragColor","=","j_",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","iB","(","float","iw",",","float","ix",",","float","iy",")","{","vec2","iz","=","a","+","vec2","(","iw",",","ix",")","*","u_texel_size",";","vec4","iA","=","texture2D","(","u_sampler",",","iz",")","*","iy",";","return","ck","(","iA",")",";","}","void","main","(",")","{","float","iC","=","(","iB","(","-","1.0",",","-","1.0",",","-","1.0",")","+","iB","(","0.0",",","-","1.0",",","-","1.0",")","+","iB","(","1.0",",","-","1.0",",","-","1.0",")","+","iB","(","-","1.0",",","0.0",",","-","1.0",")","+","iB","(","0.0",",","0.0",",","8.0",")","+","iB","(","1.0",",","0.0",",","-","1.0",")","+","iB","(","-","1.0",",","1.0",",","-","1.0",")","+","iB","(","0.0",",","1.0",",","-","1.0",")","+","iB","(","1.0",",","1.0",",","-","1.0",")",")",";","iC","*=","1000.0",";","gl_FragColor","=","vec4","(","iC",",","iC",",","iC",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","iw",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","ix","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","iy","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","iz","=","iy",".","a","-","ix",".","a",";","if","(","iz","!=","0.0",")","{","float","iA","=","smoothstep","(","0.0",",","1.0",",","iy",".","a",")",";","if","(","ix",".","a","==","0.0",")","{","vec3","iB","=","u_glow_color",";","ea","(","iB",")",";","vec4","iC","=","vec4","(","clamp","(","iB",",","0.0",",","1.0",")",",","iA",")",";","gl_FragColor","=","mix","(","iw",",","iC",",","iA",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","vec3","u_sun_intensity",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","j_",";","varying","vec2","ka",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","kb",";","void","main","(",")","{","vec3","kc","=","u_sun_intensity",";","vec2","kd","=","(","kb",".","xy","-","a",")",";","float","ke","=","length","(","kd",")",";","vec2","kf","=","u_radial_blur_step","*","kd","/","ke",";","float","kg","=","ke","/","u_radial_blur_step",";","kf","*=","min","(","kg",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","kg","=","max","(","kg",",","STEPS_PER_PASS",")",";","vec2","kh","=","a",";","float","ki","=","0.0",";","for","(","float","kj","=","0.0",";","kj","<","STEPS_PER_PASS",";","kj","+=","1.0",")","{","if","(","kj","<=","kg",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","kk","=","jZ","(","u_input",",","kh",",","u_camera_range",")",";","ki","+=","(","1.0","-","pow","(","ke",",","0.3",")",")","*","step","(","0.9",",","kk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ki","+=","texture2D","(","u_input",",","kh",")",".","r",";"]}]}}]},{type:"textline",tokens:["}","kh","+=","kf",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kl","=","a","+","ka",";","float","km","=","gQ","(","vec2","(","2.5","*","(","kl",".","x",")",",","2.5","*","(","kl",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","gQ","(","vec2","(","5.0","*","(","kl",".","x",")","-","0.66","*","u_time",",","5.0","*","(","kl",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","hu","(","vec2","(","7.5","*","(","kl",".","x",")","+","0.33","*","u_time",",","7.5","*","(","kl",".","y",")","-","0.33","*","u_time",")",")",";","km","*=","clamp","(","1.2","-","sqrt","(","0.2","*","ke",")",",","0.0",",","1.0",")","*","j_",";","ki","=","max","(","km",",","ki",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ki","/","STEPS_PER_PASS","*","clamp","(","kc",",","0.4",",","0.8",")",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","j_",";","varying","vec2","ka",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","kb",";","void","iD","(","in","vec4","iw",",","in","vec3","ix",",","out","vec3","iy",")","{","float","iz","=","iw",".","w","*","ix",".","x","+","iw",".","y","*","ix",".","z","-","iw",".","z","*","ix",".","y",";","float","iA","=","iw",".","w","*","ix",".","y","+","iw",".","z","*","ix",".","x","-","iw",".","x","*","ix",".","z",";","float","iB","=","iw",".","w","*","ix",".","z","+","iw",".","x","*","ix",".","y","-","iw",".","y","*","ix",".","x",";","float","iC","=","-","iw",".","x","*","ix",".","x","-","iw",".","y","*","ix",".","y","-","iw",".","z","*","ix",".","z",";","iy",".","x","=","iz","*","iw",".","w","-","iC","*","iw",".","x","-","iA","*","iw",".","z","+","iB","*","iw",".","y",";","iy",".","y","=","iA","*","iw",".","w","-","iC","*","iw",".","y","-","iB","*","iw",".","x","+","iz","*","iw",".","z",";","iy",".","z","=","iB","*","iw",".","w","-","iC","*","iw",".","z","-","iz","*","iw",".","y","+","iA","*","iw",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","iE","=","normalize","(","u_sun_direction",")",";","kb","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","iE",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","j_","=","1.0",";","vec3","iF","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","iG",";","iD","(","u_camera_quat",",","iF",",","iG",")",";","iG","=","normalize","(","iG",")",";","float","iH","=","dot","(","iG",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","iI","=","atan","(","iG",".","x",",","iG",".","z",")",";","ka","=","vec2","(","-","iI",",","acos","(","iH",")",")",";","}","else","{","j_","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["kb",".","x","/=","kb",".","w",";","kb",".","y","/=","kb",".","w",";","kb",".","x","=","0.5","*","(","kb",".","x","+","1.0",")",";","kb",".","y","=","0.5","*","(","kb",".","y","+","1.0",")",";","kb","+=","99999.0","*","step","(","kb",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_main",",","a",")",";","dZ","(","iw",".","rgb",")",";","vec3","ix","=","iw",".","rgb","+","u_god_rays_intensity","*","(","texture2D","(","u_god_rays",",","a",")",")",".","rgb",";","ea","(","ix",")",";","gl_FragColor",".","rgb","=","ix",";","gl_FragColor",".","a","=","iw",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_color",",","a",")","*","0.38026",";","iw","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","iw","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","iw","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","iw","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","iw","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","iw","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","iw","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","iw","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","iw",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_input",",","a",")",";","float","ix","=","dot","(","iw",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","ix",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","iw",";","float","ix","=","0.0",";","for","(","float","iy","=","0.025",";","iy","<","1.0",";","iy","+=","0.05",")","for","(","float","iz","=","0.025",";","iz","<","1.0",";","iz","+=","0.05",")","{","iw","=","max","(","texture2D","(","u_input",",","vec2","(","iy",",","iz",")",")",".","r",",","0.01",")",";","ix","+=","log","(","iw",")",";","}","float","iA","=","exp","(","ix","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","iA",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","kc",";","void","main","(",")","{","float","kd","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","ke","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","kf","=","texture2D","(","u_main",",","a",")",";","float","kg","=","ke","/","kd",";","float","kh","=","u_bloom_edge_lum",";","gl_FragColor","=","kf","*","max","(","kg","-","kh",",","0.0",")","*","kc",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","kc",";","const","vec3","iw","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","iE","(","in","vec4","ix",",","in","vec3","iy",",","out","vec3","iz",")","{","float","iA","=","ix",".","w","*","iy",".","x","+","ix",".","y","*","iy",".","z","-","ix",".","z","*","iy",".","y",";","float","iB","=","ix",".","w","*","iy",".","y","+","ix",".","z","*","iy",".","x","-","ix",".","x","*","iy",".","z",";","float","iC","=","ix",".","w","*","iy",".","z","+","ix",".","x","*","iy",".","y","-","ix",".","y","*","iy",".","x",";","float","iD","=","-","ix",".","x","*","iy",".","x","-","ix",".","y","*","iy",".","y","-","ix",".","z","*","iy",".","z",";","iz",".","x","=","iA","*","ix",".","w","-","iD","*","ix",".","x","-","iB","*","ix",".","z","+","iC","*","ix",".","y",";","iz",".","y","=","iB","*","ix",".","w","-","iD","*","ix",".","y","-","iC","*","ix",".","x","+","iA","*","ix",".","z",";","iz",".","z","=","iC","*","ix",".","w","-","iD","*","ix",".","z","-","iA","*","ix",".","y","+","iB","*","ix",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","iF",";","iE","(","u_camera_quat",",","iw",",","iF",")",";","kc","=","dot","(","-","iF",",","u_sun_direction",")","*","u_bloom_key",";","kc","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","iw","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","ix","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","iw","-","ix",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","iw","+","u_motion_blur_exp","*","ix",";","}","else","{","gl_FragColor","=","iw",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","iw","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","iw",".","r","+","iw",".","g","+","iw",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ix","=","vec2","(","0.0",",","0.0",")",";","vec2","iy","=","u_texel_size",";","vec4","iz",";","iz","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iz","*","0.2270270270",";","ix","+=","iy",";","iz","=","texture2D","(","u_color",",","a","+","ix",")",";","gl_FragColor","+=","iz","*","0.1945945946",";","iz","=","texture2D","(","u_color",",","a","-","ix",")",";","gl_FragColor","+=","iz","*","0.1945945946",";","ix","+=","iy",";","iz","=","texture2D","(","u_color",",","a","+","ix",")",";","gl_FragColor","+=","iz","*","0.1216216216",";","iz","=","texture2D","(","u_color",",","a","-","ix",")",";","gl_FragColor","+=","iz","*","0.1216216216",";","ix","+=","iy",";","iz","=","texture2D","(","u_color",",","a","+","ix",")",";","gl_FragColor","+=","iz","*","0.0540540541",";","iz","=","texture2D","(","u_color",",","a","-","ix",")",";","gl_FragColor","+=","iz","*","0.0540540541",";","ix","+=","iy",";","iz","=","texture2D","(","u_color",",","a","+","ix",")",";","gl_FragColor","+=","iz","*","0.0162162162",";","iz","=","texture2D","(","u_color",",","a","-","ix",")",";","gl_FragColor","+=","iz","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","iy","=","u_texel_size",";","vec4","iz","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","iz",";","if","(","iz",".","a","==","0.0",")","{","iz","=","texture2D","(","u_color",",","a","+","iy",")",";","if","(","iz",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","iz",".","a",")",";","else","{","iz","=","texture2D","(","u_color",",","a","-","iy",")",";","if","(","iz",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","iz",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kd",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kd","[","3","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","ke",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"textline",tokens:["vec3","kl","(","vec2","kf",",","vec4","kg","[","3","]",",","sampler2D","kh",")","{","float","ki","=","texture2D","(","kh",",","kf",")",".","r",";","float","kj","=","texture2D","(","kh",",","kg","[","0","]",".","xy",")",".","r",";","float","kk","=","texture2D","(","kh",",","kg","[","0","]",".","zw",")",".","r",";","return","vec3","(","ki",",","kj",",","kk",")",";","}","vec2","ks","(","vec2","km",",","vec4","kn","[","3","]",",","sampler2D","ko",")","{","vec3","kp","=","kl","(","km",",","kn",",","ko",")",";","vec2","kq","=","abs","(","kp",".","xx","-","kp",".","yz",")",";","vec2","kr","=","step","(","SMAA_PREDICATION_THRESHOLD",",","kq",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","kr",")",";","}","void","kw","(","bvec2","kt",",","inout","vec2","ku",",","vec2","kv",")","{","if","(","kt",".","x",")","ku",".","x","=","kv",".","x",";","if","(","kt",".","y",")","ku",".","y","=","kv",".","y",";","}","void","kw","(","bvec4","kx",",","inout","vec4","ky",",","vec4","kz",")","{","kw","(","kx",".","xy",",","ky",".","xy",",","kz",".","xy",")",";","kw","(","kx",".","zw",",","ky",".","zw",",","kz",".","zw",")",";","}","vec2","kB","(","vec2","kA",")","{","return","sign","(","kA",")","*","floor","(","abs","(","kA",")","+",".5",")",";","}","vec4","kB","(","vec4","kC",")","{","return","sign","(","kC",")","*","floor","(","abs","(","kC",")","+",".5",")",";","}","vec2","kU","(","vec2","kD",",","vec4","kE","[","3","]",",","sampler2D","kF"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","kG"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kH","=","ks","(","kD",",","kE",",","kG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","kH","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","kI","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","kJ","=","dot","(","texture2D","(","kF",",","kD",")",".","rgb",",","kI",")",";","float","kK","=","dot","(","texture2D","(","kF",",","kE","[","0","]",".","xy",")",".","rgb",",","kI",")",";","float","kL","=","dot","(","texture2D","(","kF",",","kE","[","0","]",".","zw",")",".","rgb",",","kI",")",";","vec4","kM",";","kM",".","xy","=","abs","(","kJ","-","vec2","(","kK",",","kL",")",")",";","vec2","kN","=","step","(","kH",",","kM",".","xy",")",";","if","(","dot","(","kN",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","kO","=","dot","(","texture2D","(","kF",",","kE","[","1","]",".","xy",")",".","rgb",",","kI",")",";","float","kP","=","dot","(","texture2D","(","kF",",","kE","[","1","]",".","zw",")",".","rgb",",","kI",")",";","kM",".","zw","=","abs","(","kJ","-","vec2","(","kO",",","kP",")",")",";","vec2","kQ","=","max","(","kM",".","xy",",","kM",".","zw",")",";","float","kR","=","dot","(","texture2D","(","kF",",","kE","[","2","]",".","xy",")",".","rgb",",","kI",")",";","float","kS","=","dot","(","texture2D","(","kF",",","kE","[","2","]",".","zw",")",".","rgb",",","kI",")",";","kM",".","zw","=","abs","(","vec2","(","kK",",","kL",")","-","vec2","(","kR",",","kS",")",")",";","kQ","=","max","(","kQ",".","xy",",","kM",".","zw",")",";","float","kT","=","max","(","kQ",".","x",",","kQ",".","y",")",";","kN",".","xy","*=","step","(","kT",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","kM",".","xy",")",";","return","kN",";","}"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kW","(","vec2","kV",")","{","kV",".","r","=","kV",".","r","*","abs","(","5.0","*","kV",".","r","-","5.0","*","0.75",")",";","return","kB","(","kV",")",";","}","vec4","kW","(","vec4","kX",")","{","kX",".","rb","=","kX",".","rb","*","abs","(","5.0","*","kX",".","rb","-","5.0","*","0.75",")",";","return","kB","(","kX",")",";","}","vec2","le","(","sampler2D","kY",",","vec2","kZ",",","vec2","k_",",","out","vec2","la",")","{","vec4","lb","=","vec4","(","kZ",",","-","1.0",",","1.0",")",";","vec3","lc","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","ld","=","0",";","ld","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","ld","++",")","{","if","(","lb",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","lb",".","w",">","0.9",")","{","lb",".","xyz","+=","lc","*","vec3","(","k_",",","1.0",")",";","la","=","texture2D","(","kY",",","lb",".","xy",",","0.0",")",".","rg",";","lb",".","w","=","dot","(","la",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","lb",".","zw",";","}","vec2","lm","(","sampler2D","lf",",","vec2","lg",",","vec2","lh",",","out","vec2","li",")","{","vec4","lj","=","vec4","(","lg",",","-","1.0",",","1.0",")",";","lj",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","lk","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","ll","=","0",";","ll","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","ll","++",")","{","if","(","lj",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","lj",".","w",">","0.9",")","{","lj",".","xyz","=","lk","*","vec3","(","lh",",","1.0",")","+","lj",".","xyz",";","li","=","texture2D","(","lf",",","lj",".","xy",",","0.0",")",".","rg",";","li","=","kW","(","li",")",";","lj",".","w","=","dot","(","li",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","lj",".","zw",";","}","vec2","ls","(","sampler2D","ln",",","vec2","lo",",","vec2","lp",",","float","lq",")","{","vec2","lr","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","lp","+","lo",";","lr","=","SMAA_AREATEX_PIXEL_SIZE","*","lr","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","lr",".","x","+=","0.5",";","lr",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","lq",";","return","texture2D","(","ln",",","lr",",","0.0",")",".","rg",";","}","vec2","lH","(","sampler2D","lt",",","sampler2D","lu",",","vec2","lv",",","vec2","lw",",","vec4","lx",")","{","vec2","ly","=","vec2","(","0.0",",","0.0",")",";","vec4","lz",";","vec2","lA",";","if","(","lw",".","r",">","0.0",")","{","lz",".","xz","=","le","(","lt",",","lv",",","vec2","(","-","1.0",",","1.0",")",",","lA",")",";","lz",".","x","+=","float","(","lA",".","y",">","0.9",")",";","}","else","lz",".","xz","=","vec2","(","0.0",",","0.0",")",";","lz",".","yw","=","le","(","lt",",","lv",",","vec2","(","1.0",",","-","1.0",")",",","lA",")",";","if","(","lz",".","x","+","lz",".","y",">","2.0",")","{","vec4","lB","=","vec4","(","-","lz",".","x","+","0.25",",","lz",".","x",",","lz",".","y",",","-","lz",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","lv",".","xyxy",";","vec4","lC",";","lC",".","xy","=","texture2D","(","lt",",","lB",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","lC",".","zw","=","texture2D","(","lt",",","lB",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","lC",".","yxwz","=","kW","(","lC",".","xyzw",")",";","vec2","lD","=","vec2","(","2.0",",","2.0",")","*","lC",".","xz","+","lC",".","yw",";","kw","(","bvec2","(","step","(","0.9",",","lz",".","zw",")",")",",","lD",",","vec2","(","0.0",",","0.0",")",")",";","ly","+=","ls","(","lu",",","lz",".","xy",",","lD",",","lx",".","z",")",";","}","lz",".","xz","=","lm","(","lt",",","lv",",","vec2","(","-","1",",","-","1",")",",","lA",")",";","if","(","texture2D","(","lt",",","lv","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","lz",".","yw","=","lm","(","lt",",","lv",",","vec2","(","1",",","1",")",",","lA",")",";","lz",".","y","+=","float","(","lA",".","y",">","0.9",")",";","}","else","lz",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","lz",".","x","+","lz",".","y",">","2.0",")","{","vec4","lE","=","vec4","(","-","lz",".","x",",","-","lz",".","x",",","lz",".","y",",","lz",".","y",")","*","u_texel_size",".","xyxy","+","lv",".","xyxy",";","vec4","lF",";","lF",".","x","=","texture2D","(","lt",",","lE",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","lF",".","y","=","texture2D","(","lt",",","lE",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","lF",".","zw","=","texture2D","(","lt",",","lE",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","lG","=","vec2","(","2.0",",","2.0",")","*","lF",".","xz","+","lF",".","yw",";","kw","(","bvec2","(","step","(","0.9",",","lz",".","zw",")",")",",","lG",",","vec2","(","0",",","0",")",")",";","ly","+=","ls","(","lu",",","lz",".","xy",",","lG",",","lx",".","w",")",".","gr",";","}","return","ly",";","}"]}]}}]},{type:"textline",tokens:["float","lN","(","sampler2D","lI",",","vec2","lJ",",","float","lK",")","{","vec2","lL","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","lM","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","lK",",","1.0",")",";","lL","+=","vec2","(","-","1.0",",","1.0",")",";","lM","+=","vec2","(","0.5",",","-","0.5",")",";","lL","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","lM","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","lI",",","lL","*","lJ","+","lM",",","0.0",")",".","r",";","}","float","lV","(","sampler2D","lO",",","sampler2D","lP",",","vec2","lQ",",","float","lR",")","{","vec2","lS","=","vec2","(","0.0",",","1.0",")",";","for","(","int","lT","=","0",";","lT","<","SMAA_MAX_SEARCH_STEPS",";","lT","++",")","{","if","(","lQ",".","x",">","lR","&&","lS",".","g",">","0.8281","&&","lS",".","r","==","0.0",")","{","lS","=","texture2D","(","lO",",","lQ",",","0.0",")",".","rg",";","lQ","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","lQ",";","}","}","float","lU","=","-","(","255.0","/","127.0",")","*","lN","(","lP",",","lS",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","lU","+","lQ",".","x",";","}","float","mc","(","sampler2D","lW",",","sampler2D","lX",",","vec2","lY",",","float","lZ",")","{","vec2","l_","=","vec2","(","0.0",",","1.0",")",";","for","(","int","ma","=","0",";","ma","<","SMAA_MAX_SEARCH_STEPS",";","ma","++",")","{","if","(","lY",".","x","<","lZ","&&","l_",".","g",">","0.8281","&&","l_",".","r","==","0.0",")","{","l_","=","texture2D","(","lW",",","lY",",","0.0",")",".","rg",";","lY","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","lY",";","}","}","float","mb","=","-","(","255.0","/","127.0",")","*","lN","(","lX",",","l_",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","mb","+","lY",".","x",";","}","float","mk","(","sampler2D","md",",","sampler2D","me",",","vec2","mf",",","float","mg",")","{","vec2","mh","=","vec2","(","1.0",",","0.0",")",";","for","(","int","mi","=","0",";","mi","<","SMAA_MAX_SEARCH_STEPS",";","mi","++",")","{","if","(","mf",".","y",">","mg","&&","mh",".","r",">","0.8281","&&","mh",".","g","==","0.0",")","{","mh","=","texture2D","(","md",",","mf",",","0.0",")",".","rg",";","mf","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","mf",";","}","}","float","mj","=","-","(","255.0","/","127.0",")","*","lN","(","me",",","mh",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","mj","+","mf",".","y",";","}","float","ms","(","sampler2D","ml",",","sampler2D","mm",",","vec2","mn",",","float","mo",")","{","vec2","mp","=","vec2","(","1.0",",","0.0",")",";","for","(","int","mq","=","0",";","mq","<","SMAA_MAX_SEARCH_STEPS",";","mq","++",")","{","if","(","mn",".","y","<","mo","&&","mp",".","r",">","0.8281","&&","mp",".","g","==","0.0",")","{","mp","=","texture2D","(","ml",",","mn",",","0.0",")",".","rg",";","mn","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","mn",";","}","}","float","mr","=","-","(","255.0","/","127.0",")","*","lN","(","mm",",","mp",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","mr","+","mn",".","y",";","}","vec2","mz","(","sampler2D","mt",",","vec2","mu",",","float","mv",",","float","mw",",","float","mx",")","{","vec2","my","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","kB","(","4.0","*","vec2","(","mv",",","mw",")",")","+","mu",";","my","=","SMAA_AREATEX_PIXEL_SIZE","*","my","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","my",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","mx","+","my",".","y",";","return","texture2D","(","mt",",","my",",","0.0",")",".","rg",";","}","void","mH","(","sampler2D","mA",",","inout","vec2","mB",",","vec4","mC",",","vec2","mD",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mE","=","step","(","mD",".","xy",",","mD",".","yx",")",";","vec2","mF","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","mE",";","mF","/=","mE",".","x","+","mE",".","y",";","vec2","mG","=","vec2","(","1.0",",","1.0",")",";","mG",".","x","-=","mF",".","x","*","texture2D","(","mA",",","mC",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","mG",".","x","-=","mF",".","y","*","texture2D","(","mA",",","mC",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","mG",".","y","-=","mF",".","x","*","texture2D","(","mA",",","mC",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","mG",".","y","-=","mF",".","y","*","texture2D","(","mA",",","mC",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","mB","*=","clamp","(","mG",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","mP","(","sampler2D","mI",",","inout","vec2","mJ",",","vec4","mK",",","vec2","mL",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mM","=","step","(","mL",".","xy",",","mL",".","yx",")",";","vec2","mN","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","mM",";","mN","/=","mM",".","x","+","mM",".","y",";","vec2","mO","=","vec2","(","1.0",",","1.0",")",";","mO",".","x","-=","mN",".","x","*","texture2D","(","mI",",","mK",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","mO",".","x","-=","mN",".","y","*","texture2D","(","mI",",","mK",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","mO",".","y","-=","mN",".","x","*","texture2D","(","mI",",","mK",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","mO",".","y","-=","mN",".","y","*","texture2D","(","mI",",","mK",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","mJ","*=","clamp","(","mO",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","vec4","ni","(","vec2","mQ",",","vec2","mR",",","vec4","mS","[","3","]",",","sampler2D","mT",",","sampler2D","mU",",","sampler2D","mV",",","vec4","mW",")","{","vec4","mX","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","mY","=","texture2D","(","mT",",","mQ",")",".","rg",";","if","(","mY",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["mX",".","rg","=","lH","(","mT",",","mU",",","mQ",",","mY",",","mW",")",";","if","(","mX",".","r","==","-","mX",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","mZ",";","vec3","m_",";","m_",".","x","=","lV","(","mT",",","mV",",","mS","[","0","]",".","xy",",","mS","[","2","]",".","x",")",";","m_",".","y","=","mS","[","1","]",".","y",";","mZ",".","x","=","m_",".","x",";","float","na","=","texture2D","(","mT",",","m_",".","xy",",","0.0",")",".","r",";","m_",".","z","=","mc","(","mT",",","mV",",","mS","[","0","]",".","zw",",","mS","[","2","]",".","y",")",";","mZ",".","y","=","m_",".","z",";","mZ","=","abs","(","kB","(","mZ","/","u_texel_size",".","xx","-","mR",".","xx",")",")",";","vec2","nb","=","sqrt","(","mZ",")",";","float","nc","=","texture2D","(","mT",",","m_",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","mX",".","rg","=","mz","(","mU",",","nb",",","na",",","nc",",","mW",".","y",")",";","m_",".","y","=","mQ",".","y",";","mH","(","mT",",","mX",".","rg",",","m_",".","xyzy",",","mZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","mY",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","mY",".","r",">","0.0",")","{","vec2","nd",";","vec3","ne",";","ne",".","y","=","mk","(","mT",",","mV",",","mS","[","1","]",".","xy",",","mS","[","2","]",".","z",")",";","ne",".","x","=","mS","[","0","]",".","x",";","nd",".","x","=","ne",".","y",";","float","nf","=","texture2D","(","mT",",","ne",".","xy",",","0.0",")",".","g",";","ne",".","z","=","ms","(","mT",",","mV",",","mS","[","1","]",".","zw",",","mS","[","2","]",".","w",")",";","nd",".","y","=","ne",".","z",";","nd","=","abs","(","kB","(","nd","/","u_texel_size",".","yy","-","mR",".","yy",")",")",";","vec2","ng","=","sqrt","(","nd",")",";","float","nh","=","texture2D","(","mT",",","ne",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","mX",".","ba","=","mz","(","mU",",","ng",",","nf",",","nh",",","mW",".","x",")",";","ne",".","x","=","mQ",".","x",";","mP","(","mT",",","mX",".","ba",",","ne",".","xyxz",",","nd",")",";","}","return","mX",";","}","vec4","nx","(","vec2","nj",",","vec4","nk",",","sampler2D","nl",",","sampler2D","nm"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nn"]}]}}]},{type:"textline",tokens:[")","{","vec4","no",";","no",".","x","=","texture2D","(","nm",",","nk",".","xy",")",".","a",";","no",".","y","=","texture2D","(","nm",",","nk",".","zw",")",".","g",";","no",".","wz","=","texture2D","(","nm",",","nj",")",".","xz",";","if","(","dot","(","no",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","np","=","texture2D","(","nl",",","nj",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nq","=","texture2D","(","nn",",","nj",")",".","rg","-","0.5",";","if","(","np",".","a","!=","0.0",")","np",".","a","=","sqrt","(","5.0","*","length","(","nq",")",")",";"]}]}}]},{type:"textline",tokens:["return","np",";","}","else","{","bool","nr","=","max","(","no",".","x",",","no",".","z",")",">","max","(","no",".","y",",","no",".","w",")",";","vec4","ns","=","vec4","(","0.0",",","no",".","y",",","0.0",",","no",".","w",")",";","vec2","nt","=","no",".","yw",";","kw","(","bvec4","(","nr",",","nr",",","nr",",","nr",")",",","ns",",","vec4","(","no",".","x",",","0.0",",","no",".","z",",","0.0",")",")",";","kw","(","bvec2","(","nr",",","nr",")",",","nt",",","no",".","xz",")",";","nt","/=","dot","(","nt",",","vec2","(","1.0",",","1.0",")",")",";","vec4","nu","=","ns","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","nj",".","xyxy",";","vec4","nv","=","nt",".","x","*","texture2D","(","nl",",","nu",".","xy",",","0.0",")",";","nv","+=","nt",".","y","*","texture2D","(","nl",",","nu",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nw","=","nt",".","x","*","(","texture2D","(","nn",",","nu",".","xy",",","0.0",")",".","rg","-","0.5",")",";","nw","+=","nt",".","y","*","(","texture2D","(","nn",",","nu",".","zw",",","0.0",")",".","rg","-","0.5",")",";","if","(","nv",".","a","!=","0.0",")","nv",".","a","=","sqrt","(","5.0","*","length","(","nw",")",")",";"]}]}}]},{type:"textline",tokens:["return","nv",";","}","}","vec4","nH","(","vec2","ny",",","sampler2D","nz",",","sampler2D","nA"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nB"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nC","=","texture2D","(","nz",",","ny",")",";","vec4","nD","=","texture2D","(","nA",",","ny",")",";","float","nE","=","abs","(","nC",".","a","*","nC",".","a","-","nD",".","a","*","nD",".","a",")","/","5.0",";","float","nF","=","0.5","*","clamp","(","1.0","-","sqrt","(","nE",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","nG","=","mix","(","nC",",","nD",",","nF",")",";","nG",".","a","=","1.0",";","return","nG",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nC","=","texture2D","(","nz",",","ny",")",";","vec4","nD","=","texture2D","(","nA",",","ny",")",";","return","mix","(","nC",",","nD",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nI","=","vec4","(","kU","(","a",",","kd",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nI","=","ni","(","a",",","ke",",","kd",",","u_color",",","u_area_tex",",","u_search_tex",",","vec4","(","0.0",")",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nI","=","nx","(","a",",","kd",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nI","=","vec4","(","nH","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nI","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","nI",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kd",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kd","[","3","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","ke",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"textline",tokens:["void","iy","(","vec2","iw",",","out","vec4","ix","[","3","]",")","{","ix","[","0","]","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","iw",".","xyxy",";","ix","[","1","]","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","iw",".","xyxy",";","ix","[","2","]","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","iw",".","xyxy",";","}","void","iC","(","vec2","iz",",","out","vec2","iA",",","out","vec4","iB","[","3","]",")","{","iA","=","iz","/","u_texel_size",";","iB","[","0","]","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","iz",".","xyxy",";","iB","[","1","]","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","iz",".","xyxy",";","iB","[","2","]","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","iB","[","0","]",".","xz",",","iB","[","1","]",".","yw",")",";","}","void","iF","(","vec2","iD",",","out","vec4","iE",")","{","iE","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","iD",".","xyxy",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["iy","(","a",",","kd",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["iC","(","a",",","ke",",","kd",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["iF","(","a",",","kd",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"define",name:"SSAO_QUALITY_16",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["2"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","float","u_view_max_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_dithering_amount",";","uniform","float","u_ssao_gauss_center",";","uniform","float","u_ssao_gauss_width_square",";","uniform","float","u_ssao_gauss_width_left_square",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","vec2","kk","(","vec2","kf",")","{","float","kg","=","dot","(","kf",",","vec2","(","12.9898",",","78.233",")",")",";","float","kh","=","dot","(","kf",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","ki","=","fract","(","sin","(","kg",")","*","43758.5453",")","*","2.0","-","1.0",";","float","kj","=","fract","(","sin","(","kh",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","ki",",","kj",")",";","}","float","km","(","in","vec2","kl",")","{","return","jZ","(","u_depth",",","kl",",","u_camera_range",")",";","}","float","ku","(","in","float","kn",",","in","float","ko",",","inout","int","kp",")","{","float","kq","=","u_ssao_gauss_width_square",";","float","kr","=","(","kn","-","ko",")","*","100.0",";","if","(","kr","<","u_ssao_gauss_center",")","kq","=","u_ssao_gauss_width_left_square",";","else","kp","=","1",";","float","ks","=","kr","-","u_ssao_gauss_center",";","float","kt","=","exp","(","-","2.0","*","ks","*","ks","/","kq",")",";","return","kt",";","}","float","kD","(","float","kv",",","vec2","kw",")","{","float","kx","=","0.0",";","float","ky","=","0.0",";","float","kz","=","max","(","1.0",",","u_view_max_depth","/","100.0",")",";","kv","*=","kz",";","kw","/=","kv",";","vec2","kA","=","a","+","kw",";","vec2","kB","=","a","-","kw",";","int","kC","=","0",";","kx","=","ku","(","kv",",","kz","*","km","(","kA",")",",","kC",")",";","if","(","kC",">","0","||","kA",".","y","<","0.0","||","kA",".","y",">","1.0","||","kA",".","x","<","0.0","||","kA",".","x",">","1.0",")","{","ky","=","ku","(","kz","*","km","(","kB",")",",","kv",",","kC",")",";","kx","+=","(","1.0","-","kx",")","*","ky",";","}","return","kx",";","}","void","main","(",")","{","vec2","kE","=","kk","(","a",")","*","u_ssao_dithering_amount",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["kE","*=","1.5",";"]}]}}]},{type:"textline",tokens:["float","kF","=","km","(","a",")",";","float","kG","=","0.0",";","vec2","kH","=","u_texel_size","*","0.5",";","for","(","int","kI","=","0",";","kI","<","4",";","kI","++",")","{"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","kI","==","0","||","kI","==","2",")","{"]}]}}]},{type:"textline",tokens:["kG","+=","kD","(","kF",",","kH",")",";","kG","+=","kD","(","kF",",","vec2","(","kH",".","x",",","-","kH",".","y",")",")",";","kG","+=","kD","(","kF",",","vec2","(","-","kH",".","x",",","kH",".","y",")",")",";","kG","+=","kD","(","kF",",","vec2","(","-","kH",".","x",",","-","kH",".","y",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","if","(","kI","==","1","||","kI","==","3",")","{"]}]}}]},{type:"textline",tokens:["kG","+=","kD","(","kF",",","vec2","(","kH",".","x","*","1.2",",","0.0",")",")",";","kG","+=","kD","(","kF",",","vec2","(","-","kH",".","x","*","1.2",",","0.0",")",")",";","kG","+=","kD","(","kF",",","vec2","(","0.0",",","kH",".","y","*","1.2",")",")",";","kG","+=","kD","(","kF",",","vec2","(","0.0",",","-","kH",".","y","*","1.2",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["kH","+=","kE",";","kH","*=","u_ssao_radius_increase",";","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["kG","=","1.0","-","kG","/","16.0",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["kG","=","1.0","-","kG","/","32.0",";"]}]}}]},{type:"textline",tokens:["float","kJ","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","kF",")",";","kG","=","(","1.0","-","kJ",")","+","kG","*","kJ",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["kG","=","1.0",";"]}]}}]},{type:"textline",tokens:["float","kK","=","texture2D","(","u_color",",","a",")",".","r",";","gl_FragColor","=","vec4","(","kK",",","kG",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","iw","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","ix","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","iw","-","1.0",",","1.0",")",";","vec4","iy","=","u_view_proj_inverse","*","ix",";","vec4","iz","=","iy","/","iy",".","w",";","vec4","iA","=","ix",";","vec4","iB","=","u_view_proj_prev","*","iz",";","iB","/=","iB",".","w",";","vec2","iC","=","(","iA",".","xy","-","iB",".","xy",")","/","2.0","+","0.5",";","gl_FragColor","=","vec4","(","iC",",","0.0",",","1.0",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","b","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","e","(","float","c",",","float","d",")","{","return","abs","(","c","-","d",")","<","EPSILON",";","}","vec3","h","(","in","vec4","f",",","in","vec3","g",")","{","return","g","+","2.0","*","cross","(","f",".","xyz",",","cross","(","f",".","xyz",",","g",")","+","f",".","w","*","g",")",";","}","mat4","i","(",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","k","(","float","j",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","cos","(","j",")",",","sin","(","j",")",",","0.0",",","0.0",",","-","sin","(","j",")",",","cos","(","j",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","m","(","float","l",")","{","return","mat4","(","cos","(","l",")",",","0.0",",","-","sin","(","l",")",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","sin","(","l",")",",","0.0",",","cos","(","l",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","o","(","float","n",")","{","return","mat4","(","cos","(","n",")",",","sin","(","n",")",",","0.0",",","0.0",",","-","sin","(","n",")",",","cos","(","n",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","b","q","(","in","b","p",")","{","return","b","(","p",".","a",",","p",".","b",",","normalize","(","p",".","c",")",",","normalize","(","p",".","d",")",",","normalize","(","p",".","e",")",",","p",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","r","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","x","(","vec3","s",",","mat4","t",")","{","vec3","u","=","vec3","(","t","[","0","]","[","0","]",",","t","[","1","]","[","0","]",",","t","[","2","]","[","0","]",")",";","vec3","v","=","vec3","(","t","[","0","]","[","1","]",",","t","[","1","]","[","1","]",",","t","[","2","]","[","1","]",")",";","vec3","w","=","vec3","(","t","[","0","]","[","2","]",",","t","[","1","]","[","2","]",",","t","[","2","]","[","2","]",")",";","v","=","cross","(","w",",","u",")",";","return","mat4","(","vec4","(","u",",","0.0",")",",","vec4","(","v",",","0.0",")",",","vec4","(","w",",","0.0",")",",","vec4","(","s",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","D","(","vec3","y",",","vec3","z",")","{","vec3","A","=","y","-","z",";","A",".","y","=","0.0",";","A","=","normalize","(","A",")",";","vec3","B","=","normalize","(","cross","(","r",",","A",")",")",";","vec3","C","=","normalize","(","cross","(","A",",","B",")",")",";","return","mat4","(","vec4","(","B",",","0.0",")",",","vec4","(","C",",","0.0",")",",","vec4","(","A",",","0.0",")",",","vec4","(","z",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","O","(","in","vec3","E",",","float","F",",","float","G",",","float","H",",","vec3","I",")","{","float","J","=","fract","(","length","(","I",")","/","0.17",")",";","float","L","=","H","+","J","/","10.0",";","float","M","=","J","/","H",";","E","*=","1.0","+","0.5","*","sin","(","F",")",";","float","N","=","length","(","E",")","*","G","*","sin","(","2.0","*","3.14","*","F","*","L","+","M",")",";","return","o","(","N",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","Z","(","in","vec3","P",",","in","vec3","Q",",","in","mat4","R",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","S","=","x","(","Q",",","R",")",";"]}]}},{type:"elif",expression:["HAIR_BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","T","=","fract","(","(","Q",".","x","*","1.43","+","Q",".","y","*","0.123","+","Q",".","z","*","6.1",")",")",";","float","U","=","2.0","*","M_PI","*","T",";","vec3","V","=","normalize","(","vec3","(","R","[","0","]","[","2","]",",","0.0",",","R","[","2","]","[","2","]",")",")",";","float","W","=","acos","(","V","[","2","]",")",";","if","(","V","[","0","]","<","0.0",")","W","=","2.0","*","M_PI","-","W",";","float","X","=","W","-","U",";","if","(","X","<","0.0",")","X","=","2.0","*","M_PI","+","X",";","float","Y","=","U",";","if","(","X","<=","MAX_BILLBOARD_ANGLE",")","Y","+=","X",";","else","if","(","X","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","Y","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","X","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","X","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","Y","+=","X","-","M_PI",";","else","if","(","X","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","Y","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","X","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","Y","+=","X","-","2.0","*","M_PI",";","mat4","S","=","m","(","Y",")",";","S","[","3","]","=","vec4","(","Q",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","S","=","D","(","P",",","Q",")",";"]}]}}]},{type:"textline",tokens:["return","S",";","}","b","af","(","in","vec3","_",",","in","vec3","aa",",","in","vec3","ab",",","in","vec3","ac",",","in","vec3","ad",",","in","mat4","ae",")","{","_","=","(","ae","*","vec4","(","_",",","1.0",")",")",".","xyz",";","aa","=","(","ae","*","vec4","(","aa",",","1.0",")",")",".","xyz",";","ab","=","(","ae","*","vec4","(","ab",",","0.0",")",")",".","xyz",";","ac","=","(","ae","*","vec4","(","ac",",","0.0",")",")",".","xyz",";","ad","=","(","ae","*","vec4","(","ad",",","0.0",")",")",".","xyz",";","return","q","(","b","(","_",",","aa",",","ab",",","ac",",","ad",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","ai","(","vec2","ag",",","vec3","ah",")","{","return","(","ag","+","0.5",")","*","ah",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ar","(","in","vec4","aj",",","in","vec4","ak",",","in","float","al",")","{","float","am","=","aj","[","0","]","*","ak","[","0","]","+","aj","[","1","]","*","ak","[","1","]","+","aj","[","2","]","*","ak","[","2","]","+","aj","[","3","]","*","ak","[","3","]",";","if","(","am","<","0.0",")","{","ak","*=","-","1.0",";","am","=","-","am",";","}","if","(","abs","(","am",")",">=","1.0",")","return","aj",";","float","an","=","acos","(","am",")",";","float","ao","=","sqrt","(","1.0","-","am","*","am",")",";","if","(","abs","(","ao",")","<","0.001",")","return","vec4","(","aj","*","0.5","+","ak","*","0.5",")",";","float","ap","=","sin","(","(","1.0","-","al",")","*","an",")","/","ao",";","float","aq","=","sin","(","al","*","an",")","/","ao",";","return","aj","*","ap","+","ak","*","aq",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aG","(","in","vec3","as",",","in","vec4","at",",","in","vec4","au",",","in","vec4","av",",","in","vec4","aw",",","in","float","ax",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ay","=","ar","(","at",",","au",",","ax",")",";","vec4","az","=","mix","(","av",",","aw",",","ax",")",";","vec3","aA","=","h","(","ay",",","as",")",";","vec3","aB","=","aA","*","az",".","w","+","az",".","xyz",";","return","aB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aC","=","h","(","at",",","as",")",";","vec3","aD","=","h","(","au",",","as",")",";","vec3","aE","=","aC","*","av",".","w","+","av",".","xyz",";","vec3","aF","=","aD","*","aw",".","w","+","aw",".","xyz",";","return","mix","(","aE",",","aF",",","ax",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aP","(","in","vec3","aH",",","in","vec4","aI",",","in","vec4","aJ",",","in","float","aK",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aL","=","ar","(","aI",",","aJ",",","aK",")",";","vec3","aM","=","h","(","aL",",","aH",")",";","return","aM",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aN","=","h","(","aI",",","aH",")",";","vec3","aO","=","h","(","aJ",",","aH",")",";","return","mix","(","aN",",","aO",",","aK",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aG","(","in","vec3","aQ",",","in","vec4","aR",",","in","vec4","aS",")","{","vec3","aT","=","h","(","aR",",","aQ",")",";","vec3","aU","=","aT","*","aS",".","w","+","aS",".","xyz",";","return","aU",";","}","vec3","aP","(","in","vec3","aV",",","in","vec4","aW",")","{","vec3","aX","=","h","(","aW",",","aV",")",";","return","aX",";","}"]}]}}]},{type:"textline",tokens:["void","bk","(","inout","vec3","aY",",","inout","vec3","aZ",",","inout","vec3","a_",",","inout","vec3","ba",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bb","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bc","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bd","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","be","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","bg","=","0",";","bg","<","4",";","bg","++",")","{","int","bh","=","int","(","a_influence","[","bg","]",")",";","float","bi","=","fract","(","a_influence","[","bg","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bc","+=","bi","*","aG","(","aY",",","u_quatsb","[","bh","]",",","u_quatsa","[","bh","]",",","u_transb","[","bh","]",",","u_transa","[","bh","]",",","bb",")",";","bd","+=","bi","*","aP","(","aZ",",","u_quatsb","[","bh","]",",","u_quatsa","[","bh","]",",","bb",")",";","be","+=","bi","*","aP","(","a_",",","u_quatsb","[","bh","]",",","u_quatsa","[","bh","]",",","bb",")",";","bf","+=","bi","*","aP","(","ba",",","u_quatsb","[","bh","]",",","u_quatsa","[","bh","]",",","bb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bc","+=","bi","*","aG","(","aY",",","u_quatsb","[","bh","]",",","u_transb","[","bh","]",")",";","bd","+=","bi","*","aP","(","aZ",",","u_quatsb","[","bh","]",")",";","be","+=","bi","*","aP","(","a_",",","u_quatsb","[","bh","]",")",";","bf","+=","bi","*","aP","(","ba",",","u_quatsb","[","bh","]",")",";"]}]}}]},{type:"textline",tokens:["}","aY","=","bc",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_TANGENT_SKINNING"],group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","bd",";"]}]}}]},{type:"textline",tokens:["a_","=","be",";","ba","=","bf",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bj","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bj",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["aY","=","aG","(","aY",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","u_transb","[","bj","]",",","u_transa","[","bj","]",",","bb",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_TANGENT_SKINNING"],group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aP","(","aZ",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","bb",")",";"]}]}}]},{type:"textline",tokens:["a_","=","aP","(","a_",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","bb",")",";","ba","=","aP","(","ba",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","bb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aY","=","aG","(","aY",",","u_quatsb","[","bj","]",",","u_transb","[","bj","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_TANGENT_SKINNING"],group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aP","(","aZ",",","u_quatsb","[","bj","]",")",";"]}]}}]},{type:"textline",tokens:["a_","=","aP","(","a_",",","u_quatsb","[","bj","]",")",";","ba","=","aP","(","ba",",","u_quatsb","[","bj","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","by","(","inout","vec3","bl",",","in","vec3","bm",",","in","float","bn",",","in","float","bo",",","in","float","bp",",","in","vec3","bq",",","in","float","br",")","{","float","bs","=","length","(","bm",")",";","float","bt","=","bo","*","(","1.0","+","0.1","*","fract","(","bs",")",")",";","float","bu","=","bn","*","br","*","(","1.0","+","sin","(","2.0","*","3.14","*","bp","*","bt","+","bs",")",")",";","float","bv","=","(","bl",".","y","-","bm",".","y",")","*","abs","(","bu",")",";","bv","+=","1.0",";","bv","*=","bv",";","bv","=","bv","*","bv","-","bv",";","vec3","bw","=","bl",";","bw",".","xz","+=","bq",".","xz","*","bv","*","sign","(","bu",")",";","float","bx","=","length","(","bl","-","bm",")",";","bl","=","bm","+","normalize","(","bw","-","bm",")","*","bx",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bA","(","vec4","bz",")","{","return","bz","*","bz","*","(","3.0","-","2.0","*","bz",")",";","}","vec4","bC","(","vec4","bB",")","{","return","abs","(","fract","(","bB","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bE","(","vec4","bD",")","{","return","bA","(","bC","(","bD",")",")",";","}","void","bV","(","inout","vec3","bF",",","in","float","bG",",","in","vec3","bH",",","in","vec3","bI",",","in","vec3","bJ",",","in","float","bK",",","in","float","bL",",","in","float","bM",",","in","vec3","bN",")","{","float","bO",";","float","bP",";","float","bQ",";","vec2","bR",";","vec4","bS",";","vec2","bT",";","vec3","bU",";","bO","=","dot","(","bJ",",","vec3","(","1.0",")",")",";","bP","=","bO","+","bN",".","g",";","bQ","=","dot","(","bF",",","vec3","(","bN",".","g",")",")",";","bR","=","(","bG","+","vec2","(","bQ",",","bP",")",")",";","bS","=","(","(","fract","(","(","bR",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bI",")","*","bK",";","bS","=","bE","(","bS",")",";","bT","=","bS",".","xz","+","bS",".","yw",";","bT",".","y","=","0.5","-","bT",".","y",";","bU","=","bT",".","xyx","*","bN",".","rbr","*","vec3","(","bL","*","bH",".","x",",","bM",",","bL","*","bH",".","z",")",";","bF","+=","bU",";","}"]}]}}]},{type:"textline",tokens:["void","cb","(","inout","vec3","bW",",","inout","vec3","bX",",","in","vec3","bY",")","{","vec3","bZ","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","b_","=","bX",";","vec3","ca","=","(","u_model_matrix","*","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",")",".","xyz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","b_","=","bW",";","vec3","ca","=","bX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bV","(","b_",",","u_time",",","bY",",","bZ",",","ca",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["by","(","b_",",","ca",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","bZ",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["by","(","b_",",","ca",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","bZ",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bW","+=","b_","-","bX",";","bX","=","b_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bW","=","b_",";","bX","=","ca",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_SRC_RGBA_PCF",tokens:["3"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["4"]},{type:"define",name:"SHADOW_SRC_VSM",tokens:["5"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["6"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["3"]},{type:"define",name:"SHADOW_DST_VSM",tokens:["4"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","cg","(","const","in","float","cc",")","{","const","vec4","cd","=","vec4","(","255.0","*","255.0","*","255.0",",","255.0","*","255.0",",","255.0",",","1.0",")",";","const","vec4","ce","=","vec4","(","0.0",",","1.0","/","255.0",",","1.0","/","255.0",",","1.0","/","255.0",")",";","vec4","cf","=","fract","(","cc","*","cd",")",";","cf","-=","cf",".","xxyz","*","ce",";","return","cf",";","}","float","ck","(","const","in","vec4","ch",")","{","float","ci",";","const","vec4","cj","=","vec4","(","1.0","/","(","255.0","*","255.0","*","255.0",")",",","1.0","/","(","255.0","*","255.0",")",",","1.0","/","255.0",",","1.0",")",";","ci","=","dot","(","ch",",","cj",")",";","return","ci",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_SECTION_DIST0",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST1",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST2",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST3",tokens:["0.0"]},{type:"var",name:"PCF_TEXEL_SIZE",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cs",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["float","cz","(","sampler2D","ct",",","vec3","cu",",","float","cv",",","float","cw",")","{","vec2","cx","=","cu",".","xy","+","vec2","(","cv",",","cw",")","*","PCF_TEXEL_SIZE",";","vec4","cy","=","texture2D","(","ct",",","cx",")",";","return","ck","(","cy",")",";","}"]}]}}]},{type:"textline",tokens:["float","cO","(","vec3","cA",",","sampler2D","cB",",","float","cC",")","{","float","cD",";","cA",".","z","=","clamp","(","cA",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cE","=","texture2D","(","cB",",","cA",".","xy",")",";","float","cF","=","ck","(","cE",")",";","if","(","all","(","lessThan","(","cA",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cA",".","xy",",","vec2","(","0.0",")",")",")","&&","cF","<","cA",".","z",")","{","float","cG","=","cA",".","z","-","cF",";","cD","=","exp","(","-","cG","*","cC",")",";","}","else","cD","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cF",";","cF",".","r","=","cz","(","cB",",","cA",",","0.5",",","0.5",")",";","cF",".","g","=","cz","(","cB",",","cA",",","0.5",",","-","0.5",")",";","cF",".","b","=","cz","(","cB",",","cA",",","-","0.5",",","-","0.5",")",";","cF",".","a","=","cz","(","cB",",","cA",",","-","0.5",",","0.5",")",";","vec4","cH","=","vec4","(","cA",".","z",",","cA",".","z",",","cA",".","z",",","cA",".","z",")",";","if","(","all","(","lessThan","(","cA",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cA",".","xy",",","vec2","(","0.0",")",")",")",")","cD","=","dot","(","vec4","(","greaterThanEqual","(","cF",",","cH",")",")",",","vec4","(","0.25",",","0.25",",","0.25",",","0.25",")",")",";","else","cD","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cI","=","texture2D","(","cB",",","cA",".","xy",")",";","float","cJ","=","cI",".","r",";","float","cK","=","cI",".","g",";","if","(","all","(","lessThan","(","cA",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cA",".","xy",",","vec2","(","0.0",")",")",")","&&","cJ","<","cA",".","z",")","{","float","cL","=","cK","-","cJ","*","cJ",";","float","cM","=","cA",".","z","-","cJ",";","cD","=","cL","/","(","cL","+","cM","*","cM",")",";","}","else","cD","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","cF","=","texture2D","(","cB",",","cA",".","xy",")",".","r",";","if","(","all","(","lessThan","(","cA",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cA",".","xy",",","vec2","(","0.0",")",")",")","&&","cF","<","cA",".","z",")","{","cD","=","0.0",";","float","cN","=","cA",".","z","-","cF",";","cD","=","exp","(","-","cN","*","cC",")",";","}","else","cD","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","cD",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","cU","(","float","cP",",","float","cQ",")","{","vec3","cR",";","float","cS","=","1.0",";","float","cT","=","-","cP",";","if","(","cT","<","CSM_SECTION_DIST0",")","{","cR","=","cm",".","xyz","/","cm",".","w",";","cS","=","cO","(","cR",",","u_shadow_map0",",","cQ",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cT","<","CSM_SECTION_DIST1",")","{","cR","=","cn",".","xyz","/","cn",".","w",";","cS","=","cO","(","cR",",","u_shadow_map1",",","cQ",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cT","<","CSM_SECTION_DIST2",")","{","cR","=","co",".","xyz","/","co",".","w",";","cS","=","cO","(","cR",",","u_shadow_map2",",","cQ",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cT","<","CSM_SECTION_DIST3",")","{","cR","=","cp",".","xyz","/","cp",".","w",";","cS","=","cO","(","cR",",","u_shadow_map3",",","cQ",")",";","}"]}]}}]},{type:"textline",tokens:["return","cS",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","c_","(","in","float","cV",",","inout","vec3","cW",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","cX","=","texture2DProj","(","u_shadow_mask",",","cq",")",".","rg",";","vec3","cY","=","vec3","(","cX",".","r",")",";","float","cZ","=","cX",".","g",";","cs","=","vec4","(","cY",",","cZ",")",";","cW","*=","cs",".","a",";","return","cs",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","cU","(","cr",".","z",",","cV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","de","(","vec3","da",",","float","db",",","vec2","dc",")","{","vec2","dd","=","vec2","(","(","da",".","x","-","dc",".","x",")","/","db",",","-","(","da",".","z","-","dc",".","y",")","/","db",")",";","return","fract","(","dd",")",";","}","vec2","di","(","vec2","df",",","float","dg",",","vec2","dh",")","{","return","vec2","(","df",".","x","*","dg",",","-","df",".","y","*","dg",")","+","dh",";","}","b","dj","(",")","{","return","b","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","b","dQ","(","vec3","dk",",","vec3","dl",",","vec3","dm",",","vec3","dn",",","vec3","dp",",","sampler2D","dq",",","sampler2D","dr",",","vec3","ds",",","float","dt",",","vec3","du",",","vec4","dv",",","mat4","dw",")","{","vec3","dx","=","h","(","dv",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","dy","=","-","dx",".","x",";","float","dz","=","-","dx",".","z",";","vec2","dA","=","vec2","(","du",".","x","+","dt","*","(","-","1.0","-","dy",")","/","2.0",",","du",".","z","+","dt","*","(","1.0","-","dz",")","/","2.0",")",";","vec2","dB","=","de","(","dp",",","dt",",","dA",")",";","float","dC","=","dt","/","2.0",";","vec2","dD","=","abs","(","di","(","dB","-","vec2","(","0.5",")",",","dt",",","vec2","(","0.0",")",")",")",";","float","dE","=","dC","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","dD",")",">","dE",")","return","dj","(",")",";","float","dF","=","dt","/","ds",".","z",";","vec2","dG","=","(","dB","-","vec2","(","0.5",")",")","*","dF","+","vec2","(","0.5",")",";","vec3","dH","=","dx","*","(","dt","/","ds",".","z","-","1.0",")","/","2.0",";","dG",".","x","+=","dH",".","x",";","dG",".","y","-=","dH",".","z",";","vec4","dI","=","texture2D","(","dr",",","dG",")",";","float","dJ","=","dI",".","r",";","if","(","dJ","<","u_scale_threshold",")","return","dj","(",")",";","float","dK","=","ds",".","y","-","ds",".","x",";","float","dL","=","ds",".","y","-","texture2D","(","dq",",","dG",")",".","r","*","dK",";","vec2","dM","=","dk",".","xz","-","dp",".","xz",";","dp",".","xz","=","di","(","dB",",","dt",",","dA",")",";","dp",".","y","=","dL",";","dk",".","xz","=","dp",".","xz","+","dM",";","dk",".","y","*=","dJ",";","dk",".","y","+=","dL",";","vec3","dN","=","dI",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["dk","-=","dp",";","mat4","dO","=","Z","(","du",",","dp",",","dw",")",";","b","dP","=","af","(","dk",",","dp",",","dl",",","dm",",","dn",",","dO",")",";","dP",".","b","=","dp",";","dP",".","f","=","dN",";","return","q","(","dP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","q","(","b","(","dk",",","dp",",","dl",",","dm",",","dn",",","dN",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["void","dS","(","vec3","dR",")","{","cm","=","u_b_light_matrix","*","u_p_light_matrix0","*","u_v_light_matrix","*","vec4","(","dR",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cn","=","u_b_light_matrix","*","u_p_light_matrix1","*","u_v_light_matrix","*","vec4","(","dR",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["co","=","u_b_light_matrix","*","u_p_light_matrix2","*","u_v_light_matrix","*","vec4","(","dR",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cp","=","u_b_light_matrix","*","u_p_light_matrix3","*","u_v_light_matrix","*","vec4","(","dR",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","dS","(","vec4","dT",")","{","float","dU","=","dT",".","x",";","float","dV","=","dT",".","y",";","float","dW","=","dT",".","w",";","cq",".","x","=","(","dU","+","dW",")","/","2.0",";","cq",".","y","=","(","dV","+","dW",")","/","2.0",";","cq",".","z","=","dW",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","dZ","(","inout","vec3","dY",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["dY","=","pow","(","dY",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ea","(","inout","vec3","d_",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["d_","=","pow","(","d_",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ed","(","inout","vec3","eb",",","in","float","ec",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eb","=","eb","*","ec",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["float","el","(","inout","vec3","eg",",","in","float","eh",",","in","vec4","ei",")","{","float","ej","=","ei",".","w","*","eh",";","float","ek","=","exp","(","-","ej","*","ej",")",";","ek","=","clamp","(","ek",",","0.0",",","1.0",")",";","eg","=","mix","(","ei",".","rgb",",","eg",",","ek",")",";","return","ek",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","es","(","in","mat4","em",",","in","vec3","en",")","{","vec3","eo","=","mix","(","em","[","0","]",".","rgb",",","em","[","1","]",".","rgb",",","max","(","sign","(","en",".","x",")",",","0.0",")",")",";","vec3","ep","=","mix","(","em","[","2","]",".","rgb",",","em","[","3","]",".","rgb",",","max","(","sign","(","en",".","z",")",",","0.0",")",")",";","vec3","eq","=","vec3","(","em","[","0","]",".","a",",","em","[","1","]",".","a",",","em","[","2","]",".","a",")",";","vec3","er","=","mix","(","eo",",","ep",",","abs","(","en",".","z",")",")",";","er","=","mix","(","er",",","eq",",","abs","(","en",".","y",")",")",";","return","er",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eu","(","inout","float","et",")","{","et","-=","0.5",";","et","=","4.0","*","(","et","*","et","*","et",")","+","0.5",";","}","float","eJ","(","inout","vec3","ev",",","in","float","ew",",","in","float","ex",",","in","float","ey",",","in","vec4","ez",",","in","vec4","eA",",","in","float","eB",",","in","float","eC",")","{","ex","=","clamp","(","ex",",","0.0",",","1.0",")",";","float","eD","=","eA",".","w","*","ew",";","float","eE","=","exp","(","-","eD","*","eD",")",";","eE","=","clamp","(","eE",",","0.0",",","1.0",")",";","ew","=","max","(","ew","-","max","(","ey","/","ex",",","0.0",")",",","0.0",")",";","eD","=","ez",".","w","*","ew",";","float","eF","=","1.0","-","eD",";","eF","+=","max","(","eB","-","WAVES_HEIGHT","-","0.05",",","0.0",")",";","+","max","(","eB","/","WAVES_HEIGHT",",","0.0",")",";","eF","=","clamp","(","eF",",","0.0",",","1.0",")",";","eu","(","eF",")",";","if","(","eF","<","eE",")","{","vec3","eG","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","eH","=","ez",".","rgb",";","ey","=","clamp","(","-","ey","*","0.03",",","0.0",",","0.8",")",";","vec3","eI","=","mix","(","eH",",","eG",",","min","(","ex",",","1.0",")",")",";","eI","=","mix","(","eI",",","vec3","(","0.0",")",",","ey",")","*","eC",";","ev","=","mix","(","eI",",","ev",",","eF",")",";","return","eF",";","}","if","(","eF",">=","eE",")","{","ev","=","mix","(","eA",".","rgb",",","ev",",","eE",")",";","return","eE",";","}","}","float","eS","(","inout","vec3","eK",",","in","float","eL",",","in","float","eM",",","in","vec4","eN",",","in","float","eO",")","{","float","eP","=","eN",".","w","*","eL",";","float","eQ","=","1.0","-","eP",";","eQ","=","clamp","(","eQ",",","0.0",",","1.0",")",";","eu","(","eQ",")",";","eM","=","clamp","(","-","eM","*","0.03",",","0.0",",","0.8",")",";","vec3","eR","=","mix","(","eN",".","rgb",",","vec3","(","0.0",")",",","eM",")","*","eO",";","eK","=","mix","(","eR",",","eK",",","eQ",")",";","return","eQ",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["struct","eT","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fa","(","vec3","eU",",","vec3","eV",",","vec3","eW",",","vec4","eX",",","float","eY",")","{","vec3","eZ","=","normalize","(","eU","+","eV",")",";","float","e_","=","eX","[","0","]","*","max","(","dot","(","eW",",","eZ",")",",","0.0",")","+","eX","[","1","]",";","return","pow","(","e_",",","eY",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","fl","(","vec3","fb",",","vec3","fc",",","vec3","fd",",","float","fe",")","{","vec3","ff","=","normalize","(","fb","+","fc",")",";","float","fg","=","max","(","dot","(","fd",",","ff",")",",","0.001",")",";","float","fh","=","max","(","dot","(","fd",",","fc",")",",","0.001",")",";","float","fi","=","max","(","dot","(","fd",",","fb",")",",","0.001",")",";","float","fj","=","tan","(","acos","(","fg",")",")",";","float","fk","=","max","(","fe",",","0.001",")",";","return","fi","*","(","1.0","/","(","4.0","*","M_PI","*","fk","*","fk",")",")","*","(","exp","(","-","(","fj","*","fj",")","/","(","fk","*","fk",")",")","/","(","sqrt","(","fh","*","fi",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","fD","(","float","fm",",","vec3","fn",",","vec3","fo",",","vec3","fp",",","float","fq",",","inout","float","fr",")","{","if","(","fq",">","0.0",")","{","float","fs","=","max","(","dot","(","fn",",","fp",")",",","0.0",")",";","float","ft","=","acos","(","fm",")",";","float","fu","=","acos","(","fs",")",";","vec3","fv","=","normalize","(","fo","-","fm","*","fn",")",";","vec3","fw","=","normalize","(","fp","-","fs","*","fn",")",";","float","fx","=","max","(","dot","(","fv",",","fw",")",",","0.0",")",";","float","fy",",","fz",";","fy","=","max","(","ft",",","fu",")",";","fz","=","min","(","ft",",","fu",")",";","float","fA","=","fq","*","fq",";","float","fB","=","1.0","-","0.5","*","(","fA","/","(","fA","+","0.33",")",")",";","float","fC","=","0.45","*","(","fA","/","(","fA","+","0.09",")",")",";","fz","*=","0.95",";","fr","=","fr","*","(","fB","+","(","fC","*","fx","*","sin","(","fy",")","*","tan","(","fz",")",")",")",";","}","else","{","fr","=","fr",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","fK","(","vec3","fE",",","vec3","fF",",","float","fG",",","float","fH",",","out","float","fI",")","{","float","fJ",";","if","(","fG","==","0.0",")","{","fI","=","1.0",";","}","else","{","fJ","=","1.0","+","abs","(","dot","(","fF",",","fE",")",")",";","fJ","=","fH","+","(","1.0","-","fH",")","*","pow","(","fJ",",","fG",")",";","fI","=","clamp","(","fJ",",","0.0",",","1.0",")",";","}","}"]}]}}]},{type:"textline",tokens:["eT","gw","(","vec3","fL",",","vec3","fM",",","vec3","fN",",","vec3","fO",",","vec3","fP",",","vec3","fQ",",","vec3","fR",",","float","fS",",","vec2","fT",",","float","fU",",","vec3","fV","[","NUM_LIGHTS","]",",","vec3","fW","[","NUM_LIGHTS","]",",","vec3","fX","[","NUM_LIGHTS","]",",","vec4","fY","[","NUM_LIGHTS","]",",","vec4","fZ","[","NUM_LIGHTS","]",",","float","f_",",","vec4","ga",")","{","eT","gb",";","gb",".","a","=","vec4","(","fL","+","fN","*","fM",",","0.0",")",";","gb",".","b","=","vec3","(","0.0",")",";","for","(","int","gc","=","0",";","gc","<","NUM_LIGHTS",";","gc","++",")","{","vec4","gd","=","fY","[","gc","]",";","vec4","ge","=","fZ","[","gc","]",";","vec3","gf","=","vec3","(","0.0",")",";","vec3","gg","=","fX","[","gc","]",";","gg","*=","fU",";","float","gh","=","ge",".","z",";","if","(","gh","!=","-","1.0",")","{","gf","=","fV","[","gc","]","-","fP",";","float","gi","=","length","(","gf",")",";","gg","*=","gh","/","(","gh","+","gi","*","gi",")",";","gf","=","normalize","(","gf",")",";","float","gj","=","ge",".","x",";","float","gk","=","ge",".","y",";","if","(","gj",">","-","1.0",")","{","float","gl","=","dot","(","gf",",","fW","[","gc","]",")",";","gl","*=","smoothstep","(","0.0",",","1.0",",","(","gl","-","gj",")","/","gk",")",";","gg","*=","gl",";","}","}","else","gf","=","fW","[","gc","]",";","float","gm",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["fK","(","fQ",",","gf",",","fT","[","0","]",",","fT","[","1","]",",","gm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gn","=","max","(","dot","(","fQ",",","gf",")",",","0.0",")",";","gm","=","gd","[","0","]","*","gn","+","gd","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["fD","(","gn",",","fQ",",","gf",",","fR",",","fT","[","0","]",",","gm",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","go","=","fa","(","gf",",","fR",",","fQ",",","gd",",","fS",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","go","=","fl","(","gf",",","fR",",","fQ",",","fS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","go","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","gf",",","fQ",")","*","dot","(","fR",",","fQ",")","<","0.0",")","{","float","gp","=","ga",".","x",";","float","gq","=","ga",".","y",";","float","gr","=","ga",".","z",";","float","gs","=","ga",".","w",";","float","gt","=","clamp","(","abs","(","dot","(","gf",",","fQ",")",")",",","0.0",",","1.0",")",";","float","gu","=","clamp","(","dot","(","fR",",","-","gf",")",",","0.0",",","1.0",")",";","float","gv","=","pow","(","gu",",","gq",")",";","gb",".","a","+=","f_","*","vec4","(","gg","*","gt","*","pow","(","fN",",","vec3","(","gp",")",")",",","1.0",")",";","gb",".","a","+=","gr","*","mix","(","vec4","(","fN",",","1.0",")",",","vec4","(","1.0",")",",","gs",")","*","f_","*","vec4","(","gg","*","gt","*","vec3","(","gv",")",",","1.0",")",";","}","else","{","gb",".","b","+=","gg","*","fO","*","go",";","gb",".","a","+=","vec4","(","gg","*","fN","*","gm",",","go",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gb",".","b","+=","gg","*","fO","*","go",";","gb",".","a","+=","vec4","(","gg","*","fN","*","gm",",","go",")",";"]}]}}]},{type:"textline",tokens:["}","return","gb",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","gy","(","vec4","gx",")","{","return","gx","-","floor","(","gx","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","gy","(","vec3","gz",")","{","return","gz","-","floor","(","gz","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","gy","(","vec2","gA",")","{","return","gA","-","floor","(","gA","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","gC","(","vec4","gB",")","{","return","gB","-","floor","(","gB","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","gE","(","vec4","gD",")","{","return","gy","(","(","34.0","*","gD","+","5.0",")","*","gD",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","gQ","(","vec2","gF",")","{","vec2","gG","=","gy","(","floor","(","gF",")",")",";","vec2","gH","=","fract","(","gF",")",";","vec4","gI","=","gH",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","gJ","=","gH",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","gK","=","gE","(","gG",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","gK","=","gE","(","gK","+","gG",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","gL","=","gC","(","gK",")","*","K","+","K2",";","vec4","gM","=","gC","(","floor","(","gK","*","K",")",")","*","K","+","K2",";","vec4","gN","=","gI","+","JITTER","*","gL",";","vec4","gO","=","gJ","+","JITTER","*","gM",";","vec4","gP","=","gN","*","gN","+","gO","*","gO",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["gP",".","xy","=","min","(","gP",".","xy",",","gP",".","zw",")",";","gP",".","x","=","min","(","gP",".","x",",","gP",".","y",")",";","return","gP",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gP",".","xy","=","(","gP",".","x","<","gP",".","y",")","?","gP",".","xy",":","gP",".","yx",";","gP",".","xz","=","(","gP",".","x","<","gP",".","z",")","?","gP",".","xz",":","gP",".","zx",";","gP",".","xw","=","(","gP",".","x","<","gP",".","w",")","?","gP",".","xw",":","gP",".","wx",";","gP",".","y","=","min","(","gP",".","y",",","gP",".","z",")",";","gP",".","y","=","min","(","gP",".","y",",","gP",".","w",")",";","return","sqrt","(","gP",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","he","(","vec2","gR",",","float","gS",")","{","vec2","gT","=","gy","(","floor","(","gR",")",")",";","vec2","gU","=","fract","(","gR",")",";","vec4","gV","=","gU",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","gW","=","gU",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","gX","=","gE","(","gT",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","gX","=","gE","(","gX","+","gT",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","gY","=","gC","(","gX",")","*","K","+","K2",";","vec4","gZ","=","gC","(","floor","(","gX","*","K",")",")","*","K","+","K2",";","vec4","g_","=","gV","+","JITTER","*","gY",";","vec4","ha","=","gW","+","JITTER","*","gZ",";","vec4","hb","=","g_","*","g_","+","ha","*","ha",";","g_","+=","gS",";","ha","+=","gS",";","vec4","hc","=","g_","*","g_","+","ha","*","ha",";","g_","+=","gS",";","ha","+=","gS",";","vec4","hd","=","g_","*","g_","+","ha","*","ha",";","hb",".","xy","=","min","(","hb",".","xy",",","hb",".","zw",")",";","hb",".","x","=","min","(","hb",".","x",",","hb",".","y",")",";","hc",".","xy","=","min","(","hc",".","xy",",","hc",".","zw",")",";","hc",".","x","=","min","(","hc",".","x",",","hc",".","y",")",";","hd",".","xy","=","min","(","hd",".","xy",",","hd",".","zw",")",";","hd",".","x","=","min","(","hd",".","x",",","hd",".","y",")",";","return","mat3","(","hb",".","xx",",","0.0",",","hc",".","xx",",","0.0",",","hd",".","xx",",","0.0",")",";","}","vec3","hg","(","vec3","hf",")","{","return","gy","(","(","(","hf","*","34.0",")","+","1.0",")","*","hf",")",";","}","float","hu","(","vec2","hh",")","{","const","vec4","hi","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","hj","=","floor","(","hh","+","dot","(","hh",",","hi",".","yy",")",")",";","vec2","hk","=","hh","-","hj","+","dot","(","hj",",","hi",".","xx",")",";","vec2","hl",";","hl","=","(","hk",".","x",">","hk",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","hm","=","hk",".","xyxy","+","hi",".","xxzz",";","hm",".","xy","-=","hl",";","hj","=","gy","(","hj",")",";","vec3","hn","=","hg","(","hg","(","hj",".","y","+","vec3","(","0.0",",","hl",".","y",",","1.0",")",")","+","hj",".","x","+","vec3","(","0.0",",","hl",".","x",",","1.0",")",")",";","vec3","ho","=","max","(","0.5","-","vec3","(","dot","(","hk",",","hk",")",",","dot","(","hm",".","xy",",","hm",".","xy",")",",","dot","(","hm",".","zw",",","hm",".","zw",")",")",",","0.0",")",";","ho","=","ho","*","ho",";","ho","=","ho","*","ho",";","vec3","hp","=","2.0","*","fract","(","hn","*","hi",".","www",")","-","1.0",";","vec3","hq","=","abs","(","hp",")","-","0.5",";","vec3","hr","=","floor","(","hp","+","0.5",")",";","vec3","hs","=","hp","-","hr",";","ho","*=","1.79284291400159","-","0.85373472095314","*","(","hs","*","hs","+","hq","*","hq",")",";","vec3","ht",";","ht",".","x","=","hs",".","x","*","hk",".","x","+","hq",".","x","*","hk",".","y",";","ht",".","yz","=","hs",".","yz","*","hm",".","xz","+","hq",".","yz","*","hm",".","yw",";","return","130.0","*","dot","(","ho",",","ht",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","hV","(","inout","vec3","hv",",","float","hw",",","float","hx",",","float","hy",",","vec3","hz",",","vec3","hA",",","vec3","hB",",","vec4","hC",",","vec3","hD",",","float","hE",")","{","if","(","hE",">","100.0",")","return",";","vec4","hF","=","hC",";","vec3","hG","=","hD","+","hz",";","hG",".","xz","=","10.0","*","sin","(","0.1","*","hG",".","xz",")",";","vec3","hH","=","hG","+","2.0","*","cross","(","-","hF",".","xyz",",","cross","(","-","hF",".","xyz",",","hG",")","+","hF",".","w","*","hG",")",";","vec2","hI","=","hH",".","xz",";","vec3","hJ","=","hA",";","float","hK","=","max","(","dot","(","hz",",","hJ",")",",","0.0",")",";","float","hL","=","0.025",";","hI",".","s","+=","0.5","*","sin","(","dot","(","hD","+","hx",",","vec3","(","1.0",")",")",")",";","hI",".","t","+=","0.7","*","(","-","sin","(","dot","(","hD","-","hx",",","vec3","(","-","0.7",")",")",")",")",";","hI",".","st","+=","0.23","*","cos","(","4.0","*","hw","-","CAUST_SPEED",".","x","*","hx",")",";","hI",".","st","+=","3.0","*","sin","(","hw","-","0.3","*","CAUST_SPEED",".","y","*","hx",")",";","float","hM","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","hw",",","0.0",")",")",";","mat3","hN","=","he","(","(","hI","/","hM",")",",","hL",")",";","float","hO","=","(","hN","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","hP","=","(","hN","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","hQ","=","(","hN","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","hR","=","CAUST_BRIGHT","*","vec3","(","hO",",","hP",",","hQ",")",";","float","hS","=","hy","*","hK",";","float","hT","=","max","(","sign","(","hw",")",",","0.0",")",";","hS","=","min","(","hS","+","0.5","*","sign","(","-","hz",".","y",")","*","hT",",","1.0",")",";","hS","*=","1.0","-","hT","*","(","0.1","*","hw",")",";","hR","*=","hS",";","hR","*=","hR",";","float","hU","=","min","(","-","hw","+","10.0",",","1.0",")",";","hv","+=","max","(","(","2.0","*","hB","*","hR",")","*","hU",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","ii","(","in","vec3","ia",",","in","vec3","ib",",","in","float","ic",",","in","float","id",")","{","vec3","ie","=","normalize","(","ib","+","ia",")",";","float","ig","=","1.0","-","dot","(","ia",",","ie",")",";","float","ih","=","id","+","(","1.0","-","id",")","*","pow","(","ig",",","ic",")",";","return","ih",";","}","void","iv","(","inout","vec3","ij",",","in","vec3","ik",",","in","vec3","il",",","in","float","im",",","in","float","io",",","in","vec2","ip",")","{","vec3","iq","=","reflect","(","-","ik",",","il",")",";","float","ir","=","ii","(","ik",",","iq",",","im",",","io",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","is","=","cq",".","xy","/","cq",".","z",";","is","+=","ip","*","BUMP",";","vec3","it","=","texture2D","(","u_reflectmap",",","is",")",".","rgb",";","dZ","(","it",".","rgb",")",";","ij","=","mix","(","ij",",","it",",","u_reflect_factor","*","ir",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","iu","=","textureCube","(","u_mirrormap",",","iq",")",".","xyz",";","dZ","(","iu",".","rgb",")",";","ij","=","mix","(","ij",",","iu",",","u_mirror_factor","*","ir",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"define",name:"RAMPSIZE",tokens:["4"]},{type:"textline",tokens:["float","jq","(","float","jf",",","float","jg",",","vec2","jh","[","RAMPSIZE","]",")","{","if","(","jh","[","0","]","[","0","]","<","0.0",")","return","1.0",";","float","ji","=","jf","/","jg",";","bool","jj","=","false",";","float","jk","=","0.0",";","float","jl","=","jh","[","0","]","[","1","]",";","float","jm","=","1.0",";","float","jn","=","1.0",";","for","(","int","jo","=","0",";","jo","<","RAMPSIZE",";","jo","++",")","{","if","(","!","jj",")","{","if","(","jh","[","jo","]","[","0","]",">=","0.0",")","{","if","(","ji",">=","jk","&&","ji","<","jh","[","jo","]","[","0","]",")","{","jm","=","jh","[","jo","]","[","0","]",";","jn","=","jh","[","jo","]","[","1","]",";","jj","=","true",";","}","else","if","(","ji","<","jk","||","ji",">=","jh","[","jo","]","[","0","]",")","{","jk","=","jh","[","jo","]","[","0","]",";","jl","=","jh","[","jo","]","[","1","]",";","}","}","else","if","(","jh","[","jo","]","[","0","]","<","0.0",")","{","jn","=","jl",";","jj","=","true",";","}","}","}","if","(","!","jj",")","jn","=","jl",";","float","jp","=","(","jn","-","jl",")","/","(","jm","-","jk",")",";","return","jl","+","jp","*","(","ji","-","jk",")",";","}","vec3","jC","(","float","jr",",","float","js",",","vec4","jt","[","RAMPSIZE","]",")","{","if","(","jt","[","0","]","[","0","]","<","0.0",")","return","vec3","(","1.0",",","1.0",",","1.0",")",";","float","ju","=","jr","/","js",";","bool","jv","=","false",";","float","jw","=","0.0",";","vec3","jx","=","jt","[","0","]",".","yzw",";","float","jy","=","1.0",";","vec3","jz","=","vec3","(","1.0",",","1.0",",","1.0",")",";","for","(","int","jA","=","0",";","jA","<","RAMPSIZE",";","jA","++",")","{","if","(","!","jv",")","{","if","(","jt","[","jA","]","[","0","]",">=","0.0",")","{","if","(","ju",">=","jw","&&","ju","<","jt","[","jA","]","[","0","]",")","{","jy","=","jt","[","jA","]","[","0","]",";","jz","=","jt","[","jA","]",".","yzw",";","jv","=","true",";","}","else","if","(","ju","<","jw","||","ju",">=","jt","[","jA","]","[","0","]",")","{","jw","=","jt","[","jA","]","[","0","]",";","jx","=","jt","[","jA","]",".","yzw",";","}","}","else","if","(","jt","[","jA","]","[","0","]","<","0.0",")","{","jz","=","jx",";","jv","=","true",";","}","}","}","if","(","!","jv",")","jz","=","jx",";","vec3","jB","=","(","jz","-","jx",")","/","(","jy","-","jw",")",";","return","jx","+","jB","*","(","ju","-","jw",")",";","}","float","jL","(","float","jD",",","float","jE",",","float","jF",",","float","jG",")","{","float","jH","=","max","(","0.01",",","min","(","jE",",","jF",")",")",";","float","jI","=","max","(","0.01",",","min","(","jE",",","jG",")",")",";","float","jJ","=","jE","-","jI",";","float","jK","=","clamp","(","jD","/","jH",",","0.0",",","1.0",")","-","step","(","jJ",",","jD",")","*","(","jD","-","jJ",")","/","jI",";","return","jK",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","jZ","(","in","sampler2D","jS",",","in","vec2","jT",",","in","vec2","jU",")","{","float","jV","=","texture2D","(","jS",",","jT",")",".","r",";","float","jW","=","jU",".","x",";","float","jX","=","jU",".","y",";","float","jY","=","2.0","*","jW","/","(","jW","+","jX","-","(","2.0","*","jV","-","1.0",")","*","(","jX","-","jW",")",")",";","return","jY",";","}"]}]}}