b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cd","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cd","=","mix","(","cd",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ce","=","vec3","(","0.0",")",";","vec3","cf","=","vec3","(","0.0",")",";","vec3","cg","=","vec3","(","0.0",")",";","bl","(","cd",",","ce",",","cf",",","cg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ch","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ch","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","(","u_model_matrix","*","vec4","(","ch",",","1.0",")",")",".","xyz",";","mat4","cj","=","_","(","u_camera_eye",",","ci",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ck","=","(","u_model_matrix","*","vec4","(","ch",",","1.0",")",")",".","xyz",";","cj","=","cj","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ck",")",";"]}]}}]},{type:"textline",tokens:["c","cl","=","ag","(","cd","-","ch",",","ch",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cj",")",";","cl",".","b","=","ci",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","cl","=","ag","(","cd",",","ch",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cc","(","cl",".","a",",","cl",".","b",",","cm",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cl",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","dj","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","dj","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","dj","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ch","(","cu",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ch","(","cu",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["float","dk","=","cu",";","float","dl","=","dk","*","dk",";","gl_FragColor","=","vec4","(","dk",",","dl",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","dc","(","cA",".","z",",","u_shadow_visibility_falloff",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","ef","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ef","=","mix","(","ef",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eg","=","vec3","(","0.0",")",";","vec3","eh","=","vec3","(","0.0",")",";","vec3","ei","=","vec3","(","0.0",")",";","bl","(","ef",",","eg",",","eh",",","ei",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ej","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ej","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","ek","=","dZ","(","ef",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ej",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","el","=","(","u_model_matrix","*","vec4","(","ej",",","1.0",")",")",".","xyz",";","mat4","em","=","_","(","u_camera_eye",",","el",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","en","=","(","u_model_matrix","*","vec4","(","ej",",","1.0",")",")",".","xyz",";","em","=","em","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","en",")",";"]}]}}]},{type:"textline",tokens:["c","ek","=","ag","(","ef","-","ej",",","ej",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","em",")",";","ek",".","b","=","el",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","ek","=","ag","(","ef",",","ej",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eo","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","eo","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cc","(","ek",".","a",",","ek",".","b",",","eo",")",";"]}]}}]},{type:"textline",tokens:["vec4","ep","=","u_view_matrix","*","vec4","(","ek",".","a",",","1.0",")",";","vec4","eq","=","u_proj_matrix","*","ep",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["eq",".","xy","+=","u_subpixel_jitter","*","eq",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ea","(","ek",".","a",")",";","cA","=","ep",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["cu","=","-","ep",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","eq",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ef",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ef",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ef",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ef",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","ef",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","ef",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ef",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ef",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ef",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eg","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","eh","=","_","(","u_camera_eye",",","eg",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","eh","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","ei","=","ag","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","eh",")",";","ei",".","b","=","eg",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","ei","=","ag","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","ej","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ei",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ef","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ef","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["ef","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ej",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","en",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","eo",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","ep","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","ep","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","er","(","float","eq",")","{","return","eq","-","floor","(","eq","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eA","(","inout","float","es",",","in","float","et","[","ep","]",",","in","float","eu",")","{","for","(","int","ev","=","NUM_RINGS",";","ev",">","0",";","ev","--",")","{","float","ew","=","40.0","*","et","[","ev","]",";","float","ex","=","300.0","*","(","er","(","ew",")","-","0.005",")",";","float","ey","=","ew",";","float","ez","=","abs","(","ey","*","(","u_halo_size","*","ex","-","eu",")",")",";","es","+=","1.0","-","min","(","ez",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","eJ","(","inout","float","eB",",","in","float","eC","[","ep","]",",","in","float","eD",")","{","for","(","int","eE","=","NUM_LINES",";","eE",">","0",";","eE","--",")","{","float","eF","=","eC","[","eE","]",";","float","eG","=","eF",";","float","eH","=","1000.0","*","(","er","(","eF",")","-","0.005",")",";","float","eI","=","20.0","*","abs","(","eG","*","a",".","x","+","eH","*","a",".","y",")",";","eB","+=","1.0","-","min","(","eI",",","1.0",")",";","}","eB","*=","eD",";","}"]}]}}]},{type:"textline",tokens:["void","eQ","(","inout","float","eK",",","in","vec2","eL",")","{","float","eM",",","eN",";","eN","=","atan","(","eL",".","y",",","eL",".","x",")",";","eN","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","eO","=","cos","(","eN",")",";","float","eP","=","sin","(","eN",")",";","eN","=","(","eO","*","eL",".","x","+","eP","*","eL",".","y",")","*","(","eO","*","eL",".","y","-","eP","*","eL",".","x",")",";","eM","=","abs","(","eN",")",";","if","(","eM","<","1.0",")","{","eM","=","(","0.01","*","u_halo_size",")","/","(","eM",")",";","eK","*=","sqrt","(","min","(","eM",",","1.0",")",")",";","}","}","void","main","(",")","{","float","eR","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","eS","=","sqrt","(","eR",")",";","eR","=","max","(","1.0","-","eR",",","0.0",")",";","eR","=","pow","(","eR",",","u_halo_hardness",")",";","float","eT","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eU","[","ep","]",";","for","(","int","eV","=","0",";","eV","<","ep",";","eV","++",")","{","eU","[","eV","]","=","fract","(","eo","/","float","(","eV",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","eW","=","0.0",";","eA","(","eW",",","eU",",","eS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eX","=","0.0",";","eJ","(","eX",",","eU",",","eR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eQ","(","eR",",","a",")",";"]}]}}]},{type:"textline",tokens:["eR","*=","eT",";","vec3","eY","=","u_diffuse_color",".","rgb","*","eR",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["eW","*=","eR",";","eY","+=","u_halo_rings_color","*","eW",";","eR","+=","eW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["eX","*=","eT",";","eY","+=","u_halo_lines_color","*","eX",";","eR","+=","eX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eR","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","eZ","=","u_halo_stars_blend","*","(","en",".","y","-","u_halo_stars_height",")",";","eR","*=","clamp","(","eZ",",","0.0",",","1.0",")",";","eR","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ej","(","eY",")",";","em","(","eY",",","eR",")",";","gl_FragColor","=","vec4","(","eY",",","eR",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","eo",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","en",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","ep","=","a_position",";","a","=","a_halo_bb_vertex","*","2.0",";","eo","=","fract","(","ep",".","x","+","ep",".","y","+","ep",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","eq","=","y","(","ep",",","u_view_matrix",")",";","mat4","er","=","u_view_matrix",";","er","[","3","]","[","0","]","=","0.0",";","er","[","3","]","[","1","]","=","0.0",";","er","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","eq","=","y","(","ep",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","es","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","et","=","eq","*","es",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","eu","=","u_proj_matrix","*","er","*","et",";","eu",".","z","=","0.99999","*","eu",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["en","=","et",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","eu","=","u_proj_matrix","*","u_view_matrix","*","et",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","eu",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","ep","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ep",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","i_",";","varying","vec3","ja",";","varying","vec3","jb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","je",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jQ","=","ja",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jR","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","jS","=","jb",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","jS","=","jS",";","else","jS","=","-","jS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jT","=","cross","(","jS",",","jc",".","xyz",")","*","jc",".","w",";","mat3","jU","=","mat3","(","jc",".","xyz",",","jT",",","jS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","jV","=","length","(","cA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","jV","<","PARALLAX_LOD_DIST",")","{","float","jW","=","clamp","(","5.0","-","0.5","*","jV",",","0.0",",","1.0",")",";","float","jX","=","u_parallax_scale","*","jW",";","vec3","jY","=","normalize","(","i_","*","jU",")",";","float","jZ","=","1.0","/","PARALLAX_STEPS",";","vec2","j_","=","jY",".","xy","*","jX","/","(","PARALLAX_STEPS","*","jY",".","z",")",";","float","ka","=","1.0",";","float","kb","=","texture2D","(","u_normalmap0",",","jR",")",".","a",";","for","(","float","kc","=","1.0",";","kc","<=","PARALLAX_STEPS",";","kc","++",")","{","if","(","kb","<","ka",")","{","ka","-=","jZ",";","jR","-=","j_",";","kb","=","texture2D","(","u_normalmap0",",","jR",")",".","a",";","}","}","vec2","kd","=","jR","+","j_",";","float","ke","=","texture2D","(","u_normalmap0",",","kd",")",".","a","-","(","ka","+","jZ",")",";","float","kf","=","kb","-","ka",";","float","kg","=","kf","/","(","kf","-","ke",")",";","jR","=","kg","*","kd","+","(","1.0","-","kg",")","*","jR",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kh","=","texture2D","(","u_normalmap0",",","jR","+","u_time","*","u_normalmap0_uv_velocity",")",";","vec3","ki","=","kh",".","rgb","-","0.5",";","ki","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","ki",",","u_normal_factor",")",";","vec3","kj","=","jU","*","ki",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kj","=","jS",";"]}]}}]},{type:"textline",tokens:["kj","=","normalize","(","kj",")",";","vec3","kk","=","normalize","(","i_",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kl","=","jd",";","eh","(","kl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","km","=","vec4","(","kl",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","km","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","kn","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ko","=","normalize","(","u_view_matrix_frag","*","vec4","(","kj",",","0.0",")",")",".","st",";","ko","=","ko","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","kp","=","texture2D","(","u_colormap0",",","jR",")",";","eh","(","kp",".","rgb",")",";","vec4","kq",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","texture2D","(","u_colormap1",",","ko",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","texture2D","(","u_colormap1",",","jR",")",";"]}]}}]},{type:"textline",tokens:["eh","(","kq",".","rgb",")",";","vec4","kr","=","texture2D","(","u_stencil0",",","jR",")",";","vec4","ks","=","mix","(","kp",",","kq",",","kr",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ks","=","texture2D","(","u_colormap0",",","ko",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ks","=","texture2D","(","u_colormap0",",","jR","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["eh","(","ks",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["km",".","rgb","=","mix","(","km",".","rgb",",","ks",".","rgb",",","u_diffuse_color_factor",")",";","float","kt","=","u_alpha_factor","*","ks",".","a",";","kt","+=","(","1.0","-","step","(","0.0",",","kt",")",")",";","km",".","a","=","mix","(","kt",",","1.0",",","u_diffuse_color",".","a",")",";","kn","=","ks",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["km",".","rgb","*=","mix","(","vec3","(","1.0",")",",","ks",".","rgb",",","u_diffuse_color_factor",")",";","km",".","a","=","ks",".","a",";","kn","=","ks",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","ku","=","u_diffuse_intensity","*","km",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kv","=","ku",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kw","=","0.5","*","kj",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kx","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","kj",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kx","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","kw",")",";"]}]}}]},{type:"textline",tokens:["vec3","ky","=","u_ambient","*","kx",";","float","kz","=","di","(","u_shadow_visibility_falloff",",","ku",")",";","vec3","kA","=","u_emit","*","km",".","rgb",";","vec3","kB","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kC","=","vec3","(","kn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kC","=","texture2D","(","u_specmap",",","jR",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["eh","(","kC",".","rgb",")",";","kB","=","mix","(","kB",",","kC",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","kD","=","u_specular_params","[","0","]",";","vec2","kE","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","kF","=","kD","*","kB",";","fd","kG","=","hy","(","kA",",","ky",",","ku",",","kF",",","ja",",","kj",",","kk",",","kE",",","u_diffuse_params",",","kz",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","kv","=","kG",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kH","=","u_reflect_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kH","=","0.0",";"]}]}}]},{type:"textline",tokens:["jB","(","kv",",","kk",",","kj",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","kH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kv","+=","kG",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","max","(","kv","-","sqrt","(","0.01","*","-","min","(","jQ",",","0.0",")",")",",","0.5","*","kv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["iZ","(","kv",",","jQ",",","u_time",",","kz",",","kj",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","ja",",","jV",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","kI","=","km",".","a",";","if","(","kI","<=","0.5",")","discard",";","kI","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kI","=","km",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kI","+=","kG",".","a",".","a","*","kF",".","r",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kI","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","mix","(","jP","(","cz",",","kj",".","xz","*","u_refr_bump",")",",","kv",",","kI",")",";","kI","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kJ","=","eB","(","u_cube_fog",",","kk",")",";","vec4","kK","=","vec4","(","kJ",",","u_fog_color_density",".","a",")",";","eh","(","kK",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","kK","=","u_fog_color_density",";","kK",".","rgb","*=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["eU","(","kv",",","jV",",","kk",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","kK",",","jQ",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eu","(","kv",",","jV",",","kK",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","vec3","(","cB",".","a",")",";"]}]}}]},{type:"textline",tokens:["ej","(","kv",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["em","(","kv",",","kI",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kv",",","kI",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","i_",";","varying","vec3","ja",";","varying","vec3","jb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","je",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","jQ","=","a_position",";","vec3","jR","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jS","=","vec3","(","a_tangent",")",";","vec3","jT","=","a_tangent","[","3","]","*","cross","(","jR",",","jS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jS","=","vec3","(","0.0",")",";","vec3","jT","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jQ","=","mix","(","jQ",",","a_position_next",",","u_va_frame_factor",")",";","jR","=","mix","(","jR",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jU","=","vec3","(","a_tangent",")",";","vec3","jV","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","jU",")",";","jS","=","mix","(","jS",",","jU",",","u_va_frame_factor",")",";","jT","=","mix","(","jT",",","jV",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bl","(","jQ",",","jS",",","jT",",","jR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jW","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jW","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","jX","=","dZ","(","jQ",",","jS",",","jT",",","jR",",","jW",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jY","=","(","u_model_matrix","*","vec4","(","jW",",","1.0",")",")",".","xyz",";","mat4","jZ","=","_","(","u_camera_eye",",","jY",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","j_","=","(","u_model_matrix","*","vec4","(","jW",",","1.0",")",")",".","xyz",";","jZ","=","jZ","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","j_",")",";"]}]}}]},{type:"textline",tokens:["c","jX","=","ag","(","jQ","-","jW",",","jW",",","jS",",","jT",",","jR",",","jZ",")",";","jX",".","b","=","jY",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","jX","=","ag","(","jQ",",","jW",",","jS",",","jT",",","jR",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"textline",tokens:["float","ka","=","(","dot","(","cross","(","jX",".","e",",","jX",".","c",")",",","jX",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","jc","=","vec4","(","jX",".","c",",","ka",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","jX","=","dZ","(","jQ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jR",",","jW",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jY","=","(","u_model_matrix","*","vec4","(","jW",",","1.0",")",")",".","xyz",";","mat4","jZ","=","_","(","u_camera_eye",",","jY",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","j_","=","(","u_model_matrix","*","vec4","(","jW",",","1.0",")",")",".","xyz",";","jZ","=","jZ","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","j_",")",";"]}]}}]},{type:"textline",tokens:["c","jX","=","ag","(","jQ","-","jW",",","jW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jR",",","jZ",")",";","jX",".","b","=","jY",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","jX","=","ag","(","jQ",",","jW",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jR",",","u_model_matrix",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","jX",".","a",",","jX",".","b",",","jR",")",";"]}]}}]},{type:"textline",tokens:["ja","=","jX",".","a",";","jb","=","jX",".","e",";","i_","=","u_camera_eye","-","jX",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["jd","=","jX",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["jd","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","kb","=","u_view_matrix","*","vec4","(","jX",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cA","=","kb",";"]}]}}]},{type:"textline",tokens:["vec4","kc","=","u_proj_matrix","*","kb",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["kc",".","xy","+=","u_subpixel_jitter","*","kc",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["ea","(","kc",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ea","(","jX",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kd","=","kc",".","x",";","float","ke","=","kc",".","y",";","float","kf","=","kc",".","w",";","cz",".","x","=","(","kd","+","kf",")","/","2.0",";","cz",".","y","=","(","ke","+","kf",")","/","2.0",";","cz",".","z","=","kf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["je","=","-","kb",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","kc",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED","&&","WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_NORMAL_VIEW","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ja",";","varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jb",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","je",";"]}]}}]},{type:"textline",tokens:["float","jQ","=","0.0",";","float","jR","=","1.0",";","vec3","jS","=","vec3","(","jR",")",";","vec3","jT","=","vec3","(","jQ",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"},{type:"textline",tokens:["vec3","jX","(","in","vec3","jU",",","in","float","jV",")","{","vec3","jW","=","vec3","(","jQ",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["jW","=","jP","(","cz",",","jU",".","xz","*","jV",")",";"]}]}}]},{type:"textline",tokens:["return","jW",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kd","(","vec3","jY",")","{","vec4","jZ","=","vec4","(","jQ",",","-","jR","/","3.0",",","2.0","/","3.0",",","-","jR",")",";","vec4","j_","=","mix","(","vec4","(","jY",".","bg",",","jZ",".","wz",")",",","vec4","(","jY",".","gb",",","jZ",".","xy",")",",","step","(","jY",".","b",",","jY",".","g",")",")",";","vec4","ka","=","mix","(","vec4","(","j_",".","xyw",",","jY",".","r",")",",","vec4","(","jY",".","r",",","j_",".","yzx",")",",","step","(","j_",".","x",",","jY",".","r",")",")",";","float","kb","=","ka",".","x","-","min","(","ka",".","w",",","ka",".","y",")",";","float","kc","=","1.0e-10",";","return","vec3","(","abs","(","ka",".","z","+","(","ka",".","w","-","ka",".","y",")","/","(","6.0","*","kb","+","kc",")",")",",","kb","/","(","ka",".","x","+","kc",")",",","ka",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kh","(","vec3","ke",")","{","vec4","kf","=","vec4","(","jR",",","2.0","/","3.0",",","jR","/","3.0",",","3.0",")",";","vec3","kg","=","abs","(","fract","(","vec3","(","ke",".","r",",","ke",".","r",",","ke",".","r",")","+","kf",".","xyz",")","*","6.0","-","kf",".","www",")",";","return","ke",".","b","*","mix","(","kf",".","xxx",",","clamp","(","kg","-","kf",".","xxx",",","jQ",",","jR",")",",","ke",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kj","(","vec2","ki",")","{","return","vec3","(","ki","*","2.0","-","vec2","(","jR",",","jR",")",",","jQ",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kl","(","vec3","kk",")","{","return","vec2","(","kk",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","kq","(","inout","vec3","km",",","vec3","kn",",","vec3","ko",",","float","kp",")","{"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["jB","(","km",",","kn",",","ko",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","kp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jB","(","km",",","kn",",","ko",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","kp",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"lg",qualifier:["vec3"]},{type:"node_out",name:"lh",qualifier:["float"]},{type:"node_out",name:"li",qualifier:["float"]},{type:"textline",tokens:["lg","=","normalize","(","kW",".","xyz",")",";","lh","=","abs","(","kW",".","z",")",";","li","=","length","(","kW",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"lj",qualifier:["float"]},{type:"node_in",name:"lk",qualifier:["float"]},{type:"node_in",name:"ll",qualifier:["float"]},{type:"node_out",name:"lm",qualifier:["vec3"]},{type:"textline",tokens:["lm","=","vec3","(","lj",",","lk",",","ll",")",";"]}]}},{type:"node",name:"COMBHSV",group:{type:"group",parts:[{type:"node_in",name:"ln",qualifier:["float"]},{type:"node_in",name:"lo",qualifier:["float"]},{type:"node_in",name:"lp",qualifier:["float"]},{type:"node_out",name:"lq",qualifier:["vec3"]},{type:"textline",tokens:["lq","=","kh","(","vec3","(","ln",",","lo",",","lp",")",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"kr",qualifier:["varying","vec2"]},{type:"node_out",name:"lr",qualifier:["vec3"]},{type:"textline",tokens:["lr","=","kj","(","kr",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"ks",qualifier:["varying","vec3"]},{type:"node_out",name:"ls",qualifier:["vec3"]},{type:"textline",tokens:["ls","=","ks",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"kt",qualifier:["varying","float"]},{type:"node_out",name:"lt",qualifier:["float"]},{type:"textline",tokens:["lt","=","kt",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"ku",qualifier:["varying","vec2"]},{type:"node_out",name:"lu",qualifier:["float"]},{type:"node_out",name:"lv",qualifier:["float"]},{type:"textline",tokens:["lu","=","ku","[","0","]",";","lv","=","ku","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"kv",qualifier:["varying","vec3"]},{type:"node_out",name:"lw",qualifier:["float"]},{type:"node_out",name:"lx",qualifier:["float"]},{type:"node_out",name:"ly",qualifier:["float"]},{type:"textline",tokens:["lw","=","kv","[","0","]",";","lx","=","kv","[","1","]",";","ly","=","kv","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"lz",qualifier:["vec3"]},{type:"textline",tokens:["lz","=","kQ",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"lA",qualifier:["float"]},{type:"textline",tokens:["lA","=","(","gl_FrontFacing",")","?","jR",":","jQ",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"lB",qualifier:["vec3"]},{type:"textline",tokens:["lB","=","kU",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"lC",qualifier:["vec3"]},{type:"textline",tokens:["lC","=","vec3","(","kV",".","r",",","-","kV",".","b",",","kV",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"lD",qualifier:["float"]},{type:"node_in",name:"lE",qualifier:["float"]},{type:"node_in",name:"lF",qualifier:["float"]},{type:"node_in",name:"lG",qualifier:["float"]},{type:"node_in",name:"lH",qualifier:["vec3"]},{type:"node_out",name:"lI",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","lJ","=","kd","(","lH",")",";","lJ","[","0","]","+=","(","lD","-","0.5",")",";","if","(","lJ","[","0","]",">","jR",")","lJ","[","0","]","-=","jR",";","else","if","(","lJ","[","0","]","<","jQ",")","lJ","[","0","]","+=","jR",";","lJ","*=","vec3","(","jR",",","lE",",","lF",")",";","lJ","=","mix","(","jS",",","mix","(","jT",",","lJ",",","step","(","jT",",","lJ",")",")",",","step","(","lJ",",","jS",")",")",";","lI","=","mix","(","lH",",","kh","(","lJ",")",",","lG",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"lK",qualifier:["float"]},{type:"node_in",name:"lL",qualifier:["vec3"]},{type:"node_out",name:"lM",qualifier:["vec3"]},{type:"textline",tokens:["lM","=","mix","(","lL",",","vec3","(","jR",")","-","lL",",","lK",")",";"]}]}},{type:"node",name:"LAMP",group:{type:"group",parts:[{type:"node_param",name:"kw",qualifier:["const","float"]},{type:"node_out",name:"lN",qualifier:["vec3"]},{type:"node_out",name:"lO",qualifier:["vec3"]},{type:"node_out",name:"lP",qualifier:["float"]},{type:"node_out",name:"lQ",qualifier:["float"]},{type:"textline",tokens:["{","const","int","lR","=","int","(","kw",")",";","float","lS","=","u_lamp_light_factors","[","lR","]",".","z",";","lN","=","u_lamp_light_color_intensities","[","lR","]",";","if","(","lS","!=","-","jR",")","{","lO","=","u_lamp_light_positions","[","lR","]","-","ja",";","lP","=","length","(","lO",")",";","lO","=","normalize","(","lO",")",";","lQ","=","lS","/","(","lS","+","lP","*","lP",")",";","}","else","{","lO","=","u_lamp_light_directions","[","lR","]",";","lP","=","length","(","u_lamp_light_positions","[","lR","]","-","ja",")",";","lQ","=","jR",";","}","}"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"kx",qualifier:["vec3"]},{type:"node_in",name:"lT",qualifier:["vec3"]},{type:"node_out",name:"lU",qualifier:["vec3"]},{type:"node_out",name:"lV",qualifier:["float"]},{type:"textline",tokens:["lU","=","kx",";","lV","=","-","dot","(","lT",",","kx",")",";"]}]}},{type:"node",name:"NORMAL_VIEW",group:{type:"group",parts:[{type:"node_in",name:"lW",qualifier:["vec3"]},{type:"node_out",name:"lX",qualifier:["vec3"]},{type:"textline",tokens:["lX","=","-","(","u_view_matrix_frag","*","vec4","(","lW",",","jQ",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"ky",qualifier:["vec3"]},{type:"node_in",name:"lY",qualifier:["vec3"]},{type:"node_out",name:"lZ",qualifier:["vec3"]},{type:"textline",tokens:["lZ","=","lY","*","ky",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"kz",qualifier:["mat4"]},{type:"node_param",name:"kA",qualifier:["const","float"]},{type:"node_param",name:"kB",qualifier:["const","float"]},{type:"node_param",name:"kC",qualifier:["vec3"]},{type:"node_param",name:"kD",qualifier:["vec3"]},{type:"node_in",name:"l_",qualifier:["vec3"]},{type:"node_out",name:"ma",qualifier:["vec3"]},{type:"textline",tokens:["ma","=","(","kz","*","vec4","(","l_",",","jR",")",")",".","xyz",";","if","(","kA","==","jR",")","ma","=","max","(","ma",",","kC",")",";","if","(","kB","==","jR",")","ma","=","min","(","ma",",","kD",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"mb",qualifier:["float"]},{type:"node_in",name:"mc",qualifier:["float"]},{type:"node_out",name:"md",qualifier:["float"]},{type:"textline",tokens:["md","=","mb","+","mc",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"me",qualifier:["float"]},{type:"node_in",name:"mf",qualifier:["float"]},{type:"node_out",name:"mg",qualifier:["float"]},{type:"textline",tokens:["mg","=","me","-","mf",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"mh",qualifier:["float"]},{type:"node_in",name:"mi",qualifier:["float"]},{type:"node_out",name:"mj",qualifier:["float"]},{type:"textline",tokens:["mj","=","mh","*","mi",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"mk",qualifier:["float"]},{type:"node_in",name:"ml",qualifier:["float"]},{type:"node_out",name:"mm",qualifier:["float"]},{type:"textline",tokens:["mm","=","(","ml","!=","jQ",")","?","mk","/","ml",":","jQ",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"mn",qualifier:["float"]},{type:"node_in",name:"mo",qualifier:["float"]},{type:"node_out",name:"mp",qualifier:["float"]},{type:"textline",tokens:["mp","=","sin","(","mn",")",";","mo",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"mq",qualifier:["float"]},{type:"node_in",name:"mr",qualifier:["float"]},{type:"node_out",name:"ms",qualifier:["float"]},{type:"textline",tokens:["ms","=","cos","(","mq",")",";","mr",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"mt",qualifier:["float"]},{type:"node_in",name:"mu",qualifier:["float"]},{type:"node_out",name:"mv",qualifier:["float"]},{type:"textline",tokens:["mv","=","tan","(","mt",")",";","mu",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"mw",qualifier:["float"]},{type:"node_in",name:"mx",qualifier:["float"]},{type:"node_out",name:"my",qualifier:["float"]},{type:"textline",tokens:["my","=","(","mw","<=","jR","&&","mw",">=","-","jR",")","?","asin","(","mw",")",":","jQ",";","mx",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"mz",qualifier:["float"]},{type:"node_in",name:"mA",qualifier:["float"]},{type:"node_out",name:"mB",qualifier:["float"]},{type:"textline",tokens:["mB","=","(","mz","<=","jR","&&","mz",">=","-","jR",")","?","acos","(","mz",")",":","jQ",";","mA",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"mC",qualifier:["float"]},{type:"node_in",name:"mD",qualifier:["float"]},{type:"node_out",name:"mE",qualifier:["float"]},{type:"textline",tokens:["mE","=","atan","(","mC",")",";","mD",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"mF",qualifier:["float"]},{type:"node_in",name:"mG",qualifier:["float"]},{type:"node_out",name:"mH",qualifier:["float"]},{type:"textline",tokens:["if","(","mF","<","jQ","||","mF","==","jQ","&&","mG","==","jQ",")","mH","=","jQ",";","else","mH","=","pow","(","mF",",","mG",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"mI",qualifier:["float"]},{type:"node_in",name:"mJ",qualifier:["float"]},{type:"node_out",name:"mK",qualifier:["float"]},{type:"textline",tokens:["mK","=","(","mI",">","jQ","&&","mJ",">","jQ",")","?","log2","(","mI",")","/","log2","(","mJ",")",":","jQ",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"mL",qualifier:["float"]},{type:"node_in",name:"mM",qualifier:["float"]},{type:"node_out",name:"mN",qualifier:["float"]},{type:"textline",tokens:["mN","=","min","(","mL",",","mM",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"mO",qualifier:["float"]},{type:"node_in",name:"mP",qualifier:["float"]},{type:"node_out",name:"mQ",qualifier:["float"]},{type:"textline",tokens:["mQ","=","max","(","mO",",","mP",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"mR",qualifier:["float"]},{type:"node_in",name:"mS",qualifier:["float"]},{type:"node_out",name:"mT",qualifier:["float"]},{type:"textline",tokens:["mT","=","floor","(","mR","+","0.5",")",";","mS",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"mU",qualifier:["float"]},{type:"node_in",name:"mV",qualifier:["float"]},{type:"node_out",name:"mW",qualifier:["float"]},{type:"textline",tokens:["mW","=","(","mU","<","mV",")","?","jR",":","jQ",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"mX",qualifier:["float"]},{type:"node_in",name:"mY",qualifier:["float"]},{type:"node_out",name:"mZ",qualifier:["float"]},{type:"textline",tokens:["mZ","=","(","mX",">","mY",")","?","jR",":","jQ",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"m_",qualifier:["float"]},{type:"node_in",name:"na",qualifier:["float"]},{type:"node_out",name:"nb",qualifier:["float"]},{type:"textline",tokens:["nb","=","abs","(","na",")",">","0.000001","?","mod","(","m_",",","na",")",":","jQ",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"nc",qualifier:["float"]},{type:"node_in",name:"nd",qualifier:["vec3"]},{type:"node_in",name:"ne",qualifier:["vec3"]},{type:"node_out",name:"nf",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ng","=","clamp","(","nc",",","jQ",",","jR",")",";","nf","=","mix","(","nd",",","ne",",","ng",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"nh",qualifier:["float"]},{type:"node_in",name:"ni",qualifier:["vec3"]},{type:"node_in",name:"nj",qualifier:["vec3"]},{type:"node_out",name:"nk",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nl","=","clamp","(","nh",",","jQ",",","jR",")",";","nk","=","mix","(","ni",",","ni","+","nj",",","nl",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"nm",qualifier:["float"]},{type:"node_in",name:"nn",qualifier:["vec3"]},{type:"node_in",name:"no",qualifier:["vec3"]},{type:"node_out",name:"np",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nq","=","clamp","(","nm",",","jQ",",","jR",")",";","np","=","mix","(","nn",",","nn","*","no",",","nq",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"nr",qualifier:["float"]},{type:"node_in",name:"ns",qualifier:["vec3"]},{type:"node_in",name:"nt",qualifier:["vec3"]},{type:"node_out",name:"nu",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nv","=","clamp","(","nr",",","jQ",",","jR",")",";","nu","=","mix","(","ns",",","ns","-","nt",",","nv",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"nw",qualifier:["float"]},{type:"node_in",name:"nx",qualifier:["vec3"]},{type:"node_in",name:"ny",qualifier:["vec3"]},{type:"node_out",name:"nz",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nA","=","clamp","(","nw",",","jQ",",","jR",")",";","float","nB","=","jR","-","nA",";","nz","=","jS","-","(","vec3","(","nB",")","+","nA","*","(","jS","-","ny",")",")","*","(","jS","-","nx",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"nC",qualifier:["float"]},{type:"node_in",name:"nD",qualifier:["vec3"]},{type:"node_in",name:"nE",qualifier:["vec3"]},{type:"node_out",name:"nF",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nG","=","clamp","(","nC",",","jQ",",","jR",")",";","float","nH","=","jR","-","nG",";","nE","+=","step","(","nE",",","jT",")",";","nF","=","nH","*","nD","+","nG","*","nD","/","nE",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"nI",qualifier:["float"]},{type:"node_in",name:"nJ",qualifier:["vec3"]},{type:"node_in",name:"nK",qualifier:["vec3"]},{type:"node_out",name:"nL",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nM","=","clamp","(","nI",",","jQ",",","jR",")",";","nL","=","mix","(","nJ",",","abs","(","nJ","-","nK",")",",","nM",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"nN",qualifier:["float"]},{type:"node_in",name:"nO",qualifier:["vec3"]},{type:"node_in",name:"nP",qualifier:["vec3"]},{type:"node_out",name:"nQ",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nR","=","clamp","(","nN",",","jQ",",","jR",")",";","nQ","=","min","(","nO",".","rgb",",","nP",".","rgb","*","nR",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"nS",qualifier:["float"]},{type:"node_in",name:"nT",qualifier:["vec3"]},{type:"node_in",name:"nU",qualifier:["vec3"]},{type:"node_out",name:"nV",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nW","=","clamp","(","nS",",","jQ",",","jR",")",";","nV","=","max","(","nT",".","rgb",",","nU",".","rgb","*","nW",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"nX",qualifier:["float"]},{type:"node_in",name:"nY",qualifier:["vec3"]},{type:"node_in",name:"nZ",qualifier:["vec3"]},{type:"node_out",name:"n_",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oa","=","clamp","(","nX",",","jQ",",","jR",")",";","float","ob","=","jR","-","oa",";","vec3","oc","=","vec3","(","ob",")",";","n_","=","mix","(","nY","*","(","oc","+","2.0","*","oa","*","nZ",")",",","jS","-","(","oc","+","2.0","*","oa","*","(","jS","-","nZ",")",")","*","(","jS","-","nY",")",",","step","(","0.5",",","nY",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"od",qualifier:["float"]},{type:"node_in",name:"oe",qualifier:["vec3"]},{type:"node_in",name:"of",qualifier:["vec3"]},{type:"node_out",name:"og",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oh","=","clamp","(","od",",","jQ",",","jR",")",";","vec3","oi","=","jS","-","oh","*","of",";","vec3","oj","=","oe","/","(","oi","+","step","(","oi",",","jT",")",")",";","og","=","(","jS","-","step","(","oe",",","jT",")",")","*","mix","(","mix","(","jS",",","oj",",","step","(","oj",",","jS",")",")",",","jS",",","step","(","oi",",","jT",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"ok",qualifier:["float"]},{type:"node_in",name:"ol",qualifier:["vec3"]},{type:"node_in",name:"om",qualifier:["vec3"]},{type:"node_out",name:"on",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oo","=","clamp","(","ok",",","jQ",",","jR",")",";","vec3","op","=","jS","-","oo","*","(","jS","-","om",")",";","vec3","oq","=","jS","-","(","jS","-","ol",")","/","(","op","+","step","(","op",",","jT",")",")",";","on","=","mix","(","mix","(","jT",",","mix","(","jS",",","oq",",","step","(","oq",",","jS",")",")",",","step","(","jQ",",","oq",")",")",",","jT",",","step","(","op",",","jT",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"or",qualifier:["float"]},{type:"node_in",name:"os",qualifier:["vec3"]},{type:"node_in",name:"ot",qualifier:["vec3"]},{type:"node_out",name:"ou",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ov","=","clamp","(","or",",","jQ",",","jR",")",";","vec3","ow",",","ox",",","oy",";","ou","=","os",";","ox","=","kd","(","ot",")",";","if","(","ox",".","y","!=","jQ",")","{","ow","=","kd","(","ou",")",";","ow",".","x","=","ox",".","x",";","oy","=","kh","(","ow",")",";","ou","=","mix","(","ou",",","oy",",","ov",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"oz",qualifier:["float"]},{type:"node_in",name:"oA",qualifier:["vec3"]},{type:"node_in",name:"oB",qualifier:["vec3"]},{type:"node_out",name:"oC",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oD","=","clamp","(","oz",",","jQ",",","jR",")",";","float","oE","=","jR","-","oD",";","oC","=","oA",";","vec3","oF",",","oG",";","oF","=","kd","(","oC",")",";","if","(","oF",".","y","!=","jQ",")","{","oG","=","kd","(","oB",")",";","oF",".","y","=","oE","*","oF",".","y","+","oD","*","oG",".","y",";","oC","=","kh","(","oF",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"oH",qualifier:["float"]},{type:"node_in",name:"oI",qualifier:["vec3"]},{type:"node_in",name:"oJ",qualifier:["vec3"]},{type:"node_out",name:"oK",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oL","=","clamp","(","oH",",","jQ",",","jR",")",";","float","oM","=","jR","-","oL",";","vec3","oN",",","oO",";","oN","=","kd","(","oI",")",";","oO","=","kd","(","oJ",")",";","oN",".","z","=","oM","*","oN",".","z","+","oL","*","oO",".","z",";","oK","=","kh","(","oN",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"oP",qualifier:["float"]},{type:"node_in",name:"oQ",qualifier:["vec3"]},{type:"node_in",name:"oR",qualifier:["vec3"]},{type:"node_out",name:"oS",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oT","=","clamp","(","oP",",","jQ",",","jR",")",";","vec3","oU",",","oV",",","oW",";","oS","=","oQ",";","oV","=","kd","(","oR",")",";","if","(","oV",".","y","!=","jQ",")","{","oU","=","kd","(","oS",")",";","oU",".","x","=","oV",".","x",";","oU",".","y","=","oV",".","y",";","oW","=","kh","(","oU",")",";","oS","=","mix","(","oS",",","oW",",","oT",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"oX",qualifier:["float"]},{type:"node_in",name:"oY",qualifier:["vec3"]},{type:"node_in",name:"oZ",qualifier:["vec3"]},{type:"node_out",name:"o_",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pa","=","clamp","(","oX",",","jQ",",","jR",")",";","float","pb","=","jR","-","pa",";","vec3","pc","=","oZ","+","oY","-","oZ","*","oY",";","o_","=","oY","*","(","vec3","(","pb",")","+","vec3","(","pa",")","*","(","(","jS","-","oY",")","*","oZ","+","pc",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"pd",qualifier:["float"]},{type:"node_in",name:"pe",qualifier:["vec3"]},{type:"node_in",name:"pf",qualifier:["vec3"]},{type:"node_out",name:"pg",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ph","=","clamp","(","pd",",","jQ",",","jR",")",";","pg","=","clamp","(","pe","+","ph","*","(","2.0","*","pf","-","jS",")",",","jQ",",","jR",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"pi",qualifier:["vec3"]},{type:"node_in",name:"pj",qualifier:["float"]},{type:"textline",tokens:["la","=","pi",";","lf","=","pj",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"kE",qualifier:["const","vec3"]},{type:"node_param",name:"kF",qualifier:["const","vec4"]},{type:"node_param",name:"kG",qualifier:["const","float"]},{type:"node_in",name:"pk",qualifier:["vec3"]},{type:"node_in",name:"pl",qualifier:["float"]},{type:"node_in",name:"pm",qualifier:["vec3"]},{type:"node_in",name:"pn",qualifier:["vec3"]},{type:"node_out",name:"po",qualifier:["vec3"]},{type:"node_out",name:"pp",qualifier:["float"]},{type:"node_out",name:"pq",qualifier:["vec3"]},{type:"textline",tokens:["{","pk","=","clamp","(","pk",",","jQ",",","jR",")",";","pl","=","clamp","(","pl",",","jQ",",","jR",")",";","pm","=","clamp","(","pm",",","jQ",",","jR",")",";","vec3","pr","=","pk",";","float","ps","=","kE","[","0","]",";","vec2","pt","=","vec2","(","kE","[","1","]",",","kE","[","2","]",")",";","vec3","pu","=","kX","*","pk",";","vec3","pv","=","kY","*","kS",";","vec3","pw","=","kF","[","1","]","*","pm",";","float","px","=","kF","[","0","]",";","vec2","py","=","vec2","(","kF","[","2","]",",","kF","[","3","]",")",";","float","pz","=","di","(","kZ",",","pr",")",";","vec3","pA",";","if","(","kG","==","jR",")","pA","=","normalize","(","pn",")",";","else","pA","=","kQ",";","fd","pB","=","hy","(","pu",",","pv",",","pr",",","pw",",","kV",",","pA",",","kU",",","py",",","pt",",","pz",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","jQ",",","vec4","(","jQ",")",")",";","po","=","(","ps","==","jR",")","?","pB",".","a",".","rgb",":","vec3","(","jQ",")",";","pp","=","pl","+","pB",".","a",".","a","*","pw",".","r",";","pp","=","clamp","(","pp",",","jQ",",","jR",")",";","pq","=","pA",";","if","(","px","==","jR",")","{","po","+=","pB",".","b",";","lb","=","pB",".","b",";","}","else","{","lb","=","vec3","(","jQ",")",";","}","lc","=","pA",";","le","=","pz",";","}"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"kH",qualifier:["const","vec3"]},{type:"node_param",name:"kI",qualifier:["const","vec4"]},{type:"node_param",name:"kJ",qualifier:["const","float"]},{type:"node_in",name:"pC",qualifier:["vec3"]},{type:"node_in",name:"pD",qualifier:["float"]},{type:"node_in",name:"pE",qualifier:["vec3"]},{type:"node_in",name:"pF",qualifier:["vec3"]},{type:"node_in",name:"pG",qualifier:["float"]},{type:"node_in",name:"pH",qualifier:["float"]},{type:"node_in",name:"pI",qualifier:["vec4"]},{type:"node_in",name:"pJ",qualifier:["float"]},{type:"node_out",name:"pK",qualifier:["vec3"]},{type:"node_out",name:"pL",qualifier:["float"]},{type:"node_out",name:"pM",qualifier:["vec3"]},{type:"node_out",name:"pN",qualifier:["vec3"]},{type:"node_out",name:"pO",qualifier:["vec3"]},{type:"textline",tokens:["{","pC","=","clamp","(","pC",",","jQ",",","jR",")",";","pD","=","clamp","(","pD",",","jQ",",","jR",")",";","pE","=","clamp","(","pE",",","jQ",",","jR",")",";","vec3","pP","=","pC",";","float","pQ","=","kH","[","0","]",";","vec2","pR","=","vec2","(","kH","[","1","]",",","kH","[","2","]",")",";","vec3","pS","=","pG","*","pC",";","vec3","pT","=","kY","*","kS",";","vec3","pU","=","kI","[","1","]","*","pE",";","float","pV","=","kI","[","0","]",";","vec2","pW","=","vec2","(","kI","[","2","]",",","kI","[","3","]",")",";","float","pX","=","di","(","kZ",",","pP",")",";","vec3","pY",";","if","(","kJ","==","jR",")","pY","=","normalize","(","pF",")",";","else","pY","=","kQ",";","fd","pZ","=","hy","(","pS",",","pT",",","pP",",","pU",",","kV",",","pY",",","kU",",","pW",",","pR",",","pX",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","pH",",","pI",")",";","pK","=","(","pQ","==","jR",")","?","pZ",".","a",".","rgb",":","vec3","(","jQ",")",";","pL","=","pD",";","pM","=","pY",";","pN","=","pZ",".","a",".","rgb",";","pO","=","pZ",".","b",";","kq","(","pK",",","kU",",","pM",",","pJ",")",";","if","(","pV","==","jR",")","{","pK","+=","pZ",".","b",";","pL","+=","pZ",".","a",".","a","*","pU",".","r",";","pL","=","clamp","(","pL",",","jQ",",","jR",")",";","lb","=","pZ",".","b",";","}","else","{","lb","=","vec3","(","jQ",")",";","}","lc","=","pY",";","le","=","pX",";","}"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"kK",qualifier:["vec3"]},{type:"node_out",name:"p_",qualifier:["vec3"]},{type:"textline",tokens:["p_","=","kK",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"qa",qualifier:["vec3"]},{type:"node_out",name:"qb",qualifier:["float"]},{type:"textline",tokens:["qb","=","qa",".","r","*","0.35","+","qa",".","g","*","0.45","+","qa",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"qc",qualifier:["vec3"]},{type:"node_out",name:"qd",qualifier:["float"]},{type:"node_out",name:"qe",qualifier:["float"]},{type:"node_out",name:"qf",qualifier:["float"]},{type:"textline",tokens:["qd","=","qc",".","r",";","qe","=","qc",".","g",";","qf","=","qc",".","b",";"]}]}},{type:"node",name:"SEPHSV",group:{type:"group",parts:[{type:"node_in",name:"qg",qualifier:["vec3"]},{type:"node_out",name:"qh",qualifier:["float"]},{type:"node_out",name:"qi",qualifier:["float"]},{type:"node_out",name:"qj",qualifier:["float"]},{type:"textline",tokens:["{","vec3","qk","=","kd","(","qg",")",";","qh","=","qk",".","r",";","qi","=","qk",".","g",";","qj","=","qk",".","b",";","}"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"ql",qualifier:["float"]},{type:"node_in",name:"qm",qualifier:["float"]},{type:"node_in",name:"qn",qualifier:["float"]},{type:"node_out",name:"qo",qualifier:["float"]},{type:"textline",tokens:["qo","=","jR","/","(","jR","+","pow","(","2.71828183",",","-","(","(","ql","-","qn",")","*","qm",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"qp",qualifier:["vec3"]},{type:"node_out",name:"qq",qualifier:["vec3"]},{type:"textline",tokens:["qq","=","max","(","jT",",","qp",")",";","qq","=","pow","(","qq",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"qr",qualifier:["vec3"]},{type:"node_out",name:"qs",qualifier:["vec3"]},{type:"textline",tokens:["qs","=","max","(","jT",",","qr",")",";","qs","=","pow","(","qs",",","vec3","(","jR","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qt",qualifier:["vec3"]},{type:"node_out",name:"qu",qualifier:["vec3"]},{type:"node_out",name:"qv",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qw","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kl","(","qt",")",")",";","qu","=","qw",".","xyz",";","eh","(","qu",")",";","qv","=","qw",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qx",qualifier:["vec3"]},{type:"node_out",name:"qy",qualifier:["vec3"]},{type:"node_out",name:"qz",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qA","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kl","(","qx",")",")",";","ld","=","qA",".","xyz","-","0.5",";","qy","=","normalize","(","k_","*","ld",")",";","qz","=","qA",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"qB",qualifier:["vec3"]},{type:"node_out",name:"qC",qualifier:["vec3"]},{type:"node_out",name:"qD",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qE","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","qB",")",";","qC","=","qE",".","xyz",";","eh","(","qC",")",";","qD","=","qE",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qF",qualifier:["vec3"]},{type:"node_in",name:"qG",qualifier:["vec3"]},{type:"node_out",name:"qH",qualifier:["vec3"]},{type:"node_out",name:"qI",qualifier:["float"]},{type:"node_out",name:"qJ",qualifier:["vec3"]},{type:"node_out",name:"qK",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qL","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","kl","(","qF",")",")",";","qH","=","qL",".","xyz",";","eh","(","qH",")",";","qI","=","qL",".","w",";","qL","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","kl","(","qG",")",")",";","qJ","=","qL",".","xyz",";","eh","(","qJ",")",";","qK","=","qL",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qM",qualifier:["vec3"]},{type:"node_in",name:"qN",qualifier:["vec3"]},{type:"node_out",name:"qO",qualifier:["vec3"]},{type:"node_out",name:"qP",qualifier:["float"]},{type:"node_out",name:"qQ",qualifier:["vec3"]},{type:"node_out",name:"qR",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qS","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","kl","(","qM",")",")",";","ld","=","qS",".","xyz","-","0.5",";","qO","=","normalize","(","k_","*","ld",")",";","qP","=","qS",".","w",";","qS","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","kl","(","qN",")",")",";","ld","=","qS",".","xyz","-","0.5",";","qQ","=","normalize","(","k_","*","ld",")",";","qR","=","qS",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qT",qualifier:["vec3"]},{type:"node_in",name:"qU",qualifier:["vec3"]},{type:"node_in",name:"qV",qualifier:["vec3"]},{type:"node_out",name:"qW",qualifier:["vec3"]},{type:"node_out",name:"qX",qualifier:["float"]},{type:"node_out",name:"qY",qualifier:["vec3"]},{type:"node_out",name:"qZ",qualifier:["float"]},{type:"node_out",name:"q_",qualifier:["vec3"]},{type:"node_out",name:"ra",qualifier:["float"]},{type:"textline",tokens:["{","vec4","rb","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","kl","(","qT",")",")",";","qW","=","rb",".","xyz",";","eh","(","qW",")",";","qX","=","rb",".","w",";","rb","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","kl","(","qU",")",")",";","qY","=","rb",".","xyz",";","eh","(","qY",")",";","qZ","=","rb",".","w",";","rb","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","kl","(","qV",")",")",";","q_","=","rb",".","xyz",";","eh","(","q_",")",";","ra","=","rb",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"rc",qualifier:["vec3"]},{type:"node_in",name:"rd",qualifier:["vec3"]},{type:"node_in",name:"re",qualifier:["vec3"]},{type:"node_out",name:"rf",qualifier:["vec3"]},{type:"node_out",name:"rg",qualifier:["float"]},{type:"node_out",name:"rh",qualifier:["vec3"]},{type:"node_out",name:"ri",qualifier:["float"]},{type:"node_out",name:"rj",qualifier:["vec3"]},{type:"node_out",name:"rk",qualifier:["float"]},{type:"textline",tokens:["{","vec4","rl","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","kl","(","rc",")",")",";","ld","=","rl",".","xyz","-","0.5",";","rf","=","normalize","(","k_","*","ld",")",";","rg","=","rl",".","w",";","rl","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","kl","(","rd",")",")",";","ld","=","rl",".","xyz","-","0.5",";","rh","=","normalize","(","k_","*","ld",")",";","ri","=","rl",".","w",";","rl","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","kl","(","re",")",")",";","ld","=","rl",".","xyz","-","0.5",";","rj","=","normalize","(","k_","*","ld",")",";","rk","=","rl",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"kL",qualifier:["float"]},{type:"node_out",name:"rm",qualifier:["float"]},{type:"textline",tokens:["rm","=","kL",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"rn",qualifier:["vec3"]},{type:"node_in",name:"ro",qualifier:["vec3"]},{type:"node_out",name:"rp",qualifier:["vec3"]},{type:"node_out",name:"rq",qualifier:["float"]},{type:"textline",tokens:["rp","=","rn","+","ro",";","rq","=","(","abs","(","rp","[","0","]",")","+","abs","(","rp","[","1","]",")","+","abs","(","rp","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"rr",qualifier:["vec3"]},{type:"node_in",name:"rs",qualifier:["vec3"]},{type:"node_out",name:"rt",qualifier:["vec3"]},{type:"node_out",name:"ru",qualifier:["float"]},{type:"textline",tokens:["rt","=","rr","-","rs",";","ru","=","(","abs","(","rt","[","0","]",")","+","abs","(","rt","[","1","]",")","+","abs","(","rt","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"rv",qualifier:["vec3"]},{type:"node_in",name:"rw",qualifier:["vec3"]},{type:"node_out",name:"rx",qualifier:["vec3"]},{type:"node_out",name:"ry",qualifier:["float"]},{type:"textline",tokens:["rx","=","rv","+","rw",";","ry","=","length","(","rx",")",";","rx","=","normalize","(","rx",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"rz",qualifier:["vec3"]},{type:"node_in",name:"rA",qualifier:["vec3"]},{type:"node_out",name:"rB",qualifier:["vec3"]},{type:"node_out",name:"rC",qualifier:["float"]},{type:"textline",tokens:["rB","=","vec3","(","jQ",")",";","rC","=","dot","(","rz",",","rA",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"rD",qualifier:["vec3"]},{type:"node_in",name:"rE",qualifier:["vec3"]},{type:"node_out",name:"rF",qualifier:["vec3"]},{type:"node_out",name:"rG",qualifier:["float"]},{type:"textline",tokens:["rF","=","cross","(","rD",",","rE",")",";","rG","=","length","(","rF",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"rH",qualifier:["vec3"]},{type:"node_in",name:"rI",qualifier:["vec3"]},{type:"node_out",name:"rJ",qualifier:["vec3"]},{type:"node_out",name:"rK",qualifier:["float"]},{type:"textline",tokens:["rJ","=","normalize","(","rH",")",";","rK","=","length","(","rH",")",";","rI",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"rL",qualifier:["vec3"]},{type:"node_in",name:"rM",qualifier:["vec3"]},{type:"node_out",name:"rN",qualifier:["vec3"]},{type:"textline",tokens:["rN","=","reflect","(","-","rL",",","rM",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"rO",qualifier:["vec3"]},{type:"node_in",name:"rP",qualifier:["float"]},{type:"node_in",name:"rQ",qualifier:["const","float"]},{type:"node_in",name:"rR",qualifier:["const","float"]},{type:"node_out",name:"rS",qualifier:["vec3"]},{type:"textline",tokens:["{","float","rT","=","length","(","kW",")",";","if","(","rT","<","rR",")","{","vec2","rU","=","kl","(","rO",")",";","float","rV","=","clamp","(","0.5","*","(","rR","-","rT",")",",","jQ",",","jR",")",";","float","rW","=","rP","*","rV",";","vec3","rX","=","normalize","(","kU","*","k_",")",";","float","rY","=","jR","/","rQ",";","vec2","rZ","=","rX",".","xy","*","rW","/","(","rQ","*","rX",".","z",")",";","float","r_","=","jR",";","float","sa","=","texture2D","(","node_PARALLAX_var_texture",",","rU",")",".","a",";","for","(","float","sb","=","1.0",";","sb","<=","rQ",";","sb","++",")","{","if","(","sa","<","r_",")","{","r_","-=","rY",";","rU","-=","rZ",";","sa","=","texture2D","(","node_PARALLAX_var_texture",",","rU",")",".","a",";","}","}","vec2","sc","=","rU","+","rZ",";","float","sd","=","texture2D","(","node_PARALLAX_var_texture",",","sc",")",".","a","-","(","r_","+","rY",")",";","float","se","=","sa","-","r_",";","float","sf","=","se","/","(","se","-","sd",")",";","rU","=","sf","*","sc","+","(","jR","-","sf",")","*","rU",";","rS","=","kj","(","rU",")",";","}","else","rS","=","rO",";","}"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"sg",qualifier:["vec3"]},{type:"node_out",name:"sh",qualifier:["vec3"]},{type:"textline",tokens:["sh","=","clamp","(","sg",",","jQ",",","jR",")",";"]}]}},{type:"node",name:"REFRACTION",group:{type:"group",parts:[{type:"node_in",name:"si",qualifier:["vec3"]},{type:"node_in",name:"sj",qualifier:["float"]},{type:"node_out",name:"sk",qualifier:["vec3"]},{type:"textline",tokens:["sk","=","jX","(","si",",","sj",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"sl",qualifier:["float"]},{type:"node_in",name:"sm",qualifier:["float"]},{type:"node_in",name:"sn",qualifier:["float"]},{type:"node_in",name:"so",qualifier:["float"]},{type:"node_in",name:"sp",qualifier:["float"]},{type:"node_out",name:"sq",qualifier:["float"]},{type:"node_out",name:"sr",qualifier:["vec4"]},{type:"textline",tokens:["sq","=","sl",";","sr","=","vec4","(","sm",",","sn",",","so",",","sp",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"ss",qualifier:["float"]},{type:"textline",tokens:["ss","=","u_time",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kM","=","ja",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"textline",tokens:["vec3","kN","=","jb",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kN","=","kN",";","else","kN","=","-","kN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kO","=","cross","(","kN",",","jc",".","xyz",")","*","jc",".","w",";","mat3","kP","=","mat3","(","jc",".","xyz",",","kO",",","kN",")",";"]}]}}]},{type:"textline",tokens:["vec3","kQ","=","normalize","(","kN",")",";","float","kR","=","0.5","*","kQ",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kS","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","kQ",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kS","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","kR",")",";"]}]}}]},{type:"textline",tokens:["vec3","kT","=","u_camera_eye_frag","-","ja",";","vec3","kU","=","normalize","(","kT",")",";","vec3","kV","=","ja",";","vec4","kW","=","cA",";","float","kX","=","u_emit",";","float","kY","=","u_ambient",";","float","kZ","=","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","k_","=","kP",";"]}]}}]},{type:"textline",tokens:["vec3","la",";","vec3","lb",";","vec3","lc",";","vec3","ld",";","float","le",";","float","lf",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","st","=","la",";","float","su","=","lf",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","sv","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["st","=","max","(","st","-","sqrt","(","0.01","*","-","min","(","kM",",","jQ",")",")",",","0.5","*","st",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["iZ","(","st",",","kM",",","u_time",",","le",",","kN",",","u_sun_direction",",","sv",",","u_sun_quaternion",",","ja",",","length","(","cA",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","sw","=","eB","(","u_cube_fog",",","kU",")",";","vec4","sx","=","vec4","(","sw",",","u_fog_color_density",".","a",")",";","eh","(","sx",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","sx","=","u_fog_color_density",";","sx",".","rgb","*=","sv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eU","(","st",",","length","(","cA",")",",","kU",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","sx",",","kM",",","length","(","sv",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eu","(","st",",","length","(","cA",")",",","sx",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","sy","=","texture2DProj","(","u_shadow_mask",",","cz",")",".","rg",";","float","sz","=","sy",".","g",";","st","=","vec3","(","sz",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kV","=","ja",";","vec4","kW","=","cA",";","vec3","kT","=","u_camera_eye_frag","-","ja",";","vec3","kU","=","normalize","(","kT",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kN","=","jb",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kN","=","kN",";","else","kN","=","-","kN",";"]}]}}]},{type:"textline",tokens:["vec3","kQ","=","normalize","(","kN",")",";"]}]}}]},{type:"textline",tokens:["vec3","la",";","float","lf",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","st","=","la",";","float","su","=","lf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","su","<","0.5",")","discard",";","su","=","jR",";"]}]}}]},{type:"textline",tokens:["ej","(","st",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["em","(","st",",","su",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","st",",","su",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ja",";","varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jb",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jc",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cv",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cy",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","je",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"kr",qualifier:["varying","vec2"]},{type:"textline",tokens:["kr","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"kw",qualifier:["varying","vec3"]},{type:"textline",tokens:["kw","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"kx",qualifier:["varying","float"]},{type:"textline",tokens:["kx","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"ky",qualifier:["varying","vec2"]},{type:"textline",tokens:["ky","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"kz",qualifier:["varying","vec3"]},{type:"textline",tokens:["kz","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","kA","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kB","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kC","=","vec3","(","a_tangent",")",";","vec3","kD","=","a_tangent","[","3","]","*","cross","(","kB",",","kC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kC","=","vec3","(","0.0",")",";","vec3","kD","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kB","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kB","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","kC","=","vec3","(","0.0",")",";","vec3","kD","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","mix","(","kA",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","mix","(","kB",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kE","=","vec3","(","a_tangent",")",";","vec3","kF","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","kE",")",";","kC","=","mix","(","kC",",","kE",",","u_va_frame_factor",")",";","kD","=","mix","(","kD",",","kF",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bl","(","kA",",","kC",",","kD",",","kB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kG","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kG","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kH","=","(","u_model_matrix","*","vec4","(","kG",",","1.0",")",")",".","xyz",";","mat4","kI","=","_","(","u_camera_eye",",","kH",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kJ","=","(","u_model_matrix","*","vec4","(","kG",",","1.0",")",")",".","xyz",";","kI","=","kI","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kJ",")",";"]}]}}]},{type:"textline",tokens:["c","kK","=","ag","(","kA","-","kG",",","kG",",","kC",",","kD",",","kB",",","kI",")",";","kK",".","b","=","kH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","kK","=","ag","(","kA",",","kG",",","kC",",","kD",",","kB",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["float","kL","=","(","dot","(","cross","(","kK",".","e",",","kK",".","c",")",",","kK",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","jc","=","vec4","(","kK",".","c",",","kL",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kH","=","(","u_model_matrix","*","vec4","(","kG",",","1.0",")",")",".","xyz",";","mat4","kI","=","_","(","u_camera_eye",",","kH",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kJ","=","(","u_model_matrix","*","vec4","(","kG",",","1.0",")",")",".","xyz",";","kI","=","kI","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kJ",")",";"]}]}}]},{type:"textline",tokens:["c","kK","=","ag","(","kA","-","kG",",","kG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","kB",",","kI",")",";","kK",".","b","=","kH",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","kK","=","ag","(","kA",",","kG",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","kB",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","kK",".","a",",","kK",".","b",",","kB",")",";"]}]}}]},{type:"textline",tokens:["ja","=","kK",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["jb","=","kK",".","e",";"]}]}}]},{type:"textline",tokens:["cA","=","u_view_matrix","*","vec4","(","kK",".","a",",","1.0",")",";","vec4","kM","=","u_proj_matrix","*","cA",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["kM",".","xy","+=","u_subpixel_jitter","*","kM",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["ea","(","kM",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["ea","(","kK",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","kN","=","kM",".","x",";","float","kO","=","kM",".","y",";","float","kP","=","kM",".","w",";","cz",".","x","=","(","kN","+","kP",")","/","2.0",";","cz",".","y","=","(","kO","+","kP",")","/","2.0",";","cz",".","z","=","kP",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["je","=","-","cA",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","kM",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","kA",";","varying","vec3","jd",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cA",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","kB","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","kC","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","kB",")",";","float","kD","=","u_diffuse_color",".","a","*","kA","*","(","1.0","-","clamp","(","kC",",","0.0",",","1.0",")",")",";","vec3","kE","=","jd","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eu","(","kE",",","length","(","cA",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ej","(","kE",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["em","(","kE",",","kD",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kE",",","kD",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","kA",";","varying","vec3","jd",";","varying","vec3","cA",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","kB","ls",";","ls","=","lr","(",")",";","vec4","lt","=","u_view_matrix","*","vec4","(","ls",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","lt",";","kA","=","ls",".","c",";","jd","=","ls",".","d",";","cA","=","lt",".","xyz",";","float","lu","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","ls",".","a","*","lu",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","kA",";","varying","vec3","jd",";","varying","vec2","a",";","varying","vec3","i_",";","varying","vec3","ja",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","jQ","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jR","=","texture2D","(","u_sampler",",","a",")",";","eh","(","jR",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["jQ",".","rgb","=","mix","(","jQ",".","rgb",",","jR",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["jQ",".","rgb","*=","mix","(","vec3","(","1.0",")",",","jR",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["jQ",".","a","=","jR",".","a",";"]}]}}]},{type:"textline",tokens:["jQ",".","rgb","*=","jd",";","vec3","jS","=","u_diffuse_intensity","*","jQ",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jT","=","u_emit","*","jQ",".","rgb",";","vec3","jU","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jV","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","jU",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jW","=","0.5",";","vec3","jV","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","jW",")",";"]}]}}]},{type:"textline",tokens:["vec3","jX","=","u_ambient","*","jV",";","float","jY","=","u_specular_params","[","0","]",";","vec2","jZ","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","j_","=","jY","*","u_specular_color",";","vec3","ka","=","normalize","(","i_",")",";","fd","kb","=","hy","(","jT",",","jX",",","jS",",","j_",",","ja",",","jU",",","ka",",","jZ",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","kc","=","kb",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kc","=","jS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eu","(","kc",",","length","(","cA",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","kd","=","jQ",".","a","*","kA",";","ej","(","kc",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["em","(","kc",",","kd",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kc",",","kd",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";","varying","float","kA",";","varying","vec3","jd",";","varying","vec2","a",";","varying","vec3","i_",";","varying","vec3","ja",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","jS","(","vec2","jQ",",","vec2","jR",")","{","return","(","atan","(","jR",".","y",",","jR",".","x",")","-","atan","(","jQ",".","y",",","jQ",".","x",")",")",";","}","void","main","(",")","{","kB","jT",";","jT","=","lr","(",")",";","float","jU",";","mat4","jV",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","jU","=","jT",".","e",";","jV","=","y","(","jT",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","jU","=","jT",".","e",";","jV","=","j","(",")",";","jV","[","3","]","=","vec4","(","jT",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","jU","=","jT",".","e",";","jV","=","n","(","radians","(","90.0",")",")",";","jV","[","3","]","=","vec4","(","jT",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","jU","=","jS","(","vec2","(","0.0",",","-","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","jT",".","e",";","jV","=","l","(","radians","(","-","90.0",")",")",";","jV","[","3","]","=","vec4","(","jT",".","b",",","1.0",")",";","}","vec4","jW","=","vec4","(","a_p_bb_vertex","*","2.0","*","jT",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","jX","=","jV","*","p","(","jU",")","*","jW",";","vec4","jY","=","u_view_matrix","*","jX",";","vec4","jZ","=","u_proj_matrix","*","jY",";","gl_Position","=","jZ",";","kA","=","jT",".","c",";","jd","=","jT",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","ja","=","jX",".","xyz",";","i_","=","u_camera_eye","-","jX",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cA","=","jY",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","ls",";","const","float","lt","=","0.99",";","const","float","lu","=","1.8",";","const","int","lv","=","8",";","float","lF","(","vec3","lw",",","vec3","lx",")","{","float","ly","=","dot","(","lx",",","lx",")",";","float","lz","=","2.0","*","dot","(","lx",",","lw",")",";","float","lA","=","dot","(","lw",",","lw",")","-","1.0",";","float","lB","=","lz","*","lz","-","4.0","*","ly","*","lA",";","float","lC","=","sqrt","(","lB",")",";","float","lD","=","(","-","lz","-","lC",")","/","2.0",";","float","lE","=","lA","/","lD",";","return","lE",";","}","float","lM","(","float","lG",",","float","lH",")","{","float","lI","=","3.0","*","(","1.0","-","lH","*","lH",")",";","float","lJ","=","2.0","*","(","2.0","+","lH","*","lH",")",";","float","lK","=","1.0","+","lG","*","lG",";","float","lL","=","pow","(","1.0","+","lH","*","lH","-","2.0","*","lH","*","lG",",","1.5",")",";","lL","=","max","(","lL",",","0.00001",")",";","return","(","lI","/","lJ",")","*","(","lK","/","lL",")",";","}","float","lU","(","vec3","lN",",","vec3","lO",",","float","lP",")","{","float","lQ","=","dot","(","lO",",","-","lN",")",";","if","(","lQ","<","0.0",")","{","return","1.0",";","}","vec3","lR","=","lN","+","lQ","*","lO",";","if","(","length","(","lR",")","<","lP",")","{","return","0.0",";","}","else","if","(","length","(","lR",")",">=","lP",")","{","vec3","lS","=","normalize","(","lR",")","*","lP","-","lN",";","float","lT","=","acos","(","dot","(","normalize","(","lS",")",",","lO",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","lT","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","lY","(","float","lV",",","vec3","lW",",","float","lX",")","{","return","lW","-","lW","*","pow","(","u_sky_color",",","vec3","(","lX","/","lV",")",")",";","}","void","main","(",")","{","vec3","lZ","=","normalize","(","ls",")",";","vec3","l_","=","u_sun_direction",";","float","ma","=","dot","(","lZ",",","l_",")",";","float","mb","=","lM","(","ma",",","-","0.01",")","*","u_rayleigh_brightness","*","l_",".","y",";","float","mc","=","lM","(","ma","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","l_",".","y",")",";","float","md","=","smoothstep","(","0.0",",","100.0",",","lM","(","ma",",","0.9995",")",")","*","u_spot_brightness",";","vec3","me","=","vec3","(","0.0",",","lt",",","0.0",")",";","float","mf","=","lF","(","me",",","lZ",")",";","float","mg","=","mf","/","float","(","lv",")",";","float","mh","=","lU","(","me",",","lZ",",","lt","-","0.3",")",";","vec3","mi","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","mj","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","mk","=","0",";","mk","<","lv",";","mk","++",")","{","float","ml","=","mg","*","float","(","mk",")",";","vec3","mm","=","me","+","lZ","*","ml",";","float","mn","=","lU","(","mm",",","l_",",","lt","-","0.2",")",";","float","mo","=","lF","(","mm",",","l_",")",";","vec3","mp","=","lY","(","mo",",","vec3","(","lu",")",",","u_scatter_strength",")","*","mn",";","mi","+=","lY","(","sqrt","(","ml",")",",","u_sky_color","*","mp",",","u_rayleigh_strength",")",";","mj","+=","lY","(","ml",",","mp",",","u_mie_strength",")",";","}","mi","=","mi","*","mh","*","pow","(","mf",",","u_rayleigh_collection_power",")","/","float","(","lv",")",";","mj","=","(","mj","*","mh","*","pow","(","mf",",","u_mie_collection_power",")",")","/","float","(","lv",")",";","vec3","mq","=","vec3","(","md","*","mj","+","mc","*","mj","+","mb","*","mi",")",";","ej","(","mq",")",";","gl_FragColor","=","vec4","(","mq",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","ls",";","void","main","(",")","{","vec4","jQ","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","jR","=","u_cube_view_matrix","*","jQ",";","ls","=","jR",".","xyz",";","gl_Position","=","jQ",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_sampler",",","a",")",";","ej","(","jQ",".","rgb",")",";","em","(","jQ",".","rgb",",","jQ",".","a",")",";","gl_FragColor","=","jQ",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","jQ","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","jR","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","jQ",",","0.0",")",";","jR",".","x","/=","jR",".","w",";","jR",".","y","/=","jR",".","w",";","jR","+=","99999.0","*","step","(","jR",".","z",",","0.0",")",";","jR","+=","100.0","*","(","step","(","1.0",",","abs","(","jR",".","x",")",")","+","step","(","1.0",",","abs","(","jR",".","y",")",")",")",";","jR",".","x","=","-","a_lf_dist","*","jR",".","x",";","jR",".","y","=","-","a_lf_dist","*","jR",".","y",";","float","jS","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","jT","=","vec2","(","a_lf_bb_vertex",".","x","/","jS",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","jU","=","1.9",";","jT","*=","(","1.0","+","jU","*","length","(","jR",".","xy",")",")",";","}","gl_Position","=","vec4","(","jR",".","xy","+","jT",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ls",";","void","main","(",")","{","vec3","jQ","=","textureCube","(","u_sky",",","ls",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["eh","(","jQ",".","rgb",")",";","float","jR","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","jR","=","min","(","-","jR","*","0.03",",","0.8",")",";","float","jS","=","length","(","u_sun_intensity",")","+","u_environment_energy",";","vec3","jT","=","normalize","(","ls",")",";","vec3","jU","=","vec3","(","0.0",")",";","vec4","jV","=","u_underwater_fog_color_density",";","jV",".","rgb","=","mix","(","jV",".","rgb",",","jU",",","min","(","-","jT",".","y","+","jR",",","1.0",")",")","*","jS",";","float","jW","=","clamp","(","sign","(","jT",".","y","-","0.05","*","jR",")",",","0.0",",","1.0",")",";","jQ","=","mix","(","jV",".","rgb",",","jQ",",","jW",")",";","ej","(","jQ",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jQ",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","ls",";","void","main","(",")","{","vec4","jQ","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","jR","=","u_sky_vp_inverse","*","jQ",";","ls","=","jR",".","xyz",";","gl_Position","=","jQ",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.001"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}},{type:"elif",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_alphamap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";","uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","i_",";","varying","vec3","ja",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jc",";","varying","vec3","lt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lu",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","je",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","lK","(","in","vec2","lw",",","in","vec3","lx",",","in","vec3","ly",",","in","vec3","lz",",","out","float","lA",")","{","vec3","lB","=","reflect","(","-","ly",",","lx",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lC","=","lw",".","xy","+","lx",".","xz","*","REFL_BUMP","/","je",";","lA","=","u_reflect_factor",";","vec3","lD",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["lD","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lD","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","lE","=","dot","(","ly",",","lx",")",";","lA","*=","max","(","1.0","-","1.0","/","lE",",","1.0",")",";","}","else","{","lD","=","texture2D","(","u_reflectmap",",","lC",")",".","rgb",";","eh","(","lD",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["lA","=","u_mirror_factor",";","vec3","lD","=","lz","*","textureCube","(","u_mirrormap",",","lB",")",".","rgb",";","eh","(","lD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lA","=","1.0",";","vec3","lD","=","lz","*","vec3","(","0.3",",","0.5",",","1.0",")",";","eh","(","lD",")",";"]}]}}]},{type:"textline",tokens:["vec3","lF","=","normalize","(","lB","+","ly",")",";","float","lG","=","1.0","-","dot","(","ly",",","lF",")",";","float","lH","=","u_fresnel_params","[","3","]",";","float","lI","=","u_fresnel_params","[","2","]",";","float","lJ","=","lH","+","(","1.0","-","lH",")","*","pow","(","lG",",","lI",")",";","lA","=","min","(","lA","*","lJ",",","1.0",")",";","return","lD",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","lL","=","mat3","(","jc",",","lt",",","jb",")",";"]}]}}]},{type:"textline",tokens:["vec3","lM","=","normalize","(","jb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","lL","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","lM","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","(","REFLECTIVE","||","FOAM","||","(","WATER_EFFECTS","&&","!","DISABLE_FOG",")",")","||","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lN","=","ja",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lO","=","vec2","(","lu",".","x",",","-","lu",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lO","=","vec2","(","ja",".","x",",","-","ja",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lO","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lP","=","vec3","(","0.0",")",";","vec3","lQ","=","texture2D","(","u_normalmap0",",","lO","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lP","+=","lQ",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lR","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["lR","+=","lQ",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["lQ","=","texture2D","(","u_normalmap0",",","lO","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lP","+=","lQ",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["lR","+=","lQ",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["lQ","=","texture2D","(","u_normalmap0",",","lO","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lP","+=","lQ",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["lR","+=","lQ",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["lQ","=","texture2D","(","u_normalmap0",",","lO","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lP","+=","lQ",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["lR","+=","lQ",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lS","=","lL","*","lR",";","if","(","!","f","(","lS",",","vec3","(","0.0",")",")",")","lS","=","normalize","(","lS",")",";","vec3","lT","=","mix","(","lM",",","lS",",","0.2",")",";","lT","=","normalize","(","lT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["lM","=","mix","(","lM",",","normalize","(","lL","*","lP",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lM","=","mix","(","lM",",","normalize","(","lL","*","lP",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["lM","=","normalize","(","lM",")",";"]}]}}]},{type:"textline",tokens:["vec3","lU","=","normalize","(","i_",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lV","=","cz",".","xy","/","cz",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","lW","=","je","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","lX","=","u_diffuse_color",".","a",";","vec4","lY","=","texture2DProj","(","u_scene_depth",",","cz",")",";","float","lZ","=","cl","(","lY",")",";","float","l_","=","max","(","lZ","-","je",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ma","=","lV","+","lM",".","xz","*","u_refr_bump","/","je",";","float","mb","=","jH","(","lZ",",","ma",",","lV",")",";","float","mc","=","max","(","mb","-","je",",","0.0",")",";","float","md","=","u_view_max_depth","/","ABSORB","*","mc",";","float","me",";","if","(","u_cam_water_depth","<","0.0",")","me","=","0.0",";","else","me","=","min","(","lX","*","md",",","1.0",")",";","float","mf","=","u_view_max_depth","/","ABSORB","*","l_",";","lX","=","min","(","15.0","*","lX","*","u_view_max_depth","*","l_",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mf","=","u_view_max_depth","/","ABSORB","*","l_",";","if","(","u_cam_water_depth",">","0.0",")","lX","=","min","(","lX","*","mf",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["lX","*=","min","(","5.0","*","lW",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","mg","=","texture2D","(","u_alphamap",",","lO",")",";","float","lX","=","mg",".","r",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lX","=","u_diffuse_color",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","me","=","1.0","-","lX",";","vec2","ma","=","lV","+","lM",".","xz","*","REFR_BUMP","/","je",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mh","=","texture2D","(","u_refractmap",",","ma",")",".","rgb",";","eh","(","mh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","mi","=","pow","(","min","(","lv",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","mj","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","mi",")",";","mi","=","pow","(","min","(","lv",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","mj","=","mix","(","u_shore_water_col",",","mj",",","mi",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mj","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","mk","=","max","(","1.0","-","u_view_max_depth","*","l_",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mk","=","1.0","-","lX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","ml","=","max","(","3.0","*","lN",",","0.0",")",";","ml","*=","ml",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mm","=","normalize","(","vec3","(","lv",".","r",",","0.0",",","lv",".","g",")",")",";","vec3","mn","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","mm",",","0.8",")",")",";","float","mo","=","max","(","2.5","*","dot","(","lT",",","mn",")","-","0.7",",","0.0",")",";","mk","+=","mo","*","(","1.0","-","lv",".","b",")",";","ml","*=","(","1.0","-","0.95","*","pow","(","lv",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["mk","+=","ml",";","mk","=","min","(","u_foam_factor","*","mk",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","mp","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","lO","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","mq","=","u_specular_params","[","0","]",";","vec2","mr","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","ms","=","mq","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mt","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lM",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mt","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["vec3","mu","=","u_ambient","*","mt",";","vec3","mv","=","mu","+","u_sun_intensity",";","float","mw",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mx","=","lK","(","lV",",","lM",",","lU",",","mv",",","mw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mx","=","lK","(","vec2","(","0.0",")",",","lM",",","lU",",","mv",",","mw",")",";"]}]}}]},{type:"textline",tokens:["vec3","my","=","u_diffuse_intensity","*","mj",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS","&&","DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","mz","=","max","(","dot","(","u_sun_direction",",","-","jb",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","lU",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","mz","=","clamp","(","SSS_STRENGTH","*","mz",",","0.0",",","1.0",")",";","my","=","mix","(","my",",","u_shallow_water_col",",","mz",")",";","my","=","mix","(","my",",","u_shore_water_col",",","mz",")",";"]}]}}]},{type:"textline",tokens:["fd","mA","=","hy","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","my",",","ms",",","ja",",","lM",",","lU",",","mr",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","my","=","mA",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["my","=","mix","(","mh",",","my",",","me",")",";"]}]}}]},{type:"textline",tokens:["my","=","mix","(","my",",","mx",",","mw",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","mB","=","mix","(","mp",".","g",",","mp",".","r",",","clamp","(","4.0","*","(","mk","-","0.75",")",",","0.0",",","1.0",")",")",";","mB","=","mix","(","mp",".","b",",","mB",",","clamp","(","2.0","*","mk","-","1.0",",","0.0",",","1.0",")",")",";","mB","=","mix","(","0.0",",","mB",",","mk",")",";","my","=","mix","(","my",",","mv",",","mB",")",";"]}]}}]},{type:"textline",tokens:["my","+=","mA",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mC","=","eB","(","u_cube_fog",",","lU",")",";","vec4","mD","=","vec4","(","mC",",","u_fog_color_density",".","a",")",";","eh","(","mD",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","mD","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","fc","(","my",",","lW",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";","}","else","{","eu","(","my",",","lW",",","mD",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eu","(","my",",","lW",",","mD",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ej","(","my",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lX","=","max","(","lX",",","mA",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["lX","+=","mB",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["em","(","my",",","lX",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","my",",","lX",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Z",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Z",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_cascad_step",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","i_",";","varying","vec3","ja",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jc",";","varying","vec3","lt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lu",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","je",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jW","(","in","vec2","jQ",")","{","vec2","jR","=","vec2","(","(","jQ",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","SHORE_MAP_CENTER_Z","+","jQ",".","y",")","/","SHORE_MAP_SIZE_Z",")","+","0.5",";","jR","=","clamp","(","jR",",","0.0",",","1.0",")",";","vec4","jS","=","texture2D","(","u_shore_dist_map",",","jR",")",";","const","vec2","jT","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","jU","=","dot","(","jS",".","ba",",","jT",")",";","vec2","jV","=","normalize","(","jS",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","jV",",","jU",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","kj","(","inout","vec3","jX",",","in","float","jY",",","in","vec3","jZ",")","{","float","j_","=","iy","(","DST_NOISE_SCALE_0","*","(","jX",".","xz","+","DST_NOISE_FREQ_0","*","jY",")",")","*","iy","(","DST_NOISE_SCALE_1","*","(","jX",".","zx","-","DST_NOISE_FREQ_1","*","jY",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","ka","=","jZ",".","b",";","float","kb","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","kc","=","sqrt","(","ka",")",";","float","kd","=","max","(","ka",",","DIR_MIN_SHR_FAC",")","*","(","sin","(","(","kc","/","kb","+","DIR_FREQ","*","jY",")",")",")","*","max","(","iy","(","DIR_NOISE_SCALE","*","(","jX",".","xz","+","DIR_NOISE_FREQ","*","jY",")",")",",","DIR_MIN_NOISE_FAC",")",";","float","ke","=","WAVES_HEIGHT","*","mix","(","kd",",","j_",",","max","(","kc",",","DST_MIN_FAC",")",")",";","vec2","kf","=","jZ",".","rg",";","float","kg","=","WAVES_HOR_FAC","*","kd","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","ka",")",",","0.0",")",";","vec2","kh","=","kg","*","kf",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ke","=","WAVES_HEIGHT","*","j_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","ki","=","hS","(","20.0","/","WAVES_LENGTH","*","(","jX",".","xz","-","0.25","*","jY",")",")",".","x","+","hS","(","17.0","/","WAVES_LENGTH","*","(","jX",".","zx","+","0.1","*","jY",")",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["jX",".","xz","+=","kh",";","ki","*=","ka",";"]}]}}]},{type:"textline",tokens:["ke","+=","0.05","*","ki",";"]}]}}]},{type:"textline",tokens:["jX",".","y","+=","ke",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","kk","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","kl","=","abs","(","a_cascad_step",")",";","vec2","km","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","kl",")",";","kk",".","y","+=","WATER_LEVEL",";","kk",".","xz","+=","km",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","kn","=","ag","(","kk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["lu","=","kn",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lv","=","jW","(","kn",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","ko","=","length","(","u_wind",")",";","float","kp","=","u_time",";","kp","*=","ko",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","kq","=","kl",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kq","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","lw","=","kn",".","a","+","vec3","(","kq",",","0.0",",","0.0",")",";","vec3","lx","=","kn",".","a","+","vec3","(","0.0",",","0.0",",","kq",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ly","=","jW","(","lw",".","xz",")",";","vec3","lz","=","jW","(","lx",".","xz",")",";","kj","(","lw",",","kp",",","ly",")",";","kj","(","lx",",","kp",",","lz",")",";","kj","(","kn",".","a",",","kp",",","lv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kj","(","lw",",","kp",",","vec3","(","0.0",")",")",";","kj","(","lx",",","kp",",","vec3","(","0.0",")",")",";","kj","(","kn",".","a",",","kp",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_cascad_step","<","0.0",")","{","lw",".","y","=","kn",".","a",".","y",";","lx",".","y","=","kn",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","lA","=","normalize","(","lw","-","kn",".","a",")",";","vec3","lB","=","normalize","(","lx","-","kn",".","a",")",";","jb","=","normalize","(","cross","(","lB",",","lA",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["jc","=","lB",";","lt","=","cross","(","jb",",","jc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lC","=","dot","(","jb",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lD","=","clamp","(","0.8","-","lC",",","0.0",",","1.0",")",";","jb","=","mix","(","jb",",","vec3","(","0.0",",","1.0",",","0.0",")",",","lD",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ja","=","kn",".","a",";","i_","=","u_camera_eye","-","kn",".","a",";","vec4","lE","=","u_view_matrix","*","vec4","(","kn",".","a",",","1.0",")",";","vec4","lF","=","u_proj_matrix","*","lE",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lG","=","lF",".","x",";","float","lH","=","lF",".","y",";","float","lI","=","lF",".","w",";","cz",".","x","=","(","lG","+","lI",")","/","2.0",";","cz",".","y","=","(","lH","+","lI",")","/","2.0",";","cz",".","z","=","lI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["je","=","-","lE",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lF",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lw",";","const","float","lx","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","ly","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","ly","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lz","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","lA","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","lB","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","lC","=","vec3","(","0.0",")",";","float","lD","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lE","=","sign","(","lw","-","vec3","(","0.02","*","lx",")",")",";","if","(","lE",".","x","<","0.0","||","lE",".","y","<","0.0","||","lE",".","z","<","0.0",")","{","lC","=","ly",";","lD","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lE","=","sign","(","lw","-","vec3","(","0.02","*","lx",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","lE",".","x","<","0.0","||","lE",".","y","<","0.0","||","lE",".","z","<","0.0",")","lC","=","u_wireframe_edge_color",";","else","lC","=","lB",";","lD","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","lE",".","x","<","0.0","||","lE",".","y","<","0.0","||","lE",".","z","<","0.0",")","lD","=","1.0",";","else","lD","=","0.0",";","lC","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","lE",".","x","<","0.0","||","lE",".","y","<","0.0","||","lE",".","z","<","0.0",")","lC","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","lC","=","lz",";","else","lC","=","lA",";","lD","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","lF","=","fwidth","(","lw",")",";","vec3","lG","=","smoothstep","(","vec3","(","0.0",")",",","lF","*","lx",",","lw",")",";","float","lH","=","min","(","min","(","lG",".","x",",","lG",".","y",")",",","lG",".","z",")",";","lH","=","clamp","(","lH",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","lC","=","vec3","(","mix","(","u_wireframe_edge_color",",","lB",",","lH",")",")",";","lD","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","lC","=","u_wireframe_edge_color",";","lD","=","mix","(","1.0",",","0.0",",","lH",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","lC","=","mix","(","u_wireframe_edge_color",",","lz",",","lH",")",";","else","lC","=","mix","(","u_wireframe_edge_color",",","lA",",","lH",")",";","lD","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["ej","(","lC",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["em","(","lC",",","lD",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lC",",","lD",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","lw",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","lw","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","lw","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","lw","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","jQ","=","a_position",";","vec3","jR","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","jS","=","ag","(","jQ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jQ","=","mix","(","jQ",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jT","=","vec3","(","0.0",")",";","vec3","jU","=","vec3","(","0.0",")",";","bl","(","jQ",",","jT",",","jU",",","jR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jV","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jV","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","jS","=","dZ","(","jQ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jV",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jW","=","(","u_model_matrix","*","vec4","(","jV",",","1.0",")",")",".","xyz",";","mat4","jX","=","_","(","u_camera_eye",",","jW",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jY","=","(","u_model_matrix","*","vec4","(","jV",",","1.0",")",")",".","xyz",";","jX","=","jX","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jY",")",";"]}]}}]},{type:"textline",tokens:["c","jS","=","ag","(","jQ","-","jV",",","jV",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jX",")",";","jS",".","b","=","jW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","jS","=","ag","(","jQ",",","jV",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","jS",".","a",",","jS",".","b",",","jR",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","jZ","=","u_view_matrix","*","vec4","(","jS",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","jZ",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","jR","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","jQ","[","0","]",",","jR","[","1","]",",","jR","[","2","]",",","jQ","[","3","]","+","jR","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","jT","(","float","jQ",",","float","jR",")","{","vec2","jS","=","a","+","vec2","(","jQ",",","jR",")","*","u_texel_size",";","return","texture2D","(","u_color",",","jS",")",";","}","float","jX","(","vec4","jU",")","{","vec3","jV","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","jW","=","dot","(","jU",".","rgb",",","jV",")",";","return","jW",";","}","vec4","kp","(",")","{","vec4","jY","=","jT","(","-","1.0",",","-","1.0",")",";","vec4","jZ","=","jT","(","1.0",",","-","1.0",")",";","vec4","j_","=","jT","(","-","1.0",",","1.0",")",";","vec4","ka","=","jT","(","1.0",",","1.0",")",";","vec4","kb","=","jT","(","0.0",",","0.0",")",";","float","kc","=","jX","(","jY",")",";","float","kd","=","jX","(","jZ",")",";","float","ke","=","jX","(","j_",")",";","float","kf","=","jX","(","ka",")",";","float","kg","=","jX","(","kb",")",";","float","kh","=","min","(","kg",",","min","(","min","(","kc",",","kd",")",",","min","(","ke",",","kf",")",")",")",";","float","ki","=","max","(","kg",",","max","(","max","(","kc",",","kd",")",",","max","(","ke",",","kf",")",")",")",";","vec2","kj",";","kj",".","x","=","-","(","(","kc","+","kd",")","-","(","ke","+","kf",")",")",";","kj",".","y","=","(","(","kc","+","ke",")","-","(","kd","+","kf",")",")",";","float","kk","=","max","(","(","kc","+","kd","+","ke","+","kf",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","kl","=","1.0","/","(","min","(","abs","(","kj",".","x",")",",","abs","(","kj",".","y",")",")","+","kk",")",";","kj","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","kj","*","kl",")",")","*","u_texel_size",";","vec4","km","=","0.5","*","(","texture2D","(","u_color",",","a","+","kj","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","kj","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","kn","=","km","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","kj","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","kj","*","0.5",")",")",";","float","ko","=","jX","(","kn",")",";","if","(","(","ko","<","kh",")","||","(","ko",">","ki",")",")","return","km",";","else","return","kn",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","ng","(",")","{","vec2","kq",";","kq",".","x","=","a",".","x",";","kq",".","y","=","a",".","y",";","vec4","lx","=","texture2D","(","u_color",",","kq",")",";","vec4","ly","=","jT","(","0.0",",","1.0",")",";","vec4","lz","=","jT","(","1.0",",","0.0",")",";","vec4","lA","=","jT","(","0.0",",","-","1.0",")",";","vec4","lB","=","jT","(","-","1.0",",","0.0",")",";","float","lC","=","jX","(","ly",")",";","float","lD","=","jX","(","lz",")",";","float","lE","=","jX","(","lA",")",";","float","lF","=","jX","(","lB",")",";","float","lG","=","jX","(","lx",")",";","float","lH","=","max","(","lC",",","lG",")",";","float","lI","=","min","(","lC",",","lG",")",";","float","lJ","=","max","(","lD",",","lH",")",";","float","lK","=","min","(","lD",",","lI",")",";","float","lL","=","max","(","lE",",","lF",")",";","float","lM","=","min","(","lE",",","lF",")",";","float","lN","=","max","(","lL",",","lJ",")",";","float","lO","=","min","(","lM",",","lK",")",";","float","lP","=","lN","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","lQ","=","lN","-","lO",";","float","lR","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","lP",")",";","bool","lS","=","lQ","<","lR",";","if","(","lS",")","return","lx",";","vec4","lT","=","jT","(","-","1.0",",","-","1.0",")",";","vec4","lU","=","jT","(","1.0",",","1.0",")",";","vec4","lV","=","jT","(","1.0",",","-","1.0",")",";","vec4","lW","=","jT","(","-","1.0",",","1.0",")",";","float","lX","=","jX","(","lT",")",";","float","lY","=","jX","(","lU",")",";","float","lZ","=","jX","(","lV",")",";","float","l_","=","jX","(","lW",")",";","float","ma","=","lE","+","lC",";","float","mb","=","lF","+","lD",";","float","mc","=","1.0","/","lQ",";","float","md","=","ma","+","mb",";","float","me","=","(","-","2.0","*","lG",")","+","ma",";","float","mf","=","(","-","2.0","*","lG",")","+","mb",";","float","mg","=","lZ","+","lY",";","float","mh","=","lX","+","lZ",";","float","mi","=","(","-","2.0","*","lD",")","+","mg",";","float","mj","=","(","-","2.0","*","lE",")","+","mh",";","float","mk","=","lX","+","l_",";","float","ml","=","l_","+","lY",";","float","mm","=","(","abs","(","me",")","*","2.0",")","+","abs","(","mi",")",";","float","mn","=","(","abs","(","mf",")","*","2.0",")","+","abs","(","mj",")",";","float","mo","=","(","-","2.0","*","lF",")","+","mk",";","float","mp","=","(","-","2.0","*","lC",")","+","ml",";","float","mq","=","abs","(","mo",")","+","mm",";","float","mr","=","abs","(","mp",")","+","mn",";","float","ms","=","mk","+","mg",";","float","mt","=","u_texel_size",".","x",";","bool","mu","=","mq",">=","mr",";","float","mv","=","md","*","2.0","+","ms",";","if","(","!","mu",")","lE","=","lF",";","if","(","!","mu",")","lC","=","lD",";","if","(","mu",")","mt","=","u_texel_size",".","y",";","float","mw","=","(","mv","*","(","1.0","/","12.0",")",")","-","lG",";","float","mx","=","lE","-","lG",";","float","my","=","lC","-","lG",";","float","mz","=","lE","+","lG",";","float","mA","=","lC","+","lG",";","bool","mB","=","abs","(","mx",")",">=","abs","(","my",")",";","float","mC","=","max","(","abs","(","mx",")",",","abs","(","my",")",")",";","if","(","mB",")","mt","=","-","mt",";","float","mD","=","clamp","(","abs","(","mw",")","*","mc",",","0.0",",","1.0",")",";","vec2","mE",";","mE",".","x","=","kq",".","x",";","mE",".","y","=","kq",".","y",";","vec2","mF",";","mF",".","x","=","(","!","mu",")","?","0.0",":","u_texel_size",".","x",";","mF",".","y","=","(","mu",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","mu",")","mE",".","x","+=","mt","*","0.5",";","if","(","mu",")","mE",".","y","+=","mt","*","0.5",";","vec2","mG",";","mG",".","x","=","mE",".","x","-","mF",".","x",";","mG",".","y","=","mE",".","y","-","mF",".","y",";","vec2","mH",";","mH",".","x","=","mE",".","x","+","mF",".","x",";","mH",".","y","=","mE",".","y","+","mF",".","y",";","float","mI","=","(","(","-","2.0",")","*","mD",")","+","3.0",";","float","mJ","=","jX","(","texture2D","(","u_color",",","mG",")",")",";","float","mK","=","mD","*","mD",";","float","mL","=","jX","(","texture2D","(","u_color",",","mH",")",")",";","if","(","!","mB",")","mz","=","mA",";","float","mM","=","mC","*","1.0","/","4.0",";","float","mN","=","lG","-","mz","*","0.5",";","float","mO","=","mI","*","mK",";","bool","mP","=","mN","<","0.0",";","mJ","-=","mz","*","0.5",";","mL","-=","mz","*","0.5",";","bool","mQ","=","abs","(","mJ",")",">=","mM",";","bool","mR","=","abs","(","mL",")",">=","mM",";","if","(","!","mQ",")","mG",".","x","-=","mF",".","x","*","1.5",";","if","(","!","mQ",")","mG",".","y","-=","mF",".","y","*","1.5",";","bool","mS","=","(","!","mQ",")","||","(","!","mR",")",";","if","(","!","mR",")","mH",".","x","+=","mF",".","x","*","1.5",";","if","(","!","mR",")","mH",".","y","+=","mF",".","y","*","1.5",";","if","(","mS",")","{","if","(","!","mQ",")","mJ","=","jX","(","texture2D","(","u_color",",","mG",".","xy",")",")",";","if","(","!","mR",")","mL","=","jX","(","texture2D","(","u_color",",","mH",".","xy",")",")",";","if","(","!","mQ",")","mJ","=","mJ","-","mz","*","0.5",";","if","(","!","mR",")","mL","=","mL","-","mz","*","0.5",";","mQ","=","abs","(","mJ",")",">=","mM",";","mR","=","abs","(","mL",")",">=","mM",";","if","(","!","mQ",")","mG",".","x","-=","mF",".","x","*","2.0",";","if","(","!","mQ",")","mG",".","y","-=","mF",".","y","*","2.0",";","mS","=","(","!","mQ",")","||","(","!","mR",")",";","if","(","!","mR",")","mH",".","x","+=","mF",".","x","*","2.0",";","if","(","!","mR",")","mH",".","y","+=","mF",".","y","*","2.0",";","if","(","mS",")","{","if","(","!","mQ",")","mJ","=","jX","(","texture2D","(","u_color",",","mG",".","xy",")",")",";","if","(","!","mR",")","mL","=","jX","(","texture2D","(","u_color",",","mH",".","xy",")",")",";","if","(","!","mQ",")","mJ","=","mJ","-","mz","*","0.5",";","if","(","!","mR",")","mL","=","mL","-","mz","*","0.5",";","mQ","=","abs","(","mJ",")",">=","mM",";","mR","=","abs","(","mL",")",">=","mM",";","if","(","!","mQ",")","mG",".","x","-=","mF",".","x","*","2.0",";","if","(","!","mQ",")","mG",".","y","-=","mF",".","y","*","2.0",";","mS","=","(","!","mQ",")","||","(","!","mR",")",";","if","(","!","mR",")","mH",".","x","+=","mF",".","x","*","2.0",";","if","(","!","mR",")","mH",".","y","+=","mF",".","y","*","2.0",";","if","(","mS",")","{","if","(","!","mQ",")","mJ","=","jX","(","texture2D","(","u_color",",","mG",".","xy",")",")",";","if","(","!","mR",")","mL","=","jX","(","texture2D","(","u_color",",","mH",".","xy",")",")",";","if","(","!","mQ",")","mJ","=","mJ","-","mz","*","0.5",";","if","(","!","mR",")","mL","=","mL","-","mz","*","0.5",";","mQ","=","abs","(","mJ",")",">=","mM",";","mR","=","abs","(","mL",")",">=","mM",";","if","(","!","mQ",")","mG",".","x","-=","mF",".","x","*","4.0",";","if","(","!","mQ",")","mG",".","y","-=","mF",".","y","*","4.0",";","mS","=","(","!","mQ",")","||","(","!","mR",")",";","if","(","!","mR",")","mH",".","x","+=","mF",".","x","*","4.0",";","if","(","!","mR",")","mH",".","y","+=","mF",".","y","*","4.0",";","if","(","mS",")","{","if","(","!","mQ",")","mJ","=","jX","(","texture2D","(","u_color",",","mG",".","xy",")",")",";","if","(","!","mR",")","mL","=","jX","(","texture2D","(","u_color",",","mH",".","xy",")",")",";","if","(","!","mQ",")","mJ","=","mJ","-","mz","*","0.5",";","if","(","!","mR",")","mL","=","mL","-","mz","*","0.5",";","mQ","=","abs","(","mJ",")",">=","mM",";","mR","=","abs","(","mL",")",">=","mM",";","if","(","!","mQ",")","mG",".","x","-=","mF",".","x","*","2.0",";","if","(","!","mQ",")","mG",".","y","-=","mF",".","y","*","2.0",";","if","(","!","mR",")","mH",".","x","+=","mF",".","x","*","2.0",";","if","(","!","mR",")","mH",".","y","+=","mF",".","y","*","2.0",";","}","}","}","}","float","mT","=","kq",".","x","-","mG",".","x",";","float","mU","=","mH",".","x","-","kq",".","x",";","if","(","!","mu",")","mT","=","kq",".","y","-","mG",".","y",";","if","(","!","mu",")","mU","=","mH",".","y","-","kq",".","y",";","bool","mV","=","(","mJ","<","0.0",")","!=","mP",";","float","mW","=","(","mU","+","mT",")",";","bool","mX","=","(","mL","<","0.0",")","!=","mP",";","float","mY","=","1.0","/","mW",";","bool","mZ","=","mT","<","mU",";","float","m_","=","min","(","mT",",","mU",")",";","bool","na","=","mZ","?","mV",":","mX",";","float","nb","=","mO","*","mO",";","float","nc","=","(","m_","*","(","-","mY",")",")","+","0.5",";","float","nd","=","nb","*","FXAA_QUALITY_SUBPIX",";","float","ne","=","na","?","nc",":","0.0",";","float","nf","=","max","(","ne",",","nd",")",";","if","(","!","mu",")","kq",".","x","+=","nf","*","mt",";","if","(","mu",")","kq",".","y","+=","nf","*","mt",";","return","texture2D","(","u_color",",","kq",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","kp","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ng","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","jQ","=","vec2","(","0.0",",","0.0",")",";","vec2","jR","=","u_texel_size",";","vec4","jS","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jS","*","0.0875447373698",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0858112354248",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0808139781061",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0731235112908",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0635705267419",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0530985673112",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0426125984122",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0328565115809",";","jQ","+=","jR",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","jQ",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","jQ",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","jS",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_main",",","a",")",";","vec4","jR","=","texture2D","(","u_bloom",",","a",")",";","vec4","jS","=","jQ",";","jS","+=","jR",";","gl_FragColor","=","vec4","(","jS",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/blur_depth.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","vec2","u_camera_range",";","uniform","float","u_blur_depth_edge_size",";","uniform","float","u_blur_depth_diff_threshold",";","varying","vec2","a",";","float","lG","(","in","vec2","lF",")","{","return","lE","(","u_depth",",","lF",",","u_camera_range",")",";","}","void","main","(",")","{","vec2","lH","=","u_texel_size",";","vec4","lI","=","texture2D","(","u_color",",","a",")",";","float","lJ","=","lG","(","a",")",";","float","lK","=","lG","(","a","+","u_blur_depth_edge_size","*","lH",")",";","float","lL","=","lG","(","a","-","u_blur_depth_edge_size","*","lH",")",";","float","lM","=","abs","(","lJ","-","lK",")",";","float","lN","=","abs","(","lJ","-","lL",")",";","float","lO","=","max","(","lM",",","lN",")",";","if","(","lO",">","u_blur_depth_diff_threshold",")","{","gl_FragColor","=","lI",";","return",";","}","vec2","lP","=","vec2","(","0.0",",","0.0",")",";","gl_FragColor","=","lI","*","0.2270270270",";","lP","+=","lH",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lP",")","*","0.1945945946",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lP",")","*","0.1945945946",",","lP","+=","lH",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lP",")","*","0.1216216216",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lP",")","*","0.1216216216",",","lP","+=","lH",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lP",")","*","0.0540540541",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lP",")","*","0.0540540541",",","lP","+=","lH",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lP",")","*","0.0162162162",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lP",")","*","0.0162162162",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_color",",","a",")",";","vec3","jR","=","jQ",".","rgb",";","if","(","u_brightness","<","0.0",")","jR","=","jR","*","(","1.0","+","u_brightness",")",";","else","jR","=","jR","+","(","(","1.0","-","jR",")","*","u_brightness",")",";","jR","=","(","jR","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","jR","*=","u_exposure",";","vec3","jS","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","jT","=","dot","(","jR",",","jS",")",";","jR","=","mix","(","vec3","(","jT",")",",","jR",",","u_saturation",")",";","gl_FragColor","=","vec4","(","jR",",","jQ",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","ch","(","clamp","(","lE","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","lF","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","lG","=","lE","(","u_depth",",","a",",","u_camera_range",")",";","lG","*=","u_view_max_depth",";","float","lH",";","if","(","lG","<","u_dof_dist",")","lH","=","(","u_dof_dist","-","lG",")","/","u_dof_front",";","else","lH","=","(","lG","-","u_dof_dist",")","/","u_dof_rear",";","lH","=","clamp","(","lH",",","0.0",",","1.0",")",";","vec4","lI","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","lF",",","lI",",","lH",")",";","}","else","gl_FragColor","=","lF",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","jV","(","float","jQ",",","float","jR",",","float","jS",")","{","vec2","jT","=","a","+","vec2","(","jQ",",","jR",")","*","u_texel_size",";","vec4","jU","=","texture2D","(","u_sampler",",","jT",")","*","jS",";","return","cl","(","jU",")",";","}","void","main","(",")","{","float","jW","=","(","jV","(","-","1.0",",","-","1.0",",","-","1.0",")","+","jV","(","0.0",",","-","1.0",",","-","1.0",")","+","jV","(","1.0",",","-","1.0",",","-","1.0",")","+","jV","(","-","1.0",",","0.0",",","-","1.0",")","+","jV","(","0.0",",","0.0",",","8.0",")","+","jV","(","1.0",",","0.0",",","-","1.0",")","+","jV","(","-","1.0",",","1.0",",","-","1.0",")","+","jV","(","0.0",",","1.0",",","-","1.0",")","+","jV","(","1.0",",","1.0",",","-","1.0",")",")",";","jW","*=","1000.0",";","gl_FragColor","=","vec4","(","jW",",","jW",",","jW",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","jQ",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","jR","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","jS","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","jT","=","jS",".","a","-","jR",".","a",";","if","(","jT","!=","0.0",")","{","float","jU","=","smoothstep","(","0.0",",","1.0",",","jS",".","a",")",";","if","(","jR",".","a","==","0.0",")","{","vec3","jV","=","u_glow_color",";","ej","(","jV",")",";","vec4","jW","=","vec4","(","clamp","(","jV",",","0.0",",","1.0",")",",","jU",")",";","gl_FragColor","=","mix","(","jQ",",","jW",",","jU",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","vec3","u_sun_intensity",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","lF",";","varying","vec2","lG",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","lH",";","void","main","(",")","{","vec3","lI","=","u_sun_intensity",";","vec2","lJ","=","(","lH",".","xy","-","a",")",";","float","lK","=","length","(","lJ",")",";","vec2","lL","=","u_radial_blur_step","*","lJ","/","lK",";","float","lM","=","lK","/","u_radial_blur_step",";","lL","*=","min","(","lM",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","lM","=","max","(","lM",",","STEPS_PER_PASS",")",";","vec2","lN","=","a",";","float","lO","=","0.0",";","for","(","float","lP","=","0.0",";","lP","<","STEPS_PER_PASS",";","lP","+=","1.0",")","{","if","(","lP","<=","lM",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","lQ","=","lE","(","u_input",",","lN",",","u_camera_range",")",";","lO","+=","(","1.0","-","pow","(","lK",",","0.3",")",")","*","step","(","0.9",",","lQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lO","+=","texture2D","(","u_input",",","lN",")",".","r",";"]}]}}]},{type:"textline",tokens:["}","lN","+=","lL",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lR","=","a","+","lG",";","float","lS","=","hS","(","vec2","(","2.5","*","(","lR",".","x",")",",","2.5","*","(","lR",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","hS","(","vec2","(","5.0","*","(","lR",".","x",")","-","0.66","*","u_time",",","5.0","*","(","lR",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","iy","(","vec2","(","7.5","*","(","lR",".","x",")","+","0.33","*","u_time",",","7.5","*","(","lR",".","y",")","-","0.33","*","u_time",")",")",";","lS","*=","clamp","(","1.2","-","sqrt","(","0.2","*","lK",")",",","0.0",",","1.0",")","*","lF",";","lO","=","max","(","lS",",","lO",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lO","/","STEPS_PER_PASS","*","clamp","(","lI",",","0.4",",","0.8",")",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","lF",";","varying","vec2","lG",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","lH",";","void","jX","(","in","vec4","jQ",",","in","vec3","jR",",","out","vec3","jS",")","{","float","jT","=","jQ",".","w","*","jR",".","x","+","jQ",".","y","*","jR",".","z","-","jQ",".","z","*","jR",".","y",";","float","jU","=","jQ",".","w","*","jR",".","y","+","jQ",".","z","*","jR",".","x","-","jQ",".","x","*","jR",".","z",";","float","jV","=","jQ",".","w","*","jR",".","z","+","jQ",".","x","*","jR",".","y","-","jQ",".","y","*","jR",".","x",";","float","jW","=","-","jQ",".","x","*","jR",".","x","-","jQ",".","y","*","jR",".","y","-","jQ",".","z","*","jR",".","z",";","jS",".","x","=","jT","*","jQ",".","w","-","jW","*","jQ",".","x","-","jU","*","jQ",".","z","+","jV","*","jQ",".","y",";","jS",".","y","=","jU","*","jQ",".","w","-","jW","*","jQ",".","y","-","jV","*","jQ",".","x","+","jT","*","jQ",".","z",";","jS",".","z","=","jV","*","jQ",".","w","-","jW","*","jQ",".","z","-","jT","*","jQ",".","y","+","jU","*","jQ",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","jY","=","normalize","(","u_sun_direction",")",";","lH","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","jY",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","lF","=","1.0",";","vec3","jZ","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","j_",";","jX","(","u_camera_quat",",","jZ",",","j_",")",";","j_","=","normalize","(","j_",")",";","float","ka","=","dot","(","j_",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","kb","=","atan","(","j_",".","x",",","j_",".","z",")",";","lG","=","vec2","(","-","kb",",","acos","(","ka",")",")",";","}","else","{","lF","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["lH",".","x","/=","lH",".","w",";","lH",".","y","/=","lH",".","w",";","lH",".","x","=","0.5","*","(","lH",".","x","+","1.0",")",";","lH",".","y","=","0.5","*","(","lH",".","y","+","1.0",")",";","lH","+=","99999.0","*","step","(","lH",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_main",",","a",")",";","eh","(","jQ",".","rgb",")",";","vec3","jR","=","jQ",".","rgb","+","u_god_rays_intensity","*","(","texture2D","(","u_god_rays",",","a",")",")",".","rgb",";","ej","(","jR",")",";","gl_FragColor",".","rgb","=","jR",";","gl_FragColor",".","a","=","jQ",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_color",",","a",")","*","0.38026",";","jQ","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","jQ","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","jQ","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","jQ","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","jQ","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","jQ","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","jQ","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","jQ","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","jQ",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_input",",","a",")",";","float","jR","=","dot","(","jQ",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","jR",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","jQ",";","float","jR","=","0.0",";","for","(","float","jS","=","0.025",";","jS","<","1.0",";","jS","+=","0.05",")","for","(","float","jT","=","0.025",";","jT","<","1.0",";","jT","+=","0.05",")","{","jQ","=","max","(","texture2D","(","u_input",",","vec2","(","jS",",","jT",")",")",".","r",",","0.01",")",";","jR","+=","log","(","jQ",")",";","}","float","jU","=","exp","(","jR","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","jU",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","lI",";","void","main","(",")","{","float","lJ","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","lK","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","lL","=","texture2D","(","u_main",",","a",")",";","float","lM","=","lK","/","lJ",";","float","lN","=","u_bloom_edge_lum",";","gl_FragColor","=","lL","*","max","(","lM","-","lN",",","0.0",")","*","lI",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","lI",";","const","vec3","jQ","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","jY","(","in","vec4","jR",",","in","vec3","jS",",","out","vec3","jT",")","{","float","jU","=","jR",".","w","*","jS",".","x","+","jR",".","y","*","jS",".","z","-","jR",".","z","*","jS",".","y",";","float","jV","=","jR",".","w","*","jS",".","y","+","jR",".","z","*","jS",".","x","-","jR",".","x","*","jS",".","z",";","float","jW","=","jR",".","w","*","jS",".","z","+","jR",".","x","*","jS",".","y","-","jR",".","y","*","jS",".","x",";","float","jX","=","-","jR",".","x","*","jS",".","x","-","jR",".","y","*","jS",".","y","-","jR",".","z","*","jS",".","z",";","jT",".","x","=","jU","*","jR",".","w","-","jX","*","jR",".","x","-","jV","*","jR",".","z","+","jW","*","jR",".","y",";","jT",".","y","=","jV","*","jR",".","w","-","jX","*","jR",".","y","-","jW","*","jR",".","x","+","jU","*","jR",".","z",";","jT",".","z","=","jW","*","jR",".","w","-","jX","*","jR",".","z","-","jU","*","jR",".","y","+","jV","*","jR",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","jZ",";","jY","(","u_camera_quat",",","jQ",",","jZ",")",";","lI","=","dot","(","-","jZ",",","u_sun_direction",")","*","u_bloom_key",";","lI","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","jQ","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","jR","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","jQ","-","jR",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","jQ","+","u_motion_blur_exp","*","jR",";","}","else","{","gl_FragColor","=","jQ",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jQ","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","jQ",".","r","+","jQ",".","g","+","jQ",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jR","=","vec2","(","0.0",",","0.0",")",";","vec2","jS","=","u_texel_size",";","vec4","jT",";","jT","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jT","*","0.2270270270",";","jR","+=","jS",";","jT","=","texture2D","(","u_color",",","a","+","jR",")",";","gl_FragColor","+=","jT","*","0.1945945946",";","jT","=","texture2D","(","u_color",",","a","-","jR",")",";","gl_FragColor","+=","jT","*","0.1945945946",";","jR","+=","jS",";","jT","=","texture2D","(","u_color",",","a","+","jR",")",";","gl_FragColor","+=","jT","*","0.1216216216",";","jT","=","texture2D","(","u_color",",","a","-","jR",")",";","gl_FragColor","+=","jT","*","0.1216216216",";","jR","+=","jS",";","jT","=","texture2D","(","u_color",",","a","+","jR",")",";","gl_FragColor","+=","jT","*","0.0540540541",";","jT","=","texture2D","(","u_color",",","a","-","jR",")",";","gl_FragColor","+=","jT","*","0.0540540541",";","jR","+=","jS",";","jT","=","texture2D","(","u_color",",","a","+","jR",")",";","gl_FragColor","+=","jT","*","0.0162162162",";","jT","=","texture2D","(","u_color",",","a","-","jR",")",";","gl_FragColor","+=","jT","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jS","=","u_texel_size",";","vec4","jT","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jT",";","if","(","jT",".","a","==","0.0",")","{","jT","=","texture2D","(","u_color",",","a","+","jS",")",";","if","(","jT",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","jT",".","a",")",";","else","{","jT","=","texture2D","(","u_color",",","a","-","jS",")",";","if","(","jT",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","jT",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lK",";","varying","vec4","lL",";","varying","vec4","lM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","lN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lT","(","vec2","lO",",","sampler2D","lP",")","{","float","lQ","=","texture2D","(","lP",",","lO",")",".","r",";","float","lR","=","texture2D","(","lP",",","lK",".","xy",")",".","r",";","float","lS","=","texture2D","(","lP",",","lK",".","zw",")",".","r",";","return","vec3","(","lQ",",","lR",",","lS",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lZ","(","vec2","lU",",","sampler2D","lV",")","{","vec3","lW","=","lT","(","lU",",","lV",")",";","vec2","lX","=","abs","(","lW",".","xx","-","lW",".","yz",")",";","vec2","lY","=","step","(","SMAA_PREDICATION_THRESHOLD",",","lX",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","lY",")",";","}"]}]}}]},{type:"textline",tokens:["void","mc","(","bvec2","l_",",","inout","vec2","ma",",","vec2","mb",")","{","if","(","l_",".","x",")","ma",".","x","=","mb",".","x",";","if","(","l_",".","y",")","ma",".","y","=","mb",".","y",";","}","void","mc","(","bvec4","md",",","inout","vec4","me",",","vec4","mf",")","{","mc","(","md",".","xy",",","me",".","xy",",","mf",".","xy",")",";","mc","(","md",".","zw",",","me",".","zw",",","mf",".","zw",")",";","}","vec2","mh","(","vec2","mg",")","{","return","sign","(","mg",")","*","floor","(","abs","(","mg",")","+",".5",")",";","}","vec4","mh","(","vec4","mi",")","{","return","sign","(","mi",")","*","floor","(","abs","(","mi",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mz","(","vec2","mj",",","sampler2D","mk"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","ml"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mm","=","lZ","(","mj",",","ml",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","mm","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","mn","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","mo","=","dot","(","texture2D","(","mk",",","mj",")",".","rgb",",","mn",")",";","float","mp","=","dot","(","texture2D","(","mk",",","lK",".","xy",")",".","rgb",",","mn",")",";","float","mq","=","dot","(","texture2D","(","mk",",","lK",".","zw",")",".","rgb",",","mn",")",";","vec4","mr",";","mr",".","xy","=","abs","(","mo","-","vec2","(","mp",",","mq",")",")",";","vec2","ms","=","step","(","mm",",","mr",".","xy",")",";","if","(","dot","(","ms",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","mt","=","dot","(","texture2D","(","mk",",","lL",".","xy",")",".","rgb",",","mn",")",";","float","mu","=","dot","(","texture2D","(","mk",",","lL",".","zw",")",".","rgb",",","mn",")",";","mr",".","zw","=","abs","(","mo","-","vec2","(","mt",",","mu",")",")",";","vec2","mv","=","max","(","mr",".","xy",",","mr",".","zw",")",";","float","mw","=","dot","(","texture2D","(","mk",",","lM",".","xy",")",".","rgb",",","mn",")",";","float","mx","=","dot","(","texture2D","(","mk",",","lM",".","zw",")",".","rgb",",","mn",")",";","mr",".","zw","=","abs","(","vec2","(","mp",",","mq",")","-","vec2","(","mw",",","mx",")",")",";","mv","=","max","(","mv",".","xy",",","mr",".","zw",")",";","float","my","=","max","(","mv",".","x",",","mv",".","y",")",";","ms",".","xy","*=","step","(","my",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","mr",".","xy",")",";","return","ms",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mB","(","vec2","mA",")","{","mA",".","r","=","mA",".","r","*","abs","(","5.0","*","mA",".","r","-","5.0","*","0.75",")",";","return","mh","(","mA",")",";","}","vec4","mB","(","vec4","mC",")","{","mC",".","rb","=","mC",".","rb","*","abs","(","5.0","*","mC",".","rb","-","5.0","*","0.75",")",";","return","mh","(","mC",")",";","}","vec2","mK","(","sampler2D","mD",",","vec2","mE",",","vec2","mF",",","out","vec2","mG",")","{","vec4","mH","=","vec4","(","mE",",","-","1.0",",","1.0",")",";","vec3","mI","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","mJ","=","0",";","mJ","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","mJ","++",")","{","if","(","mH",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","mH",".","w",">","0.9",")","{","mH",".","xyz","+=","mI","*","vec3","(","mF",",","1.0",")",";","mG","=","texture2D","(","mD",",","mH",".","xy",",","0.0",")",".","rg",";","mH",".","w","=","dot","(","mG",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","mH",".","zw",";","}","vec2","mS","(","sampler2D","mL",",","vec2","mM",",","vec2","mN",",","out","vec2","mO",")","{","vec4","mP","=","vec4","(","mM",",","-","1.0",",","1.0",")",";","mP",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","mQ","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","mR","=","0",";","mR","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","mR","++",")","{","if","(","mP",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","mP",".","w",">","0.9",")","{","mP",".","xyz","=","mQ","*","vec3","(","mN",",","1.0",")","+","mP",".","xyz",";","mO","=","texture2D","(","mL",",","mP",".","xy",",","0.0",")",".","rg",";","mO","=","mB","(","mO",")",";","mP",".","w","=","dot","(","mO",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","mP",".","zw",";","}","vec2","mY","(","sampler2D","mT",",","vec2","mU",",","vec2","mV",",","float","mW",")","{","vec2","mX","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","mV","+","mU",";","mX","=","SMAA_AREATEX_PIXEL_SIZE","*","mX","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","mX",".","x","+=","0.5",";","mX",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","mW",";","return","texture2D","(","mT",",","mX",",","0.0",")",".","rg",";","}","vec2","nm","(","sampler2D","mZ",",","sampler2D","m_",",","vec2","na",",","vec2","nb",",","vec4","nc",")","{","vec2","nd","=","vec2","(","0.0",",","0.0",")",";","vec4","ne",";","vec2","nf",";","if","(","nb",".","r",">","0.0",")","{","ne",".","xz","=","mK","(","mZ",",","na",",","vec2","(","-","1.0",",","1.0",")",",","nf",")",";","ne",".","x","+=","float","(","nf",".","y",">","0.9",")",";","}","else","ne",".","xz","=","vec2","(","0.0",",","0.0",")",";","ne",".","yw","=","mK","(","mZ",",","na",",","vec2","(","1.0",",","-","1.0",")",",","nf",")",";","if","(","ne",".","x","+","ne",".","y",">","2.0",")","{","vec4","ng","=","vec4","(","-","ne",".","x","+","0.25",",","ne",".","x",",","ne",".","y",",","-","ne",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","na",".","xyxy",";","vec4","nh",";","nh",".","xy","=","texture2D","(","mZ",",","ng",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","nh",".","zw","=","texture2D","(","mZ",",","ng",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","nh",".","yxwz","=","mB","(","nh",".","xyzw",")",";","vec2","ni","=","vec2","(","2.0",",","2.0",")","*","nh",".","xz","+","nh",".","yw",";","mc","(","bvec2","(","step","(","0.9",",","ne",".","zw",")",")",",","ni",",","vec2","(","0.0",",","0.0",")",")",";","nd","+=","mY","(","m_",",","ne",".","xy",",","ni",",","nc",".","z",")",";","}","ne",".","xz","=","mS","(","mZ",",","na",",","vec2","(","-","1",",","-","1",")",",","nf",")",";","if","(","texture2D","(","mZ",",","na","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","ne",".","yw","=","mS","(","mZ",",","na",",","vec2","(","1",",","1",")",",","nf",")",";","ne",".","y","+=","float","(","nf",".","y",">","0.9",")",";","}","else","ne",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","ne",".","x","+","ne",".","y",">","2.0",")","{","vec4","nj","=","vec4","(","-","ne",".","x",",","-","ne",".","x",",","ne",".","y",",","ne",".","y",")","*","u_texel_size",".","xyxy","+","na",".","xyxy",";","vec4","nk",";","nk",".","x","=","texture2D","(","mZ",",","nj",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","nk",".","y","=","texture2D","(","mZ",",","nj",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","nk",".","zw","=","texture2D","(","mZ",",","nj",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","nl","=","vec2","(","2.0",",","2.0",")","*","nk",".","xz","+","nk",".","yw",";","mc","(","bvec2","(","step","(","0.9",",","ne",".","zw",")",")",",","nl",",","vec2","(","0",",","0",")",")",";","nd","+=","mY","(","m_",",","ne",".","xy",",","nl",",","nc",".","w",")",".","gr",";","}","return","nd",";","}"]}]}}]},{type:"textline",tokens:["float","ns","(","sampler2D","nn",",","vec2","no",",","float","np",")","{","vec2","nq","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","nr","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","np",",","1.0",")",";","nq","+=","vec2","(","-","1.0",",","1.0",")",";","nr","+=","vec2","(","0.5",",","-","0.5",")",";","nq","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","nr","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","nn",",","nq","*","no","+","nr",",","0.0",")",".","r",";","}","float","nA","(","sampler2D","nt",",","sampler2D","nu",",","vec2","nv",",","float","nw",")","{","vec2","nx","=","vec2","(","0.0",",","1.0",")",";","for","(","int","ny","=","0",";","ny","<","SMAA_MAX_SEARCH_STEPS",";","ny","++",")","{","if","(","nv",".","x",">","nw","&&","nx",".","g",">","0.8281","&&","nx",".","r","==","0.0",")","{","nx","=","texture2D","(","nt",",","nv",",","0.0",")",".","rg",";","nv","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","nv",";","}","}","float","nz","=","-","(","255.0","/","127.0",")","*","ns","(","nu",",","nx",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","nz","+","nv",".","x",";","}","float","nI","(","sampler2D","nB",",","sampler2D","nC",",","vec2","nD",",","float","nE",")","{","vec2","nF","=","vec2","(","0.0",",","1.0",")",";","for","(","int","nG","=","0",";","nG","<","SMAA_MAX_SEARCH_STEPS",";","nG","++",")","{","if","(","nD",".","x","<","nE","&&","nF",".","g",">","0.8281","&&","nF",".","r","==","0.0",")","{","nF","=","texture2D","(","nB",",","nD",",","0.0",")",".","rg",";","nD","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","nD",";","}","}","float","nH","=","-","(","255.0","/","127.0",")","*","ns","(","nC",",","nF",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","nH","+","nD",".","x",";","}","float","nQ","(","sampler2D","nJ",",","sampler2D","nK",",","vec2","nL",",","float","nM",")","{","vec2","nN","=","vec2","(","1.0",",","0.0",")",";","for","(","int","nO","=","0",";","nO","<","SMAA_MAX_SEARCH_STEPS",";","nO","++",")","{","if","(","nL",".","y",">","nM","&&","nN",".","r",">","0.8281","&&","nN",".","g","==","0.0",")","{","nN","=","texture2D","(","nJ",",","nL",",","0.0",")",".","rg",";","nL","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","nL",";","}","}","float","nP","=","-","(","255.0","/","127.0",")","*","ns","(","nK",",","nN",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","nP","+","nL",".","y",";","}","float","nY","(","sampler2D","nR",",","sampler2D","nS",",","vec2","nT",",","float","nU",")","{","vec2","nV","=","vec2","(","1.0",",","0.0",")",";","for","(","int","nW","=","0",";","nW","<","SMAA_MAX_SEARCH_STEPS",";","nW","++",")","{","if","(","nT",".","y","<","nU","&&","nV",".","r",">","0.8281","&&","nV",".","g","==","0.0",")","{","nV","=","texture2D","(","nR",",","nT",",","0.0",")",".","rg",";","nT","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","nT",";","}","}","float","nX","=","-","(","255.0","/","127.0",")","*","ns","(","nS",",","nV",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","nX","+","nT",".","y",";","}","vec2","oe","(","sampler2D","nZ",",","vec2","n_",",","float","oa",",","float","ob",",","float","oc",")","{","vec2","od","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","mh","(","4.0","*","vec2","(","oa",",","ob",")",")","+","n_",";","od","=","SMAA_AREATEX_PIXEL_SIZE","*","od","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","od",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","oc","+","od",".","y",";","return","texture2D","(","nZ",",","od",",","0.0",")",".","rg",";","}","void","om","(","sampler2D","of",",","inout","vec2","og",",","vec4","oh",",","vec2","oi",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oj","=","step","(","oi",".","xy",",","oi",".","yx",")",";","vec2","ok","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","oj",";","ok","/=","oj",".","x","+","oj",".","y",";","vec2","ol","=","vec2","(","1.0",",","1.0",")",";","ol",".","x","-=","ok",".","x","*","texture2D","(","of",",","oh",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","ol",".","x","-=","ok",".","y","*","texture2D","(","of",",","oh",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","ol",".","y","-=","ok",".","x","*","texture2D","(","of",",","oh",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","ol",".","y","-=","ok",".","y","*","texture2D","(","of",",","oh",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","og","*=","clamp","(","ol",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","ou","(","sampler2D","on",",","inout","vec2","oo",",","vec4","op",",","vec2","oq",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","or","=","step","(","oq",".","xy",",","oq",".","yx",")",";","vec2","os","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","or",";","os","/=","or",".","x","+","or",".","y",";","vec2","ot","=","vec2","(","1.0",",","1.0",")",";","ot",".","x","-=","os",".","x","*","texture2D","(","on",",","op",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","ot",".","x","-=","os",".","y","*","texture2D","(","on",",","op",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","ot",".","y","-=","os",".","x","*","texture2D","(","on",",","op",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","ot",".","y","-=","os",".","y","*","texture2D","(","on",",","op",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","oo","*=","clamp","(","ot",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oN","(","vec2","ov",",","vec2","ow",",","sampler2D","ox",",","sampler2D","oy",",","sampler2D","oz",",","vec4","oA",")","{","vec4","oB","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","oC","=","texture2D","(","ox",",","ov",")",".","rg",";","if","(","oC",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["oB",".","rg","=","nm","(","ox",",","oy",",","ov",",","oC",",","oA",")",";","if","(","oB",".","r","==","-","oB",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","oD",";","vec3","oE",";","oE",".","x","=","nA","(","ox",",","oz",",","lK",".","xy",",","lM",".","x",")",";","oE",".","y","=","lL",".","y",";","oD",".","x","=","oE",".","x",";","float","oF","=","texture2D","(","ox",",","oE",".","xy",",","0.0",")",".","r",";","oE",".","z","=","nI","(","ox",",","oz",",","lK",".","zw",",","lM",".","y",")",";","oD",".","y","=","oE",".","z",";","oD","=","abs","(","mh","(","oD","/","u_texel_size",".","xx","-","ow",".","xx",")",")",";","vec2","oG","=","sqrt","(","oD",")",";","float","oH","=","texture2D","(","ox",",","oE",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","oB",".","rg","=","oe","(","oy",",","oG",",","oF",",","oH",",","oA",".","y",")",";","oE",".","y","=","ov",".","y",";","om","(","ox",",","oB",".","rg",",","oE",".","xyzy",",","oD",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","oC",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","oC",".","r",">","0.0",")","{","vec2","oI",";","vec3","oJ",";","oJ",".","y","=","nQ","(","ox",",","oz",",","lL",".","xy",",","lM",".","z",")",";","oJ",".","x","=","lK",".","x",";","oI",".","x","=","oJ",".","y",";","float","oK","=","texture2D","(","ox",",","oJ",".","xy",",","0.0",")",".","g",";","oJ",".","z","=","nY","(","ox",",","oz",",","lL",".","zw",",","lM",".","w",")",";","oI",".","y","=","oJ",".","z",";","oI","=","abs","(","mh","(","oI","/","u_texel_size",".","yy","-","ow",".","yy",")",")",";","vec2","oL","=","sqrt","(","oI",")",";","float","oM","=","texture2D","(","ox",",","oJ",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","oB",".","ba","=","oe","(","oy",",","oL",",","oK",",","oM",",","oA",".","x",")",";","oJ",".","x","=","ov",".","x",";","ou","(","ox",",","oB",".","ba",",","oJ",".","xyxz",",","oI",")",";","}","return","oB",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pd","(","vec2","oO",",","sampler2D","oP",",","sampler2D","oQ"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","oR"]}]}}]},{type:"textline",tokens:[")","{","vec4","oS",";","oS",".","x","=","texture2D","(","oQ",",","lJ",".","xy",")",".","a",";","oS",".","y","=","texture2D","(","oQ",",","lJ",".","zw",")",".","g",";","oS",".","wz","=","texture2D","(","oQ",",","oO",")",".","xz",";","if","(","dot","(","oS",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","oT","=","texture2D","(","oP",",","oO",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oU","=","texture2D","(","oR",",","a",")",";","vec2","oV","=","2.0","*","ct","(","oU",")","-","1.0",";","oT",".","a","=","sqrt","(","2.0","*","length","(","oV",")",")",";"]}]}}]},{type:"textline",tokens:["return","oT",";","}","else","{","bool","oW","=","max","(","oS",".","x",",","oS",".","z",")",">","max","(","oS",".","y",",","oS",".","w",")",";","vec4","oX","=","vec4","(","0.0",",","oS",".","y",",","0.0",",","oS",".","w",")",";","vec2","oY","=","oS",".","yw",";","mc","(","bvec4","(","oW",",","oW",",","oW",",","oW",")",",","oX",",","vec4","(","oS",".","x",",","0.0",",","oS",".","z",",","0.0",")",")",";","mc","(","bvec2","(","oW",",","oW",")",",","oY",",","oS",".","xz",")",";","oY","/=","dot","(","oY",",","vec2","(","1.0",",","1.0",")",")",";","vec4","oZ","=","oX","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","oO",".","xyxy",";","vec4","o_","=","oY",".","x","*","texture2D","(","oP",",","oZ",".","xy",",","0.0",")",";","o_","+=","oY",".","y","*","texture2D","(","oP",",","oZ",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pa","=","texture2D","(","oR",",","oZ",".","xy",")",";","vec2","pb","=","2.0","*","ct","(","pa",")","-","1.0",";","vec2","pc","=","oY",".","x","*","pb",";","pa","=","texture2D","(","oR",",","oZ",".","zw",")",";","pb","=","2.0","*","ct","(","pa",")","-","1.0",";","pc","+=","oY",".","y","*","pb",";","o_",".","a","=","sqrt","(","2.0","*","length","(","pc",")",")",";"]}]}}]},{type:"textline",tokens:["return","o_",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pp","(","vec2","pe",",","sampler2D","pf",",","sampler2D","pg"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","ph"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pi","=","texture2D","(","ph",",","a",")",";","vec2","pj",";","pj","=","2.0","*","ct","(","pi",")","-","1.0",";","vec4","pk","=","texture2D","(","pf",",","pe",")",";","vec4","pl","=","texture2D","(","pg",",","pe","-","pj",")",";","float","pm","=","abs","(","pk",".","a","*","pk",".","a","-","pl",".","a","*","pl",".","a",")","/","2.0",";","float","pn","=","0.5","*","clamp","(","1.0","-","sqrt","(","pm",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","po","=","mix","(","pk",",","pl",",","pn",")",";","po",".","a","=","1.0",";","return","po",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","pk","=","texture2D","(","pf",",","pe",")",";","vec4","pl","=","texture2D","(","pg",",","pe",")",";","return","mix","(","pk",",","pl",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pq","=","vec4","(","mz","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pq","=","oN","(","a",",","lN",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pq","=","pd","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pq","=","vec4","(","pp","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","pq","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","pq",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lK",";","varying","vec4","lL",";","varying","vec4","lM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","lN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","jR","(","vec2","jQ",")","{","lK","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","jQ",".","xyxy",";","lL","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","jQ",".","xyxy",";","lM","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","jQ",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","jU","(","vec2","jS",",","out","vec2","jT",")","{","jT","=","jS","/","u_texel_size",";","lK","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","jS",".","xyxy",";","lL","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","jS",".","xyxy",";","lM","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","lK",".","xz",",","lL",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","jW","(","vec2","jV",")","{","lJ","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","jV",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["jR","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["jU","(","a",",","lN",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["jW","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"define",name:"SSAO_QUALITY_16",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["2"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","float","u_view_max_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_dithering_amount",";","uniform","float","u_ssao_gauss_center",";","uniform","float","u_ssao_gauss_width_square",";","uniform","float","u_ssao_gauss_width_left_square",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","vec2","lT","(","vec2","lO",")","{","float","lP","=","dot","(","lO",",","vec2","(","12.9898",",","78.233",")",")",";","float","lQ","=","dot","(","lO",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","lR","=","fract","(","sin","(","lP",")","*","43758.5453",")","*","2.0","-","1.0",";","float","lS","=","fract","(","sin","(","lQ",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","lR",",","lS",")",";","}","float","lV","(","in","vec2","lU",")","{","return","lE","(","u_depth",",","lU",",","u_camera_range",")",";","}","float","mc","(","in","float","lW",",","in","float","lX",",","inout","int","lY",")","{","float","lZ","=","u_ssao_gauss_width_square",";","float","l_","=","(","lW","-","lX",")","*","100.0",";","if","(","l_","<","u_ssao_gauss_center",")","lZ","=","u_ssao_gauss_width_left_square",";","else","lY","=","1",";","float","ma","=","l_","-","u_ssao_gauss_center",";","float","mb","=","exp","(","-","2.0","*","ma","*","ma","/","lZ",")",";","return","mb",";","}","float","ml","(","float","md",",","vec2","me",")","{","float","mf","=","0.0",";","float","mg","=","0.0",";","float","mh","=","max","(","1.0",",","u_view_max_depth","/","100.0",")",";","md","*=","mh",";","me","/=","md",";","vec2","mi","=","a","+","me",";","vec2","mj","=","a","-","me",";","int","mk","=","0",";","mf","=","mc","(","md",",","mh","*","lV","(","mi",")",",","mk",")",";","if","(","mk",">","0","||","mi",".","y","<","0.0","||","mi",".","y",">","1.0","||","mi",".","x","<","0.0","||","mi",".","x",">","1.0",")","{","mg","=","mc","(","mh","*","lV","(","mj",")",",","md",",","mk",")",";","mf","+=","(","1.0","-","mf",")","*","mg",";","}","return","mf",";","}","void","main","(",")","{","vec2","mm","=","lT","(","a",")","*","u_ssao_dithering_amount",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["mm","*=","1.5",";"]}]}}]},{type:"textline",tokens:["float","mn","=","lV","(","a",")",";","float","mo","=","0.0",";","vec2","mp","=","u_texel_size","*","0.5",";","for","(","int","mq","=","0",";","mq","<","4",";","mq","++",")","{"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","mq","==","0","||","mq","==","2",")","{"]}]}}]},{type:"textline",tokens:["mo","+=","ml","(","mn",",","mp",")",";","mo","+=","ml","(","mn",",","vec2","(","mp",".","x",",","-","mp",".","y",")",")",";","mo","+=","ml","(","mn",",","vec2","(","-","mp",".","x",",","mp",".","y",")",")",";","mo","+=","ml","(","mn",",","vec2","(","-","mp",".","x",",","-","mp",".","y",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","if","(","mq","==","1","||","mq","==","3",")","{"]}]}}]},{type:"textline",tokens:["mo","+=","ml","(","mn",",","vec2","(","mp",".","x","*","1.2",",","0.0",")",")",";","mo","+=","ml","(","mn",",","vec2","(","-","mp",".","x","*","1.2",",","0.0",")",")",";","mo","+=","ml","(","mn",",","vec2","(","0.0",",","mp",".","y","*","1.2",")",")",";","mo","+=","ml","(","mn",",","vec2","(","0.0",",","-","mp",".","y","*","1.2",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["mp","+=","mm",";","mp","*=","u_ssao_radius_increase",";","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["mo","=","1.0","-","mo","/","16.0",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["mo","=","1.0","-","mo","/","32.0",";"]}]}}]},{type:"textline",tokens:["float","mr","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","mn",")",";","mo","=","(","1.0","-","mr",")","+","mo","*","mr",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["mo","=","1.0",";"]}]}}]},{type:"textline",tokens:["float","ms","=","texture2D","(","u_color",",","a",")",".","r",";","gl_FragColor","=","vec4","(","ms",",","mo",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","jQ","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","jR","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","jQ","-","1.0",",","1.0",")",";","vec4","jS","=","u_view_proj_inverse","*","jR",";","vec4","jT","=","jS","/","jS",".","w",";","vec4","jU","=","u_view_proj_prev","*","jT",";","jU","/=","jU",".","w",";","vec2","jV","=","(","jR",".","xy","-","jU",".","xy",")","/","4.0","+","0.5",";","jV","=","clamp","(","jV",",","0.0",",","1.0",")",";","gl_FragColor","=","ch","(","jV",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","mat4","j","(",")","{","return","mat4","(","1.0",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","l","(","float","k",")","{","return","mat4","(","1.0",",","b",",","b",",","b",",","b",",","cos","(","k",")",",","sin","(","k",")",",","b",",","b",",","-","sin","(","k",")",",","cos","(","k",")",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","n","(","float","m",")","{","return","mat4","(","cos","(","m",")",",","b",",","-","sin","(","m",")",",","b",",","b",",","1.0",",","b",",","b",",","sin","(","m",")",",","b",",","cos","(","m",")",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","p","(","float","o",")","{","return","mat4","(","cos","(","o",")",",","sin","(","o",")",",","b",",","b",",","-","sin","(","o",")",",","cos","(","o",")",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",")",";","}","c","r","(","in","c","q",")","{","return","c","(","q",".","a",",","q",".","b",",","normalize","(","q",".","c",")",",","normalize","(","q",".","d",")",",","normalize","(","q",".","e",")",",","q",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","s","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","y","(","vec3","t",",","mat4","u",")","{","vec3","v","=","vec3","(","u","[","0","]","[","0","]",",","u","[","1","]","[","0","]",",","u","[","2","]","[","0","]",")",";","vec3","w","=","vec3","(","u","[","0","]","[","1","]",",","u","[","1","]","[","1","]",",","u","[","2","]","[","1","]",")",";","vec3","x","=","vec3","(","u","[","0","]","[","2","]",",","u","[","1","]","[","2","]",",","u","[","2","]","[","2","]",")",";","w","=","cross","(","x",",","v",")",";","return","mat4","(","vec4","(","v",",","0.0",")",",","vec4","(","w",",","0.0",")",",","vec4","(","x",",","0.0",")",",","vec4","(","t",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","E","(","vec3","z",",","vec3","A",")","{","vec3","B","=","z","-","A",";","B",".","y","=","0.0",";","B","=","normalize","(","B",")",";","vec3","C","=","normalize","(","cross","(","s",",","B",")",")",";","vec3","D","=","normalize","(","cross","(","B",",","C",")",")",";","return","mat4","(","vec4","(","C",",","0.0",")",",","vec4","(","D",",","0.0",")",",","vec4","(","B",",","0.0",")",",","vec4","(","A",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","P","(","in","vec3","F",",","float","G",",","float","H",",","float","I",",","vec3","J",")","{","float","L","=","fract","(","length","(","J",")","/","0.17",")",";","float","M","=","I","+","L","/","10.0",";","float","N","=","L",";","if","(","I","!=","0.0",")","N","/=","I",";","F","*=","1.0","+","0.5","*","sin","(","G",")",";","float","O","=","length","(","F",")","*","H","*","sin","(","2.0","*","3.14","*","G","*","M","+","N",")",";","return","p","(","O",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","_","(","in","vec3","Q",",","in","vec3","R",",","in","mat4","S",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","=","y","(","R",",","S",")",";"]}]}},{type:"elif",expression:["HAIR_BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","U","=","fract","(","(","R",".","x","*","1.43","+","R",".","y","*","0.123","+","R",".","z","*","6.1",")",")",";","float","V","=","2.0","*","M_PI","*","U",";","vec3","W","=","normalize","(","vec3","(","S","[","0","]","[","2","]",",","0.0",",","S","[","2","]","[","2","]",")",")",";","float","X","=","acos","(","W","[","2","]",")",";","if","(","W","[","0","]","<","0.0",")","X","=","2.0","*","M_PI","-","X",";","float","Y","=","X","-","V",";","if","(","Y","<","0.0",")","Y","=","2.0","*","M_PI","+","Y",";","float","Z","=","V",";","if","(","Y","<=","MAX_BILLBOARD_ANGLE",")","Z","+=","Y",";","else","if","(","Y","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","Z","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Y","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","Y","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","Z","+=","Y","-","M_PI",";","else","if","(","Y","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","Z","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Y","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","Z","+=","Y","-","2.0","*","M_PI",";","mat4","T","=","n","(","Z",")",";","T","[","3","]","=","vec4","(","R",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","=","E","(","Q",",","R",")",";"]}]}}]},{type:"textline",tokens:["return","T",";","}","c","ag","(","in","vec3","aa",",","in","vec3","ab",",","in","vec3","ac",",","in","vec3","ad",",","in","vec3","ae",",","in","mat4","af",")","{","aa","=","(","af","*","vec4","(","aa",",","1.0",")",")",".","xyz",";","ab","=","(","af","*","vec4","(","ab",",","1.0",")",")",".","xyz",";","ac","=","(","af","*","vec4","(","ac",",","0.0",")",")",".","xyz",";","ad","=","(","af","*","vec4","(","ad",",","0.0",")",")",".","xyz",";","ae","=","(","af","*","vec4","(","ae",",","0.0",")",")",".","xyz",";","return","r","(","c","(","aa",",","ab",",","ac",",","ad",",","ae",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","aj","(","vec2","ah",",","vec3","ai",")","{","return","(","ah","+","0.5",")","*","ai",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","as","(","in","vec4","ak",",","in","vec4","al",",","in","float","am",")","{","float","an","=","ak","[","0","]","*","al","[","0","]","+","ak","[","1","]","*","al","[","1","]","+","ak","[","2","]","*","al","[","2","]","+","ak","[","3","]","*","al","[","3","]",";","if","(","an","<","0.0",")","{","al","*=","-","1.0",";","an","=","-","an",";","}","if","(","abs","(","an",")",">=","1.0",")","return","ak",";","float","ao","=","acos","(","an",")",";","float","ap","=","sqrt","(","1.0","-","an","*","an",")",";","if","(","abs","(","ap",")","<","0.001",")","return","vec4","(","ak","*","0.5","+","al","*","0.5",")",";","float","aq","=","sin","(","(","1.0","-","am",")","*","ao",")","/","ap",";","float","ar","=","sin","(","am","*","ao",")","/","ap",";","return","ak","*","aq","+","al","*","ar",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aH","(","in","vec3","at",",","in","vec4","au",",","in","vec4","av",",","in","vec4","aw",",","in","vec4","ax",",","in","float","ay",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","az","=","as","(","au",",","av",",","ay",")",";","vec4","aA","=","mix","(","aw",",","ax",",","ay",")",";","vec3","aB","=","i","(","az",",","at",")",";","vec3","aC","=","aB","*","aA",".","w","+","aA",".","xyz",";","return","aC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aD","=","i","(","au",",","at",")",";","vec3","aE","=","i","(","av",",","at",")",";","vec3","aF","=","aD","*","aw",".","w","+","aw",".","xyz",";","vec3","aG","=","aE","*","ax",".","w","+","ax",".","xyz",";","return","mix","(","aF",",","aG",",","ay",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aQ","(","in","vec3","aI",",","in","vec4","aJ",",","in","vec4","aK",",","in","float","aL",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aM","=","as","(","aJ",",","aK",",","aL",")",";","vec3","aN","=","i","(","aM",",","aI",")",";","return","aN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aO","=","i","(","aJ",",","aI",")",";","vec3","aP","=","i","(","aK",",","aI",")",";","return","mix","(","aO",",","aP",",","aL",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aH","(","in","vec3","aR",",","in","vec4","aS",",","in","vec4","aT",")","{","vec3","aU","=","i","(","aS",",","aR",")",";","vec3","aV","=","aU","*","aT",".","w","+","aT",".","xyz",";","return","aV",";","}","vec3","aQ","(","in","vec3","aW",",","in","vec4","aX",")","{","vec3","aY","=","i","(","aX",",","aW",")",";","return","aY",";","}"]}]}}]},{type:"textline",tokens:["void","bl","(","inout","vec3","aZ",",","inout","vec3","a_",",","inout","vec3","ba",",","inout","vec3","bb",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bc","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bd","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","be","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bg","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","bh","=","0",";","bh","<","4",";","bh","++",")","{","int","bi","=","int","(","a_influence","[","bh","]",")",";","float","bj","=","fract","(","a_influence","[","bh","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bd","+=","bj","*","aH","(","aZ",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","u_transb","[","bi","]",",","u_transa","[","bi","]",",","bc",")",";","be","+=","bj","*","aQ","(","a_",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","bc",")",";","bf","+=","bj","*","aQ","(","ba",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","bc",")",";","bg","+=","bj","*","aQ","(","bb",",","u_quatsb","[","bi","]",",","u_quatsa","[","bi","]",",","bc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bd","+=","bj","*","aH","(","aZ",",","u_quatsb","[","bi","]",",","u_transb","[","bi","]",")",";","be","+=","bj","*","aQ","(","a_",",","u_quatsb","[","bi","]",")",";","bf","+=","bj","*","aQ","(","ba",",","u_quatsb","[","bi","]",")",";","bg","+=","bj","*","aQ","(","bb",",","u_quatsb","[","bi","]",")",";"]}]}}]},{type:"textline",tokens:["}","aZ","=","bd",";","a_","=","be",";","ba","=","bf",";","bb","=","bg",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bk","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bk",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aH","(","aZ",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","u_transb","[","bk","]",",","u_transa","[","bk","]",",","bc",")",";","a_","=","aQ","(","a_",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bc",")",";","ba","=","aQ","(","ba",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bc",")",";","bb","=","aQ","(","bb",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aH","(","aZ",",","u_quatsb","[","bk","]",",","u_transb","[","bk","]",")",";","a_","=","aQ","(","a_",",","u_quatsb","[","bk","]",")",";","ba","=","aQ","(","ba",",","u_quatsb","[","bk","]",")",";","bb","=","aQ","(","bb",",","u_quatsb","[","bk","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bz","(","inout","vec3","bm",",","in","vec3","bn",",","in","float","bo",",","in","float","bp",",","in","float","bq",",","in","vec3","br",",","in","float","bs",")","{","float","bt","=","length","(","bn",")",";","float","bu","=","bp","*","(","1.0","+","0.1","*","fract","(","bt",")",")",";","float","bv","=","bo","*","bs","*","(","1.0","+","sin","(","2.0","*","3.14","*","bq","*","bu","+","bt",")",")",";","float","bw","=","(","bm",".","y","-","bn",".","y",")","*","abs","(","bv",")",";","bw","+=","1.0",";","bw","*=","bw",";","bw","=","bw","*","bw","-","bw",";","vec3","bx","=","bm",";","bx",".","xz","+=","br",".","xz","*","bw","*","sign","(","bv",")",";","float","by","=","length","(","bm","-","bn",")",";","bm","=","bn","+","normalize","(","bx","-","bn",")","*","by",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bB","(","vec4","bA",")","{","return","bA","*","bA","*","(","3.0","-","2.0","*","bA",")",";","}","vec4","bD","(","vec4","bC",")","{","return","abs","(","fract","(","bC","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bF","(","vec4","bE",")","{","return","bB","(","bD","(","bE",")",")",";","}","void","bW","(","inout","vec3","bG",",","in","float","bH",",","in","vec3","bI",",","in","vec3","bJ",",","in","vec3","bK",",","in","float","bL",",","in","float","bM",",","in","float","bN",",","in","vec3","bO",")","{","float","bP",";","float","bQ",";","float","bR",";","vec2","bS",";","vec4","bT",";","vec2","bU",";","vec3","bV",";","bP","=","dot","(","bK",",","vec3","(","1.0",")",")",";","bQ","=","bP","+","bO",".","g",";","bR","=","dot","(","bG",",","vec3","(","bO",".","g",")",")",";","bS","=","(","bH","+","vec2","(","bR",",","bQ",")",")",";","bT","=","(","(","fract","(","(","bS",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bJ",")","*","bL",";","bT","=","bF","(","bT",")",";","bU","=","bT",".","xz","+","bT",".","yw",";","bU",".","y","=","0.5","-","bU",".","y",";","bV","=","bU",".","xyx","*","bO",".","rbr","*","vec3","(","bM","*","bI",".","x",",","bN",",","bM","*","bI",".","z",")",";","bG","+=","bV",";","}"]}]}}]},{type:"textline",tokens:["void","cc","(","inout","vec3","bX",",","inout","vec3","bY",",","in","vec3","bZ",")","{","vec3","b_","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ca","=","bY",";","vec3","cb","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ca","=","bX",";","vec3","cb","=","bY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bW","(","ca",",","u_time",",","bZ",",","b_",",","cb",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bz","(","ca",",","cb",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","b_",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bz","(","ca",",","cb",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","b_",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bX","+=","ca","-","bY",";","bY","=","ca",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bX","=","ca",";","bY","=","cb",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_SRC_RGBA_PCF",tokens:["3"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["4"]},{type:"define",name:"SHADOW_SRC_VSM",tokens:["5"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["6"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["3"]},{type:"define",name:"SHADOW_DST_VSM",tokens:["4"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","ch","(","const","in","float","cd",")","{","const","vec4","ce","=","vec4","(","255.0","*","255.0","*","255.0",",","255.0","*","255.0",",","255.0",",","1.0",")",";","const","vec4","cf","=","vec4","(","0.0",",","1.0","/","255.0",",","1.0","/","255.0",",","1.0","/","255.0",")",";","vec4","cg","=","fract","(","cd","*","ce",")",";","cg","-=","cg",".","xxyz","*","cf",";","return","cg",";","}","float","cl","(","const","in","vec4","ci",")","{","float","cj",";","const","vec4","ck","=","vec4","(","1.0","/","(","255.0","*","255.0","*","255.0",")",",","1.0","/","(","255.0","*","255.0",")",",","1.0","/","255.0",",","1.0",")",";","cj","=","dot","(","ci",",","ck",")",";","return","cj",";","}","vec4","ch","(","const","in","vec2","cm",")","{","const","vec2","cn","=","vec2","(","255.0",",","1.0",")",";","const","vec2","co","=","vec2","(","0.0",",","1.0","/","255.0",")",";","vec4","cp","=","fract","(","cm",".","xxyy","*","cn",".","xyxy",")",";","cp","-=","cp",".","xxzz","*","co",".","xyxy",";","if","(","cm",".","r","==","1.0",")","cp",".","rg","=","vec2","(","0.0",",","1.0",")",";","if","(","cm",".","g","==","1.0",")","cp",".","ba","=","vec2","(","0.0",",","1.0",")",";","return","cp",";","}","vec2","ct","(","const","in","vec4","cq",")","{","vec2","cr",";","const","vec2","cs","=","vec2","(","1.0","/","255.0",",","1.0",")",";","cr",".","r","=","dot","(","cq",".","rg",",","cs",")",";","cr",".","g","=","dot","(","cq",".","ba",",","cs",")",";","return","cr",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_SECTION_DIST0",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST1",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST2",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST3",tokens:["0.0"]},{type:"var",name:"PCF_TEXEL_SIZE",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["float","cI","(","sampler2D","cC",",","vec3","cD",",","float","cE",",","float","cF",")","{","vec2","cG","=","cD",".","xy","+","vec2","(","cE",",","cF",")","*","PCF_TEXEL_SIZE",";","vec4","cH","=","texture2D","(","cC",",","cG",")",";","return","cl","(","cH",")",";","}"]}]}}]},{type:"textline",tokens:["float","cX","(","vec3","cJ",",","sampler2D","cK",",","float","cL",")","{","float","cM",";","cJ",".","z","=","clamp","(","cJ",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cN","=","texture2D","(","cK",",","cJ",".","xy",")",";","float","cO","=","cl","(","cN",")",";","if","(","all","(","lessThan","(","cJ",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cJ",".","xy",",","vec2","(","0.0",")",")",")","&&","cO","<","cJ",".","z",")","{","float","cP","=","cJ",".","z","-","cO",";","cM","=","exp","(","-","cP","*","cL",")",";","}","else","cM","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cO",";","cO",".","r","=","cI","(","cK",",","cJ",",","0.5",",","0.5",")",";","cO",".","g","=","cI","(","cK",",","cJ",",","0.5",",","-","0.5",")",";","cO",".","b","=","cI","(","cK",",","cJ",",","-","0.5",",","-","0.5",")",";","cO",".","a","=","cI","(","cK",",","cJ",",","-","0.5",",","0.5",")",";","vec4","cQ","=","vec4","(","cJ",".","z",",","cJ",".","z",",","cJ",".","z",",","cJ",".","z",")",";","if","(","all","(","lessThan","(","cJ",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cJ",".","xy",",","vec2","(","0.0",")",")",")",")","cM","=","dot","(","vec4","(","greaterThanEqual","(","cO",",","cQ",")",")",",","vec4","(","0.25",",","0.25",",","0.25",",","0.25",")",")",";","else","cM","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cR","=","texture2D","(","cK",",","cJ",".","xy",")",";","float","cS","=","cR",".","r",";","float","cT","=","cR",".","g",";","if","(","all","(","lessThan","(","cJ",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cJ",".","xy",",","vec2","(","0.0",")",")",")","&&","cS","<","cJ",".","z",")","{","float","cU","=","cT","-","cS","*","cS",";","float","cV","=","cJ",".","z","-","cS",";","cM","=","cU","/","(","cU","+","cV","*","cV",")",";","}","else","cM","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","cO","=","texture2D","(","cK",",","cJ",".","xy",")",".","r",";","if","(","all","(","lessThan","(","cJ",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cJ",".","xy",",","vec2","(","0.0",")",")",")","&&","cO","<","cJ",".","z",")","{","cM","=","0.0",";","float","cW","=","cJ",".","z","-","cO",";","cM","=","exp","(","-","cW","*","cL",")",";","}","else","cM","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","cM",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","dc","(","float","cY",",","float","cZ",")","{","vec3","c_",";","float","da","=","1.0",";","float","db","=","-","cY",";","if","(","db","<","CSM_SECTION_DIST0",")","{","c_","=","cv",".","xyz","/","cv",".","w",";","da","=","cX","(","c_",",","u_shadow_map0",",","cZ",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","db","<","CSM_SECTION_DIST1",")","{","c_","=","cw",".","xyz","/","cw",".","w",";","da","=","cX","(","c_",",","u_shadow_map1",",","cZ",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","db","<","CSM_SECTION_DIST2",")","{","c_","=","cx",".","xyz","/","cx",".","w",";","da","=","cX","(","c_",",","u_shadow_map2",",","cZ",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","db","<","CSM_SECTION_DIST3",")","{","c_","=","cy",".","xyz","/","cy",".","w",";","da","=","cX","(","c_",",","u_shadow_map3",",","cZ",")",";","}"]}]}}]},{type:"textline",tokens:["return","da",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","di","(","in","float","dd",",","inout","vec3","de",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","df","=","texture2DProj","(","u_shadow_mask",",","cz",")",".","rg",";","vec3","dg","=","vec3","(","df",".","r",")",";","float","dh","=","df",".","g",";","cB","=","vec4","(","dg",",","dh",")",";","de","*=","cB",".","a",";","return","cB",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","dc","(","cA",".","z",",","dd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","dn","(","vec3","dj",",","float","dk",",","vec2","dl",")","{","vec2","dm","=","vec2","(","(","dj",".","x","-","dl",".","x",")","/","dk",",","-","(","dj",".","z","-","dl",".","y",")","/","dk",")",";","return","fract","(","dm",")",";","}","vec2","ds","(","vec2","dp",",","float","dq",",","vec2","dr",")","{","return","vec2","(","dp",".","x","*","dq",",","-","dp",".","y","*","dq",")","+","dr",";","}","c","dt","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","dZ","(","vec3","du",",","vec3","dv",",","vec3","dw",",","vec3","dx",",","vec3","dy",",","sampler2D","dz",",","sampler2D","dA",",","vec3","dB",",","float","dC",",","vec3","dD",",","vec4","dE",",","mat4","dF",")","{","vec3","dG","=","i","(","dE",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","dH","=","-","dG",".","x",";","float","dI","=","-","dG",".","z",";","vec2","dJ","=","vec2","(","dD",".","x","+","dC","*","(","-","1.0","-","dH",")","/","2.0",",","dD",".","z","+","dC","*","(","1.0","-","dI",")","/","2.0",")",";","vec2","dK","=","dn","(","dy",",","dC",",","dJ",")",";","float","dL","=","dC","/","2.0",";","vec2","dM","=","abs","(","ds","(","dK","-","vec2","(","0.5",")",",","dC",",","vec2","(","0.0",")",")",")",";","float","dN","=","dL","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","dM",")",">","dN",")","return","dt","(",")",";","float","dO","=","dC","/","dB",".","z",";","vec2","dP","=","(","dK","-","vec2","(","0.5",")",")","*","dO","+","vec2","(","0.5",")",";","vec3","dQ","=","dG","*","(","dC","/","dB",".","z","-","1.0",")","/","2.0",";","dP",".","x","+=","dQ",".","x",";","dP",".","y","-=","dQ",".","z",";","vec4","dR","=","texture2D","(","dA",",","dP",")",";","float","dS","=","dR",".","r",";","if","(","dS","<","u_scale_threshold",")","return","dt","(",")",";","float","dT","=","dB",".","y","-","dB",".","x",";","float","dU","=","dB",".","y","-","texture2D","(","dz",",","dP",")",".","r","*","dT",";","vec2","dV","=","du",".","xz","-","dy",".","xz",";","dy",".","xz","=","ds","(","dK",",","dC",",","dJ",")",";","dy",".","y","=","dU",";","du",".","xz","=","dy",".","xz","+","dV",";","du",".","y","*=","dS",";","du",".","y","+=","dU",";","vec3","dW","=","dR",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["du","-=","dy",";","mat4","dX","=","_","(","dD",",","dy",",","dF",")",";","c","dY","=","ag","(","du",",","dy",",","dv",",","dw",",","dx",",","dX",")",";","dY",".","b","=","dy",";","dY",".","f","=","dW",";","return","r","(","dY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","r","(","c","(","du",",","dy",",","dv",",","dw",",","dx",",","dW",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["void","ea","(","vec3","d_",")","{","cv","=","u_b_light_matrix","*","u_p_light_matrix0","*","u_v_light_matrix","*","vec4","(","d_",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cw","=","u_b_light_matrix","*","u_p_light_matrix1","*","u_v_light_matrix","*","vec4","(","d_",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cx","=","u_b_light_matrix","*","u_p_light_matrix2","*","u_v_light_matrix","*","vec4","(","d_",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cy","=","u_b_light_matrix","*","u_p_light_matrix3","*","u_v_light_matrix","*","vec4","(","d_",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","ea","(","vec4","eb",")","{","float","ec","=","eb",".","x",";","float","ed","=","eb",".","y",";","float","ee","=","eb",".","w",";","cz",".","x","=","(","ec","+","ee",")","/","2.0",";","cz",".","y","=","(","ed","+","ee",")","/","2.0",";","cz",".","z","=","ee",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","eh","(","inout","vec3","eg",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["eg","=","max","(","vec3","(","0.0",")",",","eg",")",";","eg","=","pow","(","eg",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ej","(","inout","vec3","ei",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ei","=","max","(","vec3","(","0.0",")",",","ei",")",";","ei","=","pow","(","ei",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","em","(","inout","vec3","ek",",","in","float","el",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ek","=","ek","*","el",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","eu","(","inout","vec3","ep",",","in","float","eq",",","in","vec4","er",")","{","float","es","=","er",".","w","*","eq",";","float","et","=","exp","(","-","es","*","es",")",";","et","=","clamp","(","et",",","0.0",",","1.0",")",";","ep","=","mix","(","er",".","rgb",",","ep",",","et",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eB","(","in","mat4","ev",",","in","vec3","ew",")","{","vec3","ex","=","mix","(","ev","[","0","]",".","rgb",",","ev","[","1","]",".","rgb",",","max","(","sign","(","ew",".","x",")",",","0.0",")",")",";","vec3","ey","=","mix","(","ev","[","2","]",".","rgb",",","ev","[","3","]",".","rgb",",","max","(","sign","(","ew",".","z",")",",","0.0",")",")",";","vec3","ez","=","vec3","(","ev","[","0","]",".","a",",","ev","[","1","]",".","a",",","ev","[","2","]",".","a",")",";","vec3","eA","=","mix","(","ex",",","ey",",","abs","(","ew",".","z",")",")",";","eA","=","mix","(","eA",",","ez",",","abs","(","ew",".","y",")",")",";","return","eA",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eD","(","inout","float","eC",")","{","eC","-=","0.5",";","eC","=","4.0","*","(","eC","*","eC","*","eC",")","+","0.5",";","}","void","eU","(","inout","vec3","eE",",","in","float","eF",",","in","vec3","eG",",","in","float","eH",",","in","vec4","eI",",","in","vec4","eJ",",","in","float","eK",",","in","float","eL",")","{","float","eM","=","eJ",".","w","*","eF",";","float","eN","=","exp","(","-","eM","*","eM",")",";","eN","=","clamp","(","eN",",","0.0",",","1.0",")",";","float","eO","=","max","(","eG",".","y",",","0.0",")",";","eF","=","max","(","eF","-","max","(","eH","/","eO",",","0.0",")",",","0.0",")",";","float","eP","=","eI",".","w","*","eF",";","float","eQ","=","1.0","-","eP",";","eQ","=","clamp","(","eQ",",","0.0",",","1.0",")",";","eQ","+=","max","(","eK",",","0.0",")",";","eD","(","eQ",")",";","if","(","eQ","<","eN",")","{","vec3","eR","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","eS","=","eI",".","rgb",";","eH","=","clamp","(","-","eH","*","0.03",",","0.0",",","0.8",")",";","vec3","eT","=","mix","(","eS",",","eR",",","min","(","eO",",","1.0",")",")",";","eT","=","mix","(","eT",",","vec3","(","0.0",")",",","eH",")","*","eL",";","eE","=","mix","(","eT",",","eE",",","eQ",")",";","}","if","(","eQ",">=","eN",")","{","eE","=","mix","(","eJ",".","rgb",",","eE",",","eN",")",";","}","}","void","fc","(","inout","vec3","eV",",","in","float","eW",",","in","float","eX",",","in","vec4","eY",",","in","float","eZ",")","{","float","e_","=","eY",".","w","*","eW",";","float","fa","=","1.0","-","e_",";","fa","=","clamp","(","fa",",","0.0",",","1.0",")",";","eD","(","fa",")",";","eX","=","clamp","(","-","eX","*","0.03",",","0.0",",","0.8",")",";","vec3","fb","=","mix","(","eY",".","rgb",",","vec3","(","0.0",")",",","eX",")","*","eZ",";","eV","=","mix","(","fb",",","eV",",","fa",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["struct","fd","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fl","(","vec3","fe",",","vec3","ff",",","vec3","fg",",","vec4","fh",",","float","fi",")","{","vec3","fj","=","normalize","(","fe","+","ff",")",";","float","fk","=","fh","[","0","]","*","max","(","dot","(","fg",",","fj",")",",","0.0",")","+","fh","[","1","]",";","return","pow","(","fk",",","fi",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","fw","(","vec3","fm",",","vec3","fn",",","vec3","fo",",","float","fp",")","{","vec3","fq","=","normalize","(","fm","+","fn",")",";","float","fr","=","max","(","dot","(","fo",",","fq",")",",","0.001",")",";","float","fs","=","max","(","dot","(","fo",",","fn",")",",","0.001",")",";","float","ft","=","max","(","dot","(","fo",",","fm",")",",","0.001",")",";","float","fu","=","tan","(","acos","(","fr",")",")",";","float","fv","=","max","(","fp",",","0.001",")",";","return","ft","*","(","1.0","/","(","4.0","*","M_PI","*","fv","*","fv",")",")","*","(","exp","(","-","(","fu","*","fu",")","/","(","fv","*","fv",")",")","/","(","sqrt","(","fs","*","ft",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","fE","(","vec3","fx",",","vec3","fy",",","vec3","fz",",","float","fA",",","float","fB",")","{","vec3","fC","=","normalize","(","fx","+","fy",")",";","float","fD","=","acos","(","dot","(","fC",",","fz",")",")",";","if","(","fD","<","fA",")","return","1.0",";","else","if","(","fD",">=","fA","+","fB","||","fB","==","0.0",")","return","0.0",";","else","return","1.0","-","(","fD","-","fA",")","/","fB",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","fY","(","float","fF",",","vec3","fG",",","vec3","fH",",","vec3","fI",",","float","fJ",",","inout","float","fK",")","{","if","(","fJ",">","0.0",")","{","float","fL","=","max","(","dot","(","fG",",","fI",")",",","0.0",")",";","float","fM","=","fJ","*","fJ",";","float","fN","=","1.0","-","0.5","*","(","fM","/","(","fM","+","0.33",")",")",";","vec3","fO","=","fH","-","fF","*","fG",";","vec3","fP","=","fI","-","fL","*","fG",";","if","(","length","(","fO",")","==","0.0","||","length","(","fP",")","==","0.0","||","abs","(","fF",")",">","1.0","||","abs","(","fL",")",">","1.0",")","fK","=","fK","*","fN",";","else","{","float","fQ","=","acos","(","fF",")",";","float","fR","=","acos","(","fL",")",";","vec3","fS","=","normalize","(","fO",")",";","vec3","fT","=","normalize","(","fP",")",";","float","fU",",","fV",";","fU","=","max","(","fQ",",","fR",")",";","fV","=","min","(","fQ",",","fR",")",";","fV","*=","0.95",";","float","fW","=","max","(","dot","(","fS",",","fT",")",",","0.0",")",";","float","fX","=","0.45","*","(","fM","/","(","fM","+","0.09",")",")",";","fK","=","fK","*","(","fN","+","(","fX","*","fW","*","sin","(","fU",")","*","tan","(","fV",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","ge","(","vec3","fZ",",","vec3","f_",",","float","ga",",","float","gb",",","out","float","gc",")","{","float","gd",";","if","(","ga","==","0.0",")","{","gc","=","1.0",";","}","else","{","gd","=","1.0","+","abs","(","dot","(","f_",",","fZ",")",")",";","gd","=","gb","+","(","1.0","-","gb",")","*","pow","(","gd",",","ga",")",";","gc","=","clamp","(","gd",",","0.0",",","1.0",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","gM","(","inout","fd","gf",",","vec3","gg",",","vec3","gh",",","vec3","gi",",","vec3","gj",",","vec3","gk",",","vec2","gl",",","vec2","gm",",","float","gn",",","vec3","go",",","vec3","gp",",","vec3","gq",",","vec4","gr",",","vec4","gs",",","float","gt",",","vec4","gu",")","{","vec3","gv","=","vec3","(","0.0",")",";","vec3","gw","=","gq","*","gn",";","float","gx","=","gs",".","z",";","if","(","gx","!=","-","1.0",")","{","gv","=","go","-","gi",";","float","gy","=","length","(","gv",")",";","gw","*=","gx","/","(","gx","+","gy","*","gy",")",";","gv","=","normalize","(","gv",")",";","float","gz","=","gs",".","x",";","float","gA","=","gs",".","y",";","if","(","gz",">","-","1.0",")","{","float","gB","=","dot","(","gv",",","gp",")",";","gB","*=","smoothstep","(","0.0",",","1.0",",","(","gB","-","gz",")","/","gA",")",";","gw","*=","gB",";","}","}","else","gv","=","gp",";","float","gC",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["ge","(","gj",",","gv",",","gm","[","0","]",",","gm","[","1","]",",","gC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gD","=","max","(","dot","(","gj",",","gv",")",",","0.0",")",";","gC","=","gr","[","0","]","*","gD","+","gr","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["fY","(","gD",",","gj",",","gv",",","gk",",","gm","[","0","]",",","gC",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","gE","=","fl","(","gv",",","gk",",","gj",",","gr",",","gl","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","gE","=","fw","(","gv",",","gk",",","gj",",","gl","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","gE","=","fE","(","gv",",","gk",",","gj",",","gl","[","0","]",",","gl","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gE","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","gv",",","gj",")","*","dot","(","gk",",","gj",")","<","0.0",")","{","float","gF","=","gu",".","x",";","float","gG","=","gu",".","y",";","float","gH","=","gu",".","z",";","float","gI","=","gu",".","w",";","float","gJ","=","clamp","(","abs","(","dot","(","gv",",","gj",")",")",",","0.0",",","1.0",")",";","float","gK","=","clamp","(","dot","(","gk",",","-","gv",")",",","0.0",",","1.0",")",";","float","gL","=","pow","(","gK",",","gG",")",";","gf",".","a","+=","gt","*","vec4","(","gw","*","gJ","*","pow","(","gg",",","vec3","(","gF",")",")",",","1.0",")",";","gf",".","a","+=","gH","*","mix","(","vec4","(","gg",",","1.0",")",",","vec4","(","1.0",")",",","gI",")","*","gt","*","vec4","(","gw","*","gJ","*","vec3","(","gL",")",",","1.0",")",";","}","else","{","gf",".","b","+=","gw","*","gh","*","gE",";","gf",".","a","+=","vec4","(","gw","*","gg","*","gC",",","gE",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gf",".","b","+=","gw","*","gh","*","gE",";","gf",".","a","+=","vec4","(","gw","*","gg","*","gC",",","gE",")",";"]}]}}]},{type:"textline",tokens:["}","fd","hy","(","vec3","gN",",","vec3","gO",",","vec3","gP",",","vec3","gQ",",","vec3","gR",",","vec3","gS",",","vec3","gT",",","vec2","gU",",","vec2","gV",",","float","gW",",","vec3","gX","[","NUM_LIGHTS","]",",","vec3","gY","[","NUM_LIGHTS","]",",","vec3","gZ","[","NUM_LIGHTS","]",",","vec4","g_","[","NUM_LIGHTS","]",",","vec4","ha","[","NUM_LIGHTS","]",",","float","hb",",","vec4","hc",")","{","fd","hd",";","hd",".","a","=","vec4","(","gN","+","gP","*","gO",",","0.0",")",";","hd",".","b","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gM","(","hd",",","gP",",","gQ",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX","[","0","]",",","gY","[","0","]",",","gZ","[","0","]",",","g_","[","0","]",",","ha","[","0","]",",","hb",",","hc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["gM","(","hd",",","gP",",","gQ",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX","[","1","]",",","gY","[","1","]",",","gZ","[","1","]",",","g_","[","1","]",",","ha","[","1","]",",","hb",",","hc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["gM","(","hd",",","gP",",","gQ",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX","[","2","]",",","gY","[","2","]",",","gZ","[","2","]",",","g_","[","2","]",",","ha","[","2","]",",","hb",",","hc",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["gM","(","hd",",","gP",",","gQ",",","gR",",","gS",",","gT",",","gU",",","gV",",","gW",",","gX","[","3","]",",","gY","[","3","]",",","gZ","[","3","]",",","g_","[","3","]",",","ha","[","3","]",",","hb",",","hc",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","he","=","0",";","he","<","NUM_LIGHTS",";","he","++",")","{","vec4","hf","=","g_","[","he","]",";","vec4","hg","=","ha","[","he","]",";","vec3","hh","=","vec3","(","0.0",")",";","vec3","hi","=","gZ","[","he","]",";","hi","*=","gW",";","float","hj","=","hg",".","z",";","if","(","hj","!=","-","1.0",")","{","hh","=","gX","[","he","]","-","gR",";","float","hk","=","length","(","hh",")",";","hi","*=","hj","/","(","hj","+","hk","*","hk",")",";","hh","=","normalize","(","hh",")",";","float","hl","=","hg",".","x",";","float","hm","=","hg",".","y",";","if","(","hl",">","-","1.0",")","{","float","hn","=","dot","(","hh",",","gY","[","he","]",")",";","hn","*=","smoothstep","(","0.0",",","1.0",",","(","hn","-","hl",")","/","hm",")",";","hi","*=","hn",";","}","}","else","hh","=","gY","[","he","]",";","float","ho",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["ge","(","gS",",","hh",",","gV","[","0","]",",","gV","[","1","]",",","ho",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","hp","=","max","(","dot","(","gS",",","hh",")",",","0.0",")",";","ho","=","hf","[","0","]","*","hp","+","hf","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["fY","(","hp",",","gS",",","hh",",","gT",",","gV","[","0","]",",","ho",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hq","=","fl","(","hh",",","gT",",","gS",",","hf",",","gU","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hq","=","fw","(","hh",",","gT",",","gS",",","gU","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hq","=","fE","(","hh",",","gT",",","gS",",","gU","[","0","]",",","gU","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","hq","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","hh",",","gS",")","*","dot","(","gT",",","gS",")","<","0.0",")","{","float","hr","=","hc",".","x",";","float","hs","=","hc",".","y",";","float","ht","=","hc",".","z",";","float","hu","=","hc",".","w",";","float","hv","=","clamp","(","abs","(","dot","(","hh",",","gS",")",")",",","0.0",",","1.0",")",";","float","hw","=","clamp","(","dot","(","gT",",","-","hh",")",",","0.0",",","1.0",")",";","float","hx","=","pow","(","hw",",","hs",")",";","hd",".","a","+=","hb","*","vec4","(","hi","*","hv","*","pow","(","gP",",","vec3","(","hr",")",")",",","1.0",")",";","hd",".","a","+=","ht","*","mix","(","vec4","(","gP",",","1.0",")",",","vec4","(","1.0",")",",","hu",")","*","hb","*","vec4","(","hi","*","hv","*","vec3","(","hx",")",",","1.0",")",";","}","else","{","hd",".","b","+=","hi","*","gQ","*","hq",";","hd",".","a","+=","vec4","(","hi","*","gP","*","ho",",","hq",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hd",".","b","+=","hi","*","gQ","*","hq",";","hd",".","a","+=","vec4","(","hi","*","gP","*","ho",",","hq",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","hd",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","hA","(","vec4","hz",")","{","return","hz","-","floor","(","hz","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","hA","(","vec3","hB",")","{","return","hB","-","floor","(","hB","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","hA","(","vec2","hC",")","{","return","hC","-","floor","(","hC","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","hE","(","vec4","hD",")","{","return","hD","-","floor","(","hD","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","hG","(","vec4","hF",")","{","return","hA","(","(","34.0","*","hF","+","5.0",")","*","hF",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","hS","(","vec2","hH",")","{","vec2","hI","=","hA","(","floor","(","hH",")",")",";","vec2","hJ","=","fract","(","hH",")",";","vec4","hK","=","hJ",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","hL","=","hJ",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","hM","=","hG","(","hI",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","hM","=","hG","(","hM","+","hI",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","hN","=","hE","(","hM",")","*","K","+","K2",";","vec4","hO","=","hE","(","floor","(","hM","*","K",")",")","*","K","+","K2",";","vec4","hP","=","hK","+","JITTER","*","hN",";","vec4","hQ","=","hL","+","JITTER","*","hO",";","vec4","hR","=","hP","*","hP","+","hQ","*","hQ",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["hR",".","xy","=","min","(","hR",".","xy",",","hR",".","zw",")",";","hR",".","x","=","min","(","hR",".","x",",","hR",".","y",")",";","return","hR",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hR",".","xy","=","(","hR",".","x","<","hR",".","y",")","?","hR",".","xy",":","hR",".","yx",";","hR",".","xz","=","(","hR",".","x","<","hR",".","z",")","?","hR",".","xz",":","hR",".","zx",";","hR",".","xw","=","(","hR",".","x","<","hR",".","w",")","?","hR",".","xw",":","hR",".","wx",";","hR",".","y","=","min","(","hR",".","y",",","hR",".","z",")",";","hR",".","y","=","min","(","hR",".","y",",","hR",".","w",")",";","return","sqrt","(","hR",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","ih","(","vec2","hT",",","float","hU",")","{","vec2","hV","=","hA","(","floor","(","hT",")",")",";","vec2","hW","=","fract","(","hT",")",";","vec4","hX","=","hW",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","hY","=","hW",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","hZ","=","hG","(","hV",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","hZ","=","hG","(","hZ","+","hV",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","h_","=","hE","(","hZ",")","*","K","+","K2",";","vec4","ia","=","hE","(","floor","(","hZ","*","K",")",")","*","K","+","K2",";","vec4","ib","=","hX","+","JITTER","*","h_",";","vec4","ic","=","hY","+","JITTER","*","ia",";","vec4","id","=","ib","*","ib","+","ic","*","ic",";","ib","+=","hU",";","ic","+=","hU",";","vec4","ie","=","ib","*","ib","+","ic","*","ic",";","ib","+=","hU",";","ic","+=","hU",";","vec4","ig","=","ib","*","ib","+","ic","*","ic",";","id",".","xy","=","min","(","id",".","xy",",","id",".","zw",")",";","id",".","x","=","min","(","id",".","x",",","id",".","y",")",";","ie",".","xy","=","min","(","ie",".","xy",",","ie",".","zw",")",";","ie",".","x","=","min","(","ie",".","x",",","ie",".","y",")",";","ig",".","xy","=","min","(","ig",".","xy",",","ig",".","zw",")",";","ig",".","x","=","min","(","ig",".","x",",","ig",".","y",")",";","return","mat3","(","id",".","xx",",","0.0",",","ie",".","xx",",","0.0",",","ig",".","xx",",","0.0",")",";","}","vec3","ij","(","vec3","ii",")","{","return","hA","(","(","(","ii","*","34.0",")","+","1.0",")","*","ii",")",";","}","float","iy","(","vec2","ik",")","{","const","vec4","il","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","im","=","floor","(","ik","+","dot","(","ik",",","il",".","yy",")",")",";","vec2","io","=","ik","-","im","+","dot","(","im",",","il",".","xx",")",";","vec2","ip",";","ip","=","(","io",".","x",">","io",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","iq","=","io",".","xyxy","+","il",".","xxzz",";","iq",".","xy","-=","ip",";","im","=","hA","(","im",")",";","vec3","ir","=","ij","(","ij","(","im",".","y","+","vec3","(","0.0",",","ip",".","y",",","1.0",")",")","+","im",".","x","+","vec3","(","0.0",",","ip",".","x",",","1.0",")",")",";","vec3","is","=","max","(","0.5","-","vec3","(","dot","(","io",",","io",")",",","dot","(","iq",".","xy",",","iq",".","xy",")",",","dot","(","iq",".","zw",",","iq",".","zw",")",")",",","0.0",")",";","is","=","is","*","is",";","is","=","is","*","is",";","vec3","it","=","2.0","*","fract","(","ir","*","il",".","www",")","-","1.0",";","vec3","iu","=","abs","(","it",")","-","0.5",";","vec3","iv","=","floor","(","it","+","0.5",")",";","vec3","iw","=","it","-","iv",";","is","*=","1.79284291400159","-","0.85373472095314","*","(","iw","*","iw","+","iu","*","iu",")",";","vec3","ix",";","ix",".","x","=","iw",".","x","*","io",".","x","+","iu",".","x","*","io",".","y",";","ix",".","yz","=","iw",".","yz","*","iq",".","xz","+","iu",".","yz","*","iq",".","yw",";","return","130.0","*","dot","(","is",",","ix",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","iZ","(","inout","vec3","iz",",","float","iA",",","float","iB",",","float","iC",",","vec3","iD",",","vec3","iE",",","vec3","iF",",","vec4","iG",",","vec3","iH",",","float","iI",")","{","if","(","iI",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","iJ","=","iG",";","vec3","iK","=","iH","+","iD",";","iK",".","xz","=","10.0","*","sin","(","0.1","*","iK",".","xz",")",";","vec3","iL","=","iK","+","2.0","*","cross","(","-","iJ",".","xyz",",","cross","(","-","iJ",".","xyz",",","iK",")","+","iJ",".","w","*","iK",")",";","vec2","iM","=","iL",".","xz",";","vec3","iN","=","iE",";","float","iO","=","max","(","dot","(","iD",",","iN",")",",","0.0",")",";","float","iP","=","0.025",";","iM",".","s","+=","0.5","*","sin","(","dot","(","iH","+","iB",",","vec3","(","1.0",")",")",")",";","iM",".","t","+=","0.7","*","(","-","sin","(","dot","(","iH","-","iB",",","vec3","(","-","0.7",")",")",")",")",";","iM",".","st","+=","0.23","*","cos","(","4.0","*","iA","-","CAUST_SPEED",".","x","*","iB",")",";","iM",".","st","+=","3.0","*","sin","(","iA","-","0.3","*","CAUST_SPEED",".","y","*","iB",")",";","float","iQ","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","iA",",","0.0",")",")",";","mat3","iR","=","ih","(","(","iM","/","iQ",")",",","iP",")",";","float","iS","=","(","iR","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","iT","=","(","iR","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","iU","=","(","iR","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","iV","=","CAUST_BRIGHT","*","vec3","(","iS",",","iT",",","iU",")",";","float","iW","=","iC","*","iO",";","float","iX","=","max","(","sign","(","iA",")",",","0.0",")",";","iW","=","min","(","iW","+","0.5","*","sign","(","-","iD",".","y",")","*","iX",",","1.0",")",";","iW","*=","1.0","-","iX","*","(","0.1","*","iA",")",";","iV","*=","iW",";","iV","*=","iV",";","float","iY","=","min","(","-","iA","+","10.0",",","1.0",")",";","iz","+=","max","(","(","2.0","*","iF","*","iV",")","*","iY",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","jm","(","in","vec3","jf",",","in","vec3","jg",",","in","float","jh",",","in","float","ji",")","{","vec3","jj","=","normalize","(","jg","+","jf",")",";","float","jk","=","1.0","-","dot","(","jf",",","jj",")",";","float","jl","=","ji","+","(","1.0","-","ji",")","*","pow","(","jk",",","jh",")",";","return","jl",";","}","void","jB","(","inout","vec3","jn",",","in","vec3","jo",",","in","vec3","jp",",","in","float","jq",",","in","float","jr",",","in","float","js",")","{","vec3","jt","=","reflect","(","-","jo",",","jp",")",";","float","ju","=","jm","(","jo",",","jt",",","jq",",","jr",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jv","=","u_refl_plane",".","xyz","*","dot","(","jp",",","u_refl_plane",".","xyz",")",";","vec3","jw","=","jp","-","jv",";","vec2","jx","=","(","u_view_matrix_frag","*","vec4","(","jw",",","0.0",")",")",".","xy",";","vec2","jy","=","cz",".","xy","/","cz",".","z",";","jy","+=","jx","*","REFL_BUMP",";","vec3","jz","=","texture2D","(","u_reflectmap",",","jy",")",".","rgb",";","eh","(","jz",".","rgb",")",";","jn","=","mix","(","jn",",","jz",",","js","*","ju",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jA","=","textureCube","(","u_mirrormap",",","jt",")",".","xyz",";","eh","(","jA",".","rgb",")",";","jn","=","mix","(","jn",",","jA",",","u_mirror_factor","*","ju",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","jH","(","in","float","jC",",","inout","vec2","jD",",","in","vec2","jE",")","{","vec4","jF","=","texture2D","(","u_scene_depth",",","jD",")",";","float","jG","=","cl","(","jF",")",";","if","(","jG","<","je",")","{","jD","=","jE",";","return","jC",";","}","else","{","return","jG",";","}","return","jC",";","}","vec3","jP","(","in","vec3","jI",",","in","vec2","jJ",")","{","vec2","jK","=","jI",".","xy","/","jI",".","z",";","vec2","jL","=","jK","+","jJ",";","vec4","jM","=","texture2DProj","(","u_scene_depth",",","jI",")",";","float","jN","=","cl","(","jM",")",";","jH","(","jN",",","jL",",","jK",")",";","vec3","jO","=","texture2D","(","u_refractmap",",","jL",")",".","rgb",";","eh","(","jO",")",";","return","jO",";","}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","kB","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","kI","(","inout","float","kC",",","float","kD",",","vec2","kE",",","vec2","kF",")","{","float","kG","=","kF",".","x","-","kE",".","x",";","float","kH","=","(","kD","-","kE",".","x",")","/","kG",";","kC","=","mix","(","kC",",","kF",".","y",",","clamp","(","kH",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","kP","(","inout","vec3","kJ",",","float","kK",",","vec4","kL",",","vec4","kM",")","{","float","kN","=","kM",".","x","-","kL",".","x",";","float","kO","=","(","kK","-","kL",".","x",")","/","kN",";","kJ","=","mix","(","kJ",",","kM",".","yzw",",","clamp","(","kO",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","kW","(","float","kQ",",","float","kR",",","vec2","kS","[","SIZE_RAMP_LENGTH","]",")","{","float","kT","=","kQ","/","kR",";","float","kU","=","kS","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["kI","(","kU",",","kT",",","kS","[","0","]",",","kS","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["kI","(","kU",",","kT",",","kS","[","1","]",",","kS","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["kI","(","kU",",","kT",",","kS","[","2","]",",","kS","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","kV","=","1",";","kV","<","SIZE_RAMP_LENGTH",";","kV","++",")","kI","(","kU",",","kT",",","kS","[","kV","-","1","]",",","kS","[","kV","]",")",";"]}]}}]},{type:"textline",tokens:["return","kU",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lc","(","float","kX",",","float","kY",",","vec4","kZ","[","COLOR_RAMP_LENGTH","]",")","{","float","k_","=","kX","/","kY",";","vec3","la","=","kZ","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["kP","(","la",",","k_",",","kZ","[","0","]",",","kZ","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["kP","(","la",",","k_",",","kZ","[","1","]",",","kZ","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["kP","(","la",",","k_",",","kZ","[","2","]",",","kZ","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","lb","=","1",";","lb","<","COLOR_RAMP_LENGTH",";","lb","++",")","kP","(","la",",","k_",",","kZ","[","lb","-","1","]",",","kZ","[","lb","]",")",";"]}]}}]},{type:"textline",tokens:["return","la",";","}"]}]}}]},{type:"textline",tokens:["float","ll","(","float","ld",",","float","le",",","float","lf",",","float","lg",")","{","float","lh","=","max","(","0.01",",","min","(","le",",","lf",")",")",";","float","li","=","max","(","0.01",",","min","(","le",",","lg",")",")",";","float","lj","=","le","-","li",";","float","lk","=","clamp","(","ld","/","lh",",","0.0",",","1.0",")","-","step","(","lj",",","ld",")","*","(","ld","-","lj",")","/","li",";","return","lk",";","}","kB","lr","(",")","{","kB","lm",";","float","ln",";","if","(","u_p_cyclic","==","1",")","{","ln","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","ln","<","0.0",")","ln","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","ln","=","u_p_time","-","a_p_delay",";","}","if","(","ln","<","0.0","||","ln",">=","a_p_lifetime",")","{","lm",".","a","=","0.0001",";","lm",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","ln","<","0.0","||","ln",">=","a_p_lifetime",")",")","{","vec3","lo","=","a_position",";","vec3","lp","=","a_normal",";","lo","+=","u_p_nfactor","*","ln","*","lp",";","lo","+=","a_p_vels",".","xyz","*","ln",";","lo",".","y","-=","u_p_gravity","*","ln","*","ln","/","2.0",";","float","lq","=","max","(","u_p_mass",",","EPSILON",")",";","lo","+=","(","u_p_wind","/","lq",")","*","ln","*","ln","/","2.0",";","lm",".","b","=","lo",";","lm",".","e","=","a_p_vels",".","w","*","ln",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["lm",".","a","=","kW","(","ln",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lm",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["lm",".","d","=","lc","(","ln",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lm",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["lm",".","c","=","ll","(","ln",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","lm",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","lE","(","in","sampler2D","lx",",","in","vec2","ly",",","in","vec2","lz",")","{","float","lA","=","texture2D","(","lx",",","ly",")",".","r",";","float","lB","=","lz",".","x",";","float","lC","=","lz",".","y",";","float","lD","=","2.0","*","lB","/","(","lB","+","lC","-","(","2.0","*","lA","-","1.0",")","*","(","lC","-","lB",")",")",";","return","lD",";","}"]}]}}