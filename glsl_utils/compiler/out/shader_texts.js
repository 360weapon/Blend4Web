b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cf","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cf","=","mix","(","cf",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cg","=","vec3","(","0.0",")",";","vec3","ch","=","vec3","(","0.0",")",";","vec3","ci","=","vec3","(","0.0",")",";","bn","(","cf",",","cg",",","ch",",","ci",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ck","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","mat4","cl","=","ab","(","u_camera_eye",",","ck",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","cl","=","cl","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cm",")",";"]}]}}]},{type:"textline",tokens:["b","cn","=","ai","(","cf","-","cj",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cl",")",";","cn",".","b","=","ck",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","cn","=","ai","(","cf",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","cn",".","a",",","cn",".","b",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cn",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","dd","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","dd","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","dd","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cj","(","co",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cj","(","co",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["float","de","=","co",";","float","df","=","de","*","de",";","gl_FragColor","=","vec4","(","de",",","df",",","0.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","cX","(","cu",".","z",",","u_shadow_visibility_falloff",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","co",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","d_","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["d_","=","mix","(","d_",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ea","=","vec3","(","0.0",")",";","vec3","eb","=","vec3","(","0.0",")",";","vec3","ec","=","vec3","(","0.0",")",";","bn","(","d_",",","ea",",","eb",",","ec",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ed","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ed","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","ee","=","dT","(","d_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ed",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ef","=","(","u_model_matrix","*","vec4","(","ed",",","1.0",")",")",".","xyz",";","mat4","eg","=","ab","(","u_camera_eye",",","ef",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","eh","=","(","u_model_matrix","*","vec4","(","ed",",","1.0",")",")",".","xyz",";","eg","=","eg","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","eh",")",";"]}]}}]},{type:"textline",tokens:["b","ee","=","ai","(","d_","-","ed",",","ed",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","eg",")",";","ee",".","b","=","ef",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ee","=","ai","(","d_",",","ed",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ei","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","ee",".","a",",","ee",".","b",",","ei",")",";"]}]}}]},{type:"textline",tokens:["vec4","ej","=","u_view_matrix","*","vec4","(","ee",".","a",",","1.0",")",";","vec4","ek","=","u_proj_matrix","*","ej",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["ek",".","xy","+=","u_subpixel_jitter","*","ek",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","ee",".","a",")",";","cu","=","ej",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE","||","SHADOW_DST","==","SHADOW_DST_RGBA","||","SHADOW_DST","==","SHADOW_DST_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["co","=","-","ej",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ek",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","d_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","d_",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","d_",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","d_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","d_",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","d_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","d_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","d_",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","d_",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ea","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","eb","=","ab","(","u_camera_eye",",","ea",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["eb","=","eb","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["b","ec","=","ai","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","eb",")",";","ec",".","b","=","ea",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ec","=","ai","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","ed","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ec",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["d_","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d_","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["d_","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","ed",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","eh",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","ei",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","ej","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","ej","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","el","(","float","ek",")","{","return","ek","-","floor","(","ek","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","eu","(","inout","float","em",",","in","float","en","[","ej","]",",","in","float","eo",")","{","for","(","int","ep","=","NUM_RINGS",";","ep",">","0",";","ep","--",")","{","float","eq","=","40.0","*","en","[","ep","]",";","float","er","=","300.0","*","(","el","(","eq",")","-","0.005",")",";","float","es","=","eq",";","float","et","=","abs","(","es","*","(","u_halo_size","*","er","-","eo",")",")",";","em","+=","1.0","-","min","(","et",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","eD","(","inout","float","ev",",","in","float","ew","[","ej","]",",","in","float","ex",")","{","for","(","int","ey","=","NUM_LINES",";","ey",">","0",";","ey","--",")","{","float","ez","=","ew","[","ey","]",";","float","eA","=","ez",";","float","eB","=","1000.0","*","(","el","(","ez",")","-","0.005",")",";","float","eC","=","20.0","*","abs","(","eA","*","a",".","x","+","eB","*","a",".","y",")",";","ev","+=","1.0","-","min","(","eC",",","1.0",")",";","}","ev","*=","ex",";","}"]}]}}]},{type:"textline",tokens:["void","eK","(","inout","float","eE",",","in","vec2","eF",")","{","float","eG",",","eH",";","eH","=","atan","(","eF",".","y",",","eF",".","x",")",";","eH","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","eI","=","cos","(","eH",")",";","float","eJ","=","sin","(","eH",")",";","eH","=","(","eI","*","eF",".","x","+","eJ","*","eF",".","y",")","*","(","eI","*","eF",".","y","-","eJ","*","eF",".","x",")",";","eG","=","abs","(","eH",")",";","if","(","eG","<","1.0",")","{","eG","=","(","0.01","*","u_halo_size",")","/","(","eG",")",";","eE","*=","sqrt","(","min","(","eG",",","1.0",")",")",";","}","}","void","main","(",")","{","float","eL","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","eM","=","sqrt","(","eL",")",";","eL","=","max","(","1.0","-","eL",",","0.0",")",";","eL","=","pow","(","eL",",","u_halo_hardness",")",";","float","eN","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eO","[","ej","]",";","for","(","int","eP","=","0",";","eP","<","ej",";","eP","++",")","{","eO","[","eP","]","=","fract","(","ei","/","float","(","eP",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","eQ","=","0.0",";","eu","(","eQ",",","eO",",","eM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eR","=","0.0",";","eD","(","eR",",","eO",",","eL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eK","(","eL",",","a",")",";"]}]}}]},{type:"textline",tokens:["eL","*=","eN",";","vec3","eS","=","u_diffuse_color",".","rgb","*","eL",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["eQ","*=","eL",";","eS","+=","u_halo_rings_color","*","eQ",";","eL","+=","eQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["eR","*=","eN",";","eS","+=","u_halo_lines_color","*","eR",";","eL","+=","eR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["eL","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","eT","=","u_halo_stars_blend","*","(","eh",".","y","-","u_halo_stars_height",")",";","eL","*=","clamp","(","eT",",","0.0",",","1.0",")",";","eL","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ed","(","eS",")",";","eg","(","eS",",","eL",")",";","gl_FragColor","=","vec4","(","eS",",","eL",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","ei",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","eh",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","ej","=","a_position",";","a","=","a_halo_bb_vertex","*","2.0",";","ei","=","fract","(","ej",".","x","+","ej",".","y","+","ej",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ek","=","A","(","ej",",","u_view_matrix",")",";","mat4","el","=","u_view_matrix",";","el","[","3","]","[","0","]","=","0.0",";","el","[","3","]","[","1","]","=","0.0",";","el","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","ek","=","A","(","ej",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","em","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","en","=","ek","*","em",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","eo","=","u_proj_matrix","*","el","*","en",";","eo",".","z","=","0.99999","*","eo",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","en",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","eo","=","u_proj_matrix","*","u_view_matrix","*","en",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","eo",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","ej","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ej",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","iK",";","varying","vec3","iL",";","varying","vec3","iM",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","iN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","ji","=","iL",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jj","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","jk","=","iM",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","jk","=","jk",";","else","jk","=","-","jk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jl","=","cross","(","jk",",","iN",".","xyz",")","*","iN",".","w",";","mat3","jm","=","mat3","(","iN",".","xyz",",","jl",",","jk",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","jn","=","length","(","cu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","jn","<","10.0",")","{","float","jo","=","clamp","(","5.0","-","0.5","*","jn",",","0.0",",","1.0",")",";","float","jp","=","u_parallax_scale","*","jo",";","vec3","jq","=","normalize","(","iK","*","jm",")",";","float","jr","=","1.0","/","PARALLAX_STEPS",";","vec2","js","=","jq",".","xy","*","jp","/","(","PARALLAX_STEPS","*","jq",".","z",")",";","float","jt","=","1.0",";","float","ju","=","texture2D","(","u_normalmap0",",","jj",")",".","a",";","for","(","float","jv","=","1.0",";","jv","<=","PARALLAX_STEPS",";","jv","++",")","{","if","(","ju","<","jt",")","{","jt","-=","jr",";","jj","-=","js",";","ju","=","texture2D","(","u_normalmap0",",","jj",")",".","a",";","}","}","vec2","jw","=","jj","+","js",";","float","jx","=","texture2D","(","u_normalmap0",",","jw",")",".","a","-","(","jt","+","jr",")",";","float","jy","=","ju","-","jt",";","float","jz","=","jy","/","(","jy","-","jx",")",";","jj","=","jz","*","jw","+","(","1.0","-","jz",")","*","jj",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jA","=","texture2D","(","u_normalmap0",",","jj","+","u_time","*","u_normalmap0_uv_velocity",")",";","vec3","jB","=","jA",".","rgb","-","0.5",";","jB","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","jB",",","u_normal_factor",")",";","vec3","jC","=","jm","*","jB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jC","=","jk",";"]}]}}]},{type:"textline",tokens:["jC","=","normalize","(","jC",")",";","vec3","jD","=","normalize","(","iK",")",";","float","jE","=","0.5","*","jC",".","y","+","0.5",";","vec3","jF","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","jE",")",";","vec3","jG","=","u_ambient","*","jF",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jH","=","iO",";","eb","(","jH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jI","=","vec4","(","jH",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jI","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jJ","=","normalize","(","u_view_matrix_frag","*","vec4","(","jC",",","0.0",")",")",".","st",";","jJ","=","jJ","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jK","=","texture2D","(","u_colormap0",",","jj",")",";","eb","(","jK",".","rgb",")",";","vec4","jL",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["jL","=","texture2D","(","u_colormap1",",","jJ",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["jL","=","texture2D","(","u_colormap1",",","jj",")",";"]}]}}]},{type:"textline",tokens:["eb","(","jL",".","rgb",")",";","vec4","jM","=","texture2D","(","u_stencil0",",","jj",")",";","vec4","jN","=","mix","(","jK",",","jL",",","jM",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jN","=","texture2D","(","u_colormap0",",","jJ",")",";"]}]}},{type:"elif",expression:["TEXTURE_COORDS","==","TEXTURE_COORDS_UV"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jN","=","texture2D","(","u_colormap0",",","jj","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["eb","(","jN",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["jI",".","rgb","=","mix","(","jI",".","rgb",",","jN",".","rgb",",","u_diffuse_color_factor",")",";","jI",".","a","=","jN",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["jI",".","rgb","*=","mix","(","vec3","(","1.0",")",",","jN",".","rgb",",","u_diffuse_color_factor",")",";","jI",".","a","=","jN",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","jO","=","u_diffuse_intensity","*","jI",".","rgb",";","float","jP","=","dc","(","u_shadow_visibility_falloff",",","jO",")",";","vec3","jQ","=","u_emit","*","jI",".","rgb",";","vec3","jR","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jS","=","vec3","(","jI",".","a",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jS","=","texture2D","(","u_specmap",",","jj",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["eb","(","jS",".","rgb",")",";","jR","=","mix","(","jR",",","jS",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","jT","=","u_specular_params","[","0","]",";","float","jU","=","u_specular_params","[","1","]",";","vec3","jV","=","jT","*","jR",";","eW","jW","=","hi","(","jQ",",","jG",",","jO",",","jV",",","iL",",","jC",",","jD",",","jU",",","u_diffuse_params",",","jP",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","vec3","jX","=","jW",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["jh","(","jX",",","jD",",","jC",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","jB",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jh","(","jX",",","jD",",","jC",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","0.0",")",")",";"]}]}}]}]}}]},{type:"textline",tokens:["jX","+=","jW",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["jX","=","max","(","jX","-","sqrt","(","0.01","*","-","min","(","ji",",","0.0",")",")",",","0.5","*","jX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["iJ","(","jX",",","ji",",","u_time",",","jP",",","jC",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","iL",",","jn",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","jY","=","jI",".","a",";","if","(","jY","<","0.5",")","discard",";","jY","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jY","=","jI",".","a","+","jW",".","a",".","a","*","jV",".","r",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jY","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jZ","=","ev","(","u_cube_fog",",","jD",")",";","vec4","j_","=","vec4","(","jZ",",","u_fog_color_density",".","a",")",";","eb","(","j_",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","j_","=","u_fog_color_density",";","j_",".","rgb","*=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eM","(","jX",",","jn",",","jD",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","j_",",","ji",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eo","(","jX",",","jn",",","j_",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["jX","=","vec3","(","cv",".","a",")",";"]}]}}]},{type:"textline",tokens:["ed","(","jX",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","jX",",","jY",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jX",",","jY",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"define",name:"TEXCOORD",tokens:["(","TEXTURE_COLOR","&&","TEXTURE_COORDS","==","TEXTURE_COORDS_UV","||","TEXTURE_STENCIL_ALPHA_MASK","||","TEXTURE_SPEC","||","TEXTURE_NORM",")"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","iK",";","varying","vec3","iL",";","varying","vec3","iM",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","iN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","ji","=","a_position",";","vec3","jj","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jk","=","vec3","(","a_tangent",")",";","vec3","jl","=","a_tangent","[","3","]","*","cross","(","jj",",","jk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jk","=","vec3","(","0.0",")",";","vec3","jl","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ji","=","mix","(","ji",",","a_position_next",",","u_va_frame_factor",")",";","jj","=","mix","(","jj",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jm","=","vec3","(","a_tangent",")",";","vec3","jn","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","jm",")",";","jk","=","mix","(","jk",",","jm",",","u_va_frame_factor",")",";","jl","=","mix","(","jl",",","jn",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","ji",",","jk",",","jl",",","jj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","jp","=","dT","(","ji",",","jk",",","jl",",","jj",",","jo",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","(","u_model_matrix","*","vec4","(","jo",",","1.0",")",")",".","xyz",";","mat4","jr","=","ab","(","u_camera_eye",",","jq",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","js","=","(","u_model_matrix","*","vec4","(","jo",",","1.0",")",")",".","xyz",";","jr","=","jr","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","js",")",";"]}]}}]},{type:"textline",tokens:["b","jp","=","ai","(","ji","-","jo",",","jo",",","jk",",","jl",",","jj",",","jr",")",";","jp",".","b","=","jq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jp","=","ai","(","ji",",","jo",",","jk",",","jl",",","jj",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"textline",tokens:["float","jt","=","(","dot","(","cross","(","jp",".","e",",","jp",".","c",")",",","jp",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","iN","=","vec4","(","jp",".","c",",","jt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","jp","=","dT","(","ji",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jj",",","jo",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","(","u_model_matrix","*","vec4","(","jo",",","1.0",")",")",".","xyz",";","mat4","jr","=","ab","(","u_camera_eye",",","jq",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","js","=","(","u_model_matrix","*","vec4","(","jo",",","1.0",")",")",".","xyz",";","jr","=","jr","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","js",")",";"]}]}}]},{type:"textline",tokens:["b","jp","=","ai","(","ji","-","jo",",","jo",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jj",",","jr",")",";","jp",".","b","=","jq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jp","=","ai","(","ji",",","jo",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jj",",","u_model_matrix",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","jp",".","a",",","jp",".","b",",","jj",")",";"]}]}}]},{type:"textline",tokens:["iL","=","jp",".","a",";","iM","=","jp",".","e",";","iK","=","u_camera_eye","-","jp",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["iO","=","jp",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["iO","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","ju","=","u_view_matrix","*","vec4","(","jp",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cu","=","ju",";"]}]}}]},{type:"textline",tokens:["vec4","jv","=","u_proj_matrix","*","ju",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["jv",".","xy","+=","u_subpixel_jitter","*","jv",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","jv",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","jp",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","jw","=","jv",".","x",";","float","jx","=","jv",".","y",";","float","jy","=","jv",".","w",";","ct",".","x","=","(","jw","+","jy",")","/","2.0",";","ct",".","y","=","(","jx","+","jy",")","/","2.0",";","ct",".","z","=","jy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","jv",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","float","u_shadow_visibility_falloff",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADED","&&","WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec3","iL",";","varying","vec4","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iM",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","iN",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"textline",tokens:["float","ji","=","0.0",";","float","jj","=","1.0",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","js","(","vec3","jk",")","{","float","jl",",","jm",",","jn",",","jo",",","jp",",","jq",";","vec3","jr",";","jl","=","max","(","jk","[","0","]",",","max","(","jk","[","1","]",",","jk","[","2","]",")",")",";","jm","=","min","(","jk","[","0","]",",","min","(","jk","[","1","]",",","jk","[","2","]",")",")",";","jq","=","jl","-","jm",";","jp","=","jl",";","if","(","jl","!=","ji",")","jo","=","jq","/","jl",";","else","{","jo","=","ji",";","jn","=","ji",";","}","if","(","e","(","jo",",","ji",")",")","{","jn","=","ji",";","}","else","{","jr","=","(","vec3","(","jl",",","jl",",","jl",")","-","jk",".","xyz",")","/","jq",";","if","(","e","(","jk",".","x",",","jl",")",")","jn","=","jr","[","2","]","-","jr","[","1","]",";","else","if","(","e","(","jk",".","y",",","jl",")",")","jn","=","2.0","+","jr","[","0","]","-","jr","[","2","]",";","else","jn","=","4.0","+","jr","[","1","]","-","jr","[","0","]",";","jn","/=","6.0",";","if","(","jn","<","ji",")","jn","+=","jj",";","}","return","vec3","(","jn",",","jo",",","jp",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jD","(","vec3","jt",")","{","float","ju",",","jv",",","jw",",","jx",",","jy",",","jz",",","jA",",","jB",";","vec3","jC",";","jz","=","jt","[","0","]",";","jA","=","jt","[","1","]",";","jB","=","jt","[","2","]",";","if","(","e","(","jA",",","ji",")",")","{","jC","=","vec3","(","jB",",","jB",",","jB",")",";","}","else","{","if","(","e","(","jz",",","ji",")",")","jz","=","ji",";","jz","*=","6.0",";","ju","=","floor","(","jz",")",";","jv","=","jz","-","ju",";","jC","=","vec3","(","jv",",","jv",",","jv",")",";","jw","=","jB","*","(","jj","-","jA",")",";","jx","=","jB","*","(","jj","-","(","jA","*","jv",")",")",";","jy","=","jB","*","(","jj","-","(","jA","*","(","jj","-","jv",")",")",")",";","if","(","e","(","ju",",","ji",")",")","jC","=","vec3","(","jB",",","jy",",","jw",")",";","else","if","(","e","(","ju",",","jj",")",")","jC","=","vec3","(","jx",",","jB",",","jw",")",";","else","if","(","e","(","ju",",","2.0",")",")","jC","=","vec3","(","jw",",","jB",",","jy",")",";","else","if","(","e","(","ju",",","3.0",")",")","jC","=","vec3","(","jw",",","jx",",","jB",")",";","else","if","(","e","(","ju",",","4.0",")",")","jC","=","vec3","(","jy",",","jw",",","jB",")",";","else","jC","=","vec3","(","jB",",","jw",",","jx",")",";","}","return","jC",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jF","(","vec2","jE",")","{","return","vec3","(","jE","*","2.0","-","vec2","(","jj",",","jj",")",",","ji",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jH","(","vec3","jG",")","{","return","vec2","(","jG",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"kw",qualifier:["vec3"]},{type:"node_out",name:"kx",qualifier:["float"]},{type:"node_out",name:"ky",qualifier:["float"]},{type:"textline",tokens:["kw","=","normalize","(","kl",".","xyz",")",";","kx","=","abs","(","kl",".","z",")",";","ky","=","length","(","kl",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"kz",qualifier:["float"]},{type:"node_in",name:"kA",qualifier:["float"]},{type:"node_in",name:"kB",qualifier:["float"]},{type:"node_out",name:"kC",qualifier:["vec3"]},{type:"textline",tokens:["kC","=","vec3","(","kz",",","kA",",","kB",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"jI",qualifier:["varying","vec2"]},{type:"node_out",name:"kD",qualifier:["vec3"]},{type:"textline",tokens:["kD","=","jF","(","jI",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"jJ",qualifier:["varying","vec3"]},{type:"node_out",name:"kE",qualifier:["vec3"]},{type:"textline",tokens:["kE","=","jJ",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"jK",qualifier:["varying","float"]},{type:"node_out",name:"kF",qualifier:["float"]},{type:"textline",tokens:["kF","=","jK",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"jL",qualifier:["varying","vec2"]},{type:"node_out",name:"kG",qualifier:["float"]},{type:"node_out",name:"kH",qualifier:["float"]},{type:"textline",tokens:["kG","=","jL","[","0","]",";","kH","=","jL","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"jM",qualifier:["varying","vec3"]},{type:"node_out",name:"kI",qualifier:["float"]},{type:"node_out",name:"kJ",qualifier:["float"]},{type:"node_out",name:"kK",qualifier:["float"]},{type:"textline",tokens:["kI","=","jM","[","0","]",";","kJ","=","jM","[","1","]",";","kK","=","jM","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"kL",qualifier:["vec3"]},{type:"textline",tokens:["kL","=","kf",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"kM",qualifier:["float"]},{type:"textline",tokens:["kM","=","(","gl_FrontFacing",")","?","jj",":","ji",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"kN",qualifier:["vec3"]},{type:"textline",tokens:["kN","=","kj",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"kO",qualifier:["vec3"]},{type:"textline",tokens:["kO","=","vec3","(","kk",".","r",",","-","kk",".","b",",","kk",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"kP",qualifier:["float"]},{type:"node_in",name:"kQ",qualifier:["float"]},{type:"node_in",name:"kR",qualifier:["float"]},{type:"node_in",name:"kS",qualifier:["float"]},{type:"node_in",name:"kT",qualifier:["vec3"]},{type:"node_out",name:"kU",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","kV","=","js","(","kT",")",";","kV","[","0","]","+=","(","kP","-","0.5",")",";","if","(","kV","[","0","]",">","jj",")","kV","[","0","]","-=","jj",";","else","if","(","kV","[","0","]","<","ji",")","kV","[","0","]","+=","jj",";","kV","[","1","]","*=","kQ",";","if","(","kV","[","1","]",">","jj",")","kV","[","1","]","=","jj",";","else","if","(","kV","[","1","]","<","ji",")","kV","[","1","]","=","ji",";","kV","[","2","]","*=","kR",";","if","(","kV","[","2","]",">","jj",")","kV","[","2","]","=","jj",";","else","if","(","kV","[","2","]","<","ji",")","kV","[","2","]","=","ji",";","kU","=","mix","(","kT",",","jD","(","kV",")",",","kS",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"kW",qualifier:["float"]},{type:"node_in",name:"kX",qualifier:["vec3"]},{type:"node_out",name:"kY",qualifier:["vec3"]},{type:"textline",tokens:["kY","=","mix","(","kX",",","vec3","(","jj",")","-","kX",",","kW",")",";"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"jN",qualifier:["vec3"]},{type:"node_in",name:"kZ",qualifier:["vec3"]},{type:"node_out",name:"k_",qualifier:["vec3"]},{type:"node_out",name:"la",qualifier:["float"]},{type:"textline",tokens:["k_","=","jN",";","la","=","-","dot","(","kZ",",","jN",")",";"]}]}},{type:"node",name:"NORMAL_VIEW",group:{type:"group",parts:[{type:"node_in",name:"lb",qualifier:["vec3"]},{type:"node_out",name:"lc",qualifier:["vec3"]},{type:"textline",tokens:["lc","=","-","(","u_view_matrix_frag","*","vec4","(","lb",",","ji",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"jO",qualifier:["vec3"]},{type:"node_in",name:"ld",qualifier:["vec3"]},{type:"node_out",name:"le",qualifier:["vec3"]},{type:"textline",tokens:["le","=","ld","*","jO",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"jP",qualifier:["mat4"]},{type:"node_param",name:"jQ",qualifier:["const","float"]},{type:"node_param",name:"jR",qualifier:["const","float"]},{type:"node_param",name:"jS",qualifier:["vec3"]},{type:"node_param",name:"jT",qualifier:["vec3"]},{type:"node_in",name:"lf",qualifier:["vec3"]},{type:"node_out",name:"lg",qualifier:["vec3"]},{type:"textline",tokens:["lg","=","(","jP","*","vec4","(","lf",",","jj",")",")",".","xyz",";","if","(","jQ","==","jj",")","lg","=","max","(","lg",",","jS",")",";","if","(","jR","==","jj",")","lg","=","min","(","lg",",","jT",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"lh",qualifier:["float"]},{type:"node_in",name:"li",qualifier:["float"]},{type:"node_out",name:"lj",qualifier:["float"]},{type:"textline",tokens:["lj","=","lh","+","li",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"lk",qualifier:["float"]},{type:"node_in",name:"ll",qualifier:["float"]},{type:"node_out",name:"lm",qualifier:["float"]},{type:"textline",tokens:["lm","=","lk","-","ll",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"ln",qualifier:["float"]},{type:"node_in",name:"lo",qualifier:["float"]},{type:"node_out",name:"lp",qualifier:["float"]},{type:"textline",tokens:["lp","=","ln","*","lo",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"lq",qualifier:["float"]},{type:"node_in",name:"lr",qualifier:["float"]},{type:"node_out",name:"ls",qualifier:["float"]},{type:"textline",tokens:["ls","=","(","lr","!=","ji",")","?","lq","/","lr",":","ji",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"lt",qualifier:["float"]},{type:"node_in",name:"lu",qualifier:["float"]},{type:"node_out",name:"lv",qualifier:["float"]},{type:"textline",tokens:["lv","=","sin","(","lt",")",";","lu",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"lw",qualifier:["float"]},{type:"node_in",name:"lx",qualifier:["float"]},{type:"node_out",name:"ly",qualifier:["float"]},{type:"textline",tokens:["ly","=","cos","(","lw",")",";","lx",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"lz",qualifier:["float"]},{type:"node_in",name:"lA",qualifier:["float"]},{type:"node_out",name:"lB",qualifier:["float"]},{type:"textline",tokens:["lB","=","tan","(","lz",")",";","lA",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"lC",qualifier:["float"]},{type:"node_in",name:"lD",qualifier:["float"]},{type:"node_out",name:"lE",qualifier:["float"]},{type:"textline",tokens:["lE","=","(","lC","<=","jj","&&","lC",">=","-","jj",")","?","asin","(","lC",")",":","ji",";","lD",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"lF",qualifier:["float"]},{type:"node_in",name:"lG",qualifier:["float"]},{type:"node_out",name:"lH",qualifier:["float"]},{type:"textline",tokens:["lH","=","(","lF","<=","jj","&&","lF",">=","-","jj",")","?","acos","(","lF",")",":","ji",";","lG",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"lI",qualifier:["float"]},{type:"node_in",name:"lJ",qualifier:["float"]},{type:"node_out",name:"lK",qualifier:["float"]},{type:"textline",tokens:["lK","=","atan","(","lI",")",";","lJ",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"lL",qualifier:["float"]},{type:"node_in",name:"lM",qualifier:["float"]},{type:"node_out",name:"lN",qualifier:["float"]},{type:"textline",tokens:["if","(","lL","<","0.0","||","lL","==","0.0","&&","lM","==","0.0",")","lN","=","0.0",";","else","lN","=","pow","(","lL",",","lM",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"lO",qualifier:["float"]},{type:"node_in",name:"lP",qualifier:["float"]},{type:"node_out",name:"lQ",qualifier:["float"]},{type:"textline",tokens:["lQ","=","(","lO",">","ji","&&","lP",">","ji",")","?","log2","(","lO",")","/","log2","(","lP",")",":","ji",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"lR",qualifier:["float"]},{type:"node_in",name:"lS",qualifier:["float"]},{type:"node_out",name:"lT",qualifier:["float"]},{type:"textline",tokens:["lT","=","min","(","lR",",","lS",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"lU",qualifier:["float"]},{type:"node_in",name:"lV",qualifier:["float"]},{type:"node_out",name:"lW",qualifier:["float"]},{type:"textline",tokens:["lW","=","max","(","lU",",","lV",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"lX",qualifier:["float"]},{type:"node_in",name:"lY",qualifier:["float"]},{type:"node_out",name:"lZ",qualifier:["float"]},{type:"textline",tokens:["lZ","=","floor","(","lX","+","0.5",")",";","lY",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"l_",qualifier:["float"]},{type:"node_in",name:"ma",qualifier:["float"]},{type:"node_out",name:"mb",qualifier:["float"]},{type:"textline",tokens:["mb","=","(","l_","<","ma",")","?","jj",":","ji",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"mc",qualifier:["float"]},{type:"node_in",name:"md",qualifier:["float"]},{type:"node_out",name:"me",qualifier:["float"]},{type:"textline",tokens:["me","=","mc","+","md",";","me","=","(","mc",">","md",")","?","jj",":","ji",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"mf",qualifier:["float"]},{type:"node_in",name:"mg",qualifier:["float"]},{type:"node_out",name:"mh",qualifier:["float"]},{type:"textline",tokens:["mh","=","abs","(","mg",")",">","0.000001","?","mod","(","mf",",","mg",")",":","ji",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"mi",qualifier:["float"]},{type:"node_in",name:"mj",qualifier:["vec3"]},{type:"node_in",name:"mk",qualifier:["vec3"]},{type:"node_out",name:"ml",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mm","=","clamp","(","mi",",","ji",",","jj",")",";","ml","=","mix","(","mj",",","mk",",","mm",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"mn",qualifier:["float"]},{type:"node_in",name:"mo",qualifier:["vec3"]},{type:"node_in",name:"mp",qualifier:["vec3"]},{type:"node_out",name:"mq",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mr","=","clamp","(","mn",",","ji",",","jj",")",";","mq","=","mix","(","mo",",","mo","+","mp",",","mr",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"ms",qualifier:["float"]},{type:"node_in",name:"mt",qualifier:["vec3"]},{type:"node_in",name:"mu",qualifier:["vec3"]},{type:"node_out",name:"mv",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mw","=","clamp","(","ms",",","ji",",","jj",")",";","mv","=","mix","(","mt",",","mt","*","mu",",","mw",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"mx",qualifier:["float"]},{type:"node_in",name:"my",qualifier:["vec3"]},{type:"node_in",name:"mz",qualifier:["vec3"]},{type:"node_out",name:"mA",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mB","=","clamp","(","mx",",","ji",",","jj",")",";","mA","=","mix","(","my",",","my","-","mz",",","mB",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"mC",qualifier:["float"]},{type:"node_in",name:"mD",qualifier:["vec3"]},{type:"node_in",name:"mE",qualifier:["vec3"]},{type:"node_out",name:"mF",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mG","=","clamp","(","mC",",","ji",",","jj",")",";","float","mH","=","jj","-","mG",";","mF","=","vec3","(","jj",")","-","(","vec3","(","mH",")","+","mG","*","(","vec3","(","jj",")","-","mE",")",")","*","(","vec3","(","jj",")","-","mD",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"mI",qualifier:["float"]},{type:"node_in",name:"mJ",qualifier:["vec3"]},{type:"node_in",name:"mK",qualifier:["vec3"]},{type:"node_out",name:"mL",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mM","=","clamp","(","mI",",","ji",",","jj",")",";","float","mN","=","jj","-","mM",";","mL","=","mJ",";","if","(","mK",".","r","!=","ji",")","mL",".","r","=","mN","*","mL",".","r","+","mM","*","mL",".","r","/","mK",".","r",";","if","(","mK",".","g","!=","ji",")","mL",".","g","=","mN","*","mL",".","g","+","mM","*","mL",".","g","/","mK",".","g",";","if","(","mK",".","b","!=","ji",")","mL",".","b","=","mN","*","mL",".","b","+","mM","*","mL",".","b","/","mK",".","b",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"mO",qualifier:["float"]},{type:"node_in",name:"mP",qualifier:["vec3"]},{type:"node_in",name:"mQ",qualifier:["vec3"]},{type:"node_out",name:"mR",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mS","=","clamp","(","mO",",","ji",",","jj",")",";","mR","=","mix","(","mP",",","abs","(","mP","-","mQ",")",",","mS",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"mT",qualifier:["float"]},{type:"node_in",name:"mU",qualifier:["vec3"]},{type:"node_in",name:"mV",qualifier:["vec3"]},{type:"node_out",name:"mW",qualifier:["vec3"]},{type:"textline",tokens:["{","float","mX","=","clamp","(","mT",",","ji",",","jj",")",";","mW","=","min","(","mU",".","rgb",",","mV",".","rgb","*","mX",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"mY",qualifier:["float"]},{type:"node_in",name:"mZ",qualifier:["vec3"]},{type:"node_in",name:"m_",qualifier:["vec3"]},{type:"node_out",name:"na",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nb","=","clamp","(","mY",",","ji",",","jj",")",";","na","=","max","(","mZ",".","rgb",",","m_",".","rgb","*","nb",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"nc",qualifier:["float"]},{type:"node_in",name:"nd",qualifier:["vec3"]},{type:"node_in",name:"ne",qualifier:["vec3"]},{type:"node_out",name:"nf",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ng","=","clamp","(","nc",",","ji",",","jj",")",";","float","nh","=","jj","-","ng",";","nf","=","nd",";","if","(","nf",".","r","<","0.5",")","nf",".","r","*=","nh","+","2.0","*","ng","*","ne",".","r",";","else","nf",".","r","=","jj","-","(","nh","+","2.0","*","ng","*","(","jj","-","ne",".","r",")",")","*","(","jj","-","nf",".","r",")",";","if","(","nf",".","g","<","0.5",")","nf",".","g","*=","nh","+","2.0","*","ng","*","ne",".","g",";","else","nf",".","g","=","jj","-","(","nh","+","2.0","*","ng","*","(","jj","-","ne",".","g",")",")","*","(","jj","-","nf",".","g",")",";","if","(","nf",".","b","<","0.5",")","nf",".","b","*=","nh","+","2.0","*","ng","*","ne",".","b",";","else","nf",".","b","=","jj","-","(","nh","+","2.0","*","ng","*","(","jj","-","ne",".","b",")",")","*","(","jj","-","nf",".","b",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"ni",qualifier:["float"]},{type:"node_in",name:"nj",qualifier:["vec3"]},{type:"node_in",name:"nk",qualifier:["vec3"]},{type:"node_out",name:"nl",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nm","=","clamp","(","ni",",","ji",",","jj",")",";","nl","=","nj",";","if","(","nl",".","r","!=","ji",")","{","float","nn","=","jj","-","nm","*","nk",".","r",";","if","(","nn","<=","ji",")","nl",".","r","=","jj",";","else","if","(","(","nn","=","nl",".","r","/","nn",")",">","jj",")","nl",".","r","=","jj",";","else","nl",".","r","=","nn",";","}","if","(","nl",".","g","!=","ji",")","{","float","no","=","jj","-","nm","*","nk",".","g",";","if","(","no","<=","ji",")","nl",".","g","=","jj",";","else","if","(","(","no","=","nl",".","g","/","no",")",">","jj",")","nl",".","g","=","jj",";","else","nl",".","g","=","no",";","}","if","(","nl",".","b","!=","ji",")","{","float","np","=","jj","-","nm","*","nk",".","b",";","if","(","np","<=","ji",")","nl",".","b","=","jj",";","else","if","(","(","np","=","nl",".","b","/","np",")",">","jj",")","nl",".","b","=","jj",";","else","nl",".","b","=","np",";","}","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"nq",qualifier:["float"]},{type:"node_in",name:"nr",qualifier:["vec3"]},{type:"node_in",name:"ns",qualifier:["vec3"]},{type:"node_out",name:"nt",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nu","=","clamp","(","nq",",","ji",",","jj",")",";","float","nv","=","jj","-","nu",";","float","nw",";","nt","=","nr",";","nw","=","nv","+","nu","*","ns",".","r",";","if","(","nw","<=","ji",")","nt",".","r","=","ji",";","else","if","(","(","nw","=","(","jj","-","(","jj","-","nt",".","r",")","/","nw",")",")","<","ji",")","nt",".","r","=","ji",";","else","if","(","nw",">","jj",")","nt",".","r","=","jj",";","else","nt",".","r","=","nw",";","nw","=","nv","+","nu","*","ns",".","g",";","if","(","nw","<=","ji",")","nt",".","g","=","ji",";","else","if","(","(","nw","=","(","jj","-","(","jj","-","nt",".","g",")","/","nw",")",")","<","ji",")","nt",".","g","=","ji",";","else","if","(","nw",">","jj",")","nt",".","g","=","jj",";","else","nt",".","g","=","nw",";","nw","=","nv","+","nu","*","ns",".","b",";","if","(","nw","<=","ji",")","nt",".","b","=","ji",";","else","if","(","(","nw","=","(","jj","-","(","jj","-","nt",".","b",")","/","nw",")",")","<","ji",")","nt",".","b","=","ji",";","else","if","(","nw",">","jj",")","nt",".","b","=","jj",";","else","nt",".","b","=","nw",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"nx",qualifier:["float"]},{type:"node_in",name:"ny",qualifier:["vec3"]},{type:"node_in",name:"nz",qualifier:["vec3"]},{type:"node_out",name:"nA",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nB","=","clamp","(","nx",",","ji",",","jj",")",";","vec3","nC",",","nD",",","nE",";","nA","=","ny",";","nD","=","js","(","nz",")",";","if","(","nD",".","y","!=","ji",")","{","nC","=","js","(","nA",")",";","nC",".","x","=","nD",".","x",";","nE","=","jD","(","nC",")",";","nA","=","mix","(","nA",",","nE",",","nB",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"nF",qualifier:["float"]},{type:"node_in",name:"nG",qualifier:["vec3"]},{type:"node_in",name:"nH",qualifier:["vec3"]},{type:"node_out",name:"nI",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nJ","=","clamp","(","nF",",","ji",",","jj",")",";","float","nK","=","jj","-","nJ",";","nI","=","nG",";","vec3","nL",",","nM",";","nL","=","js","(","nI",")",";","if","(","nL",".","y","!=","ji",")","{","nM","=","js","(","nH",")",";","nL",".","y","=","nK","*","nL",".","y","+","nJ","*","nM",".","y",";","nI","=","jD","(","nL",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"nN",qualifier:["float"]},{type:"node_in",name:"nO",qualifier:["vec3"]},{type:"node_in",name:"nP",qualifier:["vec3"]},{type:"node_out",name:"nQ",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nR","=","clamp","(","nN",",","ji",",","jj",")",";","float","nS","=","jj","-","nR",";","vec3","nT",",","nU",";","nT","=","js","(","nO",")",";","nU","=","js","(","nP",")",";","nT",".","z","=","nS","*","nT",".","z","+","nR","*","nU",".","z",";","nQ","=","jD","(","nT",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"nV",qualifier:["float"]},{type:"node_in",name:"nW",qualifier:["vec3"]},{type:"node_in",name:"nX",qualifier:["vec3"]},{type:"node_out",name:"nY",qualifier:["vec3"]},{type:"textline",tokens:["{","float","nZ","=","clamp","(","nV",",","ji",",","jj",")",";","vec3","n_",",","oa",",","ob",";","nY","=","nW",";","oa","=","js","(","nX",")",";","if","(","oa",".","y","!=","ji",")","{","n_","=","js","(","nY",")",";","n_",".","x","=","oa",".","x",";","n_",".","y","=","oa",".","y",";","ob","=","jD","(","n_",")",";","nY","=","mix","(","nY",",","ob",",","nZ",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"oc",qualifier:["float"]},{type:"node_in",name:"od",qualifier:["vec3"]},{type:"node_in",name:"oe",qualifier:["vec3"]},{type:"node_out",name:"of",qualifier:["vec3"]},{type:"textline",tokens:["{","float","og","=","clamp","(","oc",",","ji",",","jj",")",";","float","oh","=","jj","-","og",";","vec3","oi","=","vec3","(","jj",")",";","vec3","oj","=","oi","-","(","oi","-","oe",")","*","(","oi","-","od",")",";","of","=","oh","*","od","+","og","*","(","(","oi","-","od",")","*","oe","*","od","+","od","*","oj",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"ok",qualifier:["float"]},{type:"node_in",name:"ol",qualifier:["vec3"]},{type:"node_in",name:"om",qualifier:["vec3"]},{type:"node_out",name:"on",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oo","=","clamp","(","ok",",","ji",",","jj",")",";","on","=","ol",";","if","(","om",".","r",">","0.5",")","on",".","r","=","ol",".","r","+","oo","*","(","2.0","*","(","om",".","r","-","0.5",")",")",";","else","on",".","r","=","ol",".","r","+","oo","*","(","2.0","*","(","om",".","r",")","-","jj",")",";","if","(","om",".","g",">","0.5",")","on",".","g","=","ol",".","g","+","oo","*","(","2.0","*","(","om",".","g","-","0.5",")",")",";","else","on",".","g","=","ol",".","g","+","oo","*","(","2.0","*","(","om",".","g",")","-","jj",")",";","if","(","om",".","b",">","0.5",")","on",".","b","=","ol",".","b","+","oo","*","(","2.0","*","(","om",".","b","-","0.5",")",")",";","else","on",".","b","=","ol",".","b","+","oo","*","(","2.0","*","(","om",".","b",")","-","jj",")",";","on","=","clamp","(","on",",","ji",",","jj",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"op",qualifier:["vec3"]},{type:"node_in",name:"oq",qualifier:["float"]},{type:"textline",tokens:["kq","=","op",";","kv","=","oq",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"jU",qualifier:["const","vec3"]},{type:"node_param",name:"jV",qualifier:["const","vec3"]},{type:"node_param",name:"jW",qualifier:["const","float"]},{type:"node_in",name:"or",qualifier:["vec3"]},{type:"node_in",name:"os",qualifier:["float"]},{type:"node_in",name:"ot",qualifier:["vec3"]},{type:"node_in",name:"ou",qualifier:["vec3"]},{type:"node_out",name:"ov",qualifier:["vec3"]},{type:"node_out",name:"ow",qualifier:["float"]},{type:"node_out",name:"ox",qualifier:["vec3"]},{type:"textline",tokens:["or","=","clamp","(","or",",","ji",",","jj",")",";","os","=","clamp","(","os",",","ji",",","jj",")",";","ot","=","clamp","(","ot",",","ji",",","jj",")",";","vec3","oy","=","or",";","float","oz","=","jU","[","0","]",";","vec2","oA","=","vec2","(","jU","[","1","]",",","jU","[","2","]",")",";","vec3","oB","=","km","*","or",";","vec3","oC","=","kn","*","kh",";","vec3","oD","=","jV","[","1","]","*","ot",";","float","oE","=","jV","[","0","]",";","float","oF","=","jV","[","2","]",";","float","oG","=","dc","(","ko",",","oy",")",";","vec3","oH",";","if","(","jW","==","jj",")","oH","=","normalize","(","ou",")",";","else","oH","=","kf",";","eW","oI","=","hi","(","oB",",","oC",",","oy",",","oD",",","kk",",","oH",",","kj",",","oF",",","oA",",","oG",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","ji",",","vec4","(","ji",")",")",";","ov","=","(","oz","==","jj",")","?","oI",".","a",".","rgb",":","vec3","(","ji",")",";","ow","=","os","+","oI",".","a",".","a","*","oD",".","r",";","ox","=","oH",";","if","(","oE","==","jj",")","{","ov","+=","oI",".","b",";","kr","=","oI",".","b",";","}","else","{","kr","=","vec3","(","ji",")",";","}","ks","=","oH",";","ku","=","oG",";"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"jX",qualifier:["const","vec3"]},{type:"node_param",name:"jY",qualifier:["const","vec3"]},{type:"node_param",name:"jZ",qualifier:["const","float"]},{type:"node_in",name:"oJ",qualifier:["vec3"]},{type:"node_in",name:"oK",qualifier:["float"]},{type:"node_in",name:"oL",qualifier:["vec3"]},{type:"node_in",name:"oM",qualifier:["vec3"]},{type:"node_in",name:"oN",qualifier:["float"]},{type:"node_in",name:"oO",qualifier:["float"]},{type:"node_in",name:"oP",qualifier:["vec4"]},{type:"node_out",name:"oQ",qualifier:["vec3"]},{type:"node_out",name:"oR",qualifier:["float"]},{type:"node_out",name:"oS",qualifier:["vec3"]},{type:"node_out",name:"oT",qualifier:["vec3"]},{type:"node_out",name:"oU",qualifier:["vec3"]},{type:"textline",tokens:["oJ","=","clamp","(","oJ",",","ji",",","jj",")",";","oK","=","clamp","(","oK",",","ji",",","jj",")",";","oL","=","clamp","(","oL",",","ji",",","jj",")",";","vec3","oy","=","oJ",";","float","oz","=","jX","[","0","]",";","vec2","oA","=","vec2","(","jX","[","1","]",",","jX","[","2","]",")",";","vec3","oB","=","oN","*","oJ",";","vec3","oC","=","kn","*","kh",";","vec3","oD","=","jY","[","1","]","*","oL",";","float","oE","=","jY","[","0","]",";","float","oF","=","jY","[","2","]",";","float","oG","=","dc","(","ko",",","oy",")",";","vec3","oH",";","if","(","jZ","==","jj",")","oH","=","normalize","(","oM",")",";","else","oH","=","kf",";","eW","oI","=","hi","(","oB",",","oC",",","oy",",","oD",",","kk",",","oH",",","kj",",","oF",",","oA",",","oG",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","oO",",","oP",")",";","oQ","=","(","oz","==","jj",")","?","oI",".","a",".","rgb",":","vec3","(","ji",")",";","oR","=","oK","+","oI",".","a",".","a","*","oD",".","r",";","oS","=","oH",";","oT","=","oI",".","a",".","rgb",";","oU","=","oI",".","b",";","if","(","oE","==","jj",")","{","oQ","+=","oI",".","b",";","kr","=","oI",".","b",";","}","else","{","kr","=","vec3","(","ji",")",";","}","ks","=","oH",";","ku","=","oG",";"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"j_",qualifier:["vec3"]},{type:"node_out",name:"oV",qualifier:["vec3"]},{type:"textline",tokens:["oV","=","j_",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"oW",qualifier:["vec3"]},{type:"node_out",name:"oX",qualifier:["float"]},{type:"textline",tokens:["oX","=","oW",".","r","*","0.35","+","oW",".","g","*","0.45","+","oW",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"oY",qualifier:["vec3"]},{type:"node_out",name:"oZ",qualifier:["float"]},{type:"node_out",name:"o_",qualifier:["float"]},{type:"node_out",name:"pa",qualifier:["float"]},{type:"textline",tokens:["oZ","=","oY",".","r",";","o_","=","oY",".","g",";","pa","=","oY",".","b",";"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"pb",qualifier:["float"]},{type:"node_in",name:"pc",qualifier:["float"]},{type:"node_in",name:"pd",qualifier:["float"]},{type:"node_out",name:"pe",qualifier:["float"]},{type:"textline",tokens:["pe","=","jj","/","(","jj","+","pow","(","2.71828183",",","-","(","(","pb","-","pd",")","*","pc",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"pf",qualifier:["vec3"]},{type:"node_out",name:"pg",qualifier:["vec3"]},{type:"textline",tokens:["pg","=","pow","(","pf",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"ph",qualifier:["vec3"]},{type:"node_out",name:"pi",qualifier:["vec3"]},{type:"textline",tokens:["pi","=","pow","(","ph",",","vec3","(","jj","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pj",qualifier:["vec3"]},{type:"node_out",name:"pk",qualifier:["vec3"]},{type:"node_out",name:"pl",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pm","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","jH","(","pj",")",")",";","pk","=","pm",".","xyz",";","eb","(","pk",")",";","pl","=","pm",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pn",qualifier:["vec3"]},{type:"node_out",name:"po",qualifier:["vec3"]},{type:"node_out",name:"pp",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pq","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","jH","(","pn",")",")",";","kt","=","pq",".","xyz","-","0.5",";","po","=","normalize","(","kp","*","kt",")",";","pp","=","pq",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"pr",qualifier:["vec3"]},{type:"node_out",name:"ps",qualifier:["vec3"]},{type:"node_out",name:"pt",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pu","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","pr",")",";","ps","=","pu",".","xyz",";","eb","(","ps",")",";","pt","=","pu",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pv",qualifier:["vec3"]},{type:"node_in",name:"pw",qualifier:["vec3"]},{type:"node_out",name:"px",qualifier:["vec3"]},{type:"node_out",name:"py",qualifier:["float"]},{type:"node_out",name:"pz",qualifier:["vec3"]},{type:"node_out",name:"pA",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pB","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","jH","(","pv",")",")",";","px","=","pB",".","xyz",";","eb","(","px",")",";","py","=","pB",".","w",";","pB","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","jH","(","pw",")",")",";","pz","=","pB",".","xyz",";","eb","(","pz",")",";","pA","=","pB",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pC",qualifier:["vec3"]},{type:"node_in",name:"pD",qualifier:["vec3"]},{type:"node_out",name:"pE",qualifier:["vec3"]},{type:"node_out",name:"pF",qualifier:["float"]},{type:"node_out",name:"pG",qualifier:["vec3"]},{type:"node_out",name:"pH",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pI","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","jH","(","pC",")",")",";","kt","=","pI",".","xyz","-","0.5",";","pE","=","normalize","(","kp","*","kt",")",";","pF","=","pI",".","w",";","pI","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","jH","(","pD",")",")",";","kt","=","pI",".","xyz","-","0.5",";","pG","=","normalize","(","kp","*","kt",")",";","pH","=","pI",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pJ",qualifier:["vec3"]},{type:"node_in",name:"pK",qualifier:["vec3"]},{type:"node_in",name:"pL",qualifier:["vec3"]},{type:"node_out",name:"pM",qualifier:["vec3"]},{type:"node_out",name:"pN",qualifier:["float"]},{type:"node_out",name:"pO",qualifier:["vec3"]},{type:"node_out",name:"pP",qualifier:["float"]},{type:"node_out",name:"pQ",qualifier:["vec3"]},{type:"node_out",name:"pR",qualifier:["float"]},{type:"textline",tokens:["{","vec4","pS","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","jH","(","pJ",")",")",";","pM","=","pS",".","xyz",";","eb","(","pM",")",";","pN","=","pS",".","w",";","pS","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","jH","(","pK",")",")",";","pO","=","pS",".","xyz",";","eb","(","pO",")",";","pP","=","pS",".","w",";","pS","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","jH","(","pL",")",")",";","pQ","=","pS",".","xyz",";","eb","(","pQ",")",";","pR","=","pS",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"pT",qualifier:["vec3"]},{type:"node_in",name:"pU",qualifier:["vec3"]},{type:"node_in",name:"pV",qualifier:["vec3"]},{type:"node_out",name:"pW",qualifier:["vec3"]},{type:"node_out",name:"pX",qualifier:["float"]},{type:"node_out",name:"pY",qualifier:["vec3"]},{type:"node_out",name:"pZ",qualifier:["float"]},{type:"node_out",name:"p_",qualifier:["vec3"]},{type:"node_out",name:"qa",qualifier:["float"]},{type:"textline",tokens:["{","vec4","qb","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","jH","(","pT",")",")",";","kt","=","qb",".","xyz","-","0.5",";","pW","=","normalize","(","kp","*","kt",")",";","pX","=","qb",".","w",";","qb","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","jH","(","pU",")",")",";","kt","=","qb",".","xyz","-","0.5",";","pY","=","normalize","(","kp","*","kt",")",";","pZ","=","qb",".","w",";","qb","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","jH","(","pV",")",")",";","kt","=","qb",".","xyz","-","0.5",";","p_","=","normalize","(","kp","*","kt",")",";","qa","=","qb",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"ka",qualifier:["float"]},{type:"node_out",name:"qc",qualifier:["float"]},{type:"textline",tokens:["qc","=","ka",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"qd",qualifier:["vec3"]},{type:"node_in",name:"qe",qualifier:["vec3"]},{type:"node_out",name:"qf",qualifier:["vec3"]},{type:"node_out",name:"qg",qualifier:["float"]},{type:"textline",tokens:["qf","=","qd","+","qe",";","qg","=","(","abs","(","qf","[","0","]",")","+","abs","(","qf","[","1","]",")","+","abs","(","qf","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"qh",qualifier:["vec3"]},{type:"node_in",name:"qi",qualifier:["vec3"]},{type:"node_out",name:"qj",qualifier:["vec3"]},{type:"node_out",name:"qk",qualifier:["float"]},{type:"textline",tokens:["qj","=","qh","-","qi",";","qk","=","(","abs","(","qj","[","0","]",")","+","abs","(","qj","[","1","]",")","+","abs","(","qj","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"ql",qualifier:["vec3"]},{type:"node_in",name:"qm",qualifier:["vec3"]},{type:"node_out",name:"qn",qualifier:["vec3"]},{type:"node_out",name:"qo",qualifier:["float"]},{type:"textline",tokens:["qn","=","ql","+","qm",";","qo","=","length","(","qn",")",";","qn","=","normalize","(","qn",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"qp",qualifier:["vec3"]},{type:"node_in",name:"qq",qualifier:["vec3"]},{type:"node_out",name:"qr",qualifier:["vec3"]},{type:"node_out",name:"qs",qualifier:["float"]},{type:"textline",tokens:["qr","=","vec3","(","ji",")",";","qs","=","dot","(","qp",",","qq",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"qt",qualifier:["vec3"]},{type:"node_in",name:"qu",qualifier:["vec3"]},{type:"node_out",name:"qv",qualifier:["vec3"]},{type:"node_out",name:"qw",qualifier:["float"]},{type:"textline",tokens:["qv","=","cross","(","qt",",","qu",")",";","qw","=","length","(","qv",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"qx",qualifier:["vec3"]},{type:"node_in",name:"qy",qualifier:["vec3"]},{type:"node_out",name:"qz",qualifier:["vec3"]},{type:"node_out",name:"qA",qualifier:["float"]},{type:"textline",tokens:["qz","=","normalize","(","qx",")",";","qA","=","length","(","qx",")",";","qy",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"qB",qualifier:["vec3"]},{type:"node_in",name:"qC",qualifier:["vec3"]},{type:"node_out",name:"qD",qualifier:["vec3"]},{type:"textline",tokens:["qD","=","reflect","(","-","qB",",","qC",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"qE",qualifier:["vec3"]},{type:"node_in",name:"qF",qualifier:["float"]},{type:"node_in",name:"qG",qualifier:["const","float"]},{type:"node_out",name:"qH",qualifier:["vec3"]},{type:"textline",tokens:["float","qI","=","length","(","kl",")",";","if","(","qI","<","10.0",")","{","float","qJ","=","clamp","(","5.0","-","0.5","*","qI",",","ji",",","jj",")",";","float","qK","=","qF","*","qJ",";","vec3","qL","=","normalize","(","kj","*","kp",")",";","float","qM","=","jj","/","qG",";","vec2","qN","=","qL",".","xy","*","qK","/","(","qG","*","qL",".","z",")",";","float","qO","=","jj",";","vec2","qP","=","jH","(","qE",")",";","float","qQ","=","texture2D","(","node_PARALLAX_var_texture",",","qP",")",".","a",";","for","(","float","qR","=","1.0",";","qR","<=","qG",";","qR","++",")","{","if","(","qQ","<","qO",")","{","qO","-=","qM",";","qP","-=","qN",";","qQ","=","texture2D","(","node_PARALLAX_var_texture",",","qP",")",".","a",";","}","}","vec2","qS","=","qP","+","qN",";","float","qT","=","texture2D","(","node_PARALLAX_var_texture",",","qS",")",".","a","-","(","qO","+","qM",")",";","float","qU","=","qQ","-","qO",";","float","qV","=","qU","/","(","qU","-","qT",")",";","qP","=","qV","*","qS","+","(","jj","-","qV",")","*","qP",";","qH","=","jF","(","qP",")",";","}","else","qH","=","qE",";"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"qW",qualifier:["vec3"]},{type:"node_out",name:"qX",qualifier:["vec3"]},{type:"textline",tokens:["qX","=","clamp","(","qW",",","ji",",","jj",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"qY",qualifier:["float"]},{type:"node_in",name:"qZ",qualifier:["float"]},{type:"node_in",name:"q_",qualifier:["float"]},{type:"node_in",name:"ra",qualifier:["float"]},{type:"node_in",name:"rb",qualifier:["float"]},{type:"node_out",name:"rc",qualifier:["float"]},{type:"node_out",name:"rd",qualifier:["vec4"]},{type:"textline",tokens:["rc","=","qY",";","rd","=","vec4","(","qZ",",","q_",",","ra",",","rb",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"re",qualifier:["float"]},{type:"textline",tokens:["re","=","u_time",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kb","=","iL",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"textline",tokens:["vec3","kc","=","iM",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kc","=","kc",";","else","kc","=","-","kc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kd","=","cross","(","kc",",","iN",".","xyz",")","*","iN",".","w",";","mat3","ke","=","mat3","(","iN",".","xyz",",","kd",",","kc",")",";"]}]}}]},{type:"textline",tokens:["vec3","kf","=","normalize","(","kc",")",";","float","kg","=","0.5","*","kf",".","y","+","0.5",";","vec3","kh","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","kg",")",";","vec3","ki","=","u_camera_eye_frag","-","iL",";","vec3","kj","=","normalize","(","ki",")",";","vec3","kk","=","iL",";","vec4","kl","=","cu",";","float","km","=","u_emit",";","float","kn","=","u_ambient",";","float","ko","=","u_shadow_visibility_falloff",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","kp","=","ke",";"]}]}}]},{type:"textline",tokens:["vec3","kq",";","vec3","kr",";","vec3","ks",";","vec3","kt",";","float","ku",";","float","kv",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","rf","=","kq",";","float","rg","=","kv",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["jh","(","rf",",","kj",",","ks",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","kt",".","st",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jh","(","rf",",","kj",",","ks",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","vec2","(","ji",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","rh","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["rf","=","max","(","rf","-","sqrt","(","0.01","*","-","min","(","kb",",","ji",")",")",",","0.5","*","rf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["iJ","(","rf",",","kb",",","u_time",",","ku",",","kc",",","u_sun_direction",",","rh",",","u_sun_quaternion",",","iL",",","length","(","cu",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ri","=","ev","(","u_cube_fog",",","kj",")",";","vec4","rj","=","vec4","(","ri",",","u_fog_color_density",".","a",")",";","eb","(","rj",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","rj","=","u_fog_color_density",";","rj",".","rgb","*=","rh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["eM","(","rf",",","length","(","cu",")",",","kj",".","y",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","rj",",","kb",",","length","(","rh",")","+","u_environment_energy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eo","(","rf",",","length","(","cu",")",",","rj",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","rk","=","texture2DProj","(","u_shadow_mask",",","ct",")",".","rg",";","float","rl","=","rk",".","g",";","rf","=","vec3","(","rl",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","kk","=","iL",";","vec4","kl","=","cu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kc","=","iM",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kc","=","kc",";","else","kc","=","-","kc",";"]}]}}]},{type:"textline",tokens:["vec3","kf","=","normalize","(","kc",")",";"]}]}}]},{type:"textline",tokens:["vec3","kq",";","float","kv",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","rf","=","kq",";","float","rg","=","kv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","rg","<","0.5",")","discard",";","rg","=","jj",";"]}]}}]},{type:"textline",tokens:["ed","(","rf",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","rf",",","rg",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","rf",",","rg",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","iL",";","varying","vec4","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iM",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","iN",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cp",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cs",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"jI",qualifier:["varying","vec2"]},{type:"textline",tokens:["jI","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"jN",qualifier:["varying","vec3"]},{type:"textline",tokens:["jN","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"jO",qualifier:["varying","float"]},{type:"textline",tokens:["jO","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"jP",qualifier:["varying","vec2"]},{type:"textline",tokens:["jP","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"jQ",qualifier:["varying","vec3"]},{type:"textline",tokens:["jQ","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","jR","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jS","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jT","=","vec3","(","a_tangent",")",";","vec3","jU","=","a_tangent","[","3","]","*","cross","(","jS",",","jT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jT","=","vec3","(","0.0",")",";","vec3","jU","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"elif",expression:["USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jS","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jS","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["jR","=","mix","(","jR",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED"],group:{type:"group",parts:[{type:"textline",tokens:["jS","=","mix","(","jS",",","a_normal_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jV","=","vec3","(","a_tangent",")",";","vec3","jW","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","jV",")",";","jT","=","mix","(","jT",",","jV",",","u_va_frame_factor",")",";","jU","=","mix","(","jU",",","jW",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","jR",",","jT",",","jU",",","jS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jX","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jX","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jY","=","(","u_model_matrix","*","vec4","(","jX",",","1.0",")",")",".","xyz",";","mat4","jZ","=","ab","(","u_camera_eye",",","jY",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","j_","=","(","u_model_matrix","*","vec4","(","jX",",","1.0",")",")",".","xyz",";","jZ","=","jZ","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","j_",")",";"]}]}}]},{type:"textline",tokens:["b","ka","=","ai","(","jR","-","jX",",","jX",",","jT",",","jU",",","jS",",","jZ",")",";","ka",".","b","=","jY",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ka","=","ai","(","jR",",","jX",",","jT",",","jU",",","jS",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["float","kb","=","(","dot","(","cross","(","ka",".","e",",","ka",".","c",")",",","ka",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","iN","=","vec4","(","ka",".","c",",","kb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jY","=","(","u_model_matrix","*","vec4","(","jX",",","1.0",")",")",".","xyz",";","mat4","jZ","=","ab","(","u_camera_eye",",","jY",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","j_","=","(","u_model_matrix","*","vec4","(","jX",",","1.0",")",")",".","xyz",";","jZ","=","jZ","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","j_",")",";"]}]}}]},{type:"textline",tokens:["b","ka","=","ai","(","jR","-","jX",",","jX",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jS",",","jZ",")",";","ka",".","b","=","jY",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","ka","=","ai","(","jR",",","jX",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jS",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","ka",".","a",",","ka",".","b",",","jS",")",";"]}]}}]},{type:"textline",tokens:["iL","=","ka",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["SHADED","||","USE_NODE_GEOMETRY_NO"],group:{type:"group",parts:[{type:"textline",tokens:["iM","=","ka",".","e",";"]}]}}]},{type:"textline",tokens:["cu","=","u_view_matrix","*","vec4","(","ka",".","a",",","1.0",")",";","vec4","kc","=","u_proj_matrix","*","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["kc",".","xy","+=","u_subpixel_jitter","*","kc",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","kc",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["dV","(","ka",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kd","=","kc",".","x",";","float","ke","=","kc",".","y",";","float","kf","=","kc",".","w",";","ct",".","x","=","(","kd","+","kf",")","/","2.0",";","ct",".","y","=","(","ke","+","kf",")","/","2.0",";","ct",".","z","=","kf",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","kc",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","jR",";","varying","vec3","iO",";","varying","vec3","cu",";","void","main","(",")","{","float","jS","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","jT","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","jS",")",";","float","jU","=","u_diffuse_color",".","a","*","jR","*","(","1.0","-","clamp","(","jT",",","0.0",",","1.0",")",")",";","vec3","jV","=","iO","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","jV",",","length","(","cu",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ed","(","jV",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","jV",",","jU",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jV",",","jU",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"include",file:"particles.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","jR",";","varying","vec3","iO",";","varying","vec3","cu",";","struct","ky","{","float","ji",";","vec3","jj",";","float","jk",";","vec3","jl",";","float","jm",";","}",";","ky","kF","(",")","{","float","kz","=","u_p_time","-","u_p_starttime",";","ky","kA",";","if","(","kz","<","0.0",")","{","kA",".","ji","=","0.0001",";","kA",".","jj","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","kz","<","0.0",")",")","{","float","kB",";","if","(","u_p_cyclic","==","1",")","{","float","kC","=","u_p_endtime","-","u_p_starttime",";","kB","=","mod","(","kz",",","kC",")","-","a_p_delay",";","if","(","kB","<","0.0",")","kB","+=","kC",";","}","if","(","u_p_cyclic","!=","1",")","{","kB","=","kz","-","a_p_delay",";","}","if","(","kB","<","0.0","||","kB",">=","a_p_lifetime",")","{","kA",".","ji","=","0.0001",";","kA",".","jj","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","kB","<","0.0","||","kB",">=","a_p_lifetime",")",")","{","vec3","kD","=","a_position",";","vec3","kE","=","a_normal",";","kD","+=","u_p_nfactor","*","kB","*","kE",";","kD","+=","a_p_vels",".","xyz","*","kB",";","kD",".","y","-=","u_p_gravity","*","kB","*","kB","/","2.0",";","kD","+=","(","u_p_wind","/","u_p_mass",")","*","kB","*","kB","/","2.0",";","kA",".","jj","=","kD",";","kA",".","jm","=","a_p_vels",".","w","*","kB",";","kA",".","ji","=","kc","(","kB",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","kA",".","jk","=","kx","(","kB",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","kA",".","jl","=","ko","(","kB",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","kA",";","}","void","main","(",")","{","ky","kG",";","kG","=","kF","(",")",";","vec4","kH","=","u_view_matrix","*","vec4","(","kG",".","jj",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","kH",";","jR","=","kG",".","jk",";","iO","=","kG",".","jl",";","cu","=","kH",".","xyz",";","float","kI","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","kG",".","ji","*","kI",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","float","jR",";","varying","vec3","iO",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_sampler",",","a",")",";","vec3","jj","=","ji",".","rgb",";","eb","(","jj",")",";","jj","*=","iO",";","float","jk","=","ji",".","a","*","jR",";","ed","(","jj",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","jj",",","jk",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jj",",","jk",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"include",file:"particles.glslv"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";","uniform","vec2","u_p_size_ramp","[","RAMPSIZE","]",";","uniform","vec4","u_p_color_ramp","[","RAMPSIZE","]",";","uniform","float","u_p_time",";","uniform","float","u_p_starttime",";","uniform","float","u_p_endtime",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","float","u_p_size",";","varying","float","jR",";","varying","vec3","iO",";","varying","vec2","a",";","varying","vec4","cu",";","struct","ky","{","float","ji",";","vec3","jj",";","float","jk",";","vec3","jl",";","float","jm",";","}",";","ky","kF","(",")","{","float","kz","=","u_p_time","-","u_p_starttime",";","ky","kA",";","if","(","kz","<","0.0",")","{","kA",".","ji","=","0.0001",";","kA",".","jj","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","kz","<","0.0",")",")","{","float","kB",";","if","(","u_p_cyclic","==","1",")","{","float","kC","=","u_p_endtime","-","u_p_starttime",";","kB","=","mod","(","kz",",","kC",")","-","a_p_delay",";","if","(","kB","<","0.0",")","kB","+=","kC",";","}","if","(","u_p_cyclic","!=","1",")","{","kB","=","kz","-","a_p_delay",";","}","if","(","kB","<","0.0","||","kB",">=","a_p_lifetime",")","{","kA",".","ji","=","0.0001",";","kA",".","jj","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","kB","<","0.0","||","kB",">=","a_p_lifetime",")",")","{","vec3","kD","=","a_position",";","vec3","kE","=","a_normal",";","kD","+=","u_p_nfactor","*","kB","*","kE",";","kD","+=","a_p_vels",".","xyz","*","kB",";","kD",".","y","-=","u_p_gravity","*","kB","*","kB","/","2.0",";","kD","+=","(","u_p_wind","/","u_p_mass",")","*","kB","*","kB","/","2.0",";","kA",".","jj","=","kD",";","kA",".","jm","=","a_p_vels",".","w","*","kB",";","kA",".","ji","=","kc","(","kB",",","u_p_max_lifetime",",","u_p_size_ramp",")",";","kA",".","jk","=","kx","(","kB",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","kA",".","jl","=","ko","(","kB",",","u_p_max_lifetime",",","u_p_color_ramp",")",";","}","}","return","kA",";","}","float","kI","(","vec2","kG",",","vec2","kH",")","{","return","(","atan","(","kH",".","y",",","kH",".","x",")","-","atan","(","kG",".","y",",","kG",".","x",")",")",";","}","void","main","(",")","{","ky","kJ",";","kJ","=","kF","(",")",";","float","kK",";","mat4","kL",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","kK","=","kJ",".","jm",";","kL","=","A","(","kJ",".","jj",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","kK","=","kJ",".","jm",";","kL","=","l","(",")",";","kL","[","3","]","=","vec4","(","kJ",".","jj",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","kK","=","kJ",".","jm",";","kL","=","p","(","radians","(","90.0",")",")",";","kL","[","3","]","=","vec4","(","kJ",".","jj",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","kK","=","kI","(","vec2","(","0.0",",","-","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","kJ",".","jm",";","kL","=","n","(","radians","(","-","90.0",")",")",";","kL","[","3","]","=","vec4","(","kJ",".","jj",",","1.0",")",";","}","vec4","kM","=","vec4","(","a_p_bb_vertex","*","2.0","*","kJ",".","ji","*","u_p_size",",","0.0",",","1.0",")",";","vec4","kN","=","kL","*","r","(","kK",")","*","kM",";","cu","=","u_view_matrix","*","kN",";","vec4","kO","=","u_proj_matrix","*","cu",";","gl_Position","=","kO",";","jR","=","kJ",".","jk",";","iO","=","kJ",".","jl",";","a","=","a_p_bb_vertex","+","0.5",";","}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","ky",";","const","float","kz","=","0.99",";","const","float","kA","=","1.8",";","const","int","kB","=","8",";","float","kL","(","vec3","kC",",","vec3","kD",")","{","float","kE","=","dot","(","kD",",","kD",")",";","float","kF","=","2.0","*","dot","(","kD",",","kC",")",";","float","kG","=","dot","(","kC",",","kC",")","-","1.0",";","float","kH","=","kF","*","kF","-","4.0","*","kE","*","kG",";","float","kI","=","sqrt","(","kH",")",";","float","kJ","=","(","-","kF","-","kI",")","/","2.0",";","float","kK","=","kG","/","kJ",";","return","kK",";","}","float","kS","(","float","kM",",","float","kN",")","{","float","kO","=","3.0","*","(","1.0","-","kN","*","kN",")",";","float","kP","=","2.0","*","(","2.0","+","kN","*","kN",")",";","float","kQ","=","1.0","+","kM","*","kM",";","float","kR","=","pow","(","1.0","+","kN","*","kN","-","2.0","*","kN","*","kM",",","1.5",")",";","kR","=","max","(","kR",",","0.00001",")",";","return","(","kO","/","kP",")","*","(","kQ","/","kR",")",";","}","float","k_","(","vec3","kT",",","vec3","kU",",","float","kV",")","{","float","kW","=","dot","(","kU",",","-","kT",")",";","if","(","kW","<","0.0",")","{","return","1.0",";","}","vec3","kX","=","kT","+","kW","*","kU",";","if","(","length","(","kX",")","<","kV",")","{","return","0.0",";","}","else","if","(","length","(","kX",")",">=","kV",")","{","vec3","kY","=","normalize","(","kX",")","*","kV","-","kT",";","float","kZ","=","acos","(","dot","(","normalize","(","kY",")",",","kU",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","kZ","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","ld","(","float","la",",","vec3","lb",",","float","lc",")","{","return","lb","-","lb","*","pow","(","u_sky_color",",","vec3","(","lc","/","la",")",")",";","}","void","main","(",")","{","vec3","le","=","normalize","(","ky",")",";","vec3","lf","=","u_sun_direction",";","float","lg","=","dot","(","le",",","lf",")",";","float","lh","=","kS","(","lg",",","-","0.01",")","*","u_rayleigh_brightness","*","lf",".","y",";","float","li","=","kS","(","lg","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","lf",".","y",")",";","float","lj","=","smoothstep","(","0.0",",","100.0",",","kS","(","lg",",","0.9995",")",")","*","u_spot_brightness",";","vec3","lk","=","vec3","(","0.0",",","kz",",","0.0",")",";","float","ll","=","kL","(","lk",",","le",")",";","float","lm","=","ll","/","float","(","kB",")",";","float","ln","=","k_","(","lk",",","le",",","kz","-","0.3",")",";","vec3","lo","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","lp","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","lq","=","0",";","lq","<","kB",";","lq","++",")","{","float","lr","=","lm","*","float","(","lq",")",";","vec3","ls","=","lk","+","le","*","lr",";","float","lt","=","k_","(","ls",",","lf",",","kz","-","0.2",")",";","float","lu","=","kL","(","ls",",","lf",")",";","vec3","lv","=","ld","(","lu",",","vec3","(","kA",")",",","u_scatter_strength",")","*","lt",";","lo","+=","ld","(","sqrt","(","lr",")",",","u_sky_color","*","lv",",","u_rayleigh_strength",")",";","lp","+=","ld","(","lr",",","lv",",","u_mie_strength",")",";","}","lo","=","lo","*","ln","*","pow","(","ll",",","u_rayleigh_collection_power",")","/","float","(","kB",")",";","lp","=","(","lp","*","ln","*","pow","(","ll",",","u_mie_collection_power",")",")","/","float","(","kB",")",";","vec3","lw","=","vec3","(","lj","*","lp","+","li","*","lp","+","lh","*","lo",")",";","ed","(","lw",")",";","gl_FragColor","=","vec4","(","lw",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","ky",";","void","main","(",")","{","vec4","ji","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","jj","=","u_cube_view_matrix","*","ji",";","ky","=","jj",".","xyz",";","gl_Position","=","ji",";","}"]}]},exports["shadeless.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";","uniform","float","u_diffuse_color_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";","varying","vec2","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cu",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ji","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jj","=","iO",";","eb","(","jj",")",";","vec4","jk","=","vec4","(","jj",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jk","=","u_diffuse_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","jl","=","texture2D","(","u_colormap0",",","ji",")",";","eb","(","jl",".","rgb",")",";","vec4","jm","=","texture2D","(","u_colormap1",",","ji",")",";","eb","(","jm",".","rgb",")",";","vec4","jn","=","texture2D","(","u_stencil0",",","ji",")",";","vec4","jo","=","mix","(","jl",",","jm",",","jn",".","r",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","jo","=","texture2D","(","u_colormap0",",","ji","+","u_time","*","u_colormap0_uv_velocity",")",";","eb","(","jo",".","rgb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["jk",".","rgb","=","mix","(","jk",".","rgb",",","jo",".","rgb",",","u_diffuse_color_factor",")",";","jk",".","a","=","jo",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["jk",".","rgb","*=","mix","(","vec3","(","1.0",")",",","jo",".","rgb",",","u_diffuse_color_factor",")",";","jk",".","a","=","jo",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","jp","=","jk",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["float","jq","=","jk",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","jq","<","0.5",")","discard",";","jq","=","1.0",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jq","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["eo","(","jp",",","length","(","cu",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["ed","(","jp",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","jp",",","jq",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","jp",",","jq",")",";","}"]}]},exports["shadeless.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["varying","vec4","cu",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iO",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","ji","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ji","=","mix","(","ji",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jj","=","vec3","(","0.0",")",";","vec3","jk","=","vec3","(","0.0",")",";","vec3","jl","=","vec3","(","0.0",")",";","bn","(","ji",",","jj",",","jk",",","jl",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jm","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","(","u_model_matrix","*","vec4","(","jm",",","1.0",")",")",".","xyz",";","mat4","jo","=","ab","(","u_camera_eye",",","jn",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jp","=","(","u_model_matrix","*","vec4","(","jm",",","1.0",")",")",".","xyz",";","jo","=","jo","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jp",")",";"]}]}}]},{type:"textline",tokens:["b","jq","=","ai","(","ji","-","jm",",","jm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jo",")",";","jq",".","b","=","jn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jq","=","ai","(","ji",",","jm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jr","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jr","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","jq",".","a",",","jq",".","b",",","jr",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","al","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["iO","=","a_color",";"]}]}}]},{type:"textline",tokens:["cu","=","u_view_matrix","*","vec4","(","jq",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","cu",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gl_Position",".","xy","+=","u_subpixel_jitter","*","gl_Position",".","w",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_sampler",",","a",")",";","ed","(","ji",".","rgb",")",";","eg","(","ji",".","rgb",",","ji",".","a",")",";","gl_FragColor","=","ji",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","ji","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","jj","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ji",",","0.0",")",";","jj",".","x","/=","jj",".","w",";","jj",".","y","/=","jj",".","w",";","jj","+=","99999.0","*","step","(","jj",".","z",",","0.0",")",";","jj","+=","100.0","*","(","step","(","1.0",",","abs","(","jj",".","x",")",")","+","step","(","1.0",",","abs","(","jj",".","y",")",")",")",";","jj",".","x","=","-","a_lf_dist","*","jj",".","x",";","jj",".","y","=","-","a_lf_dist","*","jj",".","y",";","float","jk","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","jl","=","vec2","(","a_lf_bb_vertex",".","x","/","jk",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","jm","=","1.9",";","jl","*=","(","1.0","+","jm","*","length","(","jj",".","xy",")",")",";","}","gl_Position","=","vec4","(","jj",".","xy","+","jl",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ky",";","void","main","(",")","{","vec3","ji","=","textureCube","(","u_sky",",","ky",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["eb","(","ji",".","rgb",")",";","float","jj","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","jj","=","min","(","-","jj","*","0.03",",","0.8",")",";","float","jk","=","length","(","u_sun_intensity",")","+","u_environment_energy",";","vec3","jl","=","normalize","(","ky",")",";","vec3","jm","=","vec3","(","0.0",")",";","vec4","jn","=","u_underwater_fog_color_density",";","jn",".","rgb","=","mix","(","jn",".","rgb",",","jm",",","min","(","-","jl",".","y","+","jj",",","1.0",")",")","*","jk",";","float","jo","=","clamp","(","sign","(","jl",".","y","-","0.05","*","jj",")",",","0.0",",","1.0",")",";","ji","=","mix","(","jn",".","rgb",",","ji",",","jo",")",";","ed","(","ji",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ji",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","ky",";","void","main","(",")","{","vec4","ji","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","jj","=","u_sky_vp_inverse","*","ji",";","ky","=","jj",".","xyz",";","gl_Position","=","ji",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0001"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";","uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_depth",";"]}]}},{type:"elif",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_alphamap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec2","u_specular_params",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";","uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"textline",tokens:["varying","vec3","iK",";","varying","vec3","iL",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iM",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iN",";","varying","vec3","kz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","kI","(","in","float","kD",",","inout","vec2","kE",",","in","vec2","kF",")","{","vec4","kG","=","texture2D","(","u_shore_depth",",","kE",")",";","float","kH","=","cn","(","kG",")",";","if","(","kH","<","kC",")","{","kE","=","kF",";","return","kD",";","}","else","{","return","kH",";","}","}"]}]}}]},{type:"textline",tokens:["vec3","kX","(","in","vec2","kJ",",","in","vec3","kK",",","in","vec3","kL",",","in","vec3","kM",",","out","float","kN",")","{","vec3","kO","=","reflect","(","-","kL",",","kK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kP","=","kJ",".","xy","+","kK",".","xz","*","REFL_BUMP","/","kC",";","kN","=","u_reflect_factor",";","vec3","kQ",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kQ","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kQ","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","kR","=","dot","(","kL",",","kK",")",";","kN","*=","max","(","1.0","-","1.0","/","kR",",","1.0",")",";","}","else","{","kQ","=","texture2D","(","u_reflectmap",",","kP",")",".","rgb",";","eb","(","kQ",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["kN","=","u_mirror_factor",";","vec3","kQ","=","kM","*","textureCube","(","u_mirrormap",",","kO",")",".","rgb",";","eb","(","kQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kN","=","1.0",";","vec3","kQ","=","kM","*","vec3","(","0.3",",","0.5",",","1.0",")",";","eb","(","kQ",")",";"]}]}}]},{type:"textline",tokens:["vec3","kS","=","normalize","(","kO","+","kL",")",";","float","kT","=","1.0","-","dot","(","kL",",","kS",")",";","float","kU","=","u_fresnel_params","[","3","]",";","float","kV","=","u_fresnel_params","[","2","]",";","float","kW","=","kU","+","(","1.0","-","kU",")","*","pow","(","kT",",","kV",")",";","kN","=","min","(","kN","*","kW",",","1.0",")",";","return","kQ",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","kY","=","mat3","(","iN",",","kz",",","iM",")",";"]}]}}]},{type:"textline",tokens:["vec3","kZ","=","normalize","(","iM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","kY","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","kZ","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","(","REFLECTIVE","||","FOAM","||","(","WATER_EFFECTS","&&","!","DISABLE_FOG",")",")","||","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","k_","=","iL",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","la","=","vec2","(","kA",".","x",",","-","kA",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","la","=","vec2","(","iL",".","x",",","-","iL",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","la","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lb","=","vec3","(","0.0",")",";","vec3","lc","=","texture2D","(","u_normalmap0",",","la","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lb","+=","lc",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ld","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["ld","+=","lc",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["lc","=","texture2D","(","u_normalmap0",",","la","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lb","+=","lc",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["ld","+=","lc",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["lc","=","texture2D","(","u_normalmap0",",","la","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lb","+=","lc",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["ld","+=","lc",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["lc","=","texture2D","(","u_normalmap0",",","la","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","lb","+=","lc",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["ld","+=","lc",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","le","=","kY","*","ld",";","if","(","!","h","(","le",",","vec3","(","0.0",")",")",")","le","=","normalize","(","le",")",";","vec3","lf","=","mix","(","kZ",",","le",",","0.2",")",";","lf","=","normalize","(","lf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","=","mix","(","kZ",",","normalize","(","kY","*","lb",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kZ","=","mix","(","kZ",",","normalize","(","kY","*","lb",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["kZ","=","normalize","(","kZ",")",";"]}]}}]},{type:"textline",tokens:["vec3","lg","=","normalize","(","iK",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lh","=","ct",".","xy","/","ct",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","li","=","kC","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","lj","=","u_diffuse_color",".","a",";","vec4","lk","=","texture2DProj","(","u_shore_depth",",","ct",")",";","float","ll","=","cn","(","lk",")",";","float","lm","=","max","(","ll","-","kC",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ln","=","lh","+","kZ",".","xz","*","REFR_BUMP","/","kC",";","float","lo","=","kI","(","ll",",","ln",",","lh",")",";","float","lp","=","max","(","lo","-","kC",",","0.0",")",";","float","lq","=","u_view_max_depth","/","ABSORB","*","lp",";","float","lr",";","if","(","u_cam_water_depth","<","0.0",")","lr","=","0.0",";","else","lr","=","min","(","lj","*","lq",",","1.0",")",";","float","ls","=","u_view_max_depth","/","ABSORB","*","lm",";","lj","=","min","(","15.0","*","lj","*","u_view_max_depth","*","lm",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ls","=","u_view_max_depth","/","ABSORB","*","lm",";","if","(","u_cam_water_depth",">","0.0",")","lj","=","min","(","lj","*","ls",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["lj","*=","min","(","5.0","*","li",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_MAP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lt","=","texture2D","(","u_alphamap",",","la",")",";","float","lj","=","lt",".","r",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lj","=","u_diffuse_color",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lr","=","1.0","-","lj",";","vec2","ln","=","lh","+","kZ",".","xz","*","REFR_BUMP","/","kC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lu","=","texture2D","(","u_refractmap",",","ln",")",".","rgb",";","eb","(","lu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lv","=","pow","(","min","(","kB",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","lw","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","lv",")",";","lv","=","pow","(","min","(","kB",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","lw","=","mix","(","u_shore_water_col",",","lw",",","lv",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lw","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","lx","=","max","(","1.0","-","u_view_max_depth","*","lm",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lx","=","1.0","-","lj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","ly","=","max","(","3.0","*","k_",",","0.0",")",";","ly","*=","ly",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lz","=","normalize","(","vec3","(","kB",".","r",",","0.0",",","kB",".","g",")",")",";","vec3","lA","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","lz",",","0.8",")",")",";","float","lB","=","max","(","2.5","*","dot","(","lf",",","lA",")","-","0.7",",","0.0",")",";","lx","+=","lB","*","(","1.0","-","kB",".","b",")",";","ly","*=","(","1.0","-","0.95","*","pow","(","kB",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["lx","+=","ly",";","lx","=","min","(","u_foam_factor","*","lx",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","lC","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","la","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","lD","=","u_specular_params","[","0","]",";","float","lE","=","u_specular_params","[","1","]",";","vec3","lF","=","lD","*","u_specular_color",";","vec3","lG","=","u_environment_energy","*","u_zenith_color",";","vec3","lH","=","u_ambient","*","lG",";","vec3","lI","=","lH","+","u_sun_intensity",";","float","lJ",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lK","=","kX","(","lh",",","kZ",",","lg",",","lI",",","lJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lK","=","kX","(","vec2","(","0.0",")",",","kZ",",","lg",",","lI",",","lJ",")",";"]}]}}]},{type:"textline",tokens:["vec3","lL","=","u_diffuse_intensity","*","lw",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS","&&","DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","lM","=","max","(","dot","(","u_sun_direction",",","-","iM",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","lg",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","lM","=","clamp","(","SSS_STRENGTH","*","lM",",","0.0",",","1.0",")",";","lL","=","mix","(","lL",",","u_shallow_water_col",",","lM",")",";","lL","=","mix","(","lL",",","u_shore_water_col",",","lM",")",";"]}]}}]},{type:"textline",tokens:["eW","lN","=","hi","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lL",",","lF",",","iL",",","kZ",",","lg",",","lE",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";","lL","=","lN",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lL","=","mix","(","lu",",","lL",",","lr",")",";"]}]}}]},{type:"textline",tokens:["lL","=","mix","(","lL",",","lK",",","lJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","lO","=","mix","(","lC",".","g",",","lC",".","r",",","clamp","(","4.0","*","(","lx","-","0.75",")",",","0.0",",","1.0",")",")",";","lO","=","mix","(","lC",".","b",",","lO",",","clamp","(","2.0","*","lx","-","1.0",",","0.0",",","1.0",")",")",";","lO","=","mix","(","0.0",",","lO",",","lx",")",";","lL","=","mix","(","lL",",","lI",",","lO",")",";"]}]}}]},{type:"textline",tokens:["lL","+=","lN",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lP","=","ev","(","u_cube_fog",",","lg",")",";","vec4","lQ","=","vec4","(","lP",",","u_fog_color_density",".","a",")",";","eb","(","lQ",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lQ","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","eV","(","lL",",","li",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","length","(","u_sun_intensity",")","+","u_environment_energy",")",";","}","else","{","eo","(","lL",",","li",",","lQ",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eo","(","lL",",","li",",","lQ",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ed","(","lL",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lj","=","max","(","lj",",","lN",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["lj","+=","lO",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","lL",",","lj",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lL",",","lj",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Z",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Z",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_cascad_step",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","iK",";","varying","vec3","iL",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iM",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","iN",";","varying","vec3","kz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kA",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ct",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","(","in","vec2","ji",")","{","vec2","jj","=","vec2","(","(","ji",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","SHORE_MAP_CENTER_Z","+","ji",".","y",")","/","SHORE_MAP_SIZE_Z",")","+","0.5",";","jj","=","clamp","(","jj",",","0.0",",","1.0",")",";","vec4","jk","=","texture2D","(","u_shore_dist_map",",","jj",")",";","const","vec2","jl","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","jm","=","dot","(","jk",".","ba",",","jl",")",";","vec2","jn","=","normalize","(","jk",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","jn",",","jm",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["void","jC","(","inout","vec3","jp",",","in","float","jq",",","in","vec3","jr",")","{","float","js","=","ih","(","DST_NOISE_SCALE_0","*","(","jp",".","xz","+","DST_NOISE_FREQ_0","*","jq",")",")","*","ih","(","DST_NOISE_SCALE_1","*","(","jp",".","zx","-","DST_NOISE_FREQ_1","*","jq",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jt","=","jr",".","b",";","float","ju","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","jv","=","sqrt","(","jt",")",";","float","jw","=","max","(","jt",",","DIR_MIN_SHR_FAC",")","*","(","sin","(","(","jv","/","ju","+","DIR_FREQ","*","jq",")",")",")","*","max","(","ih","(","DIR_NOISE_SCALE","*","(","jp",".","xz","+","DIR_NOISE_FREQ","*","jq",")",")",",","DIR_MIN_NOISE_FAC",")",";","float","jx","=","WAVES_HEIGHT","*","mix","(","jw",",","js",",","max","(","jv",",","DST_MIN_FAC",")",")",";","vec2","jy","=","jr",".","rg",";","float","jz","=","WAVES_HOR_FAC","*","jw","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","jt",")",",","0.0",")",";","vec2","jA","=","jz","*","jy",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jx","=","WAVES_HEIGHT","*","js",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","jB","=","hC","(","20.0","/","WAVES_LENGTH","*","(","jp",".","xz","-","0.25","*","jq",")",")",".","x","+","hC","(","17.0","/","WAVES_LENGTH","*","(","jp",".","zx","+","0.1","*","jq",")",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["jp",".","xz","+=","jA",";","jB","*=","jt",";"]}]}}]},{type:"textline",tokens:["jx","+=","0.05","*","jB",";"]}]}}]},{type:"textline",tokens:["jp",".","y","+=","jx",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","jD","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","jE","=","abs","(","a_cascad_step",")",";","vec2","jF","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","jE",")",";","jD",".","y","+=","WATER_LEVEL",";","jD",".","xz","+=","jF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["b","jG","=","ai","(","jD",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","jG",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","jo","(","jG",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","jH","=","length","(","u_wind",")",";","float","kD","=","u_time",";","kD","*=","jH",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","kE","=","jE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","kE","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","kF","=","jG",".","a","+","vec3","(","kE",",","0.0",",","0.0",")",";","vec3","kG","=","jG",".","a","+","vec3","(","0.0",",","0.0",",","kE",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kH","=","jo","(","kF",".","xz",")",";","vec3","kI","=","jo","(","kG",".","xz",")",";","jC","(","kF",",","kD",",","kH",")",";","jC","(","kG",",","kD",",","kI",")",";","jC","(","jG",".","a",",","kD",",","kB",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jC","(","kF",",","kD",",","vec3","(","0.0",")",")",";","jC","(","kG",",","kD",",","vec3","(","0.0",")",")",";","jC","(","jG",".","a",",","kD",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_cascad_step","<","0.0",")","{","kF",".","y","=","jG",".","a",".","y",";","kG",".","y","=","jG",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","kJ","=","normalize","(","kF","-","jG",".","a",")",";","vec3","kK","=","normalize","(","kG","-","jG",".","a",")",";","iM","=","normalize","(","cross","(","kK",",","kJ",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["iN","=","kK",";","kz","=","cross","(","iM",",","iN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","kL","=","dot","(","iM",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","kM","=","clamp","(","0.8","-","kL",",","0.0",",","1.0",")",";","iM","=","mix","(","iM",",","vec3","(","0.0",",","1.0",",","0.0",")",",","kM",")",";"]}]}}]}]}}]},{type:"textline",tokens:["iL","=","jG",".","a",";","iK","=","u_camera_eye","-","jG",".","a",";","vec4","kN","=","u_view_matrix","*","vec4","(","jG",".","a",",","1.0",")",";","vec4","kO","=","u_proj_matrix","*","kN",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kP","=","kO",".","x",";","float","kQ","=","kO",".","y",";","float","kR","=","kO",".","w",";","ct",".","x","=","(","kP","+","kR",")","/","2.0",";","ct",".","y","=","(","kQ","+","kR",")","/","2.0",";","ct",".","z","=","kR",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","-","kN",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","kO",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kD",";","const","float","kE","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","kF","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","kF","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","kG","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","kH","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","kI","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","kJ","=","vec3","(","0.0",")",";","float","kK","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kL","=","sign","(","kD","-","vec3","(","0.02","*","kE",")",")",";","if","(","kL",".","x","<","0.0","||","kL",".","y","<","0.0","||","kL",".","z","<","0.0",")","{","kJ","=","kF",";","kK","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kL","=","sign","(","kD","-","vec3","(","0.02","*","kE",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","kL",".","x","<","0.0","||","kL",".","y","<","0.0","||","kL",".","z","<","0.0",")","kJ","=","u_wireframe_edge_color",";","else","kJ","=","kI",";","kK","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","kL",".","x","<","0.0","||","kL",".","y","<","0.0","||","kL",".","z","<","0.0",")","kK","=","1.0",";","else","kK","=","0.0",";","kJ","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","kL",".","x","<","0.0","||","kL",".","y","<","0.0","||","kL",".","z","<","0.0",")","kJ","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","kJ","=","kG",";","else","kJ","=","kH",";","kK","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","kM","=","fwidth","(","kD",")",";","vec3","kN","=","smoothstep","(","vec3","(","0.0",")",",","kM","*","kE",",","kD",")",";","float","kO","=","min","(","min","(","kN",".","x",",","kN",".","y",")",",","kN",".","z",")",";","kO","=","clamp","(","kO",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","kJ","=","vec3","(","mix","(","u_wireframe_edge_color",",","kI",",","kO",")",")",";","kK","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","kJ","=","u_wireframe_edge_color",";","kK","=","mix","(","1.0",",","0.0",",","kO",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","kJ","=","mix","(","u_wireframe_edge_color",",","kG",",","kO",")",";","else","kJ","=","mix","(","u_wireframe_edge_color",",","kH",",","kO",")",";","kK","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["ed","(","kJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["eg","(","kJ",",","kK",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kJ",",","kK",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","kD",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","kD","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","kD","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","kD","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","ji","=","a_position",";","vec3","jj","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["b","jk","=","ai","(","ji",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ji","=","mix","(","ji",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jl","=","vec3","(","0.0",")",";","vec3","jm","=","vec3","(","0.0",")",";","bn","(","ji",",","jl",",","jm",",","jj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","jn","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["b","jk","=","dT","(","ji",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jn",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jo","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","mat4","jp","=","ab","(","u_camera_eye",",","jo",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jq","=","(","u_model_matrix","*","vec4","(","jn",",","1.0",")",")",".","xyz",";","jp","=","jp","*","R","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","jq",")",";"]}]}}]},{type:"textline",tokens:["b","jk","=","ai","(","ji","-","jn",",","jn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","jp",")",";","jk",".","b","=","jo",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","jk","=","ai","(","ji",",","jn",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","jk",".","a",",","jk",".","b",",","jj",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","jr","=","u_view_matrix","*","vec4","(","jk",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","jr",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","jj","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","ji","[","0","]",",","jj","[","1","]",",","jj","[","2","]",",","ji","[","3","]","+","jj","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","jl","(","float","ji",",","float","jj",")","{","vec2","jk","=","a","+","vec2","(","ji",",","jj",")","*","u_texel_size",";","return","texture2D","(","u_color",",","jk",")",";","}","float","jp","(","vec4","jm",")","{","vec3","jn","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","jo","=","dot","(","jm",".","rgb",",","jn",")",";","return","jo",";","}","vec4","kE","(",")","{","vec4","jq","=","jl","(","-","1.0",",","-","1.0",")",";","vec4","jr","=","jl","(","1.0",",","-","1.0",")",";","vec4","js","=","jl","(","-","1.0",",","1.0",")",";","vec4","jt","=","jl","(","1.0",",","1.0",")",";","vec4","ju","=","jl","(","0.0",",","0.0",")",";","float","jv","=","jp","(","jq",")",";","float","jw","=","jp","(","jr",")",";","float","jx","=","jp","(","js",")",";","float","jy","=","jp","(","jt",")",";","float","jz","=","jp","(","ju",")",";","float","jA","=","min","(","jz",",","min","(","min","(","jv",",","jw",")",",","min","(","jx",",","jy",")",")",")",";","float","jB","=","max","(","jz",",","max","(","max","(","jv",",","jw",")",",","max","(","jx",",","jy",")",")",")",";","vec2","jC",";","jC",".","x","=","-","(","(","jv","+","jw",")","-","(","jx","+","jy",")",")",";","jC",".","y","=","(","(","jv","+","jx",")","-","(","jw","+","jy",")",")",";","float","jD","=","max","(","(","jv","+","jw","+","jx","+","jy",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","jE","=","1.0","/","(","min","(","abs","(","jC",".","x",")",",","abs","(","jC",".","y",")",")","+","jD",")",";","jC","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","jC","*","jE",")",")","*","u_texel_size",";","vec4","jF","=","0.5","*","(","texture2D","(","u_color",",","a","+","jC","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","jC","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","jG","=","jF","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","jC","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","jC","*","0.5",")",")",";","float","jH","=","jp","(","jG",")",";","if","(","(","jH","<","jA",")","||","(","jH",">","jB",")",")","return","jF",";","else","return","jG",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","mp","(",")","{","vec2","kF",";","kF",".","x","=","a",".","x",";","kF",".","y","=","a",".","y",";","vec4","kG","=","texture2D","(","u_color",",","kF",")",";","vec4","kH","=","jl","(","0.0",",","1.0",")",";","vec4","kI","=","jl","(","1.0",",","0.0",")",";","vec4","kJ","=","jl","(","0.0",",","-","1.0",")",";","vec4","kK","=","jl","(","-","1.0",",","0.0",")",";","float","kL","=","jp","(","kH",")",";","float","kM","=","jp","(","kI",")",";","float","kN","=","jp","(","kJ",")",";","float","kO","=","jp","(","kK",")",";","float","kP","=","jp","(","kG",")",";","float","kQ","=","max","(","kL",",","kP",")",";","float","kR","=","min","(","kL",",","kP",")",";","float","kS","=","max","(","kM",",","kQ",")",";","float","kT","=","min","(","kM",",","kR",")",";","float","kU","=","max","(","kN",",","kO",")",";","float","kV","=","min","(","kN",",","kO",")",";","float","kW","=","max","(","kU",",","kS",")",";","float","kX","=","min","(","kV",",","kT",")",";","float","kY","=","kW","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","kZ","=","kW","-","kX",";","float","k_","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","kY",")",";","bool","la","=","kZ","<","k_",";","if","(","la",")","return","kG",";","vec4","lb","=","jl","(","-","1.0",",","-","1.0",")",";","vec4","lc","=","jl","(","1.0",",","1.0",")",";","vec4","ld","=","jl","(","1.0",",","-","1.0",")",";","vec4","le","=","jl","(","-","1.0",",","1.0",")",";","float","lf","=","jp","(","lb",")",";","float","lg","=","jp","(","lc",")",";","float","lh","=","jp","(","ld",")",";","float","li","=","jp","(","le",")",";","float","lj","=","kN","+","kL",";","float","lk","=","kO","+","kM",";","float","ll","=","1.0","/","kZ",";","float","lm","=","lj","+","lk",";","float","ln","=","(","-","2.0","*","kP",")","+","lj",";","float","lo","=","(","-","2.0","*","kP",")","+","lk",";","float","lp","=","lh","+","lg",";","float","lq","=","lf","+","lh",";","float","lr","=","(","-","2.0","*","kM",")","+","lp",";","float","ls","=","(","-","2.0","*","kN",")","+","lq",";","float","lt","=","lf","+","li",";","float","lu","=","li","+","lg",";","float","lv","=","(","abs","(","ln",")","*","2.0",")","+","abs","(","lr",")",";","float","lw","=","(","abs","(","lo",")","*","2.0",")","+","abs","(","ls",")",";","float","lx","=","(","-","2.0","*","kO",")","+","lt",";","float","ly","=","(","-","2.0","*","kL",")","+","lu",";","float","lz","=","abs","(","lx",")","+","lv",";","float","lA","=","abs","(","ly",")","+","lw",";","float","lB","=","lt","+","lp",";","float","lC","=","u_texel_size",".","x",";","bool","lD","=","lz",">=","lA",";","float","lE","=","lm","*","2.0","+","lB",";","if","(","!","lD",")","kN","=","kO",";","if","(","!","lD",")","kL","=","kM",";","if","(","lD",")","lC","=","u_texel_size",".","y",";","float","lF","=","(","lE","*","(","1.0","/","12.0",")",")","-","kP",";","float","lG","=","kN","-","kP",";","float","lH","=","kL","-","kP",";","float","lI","=","kN","+","kP",";","float","lJ","=","kL","+","kP",";","bool","lK","=","abs","(","lG",")",">=","abs","(","lH",")",";","float","lL","=","max","(","abs","(","lG",")",",","abs","(","lH",")",")",";","if","(","lK",")","lC","=","-","lC",";","float","lM","=","clamp","(","abs","(","lF",")","*","ll",",","0.0",",","1.0",")",";","vec2","lN",";","lN",".","x","=","kF",".","x",";","lN",".","y","=","kF",".","y",";","vec2","lO",";","lO",".","x","=","(","!","lD",")","?","0.0",":","u_texel_size",".","x",";","lO",".","y","=","(","lD",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","lD",")","lN",".","x","+=","lC","*","0.5",";","if","(","lD",")","lN",".","y","+=","lC","*","0.5",";","vec2","lP",";","lP",".","x","=","lN",".","x","-","lO",".","x",";","lP",".","y","=","lN",".","y","-","lO",".","y",";","vec2","lQ",";","lQ",".","x","=","lN",".","x","+","lO",".","x",";","lQ",".","y","=","lN",".","y","+","lO",".","y",";","float","lR","=","(","(","-","2.0",")","*","lM",")","+","3.0",";","float","lS","=","jp","(","texture2D","(","u_color",",","lP",")",")",";","float","lT","=","lM","*","lM",";","float","lU","=","jp","(","texture2D","(","u_color",",","lQ",")",")",";","if","(","!","lK",")","lI","=","lJ",";","float","lV","=","lL","*","1.0","/","4.0",";","float","lW","=","kP","-","lI","*","0.5",";","float","lX","=","lR","*","lT",";","bool","lY","=","lW","<","0.0",";","lS","-=","lI","*","0.5",";","lU","-=","lI","*","0.5",";","bool","lZ","=","abs","(","lS",")",">=","lV",";","bool","l_","=","abs","(","lU",")",">=","lV",";","if","(","!","lZ",")","lP",".","x","-=","lO",".","x","*","1.5",";","if","(","!","lZ",")","lP",".","y","-=","lO",".","y","*","1.5",";","bool","ma","=","(","!","lZ",")","||","(","!","l_",")",";","if","(","!","l_",")","lQ",".","x","+=","lO",".","x","*","1.5",";","if","(","!","l_",")","lQ",".","y","+=","lO",".","y","*","1.5",";","if","(","ma",")","{","if","(","!","lZ",")","lS","=","jp","(","texture2D","(","u_color",",","lP",".","xy",")",")",";","if","(","!","l_",")","lU","=","jp","(","texture2D","(","u_color",",","lQ",".","xy",")",")",";","if","(","!","lZ",")","lS","=","lS","-","lI","*","0.5",";","if","(","!","l_",")","lU","=","lU","-","lI","*","0.5",";","lZ","=","abs","(","lS",")",">=","lV",";","l_","=","abs","(","lU",")",">=","lV",";","if","(","!","lZ",")","lP",".","x","-=","lO",".","x","*","2.0",";","if","(","!","lZ",")","lP",".","y","-=","lO",".","y","*","2.0",";","ma","=","(","!","lZ",")","||","(","!","l_",")",";","if","(","!","l_",")","lQ",".","x","+=","lO",".","x","*","2.0",";","if","(","!","l_",")","lQ",".","y","+=","lO",".","y","*","2.0",";","if","(","ma",")","{","if","(","!","lZ",")","lS","=","jp","(","texture2D","(","u_color",",","lP",".","xy",")",")",";","if","(","!","l_",")","lU","=","jp","(","texture2D","(","u_color",",","lQ",".","xy",")",")",";","if","(","!","lZ",")","lS","=","lS","-","lI","*","0.5",";","if","(","!","l_",")","lU","=","lU","-","lI","*","0.5",";","lZ","=","abs","(","lS",")",">=","lV",";","l_","=","abs","(","lU",")",">=","lV",";","if","(","!","lZ",")","lP",".","x","-=","lO",".","x","*","2.0",";","if","(","!","lZ",")","lP",".","y","-=","lO",".","y","*","2.0",";","ma","=","(","!","lZ",")","||","(","!","l_",")",";","if","(","!","l_",")","lQ",".","x","+=","lO",".","x","*","2.0",";","if","(","!","l_",")","lQ",".","y","+=","lO",".","y","*","2.0",";","if","(","ma",")","{","if","(","!","lZ",")","lS","=","jp","(","texture2D","(","u_color",",","lP",".","xy",")",")",";","if","(","!","l_",")","lU","=","jp","(","texture2D","(","u_color",",","lQ",".","xy",")",")",";","if","(","!","lZ",")","lS","=","lS","-","lI","*","0.5",";","if","(","!","l_",")","lU","=","lU","-","lI","*","0.5",";","lZ","=","abs","(","lS",")",">=","lV",";","l_","=","abs","(","lU",")",">=","lV",";","if","(","!","lZ",")","lP",".","x","-=","lO",".","x","*","4.0",";","if","(","!","lZ",")","lP",".","y","-=","lO",".","y","*","4.0",";","ma","=","(","!","lZ",")","||","(","!","l_",")",";","if","(","!","l_",")","lQ",".","x","+=","lO",".","x","*","4.0",";","if","(","!","l_",")","lQ",".","y","+=","lO",".","y","*","4.0",";","if","(","ma",")","{","if","(","!","lZ",")","lS","=","jp","(","texture2D","(","u_color",",","lP",".","xy",")",")",";","if","(","!","l_",")","lU","=","jp","(","texture2D","(","u_color",",","lQ",".","xy",")",")",";","if","(","!","lZ",")","lS","=","lS","-","lI","*","0.5",";","if","(","!","l_",")","lU","=","lU","-","lI","*","0.5",";","lZ","=","abs","(","lS",")",">=","lV",";","l_","=","abs","(","lU",")",">=","lV",";","if","(","!","lZ",")","lP",".","x","-=","lO",".","x","*","2.0",";","if","(","!","lZ",")","lP",".","y","-=","lO",".","y","*","2.0",";","if","(","!","l_",")","lQ",".","x","+=","lO",".","x","*","2.0",";","if","(","!","l_",")","lQ",".","y","+=","lO",".","y","*","2.0",";","}","}","}","}","float","mb","=","kF",".","x","-","lP",".","x",";","float","mc","=","lQ",".","x","-","kF",".","x",";","if","(","!","lD",")","mb","=","kF",".","y","-","lP",".","y",";","if","(","!","lD",")","mc","=","lQ",".","y","-","kF",".","y",";","bool","md","=","(","lS","<","0.0",")","!=","lY",";","float","me","=","(","mc","+","mb",")",";","bool","mf","=","(","lU","<","0.0",")","!=","lY",";","float","mg","=","1.0","/","me",";","bool","mh","=","mb","<","mc",";","float","mi","=","min","(","mb",",","mc",")",";","bool","mj","=","mh","?","md",":","mf",";","float","mk","=","lX","*","lX",";","float","ml","=","(","mi","*","(","-","mg",")",")","+","0.5",";","float","mm","=","mk","*","FXAA_QUALITY_SUBPIX",";","float","mn","=","mj","?","ml",":","0.0",";","float","mo","=","max","(","mn",",","mm",")",";","if","(","!","lD",")","kF",".","x","+=","mo","*","lC",";","if","(","lD",")","kF",".","y","+=","mo","*","lC",";","return","texture2D","(","u_color",",","kF",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","kE","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","mp","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","ji","=","vec2","(","0.0",",","0.0",")",";","vec2","jj","=","u_texel_size",";","vec4","jk","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jk","*","0.0875447373698",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0858112354248",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0808139781061",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0731235112908",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0635705267419",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0530985673112",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0426125984122",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0328565115809",";","ji","+=","jj",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ji",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ji",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","jk",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_main",",","a",")",";","vec4","jj","=","texture2D","(","u_bloom",",","a",")",";","vec4","jk","=","ji",";","jk","+=","jj",";","gl_FragColor","=","vec4","(","jk",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/blur_depth.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","vec2","u_camera_range",";","uniform","float","u_blur_depth_edge_size",";","uniform","float","u_blur_depth_diff_threshold",";","varying","vec2","a",";","float","kN","(","in","vec2","kM",")","{","return","kL","(","u_depth",",","kM",",","u_camera_range",")",";","}","void","main","(",")","{","vec2","kO","=","u_texel_size",";","vec4","kP","=","texture2D","(","u_color",",","a",")",";","float","kQ","=","kN","(","a",")",";","float","kR","=","kN","(","a","+","u_blur_depth_edge_size","*","kO",")",";","float","kS","=","kN","(","a","-","u_blur_depth_edge_size","*","kO",")",";","float","kT","=","abs","(","kQ","-","kR",")",";","float","kU","=","abs","(","kQ","-","kS",")",";","float","kV","=","max","(","kT",",","kU",")",";","if","(","kV",">","u_blur_depth_diff_threshold",")","{","gl_FragColor","=","kP",";","return",";","}","vec2","kW","=","vec2","(","0.0",",","0.0",")",";","gl_FragColor","=","kP","*","0.2270270270",";","kW","+=","kO",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.1945945946",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.1945945946",",","kW","+=","kO",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.1216216216",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.1216216216",",","kW","+=","kO",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0540540541",",","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0540540541",",","kW","+=","kO",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kW",")","*","0.0162162162",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kW",")","*","0.0162162162",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_color",",","a",")",";","vec3","jj","=","ji",".","rgb",";","if","(","u_brightness","<","0.0",")","jj","=","jj","*","(","1.0","+","u_brightness",")",";","else","jj","=","jj","+","(","(","1.0","-","jj",")","*","u_brightness",")",";","jj","=","(","jj","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","jj","*=","u_exposure",";","vec3","jk","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","jl","=","dot","(","jj",",","jk",")",";","jj","=","mix","(","vec3","(","jl",")",",","jj",",","u_saturation",")",";","gl_FragColor","=","vec4","(","jj",",","ji",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cj","(","clamp","(","kL","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","kM","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","kN","=","kL","(","u_depth",",","a",",","u_camera_range",")",";","kN","*=","u_view_max_depth",";","float","kO",";","if","(","kN","<","u_dof_dist",")","kO","=","(","u_dof_dist","-","kN",")","/","u_dof_front",";","else","kO","=","(","kN","-","u_dof_dist",")","/","u_dof_rear",";","kO","=","clamp","(","kO",",","0.0",",","1.0",")",";","vec4","kP","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","kM",",","kP",",","kO",")",";","}","else","gl_FragColor","=","kM",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","jn","(","float","ji",",","float","jj",",","float","jk",")","{","vec2","jl","=","a","+","vec2","(","ji",",","jj",")","*","u_texel_size",";","vec4","jm","=","texture2D","(","u_sampler",",","jl",")","*","jk",";","return","cn","(","jm",")",";","}","void","main","(",")","{","float","jo","=","(","jn","(","-","1.0",",","-","1.0",",","-","1.0",")","+","jn","(","0.0",",","-","1.0",",","-","1.0",")","+","jn","(","1.0",",","-","1.0",",","-","1.0",")","+","jn","(","-","1.0",",","0.0",",","-","1.0",")","+","jn","(","0.0",",","0.0",",","8.0",")","+","jn","(","1.0",",","0.0",",","-","1.0",")","+","jn","(","-","1.0",",","1.0",",","-","1.0",")","+","jn","(","0.0",",","1.0",",","-","1.0",")","+","jn","(","1.0",",","1.0",",","-","1.0",")",")",";","jo","*=","1000.0",";","gl_FragColor","=","vec4","(","jo",",","jo",",","jo",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","ji",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","jj","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","jk","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","jl","=","jk",".","a","-","jj",".","a",";","if","(","jl","!=","0.0",")","{","float","jm","=","smoothstep","(","0.0",",","1.0",",","jk",".","a",")",";","if","(","jj",".","a","==","0.0",")","{","vec3","jn","=","u_glow_color",";","ed","(","jn",")",";","vec4","jo","=","vec4","(","clamp","(","jn",",","0.0",",","1.0",")",",","jm",")",";","gl_FragColor","=","mix","(","ji",",","jo",",","jm",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","vec3","u_sun_intensity",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kM",";","varying","vec2","kN",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","kO",";","void","main","(",")","{","vec3","kP","=","u_sun_intensity",";","vec2","kQ","=","(","kO",".","xy","-","a",")",";","float","kR","=","length","(","kQ",")",";","vec2","kS","=","u_radial_blur_step","*","kQ","/","kR",";","float","kT","=","kR","/","u_radial_blur_step",";","kS","*=","min","(","kT",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","kT","=","max","(","kT",",","STEPS_PER_PASS",")",";","vec2","kU","=","a",";","float","kV","=","0.0",";","for","(","float","kW","=","0.0",";","kW","<","STEPS_PER_PASS",";","kW","+=","1.0",")","{","if","(","kW","<=","kT",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","kX","=","kL","(","u_input",",","kU",",","u_camera_range",")",";","kV","+=","(","1.0","-","pow","(","kR",",","0.3",")",")","*","step","(","0.9",",","kX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kV","+=","texture2D","(","u_input",",","kU",")",".","r",";"]}]}}]},{type:"textline",tokens:["}","kU","+=","kS",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kY","=","a","+","kN",";","float","kZ","=","hC","(","vec2","(","2.5","*","(","kY",".","x",")",",","2.5","*","(","kY",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","hC","(","vec2","(","5.0","*","(","kY",".","x",")","-","0.66","*","u_time",",","5.0","*","(","kY",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","ih","(","vec2","(","7.5","*","(","kY",".","x",")","+","0.33","*","u_time",",","7.5","*","(","kY",".","y",")","-","0.33","*","u_time",")",")",";","kZ","*=","clamp","(","1.2","-","sqrt","(","0.2","*","kR",")",",","0.0",",","1.0",")","*","kM",";","kV","=","max","(","kZ",",","kV",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kV","/","STEPS_PER_PASS","*","clamp","(","kP",",","0.4",",","0.8",")",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","kM",";","varying","vec2","kN",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","kO",";","void","jp","(","in","vec4","ji",",","in","vec3","jj",",","out","vec3","jk",")","{","float","jl","=","ji",".","w","*","jj",".","x","+","ji",".","y","*","jj",".","z","-","ji",".","z","*","jj",".","y",";","float","jm","=","ji",".","w","*","jj",".","y","+","ji",".","z","*","jj",".","x","-","ji",".","x","*","jj",".","z",";","float","jn","=","ji",".","w","*","jj",".","z","+","ji",".","x","*","jj",".","y","-","ji",".","y","*","jj",".","x",";","float","jo","=","-","ji",".","x","*","jj",".","x","-","ji",".","y","*","jj",".","y","-","ji",".","z","*","jj",".","z",";","jk",".","x","=","jl","*","ji",".","w","-","jo","*","ji",".","x","-","jm","*","ji",".","z","+","jn","*","ji",".","y",";","jk",".","y","=","jm","*","ji",".","w","-","jo","*","ji",".","y","-","jn","*","ji",".","x","+","jl","*","ji",".","z",";","jk",".","z","=","jn","*","ji",".","w","-","jo","*","ji",".","z","-","jl","*","ji",".","y","+","jm","*","ji",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","jq","=","normalize","(","u_sun_direction",")",";","kO","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","jq",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","kM","=","1.0",";","vec3","jr","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","js",";","jp","(","u_camera_quat",",","jr",",","js",")",";","js","=","normalize","(","js",")",";","float","jt","=","dot","(","js",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","ju","=","atan","(","js",".","x",",","js",".","z",")",";","kN","=","vec2","(","-","ju",",","acos","(","jt",")",")",";","}","else","{","kM","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["kO",".","x","/=","kO",".","w",";","kO",".","y","/=","kO",".","w",";","kO",".","x","=","0.5","*","(","kO",".","x","+","1.0",")",";","kO",".","y","=","0.5","*","(","kO",".","y","+","1.0",")",";","kO","+=","99999.0","*","step","(","kO",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_main",",","a",")",";","eb","(","ji",".","rgb",")",";","vec3","jj","=","ji",".","rgb","+","u_god_rays_intensity","*","(","texture2D","(","u_god_rays",",","a",")",")",".","rgb",";","ed","(","jj",")",";","gl_FragColor",".","rgb","=","jj",";","gl_FragColor",".","a","=","ji",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_color",",","a",")","*","0.38026",";","ji","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","ji","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","ji","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","ji","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","ji","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","ji","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","ji","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","ji","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","ji",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_input",",","a",")",";","float","jj","=","dot","(","ji",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","jj",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","ji",";","float","jj","=","0.0",";","for","(","float","jk","=","0.025",";","jk","<","1.0",";","jk","+=","0.05",")","for","(","float","jl","=","0.025",";","jl","<","1.0",";","jl","+=","0.05",")","{","ji","=","max","(","texture2D","(","u_input",",","vec2","(","jk",",","jl",")",")",".","r",",","0.01",")",";","jj","+=","log","(","ji",")",";","}","float","jm","=","exp","(","jj","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","jm",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","kP",";","void","main","(",")","{","float","kQ","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","kR","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","kS","=","texture2D","(","u_main",",","a",")",";","float","kT","=","kR","/","kQ",";","float","kU","=","u_bloom_edge_lum",";","gl_FragColor","=","kS","*","max","(","kT","-","kU",",","0.0",")","*","kP",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","kP",";","const","vec3","ji","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","jq","(","in","vec4","jj",",","in","vec3","jk",",","out","vec3","jl",")","{","float","jm","=","jj",".","w","*","jk",".","x","+","jj",".","y","*","jk",".","z","-","jj",".","z","*","jk",".","y",";","float","jn","=","jj",".","w","*","jk",".","y","+","jj",".","z","*","jk",".","x","-","jj",".","x","*","jk",".","z",";","float","jo","=","jj",".","w","*","jk",".","z","+","jj",".","x","*","jk",".","y","-","jj",".","y","*","jk",".","x",";","float","jp","=","-","jj",".","x","*","jk",".","x","-","jj",".","y","*","jk",".","y","-","jj",".","z","*","jk",".","z",";","jl",".","x","=","jm","*","jj",".","w","-","jp","*","jj",".","x","-","jn","*","jj",".","z","+","jo","*","jj",".","y",";","jl",".","y","=","jn","*","jj",".","w","-","jp","*","jj",".","y","-","jo","*","jj",".","x","+","jm","*","jj",".","z",";","jl",".","z","=","jo","*","jj",".","w","-","jp","*","jj",".","z","-","jm","*","jj",".","y","+","jn","*","jj",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","jr",";","jq","(","u_camera_quat",",","ji",",","jr",")",";","kP","=","dot","(","-","jr",",","u_sun_direction",")","*","u_bloom_key",";","kP","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","ji","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","jj","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","ji","-","jj",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","ji","+","u_motion_blur_exp","*","jj",";","}","else","{","gl_FragColor","=","ji",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ji","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","ji",".","r","+","ji",".","g","+","ji",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jj","=","vec2","(","0.0",",","0.0",")",";","vec2","jk","=","u_texel_size",";","vec4","jl",";","jl","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jl","*","0.2270270270",";","jj","+=","jk",";","jl","=","texture2D","(","u_color",",","a","+","jj",")",";","gl_FragColor","+=","jl","*","0.1945945946",";","jl","=","texture2D","(","u_color",",","a","-","jj",")",";","gl_FragColor","+=","jl","*","0.1945945946",";","jj","+=","jk",";","jl","=","texture2D","(","u_color",",","a","+","jj",")",";","gl_FragColor","+=","jl","*","0.1216216216",";","jl","=","texture2D","(","u_color",",","a","-","jj",")",";","gl_FragColor","+=","jl","*","0.1216216216",";","jj","+=","jk",";","jl","=","texture2D","(","u_color",",","a","+","jj",")",";","gl_FragColor","+=","jl","*","0.0540540541",";","jl","=","texture2D","(","u_color",",","a","-","jj",")",";","gl_FragColor","+=","jl","*","0.0540540541",";","jj","+=","jk",";","jl","=","texture2D","(","u_color",",","a","+","jj",")",";","gl_FragColor","+=","jl","*","0.0162162162",";","jl","=","texture2D","(","u_color",",","a","-","jj",")",";","gl_FragColor","+=","jl","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","jk","=","u_texel_size",";","vec4","jl","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","jl",";","if","(","jl",".","a","==","0.0",")","{","jl","=","texture2D","(","u_color",",","a","+","jk",")",";","if","(","jl",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","jl",".","a",")",";","else","{","jl","=","texture2D","(","u_color",",","a","-","jk",")",";","if","(","jl",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","jl",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kR",";","varying","vec4","kS",";","varying","vec4","kT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","kU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","k_","(","vec2","kV",",","sampler2D","kW",")","{","float","kX","=","texture2D","(","kW",",","kV",")",".","r",";","float","kY","=","texture2D","(","kW",",","kR",".","xy",")",".","r",";","float","kZ","=","texture2D","(","kW",",","kR",".","zw",")",".","r",";","return","vec3","(","kX",",","kY",",","kZ",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lf","(","vec2","la",",","sampler2D","lb",")","{","vec3","lc","=","k_","(","la",",","lb",")",";","vec2","ld","=","abs","(","lc",".","xx","-","lc",".","yz",")",";","vec2","le","=","step","(","SMAA_PREDICATION_THRESHOLD",",","ld",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","le",")",";","}"]}]}}]},{type:"textline",tokens:["void","lj","(","bvec2","lg",",","inout","vec2","lh",",","vec2","li",")","{","if","(","lg",".","x",")","lh",".","x","=","li",".","x",";","if","(","lg",".","y",")","lh",".","y","=","li",".","y",";","}","void","lj","(","bvec4","lk",",","inout","vec4","ll",",","vec4","lm",")","{","lj","(","lk",".","xy",",","ll",".","xy",",","lm",".","xy",")",";","lj","(","lk",".","zw",",","ll",".","zw",",","lm",".","zw",")",";","}","vec2","lo","(","vec2","ln",")","{","return","sign","(","ln",")","*","floor","(","abs","(","ln",")","+",".5",")",";","}","vec4","lo","(","vec4","lp",")","{","return","sign","(","lp",")","*","floor","(","abs","(","lp",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lG","(","vec2","lq",",","sampler2D","lr"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","ls"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lt","=","lf","(","lq",",","ls",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lt","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","lu","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","lv","=","dot","(","texture2D","(","lr",",","lq",")",".","rgb",",","lu",")",";","float","lw","=","dot","(","texture2D","(","lr",",","kR",".","xy",")",".","rgb",",","lu",")",";","float","lx","=","dot","(","texture2D","(","lr",",","kR",".","zw",")",".","rgb",",","lu",")",";","vec4","ly",";","ly",".","xy","=","abs","(","lv","-","vec2","(","lw",",","lx",")",")",";","vec2","lz","=","step","(","lt",",","ly",".","xy",")",";","if","(","dot","(","lz",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","lA","=","dot","(","texture2D","(","lr",",","kS",".","xy",")",".","rgb",",","lu",")",";","float","lB","=","dot","(","texture2D","(","lr",",","kS",".","zw",")",".","rgb",",","lu",")",";","ly",".","zw","=","abs","(","lv","-","vec2","(","lA",",","lB",")",")",";","vec2","lC","=","max","(","ly",".","xy",",","ly",".","zw",")",";","float","lD","=","dot","(","texture2D","(","lr",",","kT",".","xy",")",".","rgb",",","lu",")",";","float","lE","=","dot","(","texture2D","(","lr",",","kT",".","zw",")",".","rgb",",","lu",")",";","ly",".","zw","=","abs","(","vec2","(","lw",",","lx",")","-","vec2","(","lD",",","lE",")",")",";","lC","=","max","(","lC",".","xy",",","ly",".","zw",")",";","float","lF","=","max","(","lC",".","x",",","lC",".","y",")",";","lz",".","xy","*=","step","(","lF",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","ly",".","xy",")",";","return","lz",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lI","(","vec2","lH",")","{","lH",".","r","=","lH",".","r","*","abs","(","5.0","*","lH",".","r","-","5.0","*","0.75",")",";","return","lo","(","lH",")",";","}","vec4","lI","(","vec4","lJ",")","{","lJ",".","rb","=","lJ",".","rb","*","abs","(","5.0","*","lJ",".","rb","-","5.0","*","0.75",")",";","return","lo","(","lJ",")",";","}","vec2","lR","(","sampler2D","lK",",","vec2","lL",",","vec2","lM",",","out","vec2","lN",")","{","vec4","lO","=","vec4","(","lL",",","-","1.0",",","1.0",")",";","vec3","lP","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","lQ","=","0",";","lQ","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","lQ","++",")","{","if","(","lO",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","lO",".","w",">","0.9",")","{","lO",".","xyz","+=","lP","*","vec3","(","lM",",","1.0",")",";","lN","=","texture2D","(","lK",",","lO",".","xy",",","0.0",")",".","rg",";","lO",".","w","=","dot","(","lN",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","lO",".","zw",";","}","vec2","lZ","(","sampler2D","lS",",","vec2","lT",",","vec2","lU",",","out","vec2","lV",")","{","vec4","lW","=","vec4","(","lT",",","-","1.0",",","1.0",")",";","lW",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","lX","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","lY","=","0",";","lY","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","lY","++",")","{","if","(","lW",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","lW",".","w",">","0.9",")","{","lW",".","xyz","=","lX","*","vec3","(","lU",",","1.0",")","+","lW",".","xyz",";","lV","=","texture2D","(","lS",",","lW",".","xy",",","0.0",")",".","rg",";","lV","=","lI","(","lV",")",";","lW",".","w","=","dot","(","lV",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","lW",".","zw",";","}","vec2","me","(","sampler2D","l_",",","vec2","ma",",","vec2","mb",",","float","mc",")","{","vec2","md","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","mb","+","ma",";","md","=","SMAA_AREATEX_PIXEL_SIZE","*","md","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","md",".","x","+=","0.5",";","md",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","mc",";","return","texture2D","(","l_",",","md",",","0.0",")",".","rg",";","}","vec2","mt","(","sampler2D","mf",",","sampler2D","mg",",","vec2","mh",",","vec2","mi",",","vec4","mj",")","{","vec2","mk","=","vec2","(","0.0",",","0.0",")",";","vec4","ml",";","vec2","mm",";","if","(","mi",".","r",">","0.0",")","{","ml",".","xz","=","lR","(","mf",",","mh",",","vec2","(","-","1.0",",","1.0",")",",","mm",")",";","ml",".","x","+=","float","(","mm",".","y",">","0.9",")",";","}","else","ml",".","xz","=","vec2","(","0.0",",","0.0",")",";","ml",".","yw","=","lR","(","mf",",","mh",",","vec2","(","1.0",",","-","1.0",")",",","mm",")",";","if","(","ml",".","x","+","ml",".","y",">","2.0",")","{","vec4","mn","=","vec4","(","-","ml",".","x","+","0.25",",","ml",".","x",",","ml",".","y",",","-","ml",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","mh",".","xyxy",";","vec4","mo",";","mo",".","xy","=","texture2D","(","mf",",","mn",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","mo",".","zw","=","texture2D","(","mf",",","mn",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","mo",".","yxwz","=","lI","(","mo",".","xyzw",")",";","vec2","mp","=","vec2","(","2.0",",","2.0",")","*","mo",".","xz","+","mo",".","yw",";","lj","(","bvec2","(","step","(","0.9",",","ml",".","zw",")",")",",","mp",",","vec2","(","0.0",",","0.0",")",")",";","mk","+=","me","(","mg",",","ml",".","xy",",","mp",",","mj",".","z",")",";","}","ml",".","xz","=","lZ","(","mf",",","mh",",","vec2","(","-","1",",","-","1",")",",","mm",")",";","if","(","texture2D","(","mf",",","mh","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","ml",".","yw","=","lZ","(","mf",",","mh",",","vec2","(","1",",","1",")",",","mm",")",";","ml",".","y","+=","float","(","mm",".","y",">","0.9",")",";","}","else","ml",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","ml",".","x","+","ml",".","y",">","2.0",")","{","vec4","mq","=","vec4","(","-","ml",".","x",",","-","ml",".","x",",","ml",".","y",",","ml",".","y",")","*","u_texel_size",".","xyxy","+","mh",".","xyxy",";","vec4","mr",";","mr",".","x","=","texture2D","(","mf",",","mq",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","mr",".","y","=","texture2D","(","mf",",","mq",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","mr",".","zw","=","texture2D","(","mf",",","mq",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","ms","=","vec2","(","2.0",",","2.0",")","*","mr",".","xz","+","mr",".","yw",";","lj","(","bvec2","(","step","(","0.9",",","ml",".","zw",")",")",",","ms",",","vec2","(","0",",","0",")",")",";","mk","+=","me","(","mg",",","ml",".","xy",",","ms",",","mj",".","w",")",".","gr",";","}","return","mk",";","}"]}]}}]},{type:"textline",tokens:["float","mz","(","sampler2D","mu",",","vec2","mv",",","float","mw",")","{","vec2","mx","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","my","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","mw",",","1.0",")",";","mx","+=","vec2","(","-","1.0",",","1.0",")",";","my","+=","vec2","(","0.5",",","-","0.5",")",";","mx","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","my","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","mu",",","mx","*","mv","+","my",",","0.0",")",".","r",";","}","float","mH","(","sampler2D","mA",",","sampler2D","mB",",","vec2","mC",",","float","mD",")","{","vec2","mE","=","vec2","(","0.0",",","1.0",")",";","for","(","int","mF","=","0",";","mF","<","SMAA_MAX_SEARCH_STEPS",";","mF","++",")","{","if","(","mC",".","x",">","mD","&&","mE",".","g",">","0.8281","&&","mE",".","r","==","0.0",")","{","mE","=","texture2D","(","mA",",","mC",",","0.0",")",".","rg",";","mC","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","mC",";","}","}","float","mG","=","-","(","255.0","/","127.0",")","*","mz","(","mB",",","mE",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","mG","+","mC",".","x",";","}","float","mP","(","sampler2D","mI",",","sampler2D","mJ",",","vec2","mK",",","float","mL",")","{","vec2","mM","=","vec2","(","0.0",",","1.0",")",";","for","(","int","mN","=","0",";","mN","<","SMAA_MAX_SEARCH_STEPS",";","mN","++",")","{","if","(","mK",".","x","<","mL","&&","mM",".","g",">","0.8281","&&","mM",".","r","==","0.0",")","{","mM","=","texture2D","(","mI",",","mK",",","0.0",")",".","rg",";","mK","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","mK",";","}","}","float","mO","=","-","(","255.0","/","127.0",")","*","mz","(","mJ",",","mM",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","mO","+","mK",".","x",";","}","float","mX","(","sampler2D","mQ",",","sampler2D","mR",",","vec2","mS",",","float","mT",")","{","vec2","mU","=","vec2","(","1.0",",","0.0",")",";","for","(","int","mV","=","0",";","mV","<","SMAA_MAX_SEARCH_STEPS",";","mV","++",")","{","if","(","mS",".","y",">","mT","&&","mU",".","r",">","0.8281","&&","mU",".","g","==","0.0",")","{","mU","=","texture2D","(","mQ",",","mS",",","0.0",")",".","rg",";","mS","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","mS",";","}","}","float","mW","=","-","(","255.0","/","127.0",")","*","mz","(","mR",",","mU",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","mW","+","mS",".","y",";","}","float","ne","(","sampler2D","mY",",","sampler2D","mZ",",","vec2","m_",",","float","na",")","{","vec2","nb","=","vec2","(","1.0",",","0.0",")",";","for","(","int","nc","=","0",";","nc","<","SMAA_MAX_SEARCH_STEPS",";","nc","++",")","{","if","(","m_",".","y","<","na","&&","nb",".","r",">","0.8281","&&","nb",".","g","==","0.0",")","{","nb","=","texture2D","(","mY",",","m_",",","0.0",")",".","rg",";","m_","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","m_",";","}","}","float","nd","=","-","(","255.0","/","127.0",")","*","mz","(","mZ",",","nb",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","nd","+","m_",".","y",";","}","vec2","nl","(","sampler2D","nf",",","vec2","ng",",","float","nh",",","float","ni",",","float","nj",")","{","vec2","nk","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","lo","(","4.0","*","vec2","(","nh",",","ni",")",")","+","ng",";","nk","=","SMAA_AREATEX_PIXEL_SIZE","*","nk","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","nk",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","nj","+","nk",".","y",";","return","texture2D","(","nf",",","nk",",","0.0",")",".","rg",";","}","void","nt","(","sampler2D","nm",",","inout","vec2","nn",",","vec4","no",",","vec2","np",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nq","=","step","(","np",".","xy",",","np",".","yx",")",";","vec2","nr","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","nq",";","nr","/=","nq",".","x","+","nq",".","y",";","vec2","ns","=","vec2","(","1.0",",","1.0",")",";","ns",".","x","-=","nr",".","x","*","texture2D","(","nm",",","no",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","ns",".","x","-=","nr",".","y","*","texture2D","(","nm",",","no",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","ns",".","y","-=","nr",".","x","*","texture2D","(","nm",",","no",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","ns",".","y","-=","nr",".","y","*","texture2D","(","nm",",","no",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","nn","*=","clamp","(","ns",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","nB","(","sampler2D","nu",",","inout","vec2","nv",",","vec4","nw",",","vec2","nx",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ny","=","step","(","nx",".","xy",",","nx",".","yx",")",";","vec2","nz","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","ny",";","nz","/=","ny",".","x","+","ny",".","y",";","vec2","nA","=","vec2","(","1.0",",","1.0",")",";","nA",".","x","-=","nz",".","x","*","texture2D","(","nu",",","nw",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","nA",".","x","-=","nz",".","y","*","texture2D","(","nu",",","nw",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","nA",".","y","-=","nz",".","x","*","texture2D","(","nu",",","nw",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","nA",".","y","-=","nz",".","y","*","texture2D","(","nu",",","nw",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","nv","*=","clamp","(","nA",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","nU","(","vec2","nC",",","vec2","nD",",","sampler2D","nE",",","sampler2D","nF",",","sampler2D","nG",",","vec4","nH",")","{","vec4","nI","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","nJ","=","texture2D","(","nE",",","nC",")",".","rg",";","if","(","nJ",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["nI",".","rg","=","mt","(","nE",",","nF",",","nC",",","nJ",",","nH",")",";","if","(","nI",".","r","==","-","nI",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","nK",";","vec3","nL",";","nL",".","x","=","mH","(","nE",",","nG",",","kR",".","xy",",","kT",".","x",")",";","nL",".","y","=","kS",".","y",";","nK",".","x","=","nL",".","x",";","float","nM","=","texture2D","(","nE",",","nL",".","xy",",","0.0",")",".","r",";","nL",".","z","=","mP","(","nE",",","nG",",","kR",".","zw",",","kT",".","y",")",";","nK",".","y","=","nL",".","z",";","nK","=","abs","(","lo","(","nK","/","u_texel_size",".","xx","-","nD",".","xx",")",")",";","vec2","nN","=","sqrt","(","nK",")",";","float","nO","=","texture2D","(","nE",",","nL",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","nI",".","rg","=","nl","(","nF",",","nN",",","nM",",","nO",",","nH",".","y",")",";","nL",".","y","=","nC",".","y",";","nt","(","nE",",","nI",".","rg",",","nL",".","xyzy",",","nK",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","nJ",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","nJ",".","r",">","0.0",")","{","vec2","nP",";","vec3","nQ",";","nQ",".","y","=","mX","(","nE",",","nG",",","kS",".","xy",",","kT",".","z",")",";","nQ",".","x","=","kR",".","x",";","nP",".","x","=","nQ",".","y",";","float","nR","=","texture2D","(","nE",",","nQ",".","xy",",","0.0",")",".","g",";","nQ",".","z","=","ne","(","nE",",","nG",",","kS",".","zw",",","kT",".","w",")",";","nP",".","y","=","nQ",".","z",";","nP","=","abs","(","lo","(","nP","/","u_texel_size",".","yy","-","nD",".","yy",")",")",";","vec2","nS","=","sqrt","(","nP",")",";","float","nT","=","texture2D","(","nE",",","nQ",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","nI",".","ba","=","nl","(","nF",",","nS",",","nR",",","nT",",","nH",".","x",")",";","nQ",".","x","=","nC",".","x",";","nB","(","nE",",","nI",".","ba",",","nQ",".","xyxz",",","nP",")",";","}","return","nI",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oh","(","vec2","nV",",","sampler2D","nW",",","sampler2D","nX"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nY"]}]}}]},{type:"textline",tokens:[")","{","vec4","nZ",";","nZ",".","x","=","texture2D","(","nX",",","kQ",".","xy",")",".","a",";","nZ",".","y","=","texture2D","(","nX",",","kQ",".","zw",")",".","g",";","nZ",".","wz","=","texture2D","(","nX",",","nV",")",".","xz",";","if","(","dot","(","nZ",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","n_","=","texture2D","(","nW",",","nV",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oa","=","2.0","*","texture2D","(","nY",",","nV",")",".","rg","-","1.0",";","if","(","n_",".","a","!=","0.0",")","n_",".","a","=","sqrt","(","5.0","*","length","(","oa",")",")",";"]}]}}]},{type:"textline",tokens:["return","n_",";","}","else","{","bool","ob","=","max","(","nZ",".","x",",","nZ",".","z",")",">","max","(","nZ",".","y",",","nZ",".","w",")",";","vec4","oc","=","vec4","(","0.0",",","nZ",".","y",",","0.0",",","nZ",".","w",")",";","vec2","od","=","nZ",".","yw",";","lj","(","bvec4","(","ob",",","ob",",","ob",",","ob",")",",","oc",",","vec4","(","nZ",".","x",",","0.0",",","nZ",".","z",",","0.0",")",")",";","lj","(","bvec2","(","ob",",","ob",")",",","od",",","nZ",".","xz",")",";","od","/=","dot","(","od",",","vec2","(","1.0",",","1.0",")",")",";","vec4","oe","=","oc","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","nV",".","xyxy",";","vec4","of","=","od",".","x","*","texture2D","(","nW",",","oe",".","xy",",","0.0",")",";","of","+=","od",".","y","*","texture2D","(","nW",",","oe",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","og","=","od",".","x","*","(","2.0","*","texture2D","(","nY",",","oe",".","xy",",","0.0",")",".","rg","-","1.0",")",";","og","+=","od",".","y","*","(","2.0","*","texture2D","(","nY",",","oe",".","zw",",","0.0",")",".","rg","-","1.0",")",";","if","(","of",".","a","!=","0.0",")","of",".","a","=","sqrt","(","5.0","*","length","(","og",")",")",";"]}]}}]},{type:"textline",tokens:["return","of",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","or","(","vec2","oi",",","sampler2D","oj",",","sampler2D","ok"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","ol"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","om","=","texture2D","(","oj",",","oi",")",";","vec4","on","=","texture2D","(","ok",",","oi",")",";","float","oo","=","abs","(","om",".","a","*","om",".","a","-","on",".","a","*","on",".","a",")","/","5.0",";","float","op","=","0.5","*","clamp","(","1.0","-","sqrt","(","oo",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","oq","=","mix","(","om",",","on",",","op",")",";","oq",".","a","=","1.0",";","return","oq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","om","=","texture2D","(","oj",",","oi",")",";","vec4","on","=","texture2D","(","ok",",","oi",")",";","return","mix","(","om",",","on",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","os","=","vec4","(","lG","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","os","=","nU","(","a",",","kU",",","u_color",",","u_area_tex",",","u_search_tex",",","vec4","(","0.0",")",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","os","=","oh","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","os","=","vec4","(","or","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","os","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","os",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kR",";","varying","vec4","kS",";","varying","vec4","kT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","kU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","jj","(","vec2","ji",")","{","kR","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","ji",".","xyxy",";","kS","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","ji",".","xyxy",";","kT","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","ji",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","jm","(","vec2","jk",",","out","vec2","jl",")","{","jl","=","jk","/","u_texel_size",";","kR","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","jk",".","xyxy",";","kS","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","jk",".","xyxy",";","kT","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","kR",".","xz",",","kS",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","jo","(","vec2","jn",")","{","kQ","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","jn",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["jj","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["jm","(","a",",","kU",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["jo","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"define",name:"SSAO_QUALITY_16",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["2"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","vec2","u_texel_size",";","uniform","float","u_view_max_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_dithering_amount",";","uniform","float","u_ssao_gauss_center",";","uniform","float","u_ssao_gauss_width_square",";","uniform","float","u_ssao_gauss_width_left_square",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","vec2","k_","(","vec2","kV",")","{","float","kW","=","dot","(","kV",",","vec2","(","12.9898",",","78.233",")",")",";","float","kX","=","dot","(","kV",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","kY","=","fract","(","sin","(","kW",")","*","43758.5453",")","*","2.0","-","1.0",";","float","kZ","=","fract","(","sin","(","kX",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","kY",",","kZ",")",";","}","float","lb","(","in","vec2","la",")","{","return","kL","(","u_depth",",","la",",","u_camera_range",")",";","}","float","lj","(","in","float","lc",",","in","float","ld",",","inout","int","le",")","{","float","lf","=","u_ssao_gauss_width_square",";","float","lg","=","(","lc","-","ld",")","*","100.0",";","if","(","lg","<","u_ssao_gauss_center",")","lf","=","u_ssao_gauss_width_left_square",";","else","le","=","1",";","float","lh","=","lg","-","u_ssao_gauss_center",";","float","li","=","exp","(","-","2.0","*","lh","*","lh","/","lf",")",";","return","li",";","}","float","ls","(","float","lk",",","vec2","ll",")","{","float","lm","=","0.0",";","float","ln","=","0.0",";","float","lo","=","max","(","1.0",",","u_view_max_depth","/","100.0",")",";","lk","*=","lo",";","ll","/=","lk",";","vec2","lp","=","a","+","ll",";","vec2","lq","=","a","-","ll",";","int","lr","=","0",";","lm","=","lj","(","lk",",","lo","*","lb","(","lp",")",",","lr",")",";","if","(","lr",">","0","||","lp",".","y","<","0.0","||","lp",".","y",">","1.0","||","lp",".","x","<","0.0","||","lp",".","x",">","1.0",")","{","ln","=","lj","(","lo","*","lb","(","lq",")",",","lk",",","lr",")",";","lm","+=","(","1.0","-","lm",")","*","ln",";","}","return","lm",";","}","void","main","(",")","{","vec2","lt","=","k_","(","a",")","*","u_ssao_dithering_amount",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["lt","*=","1.5",";"]}]}}]},{type:"textline",tokens:["float","lu","=","lb","(","a",")",";","float","lv","=","0.0",";","vec2","lw","=","u_texel_size","*","0.5",";","for","(","int","lx","=","0",";","lx","<","4",";","lx","++",")","{"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","lx","==","0","||","lx","==","2",")","{"]}]}}]},{type:"textline",tokens:["lv","+=","ls","(","lu",",","lw",")",";","lv","+=","ls","(","lu",",","vec2","(","lw",".","x",",","-","lw",".","y",")",")",";","lv","+=","ls","(","lu",",","vec2","(","-","lw",".","x",",","lw",".","y",")",")",";","lv","+=","ls","(","lu",",","vec2","(","-","lw",".","x",",","-","lw",".","y",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","if","(","lx","==","1","||","lx","==","3",")","{"]}]}}]},{type:"textline",tokens:["lv","+=","ls","(","lu",",","vec2","(","lw",".","x","*","1.2",",","0.0",")",")",";","lv","+=","ls","(","lu",",","vec2","(","-","lw",".","x","*","1.2",",","0.0",")",")",";","lv","+=","ls","(","lu",",","vec2","(","0.0",",","lw",".","y","*","1.2",")",")",";","lv","+=","ls","(","lu",",","vec2","(","0.0",",","-","lw",".","y","*","1.2",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["lw","+=","lt",";","lw","*=","u_ssao_radius_increase",";","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["lv","=","1.0","-","lv","/","16.0",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["lv","=","1.0","-","lv","/","32.0",";"]}]}}]},{type:"textline",tokens:["float","ly","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","lu",")",";","lv","=","(","1.0","-","ly",")","+","lv","*","ly",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["lv","=","1.0",";"]}]}}]},{type:"textline",tokens:["float","lz","=","texture2D","(","u_color",",","a",")",".","r",";","gl_FragColor","=","vec4","(","lz",",","lv",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","ji","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","jj","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","ji","-","1.0",",","1.0",")",";","vec4","jk","=","u_view_proj_inverse","*","jj",";","vec4","jl","=","jk","/","jk",".","w",";","vec4","jm","=","jj",";","vec4","jn","=","u_view_proj_prev","*","jl",";","jn","/=","jn",".","w",";","vec2","jo","=","(","jm",".","xy","-","jn",".","xy",")","/","2.0",";","gl_FragColor","=","vec4","(","jo","/","2.0","+","0.5",",","0.0",",","1.0",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","b","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","e","(","float","c",",","float","d",")","{","return","abs","(","c","-","d",")","<","EPSILON",";","}","bool","h","(","vec3","f",",","vec3","g",")","{","return","any","(","lessThan","(","abs","(","f","-","g",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","k","(","in","vec4","i",",","in","vec3","j",")","{","return","j","+","2.0","*","cross","(","i",".","xyz",",","cross","(","i",".","xyz",",","j",")","+","i",".","w","*","j",")",";","}","mat4","l","(",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","n","(","float","m",")","{","return","mat4","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","cos","(","m",")",",","sin","(","m",")",",","0.0",",","0.0",",","-","sin","(","m",")",",","cos","(","m",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","p","(","float","o",")","{","return","mat4","(","cos","(","o",")",",","0.0",",","-","sin","(","o",")",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","sin","(","o",")",",","0.0",",","cos","(","o",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","mat4","r","(","float","q",")","{","return","mat4","(","cos","(","q",")",",","sin","(","q",")",",","0.0",",","0.0",",","-","sin","(","q",")",",","cos","(","q",")",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","1.0",")",";","}","b","t","(","in","b","s",")","{","return","b","(","s",".","a",",","s",".","b",",","normalize","(","s",".","c",")",",","normalize","(","s",".","d",")",",","normalize","(","s",".","e",")",",","s",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","u","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","A","(","vec3","v",",","mat4","w",")","{","vec3","x","=","vec3","(","w","[","0","]","[","0","]",",","w","[","1","]","[","0","]",",","w","[","2","]","[","0","]",")",";","vec3","y","=","vec3","(","w","[","0","]","[","1","]",",","w","[","1","]","[","1","]",",","w","[","2","]","[","1","]",")",";","vec3","z","=","vec3","(","w","[","0","]","[","2","]",",","w","[","1","]","[","2","]",",","w","[","2","]","[","2","]",")",";","y","=","cross","(","z",",","x",")",";","return","mat4","(","vec4","(","x",",","0.0",")",",","vec4","(","y",",","0.0",")",",","vec4","(","z",",","0.0",")",",","vec4","(","v",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","G","(","vec3","B",",","vec3","C",")","{","vec3","D","=","B","-","C",";","D",".","y","=","0.0",";","D","=","normalize","(","D",")",";","vec3","E","=","normalize","(","cross","(","u",",","D",")",")",";","vec3","F","=","normalize","(","cross","(","D",",","E",")",")",";","return","mat4","(","vec4","(","E",",","0.0",")",",","vec4","(","F",",","0.0",")",",","vec4","(","D",",","0.0",")",",","vec4","(","C",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","R","(","in","vec3","H",",","float","I",",","float","J",",","float","L",",","vec3","M",")","{","float","N","=","fract","(","length","(","M",")","/","0.17",")",";","float","O","=","L","+","N","/","10.0",";","float","P","=","N",";","if","(","L","!=","0.0",")","P","/=","L",";","H","*=","1.0","+","0.5","*","sin","(","I",")",";","float","Q","=","length","(","H",")","*","J","*","sin","(","2.0","*","3.14","*","I","*","O","+","P",")",";","return","r","(","Q",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ab","(","in","vec3","S",",","in","vec3","T",",","in","mat4","U",")","{"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD_SPHERICAL","||","!","HAIR_BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","V","=","A","(","T",",","U",")",";"]}]}},{type:"elif",expression:["HAIR_BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","W","=","fract","(","(","T",".","x","*","1.43","+","T",".","y","*","0.123","+","T",".","z","*","6.1",")",")",";","float","X","=","2.0","*","M_PI","*","W",";","vec3","Y","=","normalize","(","vec3","(","U","[","0","]","[","2","]",",","0.0",",","U","[","2","]","[","2","]",")",")",";","float","Z","=","acos","(","Y","[","2","]",")",";","if","(","Y","[","0","]","<","0.0",")","Z","=","2.0","*","M_PI","-","Z",";","float","_","=","Z","-","X",";","if","(","_","<","0.0",")","_","=","2.0","*","M_PI","+","_",";","float","aa","=","X",";","if","(","_","<=","MAX_BILLBOARD_ANGLE",")","aa","+=","_",";","else","if","(","_","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","aa","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","_","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","_","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","aa","+=","_","-","M_PI",";","else","if","(","_","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","aa","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","_","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","aa","+=","_","-","2.0","*","M_PI",";","mat4","V","=","p","(","aa",")",";","V","[","3","]","=","vec4","(","T",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","V","=","G","(","S",",","T",")",";"]}]}}]},{type:"textline",tokens:["return","V",";","}","b","ai","(","in","vec3","ac",",","in","vec3","ad",",","in","vec3","ae",",","in","vec3","af",",","in","vec3","ag",",","in","mat4","ah",")","{","ac","=","(","ah","*","vec4","(","ac",",","1.0",")",")",".","xyz",";","ad","=","(","ah","*","vec4","(","ad",",","1.0",")",")",".","xyz",";","ae","=","(","ah","*","vec4","(","ae",",","0.0",")",")",".","xyz",";","af","=","(","ah","*","vec4","(","af",",","0.0",")",")",".","xyz",";","ag","=","(","ah","*","vec4","(","ag",",","0.0",")",")",".","xyz",";","return","t","(","b","(","ac",",","ad",",","ae",",","af",",","ag",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","al","(","vec2","aj",",","vec3","ak",")","{","return","(","aj","+","0.5",")","*","ak",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","au","(","in","vec4","am",",","in","vec4","an",",","in","float","ao",")","{","float","ap","=","am","[","0","]","*","an","[","0","]","+","am","[","1","]","*","an","[","1","]","+","am","[","2","]","*","an","[","2","]","+","am","[","3","]","*","an","[","3","]",";","if","(","ap","<","0.0",")","{","an","*=","-","1.0",";","ap","=","-","ap",";","}","if","(","abs","(","ap",")",">=","1.0",")","return","am",";","float","aq","=","acos","(","ap",")",";","float","ar","=","sqrt","(","1.0","-","ap","*","ap",")",";","if","(","abs","(","ar",")","<","0.001",")","return","vec4","(","am","*","0.5","+","an","*","0.5",")",";","float","as","=","sin","(","(","1.0","-","ao",")","*","aq",")","/","ar",";","float","at","=","sin","(","ao","*","aq",")","/","ar",";","return","am","*","as","+","an","*","at",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aJ","(","in","vec3","av",",","in","vec4","aw",",","in","vec4","ax",",","in","vec4","ay",",","in","vec4","az",",","in","float","aA",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aB","=","au","(","aw",",","ax",",","aA",")",";","vec4","aC","=","mix","(","ay",",","az",",","aA",")",";","vec3","aD","=","k","(","aB",",","av",")",";","vec3","aE","=","aD","*","aC",".","w","+","aC",".","xyz",";","return","aE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aF","=","k","(","aw",",","av",")",";","vec3","aG","=","k","(","ax",",","av",")",";","vec3","aH","=","aF","*","ay",".","w","+","ay",".","xyz",";","vec3","aI","=","aG","*","az",".","w","+","az",".","xyz",";","return","mix","(","aH",",","aI",",","aA",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aS","(","in","vec3","aK",",","in","vec4","aL",",","in","vec4","aM",",","in","float","aN",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aO","=","au","(","aL",",","aM",",","aN",")",";","vec3","aP","=","k","(","aO",",","aK",")",";","return","aP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aQ","=","k","(","aL",",","aK",")",";","vec3","aR","=","k","(","aM",",","aK",")",";","return","mix","(","aQ",",","aR",",","aN",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aJ","(","in","vec3","aT",",","in","vec4","aU",",","in","vec4","aV",")","{","vec3","aW","=","k","(","aU",",","aT",")",";","vec3","aX","=","aW","*","aV",".","w","+","aV",".","xyz",";","return","aX",";","}","vec3","aS","(","in","vec3","aY",",","in","vec4","aZ",")","{","vec3","a_","=","k","(","aZ",",","aY",")",";","return","a_",";","}"]}]}}]},{type:"textline",tokens:["void","bn","(","inout","vec3","ba",",","inout","vec3","bb",",","inout","vec3","bc",",","inout","vec3","bd",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","be","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bg","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bh","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bi","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","bj","=","0",";","bj","<","4",";","bj","++",")","{","int","bk","=","int","(","a_influence","[","bj","]",")",";","float","bl","=","fract","(","a_influence","[","bj","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bf","+=","bl","*","aJ","(","ba",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","u_transb","[","bk","]",",","u_transa","[","bk","]",",","be",")",";","bg","+=","bl","*","aS","(","bb",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";","bh","+=","bl","*","aS","(","bc",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";","bi","+=","bl","*","aS","(","bd",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","be",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bf","+=","bl","*","aJ","(","ba",",","u_quatsb","[","bk","]",",","u_transb","[","bk","]",")",";","bg","+=","bl","*","aS","(","bb",",","u_quatsb","[","bk","]",")",";","bh","+=","bl","*","aS","(","bc",",","u_quatsb","[","bk","]",")",";","bi","+=","bl","*","aS","(","bd",",","u_quatsb","[","bk","]",")",";"]}]}}]},{type:"textline",tokens:["}","ba","=","bf",";","bb","=","bg",";","bc","=","bh",";","bd","=","bi",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bm","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bm",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["ba","=","aJ","(","ba",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","u_transb","[","bm","]",",","u_transa","[","bm","]",",","be",")",";","bb","=","aS","(","bb",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";","bc","=","aS","(","bc",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";","bd","=","aS","(","bd",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","be",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ba","=","aJ","(","ba",",","u_quatsb","[","bm","]",",","u_transb","[","bm","]",")",";","bb","=","aS","(","bb",",","u_quatsb","[","bm","]",")",";","bc","=","aS","(","bc",",","u_quatsb","[","bm","]",")",";","bd","=","aS","(","bd",",","u_quatsb","[","bm","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bB","(","inout","vec3","bo",",","in","vec3","bp",",","in","float","bq",",","in","float","br",",","in","float","bs",",","in","vec3","bt",",","in","float","bu",")","{","float","bv","=","length","(","bp",")",";","float","bw","=","br","*","(","1.0","+","0.1","*","fract","(","bv",")",")",";","float","bx","=","bq","*","bu","*","(","1.0","+","sin","(","2.0","*","3.14","*","bs","*","bw","+","bv",")",")",";","float","by","=","(","bo",".","y","-","bp",".","y",")","*","abs","(","bx",")",";","by","+=","1.0",";","by","*=","by",";","by","=","by","*","by","-","by",";","vec3","bz","=","bo",";","bz",".","xz","+=","bt",".","xz","*","by","*","sign","(","bx",")",";","float","bA","=","length","(","bo","-","bp",")",";","bo","=","bp","+","normalize","(","bz","-","bp",")","*","bA",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bD","(","vec4","bC",")","{","return","bC","*","bC","*","(","3.0","-","2.0","*","bC",")",";","}","vec4","bF","(","vec4","bE",")","{","return","abs","(","fract","(","bE","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bH","(","vec4","bG",")","{","return","bD","(","bF","(","bG",")",")",";","}","void","bY","(","inout","vec3","bI",",","in","float","bJ",",","in","vec3","bK",",","in","vec3","bL",",","in","vec3","bM",",","in","float","bN",",","in","float","bO",",","in","float","bP",",","in","vec3","bQ",")","{","float","bR",";","float","bS",";","float","bT",";","vec2","bU",";","vec4","bV",";","vec2","bW",";","vec3","bX",";","bR","=","dot","(","bM",",","vec3","(","1.0",")",")",";","bS","=","bR","+","bQ",".","g",";","bT","=","dot","(","bI",",","vec3","(","bQ",".","g",")",")",";","bU","=","(","bJ","+","vec2","(","bT",",","bS",")",")",";","bV","=","(","(","fract","(","(","bU",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bL",")","*","bN",";","bV","=","bH","(","bV",")",";","bW","=","bV",".","xz","+","bV",".","yw",";","bW",".","y","=","0.5","-","bW",".","y",";","bX","=","bW",".","xyx","*","bQ",".","rbr","*","vec3","(","bO","*","bK",".","x",",","bP",",","bO","*","bK",".","z",")",";","bI","+=","bX",";","}"]}]}}]},{type:"textline",tokens:["void","ce","(","inout","vec3","bZ",",","inout","vec3","b_",",","in","vec3","ca",")","{","vec3","cb","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","b_",";","vec3","cd","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","bZ",";","vec3","cd","=","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bY","(","cc",",","u_time",",","ca",",","cb",",","cd",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bZ","+=","cc","-","b_",";","b_","=","cc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bZ","=","cc",";","b_","=","cd",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_SRC_RGBA_PCF",tokens:["3"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["4"]},{type:"define",name:"SHADOW_SRC_VSM",tokens:["5"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["6"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_RGBA",tokens:["2"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["3"]},{type:"define",name:"SHADOW_DST_VSM",tokens:["4"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["5"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","cj","(","const","in","float","cf",")","{","const","vec4","cg","=","vec4","(","255.0","*","255.0","*","255.0",",","255.0","*","255.0",",","255.0",",","1.0",")",";","const","vec4","ch","=","vec4","(","0.0",",","1.0","/","255.0",",","1.0","/","255.0",",","1.0","/","255.0",")",";","vec4","ci","=","fract","(","cf","*","cg",")",";","ci","-=","ci",".","xxyz","*","ch",";","return","ci",";","}","float","cn","(","const","in","vec4","ck",")","{","float","cl",";","const","vec4","cm","=","vec4","(","1.0","/","(","255.0","*","255.0","*","255.0",")",",","1.0","/","(","255.0","*","255.0",")",",","1.0","/","255.0",",","1.0",")",";","cl","=","dot","(","ck",",","cm",")",";","return","cl",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_SECTION_DIST0",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST1",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST2",tokens:["0.0"]},{type:"var",name:"CSM_SECTION_DIST3",tokens:["0.0"]},{type:"var",name:"PCF_TEXEL_SIZE",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["float","cC","(","sampler2D","cw",",","vec3","cx",",","float","cy",",","float","cz",")","{","vec2","cA","=","cx",".","xy","+","vec2","(","cy",",","cz",")","*","PCF_TEXEL_SIZE",";","vec4","cB","=","texture2D","(","cw",",","cA",")",";","return","cn","(","cB",")",";","}"]}]}}]},{type:"textline",tokens:["float","cR","(","vec3","cD",",","sampler2D","cE",",","float","cF",")","{","float","cG",";","cD",".","z","=","clamp","(","cD",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cH","=","texture2D","(","cE",",","cD",".","xy",")",";","float","cI","=","cn","(","cH",")",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")","&&","cI","<","cD",".","z",")","{","float","cJ","=","cD",".","z","-","cI",";","cG","=","exp","(","-","cJ","*","cF",")",";","}","else","cG","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_RGBA_PCF"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cI",";","cI",".","r","=","cC","(","cE",",","cD",",","0.5",",","0.5",")",";","cI",".","g","=","cC","(","cE",",","cD",",","0.5",",","-","0.5",")",";","cI",".","b","=","cC","(","cE",",","cD",",","-","0.5",",","-","0.5",")",";","cI",".","a","=","cC","(","cE",",","cD",",","-","0.5",",","0.5",")",";","vec4","cK","=","vec4","(","cD",".","z",",","cD",".","z",",","cD",".","z",",","cD",".","z",")",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")",")","cG","=","dot","(","vec4","(","greaterThanEqual","(","cI",",","cK",")",")",",","vec4","(","0.25",",","0.25",",","0.25",",","0.25",")",")",";","else","cG","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_VSM"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","cL","=","texture2D","(","cE",",","cD",".","xy",")",";","float","cM","=","cL",".","r",";","float","cN","=","cL",".","g",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")","&&","cM","<","cD",".","z",")","{","float","cO","=","cN","-","cM","*","cM",";","float","cP","=","cD",".","z","-","cM",";","cG","=","cO","/","(","cO","+","cP","*","cP",")",";","}","else","cG","=","1.0",";"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","cI","=","texture2D","(","cE",",","cD",".","xy",")",".","r",";","if","(","all","(","lessThan","(","cD",".","xy",",","vec2","(","1.0",")",")",")","&&","all","(","greaterThan","(","cD",".","xy",",","vec2","(","0.0",")",")",")","&&","cI","<","cD",".","z",")","{","cG","=","0.0",";","float","cQ","=","cD",".","z","-","cI",";","cG","=","exp","(","-","cQ","*","cF",")",";","}","else","cG","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","cG",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","cX","(","float","cS",",","float","cT",")","{","vec3","cU",";","float","cV","=","1.0",";","float","cW","=","-","cS",";","if","(","cW","<","CSM_SECTION_DIST0",")","{","cU","=","cp",".","xyz","/","cp",".","w",";","cV","=","cR","(","cU",",","u_shadow_map0",",","cT",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cW","<","CSM_SECTION_DIST1",")","{","cU","=","cq",".","xyz","/","cq",".","w",";","cV","=","cR","(","cU",",","u_shadow_map1",",","cT",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cW","<","CSM_SECTION_DIST2",")","{","cU","=","cr",".","xyz","/","cr",".","w",";","cV","=","cR","(","cU",",","u_shadow_map2",",","cT",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","if","(","cW","<","CSM_SECTION_DIST3",")","{","cU","=","cs",".","xyz","/","cs",".","w",";","cV","=","cR","(","cU",",","u_shadow_map3",",","cT",")",";","}"]}]}}]},{type:"textline",tokens:["return","cV",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","dc","(","in","float","cY",",","inout","vec3","cZ",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","c_","=","texture2DProj","(","u_shadow_mask",",","ct",")",".","rg",";","vec3","da","=","vec3","(","c_",".","r",")",";","float","db","=","c_",".","g",";","cv","=","vec4","(","da",",","db",")",";","cZ","*=","cv",".","a",";","return","cv",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","cX","(","cu",".","z",",","cY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","dh","(","vec3","dd",",","float","de",",","vec2","df",")","{","vec2","dg","=","vec2","(","(","dd",".","x","-","df",".","x",")","/","de",",","-","(","dd",".","z","-","df",".","y",")","/","de",")",";","return","fract","(","dg",")",";","}","vec2","dl","(","vec2","di",",","float","dj",",","vec2","dk",")","{","return","vec2","(","di",".","x","*","dj",",","-","di",".","y","*","dj",")","+","dk",";","}","b","dm","(",")","{","return","b","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","b","dT","(","vec3","dn",",","vec3","dp",",","vec3","dq",",","vec3","dr",",","vec3","ds",",","sampler2D","dt",",","sampler2D","du",",","vec3","dv",",","float","dw",",","vec3","dx",",","vec4","dy",",","mat4","dz",")","{","vec3","dA","=","k","(","dy",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","dB","=","-","dA",".","x",";","float","dC","=","-","dA",".","z",";","vec2","dD","=","vec2","(","dx",".","x","+","dw","*","(","-","1.0","-","dB",")","/","2.0",",","dx",".","z","+","dw","*","(","1.0","-","dC",")","/","2.0",")",";","vec2","dE","=","dh","(","ds",",","dw",",","dD",")",";","float","dF","=","dw","/","2.0",";","vec2","dG","=","abs","(","dl","(","dE","-","vec2","(","0.5",")",",","dw",",","vec2","(","0.0",")",")",")",";","float","dH","=","dF","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","dG",")",">","dH",")","return","dm","(",")",";","else","{","float","dI","=","dw","/","dv",".","z",";","vec2","dJ","=","(","dE","-","vec2","(","0.5",")",")","*","dI","+","vec2","(","0.5",")",";","vec3","dK","=","dA","*","(","dw","/","dv",".","z","-","1.0",")","/","2.0",";","dJ",".","x","+=","dK",".","x",";","dJ",".","y","-=","dK",".","z",";","vec4","dL","=","texture2D","(","du",",","dJ",")",";","float","dM","=","dL",".","r",";","if","(","dM","<","u_scale_threshold",")","return","dm","(",")",";","else","{","float","dN","=","dv",".","y","-","dv",".","x",";","float","dO","=","dv",".","y","-","texture2D","(","dt",",","dJ",")",".","r","*","dN",";","vec2","dP","=","dn",".","xz","-","ds",".","xz",";","ds",".","xz","=","dl","(","dE",",","dw",",","dD",")",";","ds",".","y","=","dO",";","dn",".","xz","=","ds",".","xz","+","dP",";","dn",".","y","*=","dM",";","dn",".","y","+=","dO",";","vec3","dQ","=","dL",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["HAIR_BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["dn","-=","ds",";","mat4","dR","=","ab","(","dx",",","ds",",","dz",")",";","b","dS","=","ai","(","dn",",","ds",",","dp",",","dq",",","dr",",","dR",")",";","dS",".","b","=","ds",";","dS",".","f","=","dQ",";","return","t","(","dS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","t","(","b","(","dn",",","ds",",","dp",",","dq",",","dr",",","dQ",")",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["void","dV","(","vec3","dU",")","{","cp","=","u_b_light_matrix","*","u_p_light_matrix0","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cq","=","u_b_light_matrix","*","u_p_light_matrix1","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cr","=","u_b_light_matrix","*","u_p_light_matrix2","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cs","=","u_b_light_matrix","*","u_p_light_matrix3","*","u_v_light_matrix","*","vec4","(","dU",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","dV","(","vec4","dW",")","{","float","dX","=","dW",".","x",";","float","dY","=","dW",".","y",";","float","dZ","=","dW",".","w",";","ct",".","x","=","(","dX","+","dZ",")","/","2.0",";","ct",".","y","=","(","dY","+","dZ",")","/","2.0",";","ct",".","z","=","dZ",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","eb","(","inout","vec3","ea",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ea","=","pow","(","ea",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","ed","(","inout","vec3","ec",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["ec","=","pow","(","ec",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","eg","(","inout","vec3","ee",",","in","float","ef",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["ee","=","ee","*","ef",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["float","eo","(","inout","vec3","ej",",","in","float","ek",",","in","vec4","el",")","{","float","em","=","el",".","w","*","ek",";","float","en","=","exp","(","-","em","*","em",")",";","en","=","clamp","(","en",",","0.0",",","1.0",")",";","ej","=","mix","(","el",".","rgb",",","ej",",","en",")",";","return","en",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ev","(","in","mat4","ep",",","in","vec3","eq",")","{","vec3","er","=","mix","(","ep","[","0","]",".","rgb",",","ep","[","1","]",".","rgb",",","max","(","sign","(","eq",".","x",")",",","0.0",")",")",";","vec3","es","=","mix","(","ep","[","2","]",".","rgb",",","ep","[","3","]",".","rgb",",","max","(","sign","(","eq",".","z",")",",","0.0",")",")",";","vec3","et","=","vec3","(","ep","[","0","]",".","a",",","ep","[","1","]",".","a",",","ep","[","2","]",".","a",")",";","vec3","eu","=","mix","(","er",",","es",",","abs","(","eq",".","z",")",")",";","eu","=","mix","(","eu",",","et",",","abs","(","eq",".","y",")",")",";","return","eu",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","ex","(","inout","float","ew",")","{","ew","-=","0.5",";","ew","=","4.0","*","(","ew","*","ew","*","ew",")","+","0.5",";","}","float","eM","(","inout","vec3","ey",",","in","float","ez",",","in","float","eA",",","in","float","eB",",","in","vec4","eC",",","in","vec4","eD",",","in","float","eE",",","in","float","eF",")","{","eA","=","clamp","(","eA",",","0.0",",","1.0",")",";","float","eG","=","eD",".","w","*","ez",";","float","eH","=","exp","(","-","eG","*","eG",")",";","eH","=","clamp","(","eH",",","0.0",",","1.0",")",";","ez","=","max","(","ez","-","max","(","eB","/","eA",",","0.0",")",",","0.0",")",";","eG","=","eC",".","w","*","ez",";","float","eI","=","1.0","-","eG",";","eI","+=","max","(","eE","-","WAVES_HEIGHT","-","0.05",",","0.0",")",";","+","max","(","eE","/","WAVES_HEIGHT",",","0.0",")",";","eI","=","clamp","(","eI",",","0.0",",","1.0",")",";","ex","(","eI",")",";","if","(","eI","<","eH",")","{","vec3","eJ","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","eK","=","eC",".","rgb",";","eB","=","clamp","(","-","eB","*","0.03",",","0.0",",","0.8",")",";","vec3","eL","=","mix","(","eK",",","eJ",",","min","(","eA",",","1.0",")",")",";","eL","=","mix","(","eL",",","vec3","(","0.0",")",",","eB",")","*","eF",";","ey","=","mix","(","eL",",","ey",",","eI",")",";","return","eI",";","}","if","(","eI",">=","eH",")","{","ey","=","mix","(","eD",".","rgb",",","ey",",","eH",")",";","return","eH",";","}","}","float","eV","(","inout","vec3","eN",",","in","float","eO",",","in","float","eP",",","in","vec4","eQ",",","in","float","eR",")","{","float","eS","=","eQ",".","w","*","eO",";","float","eT","=","1.0","-","eS",";","eT","=","clamp","(","eT",",","0.0",",","1.0",")",";","ex","(","eT",")",";","eP","=","clamp","(","-","eP","*","0.03",",","0.0",",","0.8",")",";","vec3","eU","=","mix","(","eQ",".","rgb",",","vec3","(","0.0",")",",","eP",")","*","eR",";","eN","=","mix","(","eU",",","eN",",","eT",")",";","return","eT",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["struct","eW","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fd","(","vec3","eX",",","vec3","eY",",","vec3","eZ",",","vec4","e_",",","float","fa",")","{","vec3","fb","=","normalize","(","eX","+","eY",")",";","float","fc","=","e_","[","0","]","*","max","(","dot","(","eZ",",","fb",")",",","0.0",")","+","e_","[","1","]",";","return","pow","(","fc",",","fa",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","fo","(","vec3","fe",",","vec3","ff",",","vec3","fg",",","float","fh",")","{","vec3","fi","=","normalize","(","fe","+","ff",")",";","float","fj","=","max","(","dot","(","fg",",","fi",")",",","0.001",")",";","float","fk","=","max","(","dot","(","fg",",","ff",")",",","0.001",")",";","float","fl","=","max","(","dot","(","fg",",","fe",")",",","0.001",")",";","float","fm","=","tan","(","acos","(","fj",")",")",";","float","fn","=","max","(","fh",",","0.001",")",";","return","fl","*","(","1.0","/","(","4.0","*","M_PI","*","fn","*","fn",")",")","*","(","exp","(","-","(","fm","*","fm",")","/","(","fn","*","fn",")",")","/","(","sqrt","(","fk","*","fl",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","fI","(","float","fp",",","vec3","fq",",","vec3","fr",",","vec3","fs",",","float","ft",",","inout","float","fu",")","{","if","(","ft",">","0.0",")","{","float","fv","=","max","(","dot","(","fq",",","fs",")",",","0.0",")",";","float","fw","=","ft","*","ft",";","float","fx","=","1.0","-","0.5","*","(","fw","/","(","fw","+","0.33",")",")",";","vec3","fy","=","fr","-","fp","*","fq",";","vec3","fz","=","fs","-","fv","*","fq",";","if","(","length","(","fy",")","==","0.0","||","length","(","fz",")","==","0.0","||","abs","(","fp",")",">","1.0","||","abs","(","fv",")",">","1.0",")","fu","=","fu","*","fx",";","else","{","float","fA","=","acos","(","fp",")",";","float","fB","=","acos","(","fv",")",";","vec3","fC","=","normalize","(","fy",")",";","vec3","fD","=","normalize","(","fz",")",";","float","fE",",","fF",";","fE","=","max","(","fA",",","fB",")",";","fF","=","min","(","fA",",","fB",")",";","fF","*=","0.95",";","float","fG","=","max","(","dot","(","fC",",","fD",")",",","0.0",")",";","float","fH","=","0.45","*","(","fw","/","(","fw","+","0.09",")",")",";","fu","=","fu","*","(","fx","+","(","fH","*","fG","*","sin","(","fE",")","*","tan","(","fF",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","fP","(","vec3","fJ",",","vec3","fK",",","float","fL",",","float","fM",",","out","float","fN",")","{","float","fO",";","if","(","fL","==","0.0",")","{","fN","=","1.0",";","}","else","{","fO","=","1.0","+","abs","(","dot","(","fK",",","fJ",")",")",";","fO","=","fM","+","(","1.0","-","fM",")","*","pow","(","fO",",","fL",")",";","fN","=","clamp","(","fO",",","0.0",",","1.0",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","gw","(","inout","eW","fQ",",","vec3","fR",",","vec3","fS",",","vec3","fT",",","vec3","fU",",","vec3","fV",",","float","fW",",","vec2","fX",",","float","fY",",","vec3","fZ",",","vec3","f_",",","vec3","ga",",","vec4","gb",",","vec4","gc",",","float","gd",",","vec4","ge",")","{","vec3","gf","=","vec3","(","0.0",")",";","vec3","gg","=","ga","*","fY",";","float","gh","=","gc",".","z",";","if","(","gh","!=","-","1.0",")","{","gf","=","fZ","-","fT",";","float","gi","=","length","(","gf",")",";","gg","*=","gh","/","(","gh","+","gi","*","gi",")",";","gf","=","normalize","(","gf",")",";","float","gj","=","gc",".","x",";","float","gk","=","gc",".","y",";","if","(","gj",">","-","1.0",")","{","float","gl","=","dot","(","gf",",","f_",")",";","gl","*=","smoothstep","(","0.0",",","1.0",",","(","gl","-","gj",")","/","gk",")",";","gg","*=","gl",";","}","}","else","gf","=","f_",";","float","gm",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["fP","(","fU",",","gf",",","fX","[","0","]",",","fX","[","1","]",",","gm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","gn","=","max","(","dot","(","fU",",","gf",")",",","0.0",")",";","gm","=","gb","[","0","]","*","gn","+","gb","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["fI","(","gn",",","fU",",","gf",",","fV",",","fX","[","0","]",",","gm",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","go","=","fd","(","gf",",","fV",",","fU",",","gb",",","fW",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","go","=","fo","(","gf",",","fV",",","fU",",","fW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","go","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","gf",",","fU",")","*","dot","(","fV",",","fU",")","<","0.0",")","{","float","gp","=","ge",".","x",";","float","gq","=","ge",".","y",";","float","gr","=","ge",".","z",";","float","gs","=","ge",".","w",";","float","gt","=","clamp","(","abs","(","dot","(","gf",",","fU",")",")",",","0.0",",","1.0",")",";","float","gu","=","clamp","(","dot","(","fV",",","-","gf",")",",","0.0",",","1.0",")",";","float","gv","=","pow","(","gu",",","gq",")",";","fQ",".","a","+=","gd","*","vec4","(","gg","*","gt","*","pow","(","fR",",","vec3","(","gp",")",")",",","1.0",")",";","fQ",".","a","+=","gr","*","mix","(","vec4","(","fR",",","1.0",")",",","vec4","(","1.0",")",",","gs",")","*","gd","*","vec4","(","gg","*","gt","*","vec3","(","gv",")",",","1.0",")",";","}","else","{","fQ",".","b","+=","gg","*","fS","*","go",";","fQ",".","a","+=","vec4","(","gg","*","fR","*","gm",",","go",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fQ",".","b","+=","gg","*","fS","*","go",";","fQ",".","a","+=","vec4","(","gg","*","fR","*","gm",",","go",")",";"]}]}}]},{type:"textline",tokens:["}","eW","hi","(","vec3","gx",",","vec3","gy",",","vec3","gz",",","vec3","gA",",","vec3","gB",",","vec3","gC",",","vec3","gD",",","float","gE",",","vec2","gF",",","float","gG",",","vec3","gH","[","NUM_LIGHTS","]",",","vec3","gI","[","NUM_LIGHTS","]",",","vec3","gJ","[","NUM_LIGHTS","]",",","vec4","gK","[","NUM_LIGHTS","]",",","vec4","gL","[","NUM_LIGHTS","]",",","float","gM",",","vec4","gN",")","{","eW","gO",";","gO",".","a","=","vec4","(","gx","+","gz","*","gy",",","0.0",")",";","gO",".","b","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","gO",",","gz",",","gA",",","gB",",","gC",",","gD",",","gE",",","gF",",","gG",",","gH","[","0","]",",","gI","[","0","]",",","gJ","[","0","]",",","gK","[","0","]",",","gL","[","0","]",",","gM",",","gN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","gO",",","gz",",","gA",",","gB",",","gC",",","gD",",","gE",",","gF",",","gG",",","gH","[","1","]",",","gI","[","1","]",",","gJ","[","1","]",",","gK","[","1","]",",","gL","[","1","]",",","gM",",","gN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","gO",",","gz",",","gA",",","gB",",","gC",",","gD",",","gE",",","gF",",","gG",",","gH","[","2","]",",","gI","[","2","]",",","gJ","[","2","]",",","gK","[","2","]",",","gL","[","2","]",",","gM",",","gN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","gO",",","gz",",","gA",",","gB",",","gC",",","gD",",","gE",",","gF",",","gG",",","gH","[","3","]",",","gI","[","3","]",",","gJ","[","3","]",",","gK","[","3","]",",","gL","[","3","]",",","gM",",","gN",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","gP","=","0",";","gP","<","NUM_LIGHTS",";","gP","++",")","{","vec4","gQ","=","gK","[","gP","]",";","vec4","gR","=","gL","[","gP","]",";","vec3","gS","=","vec3","(","0.0",")",";","vec3","gT","=","gJ","[","gP","]",";","gT","*=","gG",";","float","gU","=","gR",".","z",";","if","(","gU","!=","-","1.0",")","{","gS","=","gH","[","gP","]","-","gB",";","float","gV","=","length","(","gS",")",";","gT","*=","gU","/","(","gU","+","gV","*","gV",")",";","gS","=","normalize","(","gS",")",";","float","gW","=","gR",".","x",";","float","gX","=","gR",".","y",";","if","(","gW",">","-","1.0",")","{","float","gY","=","dot","(","gS",",","gI","[","gP","]",")",";","gY","*=","smoothstep","(","0.0",",","1.0",",","(","gY","-","gW",")","/","gX",")",";","gT","*=","gY",";","}","}","else","gS","=","gI","[","gP","]",";","float","gZ",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["fP","(","gC",",","gS",",","gF","[","0","]",",","gF","[","1","]",",","gZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","g_","=","max","(","dot","(","gC",",","gS",")",",","0.0",")",";","gZ","=","gQ","[","0","]","*","g_","+","gQ","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["fI","(","g_",",","gC",",","gS",",","gD",",","gF","[","0","]",",","gZ",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","ha","=","fd","(","gS",",","gD",",","gC",",","gQ",",","gE",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","ha","=","fo","(","gS",",","gD",",","gC",",","gE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ha","=","0.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","gS",",","gC",")","*","dot","(","gD",",","gC",")","<","0.0",")","{","float","hb","=","gN",".","x",";","float","hc","=","gN",".","y",";","float","hd","=","gN",".","z",";","float","he","=","gN",".","w",";","float","hf","=","clamp","(","abs","(","dot","(","gS",",","gC",")",")",",","0.0",",","1.0",")",";","float","hg","=","clamp","(","dot","(","gD",",","-","gS",")",",","0.0",",","1.0",")",";","float","hh","=","pow","(","hg",",","hc",")",";","gO",".","a","+=","gM","*","vec4","(","gT","*","hf","*","pow","(","gz",",","vec3","(","hb",")",")",",","1.0",")",";","gO",".","a","+=","hd","*","mix","(","vec4","(","gz",",","1.0",")",",","vec4","(","1.0",")",",","he",")","*","gM","*","vec4","(","gT","*","hf","*","vec3","(","hh",")",",","1.0",")",";","}","else","{","gO",".","b","+=","gT","*","gA","*","ha",";","gO",".","a","+=","vec4","(","gT","*","gz","*","gZ",",","ha",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO",".","b","+=","gT","*","gA","*","ha",";","gO",".","a","+=","vec4","(","gT","*","gz","*","gZ",",","ha",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","gO",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","hk","(","vec4","hj",")","{","return","hj","-","floor","(","hj","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","hk","(","vec3","hl",")","{","return","hl","-","floor","(","hl","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","hk","(","vec2","hm",")","{","return","hm","-","floor","(","hm","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","ho","(","vec4","hn",")","{","return","hn","-","floor","(","hn","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","hq","(","vec4","hp",")","{","return","hk","(","(","34.0","*","hp","+","5.0",")","*","hp",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","hC","(","vec2","hr",")","{","vec2","hs","=","hk","(","floor","(","hr",")",")",";","vec2","ht","=","fract","(","hr",")",";","vec4","hu","=","ht",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","hv","=","ht",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","hw","=","hq","(","hs",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","hw","=","hq","(","hw","+","hs",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","hx","=","ho","(","hw",")","*","K","+","K2",";","vec4","hy","=","ho","(","floor","(","hw","*","K",")",")","*","K","+","K2",";","vec4","hz","=","hu","+","JITTER","*","hx",";","vec4","hA","=","hv","+","JITTER","*","hy",";","vec4","hB","=","hz","*","hz","+","hA","*","hA",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["hB",".","xy","=","min","(","hB",".","xy",",","hB",".","zw",")",";","hB",".","x","=","min","(","hB",".","x",",","hB",".","y",")",";","return","hB",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hB",".","xy","=","(","hB",".","x","<","hB",".","y",")","?","hB",".","xy",":","hB",".","yx",";","hB",".","xz","=","(","hB",".","x","<","hB",".","z",")","?","hB",".","xz",":","hB",".","zx",";","hB",".","xw","=","(","hB",".","x","<","hB",".","w",")","?","hB",".","xw",":","hB",".","wx",";","hB",".","y","=","min","(","hB",".","y",",","hB",".","z",")",";","hB",".","y","=","min","(","hB",".","y",",","hB",".","w",")",";","return","sqrt","(","hB",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","hR","(","vec2","hD",",","float","hE",")","{","vec2","hF","=","hk","(","floor","(","hD",")",")",";","vec2","hG","=","fract","(","hD",")",";","vec4","hH","=","hG",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","hI","=","hG",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","hJ","=","hq","(","hF",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","hJ","=","hq","(","hJ","+","hF",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","hK","=","ho","(","hJ",")","*","K","+","K2",";","vec4","hL","=","ho","(","floor","(","hJ","*","K",")",")","*","K","+","K2",";","vec4","hM","=","hH","+","JITTER","*","hK",";","vec4","hN","=","hI","+","JITTER","*","hL",";","vec4","hO","=","hM","*","hM","+","hN","*","hN",";","hM","+=","hE",";","hN","+=","hE",";","vec4","hP","=","hM","*","hM","+","hN","*","hN",";","hM","+=","hE",";","hN","+=","hE",";","vec4","hQ","=","hM","*","hM","+","hN","*","hN",";","hO",".","xy","=","min","(","hO",".","xy",",","hO",".","zw",")",";","hO",".","x","=","min","(","hO",".","x",",","hO",".","y",")",";","hP",".","xy","=","min","(","hP",".","xy",",","hP",".","zw",")",";","hP",".","x","=","min","(","hP",".","x",",","hP",".","y",")",";","hQ",".","xy","=","min","(","hQ",".","xy",",","hQ",".","zw",")",";","hQ",".","x","=","min","(","hQ",".","x",",","hQ",".","y",")",";","return","mat3","(","hO",".","xx",",","0.0",",","hP",".","xx",",","0.0",",","hQ",".","xx",",","0.0",")",";","}","vec3","hT","(","vec3","hS",")","{","return","hk","(","(","(","hS","*","34.0",")","+","1.0",")","*","hS",")",";","}","float","ih","(","vec2","hU",")","{","const","vec4","hV","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","hW","=","floor","(","hU","+","dot","(","hU",",","hV",".","yy",")",")",";","vec2","hX","=","hU","-","hW","+","dot","(","hW",",","hV",".","xx",")",";","vec2","hY",";","hY","=","(","hX",".","x",">","hX",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","hZ","=","hX",".","xyxy","+","hV",".","xxzz",";","hZ",".","xy","-=","hY",";","hW","=","hk","(","hW",")",";","vec3","h_","=","hT","(","hT","(","hW",".","y","+","vec3","(","0.0",",","hY",".","y",",","1.0",")",")","+","hW",".","x","+","vec3","(","0.0",",","hY",".","x",",","1.0",")",")",";","vec3","ia","=","max","(","0.5","-","vec3","(","dot","(","hX",",","hX",")",",","dot","(","hZ",".","xy",",","hZ",".","xy",")",",","dot","(","hZ",".","zw",",","hZ",".","zw",")",")",",","0.0",")",";","ia","=","ia","*","ia",";","ia","=","ia","*","ia",";","vec3","ib","=","2.0","*","fract","(","h_","*","hV",".","www",")","-","1.0",";","vec3","ic","=","abs","(","ib",")","-","0.5",";","vec3","id","=","floor","(","ib","+","0.5",")",";","vec3","ie","=","ib","-","id",";","ia","*=","1.79284291400159","-","0.85373472095314","*","(","ie","*","ie","+","ic","*","ic",")",";","vec3","ig",";","ig",".","x","=","ie",".","x","*","hX",".","x","+","ic",".","x","*","hX",".","y",";","ig",".","yz","=","ie",".","yz","*","hZ",".","xz","+","ic",".","yz","*","hZ",".","yw",";","return","130.0","*","dot","(","ia",",","ig",")",";","}"]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","iJ","(","inout","vec3","ii",",","float","ij",",","float","ik",",","float","il",",","vec3","im",",","vec3","io",",","vec3","ip",",","vec4","iq",",","vec3","ir",",","float","is",")","{","if","(","is",">","100.0",")","return",";","vec4","it","=","iq",";","vec3","iu","=","ir","+","im",";","iu",".","xz","=","10.0","*","sin","(","0.1","*","iu",".","xz",")",";","vec3","iv","=","iu","+","2.0","*","cross","(","-","it",".","xyz",",","cross","(","-","it",".","xyz",",","iu",")","+","it",".","w","*","iu",")",";","vec2","iw","=","iv",".","xz",";","vec3","ix","=","io",";","float","iy","=","max","(","dot","(","im",",","ix",")",",","0.0",")",";","float","iz","=","0.025",";","iw",".","s","+=","0.5","*","sin","(","dot","(","ir","+","ik",",","vec3","(","1.0",")",")",")",";","iw",".","t","+=","0.7","*","(","-","sin","(","dot","(","ir","-","ik",",","vec3","(","-","0.7",")",")",")",")",";","iw",".","st","+=","0.23","*","cos","(","4.0","*","ij","-","CAUST_SPEED",".","x","*","ik",")",";","iw",".","st","+=","3.0","*","sin","(","ij","-","0.3","*","CAUST_SPEED",".","y","*","ik",")",";","float","iA","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","ij",",","0.0",")",")",";","mat3","iB","=","hR","(","(","iw","/","iA",")",",","iz",")",";","float","iC","=","(","iB","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","iD","=","(","iB","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","iE","=","(","iB","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","iF","=","CAUST_BRIGHT","*","vec3","(","iC",",","iD",",","iE",")",";","float","iG","=","il","*","iy",";","float","iH","=","max","(","sign","(","ij",")",",","0.0",")",";","iG","=","min","(","iG","+","0.5","*","sign","(","-","im",".","y",")","*","iH",",","1.0",")",";","iG","*=","1.0","-","iH","*","(","0.1","*","ij",")",";","iF","*=","iG",";","iF","*=","iF",";","float","iI","=","min","(","-","ij","+","10.0",",","1.0",")",";","ii","+=","max","(","(","2.0","*","ip","*","iF",")","*","iI",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","iW","(","in","vec3","iP",",","in","vec3","iQ",",","in","float","iR",",","in","float","iS",")","{","vec3","iT","=","normalize","(","iQ","+","iP",")",";","float","iU","=","1.0","-","dot","(","iP",",","iT",")",";","float","iV","=","iS","+","(","1.0","-","iS",")","*","pow","(","iU",",","iR",")",";","return","iV",";","}","void","jh","(","inout","vec3","iX",",","in","vec3","iY",",","in","vec3","iZ",",","in","float","i_",",","in","float","ja",",","in","vec2","jb",")","{","vec3","jc","=","reflect","(","-","iY",",","iZ",")",";","float","jd","=","iW","(","iY",",","jc",",","i_",",","ja",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","je","=","ct",".","xy","/","ct",".","z",";","je","+=","jb","*","BUMP",";","vec3","jf","=","texture2D","(","u_reflectmap",",","je",")",".","rgb",";","eb","(","jf",".","rgb",")",";","iX","=","mix","(","iX",",","jf",",","u_reflect_factor","*","jd",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","jg","=","textureCube","(","u_mirrormap",",","jc",")",".","xyz",";","eb","(","jg",".","rgb",")",";","iX","=","mix","(","iX",",","jg",",","u_mirror_factor","*","jd",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"define",name:"RAMPSIZE",tokens:["4"]},{type:"textline",tokens:["float","kc","(","float","jS",",","float","jT",",","vec2","jU","[","RAMPSIZE","]",")","{","if","(","jU","[","0","]","[","0","]","<","0.0",")","return","1.0",";","float","jV","=","jS","/","jT",";","bool","jW","=","false",";","float","jX","=","0.0",";","float","jY","=","jU","[","0","]","[","1","]",";","float","jZ","=","1.0",";","float","j_","=","1.0",";","for","(","int","ka","=","0",";","ka","<","RAMPSIZE",";","ka","++",")","{","if","(","!","jW",")","{","if","(","jU","[","ka","]","[","0","]",">=","0.0",")","{","if","(","jV",">=","jX","&&","jV","<","jU","[","ka","]","[","0","]",")","{","jZ","=","jU","[","ka","]","[","0","]",";","j_","=","jU","[","ka","]","[","1","]",";","jW","=","true",";","}","else","if","(","jV","<","jX","||","jV",">=","jU","[","ka","]","[","0","]",")","{","jX","=","jU","[","ka","]","[","0","]",";","jY","=","jU","[","ka","]","[","1","]",";","}","}","else","if","(","jU","[","ka","]","[","0","]","<","0.0",")","{","j_","=","jY",";","jW","=","true",";","}","}","}","if","(","!","jW",")","j_","=","jY",";","float","kb","=","(","j_","-","jY",")","/","(","jZ","-","jX",")",";","return","jY","+","kb","*","(","jV","-","jX",")",";","}","vec3","ko","(","float","kd",",","float","ke",",","vec4","kf","[","RAMPSIZE","]",")","{","if","(","kf","[","0","]","[","0","]","<","0.0",")","return","vec3","(","1.0",",","1.0",",","1.0",")",";","float","kg","=","kd","/","ke",";","bool","kh","=","false",";","float","ki","=","0.0",";","vec3","kj","=","kf","[","0","]",".","yzw",";","float","kk","=","1.0",";","vec3","kl","=","vec3","(","1.0",",","1.0",",","1.0",")",";","for","(","int","km","=","0",";","km","<","RAMPSIZE",";","km","++",")","{","if","(","!","kh",")","{","if","(","kf","[","km","]","[","0","]",">=","0.0",")","{","if","(","kg",">=","ki","&&","kg","<","kf","[","km","]","[","0","]",")","{","kk","=","kf","[","km","]","[","0","]",";","kl","=","kf","[","km","]",".","yzw",";","kh","=","true",";","}","else","if","(","kg","<","ki","||","kg",">=","kf","[","km","]","[","0","]",")","{","ki","=","kf","[","km","]","[","0","]",";","kj","=","kf","[","km","]",".","yzw",";","}","}","else","if","(","kf","[","km","]","[","0","]","<","0.0",")","{","kl","=","kj",";","kh","=","true",";","}","}","}","if","(","!","kh",")","kl","=","kj",";","vec3","kn","=","(","kl","-","kj",")","/","(","kk","-","ki",")",";","return","kj","+","kn","*","(","kg","-","ki",")",";","}","float","kx","(","float","kp",",","float","kq",",","float","kr",",","float","ks",")","{","float","kt","=","max","(","0.01",",","min","(","kq",",","kr",")",")",";","float","ku","=","max","(","0.01",",","min","(","kq",",","ks",")",")",";","float","kv","=","kq","-","ku",";","float","kw","=","clamp","(","kp","/","kt",",","0.0",",","1.0",")","-","step","(","kv",",","kp",")","*","(","kp","-","kv",")","/","ku",";","return","kw",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","kL","(","in","sampler2D","kE",",","in","vec2","kF",",","in","vec2","kG",")","{","float","kH","=","texture2D","(","kE",",","kF",")",".","r",";","float","kI","=","kG",".","x",";","float","kJ","=","kG",".","y",";","float","kK","=","2.0","*","kI","/","(","kI","+","kJ","-","(","2.0","*","kH","-","1.0",")","*","(","kJ","-","kI",")",")",";","return","kK",";","}"]}]}}