b4w.register("gallery_main",function(H,h){function p(a,c){window.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1};var b=document.getElementById(a);b.addEventListener("mousedown",function(b){y(a,b)},!1);b.addEventListener("mouseover",function(a){z(a)},!1);b.addEventListener("mouseout",function(){A(a)},!1);b.addEventListener("mouseup",c,!1)}function z(a){if(!("ontouchstart"in window||0<window.navigator.c)){var c=document.getElementById("hover_panel"),b=document.getElementById("glow");
b||(b=document.createElement("div"),b.id="glow",b.style.top=a.target.offsetTop,c.appendChild(b),b=document.getElementById("glow"));b.style.top=a.target.offsetTop-20+"px"}}function A(a){document.getElementById(a).className="control_panel_button";t()}function q(a){document.getElementById(a).className="control_panel_button"}function y(a,c){if(!("ontouchstart"in window||0<window.navigator.c||(c.preventDefault(),t(),document.getElementsByClassName(a).length))){var b=document.getElementById(a),d=document.createElement("div");
d.id="glow_down";d.style.marginTop=c.target.offsetTop-28+"px";l.appendChild(d);b.className="control_panel_button button_down"}}function t(){var a=document.getElementById("glow_down"),c=document.getElementById("glow");c&&l.removeChild(c);a&&l.removeChild(a)}function I(){u?n.exit_fullscreen():n.request_fullscreen(document.body,function(){u=!0;g("fullscreen_button",!0)},function(){u=!1;g("fullscreen_button",!1)})}function J(){var a=n.get_url_params();r=a&&a["default"]?a["default"]:"Logo";m=a&&a.tag?
a.tag:"nothing";B=a&&1==a.force_default?a.force_default:null;for(var c=!1,a=0;a<d.length;a++){var b=d[a];-1<b.a.indexOf(m)&&(c=!0)}c||(m="nothing");c=!1;for(a=0;a<d.length;a++)b=d[a],b.name==r&&-1<b.a.indexOf(m)&&(c=!0);c||(r="Logo")}function v(a){if(e.get("quality")!=a){switch(a){case e.P_LOW:var c="LOW";break;case e.P_HIGH:c="HIGH";break;case e.P_ULTRA:c="ULTRA"}k.set("quality",c);setTimeout(function(){window.location.reload()},100)}}function K(a,c){var b=C.keysearch("name",a,d);return b&&-1<b.a.indexOf(c)?
!0:!1}function w(a){var c=C.keysearch("name",a,d).b;D.load(L+c,M,N,!1);g(a,!0);k.set("last_scene_id",a);switch(k.get("quality")){case "LOW":g("low_mode_button",!0);break;case "HIGH":g("high_mode_button",!0);break;case "ULTRA":g("ultra_mode_button",!0)}}function O(){var a=document.createEvent("CustomEvent");a.initEvent("resize",!1,!1);window.dispatchEvent(a)}function P(){function a(){f.remove_sensor_manifold(b,"AUTO_ROTATE");f.remove_sensor_manifold(b,"DISABLE_AUTO_ROTATE");g("auto_rotate_button",
!1)}function c(a,b,c){1==c&&(b=f.get_sensor_value(a,b,0),Q.rotate_pivot(a,b*R,0))}var b=S.get_active_camera();if(f.check_sensor_manifold(b,"AUTO_ROTATE"))a();else{var d=f.create_mouse_move_sensor("XY"),e=f.create_mouse_click_sensor(),h=f.create_touch_move_sensor("XY"),k=f.create_touch_zoom_sensor(),l=f.create_elapsed_sensor();f.create_sensor_manifold(b,"AUTO_ROTATE",f.CT_CONTINUOUS,[l],function(a){return a[0]},c);f.create_sensor_manifold(b,"DISABLE_AUTO_ROTATE",f.CT_SHOT,[d,e,h,k],function(a){return a[0]&&
a[1]||a[2]||a[3]},a);g("auto_rotate_button",!0)}}function g(a,c){var b=document.getElementById(a),d=document.createElement("div");t();d.id="glow_active";d.style.top=b.offsetTop-20+"px";c?(d.className=a,l.appendChild(d),b.className="control_panel_button"):(b=document.getElementsByClassName(a)[0])&&l.removeChild(b)}function T(a){for(var c="",b=0;b<d.length;b++){var e=d[b].name,g=d[b].icon,f=d[b].a;-1<f.indexOf(a)&&(c+="<div id='"+e+"' class='control_panel_button' style='background-image: url("+g+");'></div>")}s.innerHTML+=
c;for(b=0;b<d.length;b++)c=d[b].name,f=d[b].a,-1<f.indexOf(a)&&U(c)}function U(a){var c=document.getElementById(a);c.addEventListener("mousedown",function(b){y(a,b)},!0);c.addEventListener("mouseup",function(){q(a);D.cleanup();for(var b=0;b<d.length;b++){var c=d[b].name;-1<d[b].a.indexOf(m)&&g(c,!1)}g("auto_rotate_button",!1);g("low_mode_button",!1);g("high_mode_button",!1);g("ultra_mode_button",!1);w(a)},!0);c.addEventListener("mouseover",function(a){z(a)},!0);c.addEventListener("mouseout",function(){A(a)},
!0)}function M(){e.get("antialiasing");n.enable_camera_controls()}function N(a,c){E.innerHTML=a+"% ("+Math.round(10*c/1E3)/10+"s)"}function V(a){var c=a.target.innerWidth;a=a.target.innerHeight;W.resize(c,a);F.innerHTML=Math.round(c)+"x"+Math.round(a)}var n=h("app"),Q=h("camera"),e=h("config"),f=h("controls"),D=h("data"),W=h("main"),S=h("scenes"),k=h("storage"),C=h("util"),x="DEBUG"===h("version").type(),X={canvas_container_id:"main_canvas_container",callback:function(a,c){if(c){s=document.getElementById("control_panel");
G=document.getElementById("scroll_panel");l=document.getElementById("hover_panel");E=document.getElementById("status_bar_loading");F=document.getElementById("status_bar_resolution");if(-1!=navigator.userAgent.indexOf("Firefox")||-1!=navigator.userAgent.indexOf("rv:11"))s.style.width="90px",l.style.width="90px",G.style.width="90px";J();n.enable_controls(a);window.addEventListener("resize",V,!1);O();T(m);p("fullscreen_button",I);p("auto_rotate_button",function(){q("auto_rotate_button");P()});p("low_mode_button",
function(){q("low_mode_button");v(e.P_LOW)});p("high_mode_button",function(){q("high_mode_button");v(e.P_HIGH)});p("ultra_mode_button",function(){q("ultra_mode_button");v(e.P_ULTRA)});"LOW"==k.get("quality")&&e.set("deferred_rendering",!1);e.set("glow",!1);var b=k.get("last_scene_id");b&&K(b,m)&&!B?w(b):w(r)}else console.log("b4w init failure")},physics_enabled:!1,alpha:!1,gl_debug:!1,show_hud_debug_info:!1,show_fps:!0,fps_elem_id:"status_bar_fps",console_verbose:x,assets_dds_available:!x,assets_min50_available:!x,
all_objs_selectable:!1,error_purge_elements:["control_panel_over","status_bar"]},R=.1,L=e.get_std_assets_path(),d=[{icon:"icons/logo.png",name:"Logo",b:"dev/logo.json",a:["all","nothing","car","naturemorte"]},{icon:"icons/milk.png",name:"Bottle",b:"fridge/bottle/bottle.json",a:["all","naturemorte"]},{icon:"icons/naturmort.png",name:"Naturemorte",b:"fridge/naturmort/naturmort.json",a:["all","naturemorte"]}],s,E,F,l,G,u=!1,r=null,m=null,B=null;H.init=function(){k.init("b4w_gallery_storage");var a=k.get("quality");
a&&"CUSTOM"!=a||(a="LOW",k.set("quality",a));switch(a){case "LOW":var c=e.P_LOW;break;case "HIGH":c=e.P_HIGH;break;case "ULTRA":c=e.P_ULTRA}e.set("quality",c);n.init(X)}});b4w.require("gallery_main").init();
