<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Lighting and shadows &mdash; User manual: Blend4Web v14.04.22</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '14.04.22',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="User manual: Blend4Web v14.04.22" href="index.html" />
    <link rel="next" title="Postprocessing effects" href="postprocessing_effects.html" />
    <link rel="prev" title="Node materials" href="node_materials.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="index.html">
            <img class="logo" src="_static/b4w_logo.png" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="index.html">User manual: Blend4Web v14.04.22</a></div>
        <div class="rel">
          <a href="node_materials.html" title="Node materials"
             accesskey="P">previous</a> |
          <a href="postprocessing_effects.html" title="Postprocessing effects"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="lighting"></span><div class="section" id="index-0">
<span id="id1"></span><h1>Lighting and shadows<a class="headerlink" href="#index-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="index-1">
<span id="id2"></span><h2>Lighting with light sources<a class="headerlink" href="#index-1" title="Permalink to this headline">¶</a></h2>
<p>A scene can have multiple (but not less than one) light sources of different types.</p>
<div class="section" id="id3">
<h3>Light source types<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The following light source types are supported:</p>
<dl class="docutils">
<dt><em>Point</em></dt>
<dd><p class="first last">Light propagates from one point uniformly to all directions with gradual attenuation.</p>
</dd>
<dt><em>Sun</em></dt>
<dd><p class="first last">Light propagates from an infinite plane in one direction without attenuation.</p>
</dd>
<dt><em>Spot</em></dt>
<dd><p class="first last">Light propagates from one point within the angular limit, with gradual attenuation.</p>
</dd>
<dt><em>Hemi</em></dt>
<dd><p class="first last">Hemispherical. Light propagates from an infinite hemisphere without attenuation.</p>
</dd>
</dl>
</div>
<div class="section" id="id4">
<h3>Light source setup<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Performed in the <tt class="docutils literal"><span class="pre">Object</span> <span class="pre">Data</span></tt> tab when a lamp object is selected.</p>
<a class="reference internal image-reference" href="_images/lighting_setup.jpg"><img alt="Настройка источников света" class="align-center" src="_images/lighting_setup.jpg" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>Color</em></dt>
<dd><p class="first last">Light color. The default value is (1.0, 1.0, 1.0) (i.e. white).</p>
</dd>
<dt><em>Energy</em></dt>
<dd><p class="first last">Radiation intensity. The default value is 1.0.</p>
</dd>
<dt><em>Falloff</em></dt>
<dd><p class="first last">Attenuation type. The value is exported but the engine always uses <tt class="docutils literal"><span class="pre">Inverse</span> <span class="pre">Square</span></tt>. It is applicable to the <tt class="docutils literal"><span class="pre">Point</span></tt> and <tt class="docutils literal"><span class="pre">Spot</span></tt> light source types. The default value is <tt class="docutils literal"><span class="pre">Inverse</span> <span class="pre">Square</span></tt>.</p>
</dd>
<dt><em>Distance</em></dt>
<dd><p class="first last">Attenuation parameter. It is applicable to the <tt class="docutils literal"><span class="pre">Point</span></tt> and <tt class="docutils literal"><span class="pre">Spot</span></tt> light source types. The default value is 25.0.</p>
</dd>
<dt><em>Spot Shape &gt; Size</em></dt>
<dd><p class="first last">Cone angle in degrees. It is applicable to the <tt class="docutils literal"><span class="pre">Spot</span></tt> light source type. The default value is 45º.</p>
</dd>
<dt><em>Spot Shape &gt; Blend</em></dt>
<dd><p class="first last">Parameter for blurring light spot edges. It is applicable to the <tt class="docutils literal"><span class="pre">Spot</span></tt> light source type. The default value is 0.15.</p>
</dd>
<dt><em>Blend4Web &gt; Do not export</em></dt>
<dd><p class="first last">Don&#8217;t export the light source. Disabled by default.</p>
</dd>
<dt><em>Blend4Web &gt; Generate shadows</em></dt>
<dd><p class="first last">Use this light source for shadow calculation. Should be used when multiple light sources are present. Disabled by default.</p>
</dd>
<dt><em>Blend4Web &gt; Dynamic intesity</em></dt>
<dd><p class="first last">Use this light source for calculating the time of day. Applicable only to the <tt class="docutils literal"><span class="pre">Sun</span></tt> light source type. Disabled by default.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="id5">
<h2>Ambient lighting<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>The engine uses a simple hemispherical lighting model in which horizon and zenith colors should be specified.</p>
<div class="section" id="id6">
<h3>Activation<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Enable the <tt class="docutils literal"><span class="pre">Environment</span> <span class="pre">Lighting</span></tt> checkbox on the <tt class="docutils literal"><span class="pre">World</span></tt> tab.</p>
<a class="reference internal image-reference" href="_images/lighting_environment.jpg"><img alt="Освещение от окружающей среды" class="align-center" src="_images/lighting_environment.jpg" style="width: 100%;" /></a>
</div>
<div class="section" id="id7">
<h3>Setup<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><em>Environment Lighting &gt; Energy</em></dt>
<dd><p class="first last">Ambient lighting intensity. The default value is 1.0.</p>
</dd>
<dt><em>Environment Lighting &gt; Environment Color</em></dt>
<dd><p class="first last">Ambient lighting source type - the supported types are <tt class="docutils literal"><span class="pre">White</span></tt> and <tt class="docutils literal"><span class="pre">Sky</span> <span class="pre">Color</span></tt>. If the <tt class="docutils literal"><span class="pre">White</span></tt> type is selected, both horizon and zenith colors are white. If the <tt class="docutils literal"><span class="pre">Sky</span> <span class="pre">Color</span></tt> type is selected, the horizon and zenith colors can be specified by means of the <tt class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Horizon</span> <span class="pre">Color</span></tt> and <tt class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Zenith</span> <span class="pre">Color</span></tt> color pickers. The default value is <tt class="docutils literal"><span class="pre">White</span></tt>.</p>
</dd>
<dt><em>World &gt; Horizon Color</em> and <em>World &gt; Zenith Color</em></dt>
<dd><p class="first last">Horizon and zenith colors. It is recommended to activate the <tt class="docutils literal"><span class="pre">World</span> <span class="pre">&gt;</span> <span class="pre">Blend</span> <span class="pre">Sky</span></tt> option for better color selection.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="id8">
<h2>Shadows<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>Activation<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p class="first">Enable the <tt class="docutils literal"><span class="pre">Blend4Web</span> <span class="pre">&gt;</span> <span class="pre">Shadows</span> <span class="pre">Cast</span></tt> checkbox under the <tt class="docutils literal"><span class="pre">Object</span></tt> tab for the objects which <strong>cast</strong> shadows.</p>
</li>
<li><p class="first">Enable the <tt class="docutils literal"><span class="pre">Blend4Web</span> <span class="pre">&gt;</span> <span class="pre">Shadows</span> <span class="pre">Receive</span></tt> checkbox under the <tt class="docutils literal"><span class="pre">Object</span></tt> tab for the objects which <strong>receive</strong> shadows.</p>
</li>
<li><p class="first">Make sure that the <tt class="docutils literal"><span class="pre">Blend4Web</span> <span class="pre">&gt;</span> <span class="pre">Render</span> <span class="pre">shadows</span></tt> checkbox is enabled in the <tt class="docutils literal"><span class="pre">Scene</span></tt> tab.</p>
</li>
</ol>
</div>
<div class="section" id="id10">
<h3>Setup<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><em>Direction</em></dt>
<dd><p class="first last">If there are multiple light sources, it is recommended to specify the exact light source which is used for shadow calculations, by enabling the <tt class="docutils literal"><span class="pre">Blend4Web</span> <span class="pre">&gt;</span> <span class="pre">Generate</span> <span class="pre">shadows</span></tt> checkbox under the <tt class="docutils literal"><span class="pre">Object</span> <span class="pre">Data</span></tt> tab for the selected lamp object.</p>
</dd>
<dt><em>Color</em></dt>
<dd><p class="first last">The shadow color is determined by ambient lighting settings.</p>
</dd>
</dl>
<p>The following additional settings are on the <tt class="docutils literal"><span class="pre">Blend4Web</span> <span class="pre">&gt;</span> <span class="pre">Shadow</span> <span class="pre">Settings</span></tt> panel of the <tt class="docutils literal"><span class="pre">World</span></tt> tab:</p>
<div class="section" id="id11">
<h4>Cascades<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>In order to provide acceptable shadow quality and to cover considerable space at the same time it is required to use multiple stages for shadow generation (cascades). Thus the best quality cascades are situated near the observer while the worst quality cascades are in the distance.</p>
<a class="reference internal image-reference" href="_images/shadow_cascades.jpg"><img alt="Тени" class="align-center" src="_images/shadow_cascades.jpg" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt><em>CSM number</em></dt>
<dd><p class="first last">Number of shadow cascades. Supported from 1 to 4 cascades. The default value is 3.</p>
</dd>
<dt><em>CSM near</em></dt>
<dd><p class="first last">The nearest boundary of shadow rendering. The default value is 0.1.</p>
</dd>
<dt><em>CSM far</em></dt>
<dd><p class="first last">The furthest boundary of shadow rendering. The default value is 100.</p>
</dd>
<dt><em>CSM lambda</em></dt>
<dd><p class="first last">The distribution factor of cascade boundaries. The values for the calculated cascade boundaries are displayed in the viewer under the <tt class="docutils literal"><span class="pre">Shadows</span></tt> tab. The default value is 0.875.</p>
</dd>
</dl>
</div>
<div class="section" id="id12">
<h4>Softened shadows<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt><em>Visibility falloff</em></dt>
<dd><p class="first last">Factor for the exponential decay of shadow visibility which depends on the distance between the casting and receiving points. It is used to reduce self-shadowing artefacts (i.e. when the castor and the receiver are the same object). The default value is 3500.0.</p>
</dd>
<dt><em>Blur depth size mult</em></dt>
<dd><p class="first last">Blur kernel size. Affects the shadow softening ratio. The default value is 1.0.</p>
</dd>
<dt><em>Blur depth edge size</em></dt>
<dd><p class="first last">Difference between samples (in texels) for the edge detection algorithm. Decreases haloing by excluding edges from blurring. The default value is 2.0.</p>
</dd>
<dt><em>Blur depth diff threshold</em></dt>
<dd><p class="first last">Maximum of depth difference for the edge detection algorithm multiplied by 1000. Decreases haloing by excluding edges from blurring. The default value is 0.1.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">The Engine Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_steps.html">Quick Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Development Environment Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">Scene Viewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="addon.html">The Addon</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="textures.html">Textures</a></li>
<li class="toctree-l1"><a class="reference internal" href="materials.html">Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="node_materials.html">Node materials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Lighting and shadows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#index-1">Lighting with light sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">Ambient lighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">Shadows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_effects.html">Postprocessing effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles.html">Particle system</a></li>
<li class="toctree-l1"><a class="reference internal" href="particles_instancing.html">Particle system for object instancing</a></li>
<li class="toctree-l1"><a class="reference internal" href="animation.html">Animation</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdoor_rendering.html">Outdoor Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="gamma_alpha.html">Gamma-correction and transparency</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">Звуковая подсистема</a></li>
<li class="toctree-l1"><a class="reference internal" href="event_model.html">Событийная модель</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics.html">Физика</a></li>
<li class="toctree-l1"><a class="reference internal" href="nla.html">Нелинейная анимация</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">For application developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers_advanced.html">Разработчикам движка</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_short_manual.html">Краткая справка по git</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems_and_solutions.html">Problems and solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">План развития</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="node_materials.html" title="Node materials"
             >previous</a> |
          <a href="postprocessing_effects.html" title="Postprocessing effects"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2014, Triumph LLC.
      Last updated on 2014-04-23.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>