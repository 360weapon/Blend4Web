b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cf","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cf","=","mix","(","cf",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cg","=","vec3","(","0.0",")",";","vec3","ch","=","vec3","(","0.0",")",";","vec3","ci","=","vec3","(","0.0",")",";","bn","(","cf",",","cg",",","ch",",","ci",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ck","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","mat4","cl","=","aa","(","u_camera_eye",",","ck",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","(","u_model_matrix","*","vec4","(","cj",",","1.0",")",")",".","xyz",";","cl","=","cl","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cm",")",";"]}]}}]},{type:"textline",tokens:["d","cn","=","ah","(","cf","-","cj",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cl",")",";","cn",".","b","=","ck",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","cn","=","ah","(","cf",",","cj",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","co","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","cn",".","a",",","cn",".","b",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ak","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cn",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";"]}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fm","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","fm","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","fm","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cm","(","cz",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fg","(","cF",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","gp","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["gp","=","mix","(","gp",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gq","=","vec3","(","0.0",")",";","vec3","gr","=","vec3","(","0.0",")",";","vec3","gs","=","vec3","(","0.0",")",";","bn","(","gp",",","gq",",","gr",",","gs",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gt","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gt","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","gu","=","ga","(","gp",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gt",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gv","=","(","u_model_matrix","*","vec4","(","gt",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","HAIR_BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gw","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gw","=","u_view_matrix",";"]}]}}]},{type:"textline",tokens:["mat4","gx","=","aa","(","u_camera_eye",",","gv",",","gw",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gy","=","(","u_model_matrix","*","vec4","(","gt",",","1.0",")",")",".","xyz",";","gx","=","gx","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gy",")",";"]}]}}]},{type:"textline",tokens:["d","gu","=","ah","(","gp","-","gt",",","gt",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gx",")",";","gu",".","b","=","gv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gu","=","ah","(","gp",",","gt",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gz","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gz","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ce","(","gu",".","a",",","gu",".","b",",","gz",")",";"]}]}}]},{type:"textline",tokens:["vec4","gA","=","u_view_matrix","*","vec4","(","gu",".","a",",","1.0",")",";","vec4","gB","=","u_proj_matrix","*","gA",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gB",".","xy","+=","u_subpixel_jitter","*","gB",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ak","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gk","(","gu",".","a",")",";","cF","=","gA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["cz","=","-","gA",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","gC","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","float","gD","=","SHADOW_TEX_RES","/","2.0",";","gC","=","floor","(","gC","*","gD","+","0.5",")","/","gD","-","gC",";","gB",".","xy","+=","gC",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gB",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gp",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gp",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","gp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","gp",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","gp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gp",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gp",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gp",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gq","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","gr","=","aa","(","u_camera_eye",",","gq",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["gr","=","gr","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["d","gs","=","ah","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gr",")",";","gs",".","b","=","gq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gs","=","ah","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gt","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gs",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gp","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gp","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gp","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","gt",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","gx",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gz","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gz","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","gB","(","float","gA",")","{","return","gA","-","floor","(","gA","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gK","(","inout","float","gC",",","in","float","gD","[","gz","]",",","in","float","gE",")","{","for","(","int","gF","=","0",";","gF","<","NUM_RINGS",";","gF","++",")","{","float","gG","=","40.0","*","gD","[","gF","]",";","float","gH","=","300.0","*","(","gB","(","gG",")","-","0.005",")",";","float","gI","=","gG",";","float","gJ","=","abs","(","gI","*","(","u_halo_size","*","gH","-","gE",")",")",";","gC","+=","1.0","-","min","(","gJ",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","gT","(","inout","float","gL",",","in","float","gM","[","gz","]",",","in","float","gN",")","{","for","(","int","gO","=","0",";","gO","<","NUM_LINES",";","gO","++",")","{","float","gP","=","gM","[","gO","]",";","float","gQ","=","gP",";","float","gR","=","1000.0","*","(","gB","(","gP",")","-","0.005",")",";","float","gS","=","20.0","*","abs","(","gQ","*","a",".","x","+","gR","*","a",".","y",")",";","gL","+=","1.0","-","min","(","gS",",","1.0",")",";","}","gL","*=","gN",";","}"]}]}}]},{type:"textline",tokens:["void","g_","(","inout","float","gU",",","in","vec2","gV",")","{","float","gW",",","gX",";","gX","=","atan","(","gV",".","y",",","gV",".","x",")",";","gX","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","gY","=","cos","(","gX",")",";","float","gZ","=","sin","(","gX",")",";","gX","=","(","gY","*","gV",".","x","+","gZ","*","gV",".","y",")","*","(","gY","*","gV",".","y","-","gZ","*","gV",".","x",")",";","gW","=","abs","(","gX",")",";","if","(","gW","<","1.0",")","{","gW","=","(","0.01","*","u_halo_size",")","/","(","gW",")",";","gU","*=","sqrt","(","min","(","gW",",","1.0",")",")",";","}","}","void","main","(",")","{","float","ha","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","hb","=","sqrt","(","ha",")",";","ha","=","max","(","1.0","-","ha",",","0.0",")",";","ha","=","pow","(","ha",",","u_halo_hardness",")",";","float","hc","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hd","[","gz","]",";","for","(","int","he","=","0",";","he","<","gz",";","he","++",")","{","hd","[","he","]","=","fract","(","gy","/","(","float","(","he",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","hf","=","0.0",";","gK","(","hf",",","hd",",","hb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hg","=","0.0",";","gT","(","hg",",","hd",",","ha",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["g_","(","ha",",","a",")",";"]}]}}]},{type:"textline",tokens:["ha","*=","hc",";","vec3","hh","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["hf","*=","ha",";","hh","+=","u_halo_rings_color","*","hf",";","ha","+=","hf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["hg","*=","hc",";","hh","+=","u_halo_lines_color","*","hg",";","ha","+=","hg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ha","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","hi","=","u_halo_stars_blend","*","(","gx",".","y","-","u_halo_stars_height",")",";","ha","*=","clamp","(","hi",",","0.0",",","1.0",")",";","ha","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gt","(","hh",")",";","gw","(","hh",",","ha",")",";","gl_FragColor","=","vec4","(","hh",",","ha",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gy",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gx",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","gz","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gy","=","fract","(","gz",".","x","+","gz",".","y","+","gz",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gA","=","z","(","gz",",","u_view_matrix",")",";","mat4","gB","=","u_view_matrix",";","gB","[","3","]","[","0","]","=","0.0",";","gB","[","3","]","[","1","]","=","0.0",";","gB","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gA","=","z","(","gz",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gC","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","gD","=","gA","*","gC",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gE","=","u_proj_matrix","*","gB","*","gD",";","gE",".","z","=","0.99999","*","gE",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gx","=","gD",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","gE","=","u_proj_matrix","*","u_view_matrix","*","gD",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gE",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gz","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gz",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","int","u_shadow_lamp_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kx",";","varying","vec3","ky",";","varying","vec3","kz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","ln","=","ky",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lo","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","lp","=","kz",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","lp","=","lp",";","else","lp","=","-","lp",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lq","=","cross","(","lp",",","kA",".","xyz",")","*","kA",".","w",";","mat3","lr","=","mat3","(","kA",".","xyz",",","lq",",","lp",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","ls","=","length","(","cF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lt","=","normalize","(","u_view_matrix_frag","*","vec4","(","kz",",","0.0",")",")",".","st",";","lt","=","lt","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ls","<","PARALLAX_LOD_DIST",")","{","float","lu","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","ls",")",",","0.0",",","1.0",")",";","float","lv","=","u_parallax_scale","*","lu",";","vec3","lw","=","normalize","(","kx","*","lr",")",";","float","lx","=","1.0","/","PARALLAX_STEPS",";","vec2","ly","=","lw",".","xy","*","lv","/","(","PARALLAX_STEPS","*","lw",".","z",")",";","float","lz","=","1.0",";","float","lA",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lB","=","lt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lB","=","lo",";"]}]}}]},{type:"textline",tokens:["lA","=","texture2D","(","u_normalmap0",",","lB",")",".","a",";","for","(","float","lC","=","1.0",";","lC","<=","PARALLAX_STEPS",";","lC","++",")","{","if","(","lA","<","lz",")","{","lz","-=","lx",";","lB","-=","ly",";","lA","=","texture2D","(","u_normalmap0",",","lB",")",".","a",";","}","}","vec2","lD","=","lB","+","ly",";","float","lE","=","texture2D","(","u_normalmap0",",","lD",")",".","a","-","(","lz","+","lx",")",";","float","lF","=","lA","-","lz",";","float","lG","=","lF","/","(","lF","-","lE",")",";","lB","=","lG","*","lD","+","(","1.0","-","lG",")","*","lB",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lo","+=","lB","-","lt",";"]}]}}]},{type:"textline",tokens:["lt","=","lB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lt","+=","lB","-","lo",";"]}]}}]},{type:"textline",tokens:["lo","=","lB",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lH",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lH","=","texture2D","(","u_normalmap0",",","lt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lH","=","texture2D","(","u_normalmap0",",","lo",")",";"]}]}}]},{type:"textline",tokens:["vec3","lI","=","lH",".","rgb","-","0.5",";","lI","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","lI",",","u_normal_factor",")",";","vec3","lJ","=","lr","*","lI",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lJ","=","lp",";"]}]}}]},{type:"textline",tokens:["lJ","=","normalize","(","lJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lt","=","normalize","(","u_view_matrix_frag","*","vec4","(","lJ",",","0.0",")",")",".","st",";","lt","=","lt","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["vec3","lK","=","normalize","(","kx",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lL","=","kB",";","gr","(","lL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lM","=","vec4","(","lL",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lM","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","lN","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lO","=","texture2D","(","u_colormap0",",","lt",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lO","=","texture2D","(","u_colormap0",",","lo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","lO",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lP",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lP","=","texture2D","(","u_colormap1",",","lt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lP","=","texture2D","(","u_colormap1",",","lo",")",";"]}]}}]},{type:"textline",tokens:["gr","(","lP",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lQ","=","texture2D","(","u_stencil0",",","lt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lQ","=","texture2D","(","u_stencil0",",","lo",")",";"]}]}}]},{type:"textline",tokens:["lO","=","mix","(","lO",",","lP",",","lQ",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["lM",".","rgb","=","mix","(","lM",".","rgb",",","lO",".","rgb",",","u_diffuse_color_factor",")",";","float","lR","=","u_alpha_factor","*","lO",".","a",";","lR","+=","(","1.0","-","step","(","0.0",",","lR",")",")",";","lM",".","a","=","mix","(","lR",",","1.0",",","u_diffuse_color",".","a",")",";","lN","=","lO",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["lM",".","rgb","*=","mix","(","vec3","(","1.0",")",",","lO",".","rgb",",","u_diffuse_color_factor",")",";","lM",".","a","=","lO",".","a",";","lN","=","lO",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","lS","=","u_diffuse_intensity","*","lM",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lT","=","lS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lU","=","0.5","*","lJ",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lV","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lJ",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lV","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","lU",")",";"]}]}}]},{type:"textline",tokens:["vec3","lW","=","u_ambient","*","lV",";","float","lX","=","fl","(","lS",")",";","vec3","lY","=","u_emit","*","lM",".","rgb",";","vec3","lZ","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","l_","=","vec3","(","lN",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","l_","=","texture2D","(","u_specmap0",",","lt",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","l_","=","texture2D","(","u_specmap0",",","lo",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["gr","(","l_",".","rgb",")",";","lZ","=","mix","(","lZ",",","l_",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","ma","=","u_specular_params","[","0","]",";","vec2","mb","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","mc","=","ma","*","lZ",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["hp","md","=","jW","(","lY",",","lW",",","lS",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hp","md","=","jR","(","lY",",","lW",",","lS",",","mc",",","ky",",","lJ",",","lK",",","mb",",","u_diffuse_params",",","lX",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",",","u_shadow_lamp_id",")",";"]}]}}]},{type:"textline",tokens:["vec3","lT","=","md",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","me","=","u_reflect_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","me","=","0.0",";"]}]}}]},{type:"textline",tokens:["kZ","(","lT",",","lK",",","lJ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","me",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lT","+=","md",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["lT","=","max","(","lT","-","sqrt","(","0.01","*","-","min","(","ln",",","0.0",")",")",",","0.5","*","lT",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kw","(","lT",",","ln",",","u_time",",","lX",",","lJ",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","ky",",","ls",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","mf","=","lM",".","a",";","if","(","mf","<=","0.5",")","discard",";","mf","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mf","=","lM",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["mf","+=","md",".","a",".","a","*","mc",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mf","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lT","=","mix","(","lm","(","cE",",","lJ",".","xz","*","u_refr_bump",")",",","lT",",","mf",")",";","mf","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","mg","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mh","=","gL","(","u_cube_fog",",","lK",")",";","vec4","mi","=","vec4","(","mh",",","u_fog_color_density",".","a",")",";","gr","(","mi",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","mi","=","u_fog_color_density",";","mi",".","rgb","*=","mg",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["hd","(","lT",",","ls",",","lK",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","mi",",","ln",",","mg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gE","(","lT",",","ls",",","mi",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lT","=","vec3","(","dN",".","a",")",";"]}]}}]},{type:"textline",tokens:["gt","(","lT",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","lT",",","mf",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lT",",","mf",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kx",";","varying","vec3","ky",";","varying","vec3","kz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","ln","=","a_position",";","vec3","lo","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lp","=","vec3","(","a_tangent",")",";","vec3","lq","=","a_tangent","[","3","]","*","cross","(","lo",",","lp",")",";"]}]}},{type:"elif",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lr","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","ls","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vec3","lt","=","lr","-","u_camera_eye",";","vec3","lq","=","cross","(","lt",",","ls",")",";","vec3","lp","=","cross","(","ls",",","lq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lp","=","vec3","(","0.0",")",";","vec3","lq","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ln","=","mix","(","ln",",","a_position_next",",","u_va_frame_factor",")",";","lo","=","mix","(","lo",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lu","=","vec3","(","a_tangent",")",";","vec3","lv","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","lu",")",";","lp","=","mix","(","lp",",","lu",",","u_va_frame_factor",")",";","lq","=","mix","(","lq",",","lv",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","ln",",","lp",",","lq",",","lo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lw","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lw","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","lx","=","ga","(","ln",",","lp",",","lq",",","lo",",","lw",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ly","=","(","u_model_matrix","*","vec4","(","lw",",","1.0",")",")",".","xyz",";","mat4","lz","=","aa","(","u_camera_eye",",","ly",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lA","=","(","u_model_matrix","*","vec4","(","lw",",","1.0",")",")",".","xyz",";","lz","=","lz","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lA",")",";"]}]}}]},{type:"textline",tokens:["d","lx","=","ah","(","ln","-","lw",",","lw",",","lp",",","lq",",","lo",",","lz",")",";","lx",".","b","=","ly",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","lx","=","ah","(","ln",",","lw",",","lp",",","lq",",","lo",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["float","lB","=","(","dot","(","cross","(","lx",".","e",",","lx",".","c",")",",","lx",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","kA","=","vec4","(","lx",".","c",",","lB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","lx",".","a",",","lx",".","b",",","lo",")",";"]}]}}]},{type:"textline",tokens:["ky","=","lx",".","a",";","kz","=","lx",".","e",";","kx","=","u_camera_eye","-","lx",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ak","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","lx",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","lC","=","u_view_matrix","*","vec4","(","lx",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cF","=","lC",";"]}]}}]},{type:"textline",tokens:["vec4","lD","=","u_proj_matrix","*","lC",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["lD",".","xy","+=","u_subpixel_jitter","*","lD",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gk","(","lD",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gk","(","lx",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lE","=","lD",".","x",";","float","lF","=","lD",".","y",";","float","lG","=","lD",".","w",";","cE",".","x","=","(","lE","+","lG",")","/","2.0",";","cE",".","y","=","(","lF","+","lG",")","/","2.0",";","cE",".","z","=","lG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","-","lC",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lD",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_ANIM_VALUES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","int","u_shadow_lamp_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VECTOR_VIEW","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_ANIM_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_anim_values","[","NUM_ANIM_VALUES","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ky",";","varying","vec4","cF",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","ln","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","lo","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","ls","(","in","vec3","lp",",","in","float","lq",")","{","vec3","lr","=","ln",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["lr","=","lm","(","cE",",","lp",".","xz","*","lq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lr","=","vec3","(","0.0",")",";","gr","(","lr",")",";"]}]}}]},{type:"textline",tokens:["return","lr",";","}"]}]}}]},{type:"textline",tokens:["vec3","lv","(","float","lt",",","vec3","lu",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","lu",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","mix","(","u_horizon_color",",","u_zenith_color",",","lt",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lC","(","vec3","lw",")","{","vec4","lx","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","vec4","ly","=","mix","(","vec4","(","lw",".","bg",",","lx",".","wz",")",",","vec4","(","lw",".","gb",",","lx",".","xy",")",",","step","(","lw",".","b",",","lw",".","g",")",")",";","vec4","lz","=","mix","(","vec4","(","ly",".","xyw",",","lw",".","r",")",",","vec4","(","lw",".","r",",","ly",".","yzx",")",",","step","(","ly",".","x",",","lw",".","r",")",")",";","float","lA","=","lz",".","x","-","min","(","lz",".","w",",","lz",".","y",")",";","float","lB","=","1.0e-10",";","return","vec3","(","abs","(","lz",".","z","+","(","lz",".","w","-","lz",".","y",")","/","(","6.0","*","lA","+","lB",")",")",",","lA","/","(","lz",".","x","+","lB",")",",","lz",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lG","(","vec3","lD",")","{","vec4","lE","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","vec3","lF","=","abs","(","fract","(","vec3","(","lD",".","r",",","lD",".","r",",","lD",".","r",")","+","lE",".","xyz",")","*","6.0","-","lE",".","www",")",";","return","lD",".","b","*","mix","(","lE",".","xxx",",","clamp","(","lF","-","lE",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","lD",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lI","(","vec2","lH",")","{","return","vec3","(","lH","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_TEXTURE_NORMAL4","||","USE_NODE_TEXTURE_COLOR4","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lK","(","vec3","lJ",")","{","return","vec2","(","lJ",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","lP","(","inout","vec3","lL",",","vec3","lM",",","vec3","lN",",","float","lO",")","{"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","(","lL",",","lM",",","lN",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kZ","(","lL",",","lM",",","lN",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lO",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","hp","mc","(","vec3","lQ",",","vec3","lR",",","vec3","lS",",","vec3","lT",",","vec3","lU",",","vec3","lV",",","vec3","lW",",","vec2","lX",",","vec2","lY",",","float","lZ",",","float","l_",",","vec4","ma",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS_MAT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["return","jR","(","lQ",",","lR",",","lS",",","lT",",","lU",",","lV",",","lW",",","lX",",","lY",",","lZ",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","l_",",","ma",",","u_shadow_lamp_id",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","jW","(","lQ",",","lR",",","lS",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hp","mb",";","mb",".","a","=","vec4","(","lS",",","ZERO_VALUE_NODES",")",";","mb",".","b","=","ln",";","return","mb",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"mV",qualifier:["vec3"]},{type:"node_out",name:"mW",qualifier:["float"]},{type:"node_out",name:"mX",qualifier:["float"]},{type:"textline",tokens:["mV","=","normalize","(","mL",".","xyz",")",";","mW","=","abs","(","mL",".","z",")",";","mX","=","length","(","mL",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"mY",qualifier:["float"]},{type:"node_in",name:"mZ",qualifier:["float"]},{type:"node_in",name:"m_",qualifier:["float"]},{type:"node_out",name:"na",qualifier:["vec3"]},{type:"textline",tokens:["na","=","vec3","(","mY",",","mZ",",","m_",")",";"]}]}},{type:"node",name:"COMBHSV",group:{type:"group",parts:[{type:"node_in",name:"nb",qualifier:["float"]},{type:"node_in",name:"nc",qualifier:["float"]},{type:"node_in",name:"nd",qualifier:["float"]},{type:"node_out",name:"ne",qualifier:["vec3"]},{type:"textline",tokens:["ne","=","lG","(","vec3","(","nb",",","nc",",","nd",")",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"md",qualifier:["varying","vec2"]},{type:"node_out",name:"nf",qualifier:["vec3"]},{type:"textline",tokens:["nf","=","lI","(","md",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"me",qualifier:["varying","vec3"]},{type:"node_out",name:"ng",qualifier:["vec3"]},{type:"textline",tokens:["ng","=","me",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"mf",qualifier:["varying","float"]},{type:"node_out",name:"nh",qualifier:["float"]},{type:"textline",tokens:["nh","=","mf",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"mg",qualifier:["varying","vec2"]},{type:"node_out",name:"ni",qualifier:["float"]},{type:"node_out",name:"nj",qualifier:["float"]},{type:"textline",tokens:["ni","=","mg","[","0","]",";","nj","=","mg","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"mh",qualifier:["varying","vec3"]},{type:"node_out",name:"nk",qualifier:["float"]},{type:"node_out",name:"nl",qualifier:["float"]},{type:"node_out",name:"nm",qualifier:["float"]},{type:"textline",tokens:["nk","=","mh","[","0","]",";","nl","=","mh","[","1","]",";","nm","=","mh","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"nn",qualifier:["vec3"]},{type:"textline",tokens:["nn","=","mE",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"no",qualifier:["float"]},{type:"textline",tokens:["no","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"np",qualifier:["vec3"]},{type:"textline",tokens:["np","=","mJ",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"nq",qualifier:["vec3"]},{type:"textline",tokens:["nq","=","vec3","(","mK",".","r",",","-","mK",".","b",",","mK",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"nr",qualifier:["float"]},{type:"node_in",name:"ns",qualifier:["float"]},{type:"node_in",name:"nt",qualifier:["float"]},{type:"node_in",name:"nu",qualifier:["float"]},{type:"node_in",name:"nv",qualifier:["vec3"]},{type:"node_out",name:"nw",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","nx","=","lC","(","nv",")",";","nx","[","0","]","+=","(","nr","-","0.5",")",";","if","(","nx","[","0","]",">","UNITY_VALUE_NODES",")","nx","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","nx","[","0","]","<","ZERO_VALUE_NODES",")","nx","[","0","]","+=","UNITY_VALUE_NODES",";","nx","*=","vec3","(","UNITY_VALUE_NODES",",","ns",",","nt",")",";","nx","=","mix","(","lo",",","mix","(","ln",",","nx",",","step","(","ln",",","nx",")",")",",","step","(","nx",",","lo",")",")",";","nw","=","mix","(","nv",",","lG","(","nx",")",",","nu",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"ny",qualifier:["float"]},{type:"node_in",name:"nz",qualifier:["vec3"]},{type:"node_out",name:"nA",qualifier:["vec3"]},{type:"textline",tokens:["nA","=","mix","(","nz",",","lo","-","nz",",","ny",")",";"]}]}},{type:"node",name:"LAMP",group:{type:"group",parts:[{type:"node_param",name:"mi",qualifier:["const","float"]},{type:"node_out",name:"nB",qualifier:["vec3"]},{type:"node_out",name:"nC",qualifier:["vec3"]},{type:"node_out",name:"nD",qualifier:["float"]},{type:"node_out",name:"nE",qualifier:["float"]},{type:"textline",tokens:["{","const","int","nF","=","int","(","mi",")",";","vec4","nG","=","u_lamp_light_factors","[","nF","]",";","vec3","nH","=","u_lamp_light_directions","[","nF","]",";","vec3","nI","=","u_lamp_light_positions","[","nF","]",";","float","nJ","=","nG",".","z",";","nB","=","u_lamp_light_color_intensities","[","nF","]",";","if","(","nJ","!=","-","UNITY_VALUE_NODES",")","{","nC","=","nI","-","ky",";","nD","=","length","(","nC",")",";","nC","=","normalize","(","nC",")",";","nE","=","nJ","/","(","nJ","+","nD","*","nD",")",";","float","nK","=","nG",".","x",";","float","nL","=","nG",".","y",";","if","(","nK",">","-","UNITY_VALUE_NODES",")","{","float","nM","=","dot","(","nC",",","nH",")",";","nM","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","nM","-","nK",")","/","nL",")",";","nE","*=","nM",";","}","}","else","{","nC","=","nH",";","nD","=","length","(","nI","-","ky",")",";","nE","=","UNITY_VALUE_NODES",";","}","}"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"mj",qualifier:["vec3"]},{type:"node_in",name:"nN",qualifier:["vec3"]},{type:"node_out",name:"nO",qualifier:["vec3"]},{type:"node_out",name:"nP",qualifier:["float"]},{type:"textline",tokens:["nO","=","mj",";","nP","=","-","dot","(","nN",",","mj",")",";"]}]}},{type:"node",name:"VECTOR_VIEW",group:{type:"group",parts:[{type:"node_in",name:"nQ",qualifier:["vec3"]},{type:"node_out",name:"nR",qualifier:["vec3"]},{type:"textline",tokens:["nR","=","-","(","u_view_matrix_frag","*","vec4","(","nQ",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"mk",qualifier:["vec3"]},{type:"node_param",name:"ml",qualifier:["float"]},{type:"node_in",name:"nS",qualifier:["vec3"]},{type:"node_out",name:"nT",qualifier:["vec3"]},{type:"textline",tokens:["nT","=","nS","*","mk",";","if","(","ml","==","MAPPING_TYPE_NORMAL",")","nT","=","normalize","(","nT",")",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"mm",qualifier:["mat4"]},{type:"node_param",name:"mn",qualifier:["float"]},{type:"node_param",name:"mo",qualifier:["float"]},{type:"node_param",name:"mp",qualifier:["vec3"]},{type:"node_param",name:"mq",qualifier:["vec3"]},{type:"node_param",name:"mr",qualifier:["float"]},{type:"node_in",name:"nU",qualifier:["vec3"]},{type:"node_out",name:"nV",qualifier:["vec3"]},{type:"textline",tokens:["nV","=","(","mm","*","vec4","(","nU",",","UNITY_VALUE_NODES",")",")",".","xyz",";","if","(","mn","==","UNITY_VALUE_NODES",")","nV","=","max","(","nV",",","mp",")",";","if","(","mo","==","UNITY_VALUE_NODES",")","nV","=","min","(","nV",",","mq",")",";","if","(","mr","==","MAPPING_TYPE_NORMAL",")","nV","=","normalize","(","nV",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"nW",qualifier:["float"]},{type:"node_in",name:"nX",qualifier:["float"]},{type:"node_out",name:"nY",qualifier:["float"]},{type:"textline",tokens:["nY","=","nW","+","nX",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"nZ",qualifier:["float"]},{type:"node_in",name:"n_",qualifier:["float"]},{type:"node_out",name:"oa",qualifier:["float"]},{type:"textline",tokens:["oa","=","nZ","-","n_",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"ob",qualifier:["float"]},{type:"node_in",name:"oc",qualifier:["float"]},{type:"node_out",name:"od",qualifier:["float"]},{type:"textline",tokens:["od","=","ob","*","oc",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"oe",qualifier:["float"]},{type:"node_in",name:"of",qualifier:["float"]},{type:"node_out",name:"og",qualifier:["float"]},{type:"textline",tokens:["og","=","(","of","!=","ZERO_VALUE_NODES",")","?","oe","/","of",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"oh",qualifier:["float"]},{type:"node_in",name:"oi",qualifier:["float"]},{type:"node_out",name:"oj",qualifier:["float"]},{type:"textline",tokens:["oj","=","sin","(","oh",")",";","oi",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"ok",qualifier:["float"]},{type:"node_in",name:"ol",qualifier:["float"]},{type:"node_out",name:"om",qualifier:["float"]},{type:"textline",tokens:["om","=","cos","(","ok",")",";","ol",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"on",qualifier:["float"]},{type:"node_in",name:"oo",qualifier:["float"]},{type:"node_out",name:"op",qualifier:["float"]},{type:"textline",tokens:["op","=","tan","(","on",")",";","oo",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"oq",qualifier:["float"]},{type:"node_in",name:"or",qualifier:["float"]},{type:"node_out",name:"os",qualifier:["float"]},{type:"textline",tokens:["os","=","(","oq","<=","UNITY_VALUE_NODES","&&","oq",">=","-","UNITY_VALUE_NODES",")","?","asin","(","oq",")",":","ZERO_VALUE_NODES",";","or",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"ot",qualifier:["float"]},{type:"node_in",name:"ou",qualifier:["float"]},{type:"node_out",name:"ov",qualifier:["float"]},{type:"textline",tokens:["ov","=","(","ot","<=","UNITY_VALUE_NODES","&&","ot",">=","-","UNITY_VALUE_NODES",")","?","acos","(","ot",")",":","ZERO_VALUE_NODES",";","ou",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"ow",qualifier:["float"]},{type:"node_in",name:"ox",qualifier:["float"]},{type:"node_out",name:"oy",qualifier:["float"]},{type:"textline",tokens:["oy","=","atan","(","ow",")",";","ox",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"oz",qualifier:["float"]},{type:"node_in",name:"oA",qualifier:["float"]},{type:"node_out",name:"oB",qualifier:["float"]},{type:"textline",tokens:["if","(","oz","<","ZERO_VALUE_NODES","||","oz","==","ZERO_VALUE_NODES","&&","oA","==","ZERO_VALUE_NODES",")","oB","=","ZERO_VALUE_NODES",";","else","oB","=","pow","(","oz",",","oA",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"oC",qualifier:["float"]},{type:"node_in",name:"oD",qualifier:["float"]},{type:"node_out",name:"oE",qualifier:["float"]},{type:"textline",tokens:["oE","=","(","oC",">","ZERO_VALUE_NODES","&&","oD",">","ZERO_VALUE_NODES",")","?","log2","(","oC",")","/","log2","(","oD",")",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"oF",qualifier:["float"]},{type:"node_in",name:"oG",qualifier:["float"]},{type:"node_out",name:"oH",qualifier:["float"]},{type:"textline",tokens:["oH","=","min","(","oF",",","oG",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"oI",qualifier:["float"]},{type:"node_in",name:"oJ",qualifier:["float"]},{type:"node_out",name:"oK",qualifier:["float"]},{type:"textline",tokens:["oK","=","max","(","oI",",","oJ",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"oL",qualifier:["float"]},{type:"node_in",name:"oM",qualifier:["float"]},{type:"node_out",name:"oN",qualifier:["float"]},{type:"textline",tokens:["oN","=","floor","(","oL","+","0.5",")",";","oM",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"oO",qualifier:["float"]},{type:"node_in",name:"oP",qualifier:["float"]},{type:"node_out",name:"oQ",qualifier:["float"]},{type:"textline",tokens:["oQ","=","(","oO","<","oP",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"oR",qualifier:["float"]},{type:"node_in",name:"oS",qualifier:["float"]},{type:"node_out",name:"oT",qualifier:["float"]},{type:"textline",tokens:["oT","=","(","oR",">","oS",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"oU",qualifier:["float"]},{type:"node_in",name:"oV",qualifier:["float"]},{type:"node_out",name:"oW",qualifier:["float"]},{type:"textline",tokens:["oW","=","abs","(","oV",")",">","0.000001","?","mod","(","oU",",","oV",")",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_ABSOLUTE",group:{type:"group",parts:[{type:"node_in",name:"oX",qualifier:["float"]},{type:"node_in",name:"oY",qualifier:["float"]},{type:"node_out",name:"oZ",qualifier:["float"]},{type:"textline",tokens:["oZ","=","abs","(","oX",")",";","oY",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"o_",qualifier:["float"]},{type:"node_in",name:"pa",qualifier:["vec3"]},{type:"node_in",name:"pb",qualifier:["vec3"]},{type:"node_out",name:"pc",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pd","=","clamp","(","o_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pc","=","mix","(","pa",",","pb",",","pd",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"pe",qualifier:["float"]},{type:"node_in",name:"pf",qualifier:["vec3"]},{type:"node_in",name:"pg",qualifier:["vec3"]},{type:"node_out",name:"ph",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pi","=","clamp","(","pe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ph","=","mix","(","pf",",","pf","+","pg",",","pi",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"pj",qualifier:["float"]},{type:"node_in",name:"pk",qualifier:["vec3"]},{type:"node_in",name:"pl",qualifier:["vec3"]},{type:"node_out",name:"pm",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pn","=","clamp","(","pj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pm","=","mix","(","pk",",","pk","*","pl",",","pn",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"po",qualifier:["float"]},{type:"node_in",name:"pp",qualifier:["vec3"]},{type:"node_in",name:"pq",qualifier:["vec3"]},{type:"node_out",name:"pr",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ps","=","clamp","(","po",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pr","=","mix","(","pp",",","pp","-","pq",",","ps",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"pt",qualifier:["float"]},{type:"node_in",name:"pu",qualifier:["vec3"]},{type:"node_in",name:"pv",qualifier:["vec3"]},{type:"node_out",name:"pw",qualifier:["vec3"]},{type:"textline",tokens:["{","float","px","=","clamp","(","pt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","py","=","UNITY_VALUE_NODES","-","px",";","pw","=","lo","-","(","vec3","(","py",")","+","px","*","(","lo","-","pv",")",")","*","(","lo","-","pu",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"pz",qualifier:["float"]},{type:"node_in",name:"pA",qualifier:["vec3"]},{type:"node_in",name:"pB",qualifier:["vec3"]},{type:"node_out",name:"pC",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pD","=","clamp","(","pz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pE","=","UNITY_VALUE_NODES","-","pD",";","pB","+=","step","(","pB",",","ln",")",";","pC","=","pE","*","pA","+","pD","*","pA","/","pB",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"pF",qualifier:["float"]},{type:"node_in",name:"pG",qualifier:["vec3"]},{type:"node_in",name:"pH",qualifier:["vec3"]},{type:"node_out",name:"pI",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pJ","=","clamp","(","pF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pI","=","mix","(","pG",",","abs","(","pG","-","pH",")",",","pJ",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"pK",qualifier:["float"]},{type:"node_in",name:"pL",qualifier:["vec3"]},{type:"node_in",name:"pM",qualifier:["vec3"]},{type:"node_out",name:"pN",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pO","=","clamp","(","pK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pN","=","min","(","pL",".","rgb",",","pM",".","rgb","*","pO",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"pP",qualifier:["float"]},{type:"node_in",name:"pQ",qualifier:["vec3"]},{type:"node_in",name:"pR",qualifier:["vec3"]},{type:"node_out",name:"pS",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pT","=","clamp","(","pP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pS","=","max","(","pQ",".","rgb",",","pR",".","rgb","*","pT",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"pU",qualifier:["float"]},{type:"node_in",name:"pV",qualifier:["vec3"]},{type:"node_in",name:"pW",qualifier:["vec3"]},{type:"node_out",name:"pX",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pY","=","clamp","(","pU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pZ","=","UNITY_VALUE_NODES","-","pY",";","vec3","p_","=","vec3","(","pZ",")",";","pX","=","mix","(","pV","*","(","p_","+","2.0","*","pY","*","pW",")",",","lo","-","(","p_","+","2.0","*","pY","*","(","lo","-","pW",")",")","*","(","lo","-","pV",")",",","step","(","0.5",",","pV",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"qa",qualifier:["float"]},{type:"node_in",name:"qb",qualifier:["vec3"]},{type:"node_in",name:"qc",qualifier:["vec3"]},{type:"node_out",name:"qd",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qe","=","clamp","(","qa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qf","=","lo","-","qe","*","qc",";","vec3","qg","=","qb","/","(","qf","+","step","(","qf",",","ln",")",")",";","qd","=","(","lo","-","step","(","qb",",","ln",")",")","*","mix","(","mix","(","lo",",","qg",",","step","(","qg",",","lo",")",")",",","lo",",","step","(","qf",",","ln",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"qh",qualifier:["float"]},{type:"node_in",name:"qi",qualifier:["vec3"]},{type:"node_in",name:"qj",qualifier:["vec3"]},{type:"node_out",name:"qk",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ql","=","clamp","(","qh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qm","=","lo","-","ql","*","(","lo","-","qj",")",";","vec3","qn","=","lo","-","(","lo","-","qi",")","/","(","qm","+","step","(","qm",",","ln",")",")",";","qk","=","mix","(","mix","(","ln",",","mix","(","lo",",","qn",",","step","(","qn",",","lo",")",")",",","step","(","ZERO_VALUE_NODES",",","qn",")",")",",","ln",",","step","(","qm",",","ln",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"qo",qualifier:["float"]},{type:"node_in",name:"qp",qualifier:["vec3"]},{type:"node_in",name:"qq",qualifier:["vec3"]},{type:"node_out",name:"qr",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qs","=","clamp","(","qo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qt",",","qu",",","qv",";","qr","=","qp",";","qu","=","lC","(","qq",")",";","if","(","qu",".","y","!=","ZERO_VALUE_NODES",")","{","qt","=","lC","(","qr",")",";","qt",".","x","=","qu",".","x",";","qv","=","lG","(","qt",")",";","qr","=","mix","(","qr",",","qv",",","qs",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"qw",qualifier:["float"]},{type:"node_in",name:"qx",qualifier:["vec3"]},{type:"node_in",name:"qy",qualifier:["vec3"]},{type:"node_out",name:"qz",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qA","=","clamp","(","qw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qB","=","UNITY_VALUE_NODES","-","qA",";","qz","=","qx",";","vec3","qC",",","qD",";","qC","=","lC","(","qz",")",";","if","(","qC",".","y","!=","ZERO_VALUE_NODES",")","{","qD","=","lC","(","qy",")",";","qC",".","y","=","qB","*","qC",".","y","+","qA","*","qD",".","y",";","qz","=","lG","(","qC",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"qE",qualifier:["float"]},{type:"node_in",name:"qF",qualifier:["vec3"]},{type:"node_in",name:"qG",qualifier:["vec3"]},{type:"node_out",name:"qH",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qI","=","clamp","(","qE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qJ","=","UNITY_VALUE_NODES","-","qI",";","vec3","qK",",","qL",";","qK","=","lC","(","qF",")",";","qL","=","lC","(","qG",")",";","qK",".","z","=","qJ","*","qK",".","z","+","qI","*","qL",".","z",";","qH","=","lG","(","qK",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"qM",qualifier:["float"]},{type:"node_in",name:"qN",qualifier:["vec3"]},{type:"node_in",name:"qO",qualifier:["vec3"]},{type:"node_out",name:"qP",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qQ","=","clamp","(","qM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qR",",","qS",",","qT",";","qP","=","qN",";","qS","=","lC","(","qO",")",";","if","(","qS",".","y","!=","ZERO_VALUE_NODES",")","{","qR","=","lC","(","qP",")",";","qR",".","x","=","qS",".","x",";","qR",".","y","=","qS",".","y",";","qT","=","lG","(","qR",")",";","qP","=","mix","(","qP",",","qT",",","qQ",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"qU",qualifier:["float"]},{type:"node_in",name:"qV",qualifier:["vec3"]},{type:"node_in",name:"qW",qualifier:["vec3"]},{type:"node_out",name:"qX",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qY","=","clamp","(","qU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qZ","=","UNITY_VALUE_NODES","-","qY",";","vec3","q_","=","qW","+","qV","-","qW","*","qV",";","qX","=","qV","*","(","vec3","(","qZ",")","+","vec3","(","qY",")","*","(","(","lo","-","qV",")","*","qW","+","q_",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"ra",qualifier:["float"]},{type:"node_in",name:"rb",qualifier:["vec3"]},{type:"node_in",name:"rc",qualifier:["vec3"]},{type:"node_out",name:"rd",qualifier:["vec3"]},{type:"textline",tokens:["{","float","re","=","clamp","(","ra",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rd","=","clamp","(","rb","+","re","*","(","2.0","*","rc","-","lo",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"rf",qualifier:["vec3"]},{type:"node_in",name:"rg",qualifier:["float"]},{type:"textline",tokens:["mP","=","rf",";","mU","=","rg",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"ms",qualifier:["const","vec3"]},{type:"node_param",name:"mt",qualifier:["const","vec4"]},{type:"node_param",name:"mu",qualifier:["const","float"]},{type:"node_in",name:"rh",qualifier:["vec3"]},{type:"node_in",name:"ri",qualifier:["float"]},{type:"node_in",name:"rj",qualifier:["vec3"]},{type:"node_in",name:"rk",qualifier:["vec3"]},{type:"node_out",name:"rl",qualifier:["vec3"]},{type:"node_out",name:"rm",qualifier:["float"]},{type:"node_out",name:"rn",qualifier:["vec3"]},{type:"textline",tokens:["{","rh","=","clamp","(","rh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ri","=","clamp","(","ri",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rj","=","clamp","(","rj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","ro","=","rh",";","float","rp","=","ms","[","0","]",";","vec2","rq","=","vec2","(","ms","[","1","]",",","ms","[","2","]",")",";","vec3","rr","=","mM","*","rh",";","vec3","rs","=","mt","[","1","]","*","rj",";","float","rt","=","mt","[","0","]",";","vec2","ru","=","vec2","(","mt","[","2","]",",","mt","[","3","]",")",";","float","rv","=","fl","(","ro",")",";","vec3","rw",";","if","(","mu","==","UNITY_VALUE_NODES",")","rw","=","normalize","(","rk",")",";","else","rw","=","mE",";","float","rx","=","0.5","*","rw",".","y","+","0.5",";","vec3","ry","=","mO","*","u_environment_energy","*","lv","(","rx",",","rw",")",";","hp","rz","=","mc","(","rr",",","ry",",","ro",",","rs",",","mK",",","rw",",","mJ",",","ru",",","rq",",","rv",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";","rl","=","(","rp","==","UNITY_VALUE_NODES",")","?","rz",".","a",".","rgb",":","ln",";","rm","=","ri",";","rn","=","rw",";","if","(","rt","==","UNITY_VALUE_NODES",")","{","rm","+=","rz",".","a",".","a","*","rs",".","r","*","mN",";","rm","=","clamp","(","rm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rl","+=","rz",".","b",";","mQ","=","rz",".","b",";","}","else","{","mQ","=","ln",";","}","mR","=","rw",";","mT","=","rv",";","}"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"mv",qualifier:["const","vec3"]},{type:"node_param",name:"mw",qualifier:["const","vec4"]},{type:"node_param",name:"mx",qualifier:["const","float"]},{type:"node_in",name:"rA",qualifier:["vec3"]},{type:"node_in",name:"rB",qualifier:["float"]},{type:"node_in",name:"rC",qualifier:["vec3"]},{type:"node_in",name:"rD",qualifier:["vec3"]},{type:"node_in",name:"rE",qualifier:["float"]},{type:"node_in",name:"rF",qualifier:["float"]},{type:"node_in",name:"rG",qualifier:["vec4"]},{type:"node_in",name:"rH",qualifier:["float"]},{type:"node_in",name:"rI",qualifier:["float"]},{type:"node_out",name:"rJ",qualifier:["vec3"]},{type:"node_out",name:"rK",qualifier:["float"]},{type:"node_out",name:"rL",qualifier:["vec3"]},{type:"node_out",name:"rM",qualifier:["vec3"]},{type:"node_out",name:"rN",qualifier:["vec3"]},{type:"textline",tokens:["{","rA","=","clamp","(","rA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rB","=","clamp","(","rB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rC","=","clamp","(","rC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","rO","=","rA",";","float","rP","=","mv","[","0","]",";","vec2","rQ","=","vec2","(","mv","[","1","]",",","mv","[","2","]",")",";","vec3","rR","=","rE","*","rA",";","vec3","rS","=","mw","[","1","]","*","rC",";","float","rT","=","mw","[","0","]",";","vec2","rU","=","vec2","(","mw","[","2","]",",","mw","[","3","]",")",";","float","rV","=","fl","(","rO",")",";","vec3","rW",";","if","(","mx","==","UNITY_VALUE_NODES",")","rW","=","normalize","(","rD",")",";","else","rW","=","mE",";","float","rX","=","0.5","*","rW",".","y","+","0.5",";","vec3","rY","=","mO","*","u_environment_energy","*","lv","(","rX",",","rW",")",";","hp","rZ","=","mc","(","rR",",","rY",",","rO",",","rS",",","mK",",","rW",",","mJ",",","rU",",","rQ",",","rV",",","rF",",","rG",")",";","rJ","=","(","rP","==","UNITY_VALUE_NODES",")","?","rZ",".","a",".","rgb",":","ln",";","rK","=","rB",";","rL","=","rW",";","rM","=","rZ",".","a",".","rgb",";","rN","=","rZ",".","b",";","lP","(","rJ",",","mJ",",","rL",",","rH",")",";","if","(","rT","==","UNITY_VALUE_NODES",")","{","rJ","+=","rZ",".","b",";","rK","+=","rZ",".","a",".","a","*","rS",".","r","*","rI",";","rK","=","clamp","(","rK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mQ","=","rZ",".","b",";","}","else","{","mQ","=","ln",";","}","mR","=","rW",";","mT","=","rV",";","}"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"my",qualifier:["vec3"]},{type:"node_out",name:"r_",qualifier:["vec3"]},{type:"textline",tokens:["r_","=","my",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"sa",qualifier:["vec3"]},{type:"node_out",name:"sb",qualifier:["float"]},{type:"textline",tokens:["sb","=","sa",".","r","*","0.35","+","sa",".","g","*","0.45","+","sa",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"sc",qualifier:["vec3"]},{type:"node_out",name:"sd",qualifier:["float"]},{type:"node_out",name:"se",qualifier:["float"]},{type:"node_out",name:"sf",qualifier:["float"]},{type:"textline",tokens:["sd","=","sc",".","r",";","se","=","sc",".","g",";","sf","=","sc",".","b",";"]}]}},{type:"node",name:"SEPHSV",group:{type:"group",parts:[{type:"node_in",name:"sg",qualifier:["vec3"]},{type:"node_out",name:"sh",qualifier:["float"]},{type:"node_out",name:"si",qualifier:["float"]},{type:"node_out",name:"sj",qualifier:["float"]},{type:"textline",tokens:["{","vec3","sk","=","lC","(","sg",")",";","sh","=","sk",".","r",";","si","=","sk",".","g",";","sj","=","sk",".","b",";","}"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"sl",qualifier:["float"]},{type:"node_in",name:"sm",qualifier:["float"]},{type:"node_in",name:"sn",qualifier:["float"]},{type:"node_out",name:"so",qualifier:["float"]},{type:"textline",tokens:["so","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","sl","-","sn",")","*","sm",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"sp",qualifier:["vec3"]},{type:"node_out",name:"sq",qualifier:["vec3"]},{type:"textline",tokens:["sq","=","max","(","ln",",","sp",")",";","sq","=","pow","(","sq",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"sr",qualifier:["vec3"]},{type:"node_out",name:"ss",qualifier:["vec3"]},{type:"textline",tokens:["ss","=","max","(","ln",",","sr",")",";","ss","=","pow","(","ss",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"st",qualifier:["vec3"]},{type:"node_out",name:"su",qualifier:["vec3"]},{type:"node_out",name:"sv",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sw","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","lK","(","st",")",")",";","su","=","sw",".","xyz",";","gr","(","su",")",";","sv","=","sw",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sx",qualifier:["vec3"]},{type:"node_out",name:"sy",qualifier:["vec3"]},{type:"node_out",name:"sz",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sA","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","lK","(","sx",")",")",";","mS","=","sA",".","xyz","-","0.5",";","sy","=","normalize","(","mH","*","mS",")",";","sz","=","sA",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"sB",qualifier:["vec3"]},{type:"node_out",name:"sC",qualifier:["vec3"]},{type:"node_out",name:"sD",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sE","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","sB",")",";","sC","=","sE",".","xyz",";","gr","(","sC",")",";","sD","=","sE",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sF",qualifier:["vec3"]},{type:"node_in",name:"sG",qualifier:["vec3"]},{type:"node_out",name:"sH",qualifier:["vec3"]},{type:"node_out",name:"sI",qualifier:["float"]},{type:"node_out",name:"sJ",qualifier:["vec3"]},{type:"node_out",name:"sK",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sL","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lK","(","sF",")",")",";","sH","=","sL",".","xyz",";","gr","(","sH",")",";","sI","=","sL",".","w",";","sL","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lK","(","sG",")",")",";","sJ","=","sL",".","xyz",";","gr","(","sJ",")",";","sK","=","sL",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sM",qualifier:["vec3"]},{type:"node_in",name:"sN",qualifier:["vec3"]},{type:"node_out",name:"sO",qualifier:["vec3"]},{type:"node_out",name:"sP",qualifier:["float"]},{type:"node_out",name:"sQ",qualifier:["vec3"]},{type:"node_out",name:"sR",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sS","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lK","(","sM",")",")",";","mS","=","sS",".","xyz","-","0.5",";","sO","=","normalize","(","mH","*","mS",")",";","sP","=","sS",".","w",";","sS","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lK","(","sN",")",")",";","mS","=","sS",".","xyz","-","0.5",";","sQ","=","normalize","(","mH","*","mS",")",";","sR","=","sS",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sT",qualifier:["vec3"]},{type:"node_in",name:"sU",qualifier:["vec3"]},{type:"node_in",name:"sV",qualifier:["vec3"]},{type:"node_out",name:"sW",qualifier:["vec3"]},{type:"node_out",name:"sX",qualifier:["float"]},{type:"node_out",name:"sY",qualifier:["vec3"]},{type:"node_out",name:"sZ",qualifier:["float"]},{type:"node_out",name:"s_",qualifier:["vec3"]},{type:"node_out",name:"ta",qualifier:["float"]},{type:"textline",tokens:["{","vec4","tb","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lK","(","sT",")",")",";","sW","=","tb",".","xyz",";","gr","(","sW",")",";","sX","=","tb",".","w",";","tb","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lK","(","sU",")",")",";","sY","=","tb",".","xyz",";","gr","(","sY",")",";","sZ","=","tb",".","w",";","tb","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lK","(","sV",")",")",";","s_","=","tb",".","xyz",";","gr","(","s_",")",";","ta","=","tb",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR4",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR4_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"tc",qualifier:["vec3"]},{type:"node_in",name:"td",qualifier:["vec3"]},{type:"node_in",name:"te",qualifier:["vec3"]},{type:"node_in",name:"tf",qualifier:["vec3"]},{type:"node_out",name:"tg",qualifier:["vec3"]},{type:"node_out",name:"th",qualifier:["float"]},{type:"node_out",name:"ti",qualifier:["vec3"]},{type:"node_out",name:"tj",qualifier:["float"]},{type:"node_out",name:"tk",qualifier:["vec3"]},{type:"node_out",name:"tl",qualifier:["float"]},{type:"node_out",name:"tm",qualifier:["vec3"]},{type:"node_out",name:"tn",qualifier:["float"]},{type:"textline",tokens:["{","vec4","to","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lK","(","tc",")",")",";","tg","=","to",".","xyz",";","gr","(","tg",")",";","th","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lK","(","td",")",")",";","ti","=","to",".","xyz",";","gr","(","ti",")",";","tj","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lK","(","te",")",")",";","tk","=","to",".","xyz",";","gr","(","tk",")",";","tl","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lK","(","tf",")",")",";","tm","=","to",".","xyz",";","gr","(","tm",")",";","tn","=","to",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"tp",qualifier:["vec3"]},{type:"node_in",name:"tq",qualifier:["vec3"]},{type:"node_in",name:"tr",qualifier:["vec3"]},{type:"node_out",name:"ts",qualifier:["vec3"]},{type:"node_out",name:"tt",qualifier:["float"]},{type:"node_out",name:"tu",qualifier:["vec3"]},{type:"node_out",name:"tv",qualifier:["float"]},{type:"node_out",name:"tw",qualifier:["vec3"]},{type:"node_out",name:"tx",qualifier:["float"]},{type:"textline",tokens:["{","vec4","ty","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lK","(","tp",")",")",";","mS","=","ty",".","xyz","-","0.5",";","ts","=","normalize","(","mH","*","mS",")",";","tt","=","ty",".","w",";","ty","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lK","(","tq",")",")",";","mS","=","ty",".","xyz","-","0.5",";","tu","=","normalize","(","mH","*","mS",")",";","tv","=","ty",".","w",";","ty","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lK","(","tr",")",")",";","mS","=","ty",".","xyz","-","0.5",";","tw","=","normalize","(","mH","*","mS",")",";","tx","=","ty",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL4",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL4_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"tz",qualifier:["vec3"]},{type:"node_in",name:"tA",qualifier:["vec3"]},{type:"node_in",name:"tB",qualifier:["vec3"]},{type:"node_in",name:"tC",qualifier:["vec3"]},{type:"node_out",name:"tD",qualifier:["vec3"]},{type:"node_out",name:"tE",qualifier:["float"]},{type:"node_out",name:"tF",qualifier:["vec3"]},{type:"node_out",name:"tG",qualifier:["float"]},{type:"node_out",name:"tH",qualifier:["vec3"]},{type:"node_out",name:"tI",qualifier:["float"]},{type:"node_out",name:"tJ",qualifier:["vec3"]},{type:"node_out",name:"tK",qualifier:["float"]},{type:"textline",tokens:["{","vec4","tL","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lK","(","tz",")",")",";","mS","=","tL",".","xyz","-","0.5",";","tD","=","normalize","(","mH","*","mS",")",";","tE","=","tL",".","w",";","tL","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lK","(","tA",")",")",";","mS","=","tL",".","xyz","-","0.5",";","tF","=","normalize","(","mH","*","mS",")",";","tG","=","tL",".","w",";","tL","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lK","(","tB",")",")",";","mS","=","tL",".","xyz","-","0.5",";","tH","=","normalize","(","mH","*","mS",")",";","tI","=","tL",".","w",";","tL","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lK","(","tC",")",")",";","mS","=","tL",".","xyz","-","0.5",";","tJ","=","normalize","(","mH","*","mS",")",";","tK","=","tL",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"mz",qualifier:["const","float"]},{type:"node_out",name:"tM",qualifier:["float"]},{type:"textline",tokens:["tM","=","mz",";"]}]}},{type:"node",name:"ANIM_VALUE",group:{type:"group",parts:[{type:"node_param",name:"mA",qualifier:["const","int"]},{type:"node_out",name:"tN",qualifier:["float"]},{type:"textline",tokens:["tN","=","u_anim_values","[","mA","]",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"tO",qualifier:["vec3"]},{type:"node_in",name:"tP",qualifier:["vec3"]},{type:"node_out",name:"tQ",qualifier:["vec3"]},{type:"node_out",name:"tR",qualifier:["float"]},{type:"textline",tokens:["tQ","=","tO","+","tP",";","tR","=","(","abs","(","tQ","[","0","]",")","+","abs","(","tQ","[","1","]",")","+","abs","(","tQ","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"tS",qualifier:["vec3"]},{type:"node_in",name:"tT",qualifier:["vec3"]},{type:"node_out",name:"tU",qualifier:["vec3"]},{type:"node_out",name:"tV",qualifier:["float"]},{type:"textline",tokens:["tU","=","tS","-","tT",";","tV","=","(","abs","(","tU","[","0","]",")","+","abs","(","tU","[","1","]",")","+","abs","(","tU","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"tW",qualifier:["vec3"]},{type:"node_in",name:"tX",qualifier:["vec3"]},{type:"node_out",name:"tY",qualifier:["vec3"]},{type:"node_out",name:"tZ",qualifier:["float"]},{type:"textline",tokens:["tY","=","tW","+","tX",";","tZ","=","length","(","tY",")",";","tY","=","normalize","(","tY",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"t_",qualifier:["vec3"]},{type:"node_in",name:"ua",qualifier:["vec3"]},{type:"node_out",name:"ub",qualifier:["vec3"]},{type:"node_out",name:"uc",qualifier:["float"]},{type:"textline",tokens:["ub","=","ln",";","uc","=","dot","(","t_",",","ua",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"ud",qualifier:["vec3"]},{type:"node_in",name:"ue",qualifier:["vec3"]},{type:"node_out",name:"uf",qualifier:["vec3"]},{type:"node_out",name:"ug",qualifier:["float"]},{type:"textline",tokens:["uf","=","cross","(","ud",",","ue",")",";","ug","=","length","(","uf",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"uh",qualifier:["vec3"]},{type:"node_in",name:"ui",qualifier:["vec3"]},{type:"node_out",name:"uj",qualifier:["vec3"]},{type:"node_out",name:"uk",qualifier:["float"]},{type:"textline",tokens:["uj","=","normalize","(","uh",")",";","uk","=","length","(","uh",")",";","ui",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"ul",qualifier:["vec3"]},{type:"node_in",name:"um",qualifier:["vec3"]},{type:"node_out",name:"un",qualifier:["vec3"]},{type:"textline",tokens:["un","=","reflect","(","-","ul",",","um",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"uo",qualifier:["vec3"]},{type:"node_in",name:"up",qualifier:["float"]},{type:"node_in",name:"uq",qualifier:["const","float"]},{type:"node_in",name:"ur",qualifier:["const","float"]},{type:"node_out",name:"us",qualifier:["vec3"]},{type:"textline",tokens:["{","float","ut","=","length","(","mL",")",";","if","(","ut","<","ur",")","{","vec2","uu","=","lK","(","uo",")",";","float","uv","=","clamp","(","0.5","*","(","ur","-","ut",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","uw","=","up","*","uv",";","vec3","ux","=","normalize","(","mJ","*","mH",")",";","float","uy","=","UNITY_VALUE_NODES","/","uq",";","vec2","uz","=","ux",".","xy","*","uw","/","(","uq","*","ux",".","z",")",";","float","uA","=","UNITY_VALUE_NODES",";","float","uB","=","texture2D","(","node_PARALLAX_var_texture",",","uu",")",".","a",";","for","(","float","uC","=","1.0",";","uC","<=","uq",";","uC","++",")","{","if","(","uB","<","uA",")","{","uA","-=","uy",";","uu","-=","uz",";","uB","=","texture2D","(","node_PARALLAX_var_texture",",","uu",")",".","a",";","}","}","vec2","uD","=","uu","+","uz",";","float","uE","=","texture2D","(","node_PARALLAX_var_texture",",","uD",")",".","a","-","(","uA","+","uy",")",";","float","uF","=","uB","-","uA",";","float","uG","=","uF","/","(","uF","-","uE",")",";","uu","=","uG","*","uD","+","(","UNITY_VALUE_NODES","-","uG",")","*","uu",";","us","=","lI","(","uu",")",";","}","else","us","=","uo",";","}"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"uH",qualifier:["vec3"]},{type:"node_out",name:"uI",qualifier:["vec3"]},{type:"textline",tokens:["uI","=","clamp","(","uH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}},{type:"node",name:"REFRACTION",group:{type:"group",parts:[{type:"node_in",name:"uJ",qualifier:["vec3"]},{type:"node_in",name:"uK",qualifier:["float"]},{type:"node_out",name:"uL",qualifier:["vec3"]},{type:"textline",tokens:["uL","=","ls","(","uJ",",","uK",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"uM",qualifier:["float"]},{type:"node_in",name:"uN",qualifier:["float"]},{type:"node_in",name:"uO",qualifier:["float"]},{type:"node_in",name:"uP",qualifier:["float"]},{type:"node_in",name:"uQ",qualifier:["float"]},{type:"node_out",name:"uR",qualifier:["float"]},{type:"node_out",name:"uS",qualifier:["vec4"]},{type:"textline",tokens:["uR","=","uM",";","uS","=","vec4","(","uN",",","uO",",","uP",",","uQ",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"uT",qualifier:["float"]},{type:"textline",tokens:["uT","=","u_time",";"]}]}},{type:"node",name:"SMOOTHSTEP",group:{type:"group",parts:[{type:"node_in",name:"uU",qualifier:["float"]},{type:"node_in",name:"uV",qualifier:["float"]},{type:"node_in",name:"uW",qualifier:["float"]},{type:"node_out",name:"uX",qualifier:["float"]},{type:"textline",tokens:["uX","=","smoothstep","(","uV",",","uW",",","uU",")",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mB","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","mC","=","ky",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mD","=","kz",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","mD","=","mD",";","else","mD","=","-","mD",";"]}]}}]},{type:"textline",tokens:["vec3","mE","=","normalize","(","mD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mF","=","cross","(","mD",",","kA",".","xyz",")","*","kA",".","w",";","mat3","mG","=","mat3","(","kA",".","xyz",",","mF",",","mD",")",";","mat3","mH","=","mG",";"]}]}}]},{type:"textline",tokens:["vec3","mI","=","u_camera_eye_frag","-","ky",";","vec3","mJ","=","normalize","(","mI",")",";","vec3","mK","=","ky",";","vec4","mL","=","cF",";","float","mM","=","u_emit",";","float","mN","=","u_specular_alpha",";","float","mO","=","u_ambient",";","vec3","mP",";","vec3","mQ",";","vec3","mR",";","vec3","mS",";","float","mT",";","float","mU",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","uY","=","mP",";","float","uZ","=","mU",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["uY","=","max","(","uY","-","sqrt","(","0.01","*","-","min","(","mC",",","ZERO_VALUE_NODES",")",")",",","0.5","*","uY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kw","(","uY",",","mC",",","u_time",",","mT",",","mR",",","u_sun_direction",",","mB",",","u_sun_quaternion",",","ky",",","length","(","cF",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","u_","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","va","=","gL","(","u_cube_fog",",","mJ",")",";","vec4","vb","=","vec4","(","va",",","u_fog_color_density",".","a",")",";","gr","(","vb",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","vb","=","u_fog_color_density",";","vb",".","rgb","*=","u_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["hd","(","uY",",","length","(","cF",")",",","mJ",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","vb",",","mC",",","u_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gE","(","uY",",","length","(","cF",")",",","vb",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","uZ","<","0.5",")","discard",";","uZ","=","UNITY_VALUE_NODES",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","vc","=","texture2DProj","(","u_shadow_mask",",","cE",")",".","rg",";","float","vd","=","vc",".","g",";","uY","=","vec3","(","vd",")",";"]}]}}]},{type:"textline",tokens:["gt","(","uY",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","uY",",","uZ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uY",",","uZ",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ky",";","varying","vec4","cF",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cD",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"md",qualifier:["varying","vec2"]},{type:"textline",tokens:["md","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"mi",qualifier:["varying","vec3"]},{type:"textline",tokens:["mi","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"mj",qualifier:["varying","float"]},{type:"textline",tokens:["mj","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"mk",qualifier:["varying","vec2"]},{type:"textline",tokens:["mk","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"ml",qualifier:["varying","vec3"]},{type:"textline",tokens:["ml","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","mm","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mn","=","a_normal",";","vec3","mo","=","vec3","(","a_tangent",")",";","vec3","mp","=","a_tangent","[","3","]","*","cross","(","mn",",","mo",")",";"]}]}},{type:"elif",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mn","=","a_normal",";","vec3","mo","=","vec3","(","0.0",")",";","vec3","mp","=","vec3","(","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mn","=","vec3","(","0.0",")",";","vec3","mo","=","vec3","(","0.0",")",";","vec3","mp","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["mm","=","mix","(","mm",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mn","=","mix","(","mn",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mq","=","vec3","(","a_tangent",")",";","vec3","mr","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","mq",")",";","mo","=","mix","(","mo",",","mq",",","u_va_frame_factor",")",";","mp","=","mix","(","mp",",","mr",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bn","(","mm",",","mo",",","mp",",","mn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ms","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ms","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mt","=","(","u_model_matrix","*","vec4","(","ms",",","1.0",")",")",".","xyz",";","mat4","mu","=","aa","(","u_camera_eye",",","mt",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mv","=","(","u_model_matrix","*","vec4","(","ms",",","1.0",")",")",".","xyz",";","mu","=","mu","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","mv",")",";"]}]}}]},{type:"textline",tokens:["d","mw","=","ah","(","mm","-","ms",",","ms",",","mo",",","mp",",","mn",",","mu",")",";","mw",".","b","=","mt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","mw","=","ah","(","mm",",","ms",",","mo",",","mp",",","mn",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","mw",".","a",",","mw",".","b",",","mn",")",";"]}]}}]},{type:"textline",tokens:["ky","=","mw",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","mw",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","mx","=","(","dot","(","cross","(","mw",".","e",",","mw",".","c",")",",","mw",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","kA","=","vec4","(","mw",".","c",",","mx",")",";"]}]}}]},{type:"textline",tokens:["cF","=","u_view_matrix","*","vec4","(","mw",".","a",",","1.0",")",";","vec4","my","=","u_proj_matrix","*","cF",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["my",".","xy","+=","u_subpixel_jitter","*","my",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gk","(","my",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gk","(","mw",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","mz","=","my",".","x",";","float","mA","=","my",".","y",";","float","mB","=","my",".","w",";","cE",".","x","=","(","mz","+","mB",")","/","2.0",";","cE",".","y","=","(","mA","+","mB",")","/","2.0",";","cE",".","z","=","mB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","-","cF",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","my",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","mm",";","varying","vec3","kB",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cF",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","mn","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","mo","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","mn",")",";","float","mp","=","u_diffuse_color",".","a","*","mm","*","(","1.0","-","clamp","(","mo",",","0.0",",","1.0",")",")",";","vec3","mq","=","kB","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gE","(","mq",",","length","(","cF",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["gt","(","mq",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","mq",",","mp",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","mq",",","mp",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","mm",";","varying","vec3","kB",";","varying","vec3","cF",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","mn","ne",";","ne","=","nd","(",")",";","vec4","nf","=","u_view_matrix","*","vec4","(","ne",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","nf",";","mm","=","ne",".","c",";","kB","=","ne",".","d",";","cF","=","nf",".","xyz",";","float","ng","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","ne",".","a","*","ng",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","mm",";","varying","vec3","kB",";","varying","vec2","a",";","varying","vec3","kx",";","varying","vec3","ky",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","ln","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lo","=","texture2D","(","u_sampler",",","a",")",";","gr","(","lo",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["ln",".","rgb","=","mix","(","ln",".","rgb",",","lo",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["ln",".","rgb","*=","mix","(","vec3","(","1.0",")",",","lo",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["ln",".","a","=","lo",".","a",";"]}]}}]},{type:"textline",tokens:["ln",".","rgb","*=","kB",";","vec3","lp","=","u_diffuse_intensity","*","ln",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lq","=","u_emit","*","ln",".","rgb",";","vec3","lr","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ls","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lr",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lt","=","0.5",";","vec3","ls","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","lt",")",";"]}]}}]},{type:"textline",tokens:["vec3","lu","=","u_ambient","*","ls",";","float","lv","=","u_specular_params","[","0","]",";","vec2","lw","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","lx","=","lv","*","u_specular_color",";","vec3","ly","=","normalize","(","kx",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hp","lz","=","jR","(","lq",",","lu",",","lp",",","lx",",","ky",",","lr",",","ly",",","lw",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",",","0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hp","lz","=","jW","(","lq",",","lu",",","lp",")",";"]}]}}]},{type:"textline",tokens:["vec3","lA","=","lz",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lA","=","lp",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gE","(","lA",",","length","(","cF",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","lB","=","ln",".","a","*","mm",";","gt","(","lA",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","lA",",","lB",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lA",",","lB",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";","varying","float","mm",";","varying","vec3","kB",";","varying","vec2","a",";","varying","vec3","kx",";","varying","vec3","ky",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","lp","(","vec2","ln",",","vec2","lo",")","{","return","(","atan","(","lo",".","y",",","lo",".","x",")","-","atan","(","ln",".","y",",","ln",".","x",")",")",";","}","void","main","(",")","{","mn","lq",";","lq","=","nd","(",")",";","float","lr",";","mat4","ls",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","lr","=","lq",".","e",";","ls","=","z","(","lq",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","lr","=","lq",".","e",";","ls","=","k","(",")",";","ls","[","3","]","=","vec4","(","lq",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","lr","=","lq",".","e",";","ls","=","o","(","radians","(","90.0",")",")",";","ls","[","3","]","=","vec4","(","lq",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","lr","=","lp","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","lq",".","e",";","ls","=","m","(","radians","(","-","90.0",")",")",";","ls","[","3","]","=","vec4","(","lq",".","b",",","1.0",")",";","}","vec4","lt","=","vec4","(","a_p_bb_vertex","*","2.0","*","lq",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","lu","=","ls","*","q","(","lr",")","*","lt",";","vec4","lv","=","u_view_matrix","*","lu",";","vec4","lw","=","u_proj_matrix","*","lv",";","gl_Position","=","lw",";","mm","=","lq",".","c",";","kB","=","lq",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","ky","=","lu",".","xyz",";","kx","=","u_camera_eye","-","lu",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cF","=","lv",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","ne",";","const","float","nf","=","0.99",";","const","float","ng","=","1.8",";","const","int","nh","=","8",";","float","nr","(","vec3","ni",",","vec3","nj",")","{","float","nk","=","dot","(","nj",",","nj",")",";","float","nl","=","2.0","*","dot","(","nj",",","ni",")",";","float","nm","=","dot","(","ni",",","ni",")","-","1.0",";","float","nn","=","nl","*","nl","-","4.0","*","nk","*","nm",";","float","no","=","sqrt","(","nn",")",";","float","np","=","(","-","nl","-","no",")","/","2.0",";","float","nq","=","nm","/","np",";","return","nq",";","}","float","ny","(","float","ns",",","float","nt",")","{","float","nu","=","3.0","*","(","1.0","-","nt","*","nt",")",";","float","nv","=","2.0","*","(","2.0","+","nt","*","nt",")",";","float","nw","=","1.0","+","ns","*","ns",";","float","nx","=","pow","(","1.0","+","nt","*","nt","-","2.0","*","nt","*","ns",",","1.5",")",";","nx","=","max","(","nx",",","0.00001",")",";","return","(","nu","/","nv",")","*","(","nw","/","nx",")",";","}","float","nG","(","vec3","nz",",","vec3","nA",",","float","nB",")","{","float","nC","=","dot","(","nA",",","-","nz",")",";","if","(","nC","<","0.0",")","{","return","1.0",";","}","vec3","nD","=","nz","+","nC","*","nA",";","if","(","length","(","nD",")","<","nB",")","{","return","0.0",";","}","else","if","(","length","(","nD",")",">=","nB",")","{","vec3","nE","=","normalize","(","nD",")","*","nB","-","nz",";","float","nF","=","acos","(","dot","(","normalize","(","nE",")",",","nA",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","nF","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","nK","(","float","nH",",","vec3","nI",",","float","nJ",")","{","return","nI","-","nI","*","pow","(","u_sky_color",",","vec3","(","nJ","/","nH",")",")",";","}","void","main","(",")","{","vec3","nL","=","normalize","(","ne",")",";","vec3","nM","=","u_sun_direction",";","float","nN","=","dot","(","nL",",","nM",")",";","float","nO","=","ny","(","nN",",","-","0.01",")","*","u_rayleigh_brightness","*","nM",".","y",";","float","nP","=","ny","(","nN","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","nM",".","y",")",";","float","nQ","=","smoothstep","(","0.0",",","100.0",",","ny","(","nN",",","0.9995",")",")","*","u_spot_brightness",";","vec3","nR","=","vec3","(","0.0",",","nf",",","0.0",")",";","float","nS","=","nr","(","nR",",","nL",")",";","float","nT","=","nS","/","float","(","nh",")",";","float","nU","=","nG","(","nR",",","nL",",","nf","-","0.3",")",";","vec3","nV","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","nW","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","nX","=","0",";","nX","<","nh",";","nX","++",")","{","float","nY","=","nT","*","float","(","nX",")",";","vec3","nZ","=","nR","+","nL","*","nY",";","float","n_","=","nG","(","nZ",",","nM",",","nf","-","0.2",")",";","float","oa","=","nr","(","nZ",",","nM",")",";","vec3","ob","=","nK","(","oa",",","vec3","(","ng",")",",","u_scatter_strength",")","*","n_",";","nV","+=","nK","(","sqrt","(","nY",")",",","u_sky_color","*","ob",",","u_rayleigh_strength",")",";","nW","+=","nK","(","nY",",","ob",",","u_mie_strength",")",";","}","nV","=","nV","*","nU","*","pow","(","nS",",","u_rayleigh_collection_power",")","/","float","(","nh",")",";","nW","=","(","nW","*","nU","*","pow","(","nS",",","u_mie_collection_power",")",")","/","float","(","nh",")",";","vec3","oc","=","vec3","(","nQ","*","nW","+","nP","*","nW","+","nO","*","nV",")",";","gt","(","oc",")",";","gl_FragColor","=","vec4","(","oc",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","ne",";","void","main","(",")","{","vec4","ln","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","lo","=","u_cube_view_matrix","*","ln",";","ne","=","lo",".","xyz",";","gl_Position","=","ln",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_sampler",",","a",")",";","gt","(","ln",".","rgb",")",";","gw","(","ln",".","rgb",",","ln",".","a",")",";","gl_FragColor","=","ln",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","ln","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","lo","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ln",",","0.0",")",";","lo",".","x","/=","lo",".","w",";","lo",".","y","/=","lo",".","w",";","lo","+=","99999.0","*","step","(","lo",".","z",",","0.0",")",";","lo","+=","100.0","*","(","step","(","1.0",",","abs","(","lo",".","x",")",")","+","step","(","1.0",",","abs","(","lo",".","y",")",")",")",";","lo",".","x","=","-","a_lf_dist","*","lo",".","x",";","lo",".","y","=","-","a_lf_dist","*","lo",".","y",";","float","lp","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","lq","=","vec2","(","a_lf_bb_vertex",".","x","/","lp",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","lr","=","1.9",";","lq","*=","(","1.0","+","lr","*","length","(","lo",".","xy",")",")",";","}","gl_Position","=","vec4","(","lo",".","xy","+","lq",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ne",";","void","main","(",")","{","vec3","ln","=","textureCube","(","u_sky",",","ne",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","ln",".","rgb",")",";","float","lo","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","lo","=","min","(","-","lo","*","0.03",",","0.8",")",";","float","lp","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","vec3","lq","=","normalize","(","ne",")",";","vec3","lr","=","vec3","(","0.0",")",";","vec4","ls","=","u_underwater_fog_color_density",";","ls",".","rgb","=","mix","(","ls",".","rgb",",","lr",",","min","(","-","lq",".","y","+","lo",",","1.0",")",")","*","lp",";","float","lt","=","clamp","(","sign","(","lq",".","y","-","0.05","*","lo",")",",","0.0",",","1.0",")",";","ln","=","mix","(","ls",".","rgb",",","ln",",","lt",")",";","gt","(","ln",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ln",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","ne",";","void","main","(",")","{","vec4","ln","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","lo","=","u_sky_vp_inverse","*","ln",";","ne","=","lo",".","xyz",";","gl_Position","=","ln",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ln","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kx",";","varying","vec3","ky",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kz",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kA",";","varying","vec3","nf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ng",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ni",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","nx","(","in","vec2","nj",",","in","vec3","nk",",","in","vec3","nl",",","in","vec3","nm",",","out","float","nn",")","{","vec3","no","=","reflect","(","-","nl",",","nk",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","np","=","nj",".","xy","+","nk",".","xz","*","REFL_BUMP","/","kC",";","nn","=","u_reflect_factor",";","vec3","nq",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["nq","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nq","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","nr","=","dot","(","nl",",","nk",")",";","nn","*=","max","(","1.0","-","1.0","/","nr",",","1.0",")",";","}","else","{","nq","=","texture2D","(","u_reflectmap",",","np",")",".","rgb",";","gr","(","nq",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["nn","=","u_mirror_factor",";","vec3","nq","=","nm","*","textureCube","(","u_mirrormap",",","no",")",".","rgb",";","gr","(","nq",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nn","=","u_reflect_factor",";","vec3","nq","=","nm","*","vec3","(","0.3",",","0.5",",","1.0",")",";","gr","(","nq",")",";"]}]}}]},{type:"textline",tokens:["vec3","ns","=","normalize","(","no","+","nl",")",";","float","nt","=","1.0","-","dot","(","nl",",","ns",")",";","float","nu","=","u_fresnel_params","[","3","]",";","float","nv","=","u_fresnel_params","[","2","]",";","float","nw","=","nu","+","(","1.0","-","nu",")","*","pow","(","nt",",","nv",")",";","nn","=","min","(","nn","*","nw",",","1.0",")",";","return","nq",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","ny","=","mat3","(","kA",",","nf",",","kz",")",";"]}]}}]},{type:"textline",tokens:["vec3","nz","=","normalize","(","kz",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","ny","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","nz","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","nA","=","ky",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nB","=","vec2","(","ng",".","x",",","-","ng",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nB","=","vec2","(","ky",".","x",",","-","ky",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nB","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nC","=","vec3","(","0.0",")",";","vec3","nD","=","texture2D","(","u_normalmap0",",","nB","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nC","+=","nD",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nE","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["nE","+=","nD",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["nD","=","texture2D","(","u_normalmap0",",","nB","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nC","+=","nD",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["nE","+=","nD",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["nD","=","texture2D","(","u_normalmap0",",","nB","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nC","+=","nD",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["nE","+=","nD",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["nD","=","texture2D","(","u_normalmap0",",","nB","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nC","+=","nD",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["nE","+=","nD",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nF","=","ny","*","nE",";","if","(","!","g","(","nF",",","vec3","(","0.0",")",")",")","nF","=","normalize","(","nF",")",";","vec3","nG","=","mix","(","nz",",","nF",",","0.2",")",";","nG","=","normalize","(","nG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["nz","=","mix","(","nz",",","normalize","(","ny","*","nC",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nz","=","mix","(","nz",",","normalize","(","ny","*","nC",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["nz","=","normalize","(","nz",")",";"]}]}}]},{type:"textline",tokens:["vec3","nH","=","normalize","(","kx",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nI","=","cE",".","xy","/","cE",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","nJ","=","kC","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nK","=","u_diffuse_color",".","a",";","vec4","nL","=","texture2DProj","(","u_scene_depth",",","cE",")",";","float","nM","=","cq","(","nL",")",";","float","nN","=","max","(","nM","-","kC",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nO","=","nI","+","nz",".","xz","*","u_refr_bump","/","kC",";","float","nP","=","le","(","nM",",","nO",",","nI",")",";","float","nQ","=","max","(","nP","-","kC",",","0.0",")",";","float","nR","=","u_view_max_depth","/","ABSORB","*","nQ",";","float","nS",";","if","(","u_cam_water_depth","<","0.0",")","nS","=","0.0",";","else","nS","=","min","(","nK","*","nR",",","1.0",")",";","float","nT","=","u_view_max_depth","/","ABSORB","*","nN",";","nK","=","min","(","15.0","*","nK","*","u_view_max_depth","*","nN",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nT","=","u_view_max_depth","/","ABSORB","*","nN",";","if","(","u_cam_water_depth",">","0.0",")","nK","=","min","(","nK","*","nT",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["nK","*=","min","(","5.0","*","nJ",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nK","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","nS","=","1.0","-","nK",";","vec2","nO","=","nI","+","nz",".","xz","*","REFR_BUMP","/","kC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nU","=","texture2D","(","u_refractmap",",","nO",")",".","rgb",";","gr","(","nU",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","nV","=","pow","(","min","(","nh",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","nW","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","nV",")",";","nV","=","pow","(","min","(","nh",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","nW","=","mix","(","u_shore_water_col",",","nW",",","nV",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nW","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nX","=","max","(","1.0","-","u_view_max_depth","*","nN",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nX","=","1.0","-","nK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","nY","=","max","(","nA","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nZ","=","normalize","(","vec3","(","nh",".","r",",","0.0",",","nh",".","g",")",")",";","vec3","n_","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","nZ",",","0.8",")",")",";","float","oa","=","1.25","*","max","(","dot","(","nG",",","n_",")","-","0.2",",","0.0",")",";","oa","+=","max","(","dot","(","nG",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","nX","+=","oa","*","(","1.0","-","nh",".","b",")",";","nY","*=","(","1.0","-","0.95","*","pow","(","nh",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["nX","+=","nY",";","nX","=","min","(","u_foam_factor","*","nX",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","ob","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","nB","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","oc","=","u_specular_params","[","0","]",";","vec2","od","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","oe","=","oc","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","of","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","nz",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","of","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["vec3","og","=","u_ambient","*","of",";","vec3","oh","=","og","+","u_sun_intensity",";","float","oi",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","oj","=","nx","(","nI",",","nz",",","nH",",","oh",",","oi",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","oj","=","nx","(","vec2","(","0.0",")",",","nz",",","nH",",","oh",",","oi",")",";"]}]}}]},{type:"textline",tokens:["vec3","ok","=","u_diffuse_intensity","*","nW",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hp","ol","=","jR","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ok",",","oe",",","ky",",","nz",",","nH",",","od",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",",","0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hp","ol","=","jW","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ok",")",";"]}]}}]},{type:"textline",tokens:["ok","=","ol",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","om","=","max","(","dot","(","u_sun_direction",",","-","kz",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","nH",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","om","=","clamp","(","SSS_STRENGTH","*","om",",","0.0",",","1.0",")",";","ok","=","mix","(","ok",",","u_shallow_water_col",",","om",")",";","ok","=","mix","(","ok",",","u_shore_water_col",",","om",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ok","=","mix","(","nU",",","ok",",","nS",")",";"]}]}}]},{type:"textline",tokens:["ok","=","mix","(","ok",",","oj",",","oi",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","on","=","mix","(","ob",".","g",",","ob",".","r",",","max","(","4.0","*","(","nX","-","0.75",")",",","0.0",")",")",";","on","=","mix","(","ob",".","b",",","on",",","max","(","2.0","*","nX","-","1.0",",","0.0",")",")",";","on","=","mix","(","0.0",",","on",",","nX",")",";","ok","=","mix","(","ok",",","oh",",","on",")",";"]}]}}]},{type:"textline",tokens:["ok","+=","ol",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","oo","=","gL","(","u_cube_fog",",","nH",")",";","vec4","op","=","vec4","(","oo",",","u_fog_color_density",".","a",")",";","gr","(","op",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","op","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","hm","(","ok",",","nJ",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","gE","(","ok",",","nJ",",","op",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gE","(","ok",",","nJ",",","op",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gt","(","ok",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["nK","=","max","(","nK",",","ol",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["nK","+=","on",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","ok",",","nK",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","oq","=","fwidth","(","ni",")",";","vec3","or","=","smoothstep","(","vec3","(","0.0",")",",","oq","*","ln",",","ni",")",";","float","os","=","min","(","min","(","or",".","x",",","or",".","y",")",",","or",".","z",")",";","os","=","clamp","(","os",",","0.0",",","1.0",")",";","ok","=","mix","(","u_wireframe_edge_color",",","ok",",","os",")",";","nK","=","mix","(","1.0",",","nK",",","os",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ok",",","nK",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kx",";","varying","vec3","ky",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kz",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kA",";","varying","vec3","nf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ng",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","nh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ni",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lt","(","in","vec2","ln",")","{","vec2","lo","=","0.5","+","vec2","(","(","ln",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","ln",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","vec4","lp","=","texture2D","(","u_shore_dist_map",",","lo",")",";","const","vec2","lq","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","lr","=","dot","(","lp",".","ba",",","lq",")",";","vec2","ls","=","normalize","(","lp",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","ls",",","lr",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","lK","(","inout","vec3","lu",",","in","float","lv",",","in","vec3","lw",")","{","float","lx","=","dG","(","DST_NOISE_SCALE_0","*","(","lu",".","xz","+","DST_NOISE_FREQ_0","*","lv",")",")","*","dG","(","DST_NOISE_SCALE_1","*","(","lu",".","zx","-","DST_NOISE_FREQ_1","*","lv",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","ly","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","lz","=","lw",".","b",";","float","lA","=","sqrt","(","lz",")",";","float","lB","=","max","(","lz",",","DIR_MIN_SHR_FAC",")","*","sin","(","lA","/","ly","+","DIR_FREQ","*","lv",")",";","float","lC","=","max","(","dG","(","DIR_NOISE_SCALE","*","(","lu",".","xz","+","DIR_NOISE_FREQ","*","lv",")",")",",","DIR_MIN_NOISE_FAC",")",";","lB","*=","lC",";","float","lD","=","WAVES_HEIGHT","*","mix","(","lB",",","lx",",","max","(","lA",",","DST_MIN_FAC",")",")",";","vec2","lE","=","lw",".","rg",";","float","lF","=","WAVES_HOR_FAC","*","lB","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","lz",")",",","0.0",")",";","vec2","lG","=","lF","*","lE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lD","=","WAVES_HEIGHT","*","lx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lH","=","2.0","*","(","lu",".","xz","-","0.1","*","lv",")",";","vec2","lI","=","1.3","*","(","lu",".","zx","+","0.03","*","lv",")",";","float","lJ","=","da","(","0.5","*","lH",")",".","x","+","da","(","0.5","*","lI",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lu",".","xz","+=","lG",";","lJ","*=","lz",";"]}]}}]},{type:"textline",tokens:["lD","+=","SMALL_WAVES_FAC","*","lJ",";"]}]}}]},{type:"textline",tokens:["lu",".","y","+=","lD",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","ni","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","ni","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","ni","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","lL","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lM","=","abs","(","lL",".","y",")",";","vec2","lN","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","lM",")",";","lL",".","y","=","WATER_LEVEL",";","lL",".","xz","+=","lN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["d","lO","=","ah","(","lL",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["ng","=","lO",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["nh","=","lt","(","lO",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","lP","=","length","(","u_wind",")",";","float","lQ","=","u_time",";","lQ","*=","lP",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lR","=","lM",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lR","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","lS","=","lO",".","a","+","vec3","(","lR",",","0.0",",","0.0",")",";","vec3","lT","=","lO",".","a","+","vec3","(","0.0",",","0.0",",","lR",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lU","=","lt","(","lS",".","xz",")",";","vec3","lV","=","lt","(","lT",".","xz",")",";","lK","(","lS",",","lQ",",","lU",")",";","lK","(","lT",",","lQ",",","lV",")",";","lK","(","lO",".","a",",","lQ",",","nh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lK","(","lS",",","lQ",",","vec3","(","0.0",")",")",";","lK","(","lT",",","lQ",",","vec3","(","0.0",")",")",";","lK","(","lO",".","a",",","lQ",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","lO",".","a",".","y","=","WATER_LEVEL","-","1.0",";","lS",".","y","=","lO",".","a",".","y",";","lT",".","y","=","lO",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","lW","=","normalize","(","lS","-","lO",".","a",")",";","vec3","lX","=","normalize","(","lT","-","lO",".","a",")",";","kz","=","normalize","(","cross","(","lX",",","lW",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","lX",";","nf","=","cross","(","kz",",","kA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lY","=","dot","(","kz",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lZ","=","clamp","(","0.8","-","lY",",","0.0",",","1.0",")",";","kz","=","mix","(","kz",",","vec3","(","0.0",",","1.0",",","0.0",")",",","lZ",")",";"]}]}}]}]}}]},{type:"textline",tokens:["ky","=","lO",".","a",";","kx","=","u_camera_eye","-","lO",".","a",";","vec4","l_","=","u_view_matrix","*","vec4","(","lO",".","a",",","1.0",")",";","vec4","ma","=","u_proj_matrix","*","l_",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","mb","=","ma",".","x",";","float","mc","=","ma",".","y",";","float","nj","=","ma",".","w",";","cE",".","x","=","(","mb","+","nj",")","/","2.0",";","cE",".","y","=","(","mc","+","nj",")","/","2.0",";","cE",".","z","=","nj",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","-","l_",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","ma",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","ni",";","const","float","ln","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lo","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lo","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lp","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","lq","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","lr","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","ls","=","vec3","(","0.0",")",";","float","lt","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lu","=","sign","(","ni","-","vec3","(","0.02","*","ln",")",")",";","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","{","ls","=","lo",";","lt","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lu","=","sign","(","ni","-","vec3","(","0.02","*","ln",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","ls","=","u_wireframe_edge_color",";","else","ls","=","lr",";","lt","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","lt","=","1.0",";","else","lt","=","0.0",";","ls","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","lu",".","x","<","0.0","||","lu",".","y","<","0.0","||","lu",".","z","<","0.0",")","ls","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","ls","=","lp",";","else","ls","=","lq",";","lt","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","lv","=","fwidth","(","ni",")",";","vec3","lw","=","smoothstep","(","vec3","(","0.0",")",",","lv","*","ln",",","ni",")",";","float","lx","=","min","(","min","(","lw",".","x",",","lw",".","y",")",",","lw",".","z",")",";","lx","=","clamp","(","lx",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","ls","=","vec3","(","mix","(","u_wireframe_edge_color",",","lr",",","lx",")",")",";","lt","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","ls","=","u_wireframe_edge_color",";","lt","=","mix","(","1.0",",","0.0",",","lx",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","ls","=","mix","(","u_wireframe_edge_color",",","lp",",","lx",")",";","else","ls","=","mix","(","u_wireframe_edge_color",",","lq",",","lx",")",";","lt","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["gt","(","ls",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gw","(","ls",",","lt",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ls",",","lt",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","ni",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","ni","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","ni","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","ni","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","ln","=","a_position",";","vec3","lo","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["d","lp","=","ah","(","ln",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ln","=","mix","(","ln",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lq","=","vec3","(","0.0",")",";","vec3","lr","=","vec3","(","0.0",")",";","bn","(","ln",",","lq",",","lr",",","lo",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ls","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ls","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","lp","=","ga","(","ln",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ls",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lt","=","(","u_model_matrix","*","vec4","(","ls",",","1.0",")",")",".","xyz",";","mat4","lu","=","aa","(","u_camera_eye",",","lt",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lv","=","(","u_model_matrix","*","vec4","(","ls",",","1.0",")",")",".","xyz",";","lu","=","lu","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lv",")",";"]}]}}]},{type:"textline",tokens:["d","lp","=","ah","(","ln","-","ls",",","ls",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lu",")",";","lp",".","b","=","lt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","lp","=","ah","(","ln",",","ls",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ce","(","lp",".","a",",","lp",".","b",",","lo",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","lw","=","u_view_matrix","*","vec4","(","lp",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","lw",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","lo","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","ln","[","0","]",",","lo","[","1","]",",","lo","[","2","]",",","ln","[","3","]","+","lo","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","lq","(","float","ln",",","float","lo",")","{","vec2","lp","=","a","+","vec2","(","ln",",","lo",")","*","u_texel_size",";","return","texture2D","(","u_color",",","lp",")",";","}","float","lu","(","vec4","lr",")","{","vec3","ls","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","lt","=","dot","(","lr",".","rgb",",","ls",")",";","return","lt",";","}","vec4","lN","(",")","{","vec4","lv","=","lq","(","-","1.0",",","-","1.0",")",";","vec4","lw","=","lq","(","1.0",",","-","1.0",")",";","vec4","lx","=","lq","(","-","1.0",",","1.0",")",";","vec4","ly","=","lq","(","1.0",",","1.0",")",";","vec4","lz","=","lq","(","0.0",",","0.0",")",";","float","lA","=","lu","(","lv",")",";","float","lB","=","lu","(","lw",")",";","float","lC","=","lu","(","lx",")",";","float","lD","=","lu","(","ly",")",";","float","lE","=","lu","(","lz",")",";","float","lF","=","min","(","lE",",","min","(","min","(","lA",",","lB",")",",","min","(","lC",",","lD",")",")",")",";","float","lG","=","max","(","lE",",","max","(","max","(","lA",",","lB",")",",","max","(","lC",",","lD",")",")",")",";","vec2","lH",";","lH",".","x","=","-","(","(","lA","+","lB",")","-","(","lC","+","lD",")",")",";","lH",".","y","=","(","(","lA","+","lC",")","-","(","lB","+","lD",")",")",";","float","lI","=","max","(","(","lA","+","lB","+","lC","+","lD",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","lJ","=","1.0","/","(","min","(","abs","(","lH",".","x",")",",","abs","(","lH",".","y",")",")","+","lI",")",";","lH","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","lH","*","lJ",")",")","*","u_texel_size",";","vec4","lK","=","0.5","*","(","texture2D","(","u_color",",","a","+","lH","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","lH","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","lL","=","lK","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","lH","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","lH","*","0.5",")",")",";","float","lM","=","lu","(","lL",")",";","if","(","(","lM","<","lF",")","||","(","lM",">","lG",")",")","return","lK",";","else","return","lL",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","oE","(",")","{","vec2","lO",";","lO",".","x","=","a",".","x",";","lO",".","y","=","a",".","y",";","vec4","lP","=","texture2D","(","u_color",",","lO",")",";","vec4","lQ","=","lq","(","0.0",",","1.0",")",";","vec4","lR","=","lq","(","1.0",",","0.0",")",";","vec4","lS","=","lq","(","0.0",",","-","1.0",")",";","vec4","lT","=","lq","(","-","1.0",",","0.0",")",";","float","lU","=","lu","(","lQ",")",";","float","lV","=","lu","(","lR",")",";","float","lW","=","lu","(","lS",")",";","float","lX","=","lu","(","lT",")",";","float","lY","=","lu","(","lP",")",";","float","lZ","=","max","(","lU",",","lY",")",";","float","l_","=","min","(","lU",",","lY",")",";","float","ma","=","max","(","lV",",","lZ",")",";","float","mb","=","min","(","lV",",","l_",")",";","float","mc","=","max","(","lW",",","lX",")",";","float","nj","=","min","(","lW",",","lX",")",";","float","nk","=","max","(","mc",",","ma",")",";","float","nl","=","min","(","nj",",","mb",")",";","float","nm","=","nk","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","nn","=","nk","-","nl",";","float","no","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","nm",")",";","bool","np","=","nn","<","no",";","if","(","np",")","return","lP",";","vec4","nq","=","lq","(","-","1.0",",","-","1.0",")",";","vec4","nr","=","lq","(","1.0",",","1.0",")",";","vec4","ns","=","lq","(","1.0",",","-","1.0",")",";","vec4","nt","=","lq","(","-","1.0",",","1.0",")",";","float","nu","=","lu","(","nq",")",";","float","nv","=","lu","(","nr",")",";","float","nw","=","lu","(","ns",")",";","float","nx","=","lu","(","nt",")",";","float","ny","=","lW","+","lU",";","float","nz","=","lX","+","lV",";","float","nA","=","1.0","/","nn",";","float","nB","=","ny","+","nz",";","float","nC","=","(","-","2.0","*","lY",")","+","ny",";","float","nD","=","(","-","2.0","*","lY",")","+","nz",";","float","nE","=","nw","+","nv",";","float","nF","=","nu","+","nw",";","float","nG","=","(","-","2.0","*","lV",")","+","nE",";","float","nH","=","(","-","2.0","*","lW",")","+","nF",";","float","nI","=","nu","+","nx",";","float","nJ","=","nx","+","nv",";","float","nK","=","(","abs","(","nC",")","*","2.0",")","+","abs","(","nG",")",";","float","nL","=","(","abs","(","nD",")","*","2.0",")","+","abs","(","nH",")",";","float","nM","=","(","-","2.0","*","lX",")","+","nI",";","float","nN","=","(","-","2.0","*","lU",")","+","nJ",";","float","nO","=","abs","(","nM",")","+","nK",";","float","nP","=","abs","(","nN",")","+","nL",";","float","nQ","=","nI","+","nE",";","float","nR","=","u_texel_size",".","x",";","bool","nS","=","nO",">=","nP",";","float","nT","=","nB","*","2.0","+","nQ",";","if","(","!","nS",")","lW","=","lX",";","if","(","!","nS",")","lU","=","lV",";","if","(","nS",")","nR","=","u_texel_size",".","y",";","float","nU","=","(","nT","*","(","1.0","/","12.0",")",")","-","lY",";","float","nV","=","lW","-","lY",";","float","nW","=","lU","-","lY",";","float","nX","=","lW","+","lY",";","float","nY","=","lU","+","lY",";","bool","nZ","=","abs","(","nV",")",">=","abs","(","nW",")",";","float","n_","=","max","(","abs","(","nV",")",",","abs","(","nW",")",")",";","if","(","nZ",")","nR","=","-","nR",";","float","oa","=","clamp","(","abs","(","nU",")","*","nA",",","0.0",",","1.0",")",";","vec2","ob",";","ob",".","x","=","lO",".","x",";","ob",".","y","=","lO",".","y",";","vec2","oc",";","oc",".","x","=","(","!","nS",")","?","0.0",":","u_texel_size",".","x",";","oc",".","y","=","(","nS",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","nS",")","ob",".","x","+=","nR","*","0.5",";","if","(","nS",")","ob",".","y","+=","nR","*","0.5",";","vec2","od",";","od",".","x","=","ob",".","x","-","oc",".","x",";","od",".","y","=","ob",".","y","-","oc",".","y",";","vec2","oe",";","oe",".","x","=","ob",".","x","+","oc",".","x",";","oe",".","y","=","ob",".","y","+","oc",".","y",";","float","of","=","(","(","-","2.0",")","*","oa",")","+","3.0",";","float","og","=","lu","(","texture2D","(","u_color",",","od",")",")",";","float","oh","=","oa","*","oa",";","float","oi","=","lu","(","texture2D","(","u_color",",","oe",")",")",";","if","(","!","nZ",")","nX","=","nY",";","float","oj","=","n_","*","1.0","/","4.0",";","float","ok","=","lY","-","nX","*","0.5",";","float","ol","=","of","*","oh",";","bool","om","=","ok","<","0.0",";","og","-=","nX","*","0.5",";","oi","-=","nX","*","0.5",";","bool","on","=","abs","(","og",")",">=","oj",";","bool","oo","=","abs","(","oi",")",">=","oj",";","if","(","!","on",")","od",".","x","-=","oc",".","x","*","1.5",";","if","(","!","on",")","od",".","y","-=","oc",".","y","*","1.5",";","bool","op","=","(","!","on",")","||","(","!","oo",")",";","if","(","!","oo",")","oe",".","x","+=","oc",".","x","*","1.5",";","if","(","!","oo",")","oe",".","y","+=","oc",".","y","*","1.5",";","if","(","op",")","{","if","(","!","on",")","og","=","lu","(","texture2D","(","u_color",",","od",".","xy",")",")",";","if","(","!","oo",")","oi","=","lu","(","texture2D","(","u_color",",","oe",".","xy",")",")",";","if","(","!","on",")","og","=","og","-","nX","*","0.5",";","if","(","!","oo",")","oi","=","oi","-","nX","*","0.5",";","on","=","abs","(","og",")",">=","oj",";","oo","=","abs","(","oi",")",">=","oj",";","if","(","!","on",")","od",".","x","-=","oc",".","x","*","2.0",";","if","(","!","on",")","od",".","y","-=","oc",".","y","*","2.0",";","op","=","(","!","on",")","||","(","!","oo",")",";","if","(","!","oo",")","oe",".","x","+=","oc",".","x","*","2.0",";","if","(","!","oo",")","oe",".","y","+=","oc",".","y","*","2.0",";","if","(","op",")","{","if","(","!","on",")","og","=","lu","(","texture2D","(","u_color",",","od",".","xy",")",")",";","if","(","!","oo",")","oi","=","lu","(","texture2D","(","u_color",",","oe",".","xy",")",")",";","if","(","!","on",")","og","=","og","-","nX","*","0.5",";","if","(","!","oo",")","oi","=","oi","-","nX","*","0.5",";","on","=","abs","(","og",")",">=","oj",";","oo","=","abs","(","oi",")",">=","oj",";","if","(","!","on",")","od",".","x","-=","oc",".","x","*","2.0",";","if","(","!","on",")","od",".","y","-=","oc",".","y","*","2.0",";","op","=","(","!","on",")","||","(","!","oo",")",";","if","(","!","oo",")","oe",".","x","+=","oc",".","x","*","2.0",";","if","(","!","oo",")","oe",".","y","+=","oc",".","y","*","2.0",";","if","(","op",")","{","if","(","!","on",")","og","=","lu","(","texture2D","(","u_color",",","od",".","xy",")",")",";","if","(","!","oo",")","oi","=","lu","(","texture2D","(","u_color",",","oe",".","xy",")",")",";","if","(","!","on",")","og","=","og","-","nX","*","0.5",";","if","(","!","oo",")","oi","=","oi","-","nX","*","0.5",";","on","=","abs","(","og",")",">=","oj",";","oo","=","abs","(","oi",")",">=","oj",";","if","(","!","on",")","od",".","x","-=","oc",".","x","*","4.0",";","if","(","!","on",")","od",".","y","-=","oc",".","y","*","4.0",";","op","=","(","!","on",")","||","(","!","oo",")",";","if","(","!","oo",")","oe",".","x","+=","oc",".","x","*","4.0",";","if","(","!","oo",")","oe",".","y","+=","oc",".","y","*","4.0",";","if","(","op",")","{","if","(","!","on",")","og","=","lu","(","texture2D","(","u_color",",","od",".","xy",")",")",";","if","(","!","oo",")","oi","=","lu","(","texture2D","(","u_color",",","oe",".","xy",")",")",";","if","(","!","on",")","og","=","og","-","nX","*","0.5",";","if","(","!","oo",")","oi","=","oi","-","nX","*","0.5",";","on","=","abs","(","og",")",">=","oj",";","oo","=","abs","(","oi",")",">=","oj",";","if","(","!","on",")","od",".","x","-=","oc",".","x","*","2.0",";","if","(","!","on",")","od",".","y","-=","oc",".","y","*","2.0",";","if","(","!","oo",")","oe",".","x","+=","oc",".","x","*","2.0",";","if","(","!","oo",")","oe",".","y","+=","oc",".","y","*","2.0",";","}","}","}","}","float","oq","=","lO",".","x","-","od",".","x",";","float","or","=","oe",".","x","-","lO",".","x",";","if","(","!","nS",")","oq","=","lO",".","y","-","od",".","y",";","if","(","!","nS",")","or","=","oe",".","y","-","lO",".","y",";","bool","os","=","(","og","<","0.0",")","!=","om",";","float","ot","=","(","or","+","oq",")",";","bool","ou","=","(","oi","<","0.0",")","!=","om",";","float","ov","=","1.0","/","ot",";","bool","ow","=","oq","<","or",";","float","ox","=","min","(","oq",",","or",")",";","bool","oy","=","ow","?","os",":","ou",";","float","oz","=","ol","*","ol",";","float","oA","=","(","ox","*","(","-","ov",")",")","+","0.5",";","float","oB","=","oz","*","FXAA_QUALITY_SUBPIX",";","float","oC","=","oy","?","oA",":","0.0",";","float","oD","=","max","(","oC",",","oB",")",";","if","(","!","nS",")","lO",".","x","+=","oD","*","nR",";","if","(","nS",")","lO",".","y","+=","oD","*","nR",";","return","texture2D","(","u_color",",","lO",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","lN","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","oE","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","ln","=","vec2","(","0.0",",","0.0",")",";","vec2","lo","=","u_texel_size",";","vec4","lp","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lp","*","0.0875447373698",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0858112354248",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0808139781061",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0731235112908",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0635705267419",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0530985673112",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0426125984122",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0328565115809",";","ln","+=","lo",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","ln",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","ln",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","lp",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_main",",","a",")",";","vec4","lo","=","texture2D","(","u_bloom",",","a",")",";","vec4","lp","=","ln",";","lp","+=","lo",";","gl_FragColor","=","vec4","(","lp",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_color",",","a",")",";","vec3","lo","=","ln",".","rgb",";","if","(","u_brightness","<","0.0",")","lo","=","lo","*","(","1.0","+","u_brightness",")",";","else","lo","=","lo","+","(","(","1.0","-","lo",")","*","u_brightness",")",";","lo","=","(","lo","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","lo","*=","u_exposure",";","vec3","lp","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","lq","=","dot","(","lo",",","lp",")",";","lo","=","mix","(","vec3","(","lq",")",",","lo",",","u_saturation",")",";","gl_FragColor","=","vec4","(","lo",",","ln",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cm","(","clamp","(","nq","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","nr","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","ns","=","nq","(","u_depth",",","a",",","u_camera_range",")",";","ns","*=","u_view_max_depth",";","float","nt",";","if","(","ns","<","u_dof_dist",")","nt","=","(","u_dof_dist","-","ns",")","/","u_dof_front",";","else","nt","=","(","ns","-","u_dof_dist",")","/","u_dof_rear",";","nt","=","clamp","(","nt",",","0.0",",","1.0",")",";","vec4","nu","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","nr",",","nu",",","nt",")",";","}","else","gl_FragColor","=","nr",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","ls","(","float","ln",",","float","lo",",","float","lp",")","{","vec2","lq","=","a","+","vec2","(","ln",",","lo",")","*","u_texel_size",";","vec4","lr","=","texture2D","(","u_sampler",",","lq",")","*","lp",";","return","cq","(","lr",")",";","}","void","main","(",")","{","float","lt","=","(","ls","(","-","1.0",",","-","1.0",",","-","1.0",")","+","ls","(","0.0",",","-","1.0",",","-","1.0",")","+","ls","(","1.0",",","-","1.0",",","-","1.0",")","+","ls","(","-","1.0",",","0.0",",","-","1.0",")","+","ls","(","0.0",",","0.0",",","8.0",")","+","ls","(","1.0",",","0.0",",","-","1.0",")","+","ls","(","-","1.0",",","1.0",",","-","1.0",")","+","ls","(","0.0",",","1.0",",","-","1.0",")","+","ls","(","1.0",",","1.0",",","-","1.0",")",")",";","lt","*=","1000.0",";","gl_FragColor","=","vec4","(","lt",",","lt",",","lt",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","ln",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","lo","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","lp","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","lq","=","lp",".","a","-","lo",".","a",";","if","(","lq","!=","0.0",")","{","float","lr","=","smoothstep","(","0.0",",","1.0",",","lp",".","a",")",";","if","(","lo",".","a","==","0.0",")","{","vec3","ls","=","u_glow_color",";","gt","(","ls",")",";","vec4","lt","=","vec4","(","clamp","(","ls",",","0.0",",","1.0",")",",","lr",")",";","gl_FragColor","=","mix","(","ln",",","lt",",","lr",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","nr",";","varying","vec2","ns",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nt",";","void","main","(",")","{","vec2","nu","=","(","nt",".","xy","-","a",")",";","float","nv","=","length","(","nu",")",";","vec2","nw","=","u_radial_blur_step","*","nu","/","nv",";","float","nx","=","nv","/","u_radial_blur_step",";","nw","*=","min","(","nx",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","nx","=","max","(","nx",",","STEPS_PER_PASS",")",";","vec2","ny","=","a",";","float","nz","=","0.0",";","for","(","float","nA","=","0.0",";","nA","<","STEPS_PER_PASS",";","nA","+=","1.0",")","{","if","(","nA","<=","nx",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","nB","=","nq","(","u_input",",","ny",",","u_camera_range",")",";","nz","+=","max","(","(","1.0","-","pow","(","nv",",","0.3",")",")","*","step","(","0.9",",","nB",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nC","=","texture2D","(","u_input",",","ny",")",";","nz","+=","cq","(","nC",")",";"]}]}}]},{type:"textline",tokens:["}","ny","+=","nw",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nD","=","a","+","ns",";","float","nE","=","da","(","vec2","(","2.5","*","(","nD",".","x",")",",","2.5","*","(","nD",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","da","(","vec2","(","5.0","*","(","nD",".","x",")","-","0.66","*","u_time",",","5.0","*","(","nD",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dG","(","vec2","(","7.5","*","(","nD",".","x",")","+","0.33","*","u_time",",","7.5","*","(","nD",".","y",")","-","0.33","*","u_time",")",")",";","nE","*=","clamp","(","1.2","-","sqrt","(","0.2","*","nv",")",",","0.0",",","1.0",")","*","nr",";","nz","=","max","(","nE",",","nz",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","cm","(","nz","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","nr",";","varying","vec2","ns",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nt",";","void","lu","(","in","vec4","ln",",","in","vec3","lo",",","out","vec3","lp",")","{","float","lq","=","ln",".","w","*","lo",".","x","+","ln",".","y","*","lo",".","z","-","ln",".","z","*","lo",".","y",";","float","lr","=","ln",".","w","*","lo",".","y","+","ln",".","z","*","lo",".","x","-","ln",".","x","*","lo",".","z",";","float","ls","=","ln",".","w","*","lo",".","z","+","ln",".","x","*","lo",".","y","-","ln",".","y","*","lo",".","x",";","float","lt","=","-","ln",".","x","*","lo",".","x","-","ln",".","y","*","lo",".","y","-","ln",".","z","*","lo",".","z",";","lp",".","x","=","lq","*","ln",".","w","-","lt","*","ln",".","x","-","lr","*","ln",".","z","+","ls","*","ln",".","y",";","lp",".","y","=","lr","*","ln",".","w","-","lt","*","ln",".","y","-","ls","*","ln",".","x","+","lq","*","ln",".","z",";","lp",".","z","=","ls","*","ln",".","w","-","lt","*","ln",".","z","-","lq","*","ln",".","y","+","lr","*","ln",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","lv","=","normalize","(","u_sun_direction",")",";","nt","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","lv",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","nr","=","1.0",";","vec3","lw","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","lx",";","lu","(","u_camera_quat",",","lw",",","lx",")",";","lx","=","normalize","(","lx",")",";","float","ly","=","dot","(","lx",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lz","=","atan","(","lx",".","x",",","lx",".","z",")",";","ns","=","vec2","(","-","lz",",","acos","(","ly",")",")",";","}","else","{","nr","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["nt",".","x","/=","nt",".","w",";","nt",".","y","/=","nt",".","w",";","nt",".","x","=","0.5","*","(","nt",".","x","+","1.0",")",";","nt",".","y","=","0.5","*","(","nt",".","y","+","1.0",")",";","nt","+=","99999.0","*","step","(","nt",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_main",",","a",")",";","vec3","lo","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","gr","(","ln",".","rgb",")",";","float","lp","=","cq","(","texture2D","(","u_god_rays",",","a",")",")",";","vec3","lq","=","ln",".","rgb","+","u_god_rays_intensity","*","vec3","(","lp",")","*","lo",";","gt","(","lq",")",";","gl_FragColor",".","rgb","=","lq",";","gl_FragColor",".","a","=","ln",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_color",",","a",")","*","0.38026",";","ln","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","ln","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","ln","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","ln","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","ln","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","ln","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","ln","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","ln","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","ln",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_input",",","a",")",";","float","lo","=","dot","(","ln",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","lo",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","ln",";","float","lo","=","0.0",";","for","(","float","lp","=","0.025",";","lp","<","1.0",";","lp","+=","0.05",")","for","(","float","lq","=","0.025",";","lq","<","1.0",";","lq","+=","0.05",")","{","ln","=","max","(","texture2D","(","u_input",",","vec2","(","lp",",","lq",")",")",".","r",",","0.01",")",";","lo","+=","log","(","ln",")",";","}","float","lr","=","exp","(","lo","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","lr",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","nu",";","void","main","(",")","{","float","nv","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","nw","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","nx","=","texture2D","(","u_main",",","a",")",";","float","ny","=","nw","/","nv",";","float","nz","=","u_bloom_edge_lum",";","gl_FragColor","=","nx","*","max","(","ny","-","nz",",","0.0",")","*","nu",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","nu",";","const","vec3","ln","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","lv","(","in","vec4","lo",",","in","vec3","lp",",","out","vec3","lq",")","{","float","lr","=","lo",".","w","*","lp",".","x","+","lo",".","y","*","lp",".","z","-","lo",".","z","*","lp",".","y",";","float","ls","=","lo",".","w","*","lp",".","y","+","lo",".","z","*","lp",".","x","-","lo",".","x","*","lp",".","z",";","float","lt","=","lo",".","w","*","lp",".","z","+","lo",".","x","*","lp",".","y","-","lo",".","y","*","lp",".","x",";","float","lu","=","-","lo",".","x","*","lp",".","x","-","lo",".","y","*","lp",".","y","-","lo",".","z","*","lp",".","z",";","lq",".","x","=","lr","*","lo",".","w","-","lu","*","lo",".","x","-","ls","*","lo",".","z","+","lt","*","lo",".","y",";","lq",".","y","=","ls","*","lo",".","w","-","lu","*","lo",".","y","-","lt","*","lo",".","x","+","lr","*","lo",".","z",";","lq",".","z","=","lt","*","lo",".","w","-","lu","*","lo",".","z","-","lr","*","lo",".","y","+","ls","*","lo",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","lw",";","lv","(","u_camera_quat",",","ln",",","lw",")",";","nu","=","dot","(","-","lw",",","u_sun_direction",")","*","u_bloom_key",";","nu","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","ln","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","lo","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","ln","-","lo",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","ln","+","u_motion_blur_exp","*","lo",";","}","else","{","gl_FragColor","=","ln",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ln","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","ln",".","r","+","ln",".","g","+","ln",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lo","=","vec2","(","0.0",",","0.0",")",";","vec2","lp","=","u_texel_size",";","vec4","lq",";","lq","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lq","*","0.2270270270",";","lo","+=","lp",";","lq","=","texture2D","(","u_color",",","a","+","lo",")",";","gl_FragColor","+=","lq","*","0.1945945946",";","lq","=","texture2D","(","u_color",",","a","-","lo",")",";","gl_FragColor","+=","lq","*","0.1945945946",";","lo","+=","lp",";","lq","=","texture2D","(","u_color",",","a","+","lo",")",";","gl_FragColor","+=","lq","*","0.1216216216",";","lq","=","texture2D","(","u_color",",","a","-","lo",")",";","gl_FragColor","+=","lq","*","0.1216216216",";","lo","+=","lp",";","lq","=","texture2D","(","u_color",",","a","+","lo",")",";","gl_FragColor","+=","lq","*","0.0540540541",";","lq","=","texture2D","(","u_color",",","a","-","lo",")",";","gl_FragColor","+=","lq","*","0.0540540541",";","lo","+=","lp",";","lq","=","texture2D","(","u_color",",","a","+","lo",")",";","gl_FragColor","+=","lq","*","0.0162162162",";","lq","=","texture2D","(","u_color",",","a","-","lo",")",";","gl_FragColor","+=","lq","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lp","=","u_texel_size",";","vec4","lq","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lq",";","if","(","lq",".","a","==","0.0",")","{","lq","=","texture2D","(","u_color",",","a","+","lp",")",";","if","(","lq",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","lq",".","a",")",";","else","{","lq","=","texture2D","(","u_color",",","a","-","lp",")",";","if","(","lq",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","lq",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nw",";","varying","vec4","nx",";","varying","vec4","ny",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nF","(","vec2","nA",",","sampler2D","nB",")","{","float","nC","=","texture2D","(","nB",",","nA",")",".","r",";","float","nD","=","texture2D","(","nB",",","nw",".","xy",")",".","r",";","float","nE","=","texture2D","(","nB",",","nw",".","zw",")",".","r",";","return","vec3","(","nC",",","nD",",","nE",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nL","(","vec2","nG",",","sampler2D","nH",")","{","vec3","nI","=","nF","(","nG",",","nH",")",";","vec2","nJ","=","abs","(","nI",".","xx","-","nI",".","yz",")",";","vec2","nK","=","step","(","SMAA_PREDICATION_THRESHOLD",",","nJ",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","nK",")",";","}"]}]}}]},{type:"textline",tokens:["void","nP","(","bvec2","nM",",","inout","vec2","nN",",","vec2","nO",")","{","if","(","nM",".","x",")","nN",".","x","=","nO",".","x",";","if","(","nM",".","y",")","nN",".","y","=","nO",".","y",";","}","void","nP","(","bvec4","nQ",",","inout","vec4","nR",",","vec4","nS",")","{","nP","(","nQ",".","xy",",","nR",".","xy",",","nS",".","xy",")",";","nP","(","nQ",".","zw",",","nR",".","zw",",","nS",".","zw",")",";","}","vec2","nU","(","vec2","nT",")","{","return","sign","(","nT",")","*","floor","(","abs","(","nT",")","+",".5",")",";","}","vec4","nU","(","vec4","nV",")","{","return","sign","(","nV",")","*","floor","(","abs","(","nV",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ol","(","vec2","nW",",","sampler2D","nX"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nY"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nZ","=","nL","(","nW",",","nY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nZ","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","n_","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","oa","=","dot","(","texture2D","(","nX",",","nW",")",".","rgb",",","n_",")",";","float","ob","=","dot","(","texture2D","(","nX",",","nw",".","xy",")",".","rgb",",","n_",")",";","float","oc","=","dot","(","texture2D","(","nX",",","nw",".","zw",")",".","rgb",",","n_",")",";","vec4","od",";","od",".","xy","=","abs","(","oa","-","vec2","(","ob",",","oc",")",")",";","vec2","oe","=","step","(","nZ",",","od",".","xy",")",";","if","(","dot","(","oe",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","of","=","dot","(","texture2D","(","nX",",","nx",".","xy",")",".","rgb",",","n_",")",";","float","og","=","dot","(","texture2D","(","nX",",","nx",".","zw",")",".","rgb",",","n_",")",";","od",".","zw","=","abs","(","oa","-","vec2","(","of",",","og",")",")",";","vec2","oh","=","max","(","od",".","xy",",","od",".","zw",")",";","float","oi","=","dot","(","texture2D","(","nX",",","ny",".","xy",")",".","rgb",",","n_",")",";","float","oj","=","dot","(","texture2D","(","nX",",","ny",".","zw",")",".","rgb",",","n_",")",";","od",".","zw","=","abs","(","vec2","(","ob",",","oc",")","-","vec2","(","oi",",","oj",")",")",";","oh","=","max","(","oh",".","xy",",","od",".","zw",")",";","float","ok","=","max","(","oh",".","x",",","oh",".","y",")",";","oe",".","xy","*=","step","(","ok",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","od",".","xy",")",";","return","oe",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","on","(","vec2","om",")","{","om",".","r","=","om",".","r","*","abs","(","5.0","*","om",".","r","-","5.0","*","0.75",")",";","return","nU","(","om",")",";","}","vec4","on","(","vec4","oo",")","{","oo",".","rb","=","oo",".","rb","*","abs","(","5.0","*","oo",".","rb","-","5.0","*","0.75",")",";","return","nU","(","oo",")",";","}","vec2","ow","(","sampler2D","op",",","vec2","oq",",","vec2","or",",","out","vec2","os",")","{","vec4","ot","=","vec4","(","oq",",","-","1.0",",","1.0",")",";","vec3","ou","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","ov","=","0",";","ov","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","ov","++",")","{","if","(","ot",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","ot",".","w",">","0.9",")","{","ot",".","xyz","+=","ou","*","vec3","(","or",",","1.0",")",";","os","=","texture2D","(","op",",","ot",".","xy",",","0.0",")",".","rg",";","ot",".","w","=","dot","(","os",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","ot",".","zw",";","}","vec2","oE","(","sampler2D","ox",",","vec2","oy",",","vec2","oz",",","out","vec2","oA",")","{","vec4","oB","=","vec4","(","oy",",","-","1.0",",","1.0",")",";","oB",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","oC","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","oD","=","0",";","oD","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","oD","++",")","{","if","(","oB",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","oB",".","w",">","0.9",")","{","oB",".","xyz","=","oC","*","vec3","(","oz",",","1.0",")","+","oB",".","xyz",";","oA","=","texture2D","(","ox",",","oB",".","xy",",","0.0",")",".","rg",";","oA","=","on","(","oA",")",";","oB",".","w","=","dot","(","oA",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","oB",".","zw",";","}","vec2","oK","(","sampler2D","oF",",","vec2","oG",",","vec2","oH",",","float","oI",")","{","vec2","oJ","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","oH","+","oG",";","oJ","=","SMAA_AREATEX_PIXEL_SIZE","*","oJ","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","oJ",".","x","+=","0.5",";","oJ",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","oI",";","return","texture2D","(","oF",",","oJ",",","0.0",")",".","rg",";","}","vec2","oZ","(","sampler2D","oL",",","sampler2D","oM",",","vec2","oN",",","vec2","oO",",","vec4","oP",")","{","vec2","oQ","=","vec2","(","0.0",",","0.0",")",";","vec4","oR",";","vec2","oS",";","if","(","oO",".","r",">","0.0",")","{","oR",".","xz","=","ow","(","oL",",","oN",",","vec2","(","-","1.0",",","1.0",")",",","oS",")",";","oR",".","x","+=","float","(","oS",".","y",">","0.9",")",";","}","else","oR",".","xz","=","vec2","(","0.0",",","0.0",")",";","oR",".","yw","=","ow","(","oL",",","oN",",","vec2","(","1.0",",","-","1.0",")",",","oS",")",";","if","(","oR",".","x","+","oR",".","y",">","2.0",")","{","vec4","oT","=","vec4","(","-","oR",".","x","+","0.25",",","oR",".","x",",","oR",".","y",",","-","oR",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","oN",".","xyxy",";","vec4","oU",";","oU",".","xy","=","texture2D","(","oL",",","oT",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","oU",".","zw","=","texture2D","(","oL",",","oT",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","oU",".","yxwz","=","on","(","oU",".","xyzw",")",";","vec2","oV","=","vec2","(","2.0",",","2.0",")","*","oU",".","xz","+","oU",".","yw",";","nP","(","bvec2","(","step","(","0.9",",","oR",".","zw",")",")",",","oV",",","vec2","(","0.0",",","0.0",")",")",";","oQ","+=","oK","(","oM",",","oR",".","xy",",","oV",",","oP",".","z",")",";","}","oR",".","xz","=","oE","(","oL",",","oN",",","vec2","(","-","1",",","-","1",")",",","oS",")",";","if","(","texture2D","(","oL",",","oN","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","oR",".","yw","=","oE","(","oL",",","oN",",","vec2","(","1",",","1",")",",","oS",")",";","oR",".","y","+=","float","(","oS",".","y",">","0.9",")",";","}","else","oR",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","oR",".","x","+","oR",".","y",">","2.0",")","{","vec4","oW","=","vec4","(","-","oR",".","x",",","-","oR",".","x",",","oR",".","y",",","oR",".","y",")","*","u_texel_size",".","xyxy","+","oN",".","xyxy",";","vec4","oX",";","oX",".","x","=","texture2D","(","oL",",","oW",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","oX",".","y","=","texture2D","(","oL",",","oW",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","oX",".","zw","=","texture2D","(","oL",",","oW",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","oY","=","vec2","(","2.0",",","2.0",")","*","oX",".","xz","+","oX",".","yw",";","nP","(","bvec2","(","step","(","0.9",",","oR",".","zw",")",")",",","oY",",","vec2","(","0",",","0",")",")",";","oQ","+=","oK","(","oM",",","oR",".","xy",",","oY",",","oP",".","w",")",".","gr",";","}","return","oQ",";","}"]}]}}]},{type:"textline",tokens:["float","pe","(","sampler2D","o_",",","vec2","pa",",","float","pb",")","{","vec2","pc","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","pd","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","pb",",","1.0",")",";","pc","+=","vec2","(","-","1.0",",","1.0",")",";","pd","+=","vec2","(","0.5",",","-","0.5",")",";","pc","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","pd","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","o_",",","pc","*","pa","+","pd",",","0.0",")",".","r",";","}","float","pm","(","sampler2D","pf",",","sampler2D","pg",",","vec2","ph",",","float","pi",")","{","vec2","pj","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pk","=","0",";","pk","<","SMAA_MAX_SEARCH_STEPS",";","pk","++",")","{","if","(","ph",".","x",">","pi","&&","pj",".","g",">","0.8281","&&","pj",".","r","==","0.0",")","{","pj","=","texture2D","(","pf",",","ph",",","0.0",")",".","rg",";","ph","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","ph",";","}","}","float","pl","=","-","(","255.0","/","127.0",")","*","pe","(","pg",",","pj",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","pl","+","ph",".","x",";","}","float","pu","(","sampler2D","pn",",","sampler2D","po",",","vec2","pp",",","float","pq",")","{","vec2","pr","=","vec2","(","0.0",",","1.0",")",";","for","(","int","ps","=","0",";","ps","<","SMAA_MAX_SEARCH_STEPS",";","ps","++",")","{","if","(","pp",".","x","<","pq","&&","pr",".","g",">","0.8281","&&","pr",".","r","==","0.0",")","{","pr","=","texture2D","(","pn",",","pp",",","0.0",")",".","rg",";","pp","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","pp",";","}","}","float","pt","=","-","(","255.0","/","127.0",")","*","pe","(","po",",","pr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","pt","+","pp",".","x",";","}","float","pC","(","sampler2D","pv",",","sampler2D","pw",",","vec2","px",",","float","py",")","{","vec2","pz","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pA","=","0",";","pA","<","SMAA_MAX_SEARCH_STEPS",";","pA","++",")","{","if","(","px",".","y",">","py","&&","pz",".","r",">","0.8281","&&","pz",".","g","==","0.0",")","{","pz","=","texture2D","(","pv",",","px",",","0.0",")",".","rg",";","px","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","px",";","}","}","float","pB","=","-","(","255.0","/","127.0",")","*","pe","(","pw",",","pz",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","pB","+","px",".","y",";","}","float","pK","(","sampler2D","pD",",","sampler2D","pE",",","vec2","pF",",","float","pG",")","{","vec2","pH","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pI","=","0",";","pI","<","SMAA_MAX_SEARCH_STEPS",";","pI","++",")","{","if","(","pF",".","y","<","pG","&&","pH",".","r",">","0.8281","&&","pH",".","g","==","0.0",")","{","pH","=","texture2D","(","pD",",","pF",",","0.0",")",".","rg",";","pF","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pF",";","}","}","float","pJ","=","-","(","255.0","/","127.0",")","*","pe","(","pE",",","pH",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","pJ","+","pF",".","y",";","}","vec2","pR","(","sampler2D","pL",",","vec2","pM",",","float","pN",",","float","pO",",","float","pP",")","{","vec2","pQ","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","nU","(","4.0","*","vec2","(","pN",",","pO",")",")","+","pM",";","pQ","=","SMAA_AREATEX_PIXEL_SIZE","*","pQ","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","pQ",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","pP","+","pQ",".","y",";","return","texture2D","(","pL",",","pQ",",","0.0",")",".","rg",";","}","void","pZ","(","sampler2D","pS",",","inout","vec2","pT",",","vec4","pU",",","vec2","pV",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pW","=","step","(","pV",".","xy",",","pV",".","yx",")",";","vec2","pX","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pW",";","pX","/=","pW",".","x","+","pW",".","y",";","vec2","pY","=","vec2","(","1.0",",","1.0",")",";","pY",".","x","-=","pX",".","x","*","texture2D","(","pS",",","pU",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","pY",".","x","-=","pX",".","y","*","texture2D","(","pS",",","pU",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","pY",".","y","-=","pX",".","x","*","texture2D","(","pS",",","pU",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","pY",".","y","-=","pX",".","y","*","texture2D","(","pS",",","pU",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","pT","*=","clamp","(","pY",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","qg","(","sampler2D","p_",",","inout","vec2","qa",",","vec4","qb",",","vec2","qc",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","qd","=","step","(","qc",".","xy",",","qc",".","yx",")",";","vec2","qe","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","qd",";","qe","/=","qd",".","x","+","qd",".","y",";","vec2","qf","=","vec2","(","1.0",",","1.0",")",";","qf",".","x","-=","qe",".","x","*","texture2D","(","p_",",","qb",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","qf",".","x","-=","qe",".","y","*","texture2D","(","p_",",","qb",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","qf",".","y","-=","qe",".","x","*","texture2D","(","p_",",","qb",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","qf",".","y","-=","qe",".","y","*","texture2D","(","p_",",","qb",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","qa","*=","clamp","(","qf",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qz","(","vec2","qh",",","vec2","qi",",","sampler2D","qj",",","sampler2D","qk",",","sampler2D","ql",",","vec4","qm",")","{","vec4","qn","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","qo","=","texture2D","(","qj",",","qh",")",".","rg",";","if","(","qo",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qn",".","rg","=","oZ","(","qj",",","qk",",","qh",",","qo",",","qm",")",";","if","(","qn",".","r","==","-","qn",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","qp",";","vec3","qq",";","qq",".","x","=","pm","(","qj",",","ql",",","nw",".","xy",",","ny",".","x",")",";","qq",".","y","=","nx",".","y",";","qp",".","x","=","qq",".","x",";","float","qr","=","texture2D","(","qj",",","qq",".","xy",",","0.0",")",".","r",";","qq",".","z","=","pu","(","qj",",","ql",",","nw",".","zw",",","ny",".","y",")",";","qp",".","y","=","qq",".","z",";","qp","=","abs","(","nU","(","qp","/","u_texel_size",".","xx","-","qi",".","xx",")",")",";","vec2","qs","=","sqrt","(","qp",")",";","float","qt","=","texture2D","(","qj",",","qq",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","qn",".","rg","=","pR","(","qk",",","qs",",","qr",",","qt",",","qm",".","y",")",";","qq",".","y","=","qh",".","y",";","pZ","(","qj",",","qn",".","rg",",","qq",".","xyzy",",","qp",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","qo",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","qo",".","r",">","0.0",")","{","vec2","qu",";","vec3","qv",";","qv",".","y","=","pC","(","qj",",","ql",",","nx",".","xy",",","ny",".","z",")",";","qv",".","x","=","nw",".","x",";","qu",".","x","=","qv",".","y",";","float","qw","=","texture2D","(","qj",",","qv",".","xy",",","0.0",")",".","g",";","qv",".","z","=","pK","(","qj",",","ql",",","nx",".","zw",",","ny",".","w",")",";","qu",".","y","=","qv",".","z",";","qu","=","abs","(","nU","(","qu","/","u_texel_size",".","yy","-","qi",".","yy",")",")",";","vec2","qx","=","sqrt","(","qu",")",";","float","qy","=","texture2D","(","qj",",","qv",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","qn",".","ba","=","pR","(","qk",",","qx",",","qw",",","qy",",","qm",".","x",")",";","qv",".","x","=","qh",".","x",";","qg","(","qj",",","qn",".","ba",",","qv",".","xyxz",",","qu",")",";","}","return","qn",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qQ","(","vec2","qA",",","sampler2D","qB",",","sampler2D","qC"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qD"]}]}}]},{type:"textline",tokens:[")","{","vec4","qE",";","qE",".","x","=","texture2D","(","qC",",","nv",".","xy",")",".","a",";","qE",".","y","=","texture2D","(","qC",",","nv",".","zw",")",".","g",";","qE",".","wz","=","texture2D","(","qC",",","qA",")",".","xz",";","if","(","dot","(","qE",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","qF","=","texture2D","(","qB",",","qA",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qG","=","texture2D","(","qD",",","a",")",";","vec2","qH","=","2.0","*","cy","(","qG",")","-","1.0",";","qF",".","a","=","sqrt","(","2.0","*","length","(","qH",")",")",";"]}]}}]},{type:"textline",tokens:["return","qF",";","}","else","{","bool","qI","=","max","(","qE",".","x",",","qE",".","z",")",">","max","(","qE",".","y",",","qE",".","w",")",";","vec4","qJ","=","vec4","(","0.0",",","qE",".","y",",","0.0",",","qE",".","w",")",";","vec2","qK","=","qE",".","yw",";","nP","(","bvec4","(","qI",",","qI",",","qI",",","qI",")",",","qJ",",","vec4","(","qE",".","x",",","0.0",",","qE",".","z",",","0.0",")",")",";","nP","(","bvec2","(","qI",",","qI",")",",","qK",",","qE",".","xz",")",";","qK","/=","dot","(","qK",",","vec2","(","1.0",",","1.0",")",")",";","vec4","qL","=","qJ","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","qA",".","xyxy",";","vec4","qM","=","qK",".","x","*","texture2D","(","qB",",","qL",".","xy",",","0.0",")",";","qM","+=","qK",".","y","*","texture2D","(","qB",",","qL",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qN","=","texture2D","(","qD",",","qL",".","xy",")",";","vec2","qO","=","2.0","*","cy","(","qN",")","-","1.0",";","vec2","qP","=","qK",".","x","*","qO",";","qN","=","texture2D","(","qD",",","qL",".","zw",")",";","qO","=","2.0","*","cy","(","qN",")","-","1.0",";","qP","+=","qK",".","y","*","qO",";","qM",".","a","=","sqrt","(","2.0","*","length","(","qP",")",")",";"]}]}}]},{type:"textline",tokens:["return","qM",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rb","(","vec2","qR",",","sampler2D","qS",",","sampler2D","qT"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qU"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qV","=","texture2D","(","qU",",","a",")",";","vec2","qW",";","qW","=","2.0","*","cy","(","qV",")","-","1.0",";","vec4","qX","=","texture2D","(","qS",",","qR",")",";","vec4","qY","=","texture2D","(","qT",",","qR","-","qW",")",";","float","qZ","=","abs","(","qX",".","a","*","qX",".","a","-","qY",".","a","*","qY",".","a",")","/","2.0",";","float","q_","=","0.5","*","clamp","(","1.0","-","sqrt","(","qZ",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","ra","=","mix","(","qX",",","qY",",","q_",")",";","ra",".","a","=","1.0",";","return","ra",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qX","=","texture2D","(","qS",",","qR",")",";","vec4","qY","=","texture2D","(","qT",",","qR",")",";","return","mix","(","qX",",","qY",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rc","=","vec4","(","ol","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rc","=","qz","(","a",",","nz",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rc","=","qQ","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","rc","=","vec4","(","rb","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","rc","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","rc",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nw",";","varying","vec4","nx",";","varying","vec4","ny",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nz",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","lo","(","vec2","ln",")","{","nw","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","ln",".","xyxy",";","nx","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","ln",".","xyxy",";","ny","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","ln",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","lr","(","vec2","lp",",","out","vec2","lq",")","{","lq","=","lp","/","u_texel_size",";","nw","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","lp",".","xyxy",";","nx","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","lp",".","xyxy",";","ny","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","nw",".","xz",",","nx",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","lt","(","vec2","ls",")","{","nv","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","ls",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["lo","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["lr","(","a",",","nz",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["lt","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","nB","(","in","vec2","nA",")","{","return","nq","(","u_depth",",","nA",",","u_camera_range",")",";","}","void","main","(",")","{","float","nC","=","texture2D","(","u_color",",","a",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","nC",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["vec3","nD","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","a","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","float","nE","=","nB","(","a",")",";","float","nF","=","nE","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_8"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nG","=","8.0",";","const","int","nH","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nG","=","16.0",";","const","int","nH","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_24"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nG","=","24.0",";","const","int","nH","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nG","=","32.0",";","const","int","nH","=","4",";"]}]}}]},{type:"textline",tokens:["float","nI","=","u_ssao_radius_increase","*","0.001",";","const","float","nJ","=","1.0","+","2.4","/","nG",";","float","nK","=","0.0",";","for","(","int","nL","=","0",";","nL","<","nH",";","nL","++",")","for","(","int","nM","=","-","1",";","nM","<=","1",";","nM","+=","2",")","for","(","int","nN","=","-","1",";","nN","<=","1",";","nN","+=","2",")","for","(","int","nO","=","-","1",";","nO","<=","1",";","nO","+=","2",")","{","vec3","nP","=","reflect","(","normalize","(","vec3","(","nM",",","nN",",","nO",")",")",",","nD",")","*","(","nI","*=","nJ",")",";","vec3","nQ","=","vec3","(","a",",","nF",")",";","nQ","+=","vec3","(","nP",".","xy",",","nP",".","z","*","nF","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nQ",".","z","-=","1.4","*","(","nQ",".","z","-","nF",")","*","step","(","nF",",","nQ",".","z",")",";"]}]}}]},{type:"textline",tokens:["float","nR","=","nB","(","nQ",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","float","nS","=","clamp","(","(","nF","-","nR",")","/","nR",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nK","+=","mix","(","1.0",",","nS",",","step","(","nR",",","nQ",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nK","+=","mix","(","step","(","nQ",".","z",",","nR",")",",","0.5",",","nS",")",";"]}]}}]},{type:"textline",tokens:["}","nK","=","nK","/","nG",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nK","=","clamp","(","nK","*","nK","+","0.6","*","nK",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nK","=","clamp","(","nK","*","nK","+","nK",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["float","nT","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","nE",")",";","nK","=","mix","(","1.0",",","nK",",","nT",")",";","gl_FragColor","=","vec4","(","nC",",","nK",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","nB","(","in","vec2","nA",")","{","return","nq","(","u_depth",",","nA",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","nC","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nD","=","nB","(","a",")",";","float","nE","=","0.0",";","float","nF","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["vec2","nG","=","vec2","(","-","2.0",")",";","for","(","int","nH","=","0",";","nH","<","4",";","++","nH",")","{","for","(","int","nI","=","0",";","nI","<","4",";","++","nI",")","{","vec2","nJ","=","(","nG","+","vec2","(","float","(","nH",")",",","float","(","nI",")",")",")","*","u_texel_size",";","float","nK","=","texture2D","(","u_ssao_mask",",","a","+","nJ",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nL","=","nB","(","a","+","nJ",")",";","float","nM","=","1.0","-","clamp","(","abs","(","nL","-","nD",")","*","nF",",","0.0",",","1.0",")",";","nC","+=","nK","*","nM",";","nE","+=","nM",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nC","+=","nK",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nC","/","nE",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nC","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","ln","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","lo","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","ln","-","1.0",",","1.0",")",";","vec4","lp","=","u_view_proj_inverse","*","lo",";","vec4","lq","=","lp","/","lp",".","w",";","vec4","lr","=","u_view_proj_prev","*","lq",";","lr","/=","lr",".","w",";","vec2","ls","=","(","lo",".","xy","-","lr",".","xy",")","/","4.0","+","0.5",";","ls","=","clamp","(","ls",",","0.0",",","1.0",")",";","gl_FragColor","=","cm","(","ls",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","float","c","=","1.0",";","struct","d","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","g","(","vec3","e",",","vec3","f",")","{","return","any","(","lessThan","(","abs","(","e","-","f",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","j","(","in","vec4","h",",","in","vec3","i",")","{","return","i","+","2.0","*","cross","(","h",".","xyz",",","cross","(","h",".","xyz",",","i",")","+","h",".","w","*","i",")",";","}","mat4","k","(",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","m","(","float","l",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","cos","(","l",")",",","sin","(","l",")",",","b",",","b",",","-","sin","(","l",")",",","cos","(","l",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","o","(","float","n",")","{","return","mat4","(","cos","(","n",")",",","b",",","-","sin","(","n",")",",","b",",","b",",","c",",","b",",","b",",","sin","(","n",")",",","b",",","cos","(","n",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","q","(","float","p",")","{","return","mat4","(","cos","(","p",")",",","sin","(","p",")",",","b",",","b",",","-","sin","(","p",")",",","cos","(","p",")",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","d","s","(","in","d","r",")","{","return","d","(","r",".","a",",","r",".","b",",","normalize","(","r",".","c",")",",","normalize","(","r",".","d",")",",","normalize","(","r",".","e",")",",","r",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","t","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","z","(","vec3","u",",","mat4","v",")","{","vec3","w","=","vec3","(","v","[","0","]","[","0","]",",","v","[","1","]","[","0","]",",","v","[","2","]","[","0","]",")",";","vec3","x","=","vec3","(","v","[","0","]","[","1","]",",","v","[","1","]","[","1","]",",","v","[","2","]","[","1","]",")",";","vec3","y","=","vec3","(","v","[","0","]","[","2","]",",","v","[","1","]","[","2","]",",","v","[","2","]","[","2","]",")",";","x","=","cross","(","y",",","w",")",";","return","mat4","(","vec4","(","w",",","0.0",")",",","vec4","(","x",",","0.0",")",",","vec4","(","y",",","0.0",")",",","vec4","(","u",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","F","(","vec3","A",",","vec3","B",")","{","vec3","C","=","A","-","B",";","C",".","y","=","0.0",";","C","=","normalize","(","C",")",";","vec3","D","=","normalize","(","cross","(","t",",","C",")",")",";","vec3","E","=","normalize","(","cross","(","C",",","D",")",")",";","return","mat4","(","vec4","(","D",",","0.0",")",",","vec4","(","E",",","0.0",")",",","vec4","(","C",",","0.0",")",",","vec4","(","B",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","Q","(","in","vec3","G",",","float","H",",","float","I",",","float","J",",","vec3","L",")","{","float","M","=","fract","(","length","(","L",")","/","0.17",")",";","float","N","=","J","+","M","/","10.0",";","float","O","=","M",";","if","(","J","!=","0.0",")","O","/=","J",";","G","*=","1.0","+","0.5","*","sin","(","H",")",";","float","P","=","length","(","G",")","*","I","*","sin","(","2.0","*","3.14","*","H","*","N","+","O",")",";","return","q","(","P",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","aa","(","in","vec3","R",",","in","vec3","S",",","in","mat4","T",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","U","=","z","(","S",",","T",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","V","=","fract","(","(","S",".","x","*","1.43","+","S",".","y","*","0.123","+","S",".","z","*","6.1",")",")",";","float","W","=","2.0","*","M_PI","*","V",";","vec3","X","=","normalize","(","vec3","(","T","[","0","]","[","2","]",",","0.0",",","T","[","2","]","[","2","]",")",")",";","float","Y","=","acos","(","X","[","2","]",")",";","if","(","X","[","0","]","<","0.0",")","Y","=","2.0","*","M_PI","-","Y",";","float","Z","=","Y","-","W",";","if","(","Z","<","0.0",")","Z","=","2.0","*","M_PI","+","Z",";","float","_","=","W",";","if","(","Z","<=","MAX_BILLBOARD_ANGLE",")","_","+=","Z",";","else","if","(","Z","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","_","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Z","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","Z","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","_","+=","Z","-","M_PI",";","else","if","(","Z","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","_","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Z","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","_","+=","Z","-","2.0","*","M_PI",";","mat4","U","=","o","(","_",")",";","U","[","3","]","=","vec4","(","S",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","U","=","F","(","R",",","S",")",";"]}]}}]},{type:"textline",tokens:["return","U",";","}","d","ah","(","in","vec3","ab",",","in","vec3","ac",",","in","vec3","ad",",","in","vec3","ae",",","in","vec3","af",",","in","mat4","ag",")","{","ab","=","(","ag","*","vec4","(","ab",",","1.0",")",")",".","xyz",";","ac","=","(","ag","*","vec4","(","ac",",","1.0",")",")",".","xyz",";","ad","=","(","ag","*","vec4","(","ad",",","0.0",")",")",".","xyz",";","ae","=","(","ag","*","vec4","(","ae",",","0.0",")",")",".","xyz",";","af","=","(","ag","*","vec4","(","af",",","0.0",")",")",".","xyz",";","return","s","(","d","(","ab",",","ac",",","ad",",","ae",",","af",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","ak","(","vec2","ai",",","vec3","aj",")","{","return","(","ai","+","0.5",")","*","aj",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","at","(","in","vec4","al",",","in","vec4","am",",","in","float","an",")","{","float","ao","=","al","[","0","]","*","am","[","0","]","+","al","[","1","]","*","am","[","1","]","+","al","[","2","]","*","am","[","2","]","+","al","[","3","]","*","am","[","3","]",";","if","(","ao","<","0.0",")","{","am","*=","-","1.0",";","ao","=","-","ao",";","}","if","(","abs","(","ao",")",">=","1.0",")","return","al",";","float","ap","=","acos","(","ao",")",";","float","aq","=","sqrt","(","1.0","-","ao","*","ao",")",";","if","(","abs","(","aq",")","<","0.001",")","return","vec4","(","al","*","0.5","+","am","*","0.5",")",";","float","ar","=","sin","(","(","1.0","-","an",")","*","ap",")","/","aq",";","float","as","=","sin","(","an","*","ap",")","/","aq",";","return","al","*","ar","+","am","*","as",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aI","(","in","vec3","au",",","in","vec4","av",",","in","vec4","aw",",","in","vec4","ax",",","in","vec4","ay",",","in","float","az",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aA","=","at","(","av",",","aw",",","az",")",";","vec4","aB","=","mix","(","ax",",","ay",",","az",")",";","vec3","aC","=","j","(","aA",",","au",")",";","vec3","aD","=","aC","*","aB",".","w","+","aB",".","xyz",";","return","aD",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aE","=","j","(","av",",","au",")",";","vec3","aF","=","j","(","aw",",","au",")",";","vec3","aG","=","aE","*","ax",".","w","+","ax",".","xyz",";","vec3","aH","=","aF","*","ay",".","w","+","ay",".","xyz",";","return","mix","(","aG",",","aH",",","az",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aR","(","in","vec3","aJ",",","in","vec4","aK",",","in","vec4","aL",",","in","float","aM",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aN","=","at","(","aK",",","aL",",","aM",")",";","vec3","aO","=","j","(","aN",",","aJ",")",";","return","aO",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aP","=","j","(","aK",",","aJ",")",";","vec3","aQ","=","j","(","aL",",","aJ",")",";","return","mix","(","aP",",","aQ",",","aM",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aI","(","in","vec3","aS",",","in","vec4","aT",",","in","vec4","aU",")","{","vec3","aV","=","j","(","aT",",","aS",")",";","vec3","aW","=","aV","*","aU",".","w","+","aU",".","xyz",";","return","aW",";","}","vec3","aR","(","in","vec3","aX",",","in","vec4","aY",")","{","vec3","aZ","=","j","(","aY",",","aX",")",";","return","aZ",";","}"]}]}}]},{type:"textline",tokens:["void","bn","(","inout","vec3","a_",",","inout","vec3","ba",",","inout","vec3","bb",",","inout","vec3","bc",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bd","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","be","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bg","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bh","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec4","bi","=","a_influence",";","for","(","int","bj","=","0",";","bj","<","4",";","bj","++",")","{","int","bk","=","int","(","bi","[","bj","]",")",";","float","bl","=","fract","(","bi","[","bj","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["be","+=","bl","*","aI","(","a_",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","u_transb","[","bk","]",",","u_transa","[","bk","]",",","bd",")",";","bf","+=","bl","*","aR","(","ba",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bd",")",";","bg","+=","bl","*","aR","(","bb",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bd",")",";","bh","+=","bl","*","aR","(","bc",",","u_quatsb","[","bk","]",",","u_quatsa","[","bk","]",",","bd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["be","+=","bl","*","aI","(","a_",",","u_quatsb","[","bk","]",",","u_transb","[","bk","]",")",";","bf","+=","bl","*","aR","(","ba",",","u_quatsb","[","bk","]",")",";","bg","+=","bl","*","aR","(","bb",",","u_quatsb","[","bk","]",")",";","bh","+=","bl","*","aR","(","bc",",","u_quatsb","[","bk","]",")",";"]}]}}]},{type:"textline",tokens:["}","a_","=","be",";","ba","=","bf",";","bb","=","bg",";","bc","=","bh",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bm","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bm",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["a_","=","aI","(","a_",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","u_transb","[","bm","]",",","u_transa","[","bm","]",",","bd",")",";","ba","=","aR","(","ba",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bd",")",";","bb","=","aR","(","bb",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bd",")",";","bc","=","aR","(","bc",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bd",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a_","=","aI","(","a_",",","u_quatsb","[","bm","]",",","u_transb","[","bm","]",")",";","ba","=","aR","(","ba",",","u_quatsb","[","bm","]",")",";","bb","=","aR","(","bb",",","u_quatsb","[","bm","]",")",";","bc","=","aR","(","bc",",","u_quatsb","[","bm","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bB","(","inout","vec3","bo",",","in","vec3","bp",",","in","float","bq",",","in","float","br",",","in","float","bs",",","in","vec3","bt",",","in","float","bu",")","{","float","bv","=","length","(","bp",")",";","float","bw","=","br","*","(","1.0","+","0.1","*","fract","(","bv",")",")",";","float","bx","=","bq","*","bu","*","(","1.0","+","sin","(","2.0","*","3.14","*","bs","*","bw","+","bv",")",")",";","float","by","=","(","bo",".","y","-","bp",".","y",")","*","abs","(","bx",")",";","by","+=","1.0",";","by","*=","by",";","by","=","by","*","by","-","by",";","vec3","bz","=","bo",";","bz",".","xz","+=","bt",".","xz","*","by","*","sign","(","bx",")",";","float","bA","=","length","(","bo","-","bp",")",";","bo","=","bp","+","normalize","(","bz","-","bp",")","*","bA",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bD","(","vec4","bC",")","{","return","bC","*","bC","*","(","3.0","-","2.0","*","bC",")",";","}","vec4","bF","(","vec4","bE",")","{","return","abs","(","fract","(","bE","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bH","(","vec4","bG",")","{","return","bD","(","bF","(","bG",")",")",";","}","void","bY","(","inout","vec3","bI",",","in","float","bJ",",","in","vec3","bK",",","in","vec3","bL",",","in","vec3","bM",",","in","float","bN",",","in","float","bO",",","in","float","bP",",","in","vec3","bQ",")","{","float","bR",";","float","bS",";","float","bT",";","vec2","bU",";","vec4","bV",";","vec2","bW",";","vec3","bX",";","bR","=","dot","(","bM",",","vec3","(","1.0",")",")",";","bS","=","bR","+","bQ",".","g",";","bT","=","dot","(","bI",",","vec3","(","bQ",".","g",")",")",";","bU","=","(","bJ","+","vec2","(","bT",",","bS",")",")",";","bV","=","(","(","fract","(","(","bU",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bL",")","*","bN",";","bV","=","bH","(","bV",")",";","bW","=","bV",".","xz","+","bV",".","yw",";","bW",".","y","=","0.5","-","bW",".","y",";","bX","=","bW",".","xyx","*","bQ",".","rbr","*","vec3","(","bO","*","bK",".","x",",","bP",",","bO","*","bK",".","z",")",";","bI","+=","bX",";","}"]}]}}]},{type:"textline",tokens:["void","ce","(","inout","vec3","bZ",",","inout","vec3","b_",",","in","vec3","ca",")","{","vec3","cb","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","b_",";","vec3","cd","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cc","=","bZ",";","vec3","cd","=","b_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bY","(","cc",",","u_time",",","ca",",","cb",",","cd",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bB","(","cc",",","cd",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cb",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bZ","+=","cc","-","b_",";","b_","=","cc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bZ","=","cc",";","b_","=","cd",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cf","=","255.0",";","float","cg","=","0.0",";","float","ch","=","1.0",";","vec4","cm","(","const","in","float","ci",")","{","vec4","cj","=","vec4","(","cf","*","cf","*","cf",",","cf","*","cf",",","cf",",","ch",")",";","vec4","ck","=","vec4","(","cg",",","ch","/","cf",",","ch","/","cf",",","ch","/","cf",")",";","vec4","cl","=","fract","(","ci","*","cj",")",";","cl","-=","cl",".","xxyz","*","ck",";","return","cl",";","}","float","cq","(","const","in","vec4","cn",")","{","float","co",";","vec4","cp","=","vec4","(","ch","/","(","cf","*","cf","*","cf",")",",","ch","/","(","cf","*","cf",")",",","ch","/","cf",",","ch",")",";","co","=","dot","(","cn",",","cp",")",";","return","co",";","}","vec4","cm","(","const","in","vec2","cr",")","{","vec2","cs","=","vec2","(","cf",",","ch",")",";","vec2","ct","=","vec2","(","cg",",","ch","/","cf",")",";","vec4","cu","=","fract","(","cr",".","xxyy","*","cs",".","xyxy",")",";","cu","-=","cu",".","xxzz","*","ct",".","xyxy",";","if","(","cr",".","r","==","ch",")","cu",".","rg","=","vec2","(","cg",",","ch",")",";","if","(","cr",".","g","==","ch",")","cu",".","ba","=","vec2","(","cg",",","ch",")",";","return","cu",";","}","vec2","cy","(","const","in","vec4","cv",")","{","vec2","cw",";","vec2","cx","=","vec2","(","ch","/","cf",",","ch",")",";","cw",".","r","=","dot","(","cv",".","rg",",","cx",")",";","cw",".","g","=","dot","(","cv",".","ba",",","cx",")",";","return","cw",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cG","=","0.0",";","float","cH","=","1.0",";","vec4","cJ","(","vec4","cI",")","{","return","cI","-","floor","(","cI","*","(","cH","/","289.0",")",")","*","289.0",";","}","vec3","cJ","(","vec3","cK",")","{","return","cK","-","floor","(","cK","*","(","cH","/","289.0",")",")","*","289.0",";","}","vec2","cJ","(","vec2","cL",")","{","return","cL","-","floor","(","cL","*","(","cH","/","289.0",")",")","*","289.0",";","}","vec4","cN","(","vec4","cM",")","{","return","cM","-","floor","(","cM","*","(","cH","/","7.0",")",")","*","7.0",";","}","vec4","cP","(","vec4","cO",")","{","return","cJ","(","(","34.0","*","cO","+","5.0",")","*","cO",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","da","(","vec2","cQ",")","{","vec2","cR","=","cJ","(","floor","(","cQ",")",")",";","vec2","cS","=","fract","(","cQ",")",";","vec4","cT","=","cS",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","cU","=","cS",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","cV","=","cP","(","cR",".","x","+","vec4","(","cG",",","cH",",","cG",",","cH",")",")",";","cV","=","cP","(","cV","+","cR",".","y","+","vec4","(","cG",",","cG",",","cH",",","cH",")",")",";","vec4","cW","=","cN","(","cV",")","*","K","+","K2",";","vec4","cX","=","cN","(","floor","(","cV","*","K",")",")","*","K","+","K2",";","vec4","cY","=","cT","+","JITTER","*","cW",";","vec4","cZ","=","cU","+","JITTER","*","cX",";","vec4","c_","=","cY","*","cY","+","cZ","*","cZ",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["c_",".","xy","=","min","(","c_",".","xy",",","c_",".","zw",")",";","c_",".","x","=","min","(","c_",".","x",",","c_",".","y",")",";","return","c_",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c_",".","xy","=","(","c_",".","x","<","c_",".","y",")","?","c_",".","xy",":","c_",".","yx",";","c_",".","xz","=","(","c_",".","x","<","c_",".","z",")","?","c_",".","xz",":","c_",".","zx",";","c_",".","xw","=","(","c_",".","x","<","c_",".","w",")","?","c_",".","xw",":","c_",".","wx",";","c_",".","y","=","min","(","c_",".","y",",","c_",".","z",")",";","c_",".","y","=","min","(","c_",".","y",",","c_",".","w",")",";","return","sqrt","(","c_",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dq","(","vec2","db",",","float","dc",")","{","vec2","dd","=","cJ","(","floor","(","db",")",")",";","vec2","de","=","fract","(","db",")",";","vec4","df","=","de",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","dg","=","de",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","dh","=","cP","(","dd",".","x","+","vec4","(","cG",",","cH",",","cG",",","cH",")",")",";","dh","=","cP","(","dh","+","dd",".","y","+","vec4","(","cG",",","cG",",","cH",",","cH",")",")",";","vec4","di","=","cN","(","dh",")","*","K","+","K2",";","vec4","dj","=","cN","(","floor","(","dh","*","K",")",")","*","K","+","K2",";","vec4","dk","=","df","+","JITTER","*","di",";","vec4","dl","=","dg","+","JITTER","*","dj",";","vec4","dm","=","dk","*","dk","+","dl","*","dl",";","dk","+=","dc",";","dl","+=","dc",";","vec4","dn","=","dk","*","dk","+","dl","*","dl",";","dk","+=","dc",";","dl","+=","dc",";","vec4","dp","=","dk","*","dk","+","dl","*","dl",";","dm",".","xy","=","min","(","dm",".","xy",",","dm",".","zw",")",";","dm",".","x","=","min","(","dm",".","x",",","dm",".","y",")",";","dn",".","xy","=","min","(","dn",".","xy",",","dn",".","zw",")",";","dn",".","x","=","min","(","dn",".","x",",","dn",".","y",")",";","dp",".","xy","=","min","(","dp",".","xy",",","dp",".","zw",")",";","dp",".","x","=","min","(","dp",".","x",",","dp",".","y",")",";","return","mat3","(","dm",".","xx",",","cG",",","dn",".","xx",",","cG",",","dp",".","xx",",","cG",")",";","}","vec3","ds","(","vec3","dr",")","{","return","cJ","(","(","(","dr","*","34.0",")","+","cH",")","*","dr",")",";","}","float","dG","(","vec2","dt",")","{","const","vec4","du","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","dv","=","floor","(","dt","+","dot","(","dt",",","du",".","yy",")",")",";","vec2","dw","=","dt","-","dv","+","dot","(","dv",",","du",".","xx",")",";","vec2","dx",";","dx","=","(","dw",".","x",">","dw",".","y",")","?","vec2","(","cH",",","cG",")",":","vec2","(","cG",",","cH",")",";","vec4","dy","=","dw",".","xyxy","+","du",".","xxzz",";","dy",".","xy","-=","dx",";","dv","=","cJ","(","dv",")",";","vec3","dz","=","ds","(","ds","(","dv",".","y","+","vec3","(","cG",",","dx",".","y",",","cH",")",")","+","dv",".","x","+","vec3","(","cG",",","dx",".","x",",","cH",")",")",";","vec3","dA","=","max","(","0.5","-","vec3","(","dot","(","dw",",","dw",")",",","dot","(","dy",".","xy",",","dy",".","xy",")",",","dot","(","dy",".","zw",",","dy",".","zw",")",")",",","cG",")",";","dA","=","dA","*","dA",";","dA","=","dA","*","dA",";","vec3","dB","=","2.0","*","fract","(","dz","*","du",".","www",")","-","cH",";","vec3","dC","=","abs","(","dB",")","-","0.5",";","vec3","dD","=","floor","(","dB","+","0.5",")",";","vec3","dE","=","dB","-","dD",";","dA","*=","1.79284291400159","-","0.85373472095314","*","(","dE","*","dE","+","dC","*","dC",")",";","vec3","dF",";","dF",".","x","=","dE",".","x","*","dw",".","x","+","dC",".","x","*","dw",".","y",";","dF",".","yz","=","dE",".","yz","*","dy",".","xz","+","dC",".","yz","*","dy",".","yw",";","return","130.0","*","dot","(","dA",",","dF",")",";","}","vec2","dM","(","vec2","dH",")","{","float","dI","=","dot","(","dH",",","vec2","(","12.9898",",","78.233",")",")",";","float","dJ","=","dot","(","dH",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","dK","=","fract","(","sin","(","dI",")","*","43758.5453",")","*","2.0","-","cH",";","float","dL","=","fract","(","sin","(","dJ",")","*","43758.5453",")","*","2.0","-","cH",";","return","vec2","(","dK",",","dL",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dO","=","0.1",";","const","float","dP","=","0.1",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dQ","=","0.05",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","dR","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dS","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";"]}]}}]},{type:"textline",tokens:["float","ee","(","vec3","dT",",","sampler2D","dU",",","float","dV",")","{","float","dW",";","dT",".","z","=","clamp","(","dT",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["dW","=","0.0",";","float","dX","=","dM","(","dT",".","xy",")",".","x","*","M_PI",";","float","dY","=","cos","(","dX",")",";","float","dZ","=","sin","(","dX",")",";","mat2","d_","=","mat2","(","dY",",","dZ",",","-","dZ",",","dY",")",";","vec2","ea",",","eb",";","for","(","int","ec","=","0",";","ec","<","4",";","ec","++",")","for","(","int","ed","=","0",";","ed","<","4",";","ed","++",")","{","eb",".","x","=","dR","[","ec","]","[","ed","]",";","eb",".","y","=","dS","[","ec","]","[","ed","]",";","eb","=","d_","*","eb",";","ea","=","dT",".","xy","+","eb","*","dV","/","SHADOW_TEX_RES",";","dW","+=","step","(","dT",".","z",",","texture2D","(","dU",",","ea",")",".","r",")",";","}","dW","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dW","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","dW",",","0.0",",","1.0",")",";","}","float","ew","(","vec3","ef",",","sampler2D","eg",",","vec3","eh",",","sampler2D","ei",",","float","ej",",","float","ek",",","float","el",")","{","float","em",",","en",";","ef",".","z","=","clamp","(","ef",".","z",",","0.0",",","1.0",")",";","eh",".","z","=","clamp","(","eh",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["em","=","0.0",";","en","=","0.0",";","float","eo","=","dM","(","ef",".","xy",")",".","x","*","M_PI",";","float","ep","=","cos","(","eo",")",";","float","eq","=","sin","(","eo",")",";","mat2","er","=","mat2","(","ep",",","eq",",","-","eq",",","ep",")",";","vec2","es",",","et",";","for","(","int","eu","=","0",";","eu","<","4",";","eu","++",")","for","(","int","ev","=","0",";","ev","<","4",";","ev","++",")","{","et",".","x","=","dR","[","eu","]","[","ev","]",";","et",".","y","=","dS","[","eu","]","[","ev","]",";","et","=","er","*","et",";","es","=","ef",".","xy","+","et","*","ej","/","SHADOW_TEX_RES",";","em","+=","step","(","ef",".","z",",","texture2D","(","eg",",","es",")",".","r",")",";","es","=","eh",".","xy","+","et","*","ek","/","SHADOW_TEX_RES",";","en","+=","step","(","eh",".","z",",","texture2D","(","ei",",","es",")",".","r",")",";","}","em","=","mix","(","em",",","en",",","el",")",";","em","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["em","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","em",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["bool","ez","(","vec2","ex",",","float","ey",")","{","return","all","(","lessThanEqual","(","ex",",","vec2","(","1.0","+","ey",")",")",")","&&","all","(","greaterThanEqual","(","ex",",","vec2","(","0.0","-","ey",")",")",")",";","}","float","eD","(","vec2","eA",")","{","float","eB","=","min","(","eA",".","x",",","eA",".","y",")",";","float","eC","=","min","(","1.0","-","eA",".","x",",","1.0","-","eA",".","y",")",";","return","min","(","eB",",","eC",")",";","}","float","eG","(","float","eE",",","float","eF",")","{","if","(","eF",">=","0.0","&&","eF","<=","dP",")","eE","=","(","eE","-","1.0",")","/","dP","*","eF","+","1.0",";","return","eE",";","}","float","eS","(","vec3","eH",",","vec3","eI",",","sampler2D","eJ",",","sampler2D","eK",",","float","eL",",","float","eM",",","float","eN",",","float","eO",")","{","float","eP",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eQ","=","eD","(","eH",".","xy",")",";","if","(","-","eO",">","eN","&&","eQ",">=","0.0","&&","eQ","<=","dO","&&","ez","(","eI",".","xy",",","0.0",")",")","{","float","eR","=","1.0","-","eQ","/","dO",";","eP","=","ew","(","eH",",","eJ",",","eI",",","eK",",","eL",",","eM",",","eR",")",";","}","else"]}]}}]},{type:"textline",tokens:["eP","=","ee","(","eH",",","eJ",",","eL",")",";","return","eP",";","}","float","e_","(","vec3","eT",",","sampler2D","eU",",","float","eV",",","float","eW",",","float","eX",")","{","float","eY","=","ee","(","eT",",","eU",",","eV",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","eX",">","eW",")","{","float","eZ","=","eD","(","eT",".","xy",")",";","eY","=","eG","(","eY",",","eZ",")",";","}"]}]}}]},{type:"textline",tokens:["return","eY",";","}","float","fg","(","float","fa",")","{","float","fb","=","1.0",";","vec3","fc","=","cA",".","xyz","/","cA",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fd","=","cB",".","xyz","/","cB",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fe","=","cC",".","xyz","/","cC",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ff","=","cD",".","xyz","/","cD",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ez","(","fc",".","xy",",","0.0",")",")","{","fb","=","eS","(","fc",",","fd",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","fa",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ez","(","fc",".","xy",",","dQ",")",")","{","fb","=","e_","(","fc",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","fa",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ez","(","fd",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["fb","=","eS","(","fd",",","fe",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","fa",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fb","=","e_","(","fd",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","fa",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ez","(","fe",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["fb","=","eS","(","fe",",","ff",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","fa",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fb","=","e_","(","fe",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","fa",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ez","(","ff",".","xy",",","0.0",")",")","fb","=","e_","(","ff",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","fa",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","fb",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","fl","(","inout","vec3","fh",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fi","=","texture2DProj","(","u_shadow_mask",",","cE",")",".","rg",";","vec3","fj","=","vec3","(","fi",".","r",")",";","float","fk","=","fi",".","g",";","dN","=","vec4","(","fj",",","fk",")",";","fh","*=","dN",".","a",";","return","dN",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","fg","(","cF",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fq","(","vec3","fm",",","float","fn",",","vec2","fo",")","{","vec2","fp","=","vec2","(","(","fm",".","x","-","fo",".","x",")","/","fn",",","-","(","fm",".","z","-","fo",".","y",")","/","fn",")",";","return","fract","(","fp",")",";","}","vec2","fu","(","vec2","fr",",","float","fs",",","vec2","ft",")","{","return","vec2","(","fr",".","x","*","fs",",","-","fr",".","y","*","fs",")","+","ft",";","}","d","fv","(",")","{","return","d","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","d","ga","(","vec3","fw",",","vec3","fx",",","vec3","fy",",","vec3","fz",",","vec3","fA",",","sampler2D","fB",",","sampler2D","fC",",","vec3","fD",",","float","fE",",","vec3","fF",",","vec4","fG",",","mat4","fH",")","{","vec3","fI","=","j","(","fG",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","fJ","=","-","fI",".","x",";","float","fK","=","-","fI",".","z",";","vec2","fL","=","vec2","(","fF",".","x","+","fE","*","(","-","1.0","-","fJ",")","/","2.0",",","fF",".","z","+","fE","*","(","1.0","-","fK",")","/","2.0",")",";","vec2","fM","=","fq","(","fA",",","fE",",","fL",")",";","float","fN","=","fE","/","2.0",";","vec2","fO","=","abs","(","fu","(","fM","-","vec2","(","0.5",")",",","fE",",","vec2","(","0.0",")",")",")",";","float","fP","=","fN","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fO",")",">","fP",")","return","fv","(",")",";","float","fQ","=","fE","/","fD",".","z",";","vec2","fR","=","(","fM","-","vec2","(","0.5",")",")","*","fQ","+","vec2","(","0.5",")",";","vec3","fS","=","fI","*","(","fE","/","fD",".","z","-","1.0",")","/","2.0",";","fR",".","x","+=","fS",".","x",";","fR",".","y","-=","fS",".","z",";","vec4","fT","=","texture2D","(","fC",",","fR",")",";","float","fU","=","fT",".","r",";","if","(","fU","<","u_scale_threshold",")","return","fv","(",")",";","float","fV","=","fD",".","y","-","fD",".","x",";","float","fW","=","fD",".","y","-","texture2D","(","fB",",","fR",")",".","r","*","fV",";","vec2","fX","=","fw",".","xz","-","fA",".","xz",";","fA",".","xz","=","fu","(","fM",",","fE",",","fL",")",";","fA",".","y","=","fW",";","fw",".","xz","=","fA",".","xz","+","fX",";","fw",".","y","*=","fU",";","fw",".","y","+=","fW",";","vec3","fY","=","fT",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fw","-=","fA",";","mat4","fZ","=","aa","(","fF",",","fA",",","fH",")",";","d","f_","=","ah","(","fw",",","fA",",","fx",",","fy",",","fz",",","fZ",")",";","f_",".","b","=","fA",";","f_",".","f","=","fY",";","return","s","(","f_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","s","(","d","(","fw",",","fA",",","fx",",","fy",",","fz",",","fY",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gg","(","mat4","gb",",","vec4","gc",")","{","vec2","gd","=","(","gb","*","u_v_light_matrix","[","3","]",")",".","xy",";","float","ge","=","SHADOW_TEX_RES","/","2.0",";","gd","=","floor","(","gd","*","ge","+","0.5",")","/","ge","-","gd",";","vec4","gf","=","gb","*","gc",";","gf",".","xy","+=","gd",";","gf","=","u_b_light_matrix","*","gf",";","return","gf",";","}","void","gk","(","vec3","gh",")","{","vec3","gi","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";","vec4","gj","=","u_v_light_matrix","*","vec4","(","gh","+","u_normal_offset","*","gi",",","1.0",")",";","cA","=","gg","(","u_p_light_matrix0",",","gj",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cB","=","gg","(","u_p_light_matrix1",",","gj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cC","=","gg","(","u_p_light_matrix2",",","gj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","gg","(","u_p_light_matrix3",",","gj",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","gk","(","vec4","gl",")","{","float","gm","=","gl",".","x",";","float","gn","=","gl",".","y",";","float","go","=","gl",".","w",";","cE",".","x","=","(","gm","+","go",")","/","2.0",";","cE",".","y","=","(","gn","+","go",")","/","2.0",";","cE",".","z","=","go",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","gr","(","inout","vec3","gq",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gq","=","max","(","vec3","(","0.0",")",",","gq",")",";","gq","=","pow","(","gq",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gt","(","inout","vec3","gs",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gs","=","max","(","vec3","(","0.0",")",",","gs",")",";","gs","=","pow","(","gs",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gw","(","inout","vec3","gu",",","in","float","gv",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gu","=","gu","*","gv",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","gE","(","inout","vec3","gz",",","in","float","gA",",","in","vec4","gB",")","{","float","gC","=","gB",".","w","*","gA",";","float","gD","=","exp","(","-","gC","*","gC",")",";","gD","=","clamp","(","gD",",","0.0",",","1.0",")",";","gz","=","mix","(","gB",".","rgb",",","gz",",","gD",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gL","(","in","mat4","gF",",","in","vec3","gG",")","{","vec3","gH","=","mix","(","gF","[","0","]",".","rgb",",","gF","[","1","]",".","rgb",",","max","(","sign","(","gG",".","x",")",",","0.0",")",")",";","vec3","gI","=","mix","(","gF","[","2","]",".","rgb",",","gF","[","3","]",".","rgb",",","max","(","sign","(","gG",".","z",")",",","0.0",")",")",";","vec3","gJ","=","vec3","(","gF","[","0","]",".","a",",","gF","[","1","]",".","a",",","gF","[","2","]",".","a",")",";","vec3","gK","=","mix","(","gH",",","gI",",","abs","(","gG",".","z",")",")",";","gK","=","mix","(","gK",",","gJ",",","abs","(","gG",".","y",")",")",";","return","gK",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gN","(","inout","float","gM",")","{","gM","-=","0.5",";","gM","=","4.0","*","(","gM","*","gM","*","gM",")","+","0.5",";","}","void","hd","(","inout","vec3","gO",",","in","float","gP",",","in","vec3","gQ",",","in","float","gR",",","in","vec4","gS",",","in","vec4","gT",",","in","float","gU",",","in","float","gV",")","{","float","gW","=","gT",".","w","*","gP",";","float","gX","=","exp","(","-","gW","*","gW",")",";","gX","=","clamp","(","gX",",","0.0",",","1.0",")",";","float","gY","=","max","(","gQ",".","y",",","0.0",")",";","gP","=","max","(","gP","-","max","(","gR","/","gY",",","0.0",")",",","0.0",")",";","float","gZ","=","gS",".","w","*","gP",";","float","g_","=","1.0","-","gZ",";","g_","=","max","(","g_",",","0.0",")",";","gN","(","g_",")",";","g_","+=","max","(","gU","-","0.5",",","0.0",")",";","if","(","g_","<","gX",")","{","vec3","ha","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","hb","=","gS",".","rgb",";","gR","=","clamp","(","-","gR","*","0.03",",","0.0",",","0.8",")",";","vec3","hc","=","mix","(","hb",",","ha",",","min","(","gY",",","1.0",")",")",";","hc","=","mix","(","hc",",","vec3","(","0.0",")",",","gR",")","*","gV",";","gO","=","mix","(","hc",",","gO",",","g_",")",";","}","if","(","g_",">=","gX",")","{","gO","=","mix","(","gT",".","rgb",",","gO",",","gX",")",";","}","}","void","hm","(","inout","vec3","he",",","in","float","hf",",","in","float","hg",",","in","vec4","hh",",","in","float","hi",")","{","float","hj","=","hh",".","w","*","hf",";","float","hk","=","1.0","-","hj",";","hk","=","clamp","(","hk",",","0.0",",","1.0",")",";","gN","(","hk",")",";","hg","=","clamp","(","-","hg","*","0.03",",","0.0",",","0.8",")",";","vec3","hl","=","mix","(","hh",".","rgb",",","vec3","(","0.0",")",",","hg",")","*","hi",";","he","=","mix","(","hl",",","he",",","hk",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","hn","=","0.0",";","float","ho","=","1.0",";","struct","hp","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hx","(","vec3","hq",",","vec3","hr",",","vec3","hs",",","vec4","ht",",","float","hu",")","{","vec3","hv","=","normalize","(","hq","+","hr",")",";","float","hw","=","ht","[","0","]","*","max","(","dot","(","hs",",","hv",")",",","hn",")","+","ht","[","1","]",";","return","pow","(","hw",",","hu",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hI","(","vec3","hy",",","vec3","hz",",","vec3","hA",",","float","hB",")","{","vec3","hC","=","normalize","(","hy","+","hz",")",";","float","hD","=","max","(","dot","(","hA",",","hC",")",",","0.001",")",";","float","hE","=","max","(","dot","(","hA",",","hz",")",",","0.01",")",";","float","hF","=","max","(","dot","(","hA",",","hy",")",",","0.01",")",";","float","hG","=","tan","(","acos","(","hD",")",")",";","float","hH","=","max","(","hB",",","0.001",")",";","return","hF","*","(","ho","/","(","4.0","*","M_PI","*","hH","*","hH",")",")","*","(","exp","(","-","(","hG","*","hG",")","/","(","hH","*","hH",")",")","/","(","sqrt","(","hE","*","hF",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hQ","(","vec3","hJ",",","vec3","hK",",","vec3","hL",",","float","hM",",","float","hN",")","{","vec3","hO","=","normalize","(","hJ","+","hK",")",";","float","hP","=","acos","(","dot","(","hO",",","hL",")",")",";","if","(","hP","<","hM",")","return","ho",";","else","if","(","hP",">=","hM","+","hN","||","hN","==","hn",")","return","hn",";","else","return","ho","-","(","hP","-","hM",")","/","hN",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","ik","(","float","hR",",","vec3","hS",",","vec3","hT",",","vec3","hU",",","float","hV",",","inout","float","hW",")","{","if","(","hV",">","hn",")","{","float","hX","=","max","(","dot","(","hS",",","hU",")",",","hn",")",";","float","hY","=","hV","*","hV",";","float","hZ","=","ho","-","0.5","*","(","hY","/","(","hY","+","0.33",")",")",";","vec3","h_","=","hT","-","hR","*","hS",";","vec3","ia","=","hU","-","hX","*","hS",";","if","(","length","(","h_",")","==","hn","||","length","(","ia",")","==","hn","||","abs","(","hR",")",">","ho","||","abs","(","hX",")",">","ho",")","hW","=","hW","*","hZ",";","else","{","float","ib","=","acos","(","hR",")",";","float","ic","=","acos","(","hX",")",";","vec3","id","=","normalize","(","h_",")",";","vec3","ie","=","normalize","(","ia",")",";","float","ig",",","ih",";","ig","=","max","(","ib",",","ic",")",";","ih","=","min","(","ib",",","ic",")",";","ih","*=","0.95",";","float","ii","=","max","(","dot","(","id",",","ie",")",",","hn",")",";","float","ij","=","0.45","*","(","hY","/","(","hY","+","0.09",")",")",";","hW","=","hW","*","(","hZ","+","(","ij","*","ii","*","sin","(","ig",")","*","tan","(","ih",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","is","(","vec3","il",",","vec3","im",",","float","io",",","float","ip",",","out","float","iq",")","{","float","ir",";","if","(","io","==","hn",")","{","iq","=","ho",";","}","else","{","ir","=","ho","+","abs","(","dot","(","im",",","il",")",")",";","ir","=","ip","+","(","ho","-","ip",")","*","pow","(","ir",",","io",")",";","iq","=","clamp","(","ir",",","hn",",","ho",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS","&&","NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","i_","(","inout","hp","it",",","vec3","iu",",","vec3","iv",",","vec3","iw",",","vec3","ix",",","vec3","iy",",","vec2","iz",",","vec2","iA",",","float","iB",",","vec3","iC",",","vec3","iD",",","vec3","iE",",","vec4","iF",",","vec4","iG",",","float","iH",",","vec4","iI",")","{","if","(","iF",".","w","+","iG",".","w","==","hn",")","return",";","vec3","iJ","=","vec3","(","hn",")",";","vec3","iK","=","iE","*","iB",";","float","iL","=","iG",".","z",";","if","(","iL","!=","-","ho",")","{","iJ","=","iC","-","iw",";","float","iM","=","length","(","iJ",")",";","iK","*=","iL","/","(","iL","+","iM","*","iM",")",";","iJ","=","normalize","(","iJ",")",";","float","iN","=","iG",".","x",";","float","iO","=","iG",".","y",";","if","(","iN",">","-","ho",")","{","float","iP","=","dot","(","iJ",",","iD",")",";","iP","*=","smoothstep","(","hn",",","ho",",","(","iP","-","iN",")","/","iO",")",";","iK","*=","iP",";","}","}","else","iJ","=","iD",";","float","iQ","=","hn",";","if","(","iF",".","w","!=","hn",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["is","(","ix",",","iJ",",","iA","[","0","]",",","iA","[","1","]",",","iQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iR","=","max","(","dot","(","ix",",","iJ",")",",","hn",")",";","iQ","=","iF","[","0","]","*","iR","+","iF","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["ik","(","iR",",","ix",",","iJ",",","iy",",","iA","[","0","]",",","iQ",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","float","iS","=","hn",";","if","(","iG",".","w","!=","hn",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["iS","=","hx","(","iJ",",","iy",",","ix",",","iF",",","iz","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["iS","=","hI","(","iJ",",","iy",",","ix",",","iz","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["iS","=","hQ","(","iJ",",","iy",",","ix",",","iz","[","0","]",",","iz","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iS","=","hn",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","iJ",",","ix",")","*","dot","(","iy",",","ix",")","<","hn",")","{","float","iT","=","iI",".","x",";","float","iU","=","iI",".","y",";","float","iV","=","iI",".","z",";","float","iW","=","iI",".","w",";","float","iX","=","clamp","(","abs","(","dot","(","iJ",",","ix",")",")",",","hn",",","ho",")",";","float","iY","=","clamp","(","dot","(","iy",",","-","iJ",")",",","hn",",","ho",")",";","float","iZ","=","pow","(","iY",",","iU",")",";","it",".","a","+=","iH","*","vec4","(","iK","*","iX","*","pow","(","iu",",","vec3","(","iT",")",")",",","ho",")",";","it",".","a","+=","iV","*","mix","(","vec4","(","iu",",","ho",")",",","vec4","(","ho",")",",","iW",")","*","iH","*","vec4","(","iK","*","iX","*","vec3","(","iZ",")",",","ho",")",";","}","else","{","it",".","b","+=","iK","*","iv","*","iS",";","it",".","a","+=","vec4","(","iK","*","iu","*","iQ",",","iS",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["it",".","b","+=","iK","*","iv","*","iS",";","it",".","a","+=","vec4","(","iK","*","iu","*","iQ",",","iS",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hp","jR","(","vec3","ja",",","vec3","jb",",","vec3","jc",",","vec3","jd",",","vec3","je",",","vec3","jf",",","vec3","jg",",","vec2","jh",",","vec2","ji",",","float","jj",",","vec3","jk","[","NUM_LIGHTS","]",",","vec3","jl","[","NUM_LIGHTS","]",",","vec3","jm","[","NUM_LIGHTS","]",",","vec4","jn","[","NUM_LIGHTS","]",",","vec4","jo","[","NUM_LIGHTS","]",",","float","jp",",","vec4","jq",",","int","jr",")","{","hp","js",";","js",".","a","=","vec4","(","ja","+","jc","*","jb",",","hn",")",";","js",".","b","=","vec3","(","hn",")",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jt","=","ho",";","if","(","jr","==","0",")","jt","=","jj",";","i_","(","js",",","jc",",","jd",",","je",",","jf",",","jg",",","jh",",","ji",",","jt",",","jk","[","0","]",",","jl","[","0","]",",","jm","[","0","]",",","jn","[","0","]",",","jo","[","0","]",",","jp",",","jq",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["float","ju","=","ho",";","if","(","jr","==","1",")","ju","=","jj",";","i_","(","js",",","jc",",","jd",",","je",",","jf",",","jg",",","jh",",","ji",",","ju",",","jk","[","1","]",",","jl","[","1","]",",","jm","[","1","]",",","jn","[","1","]",",","jo","[","1","]",",","jp",",","jq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["float","jv","=","ho",";","if","(","jr","==","2",")","jv","=","jj",";","i_","(","js",",","jc",",","jd",",","je",",","jf",",","jg",",","jh",",","ji",",","jv",",","jk","[","2","]",",","jl","[","2","]",",","jm","[","2","]",",","jn","[","2","]",",","jo","[","2","]",",","jp",",","jq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["float","jw","=","ho",";","if","(","jr","==","3",")","jw","=","jj",";","i_","(","js",",","jc",",","jd",",","je",",","jf",",","jg",",","jh",",","ji",",","jw",",","jk","[","3","]",",","jl","[","3","]",",","jm","[","3","]",",","jn","[","3","]",",","jo","[","3","]",",","jp",",","jq",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","jx","=","0",";","jx","<","NUM_LIGHTS",";","jx","++",")","{","vec4","jy","=","jn","[","jx","]",";","vec4","jz","=","jo","[","jx","]",";","if","(","jy",".","w","+","jz",".","w","!=","hn",")","{","vec3","jA","=","vec3","(","hn",")",";","vec3","jB","=","jm","[","jx","]",";","if","(","jx","==","jr",")","jB","*=","jj",";","float","jC","=","jz",".","z",";","if","(","jC","!=","-","ho",")","{","jA","=","jk","[","jx","]","-","je",";","float","jD","=","length","(","jA",")",";","jB","*=","jC","/","(","jC","+","jD","*","jD",")",";","jA","=","normalize","(","jA",")",";","float","jE","=","jz",".","x",";","float","jF","=","jz",".","y",";","if","(","jE",">","-","ho",")","{","float","jG","=","dot","(","jA",",","jl","[","jx","]",")",";","jG","*=","smoothstep","(","hn",",","ho",",","(","jG","-","jE",")","/","jF",")",";","jB","*=","jG",";","}","}","else","jA","=","jl","[","jx","]",";","float","jH","=","hn",";","if","(","jy",".","w","!=","hn",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["is","(","jf",",","jA",",","ji","[","0","]",",","ji","[","1","]",",","jH",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jI","=","max","(","dot","(","jf",",","jA",")",",","hn",")",";","jH","=","jy","[","0","]","*","jI","+","jy","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["ik","(","jI",",","jf",",","jA",",","jg",",","ji","[","0","]",",","jH",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","float","jJ","=","hn",";","if","(","jz",".","w","!=","hn",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["jJ","=","hx","(","jA",",","jg",",","jf",",","jy",",","jh","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["jJ","=","hI","(","jA",",","jg",",","jf",",","jh","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["jJ","=","hQ","(","jA",",","jg",",","jf",",","jh","[","0","]",",","jh","[","1","]",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","jA",",","jf",")","*","dot","(","jg",",","jf",")","<","hn",")","{","float","jK","=","jq",".","x",";","float","jL","=","jq",".","y",";","float","jM","=","jq",".","z",";","float","jN","=","jq",".","w",";","float","jO","=","clamp","(","abs","(","dot","(","jA",",","jf",")",")",",","hn",",","ho",")",";","float","jP","=","clamp","(","dot","(","jg",",","-","jA",")",",","hn",",","ho",")",";","float","jQ","=","pow","(","jP",",","jL",")",";","js",".","a","+=","jp","*","vec4","(","jB","*","jO","*","pow","(","jc",",","vec3","(","jK",")",")",",","ho",")",";","js",".","a","+=","jM","*","mix","(","vec4","(","jc",",","ho",")",",","vec4","(","ho",")",",","jN",")","*","jp","*","vec4","(","jB","*","jO","*","vec3","(","jQ",")",",","ho",")",";","}","else","{","js",".","b","+=","jB","*","jd","*","jJ",";","js",".","a","+=","vec4","(","jB","*","jc","*","jH",",","jJ",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["js",".","b","+=","jB","*","jd","*","jJ",";","js",".","a","+=","vec4","(","jB","*","jc","*","jH",",","jJ",")",";"]}]}}]},{type:"textline",tokens:["}","}"]}]}}]},{type:"textline",tokens:["return","js",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hp","jW","(","vec3","jS",",","vec3","jT",",","vec3","jU",")","{","hp","jV",";","jV",".","a","=","vec4","(","jS","+","jU","*","jT",",","hn",")",";","jV",".","b","=","vec3","(","hn",")",";","return","jV",";","}"]}]}}]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","kw","(","inout","vec3","jX",",","float","jY",",","float","jZ",",","float","j_",",","vec3","ka",",","vec3","kb",",","vec3","kc",",","vec4","kd",",","vec3","ke",",","float","kf",")","{","if","(","kf",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","kg","=","kd",";","vec3","kh","=","ke","+","ka",";","kh",".","xz","=","10.0","*","sin","(","0.1","*","kh",".","xz",")",";","vec3","ki","=","kh","+","2.0","*","cross","(","-","kg",".","xyz",",","cross","(","-","kg",".","xyz",",","kh",")","+","kg",".","w","*","kh",")",";","vec2","kj","=","ki",".","xz",";","vec3","kk","=","kb",";","float","kl","=","max","(","dot","(","ka",",","kk",")",",","0.0",")",";","float","km","=","0.025",";","kj",".","s","+=","0.5","*","sin","(","dot","(","ke","+","jZ",",","vec3","(","1.0",")",")",")",";","kj",".","t","+=","0.7","*","(","-","sin","(","dot","(","ke","-","jZ",",","vec3","(","-","0.7",")",")",")",")",";","kj",".","st","+=","0.23","*","cos","(","4.0","*","jY","-","CAUST_SPEED",".","x","*","jZ",")",";","kj",".","st","+=","3.0","*","sin","(","jY","-","0.3","*","CAUST_SPEED",".","y","*","jZ",")",";","float","kn","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","jY",",","0.0",")",")",";","mat3","ko","=","dq","(","(","kj","/","kn",")",",","km",")",";","float","kp","=","(","ko","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","kq","=","(","ko","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","kr","=","(","ko","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","ks","=","CAUST_BRIGHT","*","vec3","(","kp",",","kq",",","kr",")",";","float","kt","=","j_","*","kl",";","float","ku","=","max","(","sign","(","jY",")",",","0.0",")",";","kt","=","min","(","kt","+","0.5","*","sign","(","-","ka",".","y",")","*","ku",",","1.0",")",";","kt","*=","1.0","-","ku","*","(","0.1","*","jY",")",";","ks","*=","kt",";","ks","*=","ks",";","float","kv","=","min","(","-","jY","+","10.0",",","1.0",")",";","jX","+=","max","(","(","2.0","*","kc","*","ks",")","*","kv",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","kK","(","in","vec3","kD",",","in","vec3","kE",",","in","float","kF",",","in","float","kG",")","{","vec3","kH","=","normalize","(","kE","+","kD",")",";","float","kI","=","1.0","-","dot","(","kD",",","kH",")",";","float","kJ","=","kG","+","(","1.0","-","kG",")","*","pow","(","kI",",","kF",")",";","return","kJ",";","}","void","kZ","(","inout","vec3","kL",",","in","vec3","kM",",","in","vec3","kN",",","in","float","kO",",","in","float","kP",",","in","float","kQ",")","{","vec3","kR","=","reflect","(","-","kM",",","kN",")",";","float","kS","=","1.0",";","if","(","kO","!=","0.0",")","kS","=","kK","(","kM",",","kR",",","kO",",","kP",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kT","=","u_refl_plane",".","xyz","*","dot","(","kN",",","u_refl_plane",".","xyz",")",";","vec3","kU","=","kN","-","kT",";","vec2","kV","=","(","u_view_matrix_frag","*","vec4","(","kU",",","0.0",")",")",".","xy",";","vec2","kW","=","cE",".","xy","/","cE",".","z",";","kW","+=","kV","*","REFL_BUMP",";","vec3","kX","=","texture2D","(","u_reflectmap",",","kW",")",".","rgb",";","gr","(","kX",".","rgb",")",";","kL","=","mix","(","kL",",","kX",",","kQ","*","kS",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kY","=","textureCube","(","u_mirrormap",",","kR",")",".","xyz",";","gr","(","kY",".","rgb",")",";","kL","=","mix","(","kL",",","kY",",","u_mirror_factor","*","kS",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","le","(","in","float","k_",",","inout","vec2","la",",","in","vec2","lb",")","{","vec4","lc","=","texture2D","(","u_scene_depth",",","la",")",";","float","ld","=","cq","(","lc",")",";","if","(","ld","<","kC",")","{","la","=","lb",";","return","k_",";","}","else","{","return","ld",";","}","return","k_",";","}","vec3","lm","(","in","vec3","lf",",","in","vec2","lg",")","{","vec2","lh","=","lf",".","xy","/","lf",".","z",";","vec2","li","=","lh","+","lg",";","vec4","lj","=","texture2DProj","(","u_scene_depth",",","lf",")",";","float","lk","=","cq","(","lj",")",";","le","(","lk",",","li",",","lh",")",";","vec3","ll","=","texture2D","(","u_refractmap",",","li",")",".","rgb",";","gr","(","ll",")",";","return","ll",";","}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","mn","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mu","(","inout","float","mo",",","float","mp",",","vec2","mq",",","vec2","mr",")","{","float","ms","=","mr",".","x","-","mq",".","x",";","float","mt","=","(","mp","-","mq",".","x",")","/","ms",";","mo","=","mix","(","mo",",","mr",".","y",",","clamp","(","mt",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mB","(","inout","vec3","mv",",","float","mw",",","vec4","mx",",","vec4","my",")","{","float","mz","=","my",".","x","-","mx",".","x",";","float","mA","=","(","mw","-","mx",".","x",")","/","mz",";","mv","=","mix","(","mv",",","my",".","yzw",",","clamp","(","mA",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","mI","(","float","mC",",","float","mD",",","vec2","mE","[","SIZE_RAMP_LENGTH","]",")","{","float","mF","=","mC","/","mD",";","float","mG","=","mE","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mu","(","mG",",","mF",",","mE","[","0","]",",","mE","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mu","(","mG",",","mF",",","mE","[","1","]",",","mE","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mu","(","mG",",","mF",",","mE","[","2","]",",","mE","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mH","=","1",";","mH","<","SIZE_RAMP_LENGTH",";","mH","++",")","mu","(","mG",",","mF",",","mE","[","mH","-","1","]",",","mE","[","mH","]",")",";"]}]}}]},{type:"textline",tokens:["return","mG",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mP","(","float","mJ",",","float","mK",",","vec4","mL","[","COLOR_RAMP_LENGTH","]",")","{","float","mM","=","mJ","/","mK",";","vec3","mN","=","mL","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mB","(","mN",",","mM",",","mL","[","0","]",",","mL","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mB","(","mN",",","mM",",","mL","[","1","]",",","mL","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mB","(","mN",",","mM",",","mL","[","2","]",",","mL","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mO","=","1",";","mO","<","COLOR_RAMP_LENGTH",";","mO","++",")","mB","(","mN",",","mM",",","mL","[","mO","-","1","]",",","mL","[","mO","]",")",";"]}]}}]},{type:"textline",tokens:["return","mN",";","}"]}]}}]},{type:"textline",tokens:["float","mY","(","float","mQ",",","float","mR",",","float","mS",",","float","mT",")","{","float","mU","=","max","(","0.01",",","min","(","mR",",","mS",")",")",";","float","mV","=","max","(","0.01",",","min","(","mR",",","mT",")",")",";","float","mW","=","mR","-","mV",";","float","mX","=","clamp","(","mQ","/","mU",",","0.0",",","1.0",")","-","step","(","mW",",","mQ",")","*","(","mQ","-","mW",")","/","mV",";","return","mX",";","}","mn","nd","(",")","{","mn","mZ",";","float","m_",";","if","(","u_p_cyclic","==","1",")","{","m_","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","m_","<","0.0",")","m_","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","m_","=","u_p_time","-","a_p_delay",";","}","if","(","m_","<","0.0","||","m_",">=","a_p_lifetime",")","{","mZ",".","a","=","0.0001",";","mZ",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","m_","<","0.0","||","m_",">=","a_p_lifetime",")",")","{","vec3","na","=","a_position",";","vec3","nb","=","a_normal",";","na","+=","u_p_nfactor","*","m_","*","nb",";","na","+=","a_p_vels",".","xyz","*","m_",";","na",".","y","-=","u_p_gravity","*","m_","*","m_","/","2.0",";","float","nc","=","max","(","u_p_mass",",","EPSILON",")",";","na","+=","(","u_p_wind","/","nc",")","*","m_","*","m_","/","2.0",";","mZ",".","b","=","na",";","mZ",".","e","=","a_p_vels",".","w","*","m_",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mZ",".","a","=","mI","(","m_",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mZ",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mZ",".","d","=","mP","(","m_",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mZ",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["mZ",".","c","=","mY","(","m_",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","mZ",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","nq","(","in","sampler2D","nj",",","in","vec2","nk",",","in","vec2","nl",")","{","float","nm","=","texture2D","(","nj",",","nk",")",".","r",";","float","nn","=","nl",".","x",";","float","no","=","nl",".","y",";","float","np","=","2.0","*","nn","/","(","nn","+","no","-","(","2.0","*","nm","-","1.0",")","*","(","no","-","nn",")",")",";","return","np",";","}"]}]}}