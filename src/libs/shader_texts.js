b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cl","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cl","=","mix","(","cl",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","vec3","(","0.0",")",";","vec3","cn","=","vec3","(","0.0",")",";","vec3","co","=","vec3","(","0.0",")",";","bt","(","cl",",","cm",",","cn",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cp","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cp","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cq","=","(","u_model_matrix","*","vec4","(","cp",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","cr","=","ag","(","u_camera_eye",",","cq",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","cr","=","aa","(","u_camera_eye",",","cq",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cs","=","(","u_model_matrix","*","vec4","(","cp",",","1.0",")",")",".","xyz",";","cr","=","cr","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cs",")",";"]}]}}]},{type:"textline",tokens:["d","ct","=","an","(","cl","-","cp",",","cp",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cr",")",";","ct",".","b","=","cq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","ct","=","an","(","cl",",","cp",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cu","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cu","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ck","(","ct",".","a",",","ct",".","b",",","cu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aq","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ct",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";"]}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","ft","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ft","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","ft","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cs","(","cF",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fn","(","cL",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","gw","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["gw","=","mix","(","gw",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gx","=","vec3","(","0.0",")",";","vec3","gy","=","vec3","(","0.0",")",";","vec3","gz","=","vec3","(","0.0",")",";","bt","(","gw",",","gx",",","gy",",","gz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gA","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","gB","=","gh","(","gw",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gA",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gC","=","(","u_model_matrix","*","vec4","(","gA",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","HAIR_BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gD","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gD","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gE","=","ag","(","u_camera_eye",",","gC",",","gD",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gE","=","aa","(","u_camera_eye",",","gC",",","gD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gF","=","(","u_model_matrix","*","vec4","(","gA",",","1.0",")",")",".","xyz",";","gE","=","gE","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gF",")",";"]}]}}]},{type:"textline",tokens:["d","gB","=","an","(","gw","-","gA",",","gA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gE",")",";","gB",".","b","=","gC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gB","=","an","(","gw",",","gA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gG","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gG","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ck","(","gB",".","a",",","gB",".","b",",","gG",")",";"]}]}}]},{type:"textline",tokens:["vec4","gH","=","u_view_matrix","*","vec4","(","gB",".","a",",","1.0",")",";","vec4","gI","=","u_proj_matrix","*","gH",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gI",".","xy","+=","u_subpixel_jitter","*","gI",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aq","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","gB",".","a",")",";","cL","=","gH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["cF","=","-","gH",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","gJ","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","float","gK","=","SHADOW_TEX_RES","/","2.0",";","gJ","=","floor","(","gJ","*","gK","+","0.5",")","/","gK","-","gJ",";","gI",".","xy","+=","gJ",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gI",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gw",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gw",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","gw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","gw",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","gw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gw",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gw",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gx","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","gy","=","aa","(","u_camera_eye",",","gx",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["gy","=","gy","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["d","gz","=","an","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gy",")",";","gz",".","b","=","gx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gz","=","an","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gA","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gz",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gw","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gw","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gw","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","gA",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","gE",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gF",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gG","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gG","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","gI","(","float","gH",")","{","return","gH","-","floor","(","gH","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gR","(","inout","float","gJ",",","in","float","gK","[","gG","]",",","in","float","gL",")","{","for","(","int","gM","=","0",";","gM","<","NUM_RINGS",";","gM","++",")","{","float","gN","=","40.0","*","gK","[","gM","]",";","float","gO","=","300.0","*","(","gI","(","gN",")","-","0.005",")",";","float","gP","=","gN",";","float","gQ","=","abs","(","gP","*","(","u_halo_size","*","gO","-","gL",")",")",";","gJ","+=","1.0","-","min","(","gQ",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","g_","(","inout","float","gS",",","in","float","gT","[","gG","]",",","in","float","gU",")","{","for","(","int","gV","=","0",";","gV","<","NUM_LINES",";","gV","++",")","{","float","gW","=","gT","[","gV","]",";","float","gX","=","gW",";","float","gY","=","1000.0","*","(","gI","(","gW",")","-","0.005",")",";","float","gZ","=","20.0","*","abs","(","gX","*","a",".","x","+","gY","*","a",".","y",")",";","gS","+=","1.0","-","min","(","gZ",",","1.0",")",";","}","gS","*=","gU",";","}"]}]}}]},{type:"textline",tokens:["void","hg","(","inout","float","ha",",","in","vec2","hb",")","{","float","hc",",","hd",";","hd","=","atan","(","hb",".","y",",","hb",".","x",")",";","hd","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","he","=","cos","(","hd",")",";","float","hf","=","sin","(","hd",")",";","hd","=","(","he","*","hb",".","x","+","hf","*","hb",".","y",")","*","(","he","*","hb",".","y","-","hf","*","hb",".","x",")",";","hc","=","abs","(","hd",")",";","if","(","hc","<","1.0",")","{","hc","=","(","0.01","*","u_halo_size",")","/","(","hc",")",";","ha","*=","sqrt","(","min","(","hc",",","1.0",")",")",";","}","}","void","main","(",")","{","float","hh","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","hi","=","sqrt","(","hh",")",";","hh","=","max","(","1.0","-","hh",",","0.0",")",";","hh","=","pow","(","hh",",","u_halo_hardness",")",";","float","hj","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hk","[","gG","]",";","for","(","int","hl","=","0",";","hl","<","gG",";","hl","++",")","{","hk","[","hl","]","=","fract","(","gF","/","(","float","(","hl",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","hm","=","0.0",";","gR","(","hm",",","hk",",","hi",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hn","=","0.0",";","g_","(","hn",",","hk",",","hh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["hg","(","hh",",","a",")",";"]}]}}]},{type:"textline",tokens:["hh","*=","hj",";","vec3","ho","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["hm","*=","hh",";","ho","+=","u_halo_rings_color","*","hm",";","hh","+=","hm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["hn","*=","hj",";","ho","+=","u_halo_lines_color","*","hn",";","hh","+=","hn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["hh","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","hp","=","u_halo_stars_blend","*","(","gE",".","y","-","u_halo_stars_height",")",";","hh","*=","clamp","(","hp",",","0.0",",","1.0",")",";","hh","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gA","(","ho",")",";","gD","(","ho",",","hh",")",";","gl_FragColor","=","vec4","(","ho",",","hh",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gF",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gE",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","gG","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gF","=","fract","(","gG",".","x","+","gG",".","y","+","gG",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gH","=","z","(","gG",",","u_view_matrix",")",";","mat4","gI","=","u_view_matrix",";","gI","[","3","]","[","0","]","=","0.0",";","gI","[","3","]","[","1","]","=","0.0",";","gI","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gH","=","z","(","gG",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gJ","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","gK","=","gH","*","gJ",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gL","=","u_proj_matrix","*","gI","*","gK",";","gL",".","z","=","0.99999","*","gL",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gE","=","gK",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","gL","=","u_proj_matrix","*","u_view_matrix","*","gK",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gL",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gG","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gG",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kJ",";","varying","vec3","kK",";","varying","vec3","kL",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lz","=","kK",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lA","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","lB","=","kL",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","lB","=","lB",";","else","lB","=","-","lB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lC","=","cross","(","lB",",","kM",".","xyz",")","*","kM",".","w",";","mat3","lD","=","mat3","(","kM",".","xyz",",","lC",",","lB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","lE","=","length","(","cL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lF","=","normalize","(","u_view_matrix_frag","*","vec4","(","kL",",","0.0",")",")",".","st",";","lF","=","lF","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","lE","<","PARALLAX_LOD_DIST",")","{","float","lG","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","lE",")",",","0.0",",","1.0",")",";","float","lH","=","u_parallax_scale","*","lG",";","vec3","lI","=","normalize","(","kJ","*","lD",")",";","float","lJ","=","1.0","/","PARALLAX_STEPS",";","vec2","lK","=","lI",".","xy","*","lH","/","(","PARALLAX_STEPS","*","lI",".","z",")",";","float","lL","=","1.0",";","float","lM",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lN","=","lF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lN","=","lA",";"]}]}}]},{type:"textline",tokens:["lM","=","texture2D","(","u_normalmap0",",","lN",")",".","a",";","for","(","float","lO","=","1.0",";","lO","<=","PARALLAX_STEPS",";","lO","++",")","{","if","(","lM","<","lL",")","{","lL","-=","lJ",";","lN","-=","lK",";","lM","=","texture2D","(","u_normalmap0",",","lN",")",".","a",";","}","}","vec2","lP","=","lN","+","lK",";","float","lQ","=","texture2D","(","u_normalmap0",",","lP",")",".","a","-","(","lL","+","lJ",")",";","float","lR","=","lM","-","lL",";","float","lS","=","lR","/","(","lR","-","lQ",")",";","lN","=","lS","*","lP","+","(","1.0","-","lS",")","*","lN",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lA","+=","lN","-","lF",";"]}]}}]},{type:"textline",tokens:["lF","=","lN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lF","+=","lN","-","lA",";"]}]}}]},{type:"textline",tokens:["lA","=","lN",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lT",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lT","=","texture2D","(","u_normalmap0",",","lF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lT","=","texture2D","(","u_normalmap0",",","lA",")",";"]}]}}]},{type:"textline",tokens:["vec3","lU","=","lT",".","rgb","-","0.5",";","lU","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","lU",",","u_normal_factor",")",";","vec3","lV","=","lD","*","lU",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lV","=","lB",";"]}]}}]},{type:"textline",tokens:["lV","=","normalize","(","lV",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lF","=","normalize","(","u_view_matrix_frag","*","vec4","(","lV",",","0.0",")",")",".","st",";","lF","=","lF","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["vec3","lW","=","normalize","(","kJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lX","=","kN",";","gy","(","lX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lY","=","vec4","(","lX",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lY","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","lZ","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","l_","=","texture2D","(","u_colormap0",",","lF",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","l_","=","texture2D","(","u_colormap0",",","lA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["gy","(","l_",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","ma",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["ma","=","texture2D","(","u_colormap1",",","lF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ma","=","texture2D","(","u_colormap1",",","lA",")",";"]}]}}]},{type:"textline",tokens:["gy","(","ma",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","mb","=","texture2D","(","u_stencil0",",","lF",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","mb","=","texture2D","(","u_stencil0",",","lA",")",";"]}]}}]},{type:"textline",tokens:["l_","=","mix","(","l_",",","ma",",","mb",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["lY",".","rgb","=","mix","(","lY",".","rgb",",","l_",".","rgb",",","u_diffuse_color_factor",")",";","float","mc","=","u_alpha_factor","*","l_",".","a",";","mc","+=","(","1.0","-","step","(","0.0",",","mc",")",")",";","lY",".","a","=","mix","(","mc",",","1.0",",","u_diffuse_color",".","a",")",";","lZ","=","l_",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["lY",".","rgb","*=","mix","(","vec3","(","1.0",")",",","l_",".","rgb",",","u_diffuse_color_factor",")",";","lY",".","a","=","l_",".","a",";","lZ","=","l_",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","md","=","u_diffuse_intensity","*","lY",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","me","=","md",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mf","=","0.5","*","lV",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lV",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","mf",")",";"]}]}}]},{type:"textline",tokens:["vec3","mh","=","u_ambient","*","mg",";","float","mi","=","fs","(","md",")",";","vec3","mj","=","u_emit","*","lY",".","rgb",";","vec3","mk","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ml","=","vec3","(","lZ",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ml","=","texture2D","(","u_specmap0",",","lF",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ml","=","texture2D","(","u_specmap0",",","lA",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["gy","(","ml",".","rgb",")",";","mk","=","mix","(","mk",",","ml",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","mm","=","u_specular_params","[","0","]",";","vec2","mn","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","mo","=","mm","*","mk",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["hx","mp","=","kh","(","mj",",","mh",",","md",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hx","mp","=","kc","(","mj",",","mh",",","md",",","mo",",","kK",",","lV",",","lW",",","mn",",","u_diffuse_params",",","mi",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vec3","me","=","mp",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","mq","=","u_reflect_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mq","=","0.0",";"]}]}}]},{type:"textline",tokens:["lk","(","me",",","lW",",","lV",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","mq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["me","+=","mp",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","max","(","me","-","sqrt","(","0.01","*","-","min","(","lz",",","0.0",")",")",",","0.5","*","me",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kI","(","me",",","lz",",","u_time",",","mi",",","lV",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","kK",",","lE",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","mr","=","lY",".","a",";","if","(","mr","<=","0.5",")","discard",";","mr","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mr","=","lY",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["mr","+=","mp",".","a",".","a","*","mo",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mr","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","mix","(","ly","(","cK",",","lV",".","xz","*","u_refr_bump",")",",","me",",","mr",")",";","mr","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","ms","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mt","=","gS","(","u_cube_fog",",","lW",")",";","vec4","mu","=","vec4","(","mt",",","u_fog_color_density",".","a",")",";","gy","(","mu",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","mu","=","u_fog_color_density",";","mu",".","rgb","*=","ms",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["hk","(","me",",","lE",",","lW",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","mu",",","lz",",","ms",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gL","(","me",",","lE",",","mu",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","vec3","(","dT",".","a",")",";"]}]}}]},{type:"textline",tokens:["gA","(","me",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","me",",","mr",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","me",",","mr",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kJ",";","varying","vec3","kK",";","varying","vec3","kL",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kO",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","lz","=","a_position",";","vec3","lA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lB","=","vec3","(","a_tangent",")",";","vec3","lC","=","a_tangent","[","3","]","*","cross","(","lA",",","lB",")",";"]}]}},{type:"elif",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lD","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","lE","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vec3","lF","=","lD","-","u_camera_eye",";","vec3","lC","=","cross","(","lF",",","lE",")",";","vec3","lB","=","cross","(","lE",",","lC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lB","=","vec3","(","0.0",")",";","vec3","lC","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["lz","=","mix","(","lz",",","a_position_next",",","u_va_frame_factor",")",";","lA","=","mix","(","lA",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lG","=","vec3","(","a_tangent",")",";","vec3","lH","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","lG",")",";","lB","=","mix","(","lB",",","lG",",","u_va_frame_factor",")",";","lC","=","mix","(","lC",",","lH",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bt","(","lz",",","lB",",","lC",",","lA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lI","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lI","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","lJ","=","gh","(","lz",",","lB",",","lC",",","lA",",","lI",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lK","=","(","u_model_matrix","*","vec4","(","lI",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","lL","=","ag","(","u_camera_eye",",","lK",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","lL","=","aa","(","u_camera_eye",",","lK",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lM","=","(","u_model_matrix","*","vec4","(","lI",",","1.0",")",")",".","xyz",";","lL","=","lL","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lM",")",";"]}]}}]},{type:"textline",tokens:["d","lJ","=","an","(","lz","-","lI",",","lI",",","lB",",","lC",",","lA",",","lL",")",";","lJ",".","b","=","lK",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","lJ","=","an","(","lz",",","lI",",","lB",",","lC",",","lA",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["float","lN","=","(","dot","(","cross","(","lJ",".","e",",","lJ",".","c",")",",","lJ",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","kM","=","vec4","(","lJ",".","c",",","lN",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ck","(","lJ",".","a",",","lJ",".","b",",","lA",")",";"]}]}}]},{type:"textline",tokens:["kK","=","lJ",".","a",";","kL","=","lJ",".","e",";","kJ","=","u_camera_eye","-","lJ",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aq","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kN","=","lJ",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kN","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","lO","=","u_view_matrix","*","vec4","(","lJ",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cL","=","lO",";"]}]}}]},{type:"textline",tokens:["vec4","lP","=","u_proj_matrix","*","lO",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["lP",".","xy","+=","u_subpixel_jitter","*","lP",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","lP",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","lJ",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lQ","=","lP",".","x",";","float","lR","=","lP",".","y",";","float","lS","=","lP",".","w",";","cK",".","x","=","(","lQ","+","lS",")","/","2.0",";","cK",".","y","=","(","lR","+","lS",")","/","2.0",";","cK",".","z","=","lS",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kO","=","-","lO",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lP",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kK",";","varying","vec4","cL",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kO",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","lz","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","lA","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","lE","(","in","vec3","lB",",","in","float","lC",")","{","vec3","lD","=","lz",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["lD","=","ly","(","cK",",","lB",".","xz","*","lC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lD","=","texture2D","(","u_refractmap",",","cK",".","xy","/","cK",".","z",")",".","rgb",";","gy","(","lD",")",";"]}]}}]},{type:"textline",tokens:["return","lD",";","}"]}]}}]},{type:"textline",tokens:["vec3","lH","(","float","lF",",","vec3","lG",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","lG",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","mix","(","u_horizon_color",",","u_zenith_color",",","lF",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lO","(","vec3","lI",")","{","vec4","lJ","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","vec4","lK","=","mix","(","vec4","(","lI",".","bg",",","lJ",".","wz",")",",","vec4","(","lI",".","gb",",","lJ",".","xy",")",",","step","(","lI",".","b",",","lI",".","g",")",")",";","vec4","lL","=","mix","(","vec4","(","lK",".","xyw",",","lI",".","r",")",",","vec4","(","lI",".","r",",","lK",".","yzx",")",",","step","(","lK",".","x",",","lI",".","r",")",")",";","float","lM","=","lL",".","x","-","min","(","lL",".","w",",","lL",".","y",")",";","float","lN","=","1.0e-10",";","return","vec3","(","abs","(","lL",".","z","+","(","lL",".","w","-","lL",".","y",")","/","(","6.0","*","lM","+","lN",")",")",",","lM","/","(","lL",".","x","+","lN",")",",","lL",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lS","(","vec3","lP",")","{","vec4","lQ","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","vec3","lR","=","abs","(","fract","(","vec3","(","lP",".","r",",","lP",".","r",",","lP",".","r",")","+","lQ",".","xyz",")","*","6.0","-","lQ",".","www",")",";","return","lP",".","b","*","mix","(","lQ",".","xxx",",","clamp","(","lR","-","lQ",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","lP",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lU","(","vec2","lT",")","{","return","vec3","(","lT","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_TEXTURE_NORMAL4","||","USE_NODE_TEXTURE_COLOR4","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lW","(","vec3","lV",")","{","return","vec2","(","lV",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"mB",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"mC",qualifier:["float"],is_optional:true},{type:"node_out",name:"mD",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mB"],statements:[{type:"textline",tokens:["mB","=","normalize","(","mr",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mC"],statements:[{type:"textline",tokens:["mC","=","abs","(","mr",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mD"],statements:[{type:"textline",tokens:["mD","=","length","(","mr",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"mE",qualifier:["float"],is_optional:false},{type:"node_in",name:"mF",qualifier:["float"],is_optional:false},{type:"node_in",name:"mG",qualifier:["float"],is_optional:false},{type:"node_out",name:"mH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mH","=","vec3","(","mE",",","mF",",","mG",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"mI",qualifier:["float"],is_optional:false},{type:"node_in",name:"mJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"mK",qualifier:["float"],is_optional:false},{type:"node_out",name:"mL",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mL","=","lS","(","vec3","(","mI",",","mJ",",","mK",")",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"mM",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"lX",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mM","=","lU","(","lX",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"mN",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"lY",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["mN","=","lY",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"mO",qualifier:["float"],is_optional:false},{type:"node_param",name:"lZ",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["mO","=","lZ",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"mP",qualifier:["float"],is_optional:false},{type:"node_out",name:"mQ",qualifier:["float"],is_optional:false},{type:"node_param",name:"l_",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mP","=","l_","[","0","]",";","mQ","=","l_","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"mR",qualifier:["float"],is_optional:false},{type:"node_out",name:"mS",qualifier:["float"],is_optional:false},{type:"node_out",name:"mT",qualifier:["float"],is_optional:false},{type:"node_param",name:"ma",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["mR","=","ma","[","0","]",";","mS","=","ma","[","1","]",";","mT","=","ma","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"mU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mU","=","mk",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"mV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mV","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"mW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mW","=","mp",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"mX",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mX","=","vec3","(","mq",".","r",",","-","mq",".","b",",","mq",".","g",")",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"mY",qualifier:["float"],is_optional:false},{type:"node_in",name:"mZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"m_",qualifier:["float"],is_optional:false},{type:"node_in",name:"na",qualifier:["float"],is_optional:false},{type:"node_in",name:"nb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","vec3","nd","=","lO","(","nb",")",";","nd","[","0","]","+=","(","mY","-","0.5",")",";","if","(","nd","[","0","]",">","UNITY_VALUE_NODES",")","nd","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","nd","[","0","]","<","ZERO_VALUE_NODES",")","nd","[","0","]","+=","UNITY_VALUE_NODES",";","nd","*=","vec3","(","UNITY_VALUE_NODES",",","mZ",",","m_",")",";","nd","=","mix","(","lA",",","mix","(","lz",",","nd",",","step","(","lz",",","nd",")",")",",","step","(","nd",",","lA",")",")",";","nc","=","mix","(","nb",",","lS","(","nd",")",",","na",")",";","}"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"ne",qualifier:["float"],is_optional:false},{type:"node_in",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ng",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ng","=","mix","(","nf",",","lA","-","nf",",","ne",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"nh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ni",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nj",qualifier:["float"],is_optional:false},{type:"node_out",name:"nk",qualifier:["float"],is_optional:false},{type:"node_param",name:"mb",qualifier:["const","float"]}],statements:[{type:"textline",tokens:["{","const","int","nl","=","int","(","mb",")",";","nh","=","u_lamp_light_color_intensities","[","nl","]",";","vec4","nm","=","u_lamp_light_factors","[","nl","]",";","vec3","nn","=","u_lamp_light_directions","[","nl","]",";","vec3","no","=","u_lamp_light_positions","[","nl","]",";","float","np","=","nm",".","z",";","if","(","np","!=","-","UNITY_VALUE_NODES",")","{","ni","=","no","-","kK",";","nj","=","length","(","ni",")",";","ni","=","normalize","(","ni",")",";","nk","=","np","/","(","np","+","nj","*","nj",")",";","float","nq","=","nm",".","x",";","float","nr","=","nm",".","y",";","if","(","nq",">","-","UNITY_VALUE_NODES",")","{","float","ns","=","dot","(","ni",",","nn",")",";","ns","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","ns","-","nq",")","/","nr",")",";","nk","*=","ns",";","}","}","else","{","ni","=","nn",";","nj","=","length","(","no","-","kK",")",";","nk","=","UNITY_VALUE_NODES",";","}","}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"nt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nu",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nv",qualifier:["float"],is_optional:true},{type:"node_param",name:"mc",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nu"],statements:[{type:"textline",tokens:["nu","=","mc",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nv"],statements:[{type:"textline",tokens:["nv","=","-","dot","(","nt",",","mc",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"nw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nx","=","-","(","u_view_matrix_frag","*","vec4","(","nw",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"ny",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nz","=","ny",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["nz","=","(","MAPPING_TRS_MATRIX","*","vec4","(","nz",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["nz","=","nz","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["nz","=","nz","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["nz","=","max","(","nz",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["nz","=","min","(","nz",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["nz","=","normalize","(","nz",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"nA",qualifier:["float"],is_optional:false},{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_out",name:"nC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nC","=","nA","+","nB",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nC","=","clamp","(","nC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"nD",qualifier:["float"],is_optional:false},{type:"node_in",name:"nE",qualifier:["float"],is_optional:false},{type:"node_out",name:"nF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nF","=","nD","-","nE",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nF","=","clamp","(","nF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"nG",qualifier:["float"],is_optional:false},{type:"node_in",name:"nH",qualifier:["float"],is_optional:false},{type:"node_out",name:"nI",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nI","=","nG","*","nH",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nI","=","clamp","(","nI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"nJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nK",qualifier:["float"],is_optional:false},{type:"node_out",name:"nL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nL","=","(","nK","!=","ZERO_VALUE_NODES",")","?","nJ","/","nK",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nL","=","clamp","(","nL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"nM",qualifier:["float"],is_optional:false},{type:"node_in",name:"nN",qualifier:["float"],is_optional:false},{type:"node_out",name:"nO",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nO","=","sin","(","nM",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nO","=","clamp","(","nO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nN",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"nP",qualifier:["float"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"nR",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nR","=","cos","(","nP",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nR","=","clamp","(","nR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nQ",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"nS",qualifier:["float"],is_optional:false},{type:"node_in",name:"nT",qualifier:["float"],is_optional:false},{type:"node_out",name:"nU",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nU","=","tan","(","nS",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nU","=","clamp","(","nU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nT",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"nV",qualifier:["float"],is_optional:false},{type:"node_in",name:"nW",qualifier:["float"],is_optional:false},{type:"node_out",name:"nX",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nX","=","(","nV","<=","UNITY_VALUE_NODES","&&","nV",">=","-","UNITY_VALUE_NODES",")","?","asin","(","nV",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nX","=","clamp","(","nX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nW",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"nY",qualifier:["float"],is_optional:false},{type:"node_in",name:"nZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"n_",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["n_","=","(","nY","<=","UNITY_VALUE_NODES","&&","nY",">=","-","UNITY_VALUE_NODES",")","?","acos","(","nY",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["n_","=","clamp","(","n_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nZ",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"oa",qualifier:["float"],is_optional:false},{type:"node_in",name:"ob",qualifier:["float"],is_optional:false},{type:"node_out",name:"oc",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oc","=","atan","(","oa",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oc","=","clamp","(","oc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["ob",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"od",qualifier:["float"],is_optional:false},{type:"node_in",name:"oe",qualifier:["float"],is_optional:false},{type:"node_out",name:"of",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","od","<","ZERO_VALUE_NODES","||","od","==","ZERO_VALUE_NODES","&&","oe","==","ZERO_VALUE_NODES",")","of","=","ZERO_VALUE_NODES",";","else","of","=","pow","(","od",",","oe",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["of","=","clamp","(","of",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"og",qualifier:["float"],is_optional:false},{type:"node_in",name:"oh",qualifier:["float"],is_optional:false},{type:"node_out",name:"oi",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oi","=","(","og",">","ZERO_VALUE_NODES","&&","oh",">","ZERO_VALUE_NODES",")","?","log2","(","og",")","/","log2","(","oh",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oi","=","clamp","(","oi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"oj",qualifier:["float"],is_optional:false},{type:"node_in",name:"ok",qualifier:["float"],is_optional:false},{type:"node_out",name:"ol",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ol","=","min","(","oj",",","ok",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ol","=","clamp","(","ol",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"om",qualifier:["float"],is_optional:false},{type:"node_in",name:"on",qualifier:["float"],is_optional:false},{type:"node_out",name:"oo",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oo","=","max","(","om",",","on",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oo","=","clamp","(","oo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"op",qualifier:["float"],is_optional:false},{type:"node_in",name:"oq",qualifier:["float"],is_optional:false},{type:"node_out",name:"or",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["or","=","floor","(","op","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["or","=","clamp","(","or",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oq",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"os",qualifier:["float"],is_optional:false},{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_out",name:"ou",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ou","=","(","os","<","ot",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ou","=","clamp","(","ou",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ov",qualifier:["float"],is_optional:false},{type:"node_in",name:"ow",qualifier:["float"],is_optional:false},{type:"node_out",name:"ox",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ox","=","(","ov",">","ow",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ox","=","clamp","(","ox",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"oy",qualifier:["float"],is_optional:false},{type:"node_in",name:"oz",qualifier:["float"],is_optional:false},{type:"node_out",name:"oA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oA","=","abs","(","oz",")",">","0.000001","?","mod","(","oy",",","oz",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oA","=","clamp","(","oA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"oB",qualifier:["float"],is_optional:false},{type:"node_in",name:"oC",qualifier:["float"],is_optional:false},{type:"node_out",name:"oD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oD","=","abs","(","oB",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oD","=","clamp","(","oD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oC",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"oE",qualifier:["float"],is_optional:false},{type:"node_in",name:"oF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oI","=","clamp","(","oE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oH","=","mix","(","oF",",","oG",",","oI",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oH","=","clamp","(","oH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"oJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"oK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oN","=","clamp","(","oJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oM","=","mix","(","oK",",","oK","+","oL",",","oN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oM","=","clamp","(","oM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"oO",qualifier:["float"],is_optional:false},{type:"node_in",name:"oP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oS","=","clamp","(","oO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oR","=","mix","(","oP",",","oP","*","oQ",",","oS",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oR","=","clamp","(","oR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"oT",qualifier:["float"],is_optional:false},{type:"node_in",name:"oU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oX","=","clamp","(","oT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oW","=","mix","(","oU",",","oU","-","oV",",","oX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oW","=","clamp","(","oW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"oY",qualifier:["float"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"o_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pa",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pb","=","clamp","(","oY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pc","=","UNITY_VALUE_NODES","-","pb",";","pa","=","lA","-","(","vec3","(","pc",")","+","pb","*","(","lA","-","o_",")",")","*","(","lA","-","oZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pa","=","clamp","(","pa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"pd",qualifier:["float"],is_optional:false},{type:"node_in",name:"pe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pg",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","ph","=","clamp","(","pd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pi","=","UNITY_VALUE_NODES","-","ph",";","pf","+=","step","(","pf",",","lz",")",";","pg","=","pi","*","pe","+","ph","*","pe","/","pf",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pg","=","clamp","(","pg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"pj",qualifier:["float"],is_optional:false},{type:"node_in",name:"pk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pn","=","clamp","(","pj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pm","=","mix","(","pk",",","abs","(","pk","-","pl",")",",","pn",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pm","=","clamp","(","pm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"po",qualifier:["float"],is_optional:false},{type:"node_in",name:"pp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","ps","=","clamp","(","po",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pr","=","min","(","pp",".","rgb",",","pq",".","rgb","*","ps",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pr","=","clamp","(","pr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"pt",qualifier:["float"],is_optional:false},{type:"node_in",name:"pu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pw",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","px","=","clamp","(","pt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pw","=","max","(","pu",".","rgb",",","pv",".","rgb","*","px",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pw","=","clamp","(","pw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"py",qualifier:["float"],is_optional:false},{type:"node_in",name:"pz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pC","=","clamp","(","py",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pD","=","vec3","(","UNITY_VALUE_NODES","-","pC",")",";","pB","=","mix","(","pz","*","(","pD","+","2.0","*","pC","*","pA",")",",","lA","-","(","pD","+","2.0","*","pC","*","(","lA","-","pA",")",")","*","(","lA","-","pz",")",",","step","(","0.5",",","pz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pB","=","clamp","(","pB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"pE",qualifier:["float"],is_optional:false},{type:"node_in",name:"pF",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pG",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pH",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pI","=","clamp","(","pE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pJ","=","lA","-","pI","*","pG",";","vec3","pK","=","clamp","(","pF","/","pJ",",","0.0",",","1.0",")",";","pH","=","mix","(","mix","(","pK",",","lA",",","step","(","pJ",",","lz",")",")",",","pF",",","step","(","pF",",","lz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pH","=","clamp","(","pH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"pL",qualifier:["float"],is_optional:false},{type:"node_in",name:"pM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pP","=","clamp","(","pL",",","0.0",",","1.0",")",";","vec3","pQ","=","vec3","(","1.0","-","pP",")",";","vec3","pR","=","pQ","+","pP","*","pN",";","vec3","pS","=","clamp","(","lA","-","(","lA","-","pM",")","/","pR",",","0.0",",","1.0",")",";","pO","=","mix","(","pS",",","lz",",","step","(","pR",",","lz",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pO","=","clamp","(","pO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"pT",qualifier:["float"],is_optional:false},{type:"node_in",name:"pU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pW",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pX","=","clamp","(","pT",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pY",",","pZ",",","p_",";","pW","=","pU",";","pZ","=","lO","(","pV",")",";","if","(","pZ",".","y","!=","ZERO_VALUE_NODES",")","{","pY","=","lO","(","pW",")",";","pY",".","x","=","pZ",".","x",";","p_","=","lS","(","pY",")",";","pW","=","mix","(","pW",",","p_",",","pX",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pW","=","clamp","(","pW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"qa",qualifier:["float"],is_optional:false},{type:"node_in",name:"qb",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qc",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qd",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qe","=","clamp","(","qa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qf","=","UNITY_VALUE_NODES","-","qe",";","qd","=","qb",";","vec3","qg",",","qh",";","qg","=","lO","(","qd",")",";","if","(","qg",".","y","!=","ZERO_VALUE_NODES",")","{","qh","=","lO","(","qc",")",";","qg",".","y","=","qf","*","qg",".","y","+","qe","*","qh",".","y",";","qd","=","lS","(","qg",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qd","=","clamp","(","qd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"qi",qualifier:["float"],is_optional:false},{type:"node_in",name:"qj",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ql",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qm","=","clamp","(","qi",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qn","=","UNITY_VALUE_NODES","-","qm",";","vec3","qo",",","qp",";","qo","=","lO","(","qj",")",";","qp","=","lO","(","qk",")",";","qo",".","z","=","qn","*","qo",".","z","+","qm","*","qp",".","z",";","ql","=","lS","(","qo",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ql","=","clamp","(","ql",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"qq",qualifier:["float"],is_optional:false},{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qt",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qu","=","clamp","(","qq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qv",",","qw",",","qx",";","qt","=","qr",";","qw","=","lO","(","qs",")",";","if","(","qw",".","y","!=","ZERO_VALUE_NODES",")","{","qv","=","lO","(","qt",")",";","qv",".","x","=","qw",".","x",";","qv",".","y","=","qw",".","y",";","qx","=","lS","(","qv",")",";","qt","=","mix","(","qt",",","qx",",","qu",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qt","=","clamp","(","qt",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"qy",qualifier:["float"],is_optional:false},{type:"node_in",name:"qz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qB",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qC","=","clamp","(","qy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qD","=","UNITY_VALUE_NODES","-","qC",";","vec3","qE","=","qA","+","qz","-","qA","*","qz",";","qB","=","qz","*","(","vec3","(","qD",")","+","vec3","(","qC",")","*","(","(","lA","-","qz",")","*","qA","+","qE",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qB","=","clamp","(","qB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"qF",qualifier:["float"],is_optional:false},{type:"node_in",name:"qG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qJ","=","clamp","(","qF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qI","=","qG","+","qJ","*","(","2.0","*","qH","-","lA",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qI","=","clamp","(","qI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"qK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qL",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mv","=","qK",";","mA","=","qL",";"]}]},{type:"node",name:"MATERIAL",declarations:[{type:"node_in",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qN",qualifier:["float"],is_optional:false},{type:"node_in",name:"qO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qP",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qQ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qR",qualifier:["float"],is_optional:true},{type:"node_out",name:"qS",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"md",qualifier:["const","vec2"]},{type:"node_param",name:"me",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["{","vec3","qT","=","clamp","(","qM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qU","=","me","[","0","]","*","clamp","(","qO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["vec3","qV","=","normalize","(","qP",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vec3","qV","=","mk",";"]}]}]},{type:"textline",tokens:["hx","qW",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT"],statements:[{type:"textline",tokens:["vec3","qX","=","ms","*","qT",";","float","qY","=","0.5","*","qV",".","y","+","0.5",";","vec3","qZ","=","mu","*","u_environment_energy","*","lH","(","qY",",","qV",")",";","float","q_","=","fs","(","qT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["vec2","ra","=","vec2","(","md","[","0","]",",","md","[","1","]",")",";","vec2","rb","=","vec2","(","me","[","1","]",",","me","[","2","]",")",";","qW","=","kc","(","qX",",","qZ",",","qT",",","qU",",","mq",",","qV",",","mp",",","rb",",","ra",",","q_",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qW","=","kh","(","qX",",","qZ",",","qT",")",";"]}]}]},{type:"textline",tokens:["mz","=","q_",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qW",".","a","=","vec4","(","qT",",","ZERO_VALUE_NODES",")",";","qW",".","b","=","lz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qQ"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["qQ","=","qW",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qQ","=","lz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["qQ","+=","qW",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qR"],statements:[{type:"textline",tokens:["qR","=","clamp","(","qN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["qR","+=","qW",".","a",".","a","*","qU",".","r","*","mt",";","qR","=","clamp","(","qR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qS"],statements:[{type:"textline",tokens:["qS","=","qV",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["mw","=","qW",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mw","=","lz",";"]}]}]},{type:"textline",tokens:["mx","=","qV",";","}"]}]},{type:"node",name:"MATERIAL_EXT",declarations:[{type:"node_in",name:"rc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rd",qualifier:["float"],is_optional:false},{type:"node_in",name:"re",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rf",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"rg",qualifier:["float"],is_optional:false},{type:"node_in",name:"rh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ri",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"rj",qualifier:["float"],is_optional:false},{type:"node_in",name:"rk",qualifier:["float"],is_optional:false},{type:"node_out",name:"rl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rm",qualifier:["float"],is_optional:true},{type:"node_out",name:"rn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ro",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rp",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"mf",qualifier:["const","vec2"]},{type:"node_param",name:"mg",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["{","vec3","rq","=","clamp","(","rc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","rr","=","mg","[","0","]","*","clamp","(","re",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["vec3","rs","=","normalize","(","rf",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vec3","rs","=","mk",";"]}]}]},{type:"textline",tokens:["hx","rt",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT"],statements:[{type:"textline",tokens:["float","ru","=","fs","(","rq",")",";","vec3","rv","=","rg","*","rq",";","float","rw","=","0.5","*","rs",".","y","+","0.5",";","vec3","rx","=","mu","*","u_environment_energy","*","lH","(","rw",",","rs",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["vec2","ry","=","vec2","(","mf","[","0","]",",","mf","[","1","]",")",";","vec2","rz","=","vec2","(","mg","[","1","]",",","mg","[","2","]",")",";","rt","=","kc","(","rv",",","rx",",","rq",",","rr",",","mq",",","rs",",","mp",",","rz",",","ry",",","ru",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","rh",",","ri",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["rt","=","kh","(","rv",",","rx",",","rq",")",";"]}]}]},{type:"textline",tokens:["mz","=","ru",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["rt",".","a","=","vec4","(","rq",",","ZERO_VALUE_NODES",")",";","rt",".","b","=","lz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rl"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["rl","=","rt",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["rl","=","lz",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],statements:[{type:"textline",tokens:["lk","(","rl",",","mp",",","rs",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","rj",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["rl","+=","rt",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rm"],statements:[{type:"textline",tokens:["rm","=","clamp","(","rd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["rm","+=","rt",".","a",".","a","*","rr",".","r","*","rk",";","rm","=","clamp","(","rm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rn"],statements:[{type:"textline",tokens:["rn","=","rs",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ro"],statements:[{type:"textline",tokens:["ro","=","rt",".","a",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rp"],statements:[{type:"textline",tokens:["rp","=","rt",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["mw","=","rt",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mw","=","lz",";"]}]}]},{type:"textline",tokens:["mx","=","rs",";","}"]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"rA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rA","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"rB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rC",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rC","=","rB",".","r","*","0.35","+","rB",".","g","*","0.45","+","rB",".","b","*","0.2",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"rD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rE",qualifier:["float"],is_optional:true},{type:"node_out",name:"rF",qualifier:["float"],is_optional:true},{type:"node_out",name:"rG",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rE"],statements:[{type:"textline",tokens:["rE","=","rD",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rF"],statements:[{type:"textline",tokens:["rF","=","rD",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rG"],statements:[{type:"textline",tokens:["rG","=","rD",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"rH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rI",qualifier:["float"],is_optional:true},{type:"node_out",name:"rJ",qualifier:["float"],is_optional:true},{type:"node_out",name:"rK",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["{","vec3","rL","=","lO","(","rH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rI"],statements:[{type:"textline",tokens:["rI","=","rL",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rJ"],statements:[{type:"textline",tokens:["rJ","=","rL",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rK"],statements:[{type:"textline",tokens:["rK","=","rL",".","b",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"rM",qualifier:["float"],is_optional:false},{type:"node_in",name:"rN",qualifier:["float"],is_optional:false},{type:"node_in",name:"rO",qualifier:["float"],is_optional:false},{type:"node_out",name:"rP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rP","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","rM","-","rO",")","*","rN",")",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"rQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rR","=","max","(","lz",",","rQ",")",";","rR","=","pow","(","rR",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"rS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rT",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rT","=","max","(","lz",",","rS",")",";","rT","=","pow","(","rT",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"rU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["{","rW","=","rU","[","0","]","=","rU","[","1","]","=","rU","[","2","]","=","rV","[","0","]","=","rV","[","1","]","=","rV","[","2","]","=","0.0",";","}"]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"rX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rZ",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","r_","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","lW","(","rX",")",")",";","rY","=","r_",".","xyz",";","gy","(","rY",")",";","rZ","=","r_",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"sa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sc",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sd","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","lW","(","sa",")",")",";","my","=","sd",".","xyz","-","0.5",";","sb","=","normalize","(","mn","*","my",")",";","sc","=","sd",".","w",";","}"]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"se",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sf",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"sg",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["{","vec4","sh","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","se",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sf"],statements:[{type:"textline",tokens:["sf","=","sh",".","xyz",";","gy","(","sf",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sg"],statements:[{type:"textline",tokens:["sg","=","sh",".","w",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"TEXTURE_COLOR2",declarations:[{type:"node_in",name:"si",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sl",qualifier:["float"],is_optional:false},{type:"node_out",name:"sm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sn",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","so","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lW","(","si",")",")",";","sk","=","so",".","xyz",";","gy","(","sk",")",";","sl","=","so",".","w",";","so","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lW","(","sj",")",")",";","sm","=","so",".","xyz",";","gy","(","sm",")",";","sn","=","so",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL2",declarations:[{type:"node_in",name:"sp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ss",qualifier:["float"],is_optional:false},{type:"node_out",name:"st",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"su",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sv","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lW","(","sp",")",")",";","my","=","sv",".","xyz","-","0.5",";","sr","=","normalize","(","mn","*","my",")",";","ss","=","sv",".","w",";","sv","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lW","(","sq",")",")",";","my","=","sv",".","xyz","-","0.5",";","st","=","normalize","(","mn","*","my",")",";","su","=","sv",".","w",";","}"]}]},{type:"node",name:"TEXTURE_COLOR3",declarations:[{type:"node_in",name:"sw",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sA",qualifier:["float"],is_optional:false},{type:"node_out",name:"sB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sC",qualifier:["float"],is_optional:false},{type:"node_out",name:"sD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sE",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sF","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lW","(","sw",")",")",";","sz","=","sF",".","xyz",";","gy","(","sz",")",";","sA","=","sF",".","w",";","sF","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lW","(","sx",")",")",";","sB","=","sF",".","xyz",";","gy","(","sB",")",";","sC","=","sF",".","w",";","sF","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lW","(","sy",")",")",";","sD","=","sF",".","xyz",";","gy","(","sD",")",";","sE","=","sF",".","w",";","}"]}]},{type:"node",name:"TEXTURE_COLOR4",declarations:[{type:"node_in",name:"sG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sK",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sL",qualifier:["float"],is_optional:false},{type:"node_out",name:"sM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sN",qualifier:["float"],is_optional:false},{type:"node_out",name:"sO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sP",qualifier:["float"],is_optional:false},{type:"node_out",name:"sQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sR",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR4_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sS","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lW","(","sG",")",")",";","sK","=","sS",".","xyz",";","gy","(","sK",")",";","sL","=","sS",".","w",";","sS","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lW","(","sH",")",")",";","sM","=","sS",".","xyz",";","gy","(","sM",")",";","sN","=","sS",".","w",";","sS","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lW","(","sI",")",")",";","sO","=","sS",".","xyz",";","gy","(","sO",")",";","sP","=","sS",".","w",";","sS","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lW","(","sJ",")",")",";","sQ","=","sS",".","xyz",";","gy","(","sQ",")",";","sR","=","sS",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL3",declarations:[{type:"node_in",name:"sT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sU",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sX",qualifier:["float"],is_optional:false},{type:"node_out",name:"sY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"s_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ta",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","tb","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lW","(","sT",")",")",";","my","=","tb",".","xyz","-","0.5",";","sW","=","normalize","(","mn","*","my",")",";","sX","=","tb",".","w",";","tb","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lW","(","sU",")",")",";","my","=","tb",".","xyz","-","0.5",";","sY","=","normalize","(","mn","*","my",")",";","sZ","=","tb",".","w",";","tb","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lW","(","sV",")",")",";","my","=","tb",".","xyz","-","0.5",";","s_","=","normalize","(","mn","*","my",")",";","ta","=","tb",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL4",declarations:[{type:"node_in",name:"tc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"td",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"te",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tg",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"th",qualifier:["float"],is_optional:false},{type:"node_out",name:"ti",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tj",qualifier:["float"],is_optional:false},{type:"node_out",name:"tk",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tl",qualifier:["float"],is_optional:false},{type:"node_out",name:"tm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tn",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL4_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","to","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lW","(","tc",")",")",";","my","=","to",".","xyz","-","0.5",";","tg","=","normalize","(","mn","*","my",")",";","th","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lW","(","td",")",")",";","my","=","to",".","xyz","-","0.5",";","ti","=","normalize","(","mn","*","my",")",";","tj","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lW","(","te",")",")",";","my","=","to",".","xyz","-","0.5",";","tk","=","normalize","(","mn","*","my",")",";","tl","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lW","(","tf",")",")",";","my","=","to",".","xyz","-","0.5",";","tm","=","normalize","(","mn","*","my",")",";","tn","=","to",".","w",";","}"]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"tp",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["tp","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"tq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ts",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tt",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["ts","=","tq","+","tr",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tt"],statements:[{type:"textline",tokens:["tt","=","(","abs","(","ts","[","0","]",")","+","abs","(","ts","[","1","]",")","+","abs","(","ts","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"tu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tx",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tw","=","tu","-","tv",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tx"],statements:[{type:"textline",tokens:["tx","=","(","abs","(","tw","[","0","]",")","+","abs","(","tw","[","1","]",")","+","abs","(","tw","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"ty",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tB",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tA","=","ty","+","tz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tB"],statements:[{type:"textline",tokens:["tB","=","length","(","tA",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tA"],statements:[{type:"textline",tokens:["tA","=","normalize","(","tA",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"tC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tF",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tE","=","lz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tF"],statements:[{type:"textline",tokens:["tF","=","dot","(","tC",",","tD",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"tG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tJ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tI","=","cross","(","tG",",","tH",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tJ"],statements:[{type:"textline",tokens:["tJ","=","length","(","tI",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"tK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tN",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tM","=","normalize","(","tK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tN"],statements:[{type:"textline",tokens:["tN","=","length","(","tK",")",";"]}]}]},{type:"textline",tokens:["tL",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"tO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tQ","=","reflect","(","-","tO",",","tP",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"tR",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tS",qualifier:["float"],is_optional:false},{type:"node_in",name:"tT",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"tU",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"tV",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","float","tW","=","length","(","mr",")",";","if","(","tW","<","tU",")","{","vec2","tX","=","lW","(","tR",")",";","float","tY","=","clamp","(","0.5","*","(","tU","-","tW",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","tZ","=","tS","*","tY",";","vec3","t_","=","normalize","(","mp","*","mn",")",";","float","ua","=","UNITY_VALUE_NODES","/","tT",";","vec2","ub","=","t_",".","xy","*","tZ","/","(","tT","*","t_",".","z",")",";","float","uc","=","UNITY_VALUE_NODES",";","float","ud","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","tX",")",".","a",";","for","(","float","ue","=","1.0",";","ue","<=","tT",";","ue","++",")","{","if","(","ud","<","uc",")","{","uc","-=","ua",";","tX","-=","ub",";","ud","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","tX",")",".","a",";","}","}","vec2","uf","=","tX","+","ub",";","float","ug","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","uf",")",".","a","-","(","uc","+","ua",")",";","float","uh","=","ud","-","uc",";","float","ui","=","uh","/","(","uh","-","ug",")",";","tX","=","ui","*","uf","+","(","UNITY_VALUE_NODES","-","ui",")","*","tX",";","tV","=","lU","(","tX",")",";","}","else","tV","=","tR",";","}"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"uj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"uk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["uk","=","clamp","(","uj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"ul",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"um",qualifier:["float"],is_optional:false},{type:"node_out",name:"un",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["un","=","lE","(","ul",",","um",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"uo",qualifier:["float"],is_optional:false},{type:"node_in",name:"up",qualifier:["float"],is_optional:false},{type:"node_in",name:"uq",qualifier:["float"],is_optional:false},{type:"node_in",name:"ur",qualifier:["float"],is_optional:false},{type:"node_in",name:"us",qualifier:["float"],is_optional:false},{type:"node_out",name:"ut",qualifier:["float"],is_optional:true},{type:"node_out",name:"uu",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ut"],statements:[{type:"textline",tokens:["ut","=","uo",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_uu"],statements:[{type:"textline",tokens:["uu","=","vec4","(","up",",","uq",",","ur",",","us",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"uv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["uv","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"uw",qualifier:["float"],is_optional:false},{type:"node_in",name:"ux",qualifier:["float"],is_optional:false},{type:"node_in",name:"uy",qualifier:["float"],is_optional:false},{type:"node_out",name:"uz",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["uz","=","smoothstep","(","ux",",","uy",",","uw",")",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mh","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","mi","=","kK",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mj","=","kL",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","mj","=","mj",";","else","mj","=","-","mj",";"]}]}}]},{type:"textline",tokens:["vec3","mk","=","normalize","(","mj",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ml","=","cross","(","mj",",","kM",".","xyz",")","*","kM",".","w",";","mat3","mm","=","mat3","(","kM",".","xyz",",","ml",",","mj",")",";","mat3","mn","=","mm",";"]}]}}]},{type:"textline",tokens:["vec3","mo","=","u_camera_eye_frag","-","kK",";","vec3","mp","=","normalize","(","mo",")",";","vec3","mq","=","kK",";","vec4","mr","=","cL",";","float","ms","=","u_emit",";","float","mt","=","u_specular_alpha",";","float","mu","=","u_ambient",";","vec3","mv",";","vec3","mw",";","vec3","mx",";","vec3","my",";","float","mz",";","float","mA",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","uA","=","mv",";","float","uB","=","mA",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["uA","=","max","(","uA","-","sqrt","(","0.01","*","-","min","(","mi",",","ZERO_VALUE_NODES",")",")",",","0.5","*","uA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kI","(","uA",",","mi",",","u_time",",","mz",",","mx",",","u_sun_direction",",","mh",",","u_sun_quaternion",",","kK",",","length","(","cL",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","uC","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uD","=","gS","(","u_cube_fog",",","mp",")",";","vec4","uE","=","vec4","(","uD",",","u_fog_color_density",".","a",")",";","gy","(","uE",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","uE","=","u_fog_color_density",";","uE",".","rgb","*=","uC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["hk","(","uA",",","length","(","cL",")",",","mp",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uE",",","mi",",","uC",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gL","(","uA",",","length","(","cL",")",",","uE",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","uB","<","0.5",")","discard",";","uB","=","UNITY_VALUE_NODES",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","uF","=","texture2DProj","(","u_shadow_mask",",","cK",")",".","rg",";","float","uG","=","uF",".","g",";","uA","=","vec3","(","uG",")",";"]}]}}]},{type:"textline",tokens:["gA","(","uA",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","uA",",","uB",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uA",",","uB",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kK",";","varying","vec4","cL",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kM",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kO",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"lX",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["lX","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"mb",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["mb","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"mc",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["mc","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"md",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["md","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"me",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["me","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","mf","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","a_normal",";","vec3","mh","=","vec3","(","a_tangent",")",";","vec3","mi","=","a_tangent","[","3","]","*","cross","(","mg",",","mh",")",";"]}]}},{type:"elif",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","a_normal",";","vec3","mh","=","vec3","(","0.0",")",";","vec3","mi","=","vec3","(","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","vec3","(","0.0",")",";","vec3","mh","=","vec3","(","0.0",")",";","vec3","mi","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["mf","=","mix","(","mf",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mg","=","mix","(","mg",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mj","=","vec3","(","a_tangent",")",";","vec3","mk","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","mj",")",";","mh","=","mix","(","mh",",","mj",",","u_va_frame_factor",")",";","mi","=","mix","(","mi",",","mk",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bt","(","mf",",","mh",",","mi",",","mg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ml","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ml","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mm","=","(","u_model_matrix","*","vec4","(","ml",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","mn","=","ag","(","u_camera_eye",",","mm",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","mn","=","aa","(","u_camera_eye",",","mm",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mo","=","(","u_model_matrix","*","vec4","(","ml",",","1.0",")",")",".","xyz",";","mn","=","mn","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","mo",")",";"]}]}}]},{type:"textline",tokens:["d","mp","=","an","(","mf","-","ml",",","ml",",","mh",",","mi",",","mg",",","mn",")",";","mp",".","b","=","mm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","mp","=","an","(","mf",",","ml",",","mh",",","mi",",","mg",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ck","(","mp",".","a",",","mp",".","b",",","mg",")",";"]}]}}]},{type:"textline",tokens:["kK","=","mp",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kL","=","mp",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","mq","=","(","dot","(","cross","(","mp",".","e",",","mp",".","c",")",",","mp",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","kM","=","vec4","(","mp",".","c",",","mq",")",";"]}]}}]},{type:"textline",tokens:["cL","=","u_view_matrix","*","vec4","(","mp",".","a",",","1.0",")",";","vec4","mr","=","u_proj_matrix","*","cL",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["mr",".","xy","+=","u_subpixel_jitter","*","mr",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","mr",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","mp",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_B4W_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","ms","=","mr",".","x",";","float","mt","=","mr",".","y",";","float","mu","=","mr",".","w",";","cK",".","x","=","(","ms","+","mu",")","/","2.0",";","cK",".","y","=","(","mt","+","mu",")","/","2.0",";","cK",".","z","=","mu",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kO","=","-","cL",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","mr",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","mf",";","varying","vec3","kN",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cL",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","mg","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","mh","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","mg",")",";","float","mi","=","u_diffuse_color",".","a","*","mf","*","(","1.0","-","clamp","(","mh",",","0.0",",","1.0",")",")",";","vec3","mj","=","kN","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gL","(","mj",",","length","(","cL",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["gA","(","mj",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","mj",",","mi",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","mj",",","mi",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","mf",";","varying","vec3","kN",";","varying","vec3","cL",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","mg","mW",";","mW","=","mV","(",")",";","vec4","mX","=","u_view_matrix","*","vec4","(","mW",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","mX",";","mf","=","mW",".","c",";","kN","=","mW",".","d",";","cL","=","mX",".","xyz",";","float","mY","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","mW",".","a","*","mY",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","mf",";","varying","vec3","kN",";","varying","vec2","a",";","varying","vec3","kJ",";","varying","vec3","kK",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","lz","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lA","=","texture2D","(","u_sampler",",","a",")",";","gy","(","lA",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["lz",".","rgb","=","mix","(","lz",".","rgb",",","lA",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["lz",".","rgb","*=","mix","(","vec3","(","1.0",")",",","lA",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["lz",".","a","=","lA",".","a",";"]}]}}]},{type:"textline",tokens:["lz",".","rgb","*=","kN",";","vec3","lB","=","u_diffuse_intensity","*","lz",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lC","=","u_emit","*","lz",".","rgb",";","vec3","lD","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lE","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lD",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lF","=","0.5",";","vec3","lE","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","lF",")",";"]}]}}]},{type:"textline",tokens:["vec3","lG","=","u_ambient","*","lE",";","float","lH","=","u_specular_params","[","0","]",";","vec2","lI","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","lJ","=","lH","*","u_specular_color",";","vec3","lK","=","normalize","(","kJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hx","lL","=","kc","(","lC",",","lG",",","lB",",","lJ",",","kK",",","lD",",","lK",",","lI",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hx","lL","=","kh","(","lC",",","lG",",","lB",")",";"]}]}}]},{type:"textline",tokens:["vec3","lM","=","lL",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lM","=","lB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gL","(","lM",",","length","(","cL",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","lN","=","lz",".","a","*","mf",";","gA","(","lM",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","lM",",","lN",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lM",",","lN",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","mf",";","varying","vec3","kN",";","varying","vec2","a",";","varying","vec3","kJ",";","varying","vec3","kK",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","lB","(","vec2","lz",",","vec2","lA",")","{","return","(","atan","(","lA",".","y",",","lA",".","x",")","-","atan","(","lz",".","y",",","lz",".","x",")",")",";","}","void","main","(",")","{","mg","lC",";","lC","=","mV","(",")",";","float","lD",";","mat4","lE",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","lD","=","lC",".","e",";","lE","=","z","(","lC",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","lD","=","lC",".","e",";","lE","=","k","(",")",";","lE","[","3","]","=","vec4","(","lC",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","lD","=","lC",".","e",";","lE","=","o","(","radians","(","90.0",")",")",";","lE","[","3","]","=","vec4","(","lC",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","lD","=","lB","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","lC",".","e",";","lE","=","m","(","radians","(","-","90.0",")",")",";","lE","[","3","]","=","vec4","(","lC",".","b",",","1.0",")",";","}","vec4","lF","=","vec4","(","a_p_bb_vertex","*","2.0","*","lC",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","lG","=","lE","*","q","(","lD",")","*","lF",";","vec4","lH","=","u_view_matrix","*","lG",";","vec4","lI","=","u_proj_matrix","*","lH",";","gl_Position","=","lI",";","mf","=","lC",".","c",";","kN","=","lC",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","kK","=","lG",".","xyz",";","kJ","=","u_camera_eye","-","lG",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cL","=","lH",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","mW",";","const","float","mX","=","0.99",";","const","float","mY","=","1.8",";","const","int","mZ","=","8",";","float","ni","(","vec3","m_",",","vec3","na",")","{","float","nb","=","dot","(","na",",","na",")",";","float","nc","=","2.0","*","dot","(","na",",","m_",")",";","float","nd","=","dot","(","m_",",","m_",")","-","1.0",";","float","ne","=","nc","*","nc","-","4.0","*","nb","*","nd",";","float","nf","=","sqrt","(","ne",")",";","float","ng","=","(","-","nc","-","nf",")","/","2.0",";","float","nh","=","nd","/","ng",";","return","nh",";","}","float","np","(","float","nj",",","float","nk",")","{","float","nl","=","3.0","*","(","1.0","-","nk","*","nk",")",";","float","nm","=","2.0","*","(","2.0","+","nk","*","nk",")",";","float","nn","=","1.0","+","nj","*","nj",";","float","no","=","pow","(","1.0","+","nk","*","nk","-","2.0","*","nk","*","nj",",","1.5",")",";","no","=","max","(","no",",","0.00001",")",";","return","(","nl","/","nm",")","*","(","nn","/","no",")",";","}","float","nx","(","vec3","nq",",","vec3","nr",",","float","ns",")","{","float","nt","=","dot","(","nr",",","-","nq",")",";","if","(","nt","<","0.0",")","{","return","1.0",";","}","vec3","nu","=","nq","+","nt","*","nr",";","if","(","length","(","nu",")","<","ns",")","{","return","0.0",";","}","else","if","(","length","(","nu",")",">=","ns",")","{","vec3","nv","=","normalize","(","nu",")","*","ns","-","nq",";","float","nw","=","acos","(","dot","(","normalize","(","nv",")",",","nr",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","nw","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","nB","(","float","ny",",","vec3","nz",",","float","nA",")","{","return","nz","-","nz","*","pow","(","u_sky_color",",","vec3","(","nA","/","ny",")",")",";","}","void","main","(",")","{","vec3","nC","=","normalize","(","mW",")",";","vec3","nD","=","u_sun_direction",";","float","nE","=","dot","(","nC",",","nD",")",";","float","nF","=","np","(","nE",",","-","0.01",")","*","u_rayleigh_brightness","*","nD",".","y",";","float","nG","=","np","(","nE","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","nD",".","y",")",";","float","nH","=","smoothstep","(","0.0",",","100.0",",","np","(","nE",",","0.9995",")",")","*","u_spot_brightness",";","vec3","nI","=","vec3","(","0.0",",","mX",",","0.0",")",";","float","nJ","=","ni","(","nI",",","nC",")",";","float","nK","=","nJ","/","float","(","mZ",")",";","float","nL","=","nx","(","nI",",","nC",",","mX","-","0.3",")",";","vec3","nM","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","nN","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","nO","=","0",";","nO","<","mZ",";","nO","++",")","{","float","nP","=","nK","*","float","(","nO",")",";","vec3","nQ","=","nI","+","nC","*","nP",";","float","nR","=","nx","(","nQ",",","nD",",","mX","-","0.2",")",";","float","nS","=","ni","(","nQ",",","nD",")",";","vec3","nT","=","nB","(","nS",",","vec3","(","mY",")",",","u_scatter_strength",")","*","nR",";","nM","+=","nB","(","sqrt","(","nP",")",",","u_sky_color","*","nT",",","u_rayleigh_strength",")",";","nN","+=","nB","(","nP",",","nT",",","u_mie_strength",")",";","}","nM","=","nM","*","nL","*","pow","(","nJ",",","u_rayleigh_collection_power",")","/","float","(","mZ",")",";","nN","=","(","nN","*","nL","*","pow","(","nJ",",","u_mie_collection_power",")",")","/","float","(","mZ",")",";","vec3","nU","=","vec3","(","nH","*","nN","+","nG","*","nN","+","nF","*","nM",")",";","gA","(","nU",")",";","gl_FragColor","=","vec4","(","nU",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","mW",";","void","main","(",")","{","vec4","lz","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","lA","=","u_cube_view_matrix","*","lz",";","mW","=","lA",".","xyz",";","gl_Position","=","lz",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_sampler",",","a",")",";","gA","(","lz",".","rgb",")",";","gD","(","lz",".","rgb",",","lz",".","a",")",";","gl_FragColor","=","lz",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","lz","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","lA","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","lz",",","0.0",")",";","lA",".","x","/=","lA",".","w",";","lA",".","y","/=","lA",".","w",";","lA","+=","99999.0","*","step","(","lA",".","z",",","0.0",")",";","lA","+=","100.0","*","(","step","(","1.0",",","abs","(","lA",".","x",")",")","+","step","(","1.0",",","abs","(","lA",".","y",")",")",")",";","lA",".","x","=","-","a_lf_dist","*","lA",".","x",";","lA",".","y","=","-","a_lf_dist","*","lA",".","y",";","float","lB","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","lC","=","vec2","(","a_lf_bb_vertex",".","x","/","lB",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","lD","=","1.9",";","lC","*=","(","1.0","+","lD","*","length","(","lA",".","xy",")",")",";","}","gl_Position","=","vec4","(","lA",".","xy","+","lC",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","mW",";","void","main","(",")","{","vec3","lz","=","textureCube","(","u_sky",",","mW",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gy","(","lz",".","rgb",")",";","float","lA","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","lA","=","min","(","-","lA","*","0.03",",","0.8",")",";","float","lB","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","vec3","lC","=","normalize","(","mW",")",";","vec3","lD","=","vec3","(","0.0",")",";","vec4","lE","=","u_underwater_fog_color_density",";","lE",".","rgb","=","mix","(","lE",".","rgb",",","lD",",","min","(","-","lC",".","y","+","lA",",","1.0",")",")","*","lB",";","float","lF","=","clamp","(","sign","(","lC",".","y","-","0.05","*","lA",")",",","0.0",",","1.0",")",";","lz","=","mix","(","lE",".","rgb",",","lz",",","lF",")",";","gA","(","lz",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lz",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","mW",";","void","main","(",")","{","vec4","lz","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","lA","=","u_sky_vp_inverse","*","lz",";","mW","=","lA",".","xyz",";","gl_Position","=","lz",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","lz","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kJ",";","varying","vec3","kK",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kL",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kM",";","varying","vec3","mX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mY",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","m_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","no","(","in","vec2","na",",","in","vec3","nb",",","in","vec3","nc",",","in","vec3","nd",",","out","float","ne",")","{","vec3","nf","=","reflect","(","-","nc",",","nb",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ng","=","na",".","xy","+","nb",".","xz","*","REFL_BUMP","/","kO",";","ne","=","u_reflect_factor",";","vec3","nh",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["nh","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nh","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","ni","=","dot","(","nc",",","nb",")",";","ne","*=","max","(","1.0","-","1.0","/","ni",",","1.0",")",";","}","else","{","nh","=","texture2D","(","u_reflectmap",",","ng",")",".","rgb",";","gy","(","nh",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["ne","=","u_mirror_factor",";","vec3","nh","=","nd","*","textureCube","(","u_mirrormap",",","nf",")",".","rgb",";","gy","(","nh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ne","=","u_reflect_factor",";","vec3","nh","=","nd","*","vec3","(","0.3",",","0.5",",","1.0",")",";","gy","(","nh",")",";"]}]}}]},{type:"textline",tokens:["vec3","nj","=","normalize","(","nf","+","nc",")",";","float","nk","=","1.0","-","dot","(","nc",",","nj",")",";","float","nl","=","u_fresnel_params","[","3","]",";","float","nm","=","u_fresnel_params","[","2","]",";","float","nn","=","nl","+","(","1.0","-","nl",")","*","pow","(","nk",",","nm",")",";","ne","=","min","(","ne","*","nn",",","1.0",")",";","return","nh",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","np","=","mat3","(","kM",",","mX",",","kL",")",";"]}]}}]},{type:"textline",tokens:["vec3","nq","=","normalize","(","kL",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","np","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","nq","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","nr","=","kK",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ns","=","vec2","(","mY",".","x",",","-","mY",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","ns","=","vec2","(","kK",".","x",",","-","kK",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","ns","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nt","=","vec3","(","0.0",")",";","vec3","nu","=","texture2D","(","u_normalmap0",",","ns","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nt","+=","nu",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nv","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["nv","+=","nu",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["nu","=","texture2D","(","u_normalmap0",",","ns","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nt","+=","nu",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["nv","+=","nu",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["nu","=","texture2D","(","u_normalmap0",",","ns","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nt","+=","nu",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["nv","+=","nu",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["nu","=","texture2D","(","u_normalmap0",",","ns","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nt","+=","nu",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["nv","+=","nu",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nw","=","np","*","nv",";","if","(","!","g","(","nw",",","vec3","(","0.0",")",")",")","nw","=","normalize","(","nw",")",";","vec3","nx","=","mix","(","nq",",","nw",",","0.2",")",";","nx","=","normalize","(","nx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["nq","=","mix","(","nq",",","normalize","(","np","*","nt",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nq","=","mix","(","nq",",","normalize","(","np","*","nt",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["nq","=","normalize","(","nq",")",";"]}]}}]},{type:"textline",tokens:["vec3","ny","=","normalize","(","kJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nz","=","cK",".","xy","/","cK",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","nA","=","kO","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nB","=","u_diffuse_color",".","a",";","vec4","nC","=","texture2DProj","(","u_scene_depth",",","cK",")",";","float","nD","=","cw","(","nC",")",";","float","nE","=","max","(","nD","-","kO",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nF","=","nz","+","nq",".","xz","*","u_refr_bump","/","kO",";","float","nG","=","lq","(","nD",",","nF",",","nz",")",";","float","nH","=","max","(","nG","-","kO",",","0.0",")",";","float","nI","=","u_view_max_depth","/","ABSORB","*","nH",";","float","nJ",";","if","(","u_cam_water_depth","<","0.0",")","nJ","=","0.0",";","else","nJ","=","min","(","nB","*","nI",",","1.0",")",";","float","nK","=","u_view_max_depth","/","ABSORB","*","nE",";","nB","=","min","(","15.0","*","nB","*","u_view_max_depth","*","nE",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nK","=","u_view_max_depth","/","ABSORB","*","nE",";","if","(","u_cam_water_depth",">","0.0",")","nB","=","min","(","nB","*","nK",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["nB","*=","min","(","5.0","*","nA",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nB","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","nJ","=","1.0","-","nB",";","vec2","nF","=","nz","+","nq",".","xz","*","REFR_BUMP","/","kO",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nL","=","texture2D","(","u_refractmap",",","nF",")",".","rgb",";","gy","(","nL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","nM","=","pow","(","min","(","mZ",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","nN","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","nM",")",";","nM","=","pow","(","min","(","mZ",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","nN","=","mix","(","u_shore_water_col",",","nN",",","nM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nN","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nO","=","max","(","1.0","-","u_view_max_depth","*","nE",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nO","=","1.0","-","nB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","nP","=","max","(","nr","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nQ","=","normalize","(","vec3","(","mZ",".","r",",","0.0",",","mZ",".","g",")",")",";","vec3","nR","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","nQ",",","0.8",")",")",";","float","nS","=","1.25","*","max","(","dot","(","nx",",","nR",")","-","0.2",",","0.0",")",";","nS","+=","max","(","dot","(","nx",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","nO","+=","nS","*","(","1.0","-","mZ",".","b",")",";","nP","*=","(","1.0","-","0.95","*","pow","(","mZ",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["nO","+=","nP",";","nO","=","min","(","u_foam_factor","*","nO",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","nT","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","ns","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","nU","=","u_specular_params","[","0","]",";","vec2","nV","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","nW","=","nU","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nX","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","nq",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nX","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["vec3","nY","=","u_ambient","*","nX",";","vec3","nZ","=","nY","+","u_sun_intensity",";","float","n_",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","oa","=","no","(","nz",",","nq",",","ny",",","nZ",",","n_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","oa","=","no","(","vec2","(","0.0",")",",","nq",",","ny",",","nZ",",","n_",")",";"]}]}}]},{type:"textline",tokens:["vec3","ob","=","u_diffuse_intensity","*","nN",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hx","oc","=","kc","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ob",",","nW",",","kK",",","nq",",","ny",",","nV",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hx","oc","=","kh","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ob",")",";"]}]}}]},{type:"textline",tokens:["ob","=","oc",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","od","=","max","(","dot","(","u_sun_direction",",","-","kL",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","ny",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","od","=","clamp","(","SSS_STRENGTH","*","od",",","0.0",",","1.0",")",";","ob","=","mix","(","ob",",","u_shallow_water_col",",","od",")",";","ob","=","mix","(","ob",",","u_shore_water_col",",","od",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ob","=","mix","(","nL",",","ob",",","nJ",")",";"]}]}}]},{type:"textline",tokens:["ob","=","mix","(","ob",",","oa",",","n_",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","oe","=","mix","(","nT",".","g",",","nT",".","r",",","max","(","4.0","*","(","nO","-","0.75",")",",","0.0",")",")",";","oe","=","mix","(","nT",".","b",",","oe",",","max","(","2.0","*","nO","-","1.0",",","0.0",")",")",";","oe","=","mix","(","0.0",",","oe",",","nO",")",";","ob","=","mix","(","ob",",","nZ",",","oe",")",";"]}]}}]},{type:"textline",tokens:["ob","+=","oc",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","of","=","gS","(","u_cube_fog",",","ny",")",";","vec4","og","=","vec4","(","of",",","u_fog_color_density",".","a",")",";","gy","(","og",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","og","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","ht","(","ob",",","nA",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","gL","(","ob",",","nA",",","og",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gL","(","ob",",","nA",",","og",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gA","(","ob",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["nB","=","max","(","nB",",","oc",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["nB","+=","oe",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","ob",",","nB",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","oh","=","fwidth","(","m_",")",";","vec3","oi","=","smoothstep","(","vec3","(","0.0",")",",","oh","*","lz",",","m_",")",";","float","oj","=","min","(","min","(","oi",".","x",",","oi",".","y",")",",","oi",".","z",")",";","oj","=","clamp","(","oj",",","0.0",",","1.0",")",";","ob","=","mix","(","u_wireframe_edge_color",",","ob",",","oj",")",";","nB","=","mix","(","1.0",",","nB",",","oj",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ob",",","nB",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kJ",";","varying","vec3","kK",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kL",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kM",";","varying","vec3","mX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mY",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kO",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","m_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lF","(","in","vec2","lz",")","{","vec2","lA","=","0.5","+","vec2","(","(","lz",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","lz",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","vec4","lB","=","texture2D","(","u_shore_dist_map",",","lA",")",";","const","vec2","lC","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","lD","=","dot","(","lB",".","ba",",","lC",")",";","vec2","lE","=","normalize","(","lB",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","lE",",","lD",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","lW","(","inout","vec3","lG",",","in","float","lH",",","in","vec3","lI",")","{","float","lJ","=","dM","(","DST_NOISE_SCALE_0","*","(","lG",".","xz","+","DST_NOISE_FREQ_0","*","lH",")",")","*","dM","(","DST_NOISE_SCALE_1","*","(","lG",".","zx","-","DST_NOISE_FREQ_1","*","lH",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lK","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","lL","=","lI",".","b",";","float","lM","=","sqrt","(","lL",")",";","float","lN","=","max","(","lL",",","DIR_MIN_SHR_FAC",")","*","sin","(","lM","/","lK","+","DIR_FREQ","*","lH",")",";","float","lO","=","max","(","dM","(","DIR_NOISE_SCALE","*","(","lG",".","xz","+","DIR_NOISE_FREQ","*","lH",")",")",",","DIR_MIN_NOISE_FAC",")",";","lN","*=","lO",";","float","lP","=","WAVES_HEIGHT","*","mix","(","lN",",","lJ",",","max","(","lM",",","DST_MIN_FAC",")",")",";","vec2","lQ","=","lI",".","rg",";","float","lR","=","WAVES_HOR_FAC","*","lN","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","lL",")",",","0.0",")",";","vec2","lS","=","lR","*","lQ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lP","=","WAVES_HEIGHT","*","lJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lT","=","2.0","*","(","lG",".","xz","-","0.1","*","lH",")",";","vec2","lU","=","1.3","*","(","lG",".","zx","+","0.03","*","lH",")",";","float","lV","=","dg","(","0.5","*","lT",")",".","x","+","dg","(","0.5","*","lU",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lG",".","xz","+=","lS",";","lV","*=","lL",";"]}]}}]},{type:"textline",tokens:["lP","+=","SMALL_WAVES_FAC","*","lV",";"]}]}}]},{type:"textline",tokens:["lG",".","y","+=","lP",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","m_","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","m_","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","m_","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","na","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nb","=","abs","(","na",".","y",")",";","vec2","nc","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","nb",")",";","na",".","y","=","WATER_LEVEL",";","na",".","xz","+=","nc",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["d","nd","=","an","(","na",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["mY","=","nd",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["mZ","=","lF","(","nd",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","ne","=","length","(","u_wind",")",";","float","nf","=","u_time",";","nf","*=","ne",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","ng","=","nb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ng","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","nh","=","nd",".","a","+","vec3","(","ng",",","0.0",",","0.0",")",";","vec3","ni","=","nd",".","a","+","vec3","(","0.0",",","0.0",",","ng",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nj","=","lF","(","nh",".","xz",")",";","vec3","nk","=","lF","(","ni",".","xz",")",";","lW","(","nh",",","nf",",","nj",")",";","lW","(","ni",",","nf",",","nk",")",";","lW","(","nd",".","a",",","nf",",","mZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lW","(","nh",",","nf",",","vec3","(","0.0",")",")",";","lW","(","ni",",","nf",",","vec3","(","0.0",")",")",";","lW","(","nd",".","a",",","nf",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","nd",".","a",".","y","=","WATER_LEVEL","-","1.0",";","nh",".","y","=","nd",".","a",".","y",";","ni",".","y","=","nd",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","nl","=","normalize","(","nh","-","nd",".","a",")",";","vec3","nm","=","normalize","(","ni","-","nd",".","a",")",";","kL","=","normalize","(","cross","(","nm",",","nl",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["kM","=","nm",";","mX","=","cross","(","kL",",","kM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","nn","=","dot","(","kL",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","no","=","clamp","(","0.8","-","nn",",","0.0",",","1.0",")",";","kL","=","mix","(","kL",",","vec3","(","0.0",",","1.0",",","0.0",")",",","no",")",";"]}]}}]}]}}]},{type:"textline",tokens:["kK","=","nd",".","a",";","kJ","=","u_camera_eye","-","nd",".","a",";","vec4","np","=","u_view_matrix","*","vec4","(","nd",".","a",",","1.0",")",";","vec4","nq","=","u_proj_matrix","*","np",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","nr","=","nq",".","x",";","float","ns","=","nq",".","y",";","float","nt","=","nq",".","w",";","cK",".","x","=","(","nr","+","nt",")","/","2.0",";","cK",".","y","=","(","ns","+","nt",")","/","2.0",";","cK",".","z","=","nt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["kO","=","-","np",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","nq",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","m_",";","const","float","lz","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lA","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lA","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lB","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","lC","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","lD","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","lE","=","vec3","(","0.0",")",";","float","lF","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lG","=","sign","(","m_","-","vec3","(","0.02","*","lz",")",")",";","if","(","lG",".","x","<","0.0","||","lG",".","y","<","0.0","||","lG",".","z","<","0.0",")","{","lE","=","lA",";","lF","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lG","=","sign","(","m_","-","vec3","(","0.02","*","lz",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","lG",".","x","<","0.0","||","lG",".","y","<","0.0","||","lG",".","z","<","0.0",")","lE","=","u_wireframe_edge_color",";","else","lE","=","lD",";","lF","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","lG",".","x","<","0.0","||","lG",".","y","<","0.0","||","lG",".","z","<","0.0",")","lF","=","1.0",";","else","lF","=","0.0",";","lE","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","lG",".","x","<","0.0","||","lG",".","y","<","0.0","||","lG",".","z","<","0.0",")","lE","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","lE","=","lB",";","else","lE","=","lC",";","lF","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","lH","=","fwidth","(","m_",")",";","vec3","lI","=","smoothstep","(","vec3","(","0.0",")",",","lH","*","lz",",","m_",")",";","float","lJ","=","min","(","min","(","lI",".","x",",","lI",".","y",")",",","lI",".","z",")",";","lJ","=","clamp","(","lJ",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","lE","=","vec3","(","mix","(","u_wireframe_edge_color",",","lD",",","lJ",")",")",";","lF","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","lE","=","u_wireframe_edge_color",";","lF","=","mix","(","1.0",",","0.0",",","lJ",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","lE","=","mix","(","u_wireframe_edge_color",",","lB",",","lJ",")",";","else","lE","=","mix","(","u_wireframe_edge_color",",","lC",",","lJ",")",";","lF","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["gA","(","lE",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","lE",",","lF",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lE",",","lF",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","m_",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","m_","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","m_","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","m_","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","lz","=","a_position",";","vec3","lA","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["d","lB","=","an","(","lz",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["lz","=","mix","(","lz",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lC","=","vec3","(","0.0",")",";","vec3","lD","=","vec3","(","0.0",")",";","bt","(","lz",",","lC",",","lD",",","lA",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lE","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lE","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","lB","=","gh","(","lz",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lE",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lF","=","(","u_model_matrix","*","vec4","(","lE",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","lG","=","ag","(","u_camera_eye",",","lF",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","lG","=","aa","(","u_camera_eye",",","lF",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lH","=","(","u_model_matrix","*","vec4","(","lE",",","1.0",")",")",".","xyz",";","lG","=","lG","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lH",")",";"]}]}}]},{type:"textline",tokens:["d","lB","=","an","(","lz","-","lE",",","lE",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lG",")",";","lB",".","b","=","lF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","lB","=","an","(","lz",",","lE",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ck","(","lB",".","a",",","lB",".","b",",","lA",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","lI","=","u_view_matrix","*","vec4","(","lB",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","lI",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","lA","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","lz","[","0","]",",","lA","[","1","]",",","lA","[","2","]",",","lz","[","3","]","+","lA","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","lC","(","float","lz",",","float","lA",")","{","vec2","lB","=","a","+","vec2","(","lz",",","lA",")","*","u_texel_size",";","return","texture2D","(","u_color",",","lB",")",";","}","float","lG","(","vec4","lD",")","{","vec3","lE","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","lF","=","dot","(","lD",".","rgb",",","lE",")",";","return","lF",";","}","vec4","nc","(",")","{","vec4","lH","=","lC","(","-","1.0",",","-","1.0",")",";","vec4","lI","=","lC","(","1.0",",","-","1.0",")",";","vec4","lJ","=","lC","(","-","1.0",",","1.0",")",";","vec4","lK","=","lC","(","1.0",",","1.0",")",";","vec4","lL","=","lC","(","0.0",",","0.0",")",";","float","lM","=","lG","(","lH",")",";","float","lN","=","lG","(","lI",")",";","float","lO","=","lG","(","lJ",")",";","float","lP","=","lG","(","lK",")",";","float","lQ","=","lG","(","lL",")",";","float","lR","=","min","(","lQ",",","min","(","min","(","lM",",","lN",")",",","min","(","lO",",","lP",")",")",")",";","float","lS","=","max","(","lQ",",","max","(","max","(","lM",",","lN",")",",","max","(","lO",",","lP",")",")",")",";","vec2","lT",";","lT",".","x","=","-","(","(","lM","+","lN",")","-","(","lO","+","lP",")",")",";","lT",".","y","=","(","(","lM","+","lO",")","-","(","lN","+","lP",")",")",";","float","lU","=","max","(","(","lM","+","lN","+","lO","+","lP",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","lV","=","1.0","/","(","min","(","abs","(","lT",".","x",")",",","abs","(","lT",".","y",")",")","+","lU",")",";","lT","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","lT","*","lV",")",")","*","u_texel_size",";","vec4","lW","=","0.5","*","(","texture2D","(","u_color",",","a","+","lT","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","lT","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","na","=","lW","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","lT","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","lT","*","0.5",")",")",";","float","nb","=","lG","(","na",")",";","if","(","(","nb","<","lR",")","||","(","nb",">","lS",")",")","return","lW",";","else","return","na",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","oO","(",")","{","vec2","nd",";","nd",".","x","=","a",".","x",";","nd",".","y","=","a",".","y",";","vec4","ne","=","texture2D","(","u_color",",","nd",")",";","vec4","nf","=","lC","(","0.0",",","1.0",")",";","vec4","ng","=","lC","(","1.0",",","0.0",")",";","vec4","nh","=","lC","(","0.0",",","-","1.0",")",";","vec4","ni","=","lC","(","-","1.0",",","0.0",")",";","float","nj","=","lG","(","nf",")",";","float","nk","=","lG","(","ng",")",";","float","nl","=","lG","(","nh",")",";","float","nm","=","lG","(","ni",")",";","float","nn","=","lG","(","ne",")",";","float","no","=","max","(","nj",",","nn",")",";","float","np","=","min","(","nj",",","nn",")",";","float","nq","=","max","(","nk",",","no",")",";","float","nr","=","min","(","nk",",","np",")",";","float","ns","=","max","(","nl",",","nm",")",";","float","nt","=","min","(","nl",",","nm",")",";","float","nu","=","max","(","ns",",","nq",")",";","float","nv","=","min","(","nt",",","nr",")",";","float","nw","=","nu","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","nx","=","nu","-","nv",";","float","ny","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","nw",")",";","bool","nz","=","nx","<","ny",";","if","(","nz",")","return","ne",";","vec4","nA","=","lC","(","-","1.0",",","-","1.0",")",";","vec4","nB","=","lC","(","1.0",",","1.0",")",";","vec4","nC","=","lC","(","1.0",",","-","1.0",")",";","vec4","nD","=","lC","(","-","1.0",",","1.0",")",";","float","nE","=","lG","(","nA",")",";","float","nF","=","lG","(","nB",")",";","float","nG","=","lG","(","nC",")",";","float","nH","=","lG","(","nD",")",";","float","nI","=","nl","+","nj",";","float","nJ","=","nm","+","nk",";","float","nK","=","1.0","/","nx",";","float","nL","=","nI","+","nJ",";","float","nM","=","(","-","2.0","*","nn",")","+","nI",";","float","nN","=","(","-","2.0","*","nn",")","+","nJ",";","float","nO","=","nG","+","nF",";","float","nP","=","nE","+","nG",";","float","nQ","=","(","-","2.0","*","nk",")","+","nO",";","float","nR","=","(","-","2.0","*","nl",")","+","nP",";","float","nS","=","nE","+","nH",";","float","nT","=","nH","+","nF",";","float","nU","=","(","abs","(","nM",")","*","2.0",")","+","abs","(","nQ",")",";","float","nV","=","(","abs","(","nN",")","*","2.0",")","+","abs","(","nR",")",";","float","nW","=","(","-","2.0","*","nm",")","+","nS",";","float","nX","=","(","-","2.0","*","nj",")","+","nT",";","float","nY","=","abs","(","nW",")","+","nU",";","float","nZ","=","abs","(","nX",")","+","nV",";","float","n_","=","nS","+","nO",";","float","oa","=","u_texel_size",".","x",";","bool","ob","=","nY",">=","nZ",";","float","oc","=","nL","*","2.0","+","n_",";","if","(","!","ob",")","nl","=","nm",";","if","(","!","ob",")","nj","=","nk",";","if","(","ob",")","oa","=","u_texel_size",".","y",";","float","od","=","(","oc","*","(","1.0","/","12.0",")",")","-","nn",";","float","oe","=","nl","-","nn",";","float","of","=","nj","-","nn",";","float","og","=","nl","+","nn",";","float","oh","=","nj","+","nn",";","bool","oi","=","abs","(","oe",")",">=","abs","(","of",")",";","float","oj","=","max","(","abs","(","oe",")",",","abs","(","of",")",")",";","if","(","oi",")","oa","=","-","oa",";","float","ok","=","clamp","(","abs","(","od",")","*","nK",",","0.0",",","1.0",")",";","vec2","ol",";","ol",".","x","=","nd",".","x",";","ol",".","y","=","nd",".","y",";","vec2","om",";","om",".","x","=","(","!","ob",")","?","0.0",":","u_texel_size",".","x",";","om",".","y","=","(","ob",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","ob",")","ol",".","x","+=","oa","*","0.5",";","if","(","ob",")","ol",".","y","+=","oa","*","0.5",";","vec2","on",";","on",".","x","=","ol",".","x","-","om",".","x",";","on",".","y","=","ol",".","y","-","om",".","y",";","vec2","oo",";","oo",".","x","=","ol",".","x","+","om",".","x",";","oo",".","y","=","ol",".","y","+","om",".","y",";","float","op","=","(","(","-","2.0",")","*","ok",")","+","3.0",";","float","oq","=","lG","(","texture2D","(","u_color",",","on",")",")",";","float","or","=","ok","*","ok",";","float","os","=","lG","(","texture2D","(","u_color",",","oo",")",")",";","if","(","!","oi",")","og","=","oh",";","float","ot","=","oj","*","1.0","/","4.0",";","float","ou","=","nn","-","og","*","0.5",";","float","ov","=","op","*","or",";","bool","ow","=","ou","<","0.0",";","oq","-=","og","*","0.5",";","os","-=","og","*","0.5",";","bool","ox","=","abs","(","oq",")",">=","ot",";","bool","oy","=","abs","(","os",")",">=","ot",";","if","(","!","ox",")","on",".","x","-=","om",".","x","*","1.5",";","if","(","!","ox",")","on",".","y","-=","om",".","y","*","1.5",";","bool","oz","=","(","!","ox",")","||","(","!","oy",")",";","if","(","!","oy",")","oo",".","x","+=","om",".","x","*","1.5",";","if","(","!","oy",")","oo",".","y","+=","om",".","y","*","1.5",";","if","(","oz",")","{","if","(","!","ox",")","oq","=","lG","(","texture2D","(","u_color",",","on",".","xy",")",")",";","if","(","!","oy",")","os","=","lG","(","texture2D","(","u_color",",","oo",".","xy",")",")",";","if","(","!","ox",")","oq","=","oq","-","og","*","0.5",";","if","(","!","oy",")","os","=","os","-","og","*","0.5",";","ox","=","abs","(","oq",")",">=","ot",";","oy","=","abs","(","os",")",">=","ot",";","if","(","!","ox",")","on",".","x","-=","om",".","x","*","2.0",";","if","(","!","ox",")","on",".","y","-=","om",".","y","*","2.0",";","oz","=","(","!","ox",")","||","(","!","oy",")",";","if","(","!","oy",")","oo",".","x","+=","om",".","x","*","2.0",";","if","(","!","oy",")","oo",".","y","+=","om",".","y","*","2.0",";","if","(","oz",")","{","if","(","!","ox",")","oq","=","lG","(","texture2D","(","u_color",",","on",".","xy",")",")",";","if","(","!","oy",")","os","=","lG","(","texture2D","(","u_color",",","oo",".","xy",")",")",";","if","(","!","ox",")","oq","=","oq","-","og","*","0.5",";","if","(","!","oy",")","os","=","os","-","og","*","0.5",";","ox","=","abs","(","oq",")",">=","ot",";","oy","=","abs","(","os",")",">=","ot",";","if","(","!","ox",")","on",".","x","-=","om",".","x","*","2.0",";","if","(","!","ox",")","on",".","y","-=","om",".","y","*","2.0",";","oz","=","(","!","ox",")","||","(","!","oy",")",";","if","(","!","oy",")","oo",".","x","+=","om",".","x","*","2.0",";","if","(","!","oy",")","oo",".","y","+=","om",".","y","*","2.0",";","if","(","oz",")","{","if","(","!","ox",")","oq","=","lG","(","texture2D","(","u_color",",","on",".","xy",")",")",";","if","(","!","oy",")","os","=","lG","(","texture2D","(","u_color",",","oo",".","xy",")",")",";","if","(","!","ox",")","oq","=","oq","-","og","*","0.5",";","if","(","!","oy",")","os","=","os","-","og","*","0.5",";","ox","=","abs","(","oq",")",">=","ot",";","oy","=","abs","(","os",")",">=","ot",";","if","(","!","ox",")","on",".","x","-=","om",".","x","*","4.0",";","if","(","!","ox",")","on",".","y","-=","om",".","y","*","4.0",";","oz","=","(","!","ox",")","||","(","!","oy",")",";","if","(","!","oy",")","oo",".","x","+=","om",".","x","*","4.0",";","if","(","!","oy",")","oo",".","y","+=","om",".","y","*","4.0",";","if","(","oz",")","{","if","(","!","ox",")","oq","=","lG","(","texture2D","(","u_color",",","on",".","xy",")",")",";","if","(","!","oy",")","os","=","lG","(","texture2D","(","u_color",",","oo",".","xy",")",")",";","if","(","!","ox",")","oq","=","oq","-","og","*","0.5",";","if","(","!","oy",")","os","=","os","-","og","*","0.5",";","ox","=","abs","(","oq",")",">=","ot",";","oy","=","abs","(","os",")",">=","ot",";","if","(","!","ox",")","on",".","x","-=","om",".","x","*","2.0",";","if","(","!","ox",")","on",".","y","-=","om",".","y","*","2.0",";","if","(","!","oy",")","oo",".","x","+=","om",".","x","*","2.0",";","if","(","!","oy",")","oo",".","y","+=","om",".","y","*","2.0",";","}","}","}","}","float","oA","=","nd",".","x","-","on",".","x",";","float","oB","=","oo",".","x","-","nd",".","x",";","if","(","!","ob",")","oA","=","nd",".","y","-","on",".","y",";","if","(","!","ob",")","oB","=","oo",".","y","-","nd",".","y",";","bool","oC","=","(","oq","<","0.0",")","!=","ow",";","float","oD","=","(","oB","+","oA",")",";","bool","oE","=","(","os","<","0.0",")","!=","ow",";","float","oF","=","1.0","/","oD",";","bool","oG","=","oA","<","oB",";","float","oH","=","min","(","oA",",","oB",")",";","bool","oI","=","oG","?","oC",":","oE",";","float","oJ","=","ov","*","ov",";","float","oK","=","(","oH","*","(","-","oF",")",")","+","0.5",";","float","oL","=","oJ","*","FXAA_QUALITY_SUBPIX",";","float","oM","=","oI","?","oK",":","0.0",";","float","oN","=","max","(","oM",",","oL",")",";","if","(","!","ob",")","nd",".","x","+=","oN","*","oa",";","if","(","ob",")","nd",".","y","+=","oN","*","oa",";","return","texture2D","(","u_color",",","nd",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","nc","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","oO","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","lz","=","vec2","(","0.0",",","0.0",")",";","vec2","lA","=","u_texel_size",";","vec4","lB","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lB","*","0.0875447373698",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0858112354248",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0808139781061",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0731235112908",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0635705267419",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0530985673112",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0426125984122",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0328565115809",";","lz","+=","lA",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lz",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lz",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","lB",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_main",",","a",")",";","vec4","lA","=","texture2D","(","u_bloom",",","a",")",";","vec4","lB","=","lz",";","lB","+=","lA",";","gl_FragColor","=","vec4","(","lB",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_color",",","a",")",";","vec3","lA","=","lz",".","rgb",";","if","(","u_brightness","<","0.0",")","lA","=","lA","*","(","1.0","+","u_brightness",")",";","else","lA","=","lA","+","(","(","1.0","-","lA",")","*","u_brightness",")",";","lA","=","(","lA","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","lA","*=","u_exposure",";","vec3","lB","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","lC","=","dot","(","lA",",","lB",")",";","lA","=","mix","(","vec3","(","lC",")",",","lA",",","u_saturation",")",";","gl_FragColor","=","vec4","(","lA",",","lz",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cs","(","clamp","(","nh","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","ni","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","nj","=","nh","(","u_depth",",","a",",","u_camera_range",")",";","nj","*=","u_view_max_depth",";","float","nk",";","if","(","nj","<","u_dof_dist",")","nk","=","(","u_dof_dist","-","nj",")","/","u_dof_front",";","else","nk","=","(","nj","-","u_dof_dist",")","/","u_dof_rear",";","nk","=","clamp","(","nk",",","0.0",",","1.0",")",";","vec4","nl","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","ni",",","nl",",","nk",")",";","}","else","gl_FragColor","=","ni",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","lE","(","float","lz",",","float","lA",",","float","lB",")","{","vec2","lC","=","a","+","vec2","(","lz",",","lA",")","*","u_texel_size",";","vec4","lD","=","texture2D","(","u_sampler",",","lC",")","*","lB",";","return","cw","(","lD",")",";","}","void","main","(",")","{","float","lF","=","(","lE","(","-","1.0",",","-","1.0",",","-","1.0",")","+","lE","(","0.0",",","-","1.0",",","-","1.0",")","+","lE","(","1.0",",","-","1.0",",","-","1.0",")","+","lE","(","-","1.0",",","0.0",",","-","1.0",")","+","lE","(","0.0",",","0.0",",","8.0",")","+","lE","(","1.0",",","0.0",",","-","1.0",")","+","lE","(","-","1.0",",","1.0",",","-","1.0",")","+","lE","(","0.0",",","1.0",",","-","1.0",")","+","lE","(","1.0",",","1.0",",","-","1.0",")",")",";","lF","*=","1000.0",";","gl_FragColor","=","vec4","(","lF",",","lF",",","lF",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","lz",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","lA","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","lB","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","lC","=","lB",".","a","-","lA",".","a",";","if","(","lC","!=","0.0",")","{","float","lD","=","smoothstep","(","0.0",",","1.0",",","lB",".","a",")",";","if","(","lA",".","a","==","0.0",")","{","vec3","lE","=","u_glow_color",";","gA","(","lE",")",";","vec4","lF","=","vec4","(","clamp","(","lE",",","0.0",",","1.0",")",",","lD",")",";","gl_FragColor","=","mix","(","lz",",","lF",",","lD",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ni",";","varying","vec2","nj",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nk",";","void","main","(",")","{","vec2","nl","=","(","nk",".","xy","-","a",")",";","float","nm","=","length","(","nl",")",";","vec2","nn","=","u_radial_blur_step","*","nl","/","nm",";","float","no","=","nm","/","u_radial_blur_step",";","nn","*=","min","(","no",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","no","=","max","(","no",",","STEPS_PER_PASS",")",";","vec2","np","=","a",";","float","nq","=","0.0",";","for","(","float","nr","=","0.0",";","nr","<","STEPS_PER_PASS",";","nr","+=","1.0",")","{","if","(","nr","<=","no",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","ns","=","nh","(","u_input",",","np",",","u_camera_range",")",";","nq","+=","max","(","(","1.0","-","pow","(","nm",",","0.3",")",")","*","step","(","0.9",",","ns",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nt","=","texture2D","(","u_input",",","np",")",";","nq","+=","cw","(","nt",")",";"]}]}}]},{type:"textline",tokens:["}","np","+=","nn",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nu","=","a","+","nj",";","float","nv","=","dg","(","vec2","(","2.5","*","(","nu",".","x",")",",","2.5","*","(","nu",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","dg","(","vec2","(","5.0","*","(","nu",".","x",")","-","0.66","*","u_time",",","5.0","*","(","nu",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dM","(","vec2","(","7.5","*","(","nu",".","x",")","+","0.33","*","u_time",",","7.5","*","(","nu",".","y",")","-","0.33","*","u_time",")",")",";","nv","*=","clamp","(","1.2","-","sqrt","(","0.2","*","nm",")",",","0.0",",","1.0",")","*","ni",";","nq","=","max","(","nv",",","nq",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","cs","(","nq","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","ni",";","varying","vec2","nj",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nk",";","void","lG","(","in","vec4","lz",",","in","vec3","lA",",","out","vec3","lB",")","{","float","lC","=","lz",".","w","*","lA",".","x","+","lz",".","y","*","lA",".","z","-","lz",".","z","*","lA",".","y",";","float","lD","=","lz",".","w","*","lA",".","y","+","lz",".","z","*","lA",".","x","-","lz",".","x","*","lA",".","z",";","float","lE","=","lz",".","w","*","lA",".","z","+","lz",".","x","*","lA",".","y","-","lz",".","y","*","lA",".","x",";","float","lF","=","-","lz",".","x","*","lA",".","x","-","lz",".","y","*","lA",".","y","-","lz",".","z","*","lA",".","z",";","lB",".","x","=","lC","*","lz",".","w","-","lF","*","lz",".","x","-","lD","*","lz",".","z","+","lE","*","lz",".","y",";","lB",".","y","=","lD","*","lz",".","w","-","lF","*","lz",".","y","-","lE","*","lz",".","x","+","lC","*","lz",".","z",";","lB",".","z","=","lE","*","lz",".","w","-","lF","*","lz",".","z","-","lC","*","lz",".","y","+","lD","*","lz",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","lH","=","normalize","(","u_sun_direction",")",";","nk","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","lH",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","ni","=","1.0",";","vec3","lI","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","lJ",";","lG","(","u_camera_quat",",","lI",",","lJ",")",";","lJ","=","normalize","(","lJ",")",";","float","lK","=","dot","(","lJ",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lL","=","atan","(","lJ",".","x",",","lJ",".","z",")",";","nj","=","vec2","(","-","lL",",","acos","(","lK",")",")",";","}","else","{","ni","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["nk",".","x","/=","nk",".","w",";","nk",".","y","/=","nk",".","w",";","nk",".","x","=","0.5","*","(","nk",".","x","+","1.0",")",";","nk",".","y","=","0.5","*","(","nk",".","y","+","1.0",")",";","nk","+=","99999.0","*","step","(","nk",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_main",",","a",")",";","vec3","lA","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","gy","(","lz",".","rgb",")",";","float","lB","=","cw","(","texture2D","(","u_god_rays",",","a",")",")",";","vec3","lC","=","lz",".","rgb","+","u_god_rays_intensity","*","vec3","(","lB",")","*","lA",";","gA","(","lC",")",";","gl_FragColor",".","rgb","=","lC",";","gl_FragColor",".","a","=","lz",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_color",",","a",")","*","0.38026",";","lz","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","lz","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","lz","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","lz","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","lz","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","lz","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","lz","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","lz","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","lz",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_input",",","a",")",";","float","lA","=","dot","(","lz",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","lA",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","lz",";","float","lA","=","0.0",";","for","(","float","lB","=","0.025",";","lB","<","1.0",";","lB","+=","0.05",")","for","(","float","lC","=","0.025",";","lC","<","1.0",";","lC","+=","0.05",")","{","lz","=","max","(","texture2D","(","u_input",",","vec2","(","lB",",","lC",")",")",".","r",",","0.01",")",";","lA","+=","log","(","lz",")",";","}","float","lD","=","exp","(","lA","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","lD",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","nl",";","void","main","(",")","{","float","nm","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","nn","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","no","=","texture2D","(","u_main",",","a",")",";","float","np","=","nn","/","nm",";","float","nq","=","u_bloom_edge_lum",";","gl_FragColor","=","no","*","max","(","np","-","nq",",","0.0",")","*","nl",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","nl",";","const","vec3","lz","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","lH","(","in","vec4","lA",",","in","vec3","lB",",","out","vec3","lC",")","{","float","lD","=","lA",".","w","*","lB",".","x","+","lA",".","y","*","lB",".","z","-","lA",".","z","*","lB",".","y",";","float","lE","=","lA",".","w","*","lB",".","y","+","lA",".","z","*","lB",".","x","-","lA",".","x","*","lB",".","z",";","float","lF","=","lA",".","w","*","lB",".","z","+","lA",".","x","*","lB",".","y","-","lA",".","y","*","lB",".","x",";","float","lG","=","-","lA",".","x","*","lB",".","x","-","lA",".","y","*","lB",".","y","-","lA",".","z","*","lB",".","z",";","lC",".","x","=","lD","*","lA",".","w","-","lG","*","lA",".","x","-","lE","*","lA",".","z","+","lF","*","lA",".","y",";","lC",".","y","=","lE","*","lA",".","w","-","lG","*","lA",".","y","-","lF","*","lA",".","x","+","lD","*","lA",".","z",";","lC",".","z","=","lF","*","lA",".","w","-","lG","*","lA",".","z","-","lD","*","lA",".","y","+","lE","*","lA",".","x",";","}","void","main","(",")","{","a","=","2.0","*","a_position",";","vec3","lI",";","lH","(","u_camera_quat",",","lz",",","lI",")",";","nl","=","dot","(","-","lI",",","u_sun_direction",")","*","u_bloom_key",";","nl","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","lz","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","lA","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","lz","-","lA",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","lz","+","u_motion_blur_exp","*","lA",";","}","else","{","gl_FragColor","=","lz",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lz","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","lz",".","r","+","lz",".","g","+","lz",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lA","=","vec2","(","0.0",",","0.0",")",";","vec2","lB","=","u_texel_size",";","vec4","lC",";","lC","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lC","*","0.2270270270",";","lA","+=","lB",";","lC","=","texture2D","(","u_color",",","a","+","lA",")",";","gl_FragColor","+=","lC","*","0.1945945946",";","lC","=","texture2D","(","u_color",",","a","-","lA",")",";","gl_FragColor","+=","lC","*","0.1945945946",";","lA","+=","lB",";","lC","=","texture2D","(","u_color",",","a","+","lA",")",";","gl_FragColor","+=","lC","*","0.1216216216",";","lC","=","texture2D","(","u_color",",","a","-","lA",")",";","gl_FragColor","+=","lC","*","0.1216216216",";","lA","+=","lB",";","lC","=","texture2D","(","u_color",",","a","+","lA",")",";","gl_FragColor","+=","lC","*","0.0540540541",";","lC","=","texture2D","(","u_color",",","a","-","lA",")",";","gl_FragColor","+=","lC","*","0.0540540541",";","lA","+=","lB",";","lC","=","texture2D","(","u_color",",","a","+","lA",")",";","gl_FragColor","+=","lC","*","0.0162162162",";","lC","=","texture2D","(","u_color",",","a","-","lA",")",";","gl_FragColor","+=","lC","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lB","=","u_texel_size",";","vec4","lC","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lC",";","if","(","lC",".","a","==","0.0",")","{","lC","=","texture2D","(","u_color",",","a","+","lB",")",";","if","(","lC",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","lC",".","a",")",";","else","{","lC","=","texture2D","(","u_color",",","a","-","lB",")",";","if","(","lC",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","lC",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","a",";","void","main","(",")","{","a","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nn",";","varying","vec4","no",";","varying","vec4","np",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nw","(","vec2","nr",",","sampler2D","ns",")","{","float","nt","=","texture2D","(","ns",",","nr",")",".","r",";","float","nu","=","texture2D","(","ns",",","nn",".","xy",")",".","r",";","float","nv","=","texture2D","(","ns",",","nn",".","zw",")",".","r",";","return","vec3","(","nt",",","nu",",","nv",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nC","(","vec2","nx",",","sampler2D","ny",")","{","vec3","nz","=","nw","(","nx",",","ny",")",";","vec2","nA","=","abs","(","nz",".","xx","-","nz",".","yz",")",";","vec2","nB","=","step","(","SMAA_PREDICATION_THRESHOLD",",","nA",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","nB",")",";","}"]}]}}]},{type:"textline",tokens:["void","nG","(","bvec2","nD",",","inout","vec2","nE",",","vec2","nF",")","{","if","(","nD",".","x",")","nE",".","x","=","nF",".","x",";","if","(","nD",".","y",")","nE",".","y","=","nF",".","y",";","}","void","nG","(","bvec4","nH",",","inout","vec4","nI",",","vec4","nJ",")","{","nG","(","nH",".","xy",",","nI",".","xy",",","nJ",".","xy",")",";","nG","(","nH",".","zw",",","nI",".","zw",",","nJ",".","zw",")",";","}","vec2","nL","(","vec2","nK",")","{","return","sign","(","nK",")","*","floor","(","abs","(","nK",")","+",".5",")",";","}","vec4","nL","(","vec4","nM",")","{","return","sign","(","nM",")","*","floor","(","abs","(","nM",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oc","(","vec2","nN",",","sampler2D","nO"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nP"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nQ","=","nC","(","nN",",","nP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nQ","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","nR","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","nS","=","dot","(","texture2D","(","nO",",","nN",")",".","rgb",",","nR",")",";","float","nT","=","dot","(","texture2D","(","nO",",","nn",".","xy",")",".","rgb",",","nR",")",";","float","nU","=","dot","(","texture2D","(","nO",",","nn",".","zw",")",".","rgb",",","nR",")",";","vec4","nV",";","nV",".","xy","=","abs","(","nS","-","vec2","(","nT",",","nU",")",")",";","vec2","nW","=","step","(","nQ",",","nV",".","xy",")",";","if","(","dot","(","nW",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","nX","=","dot","(","texture2D","(","nO",",","no",".","xy",")",".","rgb",",","nR",")",";","float","nY","=","dot","(","texture2D","(","nO",",","no",".","zw",")",".","rgb",",","nR",")",";","nV",".","zw","=","abs","(","nS","-","vec2","(","nX",",","nY",")",")",";","vec2","nZ","=","max","(","nV",".","xy",",","nV",".","zw",")",";","float","n_","=","dot","(","texture2D","(","nO",",","np",".","xy",")",".","rgb",",","nR",")",";","float","oa","=","dot","(","texture2D","(","nO",",","np",".","zw",")",".","rgb",",","nR",")",";","nV",".","zw","=","abs","(","vec2","(","nT",",","nU",")","-","vec2","(","n_",",","oa",")",")",";","nZ","=","max","(","nZ",".","xy",",","nV",".","zw",")",";","float","ob","=","max","(","nZ",".","x",",","nZ",".","y",")",";","nW",".","xy","*=","step","(","ob",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","nV",".","xy",")",";","return","nW",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","oe","(","vec2","od",")","{","od",".","r","=","od",".","r","*","abs","(","5.0","*","od",".","r","-","5.0","*","0.75",")",";","return","nL","(","od",")",";","}","vec4","oe","(","vec4","of",")","{","of",".","rb","=","of",".","rb","*","abs","(","5.0","*","of",".","rb","-","5.0","*","0.75",")",";","return","nL","(","of",")",";","}","vec2","on","(","sampler2D","og",",","vec2","oh",",","vec2","oi",",","out","vec2","oj",")","{","vec4","ok","=","vec4","(","oh",",","-","1.0",",","1.0",")",";","vec3","ol","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","om","=","0",";","om","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","om","++",")","{","if","(","ok",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","ok",".","w",">","0.9",")","{","ok",".","xyz","+=","ol","*","vec3","(","oi",",","1.0",")",";","oj","=","texture2D","(","og",",","ok",".","xy",",","0.0",")",".","rg",";","ok",".","w","=","dot","(","oj",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","ok",".","zw",";","}","vec2","ov","(","sampler2D","oo",",","vec2","op",",","vec2","oq",",","out","vec2","or",")","{","vec4","os","=","vec4","(","op",",","-","1.0",",","1.0",")",";","os",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","ot","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","ou","=","0",";","ou","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","ou","++",")","{","if","(","os",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","os",".","w",">","0.9",")","{","os",".","xyz","=","ot","*","vec3","(","oq",",","1.0",")","+","os",".","xyz",";","or","=","texture2D","(","oo",",","os",".","xy",",","0.0",")",".","rg",";","or","=","oe","(","or",")",";","os",".","w","=","dot","(","or",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","os",".","zw",";","}","vec2","oB","(","sampler2D","ow",",","vec2","ox",",","vec2","oy",",","float","oz",")","{","vec2","oA","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","oy","+","ox",";","oA","=","SMAA_AREATEX_PIXEL_SIZE","*","oA","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","oA",".","x","+=","0.5",";","oA",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","oz",";","return","texture2D","(","ow",",","oA",",","0.0",")",".","rg",";","}","vec2","oQ","(","sampler2D","oC",",","sampler2D","oD",",","vec2","oE",",","vec2","oF",",","vec4","oG",")","{","vec2","oH","=","vec2","(","0.0",",","0.0",")",";","vec4","oI",";","vec2","oJ",";","if","(","oF",".","r",">","0.0",")","{","oI",".","xz","=","on","(","oC",",","oE",",","vec2","(","-","1.0",",","1.0",")",",","oJ",")",";","oI",".","x","+=","float","(","oJ",".","y",">","0.9",")",";","}","else","oI",".","xz","=","vec2","(","0.0",",","0.0",")",";","oI",".","yw","=","on","(","oC",",","oE",",","vec2","(","1.0",",","-","1.0",")",",","oJ",")",";","if","(","oI",".","x","+","oI",".","y",">","2.0",")","{","vec4","oK","=","vec4","(","-","oI",".","x","+","0.25",",","oI",".","x",",","oI",".","y",",","-","oI",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","oE",".","xyxy",";","vec4","oL",";","oL",".","xy","=","texture2D","(","oC",",","oK",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","oL",".","zw","=","texture2D","(","oC",",","oK",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","oL",".","yxwz","=","oe","(","oL",".","xyzw",")",";","vec2","oM","=","vec2","(","2.0",",","2.0",")","*","oL",".","xz","+","oL",".","yw",";","nG","(","bvec2","(","step","(","0.9",",","oI",".","zw",")",")",",","oM",",","vec2","(","0.0",",","0.0",")",")",";","oH","+=","oB","(","oD",",","oI",".","xy",",","oM",",","oG",".","z",")",";","}","oI",".","xz","=","ov","(","oC",",","oE",",","vec2","(","-","1",",","-","1",")",",","oJ",")",";","if","(","texture2D","(","oC",",","oE","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","oI",".","yw","=","ov","(","oC",",","oE",",","vec2","(","1",",","1",")",",","oJ",")",";","oI",".","y","+=","float","(","oJ",".","y",">","0.9",")",";","}","else","oI",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","oI",".","x","+","oI",".","y",">","2.0",")","{","vec4","oN","=","vec4","(","-","oI",".","x",",","-","oI",".","x",",","oI",".","y",",","oI",".","y",")","*","u_texel_size",".","xyxy","+","oE",".","xyxy",";","vec4","oO",";","oO",".","x","=","texture2D","(","oC",",","oN",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","oO",".","y","=","texture2D","(","oC",",","oN",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","oO",".","zw","=","texture2D","(","oC",",","oN",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","oP","=","vec2","(","2.0",",","2.0",")","*","oO",".","xz","+","oO",".","yw",";","nG","(","bvec2","(","step","(","0.9",",","oI",".","zw",")",")",",","oP",",","vec2","(","0",",","0",")",")",";","oH","+=","oB","(","oD",",","oI",".","xy",",","oP",",","oG",".","w",")",".","gr",";","}","return","oH",";","}"]}]}}]},{type:"textline",tokens:["float","oW","(","sampler2D","oR",",","vec2","oS",",","float","oT",")","{","vec2","oU","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","oV","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","oT",",","1.0",")",";","oU","+=","vec2","(","-","1.0",",","1.0",")",";","oV","+=","vec2","(","0.5",",","-","0.5",")",";","oU","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","oV","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","oR",",","oU","*","oS","+","oV",",","0.0",")",".","r",";","}","float","pd","(","sampler2D","oX",",","sampler2D","oY",",","vec2","oZ",",","float","o_",")","{","vec2","pa","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pb","=","0",";","pb","<","SMAA_MAX_SEARCH_STEPS",";","pb","++",")","{","if","(","oZ",".","x",">","o_","&&","pa",".","g",">","0.8281","&&","pa",".","r","==","0.0",")","{","pa","=","texture2D","(","oX",",","oZ",",","0.0",")",".","rg",";","oZ","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","oZ",";","}","}","float","pc","=","-","(","255.0","/","127.0",")","*","oW","(","oY",",","pa",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","pc","+","oZ",".","x",";","}","float","pl","(","sampler2D","pe",",","sampler2D","pf",",","vec2","pg",",","float","ph",")","{","vec2","pi","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pj","=","0",";","pj","<","SMAA_MAX_SEARCH_STEPS",";","pj","++",")","{","if","(","pg",".","x","<","ph","&&","pi",".","g",">","0.8281","&&","pi",".","r","==","0.0",")","{","pi","=","texture2D","(","pe",",","pg",",","0.0",")",".","rg",";","pg","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","pg",";","}","}","float","pk","=","-","(","255.0","/","127.0",")","*","oW","(","pf",",","pi",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","pk","+","pg",".","x",";","}","float","pt","(","sampler2D","pm",",","sampler2D","pn",",","vec2","po",",","float","pp",")","{","vec2","pq","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pr","=","0",";","pr","<","SMAA_MAX_SEARCH_STEPS",";","pr","++",")","{","if","(","po",".","y",">","pp","&&","pq",".","r",">","0.8281","&&","pq",".","g","==","0.0",")","{","pq","=","texture2D","(","pm",",","po",",","0.0",")",".","rg",";","po","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","po",";","}","}","float","ps","=","-","(","255.0","/","127.0",")","*","oW","(","pn",",","pq",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","ps","+","po",".","y",";","}","float","pB","(","sampler2D","pu",",","sampler2D","pv",",","vec2","pw",",","float","px",")","{","vec2","py","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pz","=","0",";","pz","<","SMAA_MAX_SEARCH_STEPS",";","pz","++",")","{","if","(","pw",".","y","<","px","&&","py",".","r",">","0.8281","&&","py",".","g","==","0.0",")","{","py","=","texture2D","(","pu",",","pw",",","0.0",")",".","rg",";","pw","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pw",";","}","}","float","pA","=","-","(","255.0","/","127.0",")","*","oW","(","pv",",","py",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","pA","+","pw",".","y",";","}","vec2","pI","(","sampler2D","pC",",","vec2","pD",",","float","pE",",","float","pF",",","float","pG",")","{","vec2","pH","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","nL","(","4.0","*","vec2","(","pE",",","pF",")",")","+","pD",";","pH","=","SMAA_AREATEX_PIXEL_SIZE","*","pH","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","pH",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","pG","+","pH",".","y",";","return","texture2D","(","pC",",","pH",",","0.0",")",".","rg",";","}","void","pQ","(","sampler2D","pJ",",","inout","vec2","pK",",","vec4","pL",",","vec2","pM",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pN","=","step","(","pM",".","xy",",","pM",".","yx",")",";","vec2","pO","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pN",";","pO","/=","pN",".","x","+","pN",".","y",";","vec2","pP","=","vec2","(","1.0",",","1.0",")",";","pP",".","x","-=","pO",".","x","*","texture2D","(","pJ",",","pL",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","pP",".","x","-=","pO",".","y","*","texture2D","(","pJ",",","pL",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","pP",".","y","-=","pO",".","x","*","texture2D","(","pJ",",","pL",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","pP",".","y","-=","pO",".","y","*","texture2D","(","pJ",",","pL",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","pK","*=","clamp","(","pP",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","pY","(","sampler2D","pR",",","inout","vec2","pS",",","vec4","pT",",","vec2","pU",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pV","=","step","(","pU",".","xy",",","pU",".","yx",")",";","vec2","pW","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pV",";","pW","/=","pV",".","x","+","pV",".","y",";","vec2","pX","=","vec2","(","1.0",",","1.0",")",";","pX",".","x","-=","pW",".","x","*","texture2D","(","pR",",","pT",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","pX",".","x","-=","pW",".","y","*","texture2D","(","pR",",","pT",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","pX",".","y","-=","pW",".","x","*","texture2D","(","pR",",","pT",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","pX",".","y","-=","pW",".","y","*","texture2D","(","pR",",","pT",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","pS","*=","clamp","(","pX",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qq","(","vec2","pZ",",","vec2","p_",",","sampler2D","qa",",","sampler2D","qb",",","sampler2D","qc",",","vec4","qd",")","{","vec4","qe","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","qf","=","texture2D","(","qa",",","pZ",")",".","rg",";","if","(","qf",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qe",".","rg","=","oQ","(","qa",",","qb",",","pZ",",","qf",",","qd",")",";","if","(","qe",".","r","==","-","qe",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","qg",";","vec3","qh",";","qh",".","x","=","pd","(","qa",",","qc",",","nn",".","xy",",","np",".","x",")",";","qh",".","y","=","no",".","y",";","qg",".","x","=","qh",".","x",";","float","qi","=","texture2D","(","qa",",","qh",".","xy",",","0.0",")",".","r",";","qh",".","z","=","pl","(","qa",",","qc",",","nn",".","zw",",","np",".","y",")",";","qg",".","y","=","qh",".","z",";","qg","=","abs","(","nL","(","qg","/","u_texel_size",".","xx","-","p_",".","xx",")",")",";","vec2","qj","=","sqrt","(","qg",")",";","float","qk","=","texture2D","(","qa",",","qh",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","qe",".","rg","=","pI","(","qb",",","qj",",","qi",",","qk",",","qd",".","y",")",";","qh",".","y","=","pZ",".","y",";","pQ","(","qa",",","qe",".","rg",",","qh",".","xyzy",",","qg",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","qf",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","qf",".","r",">","0.0",")","{","vec2","ql",";","vec3","qm",";","qm",".","y","=","pt","(","qa",",","qc",",","no",".","xy",",","np",".","z",")",";","qm",".","x","=","nn",".","x",";","ql",".","x","=","qm",".","y",";","float","qn","=","texture2D","(","qa",",","qm",".","xy",",","0.0",")",".","g",";","qm",".","z","=","pB","(","qa",",","qc",",","no",".","zw",",","np",".","w",")",";","ql",".","y","=","qm",".","z",";","ql","=","abs","(","nL","(","ql","/","u_texel_size",".","yy","-","p_",".","yy",")",")",";","vec2","qo","=","sqrt","(","ql",")",";","float","qp","=","texture2D","(","qa",",","qm",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","qe",".","ba","=","pI","(","qb",",","qo",",","qn",",","qp",",","qd",".","x",")",";","qm",".","x","=","pZ",".","x",";","pY","(","qa",",","qe",".","ba",",","qm",".","xyxz",",","ql",")",";","}","return","qe",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qH","(","vec2","qr",",","sampler2D","qs",",","sampler2D","qt"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qu"]}]}}]},{type:"textline",tokens:[")","{","vec4","qv",";","qv",".","x","=","texture2D","(","qt",",","nm",".","xy",")",".","a",";","qv",".","y","=","texture2D","(","qt",",","nm",".","zw",")",".","g",";","qv",".","wz","=","texture2D","(","qt",",","qr",")",".","xz",";","if","(","dot","(","qv",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","qw","=","texture2D","(","qs",",","qr",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qx","=","texture2D","(","qu",",","a",")",";","vec2","qy","=","2.0","*","cE","(","qx",")","-","1.0",";","qw",".","a","=","sqrt","(","2.0","*","length","(","qy",")",")",";"]}]}}]},{type:"textline",tokens:["return","qw",";","}","else","{","bool","qz","=","max","(","qv",".","x",",","qv",".","z",")",">","max","(","qv",".","y",",","qv",".","w",")",";","vec4","qA","=","vec4","(","0.0",",","qv",".","y",",","0.0",",","qv",".","w",")",";","vec2","qB","=","qv",".","yw",";","nG","(","bvec4","(","qz",",","qz",",","qz",",","qz",")",",","qA",",","vec4","(","qv",".","x",",","0.0",",","qv",".","z",",","0.0",")",")",";","nG","(","bvec2","(","qz",",","qz",")",",","qB",",","qv",".","xz",")",";","qB","/=","dot","(","qB",",","vec2","(","1.0",",","1.0",")",")",";","vec4","qC","=","qA","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","qr",".","xyxy",";","vec4","qD","=","qB",".","x","*","texture2D","(","qs",",","qC",".","xy",",","0.0",")",";","qD","+=","qB",".","y","*","texture2D","(","qs",",","qC",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qE","=","texture2D","(","qu",",","qC",".","xy",")",";","vec2","qF","=","2.0","*","cE","(","qE",")","-","1.0",";","vec2","qG","=","qB",".","x","*","qF",";","qE","=","texture2D","(","qu",",","qC",".","zw",")",";","qF","=","2.0","*","cE","(","qE",")","-","1.0",";","qG","+=","qB",".","y","*","qF",";","qD",".","a","=","sqrt","(","2.0","*","length","(","qG",")",")",";"]}]}}]},{type:"textline",tokens:["return","qD",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qT","(","vec2","qI",",","sampler2D","qJ",",","sampler2D","qK"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qL"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qM","=","texture2D","(","qL",",","a",")",";","vec2","qN",";","qN","=","2.0","*","cE","(","qM",")","-","1.0",";","vec4","qO","=","texture2D","(","qJ",",","qI",")",";","vec4","qP","=","texture2D","(","qK",",","qI","-","qN",")",";","float","qQ","=","abs","(","qO",".","a","*","qO",".","a","-","qP",".","a","*","qP",".","a",")","/","2.0",";","float","qR","=","0.5","*","clamp","(","1.0","-","sqrt","(","qQ",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","qS","=","mix","(","qO",",","qP",",","qR",")",";","qS",".","a","=","1.0",";","return","qS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qO","=","texture2D","(","qJ",",","qI",")",";","vec4","qP","=","texture2D","(","qK",",","qI",")",";","return","mix","(","qO",",","qP",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qU","=","vec4","(","oc","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qU","=","qq","(","a",",","nq",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qU","=","qH","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qU","=","vec4","(","qT","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qU","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","qU",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nn",";","varying","vec4","no",";","varying","vec4","np",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","lA","(","vec2","lz",")","{","nn","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","lz",".","xyxy",";","no","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","lz",".","xyxy",";","np","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","lz",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","lD","(","vec2","lB",",","out","vec2","lC",")","{","lC","=","lB","/","u_texel_size",";","nn","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","lB",".","xyxy",";","no","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","lB",".","xyxy",";","np","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","nn",".","xz",",","no",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","lF","(","vec2","lE",")","{","nm","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","lE",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["lA","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["lD","(","a",",","nq",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["lF","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","ns","(","in","vec2","nr",")","{","return","nh","(","u_depth",",","nr",",","u_camera_range",")",";","}","void","main","(",")","{","float","nt","=","texture2D","(","u_color",",","a",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","nt",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["vec3","nu","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","a","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","float","nv","=","ns","(","a",")",";","float","nw","=","nv","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_8"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nx","=","8.0",";","const","int","ny","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nx","=","16.0",";","const","int","ny","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_24"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nx","=","24.0",";","const","int","ny","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nx","=","32.0",";","const","int","ny","=","4",";"]}]}}]},{type:"textline",tokens:["float","nz","=","u_ssao_radius_increase","*","0.001",";","const","float","nA","=","1.0","+","2.4","/","nx",";","float","nB","=","0.0",";","for","(","int","nC","=","0",";","nC","<","ny",";","nC","++",")","for","(","int","nD","=","-","1",";","nD","<=","1",";","nD","+=","2",")","for","(","int","nE","=","-","1",";","nE","<=","1",";","nE","+=","2",")","for","(","int","nF","=","-","1",";","nF","<=","1",";","nF","+=","2",")","{","vec3","nG","=","reflect","(","normalize","(","vec3","(","nD",",","nE",",","nF",")",")",",","nu",")","*","(","nz","*=","nA",")",";","vec3","nH","=","vec3","(","a",",","nw",")",";","nH","+=","vec3","(","nG",".","xy",",","nG",".","z","*","nw","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nH",".","z","-=","1.4","*","(","nH",".","z","-","nw",")","*","step","(","nw",",","nH",".","z",")",";"]}]}}]},{type:"textline",tokens:["float","nI","=","ns","(","nH",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","float","nJ","=","clamp","(","(","nw","-","nI",")","/","nI",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nB","+=","mix","(","1.0",",","nJ",",","step","(","nI",",","nH",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nB","+=","mix","(","step","(","nH",".","z",",","nI",")",",","0.5",",","nJ",")",";"]}]}}]},{type:"textline",tokens:["}","nB","=","nB","/","nx",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nB","=","clamp","(","nB","*","nB","+","0.6","*","nB",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nB","=","clamp","(","nB","*","nB","+","nB",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["float","nK","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","nv",")",";","nB","=","mix","(","1.0",",","nB",",","nK",")",";","gl_FragColor","=","vec4","(","nt",",","nB",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","ns","(","in","vec2","nr",")","{","return","nh","(","u_depth",",","nr",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","nt","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nu","=","ns","(","a",")",";","float","nv","=","0.0",";","float","nw","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["vec2","nx","=","vec2","(","-","2.0",")",";","for","(","int","ny","=","0",";","ny","<","4",";","++","ny",")","{","for","(","int","nz","=","0",";","nz","<","4",";","++","nz",")","{","vec2","nA","=","(","nx","+","vec2","(","float","(","ny",")",",","float","(","nz",")",")",")","*","u_texel_size",";","float","nB","=","texture2D","(","u_ssao_mask",",","a","+","nA",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nC","=","ns","(","a","+","nA",")",";","float","nD","=","1.0","-","clamp","(","abs","(","nC","-","nu",")","*","nw",",","0.0",",","1.0",")",";","nt","+=","nB","*","nD",";","nv","+=","nD",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nt","+=","nB",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nt","/","nv",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nt","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","lz","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","lA","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","lz","-","1.0",",","1.0",")",";","vec4","lB","=","u_view_proj_inverse","*","lA",";","vec4","lC","=","lB","/","lB",".","w",";","vec4","lD","=","u_view_proj_prev","*","lC",";","lD","/=","lD",".","w",";","vec2","lE","=","(","lA",".","xy","-","lD",".","xy",")","/","4.0","+","0.5",";","lE","=","clamp","(","lE",",","0.0",",","1.0",")",";","gl_FragColor","=","cs","(","lE",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","float","c","=","1.0",";","struct","d","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","g","(","vec3","e",",","vec3","f",")","{","return","any","(","lessThan","(","abs","(","e","-","f",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","j","(","in","vec4","h",",","in","vec3","i",")","{","return","i","+","2.0","*","cross","(","h",".","xyz",",","cross","(","h",".","xyz",",","i",")","+","h",".","w","*","i",")",";","}","mat4","k","(",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","m","(","float","l",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","cos","(","l",")",",","sin","(","l",")",",","b",",","b",",","-","sin","(","l",")",",","cos","(","l",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","o","(","float","n",")","{","return","mat4","(","cos","(","n",")",",","b",",","-","sin","(","n",")",",","b",",","b",",","c",",","b",",","b",",","sin","(","n",")",",","b",",","cos","(","n",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","q","(","float","p",")","{","return","mat4","(","cos","(","p",")",",","sin","(","p",")",",","b",",","b",",","-","sin","(","p",")",",","cos","(","p",")",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","d","s","(","in","d","r",")","{","return","d","(","r",".","a",",","r",".","b",",","normalize","(","r",".","c",")",",","normalize","(","r",".","d",")",",","normalize","(","r",".","e",")",",","r",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","t","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","z","(","vec3","u",",","mat4","v",")","{","vec3","w","=","vec3","(","v","[","0","]","[","0","]",",","v","[","1","]","[","0","]",",","v","[","2","]","[","0","]",")",";","vec3","x","=","vec3","(","v","[","0","]","[","1","]",",","v","[","1","]","[","1","]",",","v","[","2","]","[","1","]",")",";","vec3","y","=","vec3","(","v","[","0","]","[","2","]",",","v","[","1","]","[","2","]",",","v","[","2","]","[","2","]",")",";","x","=","cross","(","y",",","w",")",";","return","mat4","(","vec4","(","w",",","0.0",")",",","vec4","(","x",",","0.0",")",",","vec4","(","y",",","0.0",")",",","vec4","(","u",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","F","(","vec3","A",",","vec3","B",")","{","vec3","C","=","A","-","B",";","C",".","y","=","0.0",";","C","=","normalize","(","C",")",";","vec3","D","=","normalize","(","cross","(","t",",","C",")",")",";","vec3","E","=","normalize","(","cross","(","C",",","D",")",")",";","return","mat4","(","vec4","(","D",",","0.0",")",",","vec4","(","E",",","0.0",")",",","vec4","(","C",",","0.0",")",",","vec4","(","B",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","Q","(","in","vec3","G",",","float","H",",","float","I",",","float","J",",","vec3","L",")","{","float","M","=","fract","(","length","(","L",")","/","0.17",")",";","float","N","=","J","+","M","/","10.0",";","float","O","=","M",";","if","(","J","!=","0.0",")","O","/=","J",";","G","*=","1.0","+","0.5","*","sin","(","H",")",";","float","P","=","length","(","G",")","*","I","*","sin","(","2.0","*","3.14","*","H","*","N","+","O",")",";","return","q","(","P",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","aa","(","in","vec3","R",",","in","vec3","S",",","in","mat4","T",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","U","=","z","(","S",",","T",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","V","=","fract","(","(","S",".","x","*","1.43","+","S",".","y","*","0.123","+","S",".","z","*","6.1",")",")",";","float","W","=","2.0","*","M_PI","*","V",";","vec3","X","=","normalize","(","vec3","(","T","[","0","]","[","2","]",",","0.0",",","T","[","2","]","[","2","]",")",")",";","float","Y","=","acos","(","X","[","2","]",")",";","if","(","X","[","0","]","<","0.0",")","Y","=","2.0","*","M_PI","-","Y",";","float","Z","=","Y","-","W",";","if","(","Z","<","0.0",")","Z","=","2.0","*","M_PI","+","Z",";","float","_","=","W",";","if","(","Z","<=","MAX_BILLBOARD_ANGLE",")","_","+=","Z",";","else","if","(","Z","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","_","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Z","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","Z","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","_","+=","Z","-","M_PI",";","else","if","(","Z","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","_","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Z","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","_","+=","Z","-","2.0","*","M_PI",";","mat4","U","=","o","(","_",")",";","U","[","3","]","=","vec4","(","S",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","U","=","F","(","R",",","S",")",";"]}]}}]},{type:"textline",tokens:["return","U",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ag","(","in","vec3","ab",",","in","vec3","ac",",","in","mat4","ad",",","mat4","ae",")","{","mat4","af","=","aa","(","ab",",","ac",",","ad",")",";","ae","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","af","=","af","*","ae",";","return","af",";","}"]}]}}]},{type:"textline",tokens:["d","an","(","in","vec3","ah",",","in","vec3","ai",",","in","vec3","aj",",","in","vec3","ak",",","in","vec3","al",",","in","mat4","am",")","{","ah","=","(","am","*","vec4","(","ah",",","1.0",")",")",".","xyz",";","ai","=","(","am","*","vec4","(","ai",",","1.0",")",")",".","xyz",";","aj","=","(","am","*","vec4","(","aj",",","0.0",")",")",".","xyz",";","ak","=","(","am","*","vec4","(","ak",",","0.0",")",")",".","xyz",";","al","=","(","am","*","vec4","(","al",",","0.0",")",")",".","xyz",";","return","s","(","d","(","ah",",","ai",",","aj",",","ak",",","al",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","aq","(","vec2","ao",",","vec3","ap",")","{","return","(","ao","+","0.5",")","*","ap",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","az","(","in","vec4","ar",",","in","vec4","as",",","in","float","at",")","{","float","au","=","ar","[","0","]","*","as","[","0","]","+","ar","[","1","]","*","as","[","1","]","+","ar","[","2","]","*","as","[","2","]","+","ar","[","3","]","*","as","[","3","]",";","if","(","au","<","0.0",")","{","as","*=","-","1.0",";","au","=","-","au",";","}","if","(","abs","(","au",")",">=","1.0",")","return","ar",";","float","av","=","acos","(","au",")",";","float","aw","=","sqrt","(","1.0","-","au","*","au",")",";","if","(","abs","(","aw",")","<","0.001",")","return","vec4","(","ar","*","0.5","+","as","*","0.5",")",";","float","ax","=","sin","(","(","1.0","-","at",")","*","av",")","/","aw",";","float","ay","=","sin","(","at","*","av",")","/","aw",";","return","ar","*","ax","+","as","*","ay",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aO","(","in","vec3","aA",",","in","vec4","aB",",","in","vec4","aC",",","in","vec4","aD",",","in","vec4","aE",",","in","float","aF",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aG","=","az","(","aB",",","aC",",","aF",")",";","vec4","aH","=","mix","(","aD",",","aE",",","aF",")",";","vec3","aI","=","j","(","aG",",","aA",")",";","vec3","aJ","=","aI","*","aH",".","w","+","aH",".","xyz",";","return","aJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aK","=","j","(","aB",",","aA",")",";","vec3","aL","=","j","(","aC",",","aA",")",";","vec3","aM","=","aK","*","aD",".","w","+","aD",".","xyz",";","vec3","aN","=","aL","*","aE",".","w","+","aE",".","xyz",";","return","mix","(","aM",",","aN",",","aF",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aX","(","in","vec3","aP",",","in","vec4","aQ",",","in","vec4","aR",",","in","float","aS",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aT","=","az","(","aQ",",","aR",",","aS",")",";","vec3","aU","=","j","(","aT",",","aP",")",";","return","aU",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aV","=","j","(","aQ",",","aP",")",";","vec3","aW","=","j","(","aR",",","aP",")",";","return","mix","(","aV",",","aW",",","aS",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aO","(","in","vec3","aY",",","in","vec4","aZ",",","in","vec4","a_",")","{","vec3","ba","=","j","(","aZ",",","aY",")",";","vec3","bb","=","ba","*","a_",".","w","+","a_",".","xyz",";","return","bb",";","}","vec3","aX","(","in","vec3","bc",",","in","vec4","bd",")","{","vec3","be","=","j","(","bd",",","bc",")",";","return","be",";","}"]}]}}]},{type:"textline",tokens:["void","bt","(","inout","vec3","bf",",","inout","vec3","bg",",","inout","vec3","bh",",","inout","vec3","bi",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bj","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bk","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bl","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bm","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bn","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec4","bo","=","a_influence",";","for","(","int","bp","=","0",";","bp","<","4",";","bp","++",")","{","int","bq","=","int","(","bo","[","bp","]",")",";","float","br","=","fract","(","bo","[","bp","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bk","+=","br","*","aO","(","bf",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","u_transb","[","bq","]",",","u_transa","[","bq","]",",","bj",")",";","bl","+=","br","*","aX","(","bg",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","bj",")",";","bm","+=","br","*","aX","(","bh",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","bj",")",";","bn","+=","br","*","aX","(","bi",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","bj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bk","+=","br","*","aO","(","bf",",","u_quatsb","[","bq","]",",","u_transb","[","bq","]",")",";","bl","+=","br","*","aX","(","bg",",","u_quatsb","[","bq","]",")",";","bm","+=","br","*","aX","(","bh",",","u_quatsb","[","bq","]",")",";","bn","+=","br","*","aX","(","bi",",","u_quatsb","[","bq","]",")",";"]}]}}]},{type:"textline",tokens:["}","bf","=","bk",";","bg","=","bl",";","bh","=","bm",";","bi","=","bn",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bs","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bs",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bf","=","aO","(","bf",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","u_transb","[","bs","]",",","u_transa","[","bs","]",",","bj",")",";","bg","=","aX","(","bg",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","bj",")",";","bh","=","aX","(","bh",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","bj",")",";","bi","=","aX","(","bi",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","bj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bf","=","aO","(","bf",",","u_quatsb","[","bs","]",",","u_transb","[","bs","]",")",";","bg","=","aX","(","bg",",","u_quatsb","[","bs","]",")",";","bh","=","aX","(","bh",",","u_quatsb","[","bs","]",")",";","bi","=","aX","(","bi",",","u_quatsb","[","bs","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bH","(","inout","vec3","bu",",","in","vec3","bv",",","in","float","bw",",","in","float","bx",",","in","float","by",",","in","vec3","bz",",","in","float","bA",")","{","float","bB","=","length","(","bv",")",";","float","bC","=","bx","*","(","1.0","+","0.1","*","fract","(","bB",")",")",";","float","bD","=","bw","*","bA","*","(","1.0","+","sin","(","2.0","*","3.14","*","by","*","bC","+","bB",")",")",";","float","bE","=","(","bu",".","y","-","bv",".","y",")","*","abs","(","bD",")",";","bE","+=","1.0",";","bE","*=","bE",";","bE","=","bE","*","bE","-","bE",";","vec3","bF","=","bu",";","bF",".","xz","+=","bz",".","xz","*","bE","*","sign","(","bD",")",";","float","bG","=","length","(","bu","-","bv",")",";","bu","=","bv","+","normalize","(","bF","-","bv",")","*","bG",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bJ","(","vec4","bI",")","{","return","bI","*","bI","*","(","3.0","-","2.0","*","bI",")",";","}","vec4","bL","(","vec4","bK",")","{","return","abs","(","fract","(","bK","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bN","(","vec4","bM",")","{","return","bJ","(","bL","(","bM",")",")",";","}","void","cd","(","inout","vec3","bO",",","in","float","bP",",","in","vec3","bQ",",","in","vec3","bR",",","in","vec3","bS",",","in","float","bT",",","in","float","bU",",","in","float","bV",",","in","vec3","bW",")","{","float","bX",";","float","bY",";","float","bZ",";","vec2","b_",";","vec4","ca",";","vec2","cb",";","vec3","cc",";","bX","=","dot","(","bS",",","vec3","(","1.0",")",")",";","bY","=","bX","+","bW",".","g",";","bZ","=","dot","(","bO",",","vec3","(","bW",".","g",")",")",";","b_","=","(","bP","+","vec2","(","bZ",",","bY",")",")",";","ca","=","(","(","fract","(","(","b_",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bR",")","*","bT",";","ca","=","bN","(","ca",")",";","cb","=","ca",".","xz","+","ca",".","yw",";","cb",".","y","=","0.5","-","cb",".","y",";","cc","=","cb",".","xyx","*","bW",".","rbr","*","vec3","(","bU","*","bQ",".","x",",","bV",",","bU","*","bQ",".","z",")",";","bO","+=","cc",";","}"]}]}}]},{type:"textline",tokens:["void","ck","(","inout","vec3","ce",",","inout","vec3","cf",",","in","vec3","cg",")","{","vec3","ch","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","cf",";","vec3","cj","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","ce",";","vec3","cj","=","cf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cd","(","ci",",","u_time",",","cg",",","ch",",","cj",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bH","(","ci",",","cj",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ch",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bH","(","ci",",","cj",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ch",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["ce","+=","ci","-","cf",";","cf","=","ci",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ce","=","ci",";","cf","=","cj",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cl","=","255.0",";","float","cm","=","0.0",";","float","cn","=","1.0",";","vec4","cs","(","const","in","float","co",")","{","vec4","cp","=","vec4","(","cl","*","cl","*","cl",",","cl","*","cl",",","cl",",","cn",")",";","vec4","cq","=","vec4","(","cm",",","cn","/","cl",",","cn","/","cl",",","cn","/","cl",")",";","vec4","cr","=","fract","(","co","*","cp",")",";","cr","-=","cr",".","xxyz","*","cq",";","return","cr",";","}","float","cw","(","const","in","vec4","ct",")","{","float","cu",";","vec4","cv","=","vec4","(","cn","/","(","cl","*","cl","*","cl",")",",","cn","/","(","cl","*","cl",")",",","cn","/","cl",",","cn",")",";","cu","=","dot","(","ct",",","cv",")",";","return","cu",";","}","vec4","cs","(","const","in","vec2","cx",")","{","vec2","cy","=","vec2","(","cl",",","cn",")",";","vec2","cz","=","vec2","(","cm",",","cn","/","cl",")",";","vec4","cA","=","fract","(","cx",".","xxyy","*","cy",".","xyxy",")",";","cA","-=","cA",".","xxzz","*","cz",".","xyxy",";","if","(","cx",".","r","==","cn",")","cA",".","rg","=","vec2","(","cm",",","cn",")",";","if","(","cx",".","g","==","cn",")","cA",".","ba","=","vec2","(","cm",",","cn",")",";","return","cA",";","}","vec2","cE","(","const","in","vec4","cB",")","{","vec2","cC",";","vec2","cD","=","vec2","(","cn","/","cl",",","cn",")",";","cC",".","r","=","dot","(","cB",".","rg",",","cD",")",";","cC",".","g","=","dot","(","cB",".","ba",",","cD",")",";","return","cC",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cM","=","0.0",";","float","cN","=","1.0",";","vec4","cP","(","vec4","cO",")","{","return","cO","-","floor","(","cO","*","(","cN","/","289.0",")",")","*","289.0",";","}","vec3","cP","(","vec3","cQ",")","{","return","cQ","-","floor","(","cQ","*","(","cN","/","289.0",")",")","*","289.0",";","}","vec2","cP","(","vec2","cR",")","{","return","cR","-","floor","(","cR","*","(","cN","/","289.0",")",")","*","289.0",";","}","vec4","cT","(","vec4","cS",")","{","return","cS","-","floor","(","cS","*","(","cN","/","7.0",")",")","*","7.0",";","}","vec4","cV","(","vec4","cU",")","{","return","cP","(","(","34.0","*","cU","+","5.0",")","*","cU",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","dg","(","vec2","cW",")","{","vec2","cX","=","cP","(","floor","(","cW",")",")",";","vec2","cY","=","fract","(","cW",")",";","vec4","cZ","=","cY",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","c_","=","cY",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","da","=","cV","(","cX",".","x","+","vec4","(","cM",",","cN",",","cM",",","cN",")",")",";","da","=","cV","(","da","+","cX",".","y","+","vec4","(","cM",",","cM",",","cN",",","cN",")",")",";","vec4","db","=","cT","(","da",")","*","K","+","K2",";","vec4","dc","=","cT","(","floor","(","da","*","K",")",")","*","K","+","K2",";","vec4","dd","=","cZ","+","JITTER","*","db",";","vec4","de","=","c_","+","JITTER","*","dc",";","vec4","df","=","dd","*","dd","+","de","*","de",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["df",".","xy","=","min","(","df",".","xy",",","df",".","zw",")",";","df",".","x","=","min","(","df",".","x",",","df",".","y",")",";","return","df",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["df",".","xy","=","(","df",".","x","<","df",".","y",")","?","df",".","xy",":","df",".","yx",";","df",".","xz","=","(","df",".","x","<","df",".","z",")","?","df",".","xz",":","df",".","zx",";","df",".","xw","=","(","df",".","x","<","df",".","w",")","?","df",".","xw",":","df",".","wx",";","df",".","y","=","min","(","df",".","y",",","df",".","z",")",";","df",".","y","=","min","(","df",".","y",",","df",".","w",")",";","return","sqrt","(","df",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dw","(","vec2","dh",",","float","di",")","{","vec2","dj","=","cP","(","floor","(","dh",")",")",";","vec2","dk","=","fract","(","dh",")",";","vec4","dl","=","dk",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","dm","=","dk",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","dn","=","cV","(","dj",".","x","+","vec4","(","cM",",","cN",",","cM",",","cN",")",")",";","dn","=","cV","(","dn","+","dj",".","y","+","vec4","(","cM",",","cM",",","cN",",","cN",")",")",";","vec4","dp","=","cT","(","dn",")","*","K","+","K2",";","vec4","dq","=","cT","(","floor","(","dn","*","K",")",")","*","K","+","K2",";","vec4","dr","=","dl","+","JITTER","*","dp",";","vec4","ds","=","dm","+","JITTER","*","dq",";","vec4","dt","=","dr","*","dr","+","ds","*","ds",";","dr","+=","di",";","ds","+=","di",";","vec4","du","=","dr","*","dr","+","ds","*","ds",";","dr","+=","di",";","ds","+=","di",";","vec4","dv","=","dr","*","dr","+","ds","*","ds",";","dt",".","xy","=","min","(","dt",".","xy",",","dt",".","zw",")",";","dt",".","x","=","min","(","dt",".","x",",","dt",".","y",")",";","du",".","xy","=","min","(","du",".","xy",",","du",".","zw",")",";","du",".","x","=","min","(","du",".","x",",","du",".","y",")",";","dv",".","xy","=","min","(","dv",".","xy",",","dv",".","zw",")",";","dv",".","x","=","min","(","dv",".","x",",","dv",".","y",")",";","return","mat3","(","dt",".","xx",",","cM",",","du",".","xx",",","cM",",","dv",".","xx",",","cM",")",";","}","vec3","dy","(","vec3","dx",")","{","return","cP","(","(","(","dx","*","34.0",")","+","cN",")","*","dx",")",";","}","float","dM","(","vec2","dz",")","{","const","vec4","dA","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","dB","=","floor","(","dz","+","dot","(","dz",",","dA",".","yy",")",")",";","vec2","dC","=","dz","-","dB","+","dot","(","dB",",","dA",".","xx",")",";","vec2","dD",";","dD","=","(","dC",".","x",">","dC",".","y",")","?","vec2","(","cN",",","cM",")",":","vec2","(","cM",",","cN",")",";","vec4","dE","=","dC",".","xyxy","+","dA",".","xxzz",";","dE",".","xy","-=","dD",";","dB","=","cP","(","dB",")",";","vec3","dF","=","dy","(","dy","(","dB",".","y","+","vec3","(","cM",",","dD",".","y",",","cN",")",")","+","dB",".","x","+","vec3","(","cM",",","dD",".","x",",","cN",")",")",";","vec3","dG","=","max","(","0.5","-","vec3","(","dot","(","dC",",","dC",")",",","dot","(","dE",".","xy",",","dE",".","xy",")",",","dot","(","dE",".","zw",",","dE",".","zw",")",")",",","cM",")",";","dG","=","dG","*","dG",";","dG","=","dG","*","dG",";","vec3","dH","=","2.0","*","fract","(","dF","*","dA",".","www",")","-","cN",";","vec3","dI","=","abs","(","dH",")","-","0.5",";","vec3","dJ","=","floor","(","dH","+","0.5",")",";","vec3","dK","=","dH","-","dJ",";","dG","*=","1.79284291400159","-","0.85373472095314","*","(","dK","*","dK","+","dI","*","dI",")",";","vec3","dL",";","dL",".","x","=","dK",".","x","*","dC",".","x","+","dI",".","x","*","dC",".","y",";","dL",".","yz","=","dK",".","yz","*","dE",".","xz","+","dI",".","yz","*","dE",".","yw",";","return","130.0","*","dot","(","dG",",","dL",")",";","}","vec2","dS","(","vec2","dN",")","{","float","dO","=","dot","(","dN",",","vec2","(","12.9898",",","78.233",")",")",";","float","dP","=","dot","(","dN",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","dQ","=","fract","(","sin","(","dO",")","*","43758.5453",")","*","2.0","-","cN",";","float","dR","=","fract","(","sin","(","dP",")","*","43758.5453",")","*","2.0","-","cN",";","return","vec2","(","dQ",",","dR",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dU","=","0.1",";","const","float","dV","=","0.1",";","const","float","dW","=","-","0.01",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dX","=","0.05",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","dY","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dZ","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["bool","eb","(","vec2","d_",",","float","ea",")","{","return","all","(","lessThanEqual","(","d_",",","vec2","(","1.0","+","ea",")",")",")","&&","all","(","greaterThanEqual","(","d_",",","vec2","(","0.0","-","ea",")",")",")",";","}"]}]}}]},{type:"textline",tokens:["float","eo","(","vec3","ec",",","sampler2D","ed",",","float","ee",")","{","float","ef",";","ec",".","z","=","clamp","(","ec",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["ef","=","0.0",";","float","eg","=","dS","(","ec",".","xy",")",".","x","*","M_PI",";","float","eh","=","cos","(","eg",")",";","float","ei","=","sin","(","eg",")",";","mat2","ej","=","mat2","(","eh",",","ei",",","-","ei",",","eh",")",";","vec2","ek",",","el",";","for","(","int","em","=","0",";","em","<","4",";","em","++",")","for","(","int","en","=","0",";","en","<","4",";","en","++",")","{","el",".","x","=","dY","[","em","]","[","en","]",";","el",".","y","=","dZ","[","em","]","[","en","]",";","el","=","ej","*","el",";","ek","=","ec",".","xy","+","el","*","ee","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["!","CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","eb","(","ek",",","dW",")",")","ef","+=","1.0",";","else"]}]}}]},{type:"textline",tokens:["ef","+=","step","(","ec",".","z",",","texture2D","(","ed",",","ek",")",".","r",")",";","}","ef","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ef","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","ef",",","0.0",",","1.0",")",";","}","float","eG","(","vec3","ep",",","sampler2D","eq",",","vec3","er",",","sampler2D","es",",","float","et",",","float","eu",",","float","ev",")","{","float","ew",",","ex",";","ep",".","z","=","clamp","(","ep",".","z",",","0.0",",","1.0",")",";","er",".","z","=","clamp","(","er",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["ew","=","0.0",";","ex","=","0.0",";","float","ey","=","dS","(","ep",".","xy",")",".","x","*","M_PI",";","float","ez","=","cos","(","ey",")",";","float","eA","=","sin","(","ey",")",";","mat2","eB","=","mat2","(","ez",",","eA",",","-","eA",",","ez",")",";","vec2","eC",",","eD",";","for","(","int","eE","=","0",";","eE","<","4",";","eE","++",")","for","(","int","eF","=","0",";","eF","<","4",";","eF","++",")","{","eD",".","x","=","dY","[","eE","]","[","eF","]",";","eD",".","y","=","dZ","[","eE","]","[","eF","]",";","eD","=","eB","*","eD",";","eC","=","ep",".","xy","+","eD","*","et","/","SHADOW_TEX_RES",";","ew","+=","step","(","ep",".","z",",","texture2D","(","eq",",","eC",")",".","r",")",";","eC","=","er",".","xy","+","eD","*","eu","/","SHADOW_TEX_RES",";","ex","+=","step","(","er",".","z",",","texture2D","(","es",",","eC",")",".","r",")",";","}","ew","=","mix","(","ew",",","ex",",","ev",")",";","ew","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ew","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","ew",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","eK","(","vec2","eH",")","{","float","eI","=","min","(","eH",".","x",",","eH",".","y",")",";","float","eJ","=","min","(","1.0","-","eH",".","x",",","1.0","-","eH",".","y",")",";","return","min","(","eI",",","eJ",")",";","}","float","eN","(","float","eL",",","float","eM",")","{","if","(","eM",">=","0.0","&&","eM","<=","dV",")","eL","=","(","eL","-","1.0",")","/","dV","*","eM","+","1.0",";","return","eL",";","}","float","eZ","(","vec3","eO",",","vec3","eP",",","sampler2D","eQ",",","sampler2D","eR",",","float","eS",",","float","eT",",","float","eU",",","float","eV",")","{","float","eW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eX","=","eK","(","eO",".","xy",")",";","if","(","-","eV",">","eU","&&","eX",">=","0.0","&&","eX","<=","dU","&&","eb","(","eP",".","xy",",","0.0",")",")","{","float","eY","=","1.0","-","eX","/","dU",";","eW","=","eG","(","eO",",","eQ",",","eP",",","eR",",","eS",",","eT",",","eY",")",";","}","else"]}]}}]},{type:"textline",tokens:["eW","=","eo","(","eO",",","eQ",",","eS",")",";","return","eW",";","}","float","fg","(","vec3","e_",",","sampler2D","fa",",","float","fb",",","float","fc",",","float","fd",")","{","float","fe","=","eo","(","e_",",","fa",",","fb",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","fd",">","fc",")","{","float","ff","=","eK","(","e_",".","xy",")",";","fe","=","eN","(","fe",",","ff",")",";","}"]}]}}]},{type:"textline",tokens:["return","fe",";","}","float","fn","(","float","fh",")","{","float","fi","=","1.0",";","vec3","fj","=","cG",".","xyz","/","cG",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fk","=","cH",".","xyz","/","cH",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fl","=","cI",".","xyz","/","cI",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fm","=","cJ",".","xyz","/","cJ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","eb","(","fj",".","xy",",","0.0",")",")","{","fi","=","eZ","(","fj",",","fk",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","fh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","eb","(","fj",".","xy",",","dX",")",")","{","fi","=","fg","(","fj",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","fh",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","eb","(","fk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","eZ","(","fk",",","fl",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","fh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg","(","fk",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","fh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","eb","(","fl",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","eZ","(","fl",",","fm",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","fh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg","(","fl",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","fh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","eb","(","fm",".","xy",",","0.0",")",")","fi","=","fg","(","fm",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","fh",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","fi",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","fs","(","inout","vec3","fo",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fp","=","texture2DProj","(","u_shadow_mask",",","cK",")",".","rg",";","vec3","fq","=","vec3","(","fp",".","r",")",";","float","fr","=","fp",".","g",";","dT","=","vec4","(","fq",",","fr",")",";","fo","*=","dT",".","a",";","return","dT",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","fn","(","cL",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fx","(","vec3","ft",",","float","fu",",","vec2","fv",")","{","vec2","fw","=","vec2","(","(","ft",".","x","-","fv",".","x",")","/","fu",",","-","(","ft",".","z","-","fv",".","y",")","/","fu",")",";","return","fract","(","fw",")",";","}","vec2","fB","(","vec2","fy",",","float","fz",",","vec2","fA",")","{","return","vec2","(","fy",".","x","*","fz",",","-","fy",".","y","*","fz",")","+","fA",";","}","d","fC","(",")","{","return","d","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","d","gh","(","vec3","fD",",","vec3","fE",",","vec3","fF",",","vec3","fG",",","vec3","fH",",","sampler2D","fI",",","sampler2D","fJ",",","vec3","fK",",","float","fL",",","vec3","fM",",","vec4","fN",",","mat4","fO",")","{","vec3","fP","=","j","(","fN",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","fQ","=","-","fP",".","x",";","float","fR","=","-","fP",".","z",";","vec2","fS","=","vec2","(","fM",".","x","+","fL","*","(","-","1.0","-","fQ",")","/","2.0",",","fM",".","z","+","fL","*","(","1.0","-","fR",")","/","2.0",")",";","vec2","fT","=","fx","(","fH",",","fL",",","fS",")",";","float","fU","=","fL","/","2.0",";","vec2","fV","=","abs","(","fB","(","fT","-","vec2","(","0.5",")",",","fL",",","vec2","(","0.0",")",")",")",";","float","fW","=","fU","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fV",")",">","fW",")","return","fC","(",")",";","float","fX","=","fL","/","fK",".","z",";","vec2","fY","=","(","fT","-","vec2","(","0.5",")",")","*","fX","+","vec2","(","0.5",")",";","vec3","fZ","=","fP","*","(","fL","/","fK",".","z","-","1.0",")","/","2.0",";","fY",".","x","+=","fZ",".","x",";","fY",".","y","-=","fZ",".","z",";","vec4","f_","=","texture2D","(","fJ",",","fY",")",";","float","ga","=","f_",".","r",";","if","(","ga","<","u_scale_threshold",")","return","fC","(",")",";","float","gb","=","fK",".","y","-","fK",".","x",";","float","gc","=","fK",".","y","-","texture2D","(","fI",",","fY",")",".","r","*","gb",";","vec2","gd","=","fD",".","xz","-","fH",".","xz",";","fH",".","xz","=","fB","(","fT",",","fL",",","fS",")",";","fH",".","y","=","gc",";","fD",".","xz","=","fH",".","xz","+","gd",";","fD",".","y","*=","ga",";","fD",".","y","+=","gc",";","vec3","ge","=","f_",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fD","-=","fH",";","mat4","gf","=","aa","(","fM",",","fH",",","fO",")",";","d","gg","=","an","(","fD",",","fH",",","fE",",","fF",",","fG",",","gf",")",";","gg",".","b","=","fH",";","gg",".","f","=","ge",";","return","s","(","gg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","s","(","d","(","fD",",","fH",",","fE",",","fF",",","fG",",","ge",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gn","(","mat4","gi",",","vec4","gj",")","{","vec2","gk","=","(","gi","*","u_v_light_matrix","[","3","]",")",".","xy",";","float","gl","=","SHADOW_TEX_RES","/","2.0",";","gk","=","floor","(","gk","*","gl","+","0.5",")","/","gl","-","gk",";","vec4","gm","=","gi","*","gj",";","gm",".","xy","+=","gk",";","gm","=","u_b_light_matrix","*","gm",";","return","gm",";","}","void","gr","(","vec3","go",")","{","vec3","gp","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";","vec4","gq","=","u_v_light_matrix","*","vec4","(","go","+","u_normal_offset","*","gp",",","1.0",")",";","cG","=","gn","(","u_p_light_matrix0",",","gq",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cH","=","gn","(","u_p_light_matrix1",",","gq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cI","=","gn","(","u_p_light_matrix2",",","gq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cJ","=","gn","(","u_p_light_matrix3",",","gq",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","gr","(","vec4","gs",")","{","float","gt","=","gs",".","x",";","float","gu","=","gs",".","y",";","float","gv","=","gs",".","w",";","cK",".","x","=","(","gt","+","gv",")","/","2.0",";","cK",".","y","=","(","gu","+","gv",")","/","2.0",";","cK",".","z","=","gv",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","gy","(","inout","vec3","gx",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gx","=","max","(","vec3","(","0.0",")",",","gx",")",";","gx","=","pow","(","gx",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gA","(","inout","vec3","gz",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gz","=","max","(","vec3","(","0.0",")",",","gz",")",";","gz","=","pow","(","gz",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gD","(","inout","vec3","gB",",","in","float","gC",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gB","=","gB","*","gC",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","gL","(","inout","vec3","gG",",","in","float","gH",",","in","vec4","gI",")","{","float","gJ","=","gI",".","w","*","gH",";","float","gK","=","exp","(","-","gJ","*","gJ",")",";","gK","=","clamp","(","gK",",","0.0",",","1.0",")",";","gG","=","mix","(","gI",".","rgb",",","gG",",","gK",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gS","(","in","mat4","gM",",","in","vec3","gN",")","{","vec3","gO","=","mix","(","gM","[","0","]",".","rgb",",","gM","[","1","]",".","rgb",",","max","(","sign","(","gN",".","x",")",",","0.0",")",")",";","vec3","gP","=","mix","(","gM","[","2","]",".","rgb",",","gM","[","3","]",".","rgb",",","max","(","sign","(","gN",".","z",")",",","0.0",")",")",";","vec3","gQ","=","vec3","(","gM","[","0","]",".","a",",","gM","[","1","]",".","a",",","gM","[","2","]",".","a",")",";","vec3","gR","=","mix","(","gO",",","gP",",","abs","(","gN",".","z",")",")",";","gR","=","mix","(","gR",",","gQ",",","abs","(","gN",".","y",")",")",";","return","gR",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gU","(","inout","float","gT",")","{","gT","-=","0.5",";","gT","=","4.0","*","(","gT","*","gT","*","gT",")","+","0.5",";","}","void","hk","(","inout","vec3","gV",",","in","float","gW",",","in","vec3","gX",",","in","float","gY",",","in","vec4","gZ",",","in","vec4","g_",",","in","float","ha",",","in","float","hb",")","{","float","hc","=","g_",".","w","*","gW",";","float","hd","=","exp","(","-","hc","*","hc",")",";","hd","=","clamp","(","hd",",","0.0",",","1.0",")",";","float","he","=","max","(","gX",".","y",",","0.0",")",";","gW","=","max","(","gW","-","max","(","gY","/","he",",","0.0",")",",","0.0",")",";","float","hf","=","gZ",".","w","*","gW",";","float","hg","=","1.0","-","hf",";","hg","=","max","(","hg",",","0.0",")",";","gU","(","hg",")",";","hg","+=","max","(","ha","-","0.5",",","0.0",")",";","if","(","hg","<","hd",")","{","vec3","hh","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","hi","=","gZ",".","rgb",";","gY","=","clamp","(","-","gY","*","0.03",",","0.0",",","0.8",")",";","vec3","hj","=","mix","(","hi",",","hh",",","min","(","he",",","1.0",")",")",";","hj","=","mix","(","hj",",","vec3","(","0.0",")",",","gY",")","*","hb",";","gV","=","mix","(","hj",",","gV",",","hg",")",";","}","if","(","hg",">=","hd",")","{","gV","=","mix","(","g_",".","rgb",",","gV",",","hd",")",";","}","}","void","ht","(","inout","vec3","hl",",","in","float","hm",",","in","float","hn",",","in","vec4","ho",",","in","float","hp",")","{","float","hq","=","ho",".","w","*","hm",";","float","hr","=","1.0","-","hq",";","hr","=","clamp","(","hr",",","0.0",",","1.0",")",";","gU","(","hr",")",";","hn","=","clamp","(","-","hn","*","0.03",",","0.0",",","0.8",")",";","vec3","hs","=","mix","(","ho",".","rgb",",","vec3","(","0.0",")",",","hn",")","*","hp",";","hl","=","mix","(","hs",",","hl",",","hr",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","hu","=","0.0",";","float","hv","=","1.0",";","float","hw","=","0.5",";","struct","hx","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hF","(","vec3","hy",",","vec3","hz",",","vec3","hA",",","float","hB",",","float","hC",")","{","vec3","hD","=","normalize","(","hy","+","hz",")",";","float","hE","=","(","hv","-","hB",")","*","max","(","dot","(","hA",",","hD",")",",","hu",")","+","hB",";","return","pow","(","hE",",","hC",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hQ","(","vec3","hG",",","vec3","hH",",","vec3","hI",",","float","hJ",")","{","vec3","hK","=","normalize","(","hG","+","hH",")",";","float","hL","=","max","(","dot","(","hI",",","hK",")",",","0.001",")",";","float","hM","=","max","(","dot","(","hI",",","hH",")",",","0.01",")",";","float","hN","=","max","(","dot","(","hI",",","hG",")",",","0.01",")",";","float","hO","=","tan","(","acos","(","hL",")",")",";","float","hP","=","max","(","hJ",",","0.001",")",";","return","hN","*","(","hv","/","(","4.0","*","M_PI","*","hP","*","hP",")",")","*","(","exp","(","-","(","hO","*","hO",")","/","(","hP","*","hP",")",")","/","(","sqrt","(","hM","*","hN",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hY","(","vec3","hR",",","vec3","hS",",","vec3","hT",",","float","hU",",","float","hV",")","{","vec3","hW","=","normalize","(","hR","+","hS",")",";","float","hX","=","acos","(","dot","(","hW",",","hT",")",")",";","if","(","hX","<","hU",")","return","hv",";","else","if","(","hX",">=","hU","+","hV","||","hV","==","hu",")","return","hu",";","else","return","hv","-","(","hX","-","hU",")","/","hV",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","it","(","float","hZ",",","vec3","h_",",","vec3","ia",",","vec3","ib",",","float","ic",",","inout","float","id",")","{","if","(","ic",">","hu",")","{","float","ie","=","max","(","dot","(","h_",",","ib",")",",","hu",")",";","float","ig","=","ic","*","ic",";","float","ih","=","hv","-","hw","*","(","ig","/","(","ig","+","0.33",")",")",";","vec3","ii","=","ia","-","hZ","*","h_",";","vec3","ij","=","ib","-","ie","*","h_",";","if","(","length","(","ii",")","==","hu","||","length","(","ij",")","==","hu","||","abs","(","hZ",")",">","hv","||","abs","(","ie",")",">","hv",")","id","=","id","*","ih",";","else","{","float","ik","=","acos","(","hZ",")",";","float","il","=","acos","(","ie",")",";","vec3","im","=","normalize","(","ii",")",";","vec3","io","=","normalize","(","ij",")",";","float","ip",",","iq",";","ip","=","max","(","ik",",","il",")",";","iq","=","min","(","ik",",","il",")",";","iq","*=","0.95",";","float","ir","=","max","(","dot","(","im",",","io",")",",","hu",")",";","float","is","=","0.45","*","(","ig","/","(","ig","+","0.09",")",")",";","id","=","id","*","(","ih","+","(","is","*","ir","*","sin","(","ip",")","*","tan","(","iq",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","iA","(","vec3","iu",",","vec3","iv",",","float","iw",",","float","ix",",","out","float","iy",")","{","float","iz",";","if","(","iw","==","hu",")","{","iy","=","hv",";","}","else","{","iz","=","hv","+","abs","(","dot","(","iv",",","iu",")",")",";","iz","=","ix","+","(","hv","-","ix",")","*","pow","(","iz",",","iw",")",";","iy","=","clamp","(","iz",",","hu",",","hv",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","iI","(","vec3","iB",",","vec3","iC",",","vec3","iD",",","vec2","iE",",","const","float","iF",",","out","float","iG",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["iA","(","iB",",","iC",",","iE","[","0","]",",","iE","[","1","]",",","iG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iH","=","max","(","dot","(","iB",",","iC",")",",","hu",")",";","iG","=","(","hv","-","iF",")","*","iH","+","iF",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["it","(","iH",",","iB",",","iC",",","iD",",","iE","[","0","]",",","iG",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","void","iP","(","vec3","iJ",",","vec3","iK",",","vec3","iL",",","float","iM",",","vec2","iN",",","out","float","iO",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["iO","=","hF","(","iJ",",","iK",",","iL",",","iM",",","iN","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["iO","=","hQ","(","iJ",",","iK",",","iL",",","iN","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["iO","=","hY","(","iJ",",","iK",",","iL",",","iN","[","0","]",",","iN","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iO","=","hu",";"]}]}}]},{type:"textline",tokens:["}","void","jl","(","vec3","iQ",",","vec3","iR",",","vec3","iS",",","vec2","iT",",","vec4","iU",",","vec3","iV",",","vec3","iW",",","vec3","iX",",","inout","hx","iY",",","float","iZ",",","vec2","i_",",","vec2","ja",",","float","jb",")","{","float","jc","=","hu",";","if","(","iT",".","r","!=","hu",")","iI","(","iS",",","iR",",","iQ",",","i_",",","jb",",","jc",")",";","float","jd","=","hu",";","if","(","iT",".","g","!=","hu",")","iP","(","iR",",","iQ",",","iS",",","jb",",","ja",",","jd",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","iR",",","iS",")","*","dot","(","iQ",",","iS",")","<","hu",")","{","float","je","=","iU",".","x",";","float","jf","=","iU",".","y",";","float","jg","=","iU",".","z",";","float","jh","=","iU",".","w",";","float","ji","=","clamp","(","abs","(","dot","(","iR",",","iS",")",")",",","hu",",","hv",")",";","float","jj","=","clamp","(","dot","(","iQ",",","-","iR",")",",","hu",",","hv",")",";","float","jk","=","pow","(","jj",",","jf",")",";","iY",".","a","+=","iZ","*","vec4","(","iX","*","ji","*","pow","(","iV",",","vec3","(","je",")",")",",","hv",")",";","iY",".","a","+=","jg","*","mix","(","vec4","(","iV",",","hv",")",",","vec4","(","hv",")",",","jh",")","*","iZ","*","vec4","(","iX","*","ji","*","vec3","(","jk",")",",","hv",")",";","}","else","{","iY",".","b","+=","iX","*","iW","*","jd",";","iY",".","a","+=","vec4","(","iX","*","iV","*","jc",",","jd",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iY",".","b","+=","iX","*","iW","*","jd",";","iY",".","a","+=","vec4","(","iX","*","iV","*","jc",",","jd",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"lamp",name:"POINT",statements:[{type:"textline",tokens:["{","vec2","jD","=","jz","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","jE","=","jw","[","LAMP_IND","]",";","vec3","jF","=","jy","[","LAMP_IND","]",";","float","jG","=","hu",";"]},{type:"textline",tokens:["vec3","jH","=","jF",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","jH","*=","jv",";","vec3","jI","=","jE","-","jq",";"]},{type:"textline",tokens:["float","jJ","=","length","(","jI",")",";","jH","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","jJ","*","jJ",")",";","jI","=","normalize","(","jI",")",";","jl","(","js",",","jI",",","jr",",","jD",",","jB",",","jo",",","jp",",","jH",",","jC",",","jA",",","ju",",","jt",",","jG",")",";","}"]}]},{type:"lamp",name:"SPOT",statements:[{type:"textline",tokens:["{","vec2","jK","=","jz","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","jL","=","jw","[","LAMP_IND","]",";","vec3","jM","=","jy","[","LAMP_IND","]",";","vec3","jN","=","jx","[","LAMP_IND","]",";","float","jO","=","hu",";"]},{type:"textline",tokens:["vec3","jP","=","jM",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","jP","*=","jv",";","vec3","jQ","=","jL","-","jq",";"]},{type:"textline",tokens:["float","jR","=","length","(","jQ",")",";","jP","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","jR","*","jR",")",";","jQ","=","normalize","(","jQ",")",";"]},{type:"textline",tokens:["float","jS","=","dot","(","jQ",",","jN",")",";","jS","*=","smoothstep","(","hu",",","hv",",","(","jS","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","jP","*=","jS",";","jl","(","js",",","jQ",",","jr",",","jK",",","jB",",","jo",",","jp",",","jP",",","jC",",","jA",",","ju",",","jt",",","jO",")",";","}"]}]},{type:"lamp",name:"SUN",statements:[{type:"textline",tokens:["{","vec2","jT","=","jz","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","jU","=","jy","[","LAMP_IND","]",";","vec3","jV","=","jx","[","LAMP_IND","]",";","float","jW","=","hu",";"]},{type:"textline",tokens:["vec3","jX","=","jU",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","jX","*=","jv",";","jl","(","js",",","jV",",","jr",",","jT",",","jB",",","jo",",","jp",",","jX",",","jC",",","jA",",","ju",",","jt",",","jW",")",";","}"]}]},{type:"lamp",name:"HEMI",statements:[{type:"textline",tokens:["{","vec2","jY","=","jz","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","vec3","jZ","=","jy","[","LAMP_IND","]",";","vec3","j_","=","jx","[","LAMP_IND","]",";","float","ka","=","hw",";"]},{type:"textline",tokens:["vec3","kb","=","jZ",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","kb","*=","jv",";","jl","(","js",",","j_",",","jr",",","jY",",","jB",",","jo",",","jp",",","kb",",","jC",",","jA",",","ju",",","jt",",","ka",")",";","}"]}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hx","kc","(","vec3","jm",",","vec3","jn",",","vec3","jo",",","vec3","jp",",","vec3","jq",",","vec3","jr",",","vec3","js",",","vec2","jt",",","vec2","ju",",","float","jv",",","vec3","jw","[","NUM_LIGHTS","]",",","vec3","jx","[","NUM_LIGHTS","]",",","vec3","jy","[","NUM_LIGHTS","]",",","vec4","jz","[","NUM_LFACTORS","]",",","float","jA",",","vec4","jB",")","{","hx","jC",";","jC",".","a","=","vec4","(","jm","+","jo","*","jn",",","hu",")",";","jC",".","b","=","vec3","(","hu",")",";"]},{type:"lamps_main"},{type:"textline",tokens:["return","jC",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hx","kh","(","vec3","kd",",","vec3","ke",",","vec3","kf",")","{","hx","kg",";","kg",".","a","=","vec4","(","kd","+","kf","*","ke",",","hu",")",";","kg",".","b","=","vec3","(","hu",")",";","return","kg",";","}"]}]}}]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","kI","(","inout","vec3","ki",",","float","kj",",","float","kk",",","float","kl",",","vec3","km",",","vec3","kn",",","vec3","ko",",","vec4","kp",",","vec3","kq",",","float","kr",")","{","if","(","kr",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","ks","=","kp",";","vec3","kt","=","kq","+","km",";","kt",".","xz","=","10.0","*","sin","(","0.1","*","kt",".","xz",")",";","vec3","ku","=","kt","+","2.0","*","cross","(","-","ks",".","xyz",",","cross","(","-","ks",".","xyz",",","kt",")","+","ks",".","w","*","kt",")",";","vec2","kv","=","ku",".","xz",";","vec3","kw","=","kn",";","float","kx","=","max","(","dot","(","km",",","kw",")",",","0.0",")",";","float","ky","=","0.025",";","kv",".","s","+=","0.5","*","sin","(","dot","(","kq","+","kk",",","vec3","(","1.0",")",")",")",";","kv",".","t","+=","0.7","*","(","-","sin","(","dot","(","kq","-","kk",",","vec3","(","-","0.7",")",")",")",")",";","kv",".","st","+=","0.23","*","cos","(","4.0","*","kj","-","CAUST_SPEED",".","x","*","kk",")",";","kv",".","st","+=","3.0","*","sin","(","kj","-","0.3","*","CAUST_SPEED",".","y","*","kk",")",";","float","kz","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","kj",",","0.0",")",")",";","mat3","kA","=","dw","(","(","kv","/","kz",")",",","ky",")",";","float","kB","=","(","kA","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","kC","=","(","kA","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","kD","=","(","kA","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","kE","=","CAUST_BRIGHT","*","vec3","(","kB",",","kC",",","kD",")",";","float","kF","=","kl","*","kx",";","float","kG","=","max","(","sign","(","kj",")",",","0.0",")",";","kF","=","min","(","kF","+","0.5","*","sign","(","-","km",".","y",")","*","kG",",","1.0",")",";","kF","*=","1.0","-","kG","*","(","0.1","*","kj",")",";","kE","*=","kF",";","kE","*=","kE",";","float","kH","=","min","(","-","kj","+","10.0",",","1.0",")",";","ki","+=","max","(","(","2.0","*","ko","*","kE",")","*","kH",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","kW","(","in","vec3","kP",",","in","vec3","kQ",",","in","float","kR",",","in","float","kS",")","{","vec3","kT","=","normalize","(","kQ","+","kP",")",";","float","kU","=","1.0","-","dot","(","kP",",","kT",")",";","float","kV","=","kS","+","(","1.0","-","kS",")","*","pow","(","kU",",","kR",")",";","return","kV",";","}","void","lk","(","inout","vec3","kX",",","in","vec3","kY",",","in","vec3","kZ",",","in","float","k_",",","in","float","la",",","in","float","lb",")","{","vec3","lc","=","reflect","(","-","kY",",","kZ",")",";","float","ld","=","1.0",";","if","(","k_","!=","0.0",")","ld","=","kW","(","kY",",","lc",",","k_",",","la",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","le","=","u_refl_plane",".","xyz","*","dot","(","kZ",",","u_refl_plane",".","xyz",")",";","vec3","lf","=","kZ","-","le",";","vec2","lg","=","(","u_view_matrix_frag","*","vec4","(","lf",",","0.0",")",")",".","xy",";","vec2","lh","=","cK",".","xy","/","cK",".","z",";","lh","+=","lg","*","REFL_BUMP",";","vec3","li","=","texture2D","(","u_reflectmap",",","lh",")",".","rgb",";","gy","(","li",".","rgb",")",";","kX","=","mix","(","kX",",","li",",","lb","*","ld",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lj","=","textureCube","(","u_mirrormap",",","lc",")",".","xyz",";","gy","(","lj",".","rgb",")",";","kX","=","mix","(","kX",",","lj",",","u_mirror_factor","*","ld",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lq","(","in","float","ll",",","inout","vec2","lm",",","in","vec2","ln",")","{","vec4","lo","=","texture2D","(","u_scene_depth",",","lm",")",";","float","lp","=","cw","(","lo",")",";","if","(","lp","<","kO",")","{","lm","=","ln",";","return","ll",";","}","else","{","return","lp",";","}","return","ll",";","}","vec3","ly","(","in","vec3","lr",",","in","vec2","ls",")","{","vec2","lt","=","lr",".","xy","/","lr",".","z",";","vec2","lu","=","lt","+","ls",";","vec4","lv","=","texture2DProj","(","u_scene_depth",",","lr",")",";","float","lw","=","cw","(","lv",")",";","lq","(","lw",",","lu",",","lt",")",";","vec3","lx","=","texture2D","(","u_refractmap",",","lu",")",".","rgb",";","gy","(","lx",")",";","return","lx",";","}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","mg","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mn","(","inout","float","mh",",","float","mi",",","vec2","mj",",","vec2","mk",")","{","float","ml","=","mk",".","x","-","mj",".","x",";","float","mm","=","(","mi","-","mj",".","x",")","/","ml",";","mh","=","mix","(","mh",",","mk",".","y",",","clamp","(","mm",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mu","(","inout","vec3","mo",",","float","mp",",","vec4","mq",",","vec4","mr",")","{","float","ms","=","mr",".","x","-","mq",".","x",";","float","mt","=","(","mp","-","mq",".","x",")","/","ms",";","mo","=","mix","(","mo",",","mr",".","yzw",",","clamp","(","mt",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","mA","(","float","mv",",","float","mw",",","vec2","mx","[","SIZE_RAMP_LENGTH","]",")","{","float","my","=","mv","/","mw",";","float","mz","=","mx","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mn","(","mz",",","my",",","mx","[","0","]",",","mx","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mn","(","mz",",","my",",","mx","[","1","]",",","mx","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mn","(","mz",",","my",",","mx","[","2","]",",","mx","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","mz",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mG","(","float","mB",",","float","mC",",","vec4","mD","[","COLOR_RAMP_LENGTH","]",")","{","float","mE","=","mB","/","mC",";","vec3","mF","=","mD","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mu","(","mF",",","mE",",","mD","[","0","]",",","mD","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mu","(","mF",",","mE",",","mD","[","1","]",",","mD","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mu","(","mF",",","mE",",","mD","[","2","]",",","mD","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","mF",";","}"]}]}}]},{type:"textline",tokens:["float","mP","(","float","mH",",","float","mI",",","float","mJ",",","float","mK",")","{","float","mL","=","max","(","0.01",",","min","(","mI",",","mJ",")",")",";","float","mM","=","max","(","0.01",",","min","(","mI",",","mK",")",")",";","float","mN","=","mI","-","mM",";","float","mO","=","clamp","(","mH","/","mL",",","0.0",",","1.0",")","-","step","(","mN",",","mH",")","*","(","mH","-","mN",")","/","mM",";","return","mO",";","}","mg","mV","(",")","{","mg","mQ",";","float","mR",";","if","(","u_p_cyclic","==","1",")","{","mR","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","mR","<","0.0",")","mR","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","mR","=","u_p_time","-","a_p_delay",";","}","if","(","mR","<","0.0","||","mR",">=","a_p_lifetime",")","{","mQ",".","a","=","0.0001",";","mQ",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","mR","<","0.0","||","mR",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mS","=","a_position",";","vec3","mT","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mS","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","mT","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["mS","+=","u_p_nfactor","*","mR","*","mT",";","mS","+=","a_p_vels",".","xyz","*","mR",";","mS",".","y","-=","u_p_gravity","*","mR","*","mR","/","2.0",";","float","mU","=","max","(","u_p_mass",",","EPSILON",")",";","mS","+=","(","u_p_wind","/","mU",")","*","mR","*","mR","/","2.0",";","mQ",".","b","=","mS",";","mQ",".","e","=","a_p_vels",".","w","*","mR",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mQ",".","a","=","mA","(","mR",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mQ",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mQ",".","d","=","mG","(","mR",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mQ",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["mQ",".","c","=","mP","(","mR",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","mQ",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","nh","(","in","sampler2D","na",",","in","vec2","nb",",","in","vec2","nc",")","{","float","nd","=","texture2D","(","na",",","nb",")",".","r",";","float","ne","=","nc",".","x",";","float","nf","=","nc",".","y",";","float","ng","=","2.0","*","ne","/","(","ne","+","nf","-","(","2.0","*","nd","-","1.0",")","*","(","nf","-","ne",")",")",";","return","ng",";","}"]}]}}