b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","ce","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ce","=","mix","(","ce",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cf","=","vec3","(","0.0",")",";","vec3","cg","=","vec3","(","0.0",")",";","vec3","ch","=","vec3","(","0.0",")",";","bm","(","ce",",","cf",",","cg",",","ch",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cj","=","(","u_model_matrix","*","vec4","(","ci",",","1.0",")",")",".","xyz",";","mat4","ck","=","_","(","u_camera_eye",",","cj",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cl","=","(","u_model_matrix","*","vec4","(","ci",",","1.0",")",")",".","xyz",";","ck","=","ck","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cl",")",";"]}]}}]},{type:"textline",tokens:["c","cm","=","ag","(","ce","-","ci",",","ci",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ck",")",";","cm",".","b","=","cj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","cm","=","ag","(","ce",",","ci",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cn","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cn","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cd","(","cm",".","a",",","cm",".","b",",","cn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cm",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";"]}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","fj","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","fj","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","fj","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cl","(","cy",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fd","(","cE",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","gm","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["gm","=","mix","(","gm",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gn","=","vec3","(","0.0",")",";","vec3","go","=","vec3","(","0.0",")",";","vec3","gp","=","vec3","(","0.0",")",";","bm","(","gm",",","gn",",","go",",","gp",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gq","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gq","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","gr","=","fY","(","gm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gq",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gs","=","(","u_model_matrix","*","vec4","(","gq",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","HAIR_BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gt","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gt","=","u_view_matrix",";"]}]}}]},{type:"textline",tokens:["mat4","gu","=","_","(","u_camera_eye",",","gs",",","gt",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gv","=","(","u_model_matrix","*","vec4","(","gq",",","1.0",")",")",".","xyz",";","gu","=","gu","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gv",")",";"]}]}}]},{type:"textline",tokens:["c","gr","=","ag","(","gm","-","gq",",","gq",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gu",")",";","gr",".","b","=","gs",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","gr","=","ag","(","gm",",","gq",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gw","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gw","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cd","(","gr",".","a",",","gr",".","b",",","gw",")",";"]}]}}]},{type:"textline",tokens:["vec4","gx","=","u_view_matrix","*","vec4","(","gr",".","a",",","1.0",")",";","vec4","gy","=","u_proj_matrix","*","gx",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gy",".","xy","+=","u_subpixel_jitter","*","gy",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gh","(","gr",".","a",")",";","cE","=","gx",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["cy","=","-","gx",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","gz","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","float","gA","=","SHADOW_TEX_RES","/","2.0",";","gz","=","floor","(","gz","*","gA","+","0.5",")","/","gA","-","gz",";","gy",".","xy","+=","gz",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gy",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gm",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gm",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","gm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","gm",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","gm",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gm",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gm",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gm",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gn","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","go","=","_","(","u_camera_eye",",","gn",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["go","=","go","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["c","gp","=","ag","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","go",")",";","gp",".","b","=","gn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","gp","=","ag","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gq","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gp",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gm","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gm","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gm","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","gq",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","gu",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gv",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gw","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gw","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","gy","(","float","gx",")","{","return","gx","-","floor","(","gx","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gH","(","inout","float","gz",",","in","float","gA","[","gw","]",",","in","float","gB",")","{","for","(","int","gC","=","0",";","gC","<","NUM_RINGS",";","gC","++",")","{","float","gD","=","40.0","*","gA","[","gC","]",";","float","gE","=","300.0","*","(","gy","(","gD",")","-","0.005",")",";","float","gF","=","gD",";","float","gG","=","abs","(","gF","*","(","u_halo_size","*","gE","-","gB",")",")",";","gz","+=","1.0","-","min","(","gG",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","gQ","(","inout","float","gI",",","in","float","gJ","[","gw","]",",","in","float","gK",")","{","for","(","int","gL","=","0",";","gL","<","NUM_LINES",";","gL","++",")","{","float","gM","=","gJ","[","gL","]",";","float","gN","=","gM",";","float","gO","=","1000.0","*","(","gy","(","gM",")","-","0.005",")",";","float","gP","=","20.0","*","abs","(","gN","*","a",".","x","+","gO","*","a",".","y",")",";","gI","+=","1.0","-","min","(","gP",",","1.0",")",";","}","gI","*=","gK",";","}"]}]}}]},{type:"textline",tokens:["void","gX","(","inout","float","gR",",","in","vec2","gS",")","{","float","gT",",","gU",";","gU","=","atan","(","gS",".","y",",","gS",".","x",")",";","gU","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","gV","=","cos","(","gU",")",";","float","gW","=","sin","(","gU",")",";","gU","=","(","gV","*","gS",".","x","+","gW","*","gS",".","y",")","*","(","gV","*","gS",".","y","-","gW","*","gS",".","x",")",";","gT","=","abs","(","gU",")",";","if","(","gT","<","1.0",")","{","gT","=","(","0.01","*","u_halo_size",")","/","(","gT",")",";","gR","*=","sqrt","(","min","(","gT",",","1.0",")",")",";","}","}","void","main","(",")","{","float","gY","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","gZ","=","sqrt","(","gY",")",";","gY","=","max","(","1.0","-","gY",",","0.0",")",";","gY","=","pow","(","gY",",","u_halo_hardness",")",";","float","g_","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","ha","[","gw","]",";","for","(","int","hb","=","0",";","hb","<","gw",";","hb","++",")","{","ha","[","hb","]","=","fract","(","gv","/","(","float","(","hb",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","hc","=","0.0",";","gH","(","hc",",","ha",",","gZ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hd","=","0.0",";","gQ","(","hd",",","ha",",","gY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gX","(","gY",",","a",")",";"]}]}}]},{type:"textline",tokens:["gY","*=","g_",";","vec3","he","=","u_diffuse_color",".","rgb","*","gY",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["hc","*=","gY",";","he","+=","u_halo_rings_color","*","hc",";","gY","+=","hc",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["hd","*=","g_",";","he","+=","u_halo_lines_color","*","hd",";","gY","+=","hd",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gY","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","hf","=","u_halo_stars_blend","*","(","gu",".","y","-","u_halo_stars_height",")",";","gY","*=","clamp","(","hf",",","0.0",",","1.0",")",";","gY","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gq","(","he",")",";","gt","(","he",",","gY",")",";","gl_FragColor","=","vec4","(","he",",","gY",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gv",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gu",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","gw","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gv","=","fract","(","gw",".","x","+","gw",".","y","+","gw",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gx","=","y","(","gw",",","u_view_matrix",")",";","mat4","gy","=","u_view_matrix",";","gy","[","3","]","[","0","]","=","0.0",";","gy","[","3","]","[","1","]","=","0.0",";","gy","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gx","=","y","(","gw",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gz","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","gA","=","gx","*","gz",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gB","=","u_proj_matrix","*","gy","*","gA",";","gB",".","z","=","0.99999","*","gB",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gu","=","gA",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","gB","=","u_proj_matrix","*","u_view_matrix","*","gA",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gB",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gw","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gw",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";","uniform","vec2","u_normalmap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";","uniform","vec2","u_colormap0_uv_velocity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kp",";","varying","vec3","kq",";","varying","vec3","kr",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ks",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ku",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lf","=","kq",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lg","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","lh","=","kr",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","lh","=","lh",";","else","lh","=","-","lh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","li","=","cross","(","lh",",","ks",".","xyz",")","*","ks",".","w",";","mat3","lj","=","mat3","(","ks",".","xyz",",","li",",","lh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","lk","=","length","(","cE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ll","=","normalize","(","u_view_matrix_frag","*","vec4","(","kr",",","0.0",")",")",".","st",";","ll","=","ll","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","lk","<","PARALLAX_LOD_DIST",")","{","float","lm","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","lk",")",",","0.0",",","1.0",")",";","float","ln","=","u_parallax_scale","*","lm",";","vec3","lo","=","normalize","(","kp","*","lj",")",";","float","lp","=","1.0","/","PARALLAX_STEPS",";","vec2","lq","=","lo",".","xy","*","ln","/","(","PARALLAX_STEPS","*","lo",".","z",")",";","float","lr","=","1.0",";","float","ls",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lt","=","ll",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lt","=","lg",";"]}]}}]},{type:"textline",tokens:["ls","=","texture2D","(","u_normalmap0",",","lt","+","u_time","*","u_normalmap0_uv_velocity",")",".","a",";","for","(","float","lu","=","1.0",";","lu","<=","PARALLAX_STEPS",";","lu","++",")","{","if","(","ls","<","lr",")","{","lr","-=","lp",";","lt","-=","lq",";","ls","=","texture2D","(","u_normalmap0",",","lt",")",".","a",";","}","}","vec2","lv","=","lt","+","lq",";","float","lw","=","texture2D","(","u_normalmap0",",","lv",")",".","a","-","(","lr","+","lp",")",";","float","lx","=","ls","-","lr",";","float","ly","=","lx","/","(","lx","-","lw",")",";","lt","=","ly","*","lv","+","(","1.0","-","ly",")","*","lt",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lg","+=","lt","-","ll",";"]}]}}]},{type:"textline",tokens:["ll","=","lt",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["ll","+=","lt","-","lg",";"]}]}}]},{type:"textline",tokens:["lg","=","lt",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lz",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lz","=","texture2D","(","u_normalmap0",",","ll",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lz","=","texture2D","(","u_normalmap0",",","lg","+","u_time","*","u_normalmap0_uv_velocity",")",";"]}]}}]},{type:"textline",tokens:["vec3","lA","=","lz",".","rgb","-","0.5",";","lA","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","lA",",","u_normal_factor",")",";","vec3","lB","=","lj","*","lA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lB","=","lh",";"]}]}}]},{type:"textline",tokens:["lB","=","normalize","(","lB",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["ll","=","normalize","(","u_view_matrix_frag","*","vec4","(","lB",",","0.0",")",")",".","st",";","ll","=","ll","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["vec3","lC","=","normalize","(","kp",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lD","=","kt",";","go","(","lD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lE","=","vec4","(","lD",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lE","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","lF","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lG","=","texture2D","(","u_colormap0",",","ll",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lG","=","texture2D","(","u_colormap0",",","lg","+","u_time","*","u_colormap0_uv_velocity",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["go","(","lG",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lH",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lH","=","texture2D","(","u_colormap1",",","ll",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lH","=","texture2D","(","u_colormap1",",","lg",")",";"]}]}}]},{type:"textline",tokens:["go","(","lH",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lI","=","texture2D","(","u_stencil0",",","ll",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lI","=","texture2D","(","u_stencil0",",","lg",")",";"]}]}}]},{type:"textline",tokens:["lG","=","mix","(","lG",",","lH",",","lI",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["lE",".","rgb","=","mix","(","lE",".","rgb",",","lG",".","rgb",",","u_diffuse_color_factor",")",";","float","lJ","=","u_alpha_factor","*","lG",".","a",";","lJ","+=","(","1.0","-","step","(","0.0",",","lJ",")",")",";","lE",".","a","=","mix","(","lJ",",","1.0",",","u_diffuse_color",".","a",")",";","lF","=","lG",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["lE",".","rgb","*=","mix","(","vec3","(","1.0",")",",","lG",".","rgb",",","u_diffuse_color_factor",")",";","lE",".","a","=","lG",".","a",";","lF","=","lG",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","lK","=","u_diffuse_intensity","*","lE",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lL","=","lK",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lM","=","0.5","*","lB",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lN","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lB",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lN","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","lM",")",";"]}]}}]},{type:"textline",tokens:["vec3","lO","=","u_ambient","*","lN",";","float","lP","=","fi","(","lK",")",";","vec3","lQ","=","u_emit","*","lE",".","rgb",";","vec3","lR","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lS","=","vec3","(","lF",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lS","=","texture2D","(","u_specmap0",",","ll",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lS","=","texture2D","(","u_specmap0",",","lg",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["go","(","lS",".","rgb",")",";","lR","=","mix","(","lR",",","lS",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","lT","=","u_specular_params","[","0","]",";","vec2","lU","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","lV","=","lT","*","lR",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["hm","lW","=","jO","(","lQ",",","lO",",","lK",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hm","lW","=","jJ","(","lQ",",","lO",",","lK",",","lV",",","kq",",","lB",",","lC",",","lU",",","u_diffuse_params",",","lP",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["vec3","lL","=","lW",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lX","=","u_reflect_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lX","=","0.0",";"]}]}}]},{type:"textline",tokens:["kR","(","lL",",","lC",",","lB",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lL","+=","lW",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["lL","=","max","(","lL","-","sqrt","(","0.01","*","-","min","(","lf",",","0.0",")",")",",","0.5","*","lL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["ko","(","lL",",","lf",",","u_time",",","lP",",","lB",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","kq",",","lk",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","lY","=","lE",".","a",";","if","(","lY","<=","0.5",")","discard",";","lY","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lY","=","lE",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lY","+=","lW",".","a",".","a","*","lV",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lY","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lL","=","mix","(","le","(","cD",",","lB",".","xz","*","u_refr_bump",")",",","lL",",","lY",")",";","lY","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","lZ","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","l_","=","gI","(","u_cube_fog",",","lC",")",";","vec4","ma","=","vec4","(","l_",",","u_fog_color_density",".","a",")",";","go","(","ma",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","ma","=","u_fog_color_density",";","ma",".","rgb","*=","lZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["ha","(","lL",",","lk",",","lC",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","ma",",","lf",",","lZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gB","(","lL",",","lk",",","ma",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["lL","=","vec3","(","dK",".","a",")",";"]}]}}]},{type:"textline",tokens:["gq","(","lL",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gt","(","lL",",","lY",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lL",",","lY",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kp",";","varying","vec3","kq",";","varying","vec3","kr",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ks",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ku",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","lf","=","a_position",";","vec3","lg","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lh","=","vec3","(","a_tangent",")",";","vec3","li","=","a_tangent","[","3","]","*","cross","(","lg",",","lh",")",";"]}]}},{type:"elif",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lj","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","lk","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vec3","ll","=","lj","-","u_camera_eye",";","vec3","li","=","cross","(","ll",",","lk",")",";","vec3","lh","=","cross","(","lk",",","li",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lh","=","vec3","(","0.0",")",";","vec3","li","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["lf","=","mix","(","lf",",","a_position_next",",","u_va_frame_factor",")",";","lg","=","mix","(","lg",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lm","=","vec3","(","a_tangent",")",";","vec3","ln","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","lm",")",";","lh","=","mix","(","lh",",","lm",",","u_va_frame_factor",")",";","li","=","mix","(","li",",","ln",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bm","(","lf",",","lh",",","li",",","lg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lo","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lo","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","lp","=","fY","(","lf",",","lh",",","li",",","lg",",","lo",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lq","=","(","u_model_matrix","*","vec4","(","lo",",","1.0",")",")",".","xyz",";","mat4","lr","=","_","(","u_camera_eye",",","lq",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ls","=","(","u_model_matrix","*","vec4","(","lo",",","1.0",")",")",".","xyz",";","lr","=","lr","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ls",")",";"]}]}}]},{type:"textline",tokens:["c","lp","=","ag","(","lf","-","lo",",","lo",",","lh",",","li",",","lg",",","lr",")",";","lp",".","b","=","lq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","lp","=","ag","(","lf",",","lo",",","lh",",","li",",","lg",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["float","lt","=","(","dot","(","cross","(","lp",".","e",",","lp",".","c",")",",","lp",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ks","=","vec4","(","lp",".","c",",","lt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cd","(","lp",".","a",",","lp",".","b",",","lg",")",";"]}]}}]},{type:"textline",tokens:["kq","=","lp",".","a",";","kr","=","lp",".","e",";","kp","=","u_camera_eye","-","lp",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aj","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","lp",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","lu","=","u_view_matrix","*","vec4","(","lp",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cE","=","lu",";"]}]}}]},{type:"textline",tokens:["vec4","lv","=","u_proj_matrix","*","lu",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["lv",".","xy","+=","u_subpixel_jitter","*","lv",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gh","(","lv",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gh","(","lp",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lw","=","lv",".","x",";","float","lx","=","lv",".","y",";","float","ly","=","lv",".","w",";","cD",".","x","=","(","lw","+","ly",")","/","2.0",";","cD",".","y","=","(","lx","+","ly",")","/","2.0",";","cD",".","z","=","ly",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","-","lu",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lv",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_ANIM_VALUES",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VECTOR_VIEW","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_ANIM_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_anim_values","[","NUM_ANIM_VALUES","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kq",";","varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kr",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ks",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ku",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","lf","=","vec3","(","UNITY_VALUE_NODES",")",";","vec3","lg","=","vec3","(","ZERO_VALUE_NODES",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"},{type:"textline",tokens:["vec3","lk","(","in","vec3","lh",",","in","float","li",")","{","vec3","lj","=","lg",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lj","=","le","(","cD",",","lh",".","xz","*","li",")",";"]}]}}]},{type:"textline",tokens:["return","lj",";","}"]}]}}]},{type:"textline",tokens:["vec3","ln","(","float","ll",",","vec3","lm",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","lm",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","mix","(","u_horizon_color",",","u_zenith_color",",","ll",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lu","(","vec3","lo",")","{","vec4","lp","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","vec4","lq","=","mix","(","vec4","(","lo",".","bg",",","lp",".","wz",")",",","vec4","(","lo",".","gb",",","lp",".","xy",")",",","step","(","lo",".","b",",","lo",".","g",")",")",";","vec4","lr","=","mix","(","vec4","(","lq",".","xyw",",","lo",".","r",")",",","vec4","(","lo",".","r",",","lq",".","yzx",")",",","step","(","lq",".","x",",","lo",".","r",")",")",";","float","ls","=","lr",".","x","-","min","(","lr",".","w",",","lr",".","y",")",";","float","lt","=","1.0e-10",";","return","vec3","(","abs","(","lr",".","z","+","(","lr",".","w","-","lr",".","y",")","/","(","6.0","*","ls","+","lt",")",")",",","ls","/","(","lr",".","x","+","lt",")",",","lr",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ly","(","vec3","lv",")","{","vec4","lw","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","vec3","lx","=","abs","(","fract","(","vec3","(","lv",".","r",",","lv",".","r",",","lv",".","r",")","+","lw",".","xyz",")","*","6.0","-","lw",".","www",")",";","return","lv",".","b","*","mix","(","lw",".","xxx",",","clamp","(","lx","-","lw",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","lv",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lA","(","vec2","lz",")","{","return","vec3","(","lz","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_TEXTURE_NORMAL4","||","USE_NODE_TEXTURE_COLOR4","||","USE_NODE_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lC","(","vec3","lB",")","{","return","vec2","(","lB",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","lH","(","inout","vec3","lD",",","vec3","lE",",","vec3","lF",",","float","lG",")","{"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kR","(","lD",",","lE",",","lF",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kR","(","lD",",","lE",",","lF",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","lG",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","hm","lV","(","vec3","lI",",","vec3","lJ",",","vec3","lK",",","vec3","lL",",","vec3","lM",",","vec3","lN",",","vec3","lO",",","vec2","lP",",","vec2","lQ",",","float","lR",",","float","lS",",","vec4","lT",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS_MAT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["return","jJ","(","lI",",","lJ",",","lK",",","lL",",","lM",",","lN",",","lO",",","lP",",","lQ",",","lR",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","lS",",","lT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","jO","(","lI",",","lJ",",","lK",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hm","lU",";","lU",".","a","=","vec4","(","lK",",","ZERO_VALUE_NODES",")",";","lU",".","b","=","lg",";","return","lU",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"node",name:"CAMERA",group:{type:"group",parts:[{type:"node_out",name:"mL",qualifier:["vec3"]},{type:"node_out",name:"mM",qualifier:["float"]},{type:"node_out",name:"mN",qualifier:["float"]},{type:"textline",tokens:["mL","=","normalize","(","mB",".","xyz",")",";","mM","=","abs","(","mB",".","z",")",";","mN","=","length","(","mB",".","xyz",")",";"]}]}},{type:"node",name:"COMBRGB",group:{type:"group",parts:[{type:"node_in",name:"mO",qualifier:["float"]},{type:"node_in",name:"mP",qualifier:["float"]},{type:"node_in",name:"mQ",qualifier:["float"]},{type:"node_out",name:"mR",qualifier:["vec3"]},{type:"textline",tokens:["mR","=","vec3","(","mO",",","mP",",","mQ",")",";"]}]}},{type:"node",name:"COMBHSV",group:{type:"group",parts:[{type:"node_in",name:"mS",qualifier:["float"]},{type:"node_in",name:"mT",qualifier:["float"]},{type:"node_in",name:"mU",qualifier:["float"]},{type:"node_out",name:"mV",qualifier:["vec3"]},{type:"textline",tokens:["mV","=","ly","(","vec3","(","mS",",","mT",",","mU",")",")",";"]}]}},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"lW",qualifier:["varying","vec2"]},{type:"node_out",name:"mW",qualifier:["vec3"]},{type:"textline",tokens:["mW","=","lA","(","lW",")",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"lX",qualifier:["varying","vec3"]},{type:"node_out",name:"mX",qualifier:["vec3"]},{type:"textline",tokens:["mX","=","lX",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"lY",qualifier:["varying","float"]},{type:"node_out",name:"mY",qualifier:["float"]},{type:"textline",tokens:["mY","=","lY",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"lZ",qualifier:["varying","vec2"]},{type:"node_out",name:"mZ",qualifier:["float"]},{type:"node_out",name:"m_",qualifier:["float"]},{type:"textline",tokens:["mZ","=","lZ","[","0","]",";","m_","=","lZ","[","1","]",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"l_",qualifier:["varying","vec3"]},{type:"node_out",name:"na",qualifier:["float"]},{type:"node_out",name:"nb",qualifier:["float"]},{type:"node_out",name:"nc",qualifier:["float"]},{type:"textline",tokens:["na","=","l_","[","0","]",";","nb","=","l_","[","1","]",";","nc","=","l_","[","2","]",";"]}]}},{type:"node",name:"GEOMETRY_NO",group:{type:"group",parts:[{type:"node_out",name:"nd",qualifier:["vec3"]},{type:"textline",tokens:["nd","=","mx",";"]}]}},{type:"node",name:"GEOMETRY_FB",group:{type:"group",parts:[{type:"node_out",name:"ne",qualifier:["float"]},{type:"textline",tokens:["ne","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"GEOMETRY_VW",group:{type:"group",parts:[{type:"node_out",name:"nf",qualifier:["vec3"]},{type:"textline",tokens:["nf","=","mz",";"]}]}},{type:"node",name:"GEOMETRY_GL",group:{type:"group",parts:[{type:"node_out",name:"ng",qualifier:["vec3"]},{type:"textline",tokens:["ng","=","vec3","(","mA",".","r",",","-","mA",".","b",",","mA",".","g",")",";"]}]}},{type:"node",name:"HUE_SAT",group:{type:"group",parts:[{type:"node_in",name:"nh",qualifier:["float"]},{type:"node_in",name:"ni",qualifier:["float"]},{type:"node_in",name:"nj",qualifier:["float"]},{type:"node_in",name:"nk",qualifier:["float"]},{type:"node_in",name:"nl",qualifier:["vec3"]},{type:"node_out",name:"nm",qualifier:["vec3"]},{type:"textline",tokens:["{","vec3","nn","=","lu","(","nl",")",";","nn","[","0","]","+=","(","nh","-","0.5",")",";","if","(","nn","[","0","]",">","UNITY_VALUE_NODES",")","nn","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","nn","[","0","]","<","ZERO_VALUE_NODES",")","nn","[","0","]","+=","UNITY_VALUE_NODES",";","nn","*=","vec3","(","UNITY_VALUE_NODES",",","ni",",","nj",")",";","nn","=","mix","(","lf",",","mix","(","lg",",","nn",",","step","(","lg",",","nn",")",")",",","step","(","nn",",","lf",")",")",";","nm","=","mix","(","nl",",","ly","(","nn",")",",","nk",")",";","}"]}]}},{type:"node",name:"INVERT",group:{type:"group",parts:[{type:"node_in",name:"no",qualifier:["float"]},{type:"node_in",name:"np",qualifier:["vec3"]},{type:"node_out",name:"nq",qualifier:["vec3"]},{type:"textline",tokens:["nq","=","mix","(","np",",","lf","-","np",",","no",")",";"]}]}},{type:"node",name:"LAMP",group:{type:"group",parts:[{type:"node_param",name:"ma",qualifier:["const","float"]},{type:"node_out",name:"nr",qualifier:["vec3"]},{type:"node_out",name:"ns",qualifier:["vec3"]},{type:"node_out",name:"nt",qualifier:["float"]},{type:"node_out",name:"nu",qualifier:["float"]},{type:"textline",tokens:["{","const","int","nv","=","int","(","ma",")",";","vec4","nw","=","u_lamp_light_factors","[","nv","]",";","vec3","nx","=","u_lamp_light_directions","[","nv","]",";","vec3","ny","=","u_lamp_light_positions","[","nv","]",";","float","nz","=","nw",".","z",";","nr","=","u_lamp_light_color_intensities","[","nv","]",";","if","(","nz","!=","-","UNITY_VALUE_NODES",")","{","ns","=","ny","-","kq",";","nt","=","length","(","ns",")",";","ns","=","normalize","(","ns",")",";","nu","=","nz","/","(","nz","+","nt","*","nt",")",";","float","nA","=","nw",".","x",";","float","nB","=","nw",".","y",";","if","(","nA",">","-","UNITY_VALUE_NODES",")","{","float","nC","=","dot","(","ns",",","nx",")",";","nC","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","nC","-","nA",")","/","nB",")",";","nu","*=","nC",";","}","}","else","{","ns","=","nx",";","nt","=","length","(","ny","-","kq",")",";","nu","=","UNITY_VALUE_NODES",";","}","}"]}]}},{type:"node",name:"NORMAL",group:{type:"group",parts:[{type:"node_param",name:"mb",qualifier:["vec3"]},{type:"node_in",name:"nD",qualifier:["vec3"]},{type:"node_out",name:"nE",qualifier:["vec3"]},{type:"node_out",name:"nF",qualifier:["float"]},{type:"textline",tokens:["nE","=","mb",";","nF","=","-","dot","(","nD",",","mb",")",";"]}]}},{type:"node",name:"VECTOR_VIEW",group:{type:"group",parts:[{type:"node_in",name:"nG",qualifier:["vec3"]},{type:"node_out",name:"nH",qualifier:["vec3"]},{type:"textline",tokens:["nH","=","-","(","u_view_matrix_frag","*","vec4","(","nG",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]}},{type:"node",name:"MAPPING_LIGHT",group:{type:"group",parts:[{type:"node_param",name:"mc",qualifier:["vec3"]},{type:"node_in",name:"nI",qualifier:["vec3"]},{type:"node_out",name:"nJ",qualifier:["vec3"]},{type:"textline",tokens:["nJ","=","nI","*","mc",";"]}]}},{type:"node",name:"MAPPING_HEAVY",group:{type:"group",parts:[{type:"node_param",name:"md",qualifier:["mat4"]},{type:"node_param",name:"me",qualifier:["float"]},{type:"node_param",name:"mf",qualifier:["float"]},{type:"node_param",name:"mg",qualifier:["vec3"]},{type:"node_param",name:"mh",qualifier:["vec3"]},{type:"node_in",name:"nK",qualifier:["vec3"]},{type:"node_out",name:"nL",qualifier:["vec3"]},{type:"textline",tokens:["nL","=","(","md","*","vec4","(","nK",",","UNITY_VALUE_NODES",")",")",".","xyz",";","if","(","me","==","UNITY_VALUE_NODES",")","nL","=","max","(","nL",",","mg",")",";","if","(","mf","==","UNITY_VALUE_NODES",")","nL","=","min","(","nL",",","mh",")",";"]}]}},{type:"node",name:"MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"nM",qualifier:["float"]},{type:"node_in",name:"nN",qualifier:["float"]},{type:"node_out",name:"nO",qualifier:["float"]},{type:"textline",tokens:["nO","=","nM","+","nN",";"]}]}},{type:"node",name:"MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"nP",qualifier:["float"]},{type:"node_in",name:"nQ",qualifier:["float"]},{type:"node_out",name:"nR",qualifier:["float"]},{type:"textline",tokens:["nR","=","nP","-","nQ",";"]}]}},{type:"node",name:"MATH_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"nS",qualifier:["float"]},{type:"node_in",name:"nT",qualifier:["float"]},{type:"node_out",name:"nU",qualifier:["float"]},{type:"textline",tokens:["nU","=","nS","*","nT",";"]}]}},{type:"node",name:"MATH_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"nV",qualifier:["float"]},{type:"node_in",name:"nW",qualifier:["float"]},{type:"node_out",name:"nX",qualifier:["float"]},{type:"textline",tokens:["nX","=","(","nW","!=","ZERO_VALUE_NODES",")","?","nV","/","nW",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_SINE",group:{type:"group",parts:[{type:"node_in",name:"nY",qualifier:["float"]},{type:"node_in",name:"nZ",qualifier:["float"]},{type:"node_out",name:"n_",qualifier:["float"]},{type:"textline",tokens:["n_","=","sin","(","nY",")",";","nZ",";"]}]}},{type:"node",name:"MATH_COSINE",group:{type:"group",parts:[{type:"node_in",name:"oa",qualifier:["float"]},{type:"node_in",name:"ob",qualifier:["float"]},{type:"node_out",name:"oc",qualifier:["float"]},{type:"textline",tokens:["oc","=","cos","(","oa",")",";","ob",";"]}]}},{type:"node",name:"MATH_TANGENT",group:{type:"group",parts:[{type:"node_in",name:"od",qualifier:["float"]},{type:"node_in",name:"oe",qualifier:["float"]},{type:"node_out",name:"of",qualifier:["float"]},{type:"textline",tokens:["of","=","tan","(","od",")",";","oe",";"]}]}},{type:"node",name:"MATH_ARCSINE",group:{type:"group",parts:[{type:"node_in",name:"og",qualifier:["float"]},{type:"node_in",name:"oh",qualifier:["float"]},{type:"node_out",name:"oi",qualifier:["float"]},{type:"textline",tokens:["oi","=","(","og","<=","UNITY_VALUE_NODES","&&","og",">=","-","UNITY_VALUE_NODES",")","?","asin","(","og",")",":","ZERO_VALUE_NODES",";","oh",";"]}]}},{type:"node",name:"MATH_ARCCOSINE",group:{type:"group",parts:[{type:"node_in",name:"oj",qualifier:["float"]},{type:"node_in",name:"ok",qualifier:["float"]},{type:"node_out",name:"ol",qualifier:["float"]},{type:"textline",tokens:["ol","=","(","oj","<=","UNITY_VALUE_NODES","&&","oj",">=","-","UNITY_VALUE_NODES",")","?","acos","(","oj",")",":","ZERO_VALUE_NODES",";","ok",";"]}]}},{type:"node",name:"MATH_ARCTANGENT",group:{type:"group",parts:[{type:"node_in",name:"om",qualifier:["float"]},{type:"node_in",name:"on",qualifier:["float"]},{type:"node_out",name:"oo",qualifier:["float"]},{type:"textline",tokens:["oo","=","atan","(","om",")",";","on",";"]}]}},{type:"node",name:"MATH_POWER",group:{type:"group",parts:[{type:"node_in",name:"op",qualifier:["float"]},{type:"node_in",name:"oq",qualifier:["float"]},{type:"node_out",name:"or",qualifier:["float"]},{type:"textline",tokens:["if","(","op","<","ZERO_VALUE_NODES","||","op","==","ZERO_VALUE_NODES","&&","oq","==","ZERO_VALUE_NODES",")","or","=","ZERO_VALUE_NODES",";","else","or","=","pow","(","op",",","oq",")",";"]}]}},{type:"node",name:"MATH_LOGARITHM",group:{type:"group",parts:[{type:"node_in",name:"os",qualifier:["float"]},{type:"node_in",name:"ot",qualifier:["float"]},{type:"node_out",name:"ou",qualifier:["float"]},{type:"textline",tokens:["ou","=","(","os",">","ZERO_VALUE_NODES","&&","ot",">","ZERO_VALUE_NODES",")","?","log2","(","os",")","/","log2","(","ot",")",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_MINIMUM",group:{type:"group",parts:[{type:"node_in",name:"ov",qualifier:["float"]},{type:"node_in",name:"ow",qualifier:["float"]},{type:"node_out",name:"ox",qualifier:["float"]},{type:"textline",tokens:["ox","=","min","(","ov",",","ow",")",";"]}]}},{type:"node",name:"MATH_MAXIMUM",group:{type:"group",parts:[{type:"node_in",name:"oy",qualifier:["float"]},{type:"node_in",name:"oz",qualifier:["float"]},{type:"node_out",name:"oA",qualifier:["float"]},{type:"textline",tokens:["oA","=","max","(","oy",",","oz",")",";"]}]}},{type:"node",name:"MATH_ROUND",group:{type:"group",parts:[{type:"node_in",name:"oB",qualifier:["float"]},{type:"node_in",name:"oC",qualifier:["float"]},{type:"node_out",name:"oD",qualifier:["float"]},{type:"textline",tokens:["oD","=","floor","(","oB","+","0.5",")",";","oC",";"]}]}},{type:"node",name:"MATH_LESS_THAN",group:{type:"group",parts:[{type:"node_in",name:"oE",qualifier:["float"]},{type:"node_in",name:"oF",qualifier:["float"]},{type:"node_out",name:"oG",qualifier:["float"]},{type:"textline",tokens:["oG","=","(","oE","<","oF",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_GREATER_THAN",group:{type:"group",parts:[{type:"node_in",name:"oH",qualifier:["float"]},{type:"node_in",name:"oI",qualifier:["float"]},{type:"node_out",name:"oJ",qualifier:["float"]},{type:"textline",tokens:["oJ","=","(","oH",">","oI",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_MODULO",group:{type:"group",parts:[{type:"node_in",name:"oK",qualifier:["float"]},{type:"node_in",name:"oL",qualifier:["float"]},{type:"node_out",name:"oM",qualifier:["float"]},{type:"textline",tokens:["oM","=","abs","(","oL",")",">","0.000001","?","mod","(","oK",",","oL",")",":","ZERO_VALUE_NODES",";"]}]}},{type:"node",name:"MATH_ABSOLUTE",group:{type:"group",parts:[{type:"node_in",name:"oN",qualifier:["float"]},{type:"node_in",name:"oO",qualifier:["float"]},{type:"node_out",name:"oP",qualifier:["float"]},{type:"textline",tokens:["oP","=","abs","(","oN",")",";","oO",";"]}]}},{type:"node",name:"MIX_RGB_MIX",group:{type:"group",parts:[{type:"node_in",name:"oQ",qualifier:["float"]},{type:"node_in",name:"oR",qualifier:["vec3"]},{type:"node_in",name:"oS",qualifier:["vec3"]},{type:"node_out",name:"oT",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oU","=","clamp","(","oQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oT","=","mix","(","oR",",","oS",",","oU",")",";","}"]}]}},{type:"node",name:"MIX_RGB_ADD",group:{type:"group",parts:[{type:"node_in",name:"oV",qualifier:["float"]},{type:"node_in",name:"oW",qualifier:["vec3"]},{type:"node_in",name:"oX",qualifier:["vec3"]},{type:"node_out",name:"oY",qualifier:["vec3"]},{type:"textline",tokens:["{","float","oZ","=","clamp","(","oV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oY","=","mix","(","oW",",","oW","+","oX",",","oZ",")",";","}"]}]}},{type:"node",name:"MIX_RGB_MULTIPLY",group:{type:"group",parts:[{type:"node_in",name:"o_",qualifier:["float"]},{type:"node_in",name:"pa",qualifier:["vec3"]},{type:"node_in",name:"pb",qualifier:["vec3"]},{type:"node_out",name:"pc",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pd","=","clamp","(","o_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pc","=","mix","(","pa",",","pa","*","pb",",","pd",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"pe",qualifier:["float"]},{type:"node_in",name:"pf",qualifier:["vec3"]},{type:"node_in",name:"pg",qualifier:["vec3"]},{type:"node_out",name:"ph",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pi","=","clamp","(","pe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ph","=","mix","(","pf",",","pf","-","pg",",","pi",")",";","}"]}]}},{type:"node",name:"MIX_RGB_SCREEN",group:{type:"group",parts:[{type:"node_in",name:"pj",qualifier:["float"]},{type:"node_in",name:"pk",qualifier:["vec3"]},{type:"node_in",name:"pl",qualifier:["vec3"]},{type:"node_out",name:"pm",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pn","=","clamp","(","pj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","po","=","UNITY_VALUE_NODES","-","pn",";","pm","=","lf","-","(","vec3","(","po",")","+","pn","*","(","lf","-","pl",")",")","*","(","lf","-","pk",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DIVIDE",group:{type:"group",parts:[{type:"node_in",name:"pp",qualifier:["float"]},{type:"node_in",name:"pq",qualifier:["vec3"]},{type:"node_in",name:"pr",qualifier:["vec3"]},{type:"node_out",name:"ps",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pt","=","clamp","(","pp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pu","=","UNITY_VALUE_NODES","-","pt",";","pr","+=","step","(","pr",",","lg",")",";","ps","=","pu","*","pq","+","pt","*","pq","/","pr",";","}"]}]}},{type:"node",name:"MIX_RGB_DIFFERENCE",group:{type:"group",parts:[{type:"node_in",name:"pv",qualifier:["float"]},{type:"node_in",name:"pw",qualifier:["vec3"]},{type:"node_in",name:"px",qualifier:["vec3"]},{type:"node_out",name:"py",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pz","=","clamp","(","pv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","py","=","mix","(","pw",",","abs","(","pw","-","px",")",",","pz",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DARKEN",group:{type:"group",parts:[{type:"node_in",name:"pA",qualifier:["float"]},{type:"node_in",name:"pB",qualifier:["vec3"]},{type:"node_in",name:"pC",qualifier:["vec3"]},{type:"node_out",name:"pD",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pE","=","clamp","(","pA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pD","=","min","(","pB",".","rgb",",","pC",".","rgb","*","pE",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LIGHTEN",group:{type:"group",parts:[{type:"node_in",name:"pF",qualifier:["float"]},{type:"node_in",name:"pG",qualifier:["vec3"]},{type:"node_in",name:"pH",qualifier:["vec3"]},{type:"node_out",name:"pI",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pJ","=","clamp","(","pF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pI","=","max","(","pG",".","rgb",",","pH",".","rgb","*","pJ",")",";","}"]}]}},{type:"node",name:"MIX_RGB_OVERLAY",group:{type:"group",parts:[{type:"node_in",name:"pK",qualifier:["float"]},{type:"node_in",name:"pL",qualifier:["vec3"]},{type:"node_in",name:"pM",qualifier:["vec3"]},{type:"node_out",name:"pN",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pO","=","clamp","(","pK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pP","=","UNITY_VALUE_NODES","-","pO",";","vec3","pQ","=","vec3","(","pP",")",";","pN","=","mix","(","pL","*","(","pQ","+","2.0","*","pO","*","pM",")",",","lf","-","(","pQ","+","2.0","*","pO","*","(","lf","-","pM",")",")","*","(","lf","-","pL",")",",","step","(","0.5",",","pL",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_DODGE",group:{type:"group",parts:[{type:"node_in",name:"pR",qualifier:["float"]},{type:"node_in",name:"pS",qualifier:["vec3"]},{type:"node_in",name:"pT",qualifier:["vec3"]},{type:"node_out",name:"pU",qualifier:["vec3"]},{type:"textline",tokens:["{","float","pV","=","clamp","(","pR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pW","=","lf","-","pV","*","pT",";","vec3","pX","=","pS","/","(","pW","+","step","(","pW",",","lg",")",")",";","pU","=","(","lf","-","step","(","pS",",","lg",")",")","*","mix","(","mix","(","lf",",","pX",",","step","(","pX",",","lf",")",")",",","lf",",","step","(","pW",",","lg",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_BURN",group:{type:"group",parts:[{type:"node_in",name:"pY",qualifier:["float"]},{type:"node_in",name:"pZ",qualifier:["vec3"]},{type:"node_in",name:"p_",qualifier:["vec3"]},{type:"node_out",name:"qa",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qb","=","clamp","(","pY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qc","=","lf","-","qb","*","(","lf","-","p_",")",";","vec3","qd","=","lf","-","(","lf","-","pZ",")","/","(","qc","+","step","(","qc",",","lg",")",")",";","qa","=","mix","(","mix","(","lg",",","mix","(","lf",",","qd",",","step","(","qd",",","lf",")",")",",","step","(","ZERO_VALUE_NODES",",","qd",")",")",",","lg",",","step","(","qc",",","lg",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_HUE",group:{type:"group",parts:[{type:"node_in",name:"qe",qualifier:["float"]},{type:"node_in",name:"qf",qualifier:["vec3"]},{type:"node_in",name:"qg",qualifier:["vec3"]},{type:"node_out",name:"qh",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qi","=","clamp","(","qe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qj",",","qk",",","ql",";","qh","=","qf",";","qk","=","lu","(","qg",")",";","if","(","qk",".","y","!=","ZERO_VALUE_NODES",")","{","qj","=","lu","(","qh",")",";","qj",".","x","=","qk",".","x",";","ql","=","ly","(","qj",")",";","qh","=","mix","(","qh",",","ql",",","qi",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SATURATION",group:{type:"group",parts:[{type:"node_in",name:"qm",qualifier:["float"]},{type:"node_in",name:"qn",qualifier:["vec3"]},{type:"node_in",name:"qo",qualifier:["vec3"]},{type:"node_out",name:"qp",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qq","=","clamp","(","qm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qr","=","UNITY_VALUE_NODES","-","qq",";","qp","=","qn",";","vec3","qs",",","qt",";","qs","=","lu","(","qp",")",";","if","(","qs",".","y","!=","ZERO_VALUE_NODES",")","{","qt","=","lu","(","qo",")",";","qs",".","y","=","qr","*","qs",".","y","+","qq","*","qt",".","y",";","qp","=","ly","(","qs",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_VALUE",group:{type:"group",parts:[{type:"node_in",name:"qu",qualifier:["float"]},{type:"node_in",name:"qv",qualifier:["vec3"]},{type:"node_in",name:"qw",qualifier:["vec3"]},{type:"node_out",name:"qx",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qy","=","clamp","(","qu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qz","=","UNITY_VALUE_NODES","-","qy",";","vec3","qA",",","qB",";","qA","=","lu","(","qv",")",";","qB","=","lu","(","qw",")",";","qA",".","z","=","qz","*","qA",".","z","+","qy","*","qB",".","z",";","qx","=","ly","(","qA",")",";","}"]}]}},{type:"node",name:"MIX_RGB_COLOR",group:{type:"group",parts:[{type:"node_in",name:"qC",qualifier:["float"]},{type:"node_in",name:"qD",qualifier:["vec3"]},{type:"node_in",name:"qE",qualifier:["vec3"]},{type:"node_out",name:"qF",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qG","=","clamp","(","qC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qH",",","qI",",","qJ",";","qF","=","qD",";","qI","=","lu","(","qE",")",";","if","(","qI",".","y","!=","ZERO_VALUE_NODES",")","{","qH","=","lu","(","qF",")",";","qH",".","x","=","qI",".","x",";","qH",".","y","=","qI",".","y",";","qJ","=","ly","(","qH",")",";","qF","=","mix","(","qF",",","qJ",",","qG",")",";","}","}"]}]}},{type:"node",name:"MIX_RGB_SOFT_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"qK",qualifier:["float"]},{type:"node_in",name:"qL",qualifier:["vec3"]},{type:"node_in",name:"qM",qualifier:["vec3"]},{type:"node_out",name:"qN",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qO","=","clamp","(","qK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qP","=","UNITY_VALUE_NODES","-","qO",";","vec3","qQ","=","qM","+","qL","-","qM","*","qL",";","qN","=","qL","*","(","vec3","(","qP",")","+","vec3","(","qO",")","*","(","(","lf","-","qL",")","*","qM","+","qQ",")",")",";","}"]}]}},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",group:{type:"group",parts:[{type:"node_in",name:"qR",qualifier:["float"]},{type:"node_in",name:"qS",qualifier:["vec3"]},{type:"node_in",name:"qT",qualifier:["vec3"]},{type:"node_out",name:"qU",qualifier:["vec3"]},{type:"textline",tokens:["{","float","qV","=","clamp","(","qR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qU","=","clamp","(","qS","+","qV","*","(","2.0","*","qT","-","lf",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","}"]}]}},{type:"node",name:"OUTPUT",group:{type:"group",parts:[{type:"node_in",name:"qW",qualifier:["vec3"]},{type:"node_in",name:"qX",qualifier:["float"]},{type:"textline",tokens:["mF","=","qW",";","mK","=","qX",";"]}]}},{type:"node",name:"MATERIAL",group:{type:"group",parts:[{type:"node_param",name:"mi",qualifier:["const","vec3"]},{type:"node_param",name:"mj",qualifier:["const","vec4"]},{type:"node_param",name:"mk",qualifier:["const","float"]},{type:"node_in",name:"qY",qualifier:["vec3"]},{type:"node_in",name:"qZ",qualifier:["float"]},{type:"node_in",name:"q_",qualifier:["vec3"]},{type:"node_in",name:"ra",qualifier:["vec3"]},{type:"node_out",name:"rb",qualifier:["vec3"]},{type:"node_out",name:"rc",qualifier:["float"]},{type:"node_out",name:"rd",qualifier:["vec3"]},{type:"textline",tokens:["{","qY","=","clamp","(","qY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qZ","=","clamp","(","qZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","q_","=","clamp","(","q_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","re","=","qY",";","float","rf","=","mi","[","0","]",";","vec2","rg","=","vec2","(","mi","[","1","]",",","mi","[","2","]",")",";","vec3","rh","=","mC","*","qY",";","vec3","ri","=","mj","[","1","]","*","q_",";","float","rj","=","mj","[","0","]",";","vec2","rk","=","vec2","(","mj","[","2","]",",","mj","[","3","]",")",";","float","rl","=","fi","(","re",")",";","vec3","rm",";","if","(","mk","==","UNITY_VALUE_NODES",")","rm","=","normalize","(","ra",")",";","else","rm","=","mx",";","float","rn","=","0.5","*","rm",".","y","+","0.5",";","vec3","ro","=","mE","*","u_environment_energy","*","ln","(","rn",",","rm",")",";","hm","rp","=","lV","(","rh",",","ro",",","re",",","ri",",","mA",",","rm",",","mz",",","rk",",","rg",",","rl",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";","rb","=","(","rf","==","UNITY_VALUE_NODES",")","?","rp",".","a",".","rgb",":","lg",";","rc","=","qZ",";","rd","=","rm",";","if","(","rj","==","UNITY_VALUE_NODES",")","{","rc","+=","rp",".","a",".","a","*","ri",".","r","*","mD",";","rc","=","clamp","(","rc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rb","+=","rp",".","b",";","mG","=","rp",".","b",";","}","else","{","mG","=","lg",";","}","mH","=","rm",";","mJ","=","rl",";","}"]}]}},{type:"node",name:"MATERIAL_EXT",group:{type:"group",parts:[{type:"node_param",name:"ml",qualifier:["const","vec3"]},{type:"node_param",name:"mm",qualifier:["const","vec4"]},{type:"node_param",name:"mn",qualifier:["const","float"]},{type:"node_in",name:"rq",qualifier:["vec3"]},{type:"node_in",name:"rr",qualifier:["float"]},{type:"node_in",name:"rs",qualifier:["vec3"]},{type:"node_in",name:"rt",qualifier:["vec3"]},{type:"node_in",name:"ru",qualifier:["float"]},{type:"node_in",name:"rv",qualifier:["float"]},{type:"node_in",name:"rw",qualifier:["vec4"]},{type:"node_in",name:"rx",qualifier:["float"]},{type:"node_in",name:"ry",qualifier:["float"]},{type:"node_out",name:"rz",qualifier:["vec3"]},{type:"node_out",name:"rA",qualifier:["float"]},{type:"node_out",name:"rB",qualifier:["vec3"]},{type:"node_out",name:"rC",qualifier:["vec3"]},{type:"node_out",name:"rD",qualifier:["vec3"]},{type:"textline",tokens:["{","rq","=","clamp","(","rq",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rr","=","clamp","(","rr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","rs","=","clamp","(","rs",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","rE","=","rq",";","float","rF","=","ml","[","0","]",";","vec2","rG","=","vec2","(","ml","[","1","]",",","ml","[","2","]",")",";","vec3","rH","=","ru","*","rq",";","vec3","rI","=","mm","[","1","]","*","rs",";","float","rJ","=","mm","[","0","]",";","vec2","rK","=","vec2","(","mm","[","2","]",",","mm","[","3","]",")",";","float","rL","=","fi","(","rE",")",";","vec3","rM",";","if","(","mn","==","UNITY_VALUE_NODES",")","rM","=","normalize","(","rt",")",";","else","rM","=","mx",";","float","rN","=","0.5","*","rM",".","y","+","0.5",";","vec3","rO","=","mE","*","u_environment_energy","*","ln","(","rN",",","rM",")",";","hm","rP","=","lV","(","rH",",","rO",",","rE",",","rI",",","mA",",","rM",",","mz",",","rK",",","rG",",","rL",",","rv",",","rw",")",";","rz","=","(","rF","==","UNITY_VALUE_NODES",")","?","rP",".","a",".","rgb",":","lg",";","rA","=","rr",";","rB","=","rM",";","rC","=","rP",".","a",".","rgb",";","rD","=","rP",".","b",";","lH","(","rz",",","mz",",","rB",",","rx",")",";","if","(","rJ","==","UNITY_VALUE_NODES",")","{","rz","+=","rP",".","b",";","rA","+=","rP",".","a",".","a","*","rI",".","r","*","ry",";","rA","=","clamp","(","rA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","mG","=","rP",".","b",";","}","else","{","mG","=","lg",";","}","mH","=","rM",";","mJ","=","rL",";","}"]}]}},{type:"node",name:"RGB",group:{type:"group",parts:[{type:"node_param",name:"mo",qualifier:["vec3"]},{type:"node_out",name:"rQ",qualifier:["vec3"]},{type:"textline",tokens:["rQ","=","mo",";"]}]}},{type:"node",name:"RGBTOBW",group:{type:"group",parts:[{type:"node_in",name:"rR",qualifier:["vec3"]},{type:"node_out",name:"rS",qualifier:["float"]},{type:"textline",tokens:["rS","=","rR",".","r","*","0.35","+","rR",".","g","*","0.45","+","rR",".","b","*","0.2",";"]}]}},{type:"node",name:"SEPRGB",group:{type:"group",parts:[{type:"node_in",name:"rT",qualifier:["vec3"]},{type:"node_out",name:"rU",qualifier:["float"]},{type:"node_out",name:"rV",qualifier:["float"]},{type:"node_out",name:"rW",qualifier:["float"]},{type:"textline",tokens:["rU","=","rT",".","r",";","rV","=","rT",".","g",";","rW","=","rT",".","b",";"]}]}},{type:"node",name:"SEPHSV",group:{type:"group",parts:[{type:"node_in",name:"rX",qualifier:["vec3"]},{type:"node_out",name:"rY",qualifier:["float"]},{type:"node_out",name:"rZ",qualifier:["float"]},{type:"node_out",name:"r_",qualifier:["float"]},{type:"textline",tokens:["{","vec3","sa","=","lu","(","rX",")",";","rY","=","sa",".","r",";","rZ","=","sa",".","g",";","r_","=","sa",".","b",";","}"]}]}},{type:"node",name:"SQUEEZE",group:{type:"group",parts:[{type:"node_in",name:"sb",qualifier:["float"]},{type:"node_in",name:"sc",qualifier:["float"]},{type:"node_in",name:"sd",qualifier:["float"]},{type:"node_out",name:"se",qualifier:["float"]},{type:"textline",tokens:["se","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","sb","-","sd",")","*","sc",")",")",")",";"]}]}},{type:"node",name:"SRGB_TO_LINEAR",group:{type:"group",parts:[{type:"node_in",name:"sf",qualifier:["vec3"]},{type:"node_out",name:"sg",qualifier:["vec3"]},{type:"textline",tokens:["sg","=","max","(","lg",",","sf",")",";","sg","=","pow","(","sg",",","vec3","(","2.2",")",")",";"]}]}},{type:"node",name:"LINEAR_TO_SRGB",group:{type:"group",parts:[{type:"node_in",name:"sh",qualifier:["vec3"]},{type:"node_out",name:"si",qualifier:["vec3"]},{type:"textline",tokens:["si","=","max","(","lg",",","sh",")",";","si","=","pow","(","si",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]}},{type:"node",name:"TEXTURE_COLOR",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sj",qualifier:["vec3"]},{type:"node_out",name:"sk",qualifier:["vec3"]},{type:"node_out",name:"sl",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sm","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","lC","(","sj",")",")",";","sk","=","sm",".","xyz",";","go","(","sk",")",";","sl","=","sm",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sn",qualifier:["vec3"]},{type:"node_out",name:"so",qualifier:["vec3"]},{type:"node_out",name:"sp",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sq","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","lC","(","sn",")",")",";","mI","=","sq",".","xyz","-","0.5",";","so","=","normalize","(","mw","*","mI",")",";","sp","=","sq",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_ENVIRONMENT",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]},{type:"node_in",name:"sr",qualifier:["vec3"]},{type:"node_out",name:"ss",qualifier:["vec3"]},{type:"node_out",name:"st",qualifier:["float"]},{type:"textline",tokens:["{","vec4","su","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","sr",")",";","ss","=","su",".","xyz",";","go","(","ss",")",";","st","=","su",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sv",qualifier:["vec3"]},{type:"node_in",name:"sw",qualifier:["vec3"]},{type:"node_out",name:"sx",qualifier:["vec3"]},{type:"node_out",name:"sy",qualifier:["float"]},{type:"node_out",name:"sz",qualifier:["vec3"]},{type:"node_out",name:"sA",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sB","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lC","(","sv",")",")",";","sx","=","sB",".","xyz",";","go","(","sx",")",";","sy","=","sB",".","w",";","sB","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lC","(","sw",")",")",";","sz","=","sB",".","xyz",";","go","(","sz",")",";","sA","=","sB",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL2",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sC",qualifier:["vec3"]},{type:"node_in",name:"sD",qualifier:["vec3"]},{type:"node_out",name:"sE",qualifier:["vec3"]},{type:"node_out",name:"sF",qualifier:["float"]},{type:"node_out",name:"sG",qualifier:["vec3"]},{type:"node_out",name:"sH",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sI","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lC","(","sC",")",")",";","mI","=","sI",".","xyz","-","0.5",";","sE","=","normalize","(","mw","*","mI",")",";","sF","=","sI",".","w",";","sI","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lC","(","sD",")",")",";","mI","=","sI",".","xyz","-","0.5",";","sG","=","normalize","(","mw","*","mI",")",";","sH","=","sI",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sJ",qualifier:["vec3"]},{type:"node_in",name:"sK",qualifier:["vec3"]},{type:"node_in",name:"sL",qualifier:["vec3"]},{type:"node_out",name:"sM",qualifier:["vec3"]},{type:"node_out",name:"sN",qualifier:["float"]},{type:"node_out",name:"sO",qualifier:["vec3"]},{type:"node_out",name:"sP",qualifier:["float"]},{type:"node_out",name:"sQ",qualifier:["vec3"]},{type:"node_out",name:"sR",qualifier:["float"]},{type:"textline",tokens:["{","vec4","sS","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lC","(","sJ",")",")",";","sM","=","sS",".","xyz",";","go","(","sM",")",";","sN","=","sS",".","w",";","sS","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lC","(","sK",")",")",";","sO","=","sS",".","xyz",";","go","(","sO",")",";","sP","=","sS",".","w",";","sS","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lC","(","sL",")",")",";","sQ","=","sS",".","xyz",";","go","(","sQ",")",";","sR","=","sS",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_COLOR4",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_COLOR4_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"sT",qualifier:["vec3"]},{type:"node_in",name:"sU",qualifier:["vec3"]},{type:"node_in",name:"sV",qualifier:["vec3"]},{type:"node_in",name:"sW",qualifier:["vec3"]},{type:"node_out",name:"sX",qualifier:["vec3"]},{type:"node_out",name:"sY",qualifier:["float"]},{type:"node_out",name:"sZ",qualifier:["vec3"]},{type:"node_out",name:"s_",qualifier:["float"]},{type:"node_out",name:"ta",qualifier:["vec3"]},{type:"node_out",name:"tb",qualifier:["float"]},{type:"node_out",name:"tc",qualifier:["vec3"]},{type:"node_out",name:"td",qualifier:["float"]},{type:"textline",tokens:["{","vec4","te","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lC","(","sT",")",")",";","sX","=","te",".","xyz",";","go","(","sX",")",";","sY","=","te",".","w",";","te","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lC","(","sU",")",")",";","sZ","=","te",".","xyz",";","go","(","sZ",")",";","s_","=","te",".","w",";","te","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lC","(","sV",")",")",";","ta","=","te",".","xyz",";","go","(","ta",")",";","tb","=","te",".","w",";","te","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lC","(","sW",")",")",";","tc","=","te",".","xyz",";","go","(","tc",")",";","td","=","te",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL3",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"tf",qualifier:["vec3"]},{type:"node_in",name:"tg",qualifier:["vec3"]},{type:"node_in",name:"th",qualifier:["vec3"]},{type:"node_out",name:"ti",qualifier:["vec3"]},{type:"node_out",name:"tj",qualifier:["float"]},{type:"node_out",name:"tk",qualifier:["vec3"]},{type:"node_out",name:"tl",qualifier:["float"]},{type:"node_out",name:"tm",qualifier:["vec3"]},{type:"node_out",name:"tn",qualifier:["float"]},{type:"textline",tokens:["{","vec4","to","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lC","(","tf",")",")",";","mI","=","to",".","xyz","-","0.5",";","ti","=","normalize","(","mw","*","mI",")",";","tj","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lC","(","tg",")",")",";","mI","=","to",".","xyz","-","0.5",";","tk","=","normalize","(","mw","*","mI",")",";","tl","=","to",".","w",";","to","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lC","(","th",")",")",";","mI","=","to",".","xyz","-","0.5",";","tm","=","normalize","(","mw","*","mI",")",";","tn","=","to",".","w",";","}"]}]}},{type:"node",name:"TEXTURE_NORMAL4",group:{type:"group",parts:[{type:"node_param",name:"node_TEXTURE_NORMAL4_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"tp",qualifier:["vec3"]},{type:"node_in",name:"tq",qualifier:["vec3"]},{type:"node_in",name:"tr",qualifier:["vec3"]},{type:"node_in",name:"ts",qualifier:["vec3"]},{type:"node_out",name:"tt",qualifier:["vec3"]},{type:"node_out",name:"tu",qualifier:["float"]},{type:"node_out",name:"tv",qualifier:["vec3"]},{type:"node_out",name:"tw",qualifier:["float"]},{type:"node_out",name:"tx",qualifier:["vec3"]},{type:"node_out",name:"ty",qualifier:["float"]},{type:"node_out",name:"tz",qualifier:["vec3"]},{type:"node_out",name:"tA",qualifier:["float"]},{type:"textline",tokens:["{","vec4","tB","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lC","(","tp",")",")",";","mI","=","tB",".","xyz","-","0.5",";","tt","=","normalize","(","mw","*","mI",")",";","tu","=","tB",".","w",";","tB","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lC","(","tq",")",")",";","mI","=","tB",".","xyz","-","0.5",";","tv","=","normalize","(","mw","*","mI",")",";","tw","=","tB",".","w",";","tB","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lC","(","tr",")",")",";","mI","=","tB",".","xyz","-","0.5",";","tx","=","normalize","(","mw","*","mI",")",";","ty","=","tB",".","w",";","tB","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lC","(","ts",")",")",";","mI","=","tB",".","xyz","-","0.5",";","tz","=","normalize","(","mw","*","mI",")",";","tA","=","tB",".","w",";","}"]}]}},{type:"node",name:"VALUE",group:{type:"group",parts:[{type:"node_param",name:"mp",qualifier:["const","float"]},{type:"node_out",name:"tC",qualifier:["float"]},{type:"textline",tokens:["tC","=","mp",";"]}]}},{type:"node",name:"ANIM_VALUE",group:{type:"group",parts:[{type:"node_param",name:"mq",qualifier:["const","int"]},{type:"node_out",name:"tD",qualifier:["float"]},{type:"textline",tokens:["tD","=","u_anim_values","[","mq","]",";"]}]}},{type:"node",name:"VECT_MATH_ADD",group:{type:"group",parts:[{type:"node_in",name:"tE",qualifier:["vec3"]},{type:"node_in",name:"tF",qualifier:["vec3"]},{type:"node_out",name:"tG",qualifier:["vec3"]},{type:"node_out",name:"tH",qualifier:["float"]},{type:"textline",tokens:["tG","=","tE","+","tF",";","tH","=","(","abs","(","tG","[","0","]",")","+","abs","(","tG","[","1","]",")","+","abs","(","tG","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_SUBTRACT",group:{type:"group",parts:[{type:"node_in",name:"tI",qualifier:["vec3"]},{type:"node_in",name:"tJ",qualifier:["vec3"]},{type:"node_out",name:"tK",qualifier:["vec3"]},{type:"node_out",name:"tL",qualifier:["float"]},{type:"textline",tokens:["tK","=","tI","-","tJ",";","tL","=","(","abs","(","tK","[","0","]",")","+","abs","(","tK","[","1","]",")","+","abs","(","tK","[","2","]",")",")","/","3.0",";"]}]}},{type:"node",name:"VECT_MATH_AVERAGE",group:{type:"group",parts:[{type:"node_in",name:"tM",qualifier:["vec3"]},{type:"node_in",name:"tN",qualifier:["vec3"]},{type:"node_out",name:"tO",qualifier:["vec3"]},{type:"node_out",name:"tP",qualifier:["float"]},{type:"textline",tokens:["tO","=","tM","+","tN",";","tP","=","length","(","tO",")",";","tO","=","normalize","(","tO",")",";"]}]}},{type:"node",name:"VECT_MATH_DOT_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"tQ",qualifier:["vec3"]},{type:"node_in",name:"tR",qualifier:["vec3"]},{type:"node_out",name:"tS",qualifier:["vec3"]},{type:"node_out",name:"tT",qualifier:["float"]},{type:"textline",tokens:["tS","=","lg",";","tT","=","dot","(","tQ",",","tR",")",";"]}]}},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",group:{type:"group",parts:[{type:"node_in",name:"tU",qualifier:["vec3"]},{type:"node_in",name:"tV",qualifier:["vec3"]},{type:"node_out",name:"tW",qualifier:["vec3"]},{type:"node_out",name:"tX",qualifier:["float"]},{type:"textline",tokens:["tW","=","cross","(","tU",",","tV",")",";","tX","=","length","(","tW",")",";"]}]}},{type:"node",name:"VECT_MATH_NORMALIZE",group:{type:"group",parts:[{type:"node_in",name:"tY",qualifier:["vec3"]},{type:"node_in",name:"tZ",qualifier:["vec3"]},{type:"node_out",name:"t_",qualifier:["vec3"]},{type:"node_out",name:"ua",qualifier:["float"]},{type:"textline",tokens:["t_","=","normalize","(","tY",")",";","ua","=","length","(","tY",")",";","tZ",";"]}]}},{type:"node",name:"REFLECT",group:{type:"group",parts:[{type:"node_in",name:"ub",qualifier:["vec3"]},{type:"node_in",name:"uc",qualifier:["vec3"]},{type:"node_out",name:"ud",qualifier:["vec3"]},{type:"textline",tokens:["ud","=","reflect","(","-","ub",",","uc",")",";"]}]}},{type:"node",name:"PARALLAX",group:{type:"group",parts:[{type:"node_param",name:"node_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]},{type:"node_in",name:"ue",qualifier:["vec3"]},{type:"node_in",name:"uf",qualifier:["float"]},{type:"node_in",name:"ug",qualifier:["const","float"]},{type:"node_in",name:"uh",qualifier:["const","float"]},{type:"node_out",name:"ui",qualifier:["vec3"]},{type:"textline",tokens:["{","float","uj","=","length","(","mB",")",";","if","(","uj","<","uh",")","{","vec2","uk","=","lC","(","ue",")",";","float","ul","=","clamp","(","0.5","*","(","uh","-","uj",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","um","=","uf","*","ul",";","vec3","un","=","normalize","(","mz","*","mw",")",";","float","uo","=","UNITY_VALUE_NODES","/","ug",";","vec2","up","=","un",".","xy","*","um","/","(","ug","*","un",".","z",")",";","float","uq","=","UNITY_VALUE_NODES",";","float","ur","=","texture2D","(","node_PARALLAX_var_texture",",","uk",")",".","a",";","for","(","float","us","=","1.0",";","us","<=","ug",";","us","++",")","{","if","(","ur","<","uq",")","{","uq","-=","uo",";","uk","-=","up",";","ur","=","texture2D","(","node_PARALLAX_var_texture",",","uk",")",".","a",";","}","}","vec2","ut","=","uk","+","up",";","float","uu","=","texture2D","(","node_PARALLAX_var_texture",",","ut",")",".","a","-","(","uq","+","uo",")",";","float","uv","=","ur","-","uq",";","float","uw","=","uv","/","(","uv","-","uu",")",";","uk","=","uw","*","ut","+","(","UNITY_VALUE_NODES","-","uw",")","*","uk",";","ui","=","lA","(","uk",")",";","}","else","ui","=","ue",";","}"]}]}},{type:"node",name:"CLAMP",group:{type:"group",parts:[{type:"node_in",name:"ux",qualifier:["vec3"]},{type:"node_out",name:"uy",qualifier:["vec3"]},{type:"textline",tokens:["uy","=","clamp","(","ux",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}},{type:"node",name:"REFRACTION",group:{type:"group",parts:[{type:"node_in",name:"uz",qualifier:["vec3"]},{type:"node_in",name:"uA",qualifier:["float"]},{type:"node_out",name:"uB",qualifier:["vec3"]},{type:"textline",tokens:["uB","=","lk","(","uz",",","uA",")",";"]}]}},{type:"node",name:"TRANSLUCENCY",group:{type:"group",parts:[{type:"node_in",name:"uC",qualifier:["float"]},{type:"node_in",name:"uD",qualifier:["float"]},{type:"node_in",name:"uE",qualifier:["float"]},{type:"node_in",name:"uF",qualifier:["float"]},{type:"node_in",name:"uG",qualifier:["float"]},{type:"node_out",name:"uH",qualifier:["float"]},{type:"node_out",name:"uI",qualifier:["vec4"]},{type:"textline",tokens:["uH","=","uC",";","uI","=","vec4","(","uD",",","uE",",","uF",",","uG",")",";"]}]}},{type:"node",name:"TIME",group:{type:"group",parts:[{type:"node_out",name:"uJ",qualifier:["float"]},{type:"textline",tokens:["uJ","=","u_time",";"]}]}},{type:"node",name:"SMOOTHSTEP",group:{type:"group",parts:[{type:"node_in",name:"uK",qualifier:["float"]},{type:"node_in",name:"uL",qualifier:["float"]},{type:"node_in",name:"uM",qualifier:["float"]},{type:"node_out",name:"uN",qualifier:["float"]},{type:"textline",tokens:["uN","=","smoothstep","(","uL",",","uM",",","uK",")",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mr","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","ms","=","kq",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mt","=","kr",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","mt","=","mt",";","else","mt","=","-","mt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mu","=","cross","(","mt",",","ks",".","xyz",")","*","ks",".","w",";","mat3","mv","=","mat3","(","ks",".","xyz",",","mu",",","mt",")",";","mat3","mw","=","mv",";"]}]}}]},{type:"textline",tokens:["vec3","mx","=","normalize","(","mt",")",";"]}]}}]},{type:"textline",tokens:["vec3","my","=","u_camera_eye_frag","-","kq",";","vec3","mz","=","normalize","(","my",")",";","vec3","mA","=","kq",";","vec4","mB","=","cE",";","float","mC","=","u_emit",";","float","mD","=","u_specular_alpha",";","float","mE","=","u_ambient",";","vec3","mF",";","vec3","mG",";","vec3","mH",";","vec3","mI",";","float","mJ",";","float","mK",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","uO","=","mF",";","float","uP","=","mK",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["uO","=","max","(","uO","-","sqrt","(","0.01","*","-","min","(","ms",",","ZERO_VALUE_NODES",")",")",",","0.5","*","uO",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["ko","(","uO",",","ms",",","u_time",",","mJ",",","mH",",","u_sun_direction",",","mr",",","u_sun_quaternion",",","kq",",","length","(","cE",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","uQ","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uR","=","gI","(","u_cube_fog",",","mz",")",";","vec4","uS","=","vec4","(","uR",",","u_fog_color_density",".","a",")",";","go","(","uS",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","uS","=","u_fog_color_density",";","uS",".","rgb","*=","uQ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["ha","(","uO",",","length","(","cE",")",",","mz",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uS",",","ms",",","uQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gB","(","uO",",","length","(","cE",")",",","uS",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","uP","<","0.5",")","discard",";","uP","=","UNITY_VALUE_NODES",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","uT","=","texture2DProj","(","u_shadow_mask",",","cD",")",".","rg",";","float","uU","=","uT",".","g",";","uO","=","vec3","(","uU",")",";"]}]}}]},{type:"textline",tokens:["gq","(","uO",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gt","(","uO",",","uP",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uO",",","uP",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kq",";","varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kr",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ks",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cz",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cA",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cB",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cC",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ku",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"lW",qualifier:["varying","vec2"]},{type:"textline",tokens:["lW","=","node_GEOMETRY_UV_var_a_uv",";"]}]}},{type:"node",name:"GEOMETRY_VC",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"ma",qualifier:["varying","vec3"]},{type:"textline",tokens:["ma","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC1",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"mb",qualifier:["varying","float"]},{type:"textline",tokens:["mb","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC2",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"mc",qualifier:["varying","vec2"]},{type:"textline",tokens:["mc","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]}},{type:"node",name:"GEOMETRY_VC3",group:{type:"group",parts:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"md",qualifier:["varying","vec3"]},{type:"textline",tokens:["md","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]}},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","me","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mf","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","vec3","(","a_tangent",")",";","vec3","mh","=","a_tangent","[","3","]","*","cross","(","mf",",","mg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","vec3","(","0.0",")",";","vec3","mh","=","vec3","(","0.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mf","=","vec3","(","0.0",")",";","vec3","mg","=","vec3","(","0.0",")",";","vec3","mh","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","mix","(","me",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["mf","=","mix","(","mf",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mi","=","vec3","(","a_tangent",")",";","vec3","mj","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","mi",")",";","mg","=","mix","(","mg",",","mi",",","u_va_frame_factor",")",";","mh","=","mix","(","mh",",","mj",",","u_va_frame_factor",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bm","(","me",",","mg",",","mh",",","mf",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mk","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ml","=","(","u_model_matrix","*","vec4","(","mk",",","1.0",")",")",".","xyz",";","mat4","mm","=","_","(","u_camera_eye",",","ml",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mn","=","(","u_model_matrix","*","vec4","(","mk",",","1.0",")",")",".","xyz",";","mm","=","mm","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","mn",")",";"]}]}}]},{type:"textline",tokens:["c","mo","=","ag","(","me","-","mk",",","mk",",","mg",",","mh",",","mf",",","mm",")",";","mo",".","b","=","ml",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","mo","=","ag","(","me",",","mk",",","mg",",","mh",",","mf",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cd","(","mo",".","a",",","mo",".","b",",","mf",")",";"]}]}}]},{type:"textline",tokens:["kq","=","mo",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","mo",".","e",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","mp","=","(","dot","(","cross","(","mo",".","e",",","mo",".","c",")",",","mo",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","ks","=","vec4","(","mo",".","c",",","mp",")",";"]}]}}]}]}}]},{type:"textline",tokens:["cE","=","u_view_matrix","*","vec4","(","mo",".","a",",","1.0",")",";","vec4","mq","=","u_proj_matrix","*","cE",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["mq",".","xy","+=","u_subpixel_jitter","*","mq",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gh","(","mq",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gh","(","mo",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","mr","=","mq",".","x",";","float","ms","=","mq",".","y",";","float","mt","=","mq",".","w",";","cD",".","x","=","(","mr","+","mt",")","/","2.0",";","cD",".","y","=","(","ms","+","mt",")","/","2.0",";","cD",".","z","=","mt",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","-","cE",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","mq",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","me",";","varying","vec3","kt",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cE",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","mf","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","mg","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","mf",")",";","float","mh","=","u_diffuse_color",".","a","*","me","*","(","1.0","-","clamp","(","mg",",","0.0",",","1.0",")",")",";","vec3","mi","=","kt","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gB","(","mi",",","length","(","cE",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["gq","(","mi",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gt","(","mi",",","mh",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","mi",",","mh",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";","varying","float","me",";","varying","vec3","kt",";","varying","vec3","cE",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","mf","mX",";","mX","=","mW","(",")",";","vec4","mY","=","u_view_matrix","*","vec4","(","mX",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","mY",";","me","=","mX",".","c",";","kt","=","mX",".","d",";","cE","=","mY",".","xyz",";","float","mZ","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","mX",".","a","*","mZ",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","me",";","varying","vec3","kt",";","varying","vec2","a",";","varying","vec3","kp",";","varying","vec3","kq",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","lf","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lg","=","texture2D","(","u_sampler",",","a",")",";","go","(","lg",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["lf",".","rgb","=","mix","(","lf",".","rgb",",","lg",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["lf",".","rgb","*=","mix","(","vec3","(","1.0",")",",","lg",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["lf",".","a","=","lg",".","a",";"]}]}}]},{type:"textline",tokens:["lf",".","rgb","*=","kt",";","vec3","lh","=","u_diffuse_intensity","*","lf",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","li","=","u_emit","*","lf",".","rgb",";","vec3","lj","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lk","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lj",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ll","=","0.5",";","vec3","lk","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","ll",")",";"]}]}}]},{type:"textline",tokens:["vec3","lm","=","u_ambient","*","lk",";","float","ln","=","u_specular_params","[","0","]",";","vec2","lo","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","lp","=","ln","*","u_specular_color",";","vec3","lq","=","normalize","(","kp",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hm","lr","=","jJ","(","li",",","lm",",","lh",",","lp",",","kq",",","lj",",","lq",",","lo",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hm","lr","=","jO","(","li",",","lm",",","lh",")",";"]}]}}]},{type:"textline",tokens:["vec3","ls","=","lr",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ls","=","lh",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gB","(","ls",",","length","(","cE",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","lt","=","lf",".","a","*","me",";","gq","(","ls",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gt","(","ls",",","lt",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ls",",","lt",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";","varying","float","me",";","varying","vec3","kt",";","varying","vec2","a",";","varying","vec3","kp",";","varying","vec3","kq",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","lh","(","vec2","lf",",","vec2","lg",")","{","return","(","atan","(","lg",".","y",",","lg",".","x",")","-","atan","(","lf",".","y",",","lf",".","x",")",")",";","}","void","main","(",")","{","mf","li",";","li","=","mW","(",")",";","float","lj",";","mat4","lk",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","lj","=","li",".","e",";","lk","=","y","(","li",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","lj","=","li",".","e",";","lk","=","j","(",")",";","lk","[","3","]","=","vec4","(","li",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","lj","=","li",".","e",";","lk","=","n","(","radians","(","90.0",")",")",";","lk","[","3","]","=","vec4","(","li",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","lj","=","lh","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","li",".","e",";","lk","=","l","(","radians","(","-","90.0",")",")",";","lk","[","3","]","=","vec4","(","li",".","b",",","1.0",")",";","}","vec4","ll","=","vec4","(","a_p_bb_vertex","*","2.0","*","li",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","lm","=","lk","*","p","(","lj",")","*","ll",";","vec4","ln","=","u_view_matrix","*","lm",";","vec4","lo","=","u_proj_matrix","*","ln",";","gl_Position","=","lo",";","me","=","li",".","c",";","kt","=","li",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","kq","=","lm",".","xyz",";","kp","=","u_camera_eye","-","lm",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cE","=","ln",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","mX",";","const","float","mY","=","0.99",";","const","float","mZ","=","1.8",";","const","int","m_","=","8",";","float","nj","(","vec3","na",",","vec3","nb",")","{","float","nc","=","dot","(","nb",",","nb",")",";","float","nd","=","2.0","*","dot","(","nb",",","na",")",";","float","ne","=","dot","(","na",",","na",")","-","1.0",";","float","nf","=","nd","*","nd","-","4.0","*","nc","*","ne",";","float","ng","=","sqrt","(","nf",")",";","float","nh","=","(","-","nd","-","ng",")","/","2.0",";","float","ni","=","ne","/","nh",";","return","ni",";","}","float","nq","(","float","nk",",","float","nl",")","{","float","nm","=","3.0","*","(","1.0","-","nl","*","nl",")",";","float","nn","=","2.0","*","(","2.0","+","nl","*","nl",")",";","float","no","=","1.0","+","nk","*","nk",";","float","np","=","pow","(","1.0","+","nl","*","nl","-","2.0","*","nl","*","nk",",","1.5",")",";","np","=","max","(","np",",","0.00001",")",";","return","(","nm","/","nn",")","*","(","no","/","np",")",";","}","float","ny","(","vec3","nr",",","vec3","ns",",","float","nt",")","{","float","nu","=","dot","(","ns",",","-","nr",")",";","if","(","nu","<","0.0",")","{","return","1.0",";","}","vec3","nv","=","nr","+","nu","*","ns",";","if","(","length","(","nv",")","<","nt",")","{","return","0.0",";","}","else","if","(","length","(","nv",")",">=","nt",")","{","vec3","nw","=","normalize","(","nv",")","*","nt","-","nr",";","float","nx","=","acos","(","dot","(","normalize","(","nw",")",",","ns",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","nx","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","nC","(","float","nz",",","vec3","nA",",","float","nB",")","{","return","nA","-","nA","*","pow","(","u_sky_color",",","vec3","(","nB","/","nz",")",")",";","}","void","main","(",")","{","vec3","nD","=","normalize","(","mX",")",";","vec3","nE","=","u_sun_direction",";","float","nF","=","dot","(","nD",",","nE",")",";","float","nG","=","nq","(","nF",",","-","0.01",")","*","u_rayleigh_brightness","*","nE",".","y",";","float","nH","=","nq","(","nF","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","nE",".","y",")",";","float","nI","=","smoothstep","(","0.0",",","100.0",",","nq","(","nF",",","0.9995",")",")","*","u_spot_brightness",";","vec3","nJ","=","vec3","(","0.0",",","mY",",","0.0",")",";","float","nK","=","nj","(","nJ",",","nD",")",";","float","nL","=","nK","/","float","(","m_",")",";","float","nM","=","ny","(","nJ",",","nD",",","mY","-","0.3",")",";","vec3","nN","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","nO","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","nP","=","0",";","nP","<","m_",";","nP","++",")","{","float","nQ","=","nL","*","float","(","nP",")",";","vec3","nR","=","nJ","+","nD","*","nQ",";","float","nS","=","ny","(","nR",",","nE",",","mY","-","0.2",")",";","float","nT","=","nj","(","nR",",","nE",")",";","vec3","nU","=","nC","(","nT",",","vec3","(","mZ",")",",","u_scatter_strength",")","*","nS",";","nN","+=","nC","(","sqrt","(","nQ",")",",","u_sky_color","*","nU",",","u_rayleigh_strength",")",";","nO","+=","nC","(","nQ",",","nU",",","u_mie_strength",")",";","}","nN","=","nN","*","nM","*","pow","(","nK",",","u_rayleigh_collection_power",")","/","float","(","m_",")",";","nO","=","(","nO","*","nM","*","pow","(","nK",",","u_mie_collection_power",")",")","/","float","(","m_",")",";","vec3","nV","=","vec3","(","nI","*","nO","+","nH","*","nO","+","nG","*","nN",")",";","gq","(","nV",")",";","gl_FragColor","=","vec4","(","nV",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","mX",";","void","main","(",")","{","vec4","lf","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","lg","=","u_cube_view_matrix","*","lf",";","mX","=","lg",".","xyz",";","gl_Position","=","lf",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_sampler",",","a",")",";","gq","(","lf",".","rgb",")",";","gt","(","lf",".","rgb",",","lf",".","a",")",";","gl_FragColor","=","lf",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","lf","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","lg","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","lf",",","0.0",")",";","lg",".","x","/=","lg",".","w",";","lg",".","y","/=","lg",".","w",";","lg","+=","99999.0","*","step","(","lg",".","z",",","0.0",")",";","lg","+=","100.0","*","(","step","(","1.0",",","abs","(","lg",".","x",")",")","+","step","(","1.0",",","abs","(","lg",".","y",")",")",")",";","lg",".","x","=","-","a_lf_dist","*","lg",".","x",";","lg",".","y","=","-","a_lf_dist","*","lg",".","y",";","float","lh","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","li","=","vec2","(","a_lf_bb_vertex",".","x","/","lh",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","lj","=","1.9",";","li","*=","(","1.0","+","lj","*","length","(","lg",".","xy",")",")",";","}","gl_Position","=","vec4","(","lg",".","xy","+","li",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","mX",";","void","main","(",")","{","vec3","lf","=","textureCube","(","u_sky",",","mX",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["go","(","lf",".","rgb",")",";","float","lg","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","lg","=","min","(","-","lg","*","0.03",",","0.8",")",";","float","lh","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","vec3","li","=","normalize","(","mX",")",";","vec3","lj","=","vec3","(","0.0",")",";","vec4","lk","=","u_underwater_fog_color_density",";","lk",".","rgb","=","mix","(","lk",".","rgb",",","lj",",","min","(","-","li",".","y","+","lg",",","1.0",")",")","*","lh",";","float","ll","=","clamp","(","sign","(","li",".","y","-","0.05","*","lg",")",",","0.0",",","1.0",")",";","lf","=","mix","(","lk",".","rgb",",","lf",",","ll",")",";","gq","(","lf",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lf",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","mX",";","void","main","(",")","{","vec4","lf","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","lg","=","u_sky_vp_inverse","*","lf",";","mX","=","lg",".","xyz",";","gl_Position","=","lf",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap0_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_uv_velocity",";","uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_uv_velocity",";","uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_uv_velocity",";","uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","lf","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kp",";","varying","vec3","kq",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kr",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ks",";","varying","vec3","mY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","m_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ku",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","na",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","np","(","in","vec2","nb",",","in","vec3","nc",",","in","vec3","nd",",","in","vec3","ne",",","out","float","nf",")","{","vec3","ng","=","reflect","(","-","nd",",","nc",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nh","=","nb",".","xy","+","nc",".","xz","*","REFL_BUMP","/","ku",";","nf","=","u_reflect_factor",";","vec3","ni",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["ni","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ni","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","nj","=","dot","(","nd",",","nc",")",";","nf","*=","max","(","1.0","-","1.0","/","nj",",","1.0",")",";","}","else","{","ni","=","texture2D","(","u_reflectmap",",","nh",")",".","rgb",";","go","(","ni",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["nf","=","u_mirror_factor",";","vec3","ni","=","ne","*","textureCube","(","u_mirrormap",",","ng",")",".","rgb",";","go","(","ni",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nf","=","u_reflect_factor",";","vec3","ni","=","ne","*","vec3","(","0.3",",","0.5",",","1.0",")",";","go","(","ni",")",";"]}]}}]},{type:"textline",tokens:["vec3","nk","=","normalize","(","ng","+","nd",")",";","float","nl","=","1.0","-","dot","(","nd",",","nk",")",";","float","nm","=","u_fresnel_params","[","3","]",";","float","nn","=","u_fresnel_params","[","2","]",";","float","no","=","nm","+","(","1.0","-","nm",")","*","pow","(","nl",",","nn",")",";","nf","=","min","(","nf","*","no",",","1.0",")",";","return","ni",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","nq","=","mat3","(","ks",",","mY",",","kr",")",";"]}]}}]},{type:"textline",tokens:["vec3","nr","=","normalize","(","kr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","nq","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","nr","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","ns","=","kq",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nt","=","vec2","(","mZ",".","x",",","-","mZ",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nt","=","vec2","(","kq",".","x",",","-","kq",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nt","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nu","=","vec3","(","0.0",")",";","vec3","nv","=","texture2D","(","u_normalmap0",",","nt","*","u_normalmap0_scale","+","u_normalmap0_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nu","+=","nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nw","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["nw","+=","nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["nv","=","texture2D","(","u_normalmap0",",","nt","*","u_normalmap1_scale","+","u_normalmap1_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nu","+=","nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["nw","+=","nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["nv","=","texture2D","(","u_normalmap0",",","nt","*","u_normalmap2_scale","+","u_normalmap2_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nu","+=","nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["nw","+=","nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["nv","=","texture2D","(","u_normalmap0",",","nt","*","u_normalmap3_scale","+","u_normalmap3_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nu","+=","nv",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["nw","+=","nv",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nx","=","nq","*","nw",";","if","(","!","f","(","nx",",","vec3","(","0.0",")",")",")","nx","=","normalize","(","nx",")",";","vec3","ny","=","mix","(","nr",",","nx",",","0.2",")",";","ny","=","normalize","(","ny",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["nr","=","mix","(","nr",",","normalize","(","nq","*","nu",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nr","=","mix","(","nr",",","normalize","(","nq","*","nu",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["nr","=","normalize","(","nr",")",";"]}]}}]},{type:"textline",tokens:["vec3","nz","=","normalize","(","kp",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nA","=","cD",".","xy","/","cD",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","nB","=","ku","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nC","=","u_diffuse_color",".","a",";","vec4","nD","=","texture2DProj","(","u_scene_depth",",","cD",")",";","float","nE","=","cp","(","nD",")",";","float","nF","=","max","(","nE","-","ku",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nG","=","nA","+","nr",".","xz","*","u_refr_bump","/","ku",";","float","nH","=","kX","(","nE",",","nG",",","nA",")",";","float","nI","=","max","(","nH","-","ku",",","0.0",")",";","float","nJ","=","u_view_max_depth","/","ABSORB","*","nI",";","float","nK",";","if","(","u_cam_water_depth","<","0.0",")","nK","=","0.0",";","else","nK","=","min","(","nC","*","nJ",",","1.0",")",";","float","nL","=","u_view_max_depth","/","ABSORB","*","nF",";","nC","=","min","(","15.0","*","nC","*","u_view_max_depth","*","nF",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nL","=","u_view_max_depth","/","ABSORB","*","nF",";","if","(","u_cam_water_depth",">","0.0",")","nC","=","min","(","nC","*","nL",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["nC","*=","min","(","5.0","*","nB",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nC","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","nK","=","1.0","-","nC",";","vec2","nG","=","nA","+","nr",".","xz","*","REFR_BUMP","/","ku",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nM","=","texture2D","(","u_refractmap",",","nG",")",".","rgb",";","go","(","nM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","nN","=","pow","(","min","(","m_",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","nO","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","nN",")",";","nN","=","pow","(","min","(","m_",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","nO","=","mix","(","u_shore_water_col",",","nO",",","nN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nO","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nP","=","max","(","1.0","-","u_view_max_depth","*","nF",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nP","=","1.0","-","nC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","nQ","=","max","(","ns","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nR","=","normalize","(","vec3","(","m_",".","r",",","0.0",",","m_",".","g",")",")",";","vec3","nS","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","nR",",","0.8",")",")",";","float","nT","=","max","(","2.5","*","dot","(","ny",",","nS",")","-","0.7",",","0.0",")",";","nP","+=","nT","*","(","1.0","-","m_",".","b",")",";","nQ","*=","(","1.0","-","0.95","*","pow","(","m_",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["nP","+=","nQ",";","nP","=","min","(","u_foam_factor","*","nP",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","nU","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","nt","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","nV","=","u_specular_params","[","0","]",";","vec2","nW","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","nX","=","nV","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nY","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","nr",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nY","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["vec3","nZ","=","u_ambient","*","nY",";","vec3","n_","=","nZ","+","u_sun_intensity",";","float","oa",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ob","=","np","(","nA",",","nr",",","nz",",","n_",",","oa",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ob","=","np","(","vec2","(","0.0",")",",","nr",",","nz",",","n_",",","oa",")",";"]}]}}]},{type:"textline",tokens:["vec3","oc","=","u_diffuse_intensity","*","nO",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hm","od","=","jJ","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","oc",",","nX",",","kq",",","nr",",","nz",",","nW",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hm","od","=","jO","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","oc",")",";"]}]}}]},{type:"textline",tokens:["oc","=","od",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","oe","=","max","(","dot","(","u_sun_direction",",","-","kr",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","nz",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","oe","=","clamp","(","SSS_STRENGTH","*","oe",",","0.0",",","1.0",")",";","oc","=","mix","(","oc",",","u_shallow_water_col",",","oe",")",";","oc","=","mix","(","oc",",","u_shore_water_col",",","oe",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["oc","=","mix","(","nM",",","oc",",","nK",")",";"]}]}}]},{type:"textline",tokens:["oc","=","mix","(","oc",",","ob",",","oa",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","of","=","mix","(","nU",".","g",",","nU",".","r",",","max","(","4.0","*","(","nP","-","0.75",")",",","0.0",")",")",";","of","=","mix","(","nU",".","b",",","of",",","max","(","2.0","*","nP","-","1.0",",","0.0",")",")",";","of","=","mix","(","0.0",",","of",",","nP",")",";","oc","=","mix","(","oc",",","n_",",","of",")",";"]}]}}]},{type:"textline",tokens:["oc","+=","od",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","og","=","gI","(","u_cube_fog",",","nz",")",";","vec4","oh","=","vec4","(","og",",","u_fog_color_density",".","a",")",";","go","(","oh",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","oh","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","hj","(","oc",",","nB",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","gB","(","oc",",","nB",",","oh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gB","(","oc",",","nB",",","oh",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gq","(","oc",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["nC","=","max","(","nC",",","od",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["nC","+=","of",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gt","(","oc",",","nC",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","oi","=","fwidth","(","na",")",";","vec3","oj","=","smoothstep","(","vec3","(","0.0",")",",","oi","*","lf",",","na",")",";","float","ok","=","min","(","min","(","oj",".","x",",","oj",".","y",")",",","oj",".","z",")",";","ok","=","clamp","(","ok",",","0.0",",","1.0",")",";","oc","=","mix","(","u_wireframe_edge_color",",","oc",",","ok",")",";","nC","=","mix","(","1.0",",","nC",",","ok",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","oc",",","nC",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kp",";","varying","vec3","kq",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kr",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","ks",";","varying","vec3","mY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mZ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","m_",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","ku",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","na",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ll","(","in","vec2","lf",")","{","vec2","lg","=","0.5","+","vec2","(","(","lf",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","lf",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","vec4","lh","=","texture2D","(","u_shore_dist_map",",","lg",")",";","const","vec2","li","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","lj","=","dot","(","lh",".","ba",",","li",")",";","vec2","lk","=","normalize","(","lh",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","lk",",","lj",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","lC","(","inout","vec3","lm",",","in","float","ln",",","in","vec3","lo",")","{","float","lp","=","dD","(","DST_NOISE_SCALE_0","*","(","lm",".","xz","+","DST_NOISE_FREQ_0","*","ln",")",")","*","dD","(","DST_NOISE_SCALE_1","*","(","lm",".","zx","-","DST_NOISE_FREQ_1","*","ln",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lq","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","lr","=","lo",".","b",";","float","ls","=","sqrt","(","lr",")",";","float","lt","=","max","(","lr",",","DIR_MIN_SHR_FAC",")","*","sin","(","ls","/","lq","+","DIR_FREQ","*","ln",")",";","float","lu","=","max","(","dD","(","DIR_NOISE_SCALE","*","(","lm",".","xz","+","DIR_NOISE_FREQ","*","ln",")",")",",","DIR_MIN_NOISE_FAC",")",";","lt","*=","lu",";","float","lv","=","WAVES_HEIGHT","*","mix","(","lt",",","lp",",","max","(","ls",",","DST_MIN_FAC",")",")",";","vec2","lw","=","lo",".","rg",";","float","lx","=","WAVES_HOR_FAC","*","lt","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","lr",")",",","0.0",")",";","vec2","ly","=","lx","*","lw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lv","=","WAVES_HEIGHT","*","lp",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lz","=","2.0","*","(","lm",".","xz","-","0.1","*","ln",")",";","vec2","lA","=","1.3","*","(","lm",".","zx","+","0.03","*","ln",")",";","float","lB","=","cY","(","0.5","*","lz",")",".","x","+","cY","(","0.5","*","lA",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lm",".","xz","+=","ly",";","lB","*=","lr",";"]}]}}]},{type:"textline",tokens:["lv","+=","SMALL_WAVES_FAC","*","lB",";"]}]}}]},{type:"textline",tokens:["lm",".","y","+=","lv",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","na","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","na","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","na","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","lD","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lE","=","abs","(","lD",".","y",")",";","vec2","lF","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","lE",")",";","lD",".","y","=","WATER_LEVEL",";","lD",".","xz","+=","lF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["c","lG","=","ag","(","lD",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["mZ","=","lG",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["m_","=","ll","(","lG",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","lH","=","length","(","u_wind",")",";","float","lI","=","u_time",";","lI","*=","lH",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","lJ","=","lE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lJ","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","lK","=","lG",".","a","+","vec3","(","lJ",",","0.0",",","0.0",")",";","vec3","lL","=","lG",".","a","+","vec3","(","0.0",",","0.0",",","lJ",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lM","=","ll","(","lK",".","xz",")",";","vec3","lN","=","ll","(","lL",".","xz",")",";","lC","(","lK",",","lI",",","lM",")",";","lC","(","lL",",","lI",",","lN",")",";","lC","(","lG",".","a",",","lI",",","m_",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lC","(","lK",",","lI",",","vec3","(","0.0",")",")",";","lC","(","lL",",","lI",",","vec3","(","0.0",")",")",";","lC","(","lG",".","a",",","lI",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","lG",".","a",".","y","=","WATER_LEVEL","-","1.0",";","lK",".","y","=","lG",".","a",".","y",";","lL",".","y","=","lG",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","lO","=","normalize","(","lK","-","lG",".","a",")",";","vec3","lP","=","normalize","(","lL","-","lG",".","a",")",";","kr","=","normalize","(","cross","(","lP",",","lO",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","lP",";","mY","=","cross","(","kr",",","ks",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lQ","=","dot","(","kr",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lR","=","clamp","(","0.8","-","lQ",",","0.0",",","1.0",")",";","kr","=","mix","(","kr",",","vec3","(","0.0",",","1.0",",","0.0",")",",","lR",")",";"]}]}}]}]}}]},{type:"textline",tokens:["kq","=","lG",".","a",";","kp","=","u_camera_eye","-","lG",".","a",";","vec4","lS","=","u_view_matrix","*","vec4","(","lG",".","a",",","1.0",")",";","vec4","lT","=","u_proj_matrix","*","lS",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lU","=","lT",".","x",";","float","lV","=","lT",".","y",";","float","nb","=","lT",".","w",";","cD",".","x","=","(","lU","+","nb",")","/","2.0",";","cD",".","y","=","(","lV","+","nb",")","/","2.0",";","cD",".","z","=","nb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","-","lS",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lT",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","na",";","const","float","lf","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lg","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lg","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lh","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","li","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","lj","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","lk","=","vec3","(","0.0",")",";","float","ll","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lm","=","sign","(","na","-","vec3","(","0.02","*","lf",")",")",";","if","(","lm",".","x","<","0.0","||","lm",".","y","<","0.0","||","lm",".","z","<","0.0",")","{","lk","=","lg",";","ll","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lm","=","sign","(","na","-","vec3","(","0.02","*","lf",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","lm",".","x","<","0.0","||","lm",".","y","<","0.0","||","lm",".","z","<","0.0",")","lk","=","u_wireframe_edge_color",";","else","lk","=","lj",";","ll","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","lm",".","x","<","0.0","||","lm",".","y","<","0.0","||","lm",".","z","<","0.0",")","ll","=","1.0",";","else","ll","=","0.0",";","lk","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","lm",".","x","<","0.0","||","lm",".","y","<","0.0","||","lm",".","z","<","0.0",")","lk","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","lk","=","lh",";","else","lk","=","li",";","ll","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","ln","=","fwidth","(","na",")",";","vec3","lo","=","smoothstep","(","vec3","(","0.0",")",",","ln","*","lf",",","na",")",";","float","lp","=","min","(","min","(","lo",".","x",",","lo",".","y",")",",","lo",".","z",")",";","lp","=","clamp","(","lp",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","lk","=","vec3","(","mix","(","u_wireframe_edge_color",",","lj",",","lp",")",")",";","ll","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","lk","=","u_wireframe_edge_color",";","ll","=","mix","(","1.0",",","0.0",",","lp",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","lk","=","mix","(","u_wireframe_edge_color",",","lh",",","lp",")",";","else","lk","=","mix","(","u_wireframe_edge_color",",","li",",","lp",")",";","ll","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["gq","(","lk",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gt","(","lk",",","ll",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lk",",","ll",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","na",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","na","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","na","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","na","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","lf","=","a_position",";","vec3","lg","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["c","lh","=","ag","(","lf",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["lf","=","mix","(","lf",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","li","=","vec3","(","0.0",")",";","vec3","lj","=","vec3","(","0.0",")",";","bm","(","lf",",","li",",","lj",",","lg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lk","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lk","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["c","lh","=","fY","(","lf",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lk",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ll","=","(","u_model_matrix","*","vec4","(","lk",",","1.0",")",")",".","xyz",";","mat4","lm","=","_","(","u_camera_eye",",","ll",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ln","=","(","u_model_matrix","*","vec4","(","lk",",","1.0",")",")",".","xyz",";","lm","=","lm","*","P","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","ln",")",";"]}]}}]},{type:"textline",tokens:["c","lh","=","ag","(","lf","-","lk",",","lk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lm",")",";","lh",".","b","=","ll",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["c","lh","=","ag","(","lf",",","lk",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cd","(","lh",".","a",",","lh",".","b",",","lg",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","lo","=","u_view_matrix","*","vec4","(","lh",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","lo",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","lg","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","lf","[","0","]",",","lg","[","1","]",",","lg","[","2","]",",","lf","[","3","]","+","lg","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","li","(","float","lf",",","float","lg",")","{","vec2","lh","=","a","+","vec2","(","lf",",","lg",")","*","u_texel_size",";","return","texture2D","(","u_color",",","lh",")",";","}","float","lm","(","vec4","lj",")","{","vec3","lk","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","ll","=","dot","(","lj",".","rgb",",","lk",")",";","return","ll",";","}","vec4","lF","(",")","{","vec4","ln","=","li","(","-","1.0",",","-","1.0",")",";","vec4","lo","=","li","(","1.0",",","-","1.0",")",";","vec4","lp","=","li","(","-","1.0",",","1.0",")",";","vec4","lq","=","li","(","1.0",",","1.0",")",";","vec4","lr","=","li","(","0.0",",","0.0",")",";","float","ls","=","lm","(","ln",")",";","float","lt","=","lm","(","lo",")",";","float","lu","=","lm","(","lp",")",";","float","lv","=","lm","(","lq",")",";","float","lw","=","lm","(","lr",")",";","float","lx","=","min","(","lw",",","min","(","min","(","ls",",","lt",")",",","min","(","lu",",","lv",")",")",")",";","float","ly","=","max","(","lw",",","max","(","max","(","ls",",","lt",")",",","max","(","lu",",","lv",")",")",")",";","vec2","lz",";","lz",".","x","=","-","(","(","ls","+","lt",")","-","(","lu","+","lv",")",")",";","lz",".","y","=","(","(","ls","+","lu",")","-","(","lt","+","lv",")",")",";","float","lA","=","max","(","(","ls","+","lt","+","lu","+","lv",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","lB","=","1.0","/","(","min","(","abs","(","lz",".","x",")",",","abs","(","lz",".","y",")",")","+","lA",")",";","lz","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","lz","*","lB",")",")","*","u_texel_size",";","vec4","lC","=","0.5","*","(","texture2D","(","u_color",",","a","+","lz","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","lz","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","lD","=","lC","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","lz","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","lz","*","0.5",")",")",";","float","lE","=","lm","(","lD",")",";","if","(","(","lE","<","lx",")","||","(","lE",">","ly",")",")","return","lC",";","else","return","lD",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","ow","(",")","{","vec2","lG",";","lG",".","x","=","a",".","x",";","lG",".","y","=","a",".","y",";","vec4","lH","=","texture2D","(","u_color",",","lG",")",";","vec4","lI","=","li","(","0.0",",","1.0",")",";","vec4","lJ","=","li","(","1.0",",","0.0",")",";","vec4","lK","=","li","(","0.0",",","-","1.0",")",";","vec4","lL","=","li","(","-","1.0",",","0.0",")",";","float","lM","=","lm","(","lI",")",";","float","lN","=","lm","(","lJ",")",";","float","lO","=","lm","(","lK",")",";","float","lP","=","lm","(","lL",")",";","float","lQ","=","lm","(","lH",")",";","float","lR","=","max","(","lM",",","lQ",")",";","float","lS","=","min","(","lM",",","lQ",")",";","float","lT","=","max","(","lN",",","lR",")",";","float","lU","=","min","(","lN",",","lS",")",";","float","lV","=","max","(","lO",",","lP",")",";","float","nb","=","min","(","lO",",","lP",")",";","float","nc","=","max","(","lV",",","lT",")",";","float","nd","=","min","(","nb",",","lU",")",";","float","ne","=","nc","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","nf","=","nc","-","nd",";","float","ng","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","ne",")",";","bool","nh","=","nf","<","ng",";","if","(","nh",")","return","lH",";","vec4","ni","=","li","(","-","1.0",",","-","1.0",")",";","vec4","nj","=","li","(","1.0",",","1.0",")",";","vec4","nk","=","li","(","1.0",",","-","1.0",")",";","vec4","nl","=","li","(","-","1.0",",","1.0",")",";","float","nm","=","lm","(","ni",")",";","float","nn","=","lm","(","nj",")",";","float","no","=","lm","(","nk",")",";","float","np","=","lm","(","nl",")",";","float","nq","=","lO","+","lM",";","float","nr","=","lP","+","lN",";","float","ns","=","1.0","/","nf",";","float","nt","=","nq","+","nr",";","float","nu","=","(","-","2.0","*","lQ",")","+","nq",";","float","nv","=","(","-","2.0","*","lQ",")","+","nr",";","float","nw","=","no","+","nn",";","float","nx","=","nm","+","no",";","float","ny","=","(","-","2.0","*","lN",")","+","nw",";","float","nz","=","(","-","2.0","*","lO",")","+","nx",";","float","nA","=","nm","+","np",";","float","nB","=","np","+","nn",";","float","nC","=","(","abs","(","nu",")","*","2.0",")","+","abs","(","ny",")",";","float","nD","=","(","abs","(","nv",")","*","2.0",")","+","abs","(","nz",")",";","float","nE","=","(","-","2.0","*","lP",")","+","nA",";","float","nF","=","(","-","2.0","*","lM",")","+","nB",";","float","nG","=","abs","(","nE",")","+","nC",";","float","nH","=","abs","(","nF",")","+","nD",";","float","nI","=","nA","+","nw",";","float","nJ","=","u_texel_size",".","x",";","bool","nK","=","nG",">=","nH",";","float","nL","=","nt","*","2.0","+","nI",";","if","(","!","nK",")","lO","=","lP",";","if","(","!","nK",")","lM","=","lN",";","if","(","nK",")","nJ","=","u_texel_size",".","y",";","float","nM","=","(","nL","*","(","1.0","/","12.0",")",")","-","lQ",";","float","nN","=","lO","-","lQ",";","float","nO","=","lM","-","lQ",";","float","nP","=","lO","+","lQ",";","float","nQ","=","lM","+","lQ",";","bool","nR","=","abs","(","nN",")",">=","abs","(","nO",")",";","float","nS","=","max","(","abs","(","nN",")",",","abs","(","nO",")",")",";","if","(","nR",")","nJ","=","-","nJ",";","float","nT","=","clamp","(","abs","(","nM",")","*","ns",",","0.0",",","1.0",")",";","vec2","nU",";","nU",".","x","=","lG",".","x",";","nU",".","y","=","lG",".","y",";","vec2","nV",";","nV",".","x","=","(","!","nK",")","?","0.0",":","u_texel_size",".","x",";","nV",".","y","=","(","nK",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","nK",")","nU",".","x","+=","nJ","*","0.5",";","if","(","nK",")","nU",".","y","+=","nJ","*","0.5",";","vec2","nW",";","nW",".","x","=","nU",".","x","-","nV",".","x",";","nW",".","y","=","nU",".","y","-","nV",".","y",";","vec2","nX",";","nX",".","x","=","nU",".","x","+","nV",".","x",";","nX",".","y","=","nU",".","y","+","nV",".","y",";","float","nY","=","(","(","-","2.0",")","*","nT",")","+","3.0",";","float","nZ","=","lm","(","texture2D","(","u_color",",","nW",")",")",";","float","n_","=","nT","*","nT",";","float","oa","=","lm","(","texture2D","(","u_color",",","nX",")",")",";","if","(","!","nR",")","nP","=","nQ",";","float","ob","=","nS","*","1.0","/","4.0",";","float","oc","=","lQ","-","nP","*","0.5",";","float","od","=","nY","*","n_",";","bool","oe","=","oc","<","0.0",";","nZ","-=","nP","*","0.5",";","oa","-=","nP","*","0.5",";","bool","of","=","abs","(","nZ",")",">=","ob",";","bool","og","=","abs","(","oa",")",">=","ob",";","if","(","!","of",")","nW",".","x","-=","nV",".","x","*","1.5",";","if","(","!","of",")","nW",".","y","-=","nV",".","y","*","1.5",";","bool","oh","=","(","!","of",")","||","(","!","og",")",";","if","(","!","og",")","nX",".","x","+=","nV",".","x","*","1.5",";","if","(","!","og",")","nX",".","y","+=","nV",".","y","*","1.5",";","if","(","oh",")","{","if","(","!","of",")","nZ","=","lm","(","texture2D","(","u_color",",","nW",".","xy",")",")",";","if","(","!","og",")","oa","=","lm","(","texture2D","(","u_color",",","nX",".","xy",")",")",";","if","(","!","of",")","nZ","=","nZ","-","nP","*","0.5",";","if","(","!","og",")","oa","=","oa","-","nP","*","0.5",";","of","=","abs","(","nZ",")",">=","ob",";","og","=","abs","(","oa",")",">=","ob",";","if","(","!","of",")","nW",".","x","-=","nV",".","x","*","2.0",";","if","(","!","of",")","nW",".","y","-=","nV",".","y","*","2.0",";","oh","=","(","!","of",")","||","(","!","og",")",";","if","(","!","og",")","nX",".","x","+=","nV",".","x","*","2.0",";","if","(","!","og",")","nX",".","y","+=","nV",".","y","*","2.0",";","if","(","oh",")","{","if","(","!","of",")","nZ","=","lm","(","texture2D","(","u_color",",","nW",".","xy",")",")",";","if","(","!","og",")","oa","=","lm","(","texture2D","(","u_color",",","nX",".","xy",")",")",";","if","(","!","of",")","nZ","=","nZ","-","nP","*","0.5",";","if","(","!","og",")","oa","=","oa","-","nP","*","0.5",";","of","=","abs","(","nZ",")",">=","ob",";","og","=","abs","(","oa",")",">=","ob",";","if","(","!","of",")","nW",".","x","-=","nV",".","x","*","2.0",";","if","(","!","of",")","nW",".","y","-=","nV",".","y","*","2.0",";","oh","=","(","!","of",")","||","(","!","og",")",";","if","(","!","og",")","nX",".","x","+=","nV",".","x","*","2.0",";","if","(","!","og",")","nX",".","y","+=","nV",".","y","*","2.0",";","if","(","oh",")","{","if","(","!","of",")","nZ","=","lm","(","texture2D","(","u_color",",","nW",".","xy",")",")",";","if","(","!","og",")","oa","=","lm","(","texture2D","(","u_color",",","nX",".","xy",")",")",";","if","(","!","of",")","nZ","=","nZ","-","nP","*","0.5",";","if","(","!","og",")","oa","=","oa","-","nP","*","0.5",";","of","=","abs","(","nZ",")",">=","ob",";","og","=","abs","(","oa",")",">=","ob",";","if","(","!","of",")","nW",".","x","-=","nV",".","x","*","4.0",";","if","(","!","of",")","nW",".","y","-=","nV",".","y","*","4.0",";","oh","=","(","!","of",")","||","(","!","og",")",";","if","(","!","og",")","nX",".","x","+=","nV",".","x","*","4.0",";","if","(","!","og",")","nX",".","y","+=","nV",".","y","*","4.0",";","if","(","oh",")","{","if","(","!","of",")","nZ","=","lm","(","texture2D","(","u_color",",","nW",".","xy",")",")",";","if","(","!","og",")","oa","=","lm","(","texture2D","(","u_color",",","nX",".","xy",")",")",";","if","(","!","of",")","nZ","=","nZ","-","nP","*","0.5",";","if","(","!","og",")","oa","=","oa","-","nP","*","0.5",";","of","=","abs","(","nZ",")",">=","ob",";","og","=","abs","(","oa",")",">=","ob",";","if","(","!","of",")","nW",".","x","-=","nV",".","x","*","2.0",";","if","(","!","of",")","nW",".","y","-=","nV",".","y","*","2.0",";","if","(","!","og",")","nX",".","x","+=","nV",".","x","*","2.0",";","if","(","!","og",")","nX",".","y","+=","nV",".","y","*","2.0",";","}","}","}","}","float","oi","=","lG",".","x","-","nW",".","x",";","float","oj","=","nX",".","x","-","lG",".","x",";","if","(","!","nK",")","oi","=","lG",".","y","-","nW",".","y",";","if","(","!","nK",")","oj","=","nX",".","y","-","lG",".","y",";","bool","ok","=","(","nZ","<","0.0",")","!=","oe",";","float","ol","=","(","oj","+","oi",")",";","bool","om","=","(","oa","<","0.0",")","!=","oe",";","float","on","=","1.0","/","ol",";","bool","oo","=","oi","<","oj",";","float","op","=","min","(","oi",",","oj",")",";","bool","oq","=","oo","?","ok",":","om",";","float","or","=","od","*","od",";","float","os","=","(","op","*","(","-","on",")",")","+","0.5",";","float","ot","=","or","*","FXAA_QUALITY_SUBPIX",";","float","ou","=","oq","?","os",":","0.0",";","float","ov","=","max","(","ou",",","ot",")",";","if","(","!","nK",")","lG",".","x","+=","ov","*","nJ",";","if","(","nK",")","lG",".","y","+=","ov","*","nJ",";","return","texture2D","(","u_color",",","lG",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","lF","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","ow","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","lf","=","vec2","(","0.0",",","0.0",")",";","vec2","lg","=","u_texel_size",";","vec4","lh","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lh","*","0.0875447373698",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0858112354248",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0808139781061",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0731235112908",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0635705267419",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0530985673112",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0426125984122",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0328565115809",";","lf","+=","lg",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lf",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lf",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","lh",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_main",",","a",")",";","vec4","lg","=","texture2D","(","u_bloom",",","a",")",";","vec4","lh","=","lf",";","lh","+=","lg",";","gl_FragColor","=","vec4","(","lh",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_color",",","a",")",";","vec3","lg","=","lf",".","rgb",";","if","(","u_brightness","<","0.0",")","lg","=","lg","*","(","1.0","+","u_brightness",")",";","else","lg","=","lg","+","(","(","1.0","-","lg",")","*","u_brightness",")",";","lg","=","(","lg","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","lg","*=","u_exposure",";","vec3","lh","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","li","=","dot","(","lg",",","lh",")",";","lg","=","mix","(","vec3","(","li",")",",","lg",",","u_saturation",")",";","gl_FragColor","=","vec4","(","lg",",","lf",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cl","(","clamp","(","ni","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","nj","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","nk","=","ni","(","u_depth",",","a",",","u_camera_range",")",";","nk","*=","u_view_max_depth",";","float","nl",";","if","(","nk","<","u_dof_dist",")","nl","=","(","u_dof_dist","-","nk",")","/","u_dof_front",";","else","nl","=","(","nk","-","u_dof_dist",")","/","u_dof_rear",";","nl","=","clamp","(","nl",",","0.0",",","1.0",")",";","vec4","nm","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","nj",",","nm",",","nl",")",";","}","else","gl_FragColor","=","nj",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","lk","(","float","lf",",","float","lg",",","float","lh",")","{","vec2","li","=","a","+","vec2","(","lf",",","lg",")","*","u_texel_size",";","vec4","lj","=","texture2D","(","u_sampler",",","li",")","*","lh",";","return","cp","(","lj",")",";","}","void","main","(",")","{","float","ll","=","(","lk","(","-","1.0",",","-","1.0",",","-","1.0",")","+","lk","(","0.0",",","-","1.0",",","-","1.0",")","+","lk","(","1.0",",","-","1.0",",","-","1.0",")","+","lk","(","-","1.0",",","0.0",",","-","1.0",")","+","lk","(","0.0",",","0.0",",","8.0",")","+","lk","(","1.0",",","0.0",",","-","1.0",")","+","lk","(","-","1.0",",","1.0",",","-","1.0",")","+","lk","(","0.0",",","1.0",",","-","1.0",")","+","lk","(","1.0",",","1.0",",","-","1.0",")",")",";","ll","*=","1000.0",";","gl_FragColor","=","vec4","(","ll",",","ll",",","ll",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","lf",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","lg","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","lh","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","li","=","lh",".","a","-","lg",".","a",";","if","(","li","!=","0.0",")","{","float","lj","=","smoothstep","(","0.0",",","1.0",",","lh",".","a",")",";","if","(","lg",".","a","==","0.0",")","{","vec3","lk","=","u_glow_color",";","gq","(","lk",")",";","vec4","ll","=","vec4","(","clamp","(","lk",",","0.0",",","1.0",")",",","lj",")",";","gl_FragColor","=","mix","(","lf",",","ll",",","lj",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","nj",";","varying","vec2","nk",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nl",";","void","main","(",")","{","vec2","nm","=","(","nl",".","xy","-","a",")",";","float","nn","=","length","(","nm",")",";","vec2","no","=","u_radial_blur_step","*","nm","/","nn",";","float","np","=","nn","/","u_radial_blur_step",";","no","*=","min","(","np",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","np","=","max","(","np",",","STEPS_PER_PASS",")",";","vec2","nq","=","a",";","float","nr","=","0.0",";","for","(","float","ns","=","0.0",";","ns","<","STEPS_PER_PASS",";","ns","+=","1.0",")","{","if","(","ns","<=","np",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","nt","=","ni","(","u_input",",","nq",",","u_camera_range",")",";","nr","+=","max","(","(","1.0","-","pow","(","nn",",","0.3",")",")","*","step","(","0.9",",","nt",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nu","=","texture2D","(","u_input",",","nq",")",";","nr","+=","cp","(","nu",")",";"]}]}}]},{type:"textline",tokens:["}","nq","+=","no",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nv","=","a","+","nk",";","float","nw","=","cY","(","vec2","(","2.5","*","(","nv",".","x",")",",","2.5","*","(","nv",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","cY","(","vec2","(","5.0","*","(","nv",".","x",")","-","0.66","*","u_time",",","5.0","*","(","nv",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dD","(","vec2","(","7.5","*","(","nv",".","x",")","+","0.33","*","u_time",",","7.5","*","(","nv",".","y",")","-","0.33","*","u_time",")",")",";","nw","*=","clamp","(","1.2","-","sqrt","(","0.2","*","nn",")",",","0.0",",","1.0",")","*","nj",";","nr","=","max","(","nw",",","nr",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","cl","(","nr","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","nj",";","varying","vec2","nk",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nl",";","void","lm","(","in","vec4","lf",",","in","vec3","lg",",","out","vec3","lh",")","{","float","li","=","lf",".","w","*","lg",".","x","+","lf",".","y","*","lg",".","z","-","lf",".","z","*","lg",".","y",";","float","lj","=","lf",".","w","*","lg",".","y","+","lf",".","z","*","lg",".","x","-","lf",".","x","*","lg",".","z",";","float","lk","=","lf",".","w","*","lg",".","z","+","lf",".","x","*","lg",".","y","-","lf",".","y","*","lg",".","x",";","float","ll","=","-","lf",".","x","*","lg",".","x","-","lf",".","y","*","lg",".","y","-","lf",".","z","*","lg",".","z",";","lh",".","x","=","li","*","lf",".","w","-","ll","*","lf",".","x","-","lj","*","lf",".","z","+","lk","*","lf",".","y",";","lh",".","y","=","lj","*","lf",".","w","-","ll","*","lf",".","y","-","lk","*","lf",".","x","+","li","*","lf",".","z",";","lh",".","z","=","lk","*","lf",".","w","-","ll","*","lf",".","z","-","li","*","lf",".","y","+","lj","*","lf",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","ln","=","normalize","(","u_sun_direction",")",";","nl","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ln",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","nj","=","1.0",";","vec3","lo","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","lp",";","lm","(","u_camera_quat",",","lo",",","lp",")",";","lp","=","normalize","(","lp",")",";","float","lq","=","dot","(","lp",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lr","=","atan","(","lp",".","x",",","lp",".","z",")",";","nk","=","vec2","(","-","lr",",","acos","(","lq",")",")",";","}","else","{","nj","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["nl",".","x","/=","nl",".","w",";","nl",".","y","/=","nl",".","w",";","nl",".","x","=","0.5","*","(","nl",".","x","+","1.0",")",";","nl",".","y","=","0.5","*","(","nl",".","y","+","1.0",")",";","nl","+=","99999.0","*","step","(","nl",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_main",",","a",")",";","vec3","lg","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","go","(","lf",".","rgb",")",";","float","lh","=","cp","(","texture2D","(","u_god_rays",",","a",")",")",";","vec3","li","=","lf",".","rgb","+","u_god_rays_intensity","*","vec3","(","lh",")","*","lg",";","gq","(","li",")",";","gl_FragColor",".","rgb","=","li",";","gl_FragColor",".","a","=","lf",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_color",",","a",")","*","0.38026",";","lf","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","lf","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","lf","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","lf","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","lf","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","lf","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","lf","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","lf","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","lf",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_input",",","a",")",";","float","lg","=","dot","(","lf",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","lg",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","lf",";","float","lg","=","0.0",";","for","(","float","lh","=","0.025",";","lh","<","1.0",";","lh","+=","0.05",")","for","(","float","li","=","0.025",";","li","<","1.0",";","li","+=","0.05",")","{","lf","=","max","(","texture2D","(","u_input",",","vec2","(","lh",",","li",")",")",".","r",",","0.01",")",";","lg","+=","log","(","lf",")",";","}","float","lj","=","exp","(","lg","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","lj",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","nm",";","void","main","(",")","{","float","nn","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","no","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","np","=","texture2D","(","u_main",",","a",")",";","float","nq","=","no","/","nn",";","float","nr","=","u_bloom_edge_lum",";","gl_FragColor","=","np","*","max","(","nq","-","nr",",","0.0",")","*","nm",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","nm",";","const","vec3","lf","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","ln","(","in","vec4","lg",",","in","vec3","lh",",","out","vec3","li",")","{","float","lj","=","lg",".","w","*","lh",".","x","+","lg",".","y","*","lh",".","z","-","lg",".","z","*","lh",".","y",";","float","lk","=","lg",".","w","*","lh",".","y","+","lg",".","z","*","lh",".","x","-","lg",".","x","*","lh",".","z",";","float","ll","=","lg",".","w","*","lh",".","z","+","lg",".","x","*","lh",".","y","-","lg",".","y","*","lh",".","x",";","float","lm","=","-","lg",".","x","*","lh",".","x","-","lg",".","y","*","lh",".","y","-","lg",".","z","*","lh",".","z",";","li",".","x","=","lj","*","lg",".","w","-","lm","*","lg",".","x","-","lk","*","lg",".","z","+","ll","*","lg",".","y",";","li",".","y","=","lk","*","lg",".","w","-","lm","*","lg",".","y","-","ll","*","lg",".","x","+","lj","*","lg",".","z",";","li",".","z","=","ll","*","lg",".","w","-","lm","*","lg",".","z","-","lj","*","lg",".","y","+","lk","*","lg",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","lo",";","ln","(","u_camera_quat",",","lf",",","lo",")",";","nm","=","dot","(","-","lo",",","u_sun_direction",")","*","u_bloom_key",";","nm","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","lf","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","lg","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","lf","-","lg",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","lf","+","u_motion_blur_exp","*","lg",";","}","else","{","gl_FragColor","=","lf",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lf","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","lf",".","r","+","lf",".","g","+","lf",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lg","=","vec2","(","0.0",",","0.0",")",";","vec2","lh","=","u_texel_size",";","vec4","li",";","li","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","li","*","0.2270270270",";","lg","+=","lh",";","li","=","texture2D","(","u_color",",","a","+","lg",")",";","gl_FragColor","+=","li","*","0.1945945946",";","li","=","texture2D","(","u_color",",","a","-","lg",")",";","gl_FragColor","+=","li","*","0.1945945946",";","lg","+=","lh",";","li","=","texture2D","(","u_color",",","a","+","lg",")",";","gl_FragColor","+=","li","*","0.1216216216",";","li","=","texture2D","(","u_color",",","a","-","lg",")",";","gl_FragColor","+=","li","*","0.1216216216",";","lg","+=","lh",";","li","=","texture2D","(","u_color",",","a","+","lg",")",";","gl_FragColor","+=","li","*","0.0540540541",";","li","=","texture2D","(","u_color",",","a","-","lg",")",";","gl_FragColor","+=","li","*","0.0540540541",";","lg","+=","lh",";","li","=","texture2D","(","u_color",",","a","+","lg",")",";","gl_FragColor","+=","li","*","0.0162162162",";","li","=","texture2D","(","u_color",",","a","-","lg",")",";","gl_FragColor","+=","li","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lh","=","u_texel_size",";","vec4","li","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","li",";","if","(","li",".","a","==","0.0",")","{","li","=","texture2D","(","u_color",",","a","+","lh",")",";","if","(","li",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","li",".","a",")",";","else","{","li","=","texture2D","(","u_color",",","a","-","lh",")",";","if","(","li",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","li",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","no",";","varying","vec4","np",";","varying","vec4","nq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nx","(","vec2","ns",",","sampler2D","nt",")","{","float","nu","=","texture2D","(","nt",",","ns",")",".","r",";","float","nv","=","texture2D","(","nt",",","no",".","xy",")",".","r",";","float","nw","=","texture2D","(","nt",",","no",".","zw",")",".","r",";","return","vec3","(","nu",",","nv",",","nw",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nD","(","vec2","ny",",","sampler2D","nz",")","{","vec3","nA","=","nx","(","ny",",","nz",")",";","vec2","nB","=","abs","(","nA",".","xx","-","nA",".","yz",")",";","vec2","nC","=","step","(","SMAA_PREDICATION_THRESHOLD",",","nB",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","nC",")",";","}"]}]}}]},{type:"textline",tokens:["void","nH","(","bvec2","nE",",","inout","vec2","nF",",","vec2","nG",")","{","if","(","nE",".","x",")","nF",".","x","=","nG",".","x",";","if","(","nE",".","y",")","nF",".","y","=","nG",".","y",";","}","void","nH","(","bvec4","nI",",","inout","vec4","nJ",",","vec4","nK",")","{","nH","(","nI",".","xy",",","nJ",".","xy",",","nK",".","xy",")",";","nH","(","nI",".","zw",",","nJ",".","zw",",","nK",".","zw",")",";","}","vec2","nM","(","vec2","nL",")","{","return","sign","(","nL",")","*","floor","(","abs","(","nL",")","+",".5",")",";","}","vec4","nM","(","vec4","nN",")","{","return","sign","(","nN",")","*","floor","(","abs","(","nN",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","od","(","vec2","nO",",","sampler2D","nP"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nQ"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nR","=","nD","(","nO",",","nQ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nR","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","nS","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","nT","=","dot","(","texture2D","(","nP",",","nO",")",".","rgb",",","nS",")",";","float","nU","=","dot","(","texture2D","(","nP",",","no",".","xy",")",".","rgb",",","nS",")",";","float","nV","=","dot","(","texture2D","(","nP",",","no",".","zw",")",".","rgb",",","nS",")",";","vec4","nW",";","nW",".","xy","=","abs","(","nT","-","vec2","(","nU",",","nV",")",")",";","vec2","nX","=","step","(","nR",",","nW",".","xy",")",";","if","(","dot","(","nX",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","nY","=","dot","(","texture2D","(","nP",",","np",".","xy",")",".","rgb",",","nS",")",";","float","nZ","=","dot","(","texture2D","(","nP",",","np",".","zw",")",".","rgb",",","nS",")",";","nW",".","zw","=","abs","(","nT","-","vec2","(","nY",",","nZ",")",")",";","vec2","n_","=","max","(","nW",".","xy",",","nW",".","zw",")",";","float","oa","=","dot","(","texture2D","(","nP",",","nq",".","xy",")",".","rgb",",","nS",")",";","float","ob","=","dot","(","texture2D","(","nP",",","nq",".","zw",")",".","rgb",",","nS",")",";","nW",".","zw","=","abs","(","vec2","(","nU",",","nV",")","-","vec2","(","oa",",","ob",")",")",";","n_","=","max","(","n_",".","xy",",","nW",".","zw",")",";","float","oc","=","max","(","n_",".","x",",","n_",".","y",")",";","nX",".","xy","*=","step","(","oc",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","nW",".","xy",")",";","return","nX",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","of","(","vec2","oe",")","{","oe",".","r","=","oe",".","r","*","abs","(","5.0","*","oe",".","r","-","5.0","*","0.75",")",";","return","nM","(","oe",")",";","}","vec4","of","(","vec4","og",")","{","og",".","rb","=","og",".","rb","*","abs","(","5.0","*","og",".","rb","-","5.0","*","0.75",")",";","return","nM","(","og",")",";","}","vec2","oo","(","sampler2D","oh",",","vec2","oi",",","vec2","oj",",","out","vec2","ok",")","{","vec4","ol","=","vec4","(","oi",",","-","1.0",",","1.0",")",";","vec3","om","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","on","=","0",";","on","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","on","++",")","{","if","(","ol",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","ol",".","w",">","0.9",")","{","ol",".","xyz","+=","om","*","vec3","(","oj",",","1.0",")",";","ok","=","texture2D","(","oh",",","ol",".","xy",",","0.0",")",".","rg",";","ol",".","w","=","dot","(","ok",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","ol",".","zw",";","}","vec2","ow","(","sampler2D","op",",","vec2","oq",",","vec2","or",",","out","vec2","os",")","{","vec4","ot","=","vec4","(","oq",",","-","1.0",",","1.0",")",";","ot",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","ou","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","ov","=","0",";","ov","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","ov","++",")","{","if","(","ot",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","ot",".","w",">","0.9",")","{","ot",".","xyz","=","ou","*","vec3","(","or",",","1.0",")","+","ot",".","xyz",";","os","=","texture2D","(","op",",","ot",".","xy",",","0.0",")",".","rg",";","os","=","of","(","os",")",";","ot",".","w","=","dot","(","os",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","ot",".","zw",";","}","vec2","oC","(","sampler2D","ox",",","vec2","oy",",","vec2","oz",",","float","oA",")","{","vec2","oB","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","oz","+","oy",";","oB","=","SMAA_AREATEX_PIXEL_SIZE","*","oB","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","oB",".","x","+=","0.5",";","oB",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","oA",";","return","texture2D","(","ox",",","oB",",","0.0",")",".","rg",";","}","vec2","oR","(","sampler2D","oD",",","sampler2D","oE",",","vec2","oF",",","vec2","oG",",","vec4","oH",")","{","vec2","oI","=","vec2","(","0.0",",","0.0",")",";","vec4","oJ",";","vec2","oK",";","if","(","oG",".","r",">","0.0",")","{","oJ",".","xz","=","oo","(","oD",",","oF",",","vec2","(","-","1.0",",","1.0",")",",","oK",")",";","oJ",".","x","+=","float","(","oK",".","y",">","0.9",")",";","}","else","oJ",".","xz","=","vec2","(","0.0",",","0.0",")",";","oJ",".","yw","=","oo","(","oD",",","oF",",","vec2","(","1.0",",","-","1.0",")",",","oK",")",";","if","(","oJ",".","x","+","oJ",".","y",">","2.0",")","{","vec4","oL","=","vec4","(","-","oJ",".","x","+","0.25",",","oJ",".","x",",","oJ",".","y",",","-","oJ",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","oF",".","xyxy",";","vec4","oM",";","oM",".","xy","=","texture2D","(","oD",",","oL",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","oM",".","zw","=","texture2D","(","oD",",","oL",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","oM",".","yxwz","=","of","(","oM",".","xyzw",")",";","vec2","oN","=","vec2","(","2.0",",","2.0",")","*","oM",".","xz","+","oM",".","yw",";","nH","(","bvec2","(","step","(","0.9",",","oJ",".","zw",")",")",",","oN",",","vec2","(","0.0",",","0.0",")",")",";","oI","+=","oC","(","oE",",","oJ",".","xy",",","oN",",","oH",".","z",")",";","}","oJ",".","xz","=","ow","(","oD",",","oF",",","vec2","(","-","1",",","-","1",")",",","oK",")",";","if","(","texture2D","(","oD",",","oF","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","oJ",".","yw","=","ow","(","oD",",","oF",",","vec2","(","1",",","1",")",",","oK",")",";","oJ",".","y","+=","float","(","oK",".","y",">","0.9",")",";","}","else","oJ",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","oJ",".","x","+","oJ",".","y",">","2.0",")","{","vec4","oO","=","vec4","(","-","oJ",".","x",",","-","oJ",".","x",",","oJ",".","y",",","oJ",".","y",")","*","u_texel_size",".","xyxy","+","oF",".","xyxy",";","vec4","oP",";","oP",".","x","=","texture2D","(","oD",",","oO",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","oP",".","y","=","texture2D","(","oD",",","oO",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","oP",".","zw","=","texture2D","(","oD",",","oO",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","oQ","=","vec2","(","2.0",",","2.0",")","*","oP",".","xz","+","oP",".","yw",";","nH","(","bvec2","(","step","(","0.9",",","oJ",".","zw",")",")",",","oQ",",","vec2","(","0",",","0",")",")",";","oI","+=","oC","(","oE",",","oJ",".","xy",",","oQ",",","oH",".","w",")",".","gr",";","}","return","oI",";","}"]}]}}]},{type:"textline",tokens:["float","oX","(","sampler2D","oS",",","vec2","oT",",","float","oU",")","{","vec2","oV","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","oW","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","oU",",","1.0",")",";","oV","+=","vec2","(","-","1.0",",","1.0",")",";","oW","+=","vec2","(","0.5",",","-","0.5",")",";","oV","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","oW","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","oS",",","oV","*","oT","+","oW",",","0.0",")",".","r",";","}","float","pe","(","sampler2D","oY",",","sampler2D","oZ",",","vec2","o_",",","float","pa",")","{","vec2","pb","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pc","=","0",";","pc","<","SMAA_MAX_SEARCH_STEPS",";","pc","++",")","{","if","(","o_",".","x",">","pa","&&","pb",".","g",">","0.8281","&&","pb",".","r","==","0.0",")","{","pb","=","texture2D","(","oY",",","o_",",","0.0",")",".","rg",";","o_","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","o_",";","}","}","float","pd","=","-","(","255.0","/","127.0",")","*","oX","(","oZ",",","pb",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","pd","+","o_",".","x",";","}","float","pm","(","sampler2D","pf",",","sampler2D","pg",",","vec2","ph",",","float","pi",")","{","vec2","pj","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pk","=","0",";","pk","<","SMAA_MAX_SEARCH_STEPS",";","pk","++",")","{","if","(","ph",".","x","<","pi","&&","pj",".","g",">","0.8281","&&","pj",".","r","==","0.0",")","{","pj","=","texture2D","(","pf",",","ph",",","0.0",")",".","rg",";","ph","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","ph",";","}","}","float","pl","=","-","(","255.0","/","127.0",")","*","oX","(","pg",",","pj",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","pl","+","ph",".","x",";","}","float","pu","(","sampler2D","pn",",","sampler2D","po",",","vec2","pp",",","float","pq",")","{","vec2","pr","=","vec2","(","1.0",",","0.0",")",";","for","(","int","ps","=","0",";","ps","<","SMAA_MAX_SEARCH_STEPS",";","ps","++",")","{","if","(","pp",".","y",">","pq","&&","pr",".","r",">","0.8281","&&","pr",".","g","==","0.0",")","{","pr","=","texture2D","(","pn",",","pp",",","0.0",")",".","rg",";","pp","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pp",";","}","}","float","pt","=","-","(","255.0","/","127.0",")","*","oX","(","po",",","pr",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","pt","+","pp",".","y",";","}","float","pC","(","sampler2D","pv",",","sampler2D","pw",",","vec2","px",",","float","py",")","{","vec2","pz","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pA","=","0",";","pA","<","SMAA_MAX_SEARCH_STEPS",";","pA","++",")","{","if","(","px",".","y","<","py","&&","pz",".","r",">","0.8281","&&","pz",".","g","==","0.0",")","{","pz","=","texture2D","(","pv",",","px",",","0.0",")",".","rg",";","px","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","px",";","}","}","float","pB","=","-","(","255.0","/","127.0",")","*","oX","(","pw",",","pz",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","pB","+","px",".","y",";","}","vec2","pJ","(","sampler2D","pD",",","vec2","pE",",","float","pF",",","float","pG",",","float","pH",")","{","vec2","pI","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","nM","(","4.0","*","vec2","(","pF",",","pG",")",")","+","pE",";","pI","=","SMAA_AREATEX_PIXEL_SIZE","*","pI","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","pI",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","pH","+","pI",".","y",";","return","texture2D","(","pD",",","pI",",","0.0",")",".","rg",";","}","void","pR","(","sampler2D","pK",",","inout","vec2","pL",",","vec4","pM",",","vec2","pN",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pO","=","step","(","pN",".","xy",",","pN",".","yx",")",";","vec2","pP","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pO",";","pP","/=","pO",".","x","+","pO",".","y",";","vec2","pQ","=","vec2","(","1.0",",","1.0",")",";","pQ",".","x","-=","pP",".","x","*","texture2D","(","pK",",","pM",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","pQ",".","x","-=","pP",".","y","*","texture2D","(","pK",",","pM",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","pQ",".","y","-=","pP",".","x","*","texture2D","(","pK",",","pM",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","pQ",".","y","-=","pP",".","y","*","texture2D","(","pK",",","pM",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","pL","*=","clamp","(","pQ",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","pZ","(","sampler2D","pS",",","inout","vec2","pT",",","vec4","pU",",","vec2","pV",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pW","=","step","(","pV",".","xy",",","pV",".","yx",")",";","vec2","pX","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pW",";","pX","/=","pW",".","x","+","pW",".","y",";","vec2","pY","=","vec2","(","1.0",",","1.0",")",";","pY",".","x","-=","pX",".","x","*","texture2D","(","pS",",","pU",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","pY",".","x","-=","pX",".","y","*","texture2D","(","pS",",","pU",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","pY",".","y","-=","pX",".","x","*","texture2D","(","pS",",","pU",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","pY",".","y","-=","pX",".","y","*","texture2D","(","pS",",","pU",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","pT","*=","clamp","(","pY",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qr","(","vec2","p_",",","vec2","qa",",","sampler2D","qb",",","sampler2D","qc",",","sampler2D","qd",",","vec4","qe",")","{","vec4","qf","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","qg","=","texture2D","(","qb",",","p_",")",".","rg",";","if","(","qg",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qf",".","rg","=","oR","(","qb",",","qc",",","p_",",","qg",",","qe",")",";","if","(","qf",".","r","==","-","qf",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","qh",";","vec3","qi",";","qi",".","x","=","pe","(","qb",",","qd",",","no",".","xy",",","nq",".","x",")",";","qi",".","y","=","np",".","y",";","qh",".","x","=","qi",".","x",";","float","qj","=","texture2D","(","qb",",","qi",".","xy",",","0.0",")",".","r",";","qi",".","z","=","pm","(","qb",",","qd",",","no",".","zw",",","nq",".","y",")",";","qh",".","y","=","qi",".","z",";","qh","=","abs","(","nM","(","qh","/","u_texel_size",".","xx","-","qa",".","xx",")",")",";","vec2","qk","=","sqrt","(","qh",")",";","float","ql","=","texture2D","(","qb",",","qi",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","qf",".","rg","=","pJ","(","qc",",","qk",",","qj",",","ql",",","qe",".","y",")",";","qi",".","y","=","p_",".","y",";","pR","(","qb",",","qf",".","rg",",","qi",".","xyzy",",","qh",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","qg",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","qg",".","r",">","0.0",")","{","vec2","qm",";","vec3","qn",";","qn",".","y","=","pu","(","qb",",","qd",",","np",".","xy",",","nq",".","z",")",";","qn",".","x","=","no",".","x",";","qm",".","x","=","qn",".","y",";","float","qo","=","texture2D","(","qb",",","qn",".","xy",",","0.0",")",".","g",";","qn",".","z","=","pC","(","qb",",","qd",",","np",".","zw",",","nq",".","w",")",";","qm",".","y","=","qn",".","z",";","qm","=","abs","(","nM","(","qm","/","u_texel_size",".","yy","-","qa",".","yy",")",")",";","vec2","qp","=","sqrt","(","qm",")",";","float","qq","=","texture2D","(","qb",",","qn",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","qf",".","ba","=","pJ","(","qc",",","qp",",","qo",",","qq",",","qe",".","x",")",";","qn",".","x","=","p_",".","x",";","pZ","(","qb",",","qf",".","ba",",","qn",".","xyxz",",","qm",")",";","}","return","qf",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qI","(","vec2","qs",",","sampler2D","qt",",","sampler2D","qu"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qv"]}]}}]},{type:"textline",tokens:[")","{","vec4","qw",";","qw",".","x","=","texture2D","(","qu",",","nn",".","xy",")",".","a",";","qw",".","y","=","texture2D","(","qu",",","nn",".","zw",")",".","g",";","qw",".","wz","=","texture2D","(","qu",",","qs",")",".","xz",";","if","(","dot","(","qw",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","qx","=","texture2D","(","qt",",","qs",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qy","=","texture2D","(","qv",",","a",")",";","vec2","qz","=","2.0","*","cx","(","qy",")","-","1.0",";","qx",".","a","=","sqrt","(","2.0","*","length","(","qz",")",")",";"]}]}}]},{type:"textline",tokens:["return","qx",";","}","else","{","bool","qA","=","max","(","qw",".","x",",","qw",".","z",")",">","max","(","qw",".","y",",","qw",".","w",")",";","vec4","qB","=","vec4","(","0.0",",","qw",".","y",",","0.0",",","qw",".","w",")",";","vec2","qC","=","qw",".","yw",";","nH","(","bvec4","(","qA",",","qA",",","qA",",","qA",")",",","qB",",","vec4","(","qw",".","x",",","0.0",",","qw",".","z",",","0.0",")",")",";","nH","(","bvec2","(","qA",",","qA",")",",","qC",",","qw",".","xz",")",";","qC","/=","dot","(","qC",",","vec2","(","1.0",",","1.0",")",")",";","vec4","qD","=","qB","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","qs",".","xyxy",";","vec4","qE","=","qC",".","x","*","texture2D","(","qt",",","qD",".","xy",",","0.0",")",";","qE","+=","qC",".","y","*","texture2D","(","qt",",","qD",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qF","=","texture2D","(","qv",",","qD",".","xy",")",";","vec2","qG","=","2.0","*","cx","(","qF",")","-","1.0",";","vec2","qH","=","qC",".","x","*","qG",";","qF","=","texture2D","(","qv",",","qD",".","zw",")",";","qG","=","2.0","*","cx","(","qF",")","-","1.0",";","qH","+=","qC",".","y","*","qG",";","qE",".","a","=","sqrt","(","2.0","*","length","(","qH",")",")",";"]}]}}]},{type:"textline",tokens:["return","qE",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qU","(","vec2","qJ",",","sampler2D","qK",",","sampler2D","qL"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qM"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qN","=","texture2D","(","qM",",","a",")",";","vec2","qO",";","qO","=","2.0","*","cx","(","qN",")","-","1.0",";","vec4","qP","=","texture2D","(","qK",",","qJ",")",";","vec4","qQ","=","texture2D","(","qL",",","qJ","-","qO",")",";","float","qR","=","abs","(","qP",".","a","*","qP",".","a","-","qQ",".","a","*","qQ",".","a",")","/","2.0",";","float","qS","=","0.5","*","clamp","(","1.0","-","sqrt","(","qR",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","qT","=","mix","(","qP",",","qQ",",","qS",")",";","qT",".","a","=","1.0",";","return","qT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qP","=","texture2D","(","qK",",","qJ",")",";","vec4","qQ","=","texture2D","(","qL",",","qJ",")",";","return","mix","(","qP",",","qQ",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qV","=","vec4","(","od","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qV","=","qr","(","a",",","nr",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qV","=","qI","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qV","=","vec4","(","qU","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qV","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","qV",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","no",";","varying","vec4","np",";","varying","vec4","nq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nr",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","lg","(","vec2","lf",")","{","no","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","lf",".","xyxy",";","np","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","lf",".","xyxy",";","nq","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","lf",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","lj","(","vec2","lh",",","out","vec2","li",")","{","li","=","lh","/","u_texel_size",";","no","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","lh",".","xyxy",";","np","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","lh",".","xyxy",";","nq","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","no",".","xz",",","np",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","ll","(","vec2","lk",")","{","nn","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","lk",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["lg","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["lj","(","a",",","nr",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["ll","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","nt","(","in","vec2","ns",")","{","return","ni","(","u_depth",",","ns",",","u_camera_range",")",";","}","void","main","(",")","{","float","nu","=","texture2D","(","u_color",",","a",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","nu",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["vec3","nv","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","a","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","float","nw","=","nt","(","a",")",";","float","nx","=","nw","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_8"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ny","=","8.0",";","const","int","nz","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ny","=","16.0",";","const","int","nz","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_24"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ny","=","24.0",";","const","int","nz","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ny","=","32.0",";","const","int","nz","=","4",";"]}]}}]},{type:"textline",tokens:["float","nA","=","u_ssao_radius_increase","*","0.001",";","const","float","nB","=","1.0","+","2.4","/","ny",";","float","nC","=","0.0",";","for","(","int","nD","=","0",";","nD","<","nz",";","nD","++",")","for","(","int","nE","=","-","1",";","nE","<=","1",";","nE","+=","2",")","for","(","int","nF","=","-","1",";","nF","<=","1",";","nF","+=","2",")","for","(","int","nG","=","-","1",";","nG","<=","1",";","nG","+=","2",")","{","vec3","nH","=","reflect","(","normalize","(","vec3","(","nE",",","nF",",","nG",")",")",",","nv",")","*","(","nA","*=","nB",")",";","vec3","nI","=","vec3","(","a",",","nx",")",";","nI","+=","vec3","(","nH",".","xy",",","nH",".","z","*","nx","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nI",".","z","-=","1.4","*","(","nI",".","z","-","nx",")","*","step","(","nx",",","nI",".","z",")",";"]}]}}]},{type:"textline",tokens:["float","nJ","=","nt","(","nI",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","float","nK","=","clamp","(","(","nx","-","nJ",")","/","nJ",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nC","+=","mix","(","1.0",",","nK",",","step","(","nJ",",","nI",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nC","+=","mix","(","step","(","nI",".","z",",","nJ",")",",","0.5",",","nK",")",";"]}]}}]},{type:"textline",tokens:["}","nC","=","nC","/","ny",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nC","=","clamp","(","nC","*","nC","+","0.6","*","nC",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nC","=","clamp","(","nC","*","nC","+","nC",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["float","nL","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","nw",")",";","nC","=","mix","(","1.0",",","nC",",","nL",")",";","gl_FragColor","=","vec4","(","nu",",","nC",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","nt","(","in","vec2","ns",")","{","return","ni","(","u_depth",",","ns",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","nu","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nv","=","nt","(","a",")",";","float","nw","=","0.0",";","float","nx","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["vec2","ny","=","vec2","(","-","2.0",")",";","for","(","int","nz","=","0",";","nz","<","4",";","++","nz",")","{","for","(","int","nA","=","0",";","nA","<","4",";","++","nA",")","{","vec2","nB","=","(","ny","+","vec2","(","float","(","nz",")",",","float","(","nA",")",")",")","*","u_texel_size",";","float","nC","=","texture2D","(","u_ssao_mask",",","a","+","nB",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nD","=","nt","(","a","+","nB",")",";","float","nE","=","1.0","-","clamp","(","abs","(","nD","-","nv",")","*","nx",",","0.0",",","1.0",")",";","nu","+=","nC","*","nE",";","nw","+=","nE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nu","+=","nC",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nu","/","nw",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nu","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","lf","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","lg","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","lf","-","1.0",",","1.0",")",";","vec4","lh","=","u_view_proj_inverse","*","lg",";","vec4","li","=","lh","/","lh",".","w",";","vec4","lj","=","u_view_proj_prev","*","li",";","lj","/=","lj",".","w",";","vec2","lk","=","(","lg",".","xy","-","lj",".","xy",")","/","4.0","+","0.5",";","lk","=","clamp","(","lk",",","0.0",",","1.0",")",";","gl_FragColor","=","cl","(","lk",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","struct","c","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","f","(","vec3","d",",","vec3","e",")","{","return","any","(","lessThan","(","abs","(","d","-","e",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","i","(","in","vec4","g",",","in","vec3","h",")","{","return","h","+","2.0","*","cross","(","g",".","xyz",",","cross","(","g",".","xyz",",","h",")","+","g",".","w","*","h",")",";","}","mat4","j","(",")","{","return","mat4","(","1.0",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","l","(","float","k",")","{","return","mat4","(","1.0",",","b",",","b",",","b",",","b",",","cos","(","k",")",",","sin","(","k",")",",","b",",","b",",","-","sin","(","k",")",",","cos","(","k",")",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","n","(","float","m",")","{","return","mat4","(","cos","(","m",")",",","b",",","-","sin","(","m",")",",","b",",","b",",","1.0",",","b",",","b",",","sin","(","m",")",",","b",",","cos","(","m",")",",","b",",","b",",","b",",","b",",","1.0",")",";","}","mat4","p","(","float","o",")","{","return","mat4","(","cos","(","o",")",",","sin","(","o",")",",","b",",","b",",","-","sin","(","o",")",",","cos","(","o",")",",","b",",","b",",","b",",","b",",","1.0",",","b",",","b",",","b",",","b",",","1.0",")",";","}","c","r","(","in","c","q",")","{","return","c","(","q",".","a",",","q",".","b",",","normalize","(","q",".","c",")",",","normalize","(","q",".","d",")",",","normalize","(","q",".","e",")",",","q",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","s","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","y","(","vec3","t",",","mat4","u",")","{","vec3","v","=","vec3","(","u","[","0","]","[","0","]",",","u","[","1","]","[","0","]",",","u","[","2","]","[","0","]",")",";","vec3","w","=","vec3","(","u","[","0","]","[","1","]",",","u","[","1","]","[","1","]",",","u","[","2","]","[","1","]",")",";","vec3","x","=","vec3","(","u","[","0","]","[","2","]",",","u","[","1","]","[","2","]",",","u","[","2","]","[","2","]",")",";","w","=","cross","(","x",",","v",")",";","return","mat4","(","vec4","(","v",",","0.0",")",",","vec4","(","w",",","0.0",")",",","vec4","(","x",",","0.0",")",",","vec4","(","t",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","E","(","vec3","z",",","vec3","A",")","{","vec3","B","=","z","-","A",";","B",".","y","=","0.0",";","B","=","normalize","(","B",")",";","vec3","C","=","normalize","(","cross","(","s",",","B",")",")",";","vec3","D","=","normalize","(","cross","(","B",",","C",")",")",";","return","mat4","(","vec4","(","C",",","0.0",")",",","vec4","(","D",",","0.0",")",",","vec4","(","B",",","0.0",")",",","vec4","(","A",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","P","(","in","vec3","F",",","float","G",",","float","H",",","float","I",",","vec3","J",")","{","float","L","=","fract","(","length","(","J",")","/","0.17",")",";","float","M","=","I","+","L","/","10.0",";","float","N","=","L",";","if","(","I","!=","0.0",")","N","/=","I",";","F","*=","1.0","+","0.5","*","sin","(","G",")",";","float","O","=","length","(","F",")","*","H","*","sin","(","2.0","*","3.14","*","G","*","M","+","N",")",";","return","p","(","O",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","_","(","in","vec3","Q",",","in","vec3","R",",","in","mat4","S",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","=","y","(","R",",","S",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","U","=","fract","(","(","R",".","x","*","1.43","+","R",".","y","*","0.123","+","R",".","z","*","6.1",")",")",";","float","V","=","2.0","*","M_PI","*","U",";","vec3","W","=","normalize","(","vec3","(","S","[","0","]","[","2","]",",","0.0",",","S","[","2","]","[","2","]",")",")",";","float","X","=","acos","(","W","[","2","]",")",";","if","(","W","[","0","]","<","0.0",")","X","=","2.0","*","M_PI","-","X",";","float","Y","=","X","-","V",";","if","(","Y","<","0.0",")","Y","=","2.0","*","M_PI","+","Y",";","float","Z","=","V",";","if","(","Y","<=","MAX_BILLBOARD_ANGLE",")","Z","+=","Y",";","else","if","(","Y","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","Z","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Y","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","Y","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","Z","+=","Y","-","M_PI",";","else","if","(","Y","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","Z","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Y","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","Z","+=","Y","-","2.0","*","M_PI",";","mat4","T","=","n","(","Z",")",";","T","[","3","]","=","vec4","(","R",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","=","E","(","Q",",","R",")",";"]}]}}]},{type:"textline",tokens:["return","T",";","}","c","ag","(","in","vec3","aa",",","in","vec3","ab",",","in","vec3","ac",",","in","vec3","ad",",","in","vec3","ae",",","in","mat4","af",")","{","aa","=","(","af","*","vec4","(","aa",",","1.0",")",")",".","xyz",";","ab","=","(","af","*","vec4","(","ab",",","1.0",")",")",".","xyz",";","ac","=","(","af","*","vec4","(","ac",",","0.0",")",")",".","xyz",";","ad","=","(","af","*","vec4","(","ad",",","0.0",")",")",".","xyz",";","ae","=","(","af","*","vec4","(","ae",",","0.0",")",")",".","xyz",";","return","r","(","c","(","aa",",","ab",",","ac",",","ad",",","ae",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","aj","(","vec2","ah",",","vec3","ai",")","{","return","(","ah","+","0.5",")","*","ai",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","as","(","in","vec4","ak",",","in","vec4","al",",","in","float","am",")","{","float","an","=","ak","[","0","]","*","al","[","0","]","+","ak","[","1","]","*","al","[","1","]","+","ak","[","2","]","*","al","[","2","]","+","ak","[","3","]","*","al","[","3","]",";","if","(","an","<","0.0",")","{","al","*=","-","1.0",";","an","=","-","an",";","}","if","(","abs","(","an",")",">=","1.0",")","return","ak",";","float","ao","=","acos","(","an",")",";","float","ap","=","sqrt","(","1.0","-","an","*","an",")",";","if","(","abs","(","ap",")","<","0.001",")","return","vec4","(","ak","*","0.5","+","al","*","0.5",")",";","float","aq","=","sin","(","(","1.0","-","am",")","*","ao",")","/","ap",";","float","ar","=","sin","(","am","*","ao",")","/","ap",";","return","ak","*","aq","+","al","*","ar",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aH","(","in","vec3","at",",","in","vec4","au",",","in","vec4","av",",","in","vec4","aw",",","in","vec4","ax",",","in","float","ay",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","az","=","as","(","au",",","av",",","ay",")",";","vec4","aA","=","mix","(","aw",",","ax",",","ay",")",";","vec3","aB","=","i","(","az",",","at",")",";","vec3","aC","=","aB","*","aA",".","w","+","aA",".","xyz",";","return","aC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aD","=","i","(","au",",","at",")",";","vec3","aE","=","i","(","av",",","at",")",";","vec3","aF","=","aD","*","aw",".","w","+","aw",".","xyz",";","vec3","aG","=","aE","*","ax",".","w","+","ax",".","xyz",";","return","mix","(","aF",",","aG",",","ay",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aQ","(","in","vec3","aI",",","in","vec4","aJ",",","in","vec4","aK",",","in","float","aL",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aM","=","as","(","aJ",",","aK",",","aL",")",";","vec3","aN","=","i","(","aM",",","aI",")",";","return","aN",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aO","=","i","(","aJ",",","aI",")",";","vec3","aP","=","i","(","aK",",","aI",")",";","return","mix","(","aO",",","aP",",","aL",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aH","(","in","vec3","aR",",","in","vec4","aS",",","in","vec4","aT",")","{","vec3","aU","=","i","(","aS",",","aR",")",";","vec3","aV","=","aU","*","aT",".","w","+","aT",".","xyz",";","return","aV",";","}","vec3","aQ","(","in","vec3","aW",",","in","vec4","aX",")","{","vec3","aY","=","i","(","aX",",","aW",")",";","return","aY",";","}"]}]}}]},{type:"textline",tokens:["void","bm","(","inout","vec3","aZ",",","inout","vec3","a_",",","inout","vec3","ba",",","inout","vec3","bb",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bc","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bd","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","be","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bf","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bg","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec4","bh","=","a_influence",";","for","(","int","bi","=","0",";","bi","<","4",";","bi","++",")","{","int","bj","=","int","(","bh","[","bi","]",")",";","float","bk","=","fract","(","bh","[","bi","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bd","+=","bk","*","aH","(","aZ",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","u_transb","[","bj","]",",","u_transa","[","bj","]",",","bc",")",";","be","+=","bk","*","aQ","(","a_",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","bc",")",";","bf","+=","bk","*","aQ","(","ba",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","bc",")",";","bg","+=","bk","*","aQ","(","bb",",","u_quatsb","[","bj","]",",","u_quatsa","[","bj","]",",","bc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bd","+=","bk","*","aH","(","aZ",",","u_quatsb","[","bj","]",",","u_transb","[","bj","]",")",";","be","+=","bk","*","aQ","(","a_",",","u_quatsb","[","bj","]",")",";","bf","+=","bk","*","aQ","(","ba",",","u_quatsb","[","bj","]",")",";","bg","+=","bk","*","aQ","(","bb",",","u_quatsb","[","bj","]",")",";"]}]}}]},{type:"textline",tokens:["}","aZ","=","bd",";","a_","=","be",";","ba","=","bf",";","bb","=","bg",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bl","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bl",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aH","(","aZ",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","u_transb","[","bl","]",",","u_transa","[","bl","]",",","bc",")",";","a_","=","aQ","(","a_",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bc",")",";","ba","=","aQ","(","ba",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bc",")",";","bb","=","aQ","(","bb",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bc",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","aH","(","aZ",",","u_quatsb","[","bl","]",",","u_transb","[","bl","]",")",";","a_","=","aQ","(","a_",",","u_quatsb","[","bl","]",")",";","ba","=","aQ","(","ba",",","u_quatsb","[","bl","]",")",";","bb","=","aQ","(","bb",",","u_quatsb","[","bl","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bA","(","inout","vec3","bn",",","in","vec3","bo",",","in","float","bp",",","in","float","bq",",","in","float","br",",","in","vec3","bs",",","in","float","bt",")","{","float","bu","=","length","(","bo",")",";","float","bv","=","bq","*","(","1.0","+","0.1","*","fract","(","bu",")",")",";","float","bw","=","bp","*","bt","*","(","1.0","+","sin","(","2.0","*","3.14","*","br","*","bv","+","bu",")",")",";","float","bx","=","(","bn",".","y","-","bo",".","y",")","*","abs","(","bw",")",";","bx","+=","1.0",";","bx","*=","bx",";","bx","=","bx","*","bx","-","bx",";","vec3","by","=","bn",";","by",".","xz","+=","bs",".","xz","*","bx","*","sign","(","bw",")",";","float","bz","=","length","(","bn","-","bo",")",";","bn","=","bo","+","normalize","(","by","-","bo",")","*","bz",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bC","(","vec4","bB",")","{","return","bB","*","bB","*","(","3.0","-","2.0","*","bB",")",";","}","vec4","bE","(","vec4","bD",")","{","return","abs","(","fract","(","bD","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bG","(","vec4","bF",")","{","return","bC","(","bE","(","bF",")",")",";","}","void","bX","(","inout","vec3","bH",",","in","float","bI",",","in","vec3","bJ",",","in","vec3","bK",",","in","vec3","bL",",","in","float","bM",",","in","float","bN",",","in","float","bO",",","in","vec3","bP",")","{","float","bQ",";","float","bR",";","float","bS",";","vec2","bT",";","vec4","bU",";","vec2","bV",";","vec3","bW",";","bQ","=","dot","(","bL",",","vec3","(","1.0",")",")",";","bR","=","bQ","+","bP",".","g",";","bS","=","dot","(","bH",",","vec3","(","bP",".","g",")",")",";","bT","=","(","bI","+","vec2","(","bS",",","bR",")",")",";","bU","=","(","(","fract","(","(","bT",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bK",")","*","bM",";","bU","=","bG","(","bU",")",";","bV","=","bU",".","xz","+","bU",".","yw",";","bV",".","y","=","0.5","-","bV",".","y",";","bW","=","bV",".","xyx","*","bP",".","rbr","*","vec3","(","bN","*","bJ",".","x",",","bO",",","bN","*","bJ",".","z",")",";","bH","+=","bW",";","}"]}]}}]},{type:"textline",tokens:["void","cd","(","inout","vec3","bY",",","inout","vec3","bZ",",","in","vec3","b_",")","{","vec3","ca","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cb","=","bZ",";","vec3","cc","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cb","=","bY",";","vec3","cc","=","bZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["bX","(","cb",",","u_time",",","b_",",","ca",",","cc",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bA","(","cb",",","cc",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ca",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bA","(","cb",",","cc",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ca",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["bY","+=","cb","-","bZ",";","bZ","=","cb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bY","=","cb",";","bZ","=","cc",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ce","=","255.0",";","float","cf","=","0.0",";","float","cg","=","1.0",";","vec4","cl","(","const","in","float","ch",")","{","vec4","ci","=","vec4","(","ce","*","ce","*","ce",",","ce","*","ce",",","ce",",","cg",")",";","vec4","cj","=","vec4","(","cf",",","cg","/","ce",",","cg","/","ce",",","cg","/","ce",")",";","vec4","ck","=","fract","(","ch","*","ci",")",";","ck","-=","ck",".","xxyz","*","cj",";","return","ck",";","}","float","cp","(","const","in","vec4","cm",")","{","float","cn",";","vec4","co","=","vec4","(","cg","/","(","ce","*","ce","*","ce",")",",","cg","/","(","ce","*","ce",")",",","cg","/","ce",",","cg",")",";","cn","=","dot","(","cm",",","co",")",";","return","cn",";","}","vec4","cl","(","const","in","vec2","cq",")","{","vec2","cr","=","vec2","(","ce",",","cg",")",";","vec2","cs","=","vec2","(","cf",",","cg","/","ce",")",";","vec4","ct","=","fract","(","cq",".","xxyy","*","cr",".","xyxy",")",";","ct","-=","ct",".","xxzz","*","cs",".","xyxy",";","if","(","cq",".","r","==","cg",")","ct",".","rg","=","vec2","(","cf",",","cg",")",";","if","(","cq",".","g","==","cg",")","ct",".","ba","=","vec2","(","cf",",","cg",")",";","return","ct",";","}","vec2","cx","(","const","in","vec4","cu",")","{","vec2","cv",";","vec2","cw","=","vec2","(","cg","/","ce",",","cg",")",";","cv",".","r","=","dot","(","cu",".","rg",",","cw",")",";","cv",".","g","=","dot","(","cu",".","ba",",","cw",")",";","return","cv",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec4","cG","(","vec4","cF",")","{","return","cF","-","floor","(","cF","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec3","cG","(","vec3","cH",")","{","return","cH","-","floor","(","cH","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec2","cG","(","vec2","cI",")","{","return","cI","-","floor","(","cI","*","(","1.0","/","289.0",")",")","*","289.0",";","}","vec4","cK","(","vec4","cJ",")","{","return","cJ","-","floor","(","cJ","*","(","1.0","/","7.0",")",")","*","7.0",";","}","vec4","cM","(","vec4","cL",")","{","return","cG","(","(","34.0","*","cL","+","5.0",")","*","cL",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","cY","(","vec2","cN",")","{","vec2","cO","=","cG","(","floor","(","cN",")",")",";","vec2","cP","=","fract","(","cN",")",";","vec4","cQ","=","cP",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","cR","=","cP",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","cS","=","cM","(","cO",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","cS","=","cM","(","cS","+","cO",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","cT","=","cK","(","cS",")","*","K","+","K2",";","vec4","cU","=","cK","(","floor","(","cS","*","K",")",")","*","K","+","K2",";","vec4","cV","=","cQ","+","JITTER","*","cT",";","vec4","cW","=","cR","+","JITTER","*","cU",";","vec4","cX","=","cV","*","cV","+","cW","*","cW",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["cX",".","xy","=","min","(","cX",".","xy",",","cX",".","zw",")",";","cX",".","x","=","min","(","cX",".","x",",","cX",".","y",")",";","return","cX",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cX",".","xy","=","(","cX",".","x","<","cX",".","y",")","?","cX",".","xy",":","cX",".","yx",";","cX",".","xz","=","(","cX",".","x","<","cX",".","z",")","?","cX",".","xz",":","cX",".","zx",";","cX",".","xw","=","(","cX",".","x","<","cX",".","w",")","?","cX",".","xw",":","cX",".","wx",";","cX",".","y","=","min","(","cX",".","y",",","cX",".","z",")",";","cX",".","y","=","min","(","cX",".","y",",","cX",".","w",")",";","return","sqrt","(","cX",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dm","(","vec2","cZ",",","float","c_",")","{","vec2","da","=","cG","(","floor","(","cZ",")",")",";","vec2","db","=","fract","(","cZ",")",";","vec4","dc","=","db",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","dd","=","db",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","de","=","cM","(","da",".","x","+","vec4","(","0.0",",","1.0",",","0.0",",","1.0",")",")",";","de","=","cM","(","de","+","da",".","y","+","vec4","(","0.0",",","0.0",",","1.0",",","1.0",")",")",";","vec4","df","=","cK","(","de",")","*","K","+","K2",";","vec4","dg","=","cK","(","floor","(","de","*","K",")",")","*","K","+","K2",";","vec4","dh","=","dc","+","JITTER","*","df",";","vec4","di","=","dd","+","JITTER","*","dg",";","vec4","dj","=","dh","*","dh","+","di","*","di",";","dh","+=","c_",";","di","+=","c_",";","vec4","dk","=","dh","*","dh","+","di","*","di",";","dh","+=","c_",";","di","+=","c_",";","vec4","dl","=","dh","*","dh","+","di","*","di",";","dj",".","xy","=","min","(","dj",".","xy",",","dj",".","zw",")",";","dj",".","x","=","min","(","dj",".","x",",","dj",".","y",")",";","dk",".","xy","=","min","(","dk",".","xy",",","dk",".","zw",")",";","dk",".","x","=","min","(","dk",".","x",",","dk",".","y",")",";","dl",".","xy","=","min","(","dl",".","xy",",","dl",".","zw",")",";","dl",".","x","=","min","(","dl",".","x",",","dl",".","y",")",";","return","mat3","(","dj",".","xx",",","0.0",",","dk",".","xx",",","0.0",",","dl",".","xx",",","0.0",")",";","}","vec3","dp","(","vec3","dn",")","{","return","cG","(","(","(","dn","*","34.0",")","+","1.0",")","*","dn",")",";","}","float","dD","(","vec2","dq",")","{","const","vec4","dr","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","ds","=","floor","(","dq","+","dot","(","dq",",","dr",".","yy",")",")",";","vec2","dt","=","dq","-","ds","+","dot","(","ds",",","dr",".","xx",")",";","vec2","du",";","du","=","(","dt",".","x",">","dt",".","y",")","?","vec2","(","1.0",",","0.0",")",":","vec2","(","0.0",",","1.0",")",";","vec4","dv","=","dt",".","xyxy","+","dr",".","xxzz",";","dv",".","xy","-=","du",";","ds","=","cG","(","ds",")",";","vec3","dw","=","dp","(","dp","(","ds",".","y","+","vec3","(","0.0",",","du",".","y",",","1.0",")",")","+","ds",".","x","+","vec3","(","0.0",",","du",".","x",",","1.0",")",")",";","vec3","dx","=","max","(","0.5","-","vec3","(","dot","(","dt",",","dt",")",",","dot","(","dv",".","xy",",","dv",".","xy",")",",","dot","(","dv",".","zw",",","dv",".","zw",")",")",",","0.0",")",";","dx","=","dx","*","dx",";","dx","=","dx","*","dx",";","vec3","dy","=","2.0","*","fract","(","dw","*","dr",".","www",")","-","1.0",";","vec3","dz","=","abs","(","dy",")","-","0.5",";","vec3","dA","=","floor","(","dy","+","0.5",")",";","vec3","dB","=","dy","-","dA",";","dx","*=","1.79284291400159","-","0.85373472095314","*","(","dB","*","dB","+","dz","*","dz",")",";","vec3","dC",";","dC",".","x","=","dB",".","x","*","dt",".","x","+","dz",".","x","*","dt",".","y",";","dC",".","yz","=","dB",".","yz","*","dv",".","xz","+","dz",".","yz","*","dv",".","yw",";","return","130.0","*","dot","(","dx",",","dC",")",";","}","vec2","dJ","(","vec2","dE",")","{","float","dF","=","dot","(","dE",",","vec2","(","12.9898",",","78.233",")",")",";","float","dG","=","dot","(","dE",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","dH","=","fract","(","sin","(","dF",")","*","43758.5453",")","*","2.0","-","1.0",";","float","dI","=","fract","(","sin","(","dG",")","*","43758.5453",")","*","2.0","-","1.0",";","return","vec2","(","dH",",","dI",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dL","=","0.1",";","const","float","dM","=","0.1",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dN","=","0.05",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","dO","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dP","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";"]}]}}]},{type:"textline",tokens:["float","eb","(","vec3","dQ",",","sampler2D","dR",",","float","dS",")","{","float","dT",";","dQ",".","z","=","clamp","(","dQ",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["dT","=","0.0",";","float","dU","=","dJ","(","dQ",".","xy",")",".","x","*","M_PI",";","float","dV","=","cos","(","dU",")",";","float","dW","=","sin","(","dU",")",";","mat2","dX","=","mat2","(","dV",",","dW",",","-","dW",",","dV",")",";","vec2","dY",",","dZ",";","for","(","int","d_","=","0",";","d_","<","4",";","d_","++",")","for","(","int","ea","=","0",";","ea","<","4",";","ea","++",")","{","dZ",".","x","=","dO","[","d_","]","[","ea","]",";","dZ",".","y","=","dP","[","d_","]","[","ea","]",";","dZ","=","dX","*","dZ",";","dY","=","dQ",".","xy","+","dZ","*","dS","/","SHADOW_TEX_RES",";","dT","+=","step","(","dQ",".","z",",","texture2D","(","dR",",","dY",")",".","r",")",";","}","dT","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dT","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","dT",",","0.0",",","1.0",")",";","}","float","et","(","vec3","ec",",","sampler2D","ed",",","vec3","ee",",","sampler2D","ef",",","float","eg",",","float","eh",",","float","ei",")","{","float","ej",",","ek",";","ec",".","z","=","clamp","(","ec",".","z",",","0.0",",","1.0",")",";","ee",".","z","=","clamp","(","ee",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["ej","=","0.0",";","ek","=","0.0",";","float","el","=","dJ","(","ec",".","xy",")",".","x","*","M_PI",";","float","em","=","cos","(","el",")",";","float","en","=","sin","(","el",")",";","mat2","eo","=","mat2","(","em",",","en",",","-","en",",","em",")",";","vec2","ep",",","eq",";","for","(","int","er","=","0",";","er","<","4",";","er","++",")","for","(","int","es","=","0",";","es","<","4",";","es","++",")","{","eq",".","x","=","dO","[","er","]","[","es","]",";","eq",".","y","=","dP","[","er","]","[","es","]",";","eq","=","eo","*","eq",";","ep","=","ec",".","xy","+","eq","*","eg","/","SHADOW_TEX_RES",";","ej","+=","step","(","ec",".","z",",","texture2D","(","ed",",","ep",")",".","r",")",";","ep","=","ee",".","xy","+","eq","*","eh","/","SHADOW_TEX_RES",";","ek","+=","step","(","ee",".","z",",","texture2D","(","ef",",","ep",")",".","r",")",";","}","ej","=","mix","(","ej",",","ek",",","ei",")",";","ej","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ej","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","ej",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["bool","ew","(","vec2","eu",",","float","ev",")","{","return","all","(","lessThanEqual","(","eu",",","vec2","(","1.0","+","ev",")",")",")","&&","all","(","greaterThanEqual","(","eu",",","vec2","(","0.0","-","ev",")",")",")",";","}","float","eA","(","vec2","ex",")","{","float","ey","=","min","(","ex",".","x",",","ex",".","y",")",";","float","ez","=","min","(","1.0","-","ex",".","x",",","1.0","-","ex",".","y",")",";","return","min","(","ey",",","ez",")",";","}","float","eD","(","float","eB",",","float","eC",")","{","if","(","eC",">=","0.0","&&","eC","<=","dM",")","eB","=","(","eB","-","1.0",")","/","dM","*","eC","+","1.0",";","return","eB",";","}","float","eP","(","vec3","eE",",","vec3","eF",",","sampler2D","eG",",","sampler2D","eH",",","float","eI",",","float","eJ",",","float","eK",",","float","eL",")","{","float","eM",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eN","=","eA","(","eE",".","xy",")",";","if","(","-","eL",">","eK","&&","eN",">=","0.0","&&","eN","<=","dL","&&","ew","(","eF",".","xy",",","0.0",")",")","{","float","eO","=","1.0","-","eN","/","dL",";","eM","=","et","(","eE",",","eG",",","eF",",","eH",",","eI",",","eJ",",","eO",")",";","}","else"]}]}}]},{type:"textline",tokens:["eM","=","eb","(","eE",",","eG",",","eI",")",";","return","eM",";","}","float","eX","(","vec3","eQ",",","sampler2D","eR",",","float","eS",",","float","eT",",","float","eU",")","{","float","eV","=","eb","(","eQ",",","eR",",","eS",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","eU",">","eT",")","{","float","eW","=","eA","(","eQ",".","xy",")",";","eV","=","eD","(","eV",",","eW",")",";","}"]}]}}]},{type:"textline",tokens:["return","eV",";","}","float","fd","(","float","eY",")","{","float","eZ","=","1.0",";","vec3","e_","=","cz",".","xyz","/","cz",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fa","=","cA",".","xyz","/","cA",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fb","=","cB",".","xyz","/","cB",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fc","=","cC",".","xyz","/","cC",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ew","(","e_",".","xy",",","0.0",")",")","{","eZ","=","eP","(","e_",",","fa",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","eY",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","ew","(","e_",".","xy",",","dN",")",")","{","eZ","=","eX","(","e_",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","eY",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ew","(","fa",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","eP","(","fa",",","fb",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","eY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","eX","(","fa",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","eY",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ew","(","fb",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","eP","(","fb",",","fc",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","eY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eZ","=","eX","(","fb",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","eY",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","ew","(","fc",".","xy",",","0.0",")",")","eZ","=","eX","(","fc",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","eY",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","eZ",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","fi","(","inout","vec3","fe",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ff","=","texture2DProj","(","u_shadow_mask",",","cD",")",".","rg",";","vec3","fg","=","vec3","(","ff",".","r",")",";","float","fh","=","ff",".","g",";","dK","=","vec4","(","fg",",","fh",")",";","fe","*=","dK",".","a",";","return","dK",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","fd","(","cE",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fn","(","vec3","fj",",","float","fk",",","vec2","fl",")","{","vec2","fm","=","vec2","(","(","fj",".","x","-","fl",".","x",")","/","fk",",","-","(","fj",".","z","-","fl",".","y",")","/","fk",")",";","return","fract","(","fm",")",";","}","vec2","fr","(","vec2","fo",",","float","fp",",","vec2","fq",")","{","return","vec2","(","fo",".","x","*","fp",",","-","fo",".","y","*","fp",")","+","fq",";","}","c","fs","(",")","{","return","c","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","c","fY","(","vec3","ft",",","vec3","fu",",","vec3","fv",",","vec3","fw",",","vec3","fx",",","sampler2D","fy",",","sampler2D","fz",",","vec3","fA",",","float","fB",",","vec3","fC",",","vec4","fD",",","mat4","fE",")","{","vec3","fF","=","i","(","fD",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","fG","=","-","fF",".","x",";","float","fH","=","-","fF",".","z",";","vec2","fI","=","vec2","(","fC",".","x","+","fB","*","(","-","1.0","-","fG",")","/","2.0",",","fC",".","z","+","fB","*","(","1.0","-","fH",")","/","2.0",")",";","vec2","fJ","=","fn","(","fx",",","fB",",","fI",")",";","float","fK","=","fB","/","2.0",";","vec2","fL","=","abs","(","fr","(","fJ","-","vec2","(","0.5",")",",","fB",",","vec2","(","0.0",")",")",")",";","float","fM","=","fK","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fL",")",">","fM",")","return","fs","(",")",";","float","fN","=","fB","/","fA",".","z",";","vec2","fO","=","(","fJ","-","vec2","(","0.5",")",")","*","fN","+","vec2","(","0.5",")",";","vec3","fP","=","fF","*","(","fB","/","fA",".","z","-","1.0",")","/","2.0",";","fO",".","x","+=","fP",".","x",";","fO",".","y","-=","fP",".","z",";","vec4","fQ","=","texture2D","(","fz",",","fO",")",";","float","fR","=","fQ",".","r",";","if","(","fR","<","u_scale_threshold",")","return","fs","(",")",";","float","fS","=","fA",".","y","-","fA",".","x",";","float","fT","=","fA",".","y","-","texture2D","(","fy",",","fO",")",".","r","*","fS",";","vec2","fU","=","ft",".","xz","-","fx",".","xz",";","fx",".","xz","=","fr","(","fJ",",","fB",",","fI",")",";","fx",".","y","=","fT",";","ft",".","xz","=","fx",".","xz","+","fU",";","ft",".","y","*=","fR",";","ft",".","y","+=","fT",";","vec3","fV","=","fQ",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["ft","-=","fx",";","mat4","fW","=","_","(","fC",",","fx",",","fE",")",";","c","fX","=","ag","(","ft",",","fx",",","fu",",","fv",",","fw",",","fW",")",";","fX",".","b","=","fx",";","fX",".","f","=","fV",";","return","r","(","fX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","r","(","c","(","ft",",","fx",",","fu",",","fv",",","fw",",","fV",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gd","(","mat4","fZ",",","vec4","f_",")","{","vec2","ga","=","(","fZ","*","u_v_light_matrix","[","3","]",")",".","xy",";","float","gb","=","SHADOW_TEX_RES","/","2.0",";","ga","=","floor","(","ga","*","gb","+","0.5",")","/","gb","-","ga",";","vec4","gc","=","fZ","*","f_",";","gc",".","xy","+=","ga",";","gc","=","u_b_light_matrix","*","gc",";","return","gc",";","}","void","gh","(","vec3","ge",")","{","vec3","gf","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";","vec4","gg","=","u_v_light_matrix","*","vec4","(","ge","+","u_normal_offset","*","gf",",","1.0",")",";","cz","=","gd","(","u_p_light_matrix0",",","gg",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cA","=","gd","(","u_p_light_matrix1",",","gg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cB","=","gd","(","u_p_light_matrix2",",","gg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cC","=","gd","(","u_p_light_matrix3",",","gg",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","gh","(","vec4","gi",")","{","float","gj","=","gi",".","x",";","float","gk","=","gi",".","y",";","float","gl","=","gi",".","w",";","cD",".","x","=","(","gj","+","gl",")","/","2.0",";","cD",".","y","=","(","gk","+","gl",")","/","2.0",";","cD",".","z","=","gl",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","go","(","inout","vec3","gn",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gn","=","max","(","vec3","(","0.0",")",",","gn",")",";","gn","=","pow","(","gn",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gq","(","inout","vec3","gp",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gp","=","max","(","vec3","(","0.0",")",",","gp",")",";","gp","=","pow","(","gp",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gt","(","inout","vec3","gr",",","in","float","gs",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gr","=","gr","*","gs",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","gB","(","inout","vec3","gw",",","in","float","gx",",","in","vec4","gy",")","{","float","gz","=","gy",".","w","*","gx",";","float","gA","=","exp","(","-","gz","*","gz",")",";","gA","=","clamp","(","gA",",","0.0",",","1.0",")",";","gw","=","mix","(","gy",".","rgb",",","gw",",","gA",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gI","(","in","mat4","gC",",","in","vec3","gD",")","{","vec3","gE","=","mix","(","gC","[","0","]",".","rgb",",","gC","[","1","]",".","rgb",",","max","(","sign","(","gD",".","x",")",",","0.0",")",")",";","vec3","gF","=","mix","(","gC","[","2","]",".","rgb",",","gC","[","3","]",".","rgb",",","max","(","sign","(","gD",".","z",")",",","0.0",")",")",";","vec3","gG","=","vec3","(","gC","[","0","]",".","a",",","gC","[","1","]",".","a",",","gC","[","2","]",".","a",")",";","vec3","gH","=","mix","(","gE",",","gF",",","abs","(","gD",".","z",")",")",";","gH","=","mix","(","gH",",","gG",",","abs","(","gD",".","y",")",")",";","return","gH",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gK","(","inout","float","gJ",")","{","gJ","-=","0.5",";","gJ","=","4.0","*","(","gJ","*","gJ","*","gJ",")","+","0.5",";","}","void","ha","(","inout","vec3","gL",",","in","float","gM",",","in","vec3","gN",",","in","float","gO",",","in","vec4","gP",",","in","vec4","gQ",",","in","float","gR",",","in","float","gS",")","{","float","gT","=","gQ",".","w","*","gM",";","float","gU","=","exp","(","-","gT","*","gT",")",";","gU","=","clamp","(","gU",",","0.0",",","1.0",")",";","float","gV","=","max","(","gN",".","y",",","0.0",")",";","gM","=","max","(","gM","-","max","(","gO","/","gV",",","0.0",")",",","0.0",")",";","float","gW","=","gP",".","w","*","gM",";","float","gX","=","1.0","-","gW",";","gX","=","max","(","gX",",","0.0",")",";","gK","(","gX",")",";","gX","+=","max","(","gR","-","0.5",",","0.0",")",";","if","(","gX","<","gU",")","{","vec3","gY","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","gZ","=","gP",".","rgb",";","gO","=","clamp","(","-","gO","*","0.03",",","0.0",",","0.8",")",";","vec3","g_","=","mix","(","gZ",",","gY",",","min","(","gV",",","1.0",")",")",";","g_","=","mix","(","g_",",","vec3","(","0.0",")",",","gO",")","*","gS",";","gL","=","mix","(","g_",",","gL",",","gX",")",";","}","if","(","gX",">=","gU",")","{","gL","=","mix","(","gQ",".","rgb",",","gL",",","gU",")",";","}","}","void","hj","(","inout","vec3","hb",",","in","float","hc",",","in","float","hd",",","in","vec4","he",",","in","float","hf",")","{","float","hg","=","he",".","w","*","hc",";","float","hh","=","1.0","-","hg",";","hh","=","clamp","(","hh",",","0.0",",","1.0",")",";","gK","(","hh",")",";","hd","=","clamp","(","-","hd","*","0.03",",","0.0",",","0.8",")",";","vec3","hi","=","mix","(","he",".","rgb",",","vec3","(","0.0",")",",","hd",")","*","hf",";","hb","=","mix","(","hi",",","hb",",","hh",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","hk","=","0.0",";","float","hl","=","1.0",";","struct","hm","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hu","(","vec3","hn",",","vec3","ho",",","vec3","hp",",","vec4","hq",",","float","hr",")","{","vec3","hs","=","normalize","(","hn","+","ho",")",";","float","ht","=","hq","[","0","]","*","max","(","dot","(","hp",",","hs",")",",","hk",")","+","hq","[","1","]",";","return","pow","(","ht",",","hr",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hF","(","vec3","hv",",","vec3","hw",",","vec3","hx",",","float","hy",")","{","vec3","hz","=","normalize","(","hv","+","hw",")",";","float","hA","=","max","(","dot","(","hx",",","hz",")",",","0.001",")",";","float","hB","=","max","(","dot","(","hx",",","hw",")",",","0.01",")",";","float","hC","=","max","(","dot","(","hx",",","hv",")",",","0.01",")",";","float","hD","=","tan","(","acos","(","hA",")",")",";","float","hE","=","max","(","hy",",","0.001",")",";","return","hC","*","(","hl","/","(","4.0","*","M_PI","*","hE","*","hE",")",")","*","(","exp","(","-","(","hD","*","hD",")","/","(","hE","*","hE",")",")","/","(","sqrt","(","hB","*","hC",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hN","(","vec3","hG",",","vec3","hH",",","vec3","hI",",","float","hJ",",","float","hK",")","{","vec3","hL","=","normalize","(","hG","+","hH",")",";","float","hM","=","acos","(","dot","(","hL",",","hI",")",")",";","if","(","hM","<","hJ",")","return","hl",";","else","if","(","hM",">=","hJ","+","hK","||","hK","==","hk",")","return","hk",";","else","return","hl","-","(","hM","-","hJ",")","/","hK",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","ih","(","float","hO",",","vec3","hP",",","vec3","hQ",",","vec3","hR",",","float","hS",",","inout","float","hT",")","{","if","(","hS",">","hk",")","{","float","hU","=","max","(","dot","(","hP",",","hR",")",",","hk",")",";","float","hV","=","hS","*","hS",";","float","hW","=","hl","-","0.5","*","(","hV","/","(","hV","+","0.33",")",")",";","vec3","hX","=","hQ","-","hO","*","hP",";","vec3","hY","=","hR","-","hU","*","hP",";","if","(","length","(","hX",")","==","hk","||","length","(","hY",")","==","hk","||","abs","(","hO",")",">","hl","||","abs","(","hU",")",">","hl",")","hT","=","hT","*","hW",";","else","{","float","hZ","=","acos","(","hO",")",";","float","h_","=","acos","(","hU",")",";","vec3","ia","=","normalize","(","hX",")",";","vec3","ib","=","normalize","(","hY",")",";","float","ic",",","id",";","ic","=","max","(","hZ",",","h_",")",";","id","=","min","(","hZ",",","h_",")",";","id","*=","0.95",";","float","ie","=","max","(","dot","(","ia",",","ib",")",",","hk",")",";","float","ig","=","0.45","*","(","hV","/","(","hV","+","0.09",")",")",";","hT","=","hT","*","(","hW","+","(","ig","*","ie","*","sin","(","ic",")","*","tan","(","id",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","ip","(","vec3","ii",",","vec3","ij",",","float","ik",",","float","il",",","out","float","im",")","{","float","io",";","if","(","ik","==","hk",")","{","im","=","hl",";","}","else","{","io","=","hl","+","abs","(","dot","(","ij",",","ii",")",")",";","io","=","il","+","(","hl","-","il",")","*","pow","(","io",",","ik",")",";","im","=","clamp","(","io",",","hk",",","hl",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","iX","(","inout","hm","iq",",","vec3","ir",",","vec3","is",",","vec3","it",",","vec3","iu",",","vec3","iv",",","vec2","iw",",","vec2","ix",",","float","iy",",","vec3","iz",",","vec3","iA",",","vec3","iB",",","vec4","iC",",","vec4","iD",",","float","iE",",","vec4","iF",")","{","if","(","iC",".","w","+","iD",".","w","==","hk",")","return",";","vec3","iG","=","vec3","(","hk",")",";","vec3","iH","=","iB","*","iy",";","float","iI","=","iD",".","z",";","if","(","iI","!=","-","hl",")","{","iG","=","iz","-","it",";","float","iJ","=","length","(","iG",")",";","iH","*=","iI","/","(","iI","+","iJ","*","iJ",")",";","iG","=","normalize","(","iG",")",";","float","iK","=","iD",".","x",";","float","iL","=","iD",".","y",";","if","(","iK",">","-","hl",")","{","float","iM","=","dot","(","iG",",","iA",")",";","iM","*=","smoothstep","(","hk",",","hl",",","(","iM","-","iK",")","/","iL",")",";","iH","*=","iM",";","}","}","else","iG","=","iA",";","float","iN","=","hk",";","if","(","iC",".","w","!=","hk",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["ip","(","iu",",","iG",",","ix","[","0","]",",","ix","[","1","]",",","iN",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iO","=","max","(","dot","(","iu",",","iG",")",",","hk",")",";","iN","=","iC","[","0","]","*","iO","+","iC","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["ih","(","iO",",","iu",",","iG",",","iv",",","ix","[","0","]",",","iN",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","float","iP","=","hk",";","if","(","iD",".","w","!=","hk",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["iP","=","hu","(","iG",",","iv",",","iu",",","iC",",","iw","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["iP","=","hF","(","iG",",","iv",",","iu",",","iw","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["iP","=","hN","(","iG",",","iv",",","iu",",","iw","[","0","]",",","iw","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iP","=","hk",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","iG",",","iu",")","*","dot","(","iv",",","iu",")","<","hk",")","{","float","iQ","=","iF",".","x",";","float","iR","=","iF",".","y",";","float","iS","=","iF",".","z",";","float","iT","=","iF",".","w",";","float","iU","=","clamp","(","abs","(","dot","(","iG",",","iu",")",")",",","hk",",","hl",")",";","float","iV","=","clamp","(","dot","(","iv",",","-","iG",")",",","hk",",","hl",")",";","float","iW","=","pow","(","iV",",","iR",")",";","iq",".","a","+=","iE","*","vec4","(","iH","*","iU","*","pow","(","ir",",","vec3","(","iQ",")",")",",","hl",")",";","iq",".","a","+=","iS","*","mix","(","vec4","(","ir",",","hl",")",",","vec4","(","hl",")",",","iT",")","*","iE","*","vec4","(","iH","*","iU","*","vec3","(","iW",")",",","hl",")",";","}","else","{","iq",".","b","+=","iH","*","is","*","iP",";","iq",".","a","+=","vec4","(","iH","*","ir","*","iN",",","iP",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iq",".","b","+=","iH","*","is","*","iP",";","iq",".","a","+=","vec4","(","iH","*","ir","*","iN",",","iP",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hm","jJ","(","vec3","iY",",","vec3","iZ",",","vec3","i_",",","vec3","ja",",","vec3","jb",",","vec3","jc",",","vec3","jd",",","vec2","je",",","vec2","jf",",","float","jg",",","vec3","jh","[","NUM_LIGHTS","]",",","vec3","ji","[","NUM_LIGHTS","]",",","vec3","jj","[","NUM_LIGHTS","]",",","vec4","jk","[","NUM_LIGHTS","]",",","vec4","jl","[","NUM_LIGHTS","]",",","float","jm",",","vec4","jn",")","{","hm","jo",";","jo",".","a","=","vec4","(","iY","+","i_","*","iZ",",","hk",")",";","jo",".","b","=","vec3","(","hk",")",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"textline",tokens:["iX","(","jo",",","i_",",","ja",",","jb",",","jc",",","jd",",","je",",","jf",",","jg",",","jh","[","0","]",",","ji","[","0","]",",","jj","[","0","]",",","jk","[","0","]",",","jl","[","0","]",",","jm",",","jn",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["iX","(","jo",",","i_",",","ja",",","jb",",","jc",",","jd",",","je",",","jf",",","jg",",","jh","[","1","]",",","ji","[","1","]",",","jj","[","1","]",",","jk","[","1","]",",","jl","[","1","]",",","jm",",","jn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["iX","(","jo",",","i_",",","ja",",","jb",",","jc",",","jd",",","je",",","jf",",","jg",",","jh","[","2","]",",","ji","[","2","]",",","jj","[","2","]",",","jk","[","2","]",",","jl","[","2","]",",","jm",",","jn",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["iX","(","jo",",","i_",",","ja",",","jb",",","jc",",","jd",",","je",",","jf",",","jg",",","jh","[","3","]",",","ji","[","3","]",",","jj","[","3","]",",","jk","[","3","]",",","jl","[","3","]",",","jm",",","jn",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","jp","=","0",";","jp","<","NUM_LIGHTS",";","jp","++",")","{","vec4","jq","=","jk","[","jp","]",";","vec4","jr","=","jl","[","jp","]",";","if","(","jq",".","w","+","jr",".","w","!=","hk",")","{","vec3","js","=","vec3","(","hk",")",";","vec3","jt","=","jj","[","jp","]",";","jt","*=","jg",";","float","ju","=","jr",".","z",";","if","(","ju","!=","-","hl",")","{","js","=","jh","[","jp","]","-","jb",";","float","jv","=","length","(","js",")",";","jt","*=","ju","/","(","ju","+","jv","*","jv",")",";","js","=","normalize","(","js",")",";","float","jw","=","jr",".","x",";","float","jx","=","jr",".","y",";","if","(","jw",">","-","hl",")","{","float","jy","=","dot","(","js",",","ji","[","jp","]",")",";","jy","*=","smoothstep","(","hk",",","hl",",","(","jy","-","jw",")","/","jx",")",";","jt","*=","jy",";","}","}","else","js","=","ji","[","jp","]",";","float","jz","=","hk",";","if","(","jq",".","w","!=","hk",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["ip","(","jc",",","js",",","jf","[","0","]",",","jf","[","1","]",",","jz",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jA","=","max","(","dot","(","jc",",","js",")",",","hk",")",";","jz","=","jq","[","0","]","*","jA","+","jq","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["ih","(","jA",",","jc",",","js",",","jd",",","jf","[","0","]",",","jz",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","float","jB","=","hk",";","if","(","jr",".","w","!=","hk",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["jB","=","hu","(","js",",","jd",",","jc",",","jq",",","je","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["jB","=","hF","(","js",",","jd",",","jc",",","je","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["jB","=","hN","(","js",",","jd",",","jc",",","je","[","0","]",",","je","[","1","]",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","js",",","jc",")","*","dot","(","jd",",","jc",")","<","hk",")","{","float","jC","=","jn",".","x",";","float","jD","=","jn",".","y",";","float","jE","=","jn",".","z",";","float","jF","=","jn",".","w",";","float","jG","=","clamp","(","abs","(","dot","(","js",",","jc",")",")",",","hk",",","hl",")",";","float","jH","=","clamp","(","dot","(","jd",",","-","js",")",",","hk",",","hl",")",";","float","jI","=","pow","(","jH",",","jD",")",";","jo",".","a","+=","jm","*","vec4","(","jt","*","jG","*","pow","(","i_",",","vec3","(","jC",")",")",",","hl",")",";","jo",".","a","+=","jE","*","mix","(","vec4","(","i_",",","hl",")",",","vec4","(","hl",")",",","jF",")","*","jm","*","vec4","(","jt","*","jG","*","vec3","(","jI",")",",","hl",")",";","}","else","{","jo",".","b","+=","jt","*","ja","*","jB",";","jo",".","a","+=","vec4","(","jt","*","i_","*","jz",",","jB",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jo",".","b","+=","jt","*","ja","*","jB",";","jo",".","a","+=","vec4","(","jt","*","i_","*","jz",",","jB",")",";"]}]}}]},{type:"textline",tokens:["}","}"]}]}}]},{type:"textline",tokens:["return","jo",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hm","jO","(","vec3","jK",",","vec3","jL",",","vec3","jM",")","{","hm","jN",";","jN",".","a","=","vec4","(","jK","+","jM","*","jL",",","hk",")",";","jN",".","b","=","vec3","(","hk",")",";","return","jN",";","}"]}]}}]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","ko","(","inout","vec3","jP",",","float","jQ",",","float","jR",",","float","jS",",","vec3","jT",",","vec3","jU",",","vec3","jV",",","vec4","jW",",","vec3","jX",",","float","jY",")","{","if","(","jY",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","jZ","=","jW",";","vec3","j_","=","jX","+","jT",";","j_",".","xz","=","10.0","*","sin","(","0.1","*","j_",".","xz",")",";","vec3","ka","=","j_","+","2.0","*","cross","(","-","jZ",".","xyz",",","cross","(","-","jZ",".","xyz",",","j_",")","+","jZ",".","w","*","j_",")",";","vec2","kb","=","ka",".","xz",";","vec3","kc","=","jU",";","float","kd","=","max","(","dot","(","jT",",","kc",")",",","0.0",")",";","float","ke","=","0.025",";","kb",".","s","+=","0.5","*","sin","(","dot","(","jX","+","jR",",","vec3","(","1.0",")",")",")",";","kb",".","t","+=","0.7","*","(","-","sin","(","dot","(","jX","-","jR",",","vec3","(","-","0.7",")",")",")",")",";","kb",".","st","+=","0.23","*","cos","(","4.0","*","jQ","-","CAUST_SPEED",".","x","*","jR",")",";","kb",".","st","+=","3.0","*","sin","(","jQ","-","0.3","*","CAUST_SPEED",".","y","*","jR",")",";","float","kf","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","jQ",",","0.0",")",")",";","mat3","kg","=","dm","(","(","kb","/","kf",")",",","ke",")",";","float","kh","=","(","kg","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","ki","=","(","kg","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","kj","=","(","kg","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","kk","=","CAUST_BRIGHT","*","vec3","(","kh",",","ki",",","kj",")",";","float","kl","=","jS","*","kd",";","float","km","=","max","(","sign","(","jQ",")",",","0.0",")",";","kl","=","min","(","kl","+","0.5","*","sign","(","-","jT",".","y",")","*","km",",","1.0",")",";","kl","*=","1.0","-","km","*","(","0.1","*","jQ",")",";","kk","*=","kl",";","kk","*=","kk",";","float","kn","=","min","(","-","jQ","+","10.0",",","1.0",")",";","jP","+=","max","(","(","2.0","*","jV","*","kk",")","*","kn",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","kC","(","in","vec3","kv",",","in","vec3","kw",",","in","float","kx",",","in","float","ky",")","{","vec3","kz","=","normalize","(","kw","+","kv",")",";","float","kA","=","1.0","-","dot","(","kv",",","kz",")",";","float","kB","=","ky","+","(","1.0","-","ky",")","*","pow","(","kA",",","kx",")",";","return","kB",";","}","void","kR","(","inout","vec3","kD",",","in","vec3","kE",",","in","vec3","kF",",","in","float","kG",",","in","float","kH",",","in","float","kI",")","{","vec3","kJ","=","reflect","(","-","kE",",","kF",")",";","float","kK","=","1.0",";","if","(","kG","!=","0.0",")","kK","=","kC","(","kE",",","kJ",",","kG",",","kH",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kL","=","u_refl_plane",".","xyz","*","dot","(","kF",",","u_refl_plane",".","xyz",")",";","vec3","kM","=","kF","-","kL",";","vec2","kN","=","(","u_view_matrix_frag","*","vec4","(","kM",",","0.0",")",")",".","xy",";","vec2","kO","=","cD",".","xy","/","cD",".","z",";","kO","+=","kN","*","REFL_BUMP",";","vec3","kP","=","texture2D","(","u_reflectmap",",","kO",")",".","rgb",";","go","(","kP",".","rgb",")",";","kD","=","mix","(","kD",",","kP",",","kI","*","kK",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kQ","=","textureCube","(","u_mirrormap",",","kJ",")",".","xyz",";","go","(","kQ",".","rgb",")",";","kD","=","mix","(","kD",",","kQ",",","u_mirror_factor","*","kK",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","kX","(","in","float","kS",",","inout","vec2","kT",",","in","vec2","kU",")","{","vec4","kV","=","texture2D","(","u_scene_depth",",","kT",")",";","float","kW","=","cp","(","kV",")",";","if","(","kW","<","ku",")","{","kT","=","kU",";","return","kS",";","}","else","{","return","kW",";","}","return","kS",";","}","vec3","le","(","in","vec3","kY",",","in","vec2","kZ",")","{","vec2","k_","=","kY",".","xy","/","kY",".","z",";","vec2","la","=","k_","+","kZ",";","vec4","lb","=","texture2DProj","(","u_scene_depth",",","kY",")",";","float","lc","=","cp","(","lb",")",";","kX","(","lc",",","la",",","k_",")",";","vec3","ld","=","texture2D","(","u_refractmap",",","la",")",".","rgb",";","go","(","ld",")",";","return","ld",";","}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","mf","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mm","(","inout","float","mg",",","float","mh",",","vec2","mi",",","vec2","mj",")","{","float","mk","=","mj",".","x","-","mi",".","x",";","float","ml","=","(","mh","-","mi",".","x",")","/","mk",";","mg","=","mix","(","mg",",","mj",".","y",",","clamp","(","ml",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mt","(","inout","vec3","mn",",","float","mo",",","vec4","mp",",","vec4","mq",")","{","float","mr","=","mq",".","x","-","mp",".","x",";","float","ms","=","(","mo","-","mp",".","x",")","/","mr",";","mn","=","mix","(","mn",",","mq",".","yzw",",","clamp","(","ms",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","mA","(","float","mu",",","float","mv",",","vec2","mw","[","SIZE_RAMP_LENGTH","]",")","{","float","mx","=","mu","/","mv",";","float","my","=","mw","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mm","(","my",",","mx",",","mw","[","0","]",",","mw","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mm","(","my",",","mx",",","mw","[","1","]",",","mw","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mm","(","my",",","mx",",","mw","[","2","]",",","mw","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mz","=","1",";","mz","<","SIZE_RAMP_LENGTH",";","mz","++",")","mm","(","my",",","mx",",","mw","[","mz","-","1","]",",","mw","[","mz","]",")",";"]}]}}]},{type:"textline",tokens:["return","my",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mH","(","float","mB",",","float","mC",",","vec4","mD","[","COLOR_RAMP_LENGTH","]",")","{","float","mE","=","mB","/","mC",";","vec3","mF","=","mD","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mt","(","mF",",","mE",",","mD","[","0","]",",","mD","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mt","(","mF",",","mE",",","mD","[","1","]",",","mD","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mt","(","mF",",","mE",",","mD","[","2","]",",","mD","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mG","=","1",";","mG","<","COLOR_RAMP_LENGTH",";","mG","++",")","mt","(","mF",",","mE",",","mD","[","mG","-","1","]",",","mD","[","mG","]",")",";"]}]}}]},{type:"textline",tokens:["return","mF",";","}"]}]}}]},{type:"textline",tokens:["float","mQ","(","float","mI",",","float","mJ",",","float","mK",",","float","mL",")","{","float","mM","=","max","(","0.01",",","min","(","mJ",",","mK",")",")",";","float","mN","=","max","(","0.01",",","min","(","mJ",",","mL",")",")",";","float","mO","=","mJ","-","mN",";","float","mP","=","clamp","(","mI","/","mM",",","0.0",",","1.0",")","-","step","(","mO",",","mI",")","*","(","mI","-","mO",")","/","mN",";","return","mP",";","}","mf","mW","(",")","{","mf","mR",";","float","mS",";","if","(","u_p_cyclic","==","1",")","{","mS","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","mS","<","0.0",")","mS","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","mS","=","u_p_time","-","a_p_delay",";","}","if","(","mS","<","0.0","||","mS",">=","a_p_lifetime",")","{","mR",".","a","=","0.0001",";","mR",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","mS","<","0.0","||","mS",">=","a_p_lifetime",")",")","{","vec3","mT","=","a_position",";","vec3","mU","=","a_normal",";","mT","+=","u_p_nfactor","*","mS","*","mU",";","mT","+=","a_p_vels",".","xyz","*","mS",";","mT",".","y","-=","u_p_gravity","*","mS","*","mS","/","2.0",";","float","mV","=","max","(","u_p_mass",",","EPSILON",")",";","mT","+=","(","u_p_wind","/","mV",")","*","mS","*","mS","/","2.0",";","mR",".","b","=","mT",";","mR",".","e","=","a_p_vels",".","w","*","mS",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mR",".","a","=","mA","(","mS",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mR",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mR",".","d","=","mH","(","mS",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mR",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["mR",".","c","=","mQ","(","mS",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","mR",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ni","(","in","sampler2D","nb",",","in","vec2","nc",",","in","vec2","nd",")","{","float","ne","=","texture2D","(","nb",",","nc",")",".","r",";","float","nf","=","nd",".","x",";","float","ng","=","nd",".","y",";","float","nh","=","2.0","*","nf","/","(","nf","+","ng","-","(","2.0","*","ne","-","1.0",")","*","(","ng","-","nf",")",")",";","return","nh",";","}"]}]}}