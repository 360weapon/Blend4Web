b4w.module["shader_texts"] = function(exports, require) {exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_glow_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_GLOW"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_glow_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","cl","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cl","=","mix","(","cl",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cm","=","vec3","(","0.0",")",";","vec3","cn","=","vec3","(","0.0",")",";","vec3","co","=","vec3","(","0.0",")",";","bt","(","cl",",","cm",",","cn",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cp","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cp","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cq","=","(","u_model_matrix","*","vec4","(","cp",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","cr","=","ag","(","u_camera_eye",",","cq",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","cr","=","aa","(","u_camera_eye",",","cq",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cs","=","(","u_model_matrix","*","vec4","(","cp",",","1.0",")",")",".","xyz",";","cr","=","cr","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","cs",")",";"]}]}}]},{type:"textline",tokens:["d","ct","=","an","(","cl","-","cp",",","cp",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","cr",")",";","ct",".","b","=","cq",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","ct","=","an","(","cl",",","cp",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","cu","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","cu","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ck","(","ct",".","a",",","ct",".","b",",","cu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aq","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ct",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";"]}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["float","ft","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ft","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","ft","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cs","(","cF",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fn","(","cL",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","gw","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["gw","=","mix","(","gw",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gx","=","vec3","(","0.0",")",";","vec3","gy","=","vec3","(","0.0",")",";","vec3","gz","=","vec3","(","0.0",")",";","bt","(","gw",",","gx",",","gy",",","gz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gA","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","gB","=","gh","(","gw",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gA",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gC","=","(","u_model_matrix","*","vec4","(","gA",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","HAIR_BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gD","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gD","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gE","=","ag","(","u_camera_eye",",","gC",",","gD",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gE","=","aa","(","u_camera_eye",",","gC",",","gD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gF","=","(","u_model_matrix","*","vec4","(","gA",",","1.0",")",")",".","xyz",";","gE","=","gE","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gF",")",";"]}]}}]},{type:"textline",tokens:["d","gB","=","an","(","gw","-","gA",",","gA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gE",")",";","gB",".","b","=","gC",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gB","=","an","(","gw",",","gA",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gG","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","gG","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["ck","(","gB",".","a",",","gB",".","b",",","gG",")",";"]}]}}]},{type:"textline",tokens:["vec4","gH","=","u_view_matrix","*","vec4","(","gB",".","a",",","1.0",")",";","vec4","gI","=","u_proj_matrix","*","gH",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["gI",".","xy","+=","u_subpixel_jitter","*","gI",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aq","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","gB",".","a",")",";","cL","=","gH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["cF","=","-","gH",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","gJ","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","float","gK","=","SHADOW_TEX_RES","/","2.0",";","gJ","=","floor","(","gJ","*","gK","+","0.5",")","/","gK","-","gJ",";","gI",".","xy","+=","gJ",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gI",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gw",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gw",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","gw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","gw",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","gw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","gw",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","gw",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gx","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","mat4","gy","=","aa","(","u_camera_eye",",","gx",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["gy","=","gy","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["d","gz","=","an","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","gy",")",";","gz",".","b","=","gx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gz","=","an","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gA","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gz",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gw","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gw","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gw","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","gA",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","gE",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gF",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gG","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gG","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","gI","(","float","gH",")","{","return","gH","-","floor","(","gH","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gR","(","inout","float","gJ",",","in","float","gK","[","gG","]",",","in","float","gL",")","{","for","(","int","gM","=","0",";","gM","<","NUM_RINGS",";","gM","++",")","{","float","gN","=","40.0","*","gK","[","gM","]",";","float","gO","=","300.0","*","(","gI","(","gN",")","-","0.005",")",";","float","gP","=","gN",";","float","gQ","=","abs","(","gP","*","(","u_halo_size","*","gO","-","gL",")",")",";","gJ","+=","1.0","-","min","(","gQ",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","g_","(","inout","float","gS",",","in","float","gT","[","gG","]",",","in","float","gU",")","{","for","(","int","gV","=","0",";","gV","<","NUM_LINES",";","gV","++",")","{","float","gW","=","gT","[","gV","]",";","float","gX","=","gW",";","float","gY","=","1000.0","*","(","gI","(","gW",")","-","0.005",")",";","float","gZ","=","20.0","*","abs","(","gX","*","a",".","x","+","gY","*","a",".","y",")",";","gS","+=","1.0","-","min","(","gZ",",","1.0",")",";","}","gS","*=","gU",";","}"]}]}}]},{type:"textline",tokens:["void","hg","(","inout","float","ha",",","in","vec2","hb",")","{","float","hc",",","hd",";","hd","=","atan","(","hb",".","y",",","hb",".","x",")",";","hd","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","float","he","=","cos","(","hd",")",";","float","hf","=","sin","(","hd",")",";","hd","=","(","he","*","hb",".","x","+","hf","*","hb",".","y",")","*","(","he","*","hb",".","y","-","hf","*","hb",".","x",")",";","hc","=","abs","(","hd",")",";","if","(","hc","<","1.0",")","{","hc","=","(","0.01","*","u_halo_size",")","/","(","hc",")",";","ha","*=","sqrt","(","min","(","hc",",","1.0",")",")",";","}","}","void","main","(",")","{","float","hh","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","float","hi","=","sqrt","(","hh",")",";","hh","=","max","(","1.0","-","hh",",","0.0",")",";","hh","=","pow","(","hh",",","u_halo_hardness",")",";","float","hj","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hk","[","gG","]",";","for","(","int","hl","=","0",";","hl","<","gG",";","hl","++",")","{","hk","[","hl","]","=","fract","(","gF","/","(","float","(","hl",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["float","hm","=","0.0",";","gR","(","hm",",","hk",",","hi",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","hn","=","0.0",";","g_","(","hn",",","hk",",","hh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["hg","(","hh",",","a",")",";"]}]}}]},{type:"textline",tokens:["hh","*=","hj",";","vec3","ho","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["hm","*=","hh",";","ho","+=","u_halo_rings_color","*","hm",";","hh","+=","hm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["hn","*=","hj",";","ho","+=","u_halo_lines_color","*","hn",";","hh","+=","hn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["hh","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","hp","=","u_halo_stars_blend","*","(","gE",".","y","-","u_halo_stars_height",")",";","hh","*=","clamp","(","hp",",","0.0",",","1.0",")",";","hh","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gA","(","ho",")",";","gD","(","ho",",","hh",")",";","gl_FragColor","=","vec4","(","ho",",","hh",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gF",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","gE",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","gG","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gF","=","fract","(","gG",".","x","+","gG",".","y","+","gG",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","gH","=","z","(","gG",",","u_view_matrix",")",";","mat4","gI","=","u_view_matrix",";","gI","[","3","]","[","0","]","=","0.0",";","gI","[","3","]","[","1","]","=","0.0",";","gI","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","gH","=","z","(","gG",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["vec4","gJ","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","vec4","gK","=","gH","*","gJ",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gL","=","u_proj_matrix","*","gI","*","gK",";","gL",".","z","=","0.99999","*","gL",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gE","=","gK",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","gL","=","u_proj_matrix","*","u_view_matrix","*","gK",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gL",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gG","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gG",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","int","u_shadow_lamp_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kE",";","varying","vec3","kF",";","varying","vec3","kG",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lu","=","kF",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lv","=","a",";"]}]}}]},{type:"textline",tokens:["vec3","lw","=","kG",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","lw","=","lw",";","else","lw","=","-","lw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lx","=","cross","(","lw",",","kH",".","xyz",")","*","kH",".","w",";","mat3","ly","=","mat3","(","kH",".","xyz",",","lx",",","lw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","lz","=","length","(","cL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lA","=","normalize","(","u_view_matrix_frag","*","vec4","(","kG",",","0.0",")",")",".","st",";","lA","=","lA","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","lz","<","PARALLAX_LOD_DIST",")","{","float","lB","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","lz",")",",","0.0",",","1.0",")",";","float","lC","=","u_parallax_scale","*","lB",";","vec3","lD","=","normalize","(","kE","*","ly",")",";","float","lE","=","1.0","/","PARALLAX_STEPS",";","vec2","lF","=","lD",".","xy","*","lC","/","(","PARALLAX_STEPS","*","lD",".","z",")",";","float","lG","=","1.0",";","float","lH",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lI","=","lA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","lI","=","lv",";"]}]}}]},{type:"textline",tokens:["lH","=","texture2D","(","u_normalmap0",",","lI",")",".","a",";","for","(","float","lJ","=","1.0",";","lJ","<=","PARALLAX_STEPS",";","lJ","++",")","{","if","(","lH","<","lG",")","{","lG","-=","lE",";","lI","-=","lF",";","lH","=","texture2D","(","u_normalmap0",",","lI",")",".","a",";","}","}","vec2","lK","=","lI","+","lF",";","float","lL","=","texture2D","(","u_normalmap0",",","lK",")",".","a","-","(","lG","+","lE",")",";","float","lM","=","lH","-","lG",";","float","lN","=","lM","/","(","lM","-","lL",")",";","lI","=","lN","*","lK","+","(","1.0","-","lN",")","*","lI",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lv","+=","lI","-","lA",";"]}]}}]},{type:"textline",tokens:["lA","=","lI",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lA","+=","lI","-","lv",";"]}]}}]},{type:"textline",tokens:["lv","=","lI",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lO",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lO","=","texture2D","(","u_normalmap0",",","lA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lO","=","texture2D","(","u_normalmap0",",","lv",")",";"]}]}}]},{type:"textline",tokens:["vec3","lP","=","lO",".","rgb","-","0.5",";","lP","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","lP",",","u_normal_factor",")",";","vec3","lQ","=","ly","*","lP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lQ","=","lw",";"]}]}}]},{type:"textline",tokens:["lQ","=","normalize","(","lQ",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["lA","=","normalize","(","u_view_matrix_frag","*","vec4","(","lQ",",","0.0",")",")",".","st",";","lA","=","lA","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["vec3","lR","=","normalize","(","kE",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lS","=","kI",";","gy","(","lS",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lT","=","vec4","(","lS",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lT","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["float","lU","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lV","=","texture2D","(","u_colormap0",",","lA",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lV","=","texture2D","(","u_colormap0",",","lv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["gy","(","lV",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lW",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["lW","=","texture2D","(","u_colormap1",",","lA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lW","=","texture2D","(","u_colormap1",",","lv",")",";"]}]}}]},{type:"textline",tokens:["gy","(","lW",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lX","=","texture2D","(","u_stencil0",",","lA",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","lX","=","texture2D","(","u_stencil0",",","lv",")",";"]}]}}]},{type:"textline",tokens:["lV","=","mix","(","lV",",","lW",",","lX",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["lT",".","rgb","=","mix","(","lT",".","rgb",",","lV",".","rgb",",","u_diffuse_color_factor",")",";","float","lY","=","u_alpha_factor","*","lV",".","a",";","lY","+=","(","1.0","-","step","(","0.0",",","lY",")",")",";","lT",".","a","=","mix","(","lY",",","1.0",",","u_diffuse_color",".","a",")",";","lU","=","lV",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["lT",".","rgb","*=","mix","(","vec3","(","1.0",")",",","lV",".","rgb",",","u_diffuse_color_factor",")",";","lT",".","a","=","lV",".","a",";","lU","=","lV",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["vec3","lZ","=","u_diffuse_intensity","*","lT",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","l_","=","lZ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ma","=","0.5","*","lQ",".","y","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mb","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","lQ",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mb","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","ma",")",";"]}]}}]},{type:"textline",tokens:["vec3","mc","=","u_ambient","*","mb",";","float","md","=","fs","(","lZ",")",";","vec3","me","=","u_emit","*","lT",".","rgb",";","vec3","mf","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","vec3","(","lU",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","texture2D","(","u_specmap0",",","lA",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","texture2D","(","u_specmap0",",","lv",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["gy","(","mg",".","rgb",")",";","mf","=","mix","(","mf",",","mg",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["float","mh","=","u_specular_params","[","0","]",";","vec2","mi","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","mj","=","mh","*","mf",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["hw","mk","=","kc","(","me",",","mc",",","lZ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hw","mk","=","jY","(","me",",","mc",",","lZ",",","mj",",","kF",",","lQ",",","lR",",","mi",",","u_diffuse_params",",","md",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",",","u_shadow_lamp_id",")",";"]}]}}]},{type:"textline",tokens:["vec3","l_","=","mk",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","ml","=","u_reflect_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ml","=","0.0",";"]}]}}]},{type:"textline",tokens:["lf","(","l_",",","lR",",","lQ",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","ml",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["l_","+=","mk",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["l_","=","max","(","l_","-","sqrt","(","0.01","*","-","min","(","lu",",","0.0",")",")",",","0.5","*","l_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kD","(","l_",",","lu",",","u_time",",","md",",","lQ",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","kF",",","lz",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["float","mm","=","lT",".","a",";","if","(","mm","<=","0.5",")","discard",";","mm","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mm","=","lT",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["mm","+=","mk",".","a",".","a","*","mj",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","mm","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["l_","=","mix","(","lt","(","cK",",","lQ",".","xz","*","u_refr_bump",")",",","l_",",","mm",")",";","mm","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","mn","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mo","=","gS","(","u_cube_fog",",","lR",")",";","vec4","mp","=","vec4","(","mo",",","u_fog_color_density",".","a",")",";","gy","(","mp",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","mp","=","u_fog_color_density",";","mp",".","rgb","*=","mn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["hk","(","l_",",","lz",",","lR",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","mp",",","lu",",","mn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gL","(","l_",",","lz",",","mp",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["l_","=","vec3","(","dT",".","a",")",";"]}]}}]},{type:"textline",tokens:["gA","(","l_",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","l_",",","mm",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","l_",",","mm",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kE",";","varying","vec3","kF",";","varying","vec3","kG",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kJ",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec3","lu","=","a_position",";","vec3","lv","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lw","=","vec3","(","a_tangent",")",";","vec3","lx","=","a_tangent","[","3","]","*","cross","(","lv",",","lw",")",";"]}]}},{type:"elif",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ly","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","lz","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","vec3","lA","=","ly","-","u_camera_eye",";","vec3","lx","=","cross","(","lA",",","lz",")",";","vec3","lw","=","cross","(","lz",",","lx",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lw","=","vec3","(","0.0",")",";","vec3","lx","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["lu","=","mix","(","lu",",","a_position_next",",","u_va_frame_factor",")",";","lv","=","mix","(","lv",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lB","=","vec3","(","a_tangent",")",";","vec3","lC","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","lB",")",";","lw","=","mix","(","lw",",","lB",",","u_va_frame_factor",")",";","lx","=","mix","(","lx",",","lC",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bt","(","lu",",","lw",",","lx",",","lv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lD","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lD","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","lE","=","gh","(","lu",",","lw",",","lx",",","lv",",","lD",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lF","=","(","u_model_matrix","*","vec4","(","lD",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","lG","=","ag","(","u_camera_eye",",","lF",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","lG","=","aa","(","u_camera_eye",",","lF",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lH","=","(","u_model_matrix","*","vec4","(","lD",",","1.0",")",")",".","xyz",";","lG","=","lG","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lH",")",";"]}]}}]},{type:"textline",tokens:["d","lE","=","an","(","lu","-","lD",",","lD",",","lw",",","lx",",","lv",",","lG",")",";","lE",".","b","=","lF",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","lE","=","an","(","lu",",","lD",",","lw",",","lx",",","lv",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["float","lI","=","(","dot","(","cross","(","lE",".","e",",","lE",".","c",")",",","lE",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","kH","=","vec4","(","lE",".","c",",","lI",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ck","(","lE",".","a",",","lE",".","b",",","lv",")",";"]}]}}]},{type:"textline",tokens:["kF","=","lE",".","a",";","kG","=","lE",".","e",";","kE","=","u_camera_eye","-","lE",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","aq","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","lE",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","a_color",";"]}]}}]},{type:"textline",tokens:["vec4","lJ","=","u_view_matrix","*","vec4","(","lE",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cL","=","lJ",";"]}]}}]},{type:"textline",tokens:["vec4","lK","=","u_proj_matrix","*","lJ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["lK",".","xy","+=","u_subpixel_jitter","*","lK",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","lK",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","lE",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","lL","=","lK",".","x",";","float","lM","=","lK",".","y",";","float","lN","=","lK",".","w",";","cK",".","x","=","(","lL","+","lN",")","/","2.0",";","cK",".","y","=","(","lM","+","lN",")","/","2.0",";","cK",".","z","=","lN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","-","lJ",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lK",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_ANIM_VALUES",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";","uniform","int","u_shadow_lamp_id",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_ANIM_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_anim_values","[","NUM_ANIM_VALUES","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kF",";","varying","vec4","cL",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kJ",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","lu","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","lv","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","lz","(","in","vec3","lw",",","in","float","lx",")","{","vec3","ly","=","lu",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ly","=","lt","(","cK",",","lw",".","xz","*","lx",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ly","=","texture2D","(","u_refractmap",",","cK",".","xy","/","cK",".","z",")",".","rgb",";","gy","(","ly",")",";"]}]}}]},{type:"textline",tokens:["return","ly",";","}"]}]}}]},{type:"textline",tokens:["vec3","lC","(","float","lA",",","vec3","lB",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","lB",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","mix","(","u_horizon_color",",","u_zenith_color",",","lA",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lJ","(","vec3","lD",")","{","vec4","lE","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","vec4","lF","=","mix","(","vec4","(","lD",".","bg",",","lE",".","wz",")",",","vec4","(","lD",".","gb",",","lE",".","xy",")",",","step","(","lD",".","b",",","lD",".","g",")",")",";","vec4","lG","=","mix","(","vec4","(","lF",".","xyw",",","lD",".","r",")",",","vec4","(","lD",".","r",",","lF",".","yzx",")",",","step","(","lF",".","x",",","lD",".","r",")",")",";","float","lH","=","lG",".","x","-","min","(","lG",".","w",",","lG",".","y",")",";","float","lI","=","1.0e-10",";","return","vec3","(","abs","(","lG",".","z","+","(","lG",".","w","-","lG",".","y",")","/","(","6.0","*","lH","+","lI",")",")",",","lH","/","(","lG",".","x","+","lI",")",",","lG",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lN","(","vec3","lK",")","{","vec4","lL","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","vec3","lM","=","abs","(","fract","(","vec3","(","lK",".","r",",","lK",".","r",",","lK",".","r",")","+","lL",".","xyz",")","*","6.0","-","lL",".","www",")",";","return","lK",".","b","*","mix","(","lL",".","xxx",",","clamp","(","lM","-","lL",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","lK",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lP","(","vec2","lO",")","{","return","vec3","(","lO","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_TEXTURE_COLOR2","||","USE_NODE_TEXTURE_NORMAL2","||","USE_NODE_TEXTURE_COLOR3","||","USE_NODE_TEXTURE_NORMAL3","||","USE_NODE_TEXTURE_NORMAL4","||","USE_NODE_TEXTURE_COLOR4","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lR","(","vec3","lQ",")","{","return","vec2","(","lQ",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"mz",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"mA",qualifier:["float"],is_optional:true},{type:"node_out",name:"mB",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mz"],statements:[{type:"textline",tokens:["mz","=","normalize","(","mp",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mA"],statements:[{type:"textline",tokens:["mA","=","abs","(","mp",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mB"],statements:[{type:"textline",tokens:["mB","=","length","(","mp",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"mC",qualifier:["float"],is_optional:false},{type:"node_in",name:"mD",qualifier:["float"],is_optional:false},{type:"node_in",name:"mE",qualifier:["float"],is_optional:false},{type:"node_out",name:"mF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mF","=","vec3","(","mC",",","mD",",","mE",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"mG",qualifier:["float"],is_optional:false},{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["float"],is_optional:false},{type:"node_out",name:"mJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mJ","=","lN","(","vec3","(","mG",",","mH",",","mI",")",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"mK",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"lS",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mK","=","lP","(","lS",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"mL",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"lT",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["mL","=","lT",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"mM",qualifier:["float"],is_optional:false},{type:"node_param",name:"lU",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["mM","=","lU",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"mN",qualifier:["float"],is_optional:false},{type:"node_out",name:"mO",qualifier:["float"],is_optional:false},{type:"node_param",name:"lV",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["mN","=","lV","[","0","]",";","mO","=","lV","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"mP",qualifier:["float"],is_optional:false},{type:"node_out",name:"mQ",qualifier:["float"],is_optional:false},{type:"node_out",name:"mR",qualifier:["float"],is_optional:false},{type:"node_param",name:"lW",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["mP","=","lW","[","0","]",";","mQ","=","lW","[","1","]",";","mR","=","lW","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"mS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mS","=","mi",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"mT",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mT","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"mU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mU","=","mn",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"mV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mV","=","vec3","(","mo",".","r",",","-","mo",".","b",",","mo",".","g",")",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"mW",qualifier:["float"],is_optional:false},{type:"node_in",name:"mX",qualifier:["float"],is_optional:false},{type:"node_in",name:"mY",qualifier:["float"],is_optional:false},{type:"node_in",name:"mZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"m_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"na",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","vec3","nb","=","lJ","(","m_",")",";","nb","[","0","]","+=","(","mW","-","0.5",")",";","if","(","nb","[","0","]",">","UNITY_VALUE_NODES",")","nb","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","nb","[","0","]","<","ZERO_VALUE_NODES",")","nb","[","0","]","+=","UNITY_VALUE_NODES",";","nb","*=","vec3","(","UNITY_VALUE_NODES",",","mX",",","mY",")",";","nb","=","mix","(","lv",",","mix","(","lu",",","nb",",","step","(","lu",",","nb",")",")",",","step","(","nb",",","lv",")",")",";","na","=","mix","(","m_",",","lN","(","nb",")",",","mZ",")",";","}"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"nc",qualifier:["float"],is_optional:false},{type:"node_in",name:"nd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ne",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ne","=","mix","(","nd",",","lv","-","nd",",","nc",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"nf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ng",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nh",qualifier:["float"],is_optional:false},{type:"node_out",name:"ni",qualifier:["float"],is_optional:false},{type:"node_param",name:"lX",qualifier:["const","float"]}],statements:[{type:"textline",tokens:["{","const","int","nj","=","int","(","lX",")",";","nf","=","u_lamp_light_color_intensities","[","nj","]",";","vec4","nk","=","u_lamp_light_factors","[","nj","]",";","vec3","nl","=","u_lamp_light_directions","[","nj","]",";","vec3","nm","=","u_lamp_light_positions","[","nj","]",";","float","nn","=","nk",".","z",";","if","(","nn","!=","-","UNITY_VALUE_NODES",")","{","ng","=","nm","-","kF",";","nh","=","length","(","ng",")",";","ng","=","normalize","(","ng",")",";","ni","=","nn","/","(","nn","+","nh","*","nh",")",";","float","no","=","nk",".","x",";","float","np","=","nk",".","y",";","if","(","no",">","-","UNITY_VALUE_NODES",")","{","float","nq","=","dot","(","ng",",","nl",")",";","nq","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","nq","-","no",")","/","np",")",";","ni","*=","nq",";","}","}","else","{","ng","=","nl",";","nh","=","length","(","nm","-","kF",")",";","ni","=","UNITY_VALUE_NODES",";","}","}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"nr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ns",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"nt",qualifier:["float"],is_optional:true},{type:"node_param",name:"lY",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ns"],statements:[{type:"textline",tokens:["ns","=","lY",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_nt"],statements:[{type:"textline",tokens:["nt","=","-","dot","(","nr",",","lY",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"nu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","-","(","u_view_matrix_frag","*","vec4","(","nu",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"nw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["nx","=","nw",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["nx","=","(","MAPPING_TRS_MATRIX","*","vec4","(","nx",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["nx","=","nx","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["nx","=","nx","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["nx","=","max","(","nx",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["nx","=","min","(","nx",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["nx","=","normalize","(","nx",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"ny",qualifier:["float"],is_optional:false},{type:"node_in",name:"nz",qualifier:["float"],is_optional:false},{type:"node_out",name:"nA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nA","=","ny","+","nz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nA","=","clamp","(","nA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"nB",qualifier:["float"],is_optional:false},{type:"node_in",name:"nC",qualifier:["float"],is_optional:false},{type:"node_out",name:"nD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nD","=","nB","-","nC",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nD","=","clamp","(","nD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"nE",qualifier:["float"],is_optional:false},{type:"node_in",name:"nF",qualifier:["float"],is_optional:false},{type:"node_out",name:"nG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nG","=","nE","*","nF",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nG","=","clamp","(","nG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"nH",qualifier:["float"],is_optional:false},{type:"node_in",name:"nI",qualifier:["float"],is_optional:false},{type:"node_out",name:"nJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nJ","=","(","nI","!=","ZERO_VALUE_NODES",")","?","nH","/","nI",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nJ","=","clamp","(","nJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"nK",qualifier:["float"],is_optional:false},{type:"node_in",name:"nL",qualifier:["float"],is_optional:false},{type:"node_out",name:"nM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nM","=","sin","(","nK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nM","=","clamp","(","nM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nL",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"nN",qualifier:["float"],is_optional:false},{type:"node_in",name:"nO",qualifier:["float"],is_optional:false},{type:"node_out",name:"nP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nP","=","cos","(","nN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nP","=","clamp","(","nP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nO",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"nQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"nR",qualifier:["float"],is_optional:false},{type:"node_out",name:"nS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nS","=","tan","(","nQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nS","=","clamp","(","nS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nR",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"nT",qualifier:["float"],is_optional:false},{type:"node_in",name:"nU",qualifier:["float"],is_optional:false},{type:"node_out",name:"nV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nV","=","(","nT","<=","UNITY_VALUE_NODES","&&","nT",">=","-","UNITY_VALUE_NODES",")","?","asin","(","nT",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nV","=","clamp","(","nV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nU",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"nW",qualifier:["float"],is_optional:false},{type:"node_in",name:"nX",qualifier:["float"],is_optional:false},{type:"node_out",name:"nY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nY","=","(","nW","<=","UNITY_VALUE_NODES","&&","nW",">=","-","UNITY_VALUE_NODES",")","?","acos","(","nW",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nY","=","clamp","(","nY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nX",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"nZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"n_",qualifier:["float"],is_optional:false},{type:"node_out",name:"oa",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oa","=","atan","(","nZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oa","=","clamp","(","oa",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["n_",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"ob",qualifier:["float"],is_optional:false},{type:"node_in",name:"oc",qualifier:["float"],is_optional:false},{type:"node_out",name:"od",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","ob","<","ZERO_VALUE_NODES","||","ob","==","ZERO_VALUE_NODES","&&","oc","==","ZERO_VALUE_NODES",")","od","=","ZERO_VALUE_NODES",";","else","od","=","pow","(","ob",",","oc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["od","=","clamp","(","od",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"oe",qualifier:["float"],is_optional:false},{type:"node_in",name:"of",qualifier:["float"],is_optional:false},{type:"node_out",name:"og",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["og","=","(","oe",">","ZERO_VALUE_NODES","&&","of",">","ZERO_VALUE_NODES",")","?","log2","(","oe",")","/","log2","(","of",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["og","=","clamp","(","og",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"oh",qualifier:["float"],is_optional:false},{type:"node_in",name:"oi",qualifier:["float"],is_optional:false},{type:"node_out",name:"oj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oj","=","min","(","oh",",","oi",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oj","=","clamp","(","oj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"ok",qualifier:["float"],is_optional:false},{type:"node_in",name:"ol",qualifier:["float"],is_optional:false},{type:"node_out",name:"om",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["om","=","max","(","ok",",","ol",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["om","=","clamp","(","om",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"on",qualifier:["float"],is_optional:false},{type:"node_in",name:"oo",qualifier:["float"],is_optional:false},{type:"node_out",name:"op",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["op","=","floor","(","on","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["op","=","clamp","(","op",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oo",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"oq",qualifier:["float"],is_optional:false},{type:"node_in",name:"or",qualifier:["float"],is_optional:false},{type:"node_out",name:"os",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["os","=","(","oq","<","or",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["os","=","clamp","(","os",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_in",name:"ou",qualifier:["float"],is_optional:false},{type:"node_out",name:"ov",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ov","=","(","ot",">","ou",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ov","=","clamp","(","ov",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"ow",qualifier:["float"],is_optional:false},{type:"node_in",name:"ox",qualifier:["float"],is_optional:false},{type:"node_out",name:"oy",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oy","=","abs","(","ox",")",">","0.000001","?","mod","(","ow",",","ox",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oy","=","clamp","(","oy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"oz",qualifier:["float"],is_optional:false},{type:"node_in",name:"oA",qualifier:["float"],is_optional:false},{type:"node_out",name:"oB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["oB","=","abs","(","oz",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["oB","=","clamp","(","oB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["oA",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"oC",qualifier:["float"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oG","=","clamp","(","oC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oF","=","mix","(","oD",",","oE",",","oG",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oF","=","clamp","(","oF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"oH",qualifier:["float"],is_optional:false},{type:"node_in",name:"oI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oL","=","clamp","(","oH",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oK","=","mix","(","oI",",","oI","+","oJ",",","oL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oK","=","clamp","(","oK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"oM",qualifier:["float"],is_optional:false},{type:"node_in",name:"oN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oQ","=","clamp","(","oM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oP","=","mix","(","oN",",","oN","*","oO",",","oQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oP","=","clamp","(","oP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"oR",qualifier:["float"],is_optional:false},{type:"node_in",name:"oS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","oV","=","clamp","(","oR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oU","=","mix","(","oS",",","oS","-","oT",",","oV",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oU","=","clamp","(","oU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"oW",qualifier:["float"],is_optional:false},{type:"node_in",name:"oX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","o_","=","clamp","(","oW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pa","=","UNITY_VALUE_NODES","-","o_",";","oZ","=","lv","-","(","vec3","(","pa",")","+","o_","*","(","lv","-","oY",")",")","*","(","lv","-","oX",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oZ","=","clamp","(","oZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"pb",qualifier:["float"],is_optional:false},{type:"node_in",name:"pc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pd",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pe",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pf","=","clamp","(","pb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pg","=","UNITY_VALUE_NODES","-","pf",";","pd","+=","step","(","pd",",","lu",")",";","pe","=","pg","*","pc","+","pf","*","pc","/","pd",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pe","=","clamp","(","pe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"ph",qualifier:["float"],is_optional:false},{type:"node_in",name:"pi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pk",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pl","=","clamp","(","ph",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pk","=","mix","(","pi",",","abs","(","pi","-","pj",")",",","pl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pk","=","clamp","(","pk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"pm",qualifier:["float"],is_optional:false},{type:"node_in",name:"pn",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"po",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pp",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pq","=","clamp","(","pm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pp","=","min","(","pn",".","rgb",",","po",".","rgb","*","pq",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pp","=","clamp","(","pp",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"pr",qualifier:["float"],is_optional:false},{type:"node_in",name:"ps",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pu",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pv","=","clamp","(","pr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","pu","=","max","(","ps",".","rgb",",","pt",".","rgb","*","pv",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pu","=","clamp","(","pu",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"pw",qualifier:["float"],is_optional:false},{type:"node_in",name:"px",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"py",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pA","=","clamp","(","pw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","pB","=","UNITY_VALUE_NODES","-","pA",";","vec3","pC","=","vec3","(","pB",")",";","pz","=","mix","(","px","*","(","pC","+","2.0","*","pA","*","py",")",",","lv","-","(","pC","+","2.0","*","pA","*","(","lv","-","py",")",")","*","(","lv","-","px",")",",","step","(","0.5",",","px",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pz","=","clamp","(","pz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"pD",qualifier:["float"],is_optional:false},{type:"node_in",name:"pE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pH","=","clamp","(","pD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pI","=","lv","-","pH","*","pF",";","vec3","pJ","=","pE","/","(","pI","+","step","(","pI",",","lu",")",")",";","pG","=","(","lv","-","step","(","pE",",","lu",")",")","*","mix","(","mix","(","lv",",","pJ",",","step","(","pJ",",","lv",")",")",",","lv",",","step","(","pI",",","lu",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pG","=","clamp","(","pG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"pK",qualifier:["float"],is_optional:false},{type:"node_in",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pO","=","clamp","(","pK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pP","=","lv","-","pO","*","(","lv","-","pM",")",";","vec3","pQ","=","lv","-","(","lv","-","pL",")","/","(","pP","+","step","(","pP",",","lu",")",")",";","pN","=","mix","(","mix","(","lu",",","mix","(","lv",",","pQ",",","step","(","pQ",",","lv",")",")",",","step","(","ZERO_VALUE_NODES",",","pQ",")",")",",","lu",",","step","(","pP",",","lu",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pN","=","clamp","(","pN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"pR",qualifier:["float"],is_optional:false},{type:"node_in",name:"pS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","pV","=","clamp","(","pR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","pW",",","pX",",","pY",";","pU","=","pS",";","pX","=","lJ","(","pT",")",";","if","(","pX",".","y","!=","ZERO_VALUE_NODES",")","{","pW","=","lJ","(","pU",")",";","pW",".","x","=","pX",".","x",";","pY","=","lN","(","pW",")",";","pU","=","mix","(","pU",",","pY",",","pV",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["pU","=","clamp","(","pU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"pZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"p_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qa",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qc","=","clamp","(","pZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qd","=","UNITY_VALUE_NODES","-","qc",";","qb","=","p_",";","vec3","qe",",","qf",";","qe","=","lJ","(","qb",")",";","if","(","qe",".","y","!=","ZERO_VALUE_NODES",")","{","qf","=","lJ","(","qa",")",";","qe",".","y","=","qd","*","qe",".","y","+","qc","*","qf",".","y",";","qb","=","lN","(","qe",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qb","=","clamp","(","qb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"qg",qualifier:["float"],is_optional:false},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qk","=","clamp","(","qg",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","ql","=","UNITY_VALUE_NODES","-","qk",";","vec3","qm",",","qn",";","qm","=","lJ","(","qh",")",";","qn","=","lJ","(","qi",")",";","qm",".","z","=","ql","*","qm",".","z","+","qk","*","qn",".","z",";","qj","=","lN","(","qm",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qj","=","clamp","(","qj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"qo",qualifier:["float"],is_optional:false},{type:"node_in",name:"qp",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qq",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qs","=","clamp","(","qo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qt",",","qu",",","qv",";","qr","=","qp",";","qu","=","lJ","(","qq",")",";","if","(","qu",".","y","!=","ZERO_VALUE_NODES",")","{","qt","=","lJ","(","qr",")",";","qt",".","x","=","qu",".","x",";","qt",".","y","=","qu",".","y",";","qv","=","lN","(","qt",")",";","qr","=","mix","(","qr",",","qv",",","qs",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qr","=","clamp","(","qr",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"qw",qualifier:["float"],is_optional:false},{type:"node_in",name:"qx",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qz",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qA","=","clamp","(","qw",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","qB","=","UNITY_VALUE_NODES","-","qA",";","vec3","qC","=","qy","+","qx","-","qy","*","qx",";","qz","=","qx","*","(","vec3","(","qB",")","+","vec3","(","qA",")","*","(","(","lv","-","qx",")","*","qy","+","qC",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qz","=","clamp","(","qz",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"qD",qualifier:["float"],is_optional:false},{type:"node_in",name:"qE",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qG",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["{","float","qH","=","clamp","(","qD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","qG","=","clamp","(","qE","+","qH","*","(","2.0","*","qF","-","lv",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["qG","=","clamp","(","qG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mt","=","qI",";","my","=","qJ",";"]}]},{type:"node",name:"MATERIAL",declarations:[{type:"node_in",name:"qK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qL",qualifier:["float"],is_optional:false},{type:"node_in",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qN",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qO",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qP",qualifier:["float"],is_optional:true},{type:"node_out",name:"qQ",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"lZ",qualifier:["const","vec2"]},{type:"node_param",name:"l_",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["{","vec3","qR","=","clamp","(","qK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","qS","=","l_","[","0","]","*","clamp","(","qM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["vec3","qT","=","normalize","(","qN",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vec3","qT","=","mi",";"]}]}]},{type:"textline",tokens:["hw","qU",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT"],statements:[{type:"textline",tokens:["vec3","qV","=","mq","*","qR",";","float","qW","=","0.5","*","qT",".","y","+","0.5",";","vec3","qX","=","ms","*","u_environment_energy","*","lC","(","qW",",","qT",")",";","float","qY","=","fs","(","qR",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["vec2","qZ","=","vec2","(","lZ","[","0","]",",","lZ","[","1","]",")",";","vec2","q_","=","vec2","(","l_","[","1","]",",","l_","[","2","]",")",";","qU","=","jY","(","qV",",","qX",",","qR",",","qS",",","mo",",","qT",",","mn",",","q_",",","qZ",",","qY",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",",","u_shadow_lamp_id",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qU","=","kc","(","qV",",","qX",",","qR",")",";"]}]}]},{type:"textline",tokens:["mx","=","qY",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qU",".","a","=","vec4","(","qR",",","ZERO_VALUE_NODES",")",";","qU",".","b","=","lu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qO"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["qO","=","qU",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["qO","=","lu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["qO","+=","qU",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qP"],statements:[{type:"textline",tokens:["qP","=","clamp","(","qL",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["qP","+=","qU",".","a",".","a","*","qS",".","r","*","mr",";","qP","=","clamp","(","qP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qQ"],statements:[{type:"textline",tokens:["qQ","=","qT",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["mu","=","qU",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mu","=","lu",";"]}]}]},{type:"textline",tokens:["mv","=","qT",";","}"]}]},{type:"node",name:"MATERIAL_EXT",declarations:[{type:"node_in",name:"ra",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rb",qualifier:["float"],is_optional:false},{type:"node_in",name:"rc",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"rd",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"re",qualifier:["float"],is_optional:false},{type:"node_in",name:"rf",qualifier:["float"],is_optional:false},{type:"node_in",name:"rg",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"rh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ri",qualifier:["float"],is_optional:false},{type:"node_out",name:"rj",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rk",qualifier:["float"],is_optional:true},{type:"node_out",name:"rl",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"rn",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"ma",qualifier:["const","vec2"]},{type:"node_param",name:"mb",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["{","vec3","ro","=","clamp","(","ra",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","vec3","rp","=","mb","[","0","]","*","clamp","(","rc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["vec3","rq","=","normalize","(","rd",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["vec3","rq","=","mi",";"]}]}]},{type:"textline",tokens:["hw","rr",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT"],statements:[{type:"textline",tokens:["float","rs","=","fs","(","ro",")",";","vec3","rt","=","re","*","ro",";","float","ru","=","0.5","*","rq",".","y","+","0.5",";","vec3","rv","=","ms","*","u_environment_energy","*","lC","(","ru",",","rq",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["vec2","rw","=","vec2","(","ma","[","0","]",",","ma","[","1","]",")",";","vec2","rx","=","vec2","(","mb","[","1","]",",","mb","[","2","]",")",";","rr","=","jY","(","rt",",","rv",",","ro",",","rp",",","mo",",","rq",",","mn",",","rx",",","rw",",","rs",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","rf",",","rg",",","u_shadow_lamp_id",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["rr","=","kc","(","rt",",","rv",",","ro",")",";"]}]}]},{type:"textline",tokens:["mx","=","rs",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["rr",".","a","=","vec4","(","ro",",","ZERO_VALUE_NODES",")",";","rr",".","b","=","lu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rj"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["rj","=","rr",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["rj","=","lu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],statements:[{type:"textline",tokens:["lf","(","rj",",","mn",",","rq",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","rh",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["rj","+=","rr",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rk"],statements:[{type:"textline",tokens:["rk","=","clamp","(","rb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["rk","+=","rr",".","a",".","a","*","rp",".","r","*","ri",";","rk","=","clamp","(","rk",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rl"],statements:[{type:"textline",tokens:["rl","=","rq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rm"],statements:[{type:"textline",tokens:["rm","=","rr",".","a",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rn"],statements:[{type:"textline",tokens:["rn","=","rr",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["mu","=","rr",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["mu","=","lu",";"]}]}]},{type:"textline",tokens:["mv","=","rq",";","}"]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"ry",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"mc",qualifier:["vec3"]}],statements:[{type:"textline",tokens:["ry","=","mc",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"rz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rA","=","rz",".","r","*","0.35","+","rz",".","g","*","0.45","+","rz",".","b","*","0.2",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"rB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rC",qualifier:["float"],is_optional:true},{type:"node_out",name:"rD",qualifier:["float"],is_optional:true},{type:"node_out",name:"rE",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rC"],statements:[{type:"textline",tokens:["rC","=","rB",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rD"],statements:[{type:"textline",tokens:["rD","=","rB",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rE"],statements:[{type:"textline",tokens:["rE","=","rB",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"rF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rG",qualifier:["float"],is_optional:true},{type:"node_out",name:"rH",qualifier:["float"],is_optional:true},{type:"node_out",name:"rI",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["{","vec3","rJ","=","lJ","(","rF",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rG"],statements:[{type:"textline",tokens:["rG","=","rJ",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rH"],statements:[{type:"textline",tokens:["rH","=","rJ",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rI"],statements:[{type:"textline",tokens:["rI","=","rJ",".","b",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"rK",qualifier:["float"],is_optional:false},{type:"node_in",name:"rL",qualifier:["float"],is_optional:false},{type:"node_in",name:"rM",qualifier:["float"],is_optional:false},{type:"node_out",name:"rN",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rN","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","rK","-","rM",")","*","rL",")",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"rO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rP",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rP","=","max","(","lu",",","rO",")",";","rP","=","pow","(","rP",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"rQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rR","=","max","(","lu",",","rQ",")",";","rR","=","pow","(","rR",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"rS",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rU",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","rV","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","lR","(","rS",")",")",";","rT","=","rV",".","xyz",";","gy","(","rT",")",";","rU","=","rV",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"rW",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rX",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"rY",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","rZ","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","lR","(","rW",")",")",";","mw","=","rZ",".","xyz","-","0.5",";","rX","=","normalize","(","ml","*","mw",")",";","rY","=","rZ",".","w",";","}"]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"r_",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sa",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"sb",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["{","vec4","sc","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","r_",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sa"],statements:[{type:"textline",tokens:["sa","=","sc",".","xyz",";","gy","(","sa",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_sb"],statements:[{type:"textline",tokens:["sb","=","sc",".","w",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"TEXTURE_COLOR2",declarations:[{type:"node_in",name:"sd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"se",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sg",qualifier:["float"],is_optional:false},{type:"node_out",name:"sh",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"si",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR2_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sj","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lR","(","sd",")",")",";","sf","=","sj",".","xyz",";","gy","(","sf",")",";","sg","=","sj",".","w",";","sj","=","texture2D","(","node_TEXTURE_COLOR2_var_texture",",","lR","(","se",")",")",";","sh","=","sj",".","xyz",";","gy","(","sh",")",";","si","=","sj",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL2",declarations:[{type:"node_in",name:"sk",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sl",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sm",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sn",qualifier:["float"],is_optional:false},{type:"node_out",name:"so",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sp",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL2_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sq","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lR","(","sk",")",")",";","mw","=","sq",".","xyz","-","0.5",";","sm","=","normalize","(","ml","*","mw",")",";","sn","=","sq",".","w",";","sq","=","texture2D","(","node_TEXTURE_NORMAL2_var_texture",",","lR","(","sl",")",")",";","mw","=","sq",".","xyz","-","0.5",";","so","=","normalize","(","ml","*","mw",")",";","sp","=","sq",".","w",";","}"]}]},{type:"node",name:"TEXTURE_COLOR3",declarations:[{type:"node_in",name:"sr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ss",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"st",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"su",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sv",qualifier:["float"],is_optional:false},{type:"node_out",name:"sw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sx",qualifier:["float"],is_optional:false},{type:"node_out",name:"sy",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sz",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR3_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sA","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lR","(","sr",")",")",";","su","=","sA",".","xyz",";","gy","(","su",")",";","sv","=","sA",".","w",";","sA","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lR","(","ss",")",")",";","sw","=","sA",".","xyz",";","gy","(","sw",")",";","sx","=","sA",".","w",";","sA","=","texture2D","(","node_TEXTURE_COLOR3_var_texture",",","lR","(","st",")",")",";","sy","=","sA",".","xyz",";","gy","(","sy",")",";","sz","=","sA",".","w",";","}"]}]},{type:"node",name:"TEXTURE_COLOR4",declarations:[{type:"node_in",name:"sB",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sG",qualifier:["float"],is_optional:false},{type:"node_out",name:"sH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sI",qualifier:["float"],is_optional:false},{type:"node_out",name:"sJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sK",qualifier:["float"],is_optional:false},{type:"node_out",name:"sL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sM",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_COLOR4_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sN","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lR","(","sB",")",")",";","sF","=","sN",".","xyz",";","gy","(","sF",")",";","sG","=","sN",".","w",";","sN","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lR","(","sC",")",")",";","sH","=","sN",".","xyz",";","gy","(","sH",")",";","sI","=","sN",".","w",";","sN","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lR","(","sD",")",")",";","sJ","=","sN",".","xyz",";","gy","(","sJ",")",";","sK","=","sN",".","w",";","sN","=","texture2D","(","node_TEXTURE_COLOR4_var_texture",",","lR","(","sE",")",")",";","sL","=","sN",".","xyz",";","gy","(","sL",")",";","sM","=","sN",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL3",declarations:[{type:"node_in",name:"sO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sR",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sS",qualifier:["float"],is_optional:false},{type:"node_out",name:"sT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sU",qualifier:["float"],is_optional:false},{type:"node_out",name:"sV",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"sW",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL3_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","sX","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lR","(","sO",")",")",";","mw","=","sX",".","xyz","-","0.5",";","sR","=","normalize","(","ml","*","mw",")",";","sS","=","sX",".","w",";","sX","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lR","(","sP",")",")",";","mw","=","sX",".","xyz","-","0.5",";","sT","=","normalize","(","ml","*","mw",")",";","sU","=","sX",".","w",";","sX","=","texture2D","(","node_TEXTURE_NORMAL3_var_texture",",","lR","(","sQ",")",")",";","mw","=","sX",".","xyz","-","0.5",";","sV","=","normalize","(","ml","*","mw",")",";","sW","=","sX",".","w",";","}"]}]},{type:"node",name:"TEXTURE_NORMAL4",declarations:[{type:"node_in",name:"sY",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"sZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"s_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ta",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tb",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tc",qualifier:["float"],is_optional:false},{type:"node_out",name:"td",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"te",qualifier:["float"],is_optional:false},{type:"node_out",name:"tf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tg",qualifier:["float"],is_optional:false},{type:"node_out",name:"th",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ti",qualifier:["float"],is_optional:false},{type:"node_param",name:"node_TEXTURE_NORMAL4_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","vec4","tj","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lR","(","sY",")",")",";","mw","=","tj",".","xyz","-","0.5",";","tb","=","normalize","(","ml","*","mw",")",";","tc","=","tj",".","w",";","tj","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lR","(","sZ",")",")",";","mw","=","tj",".","xyz","-","0.5",";","td","=","normalize","(","ml","*","mw",")",";","te","=","tj",".","w",";","tj","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lR","(","s_",")",")",";","mw","=","tj",".","xyz","-","0.5",";","tf","=","normalize","(","ml","*","mw",")",";","tg","=","tj",".","w",";","tj","=","texture2D","(","node_TEXTURE_NORMAL4_var_texture",",","lR","(","ta",")",")",";","mw","=","tj",".","xyz","-","0.5",";","th","=","normalize","(","ml","*","mw",")",";","ti","=","tj",".","w",";","}"]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"tk",qualifier:["float"],is_optional:false},{type:"node_param",name:"md",qualifier:["const","float"]}],statements:[{type:"textline",tokens:["tk","=","md",";"]}]},{type:"node",name:"ANIM_VALUE",declarations:[{type:"node_out",name:"tl",qualifier:["float"],is_optional:false},{type:"node_param",name:"me",qualifier:["const","int"]}],statements:[{type:"textline",tokens:["tl","=","u_anim_values","[","me","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"tm",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tn",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"to",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tp",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["to","=","tm","+","tn",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tp"],statements:[{type:"textline",tokens:["tp","=","(","abs","(","to","[","0","]",")","+","abs","(","to","[","1","]",")","+","abs","(","to","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"tq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ts",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tt",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["ts","=","tq","-","tr",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tt"],statements:[{type:"textline",tokens:["tt","=","(","abs","(","ts","[","0","]",")","+","abs","(","ts","[","1","]",")","+","abs","(","ts","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"tu",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tv",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tx",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tw","=","tu","+","tv",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tx"],statements:[{type:"textline",tokens:["tx","=","length","(","tw",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tw"],statements:[{type:"textline",tokens:["tw","=","normalize","(","tw",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"ty",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tB",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tA","=","lu",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tB"],statements:[{type:"textline",tokens:["tB","=","dot","(","ty",",","tz",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"tC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tF",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tE","=","cross","(","tC",",","tD",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tF"],statements:[{type:"textline",tokens:["tF","=","length","(","tE",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"tG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tJ",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["tI","=","normalize","(","tG",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_tJ"],statements:[{type:"textline",tokens:["tJ","=","length","(","tG",")",";"]}]}]},{type:"textline",tokens:["tH",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"tK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"tM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["tM","=","reflect","(","-","tK",",","tL",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"tN",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"tO",qualifier:["float"],is_optional:false},{type:"node_in",name:"tP",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"tQ",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"tR",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["{","float","tS","=","length","(","mp",")",";","if","(","tS","<","tQ",")","{","vec2","tT","=","lR","(","tN",")",";","float","tU","=","clamp","(","0.5","*","(","tQ","-","tS",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","float","tV","=","tO","*","tU",";","vec3","tW","=","normalize","(","mn","*","ml",")",";","float","tX","=","UNITY_VALUE_NODES","/","tP",";","vec2","tY","=","tW",".","xy","*","tV","/","(","tP","*","tW",".","z",")",";","float","tZ","=","UNITY_VALUE_NODES",";","float","t_","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","tT",")",".","a",";","for","(","float","ua","=","1.0",";","ua","<=","tP",";","ua","++",")","{","if","(","t_","<","tZ",")","{","tZ","-=","tX",";","tT","-=","tY",";","t_","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","tT",")",".","a",";","}","}","vec2","ub","=","tT","+","tY",";","float","uc","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","ub",")",".","a","-","(","tZ","+","tX",")",";","float","ud","=","t_","-","tZ",";","float","ue","=","ud","/","(","ud","-","uc",")",";","tT","=","ue","*","ub","+","(","UNITY_VALUE_NODES","-","ue",")","*","tT",";","tR","=","lP","(","tT",")",";","}","else","tR","=","tN",";","}"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"uf",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ug",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ug","=","clamp","(","uf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"uh",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ui",qualifier:["float"],is_optional:false},{type:"node_out",name:"uj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["uj","=","lz","(","uh",",","ui",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"uk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ul",qualifier:["float"],is_optional:false},{type:"node_in",name:"um",qualifier:["float"],is_optional:false},{type:"node_in",name:"un",qualifier:["float"],is_optional:false},{type:"node_in",name:"uo",qualifier:["float"],is_optional:false},{type:"node_out",name:"up",qualifier:["float"],is_optional:true},{type:"node_out",name:"uq",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_up"],statements:[{type:"textline",tokens:["up","=","uk",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_uq"],statements:[{type:"textline",tokens:["uq","=","vec4","(","ul",",","um",",","un",",","uo",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"ur",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ur","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"us",qualifier:["float"],is_optional:false},{type:"node_in",name:"ut",qualifier:["float"],is_optional:false},{type:"node_in",name:"uu",qualifier:["float"],is_optional:false},{type:"node_out",name:"uv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["uv","=","smoothstep","(","ut",",","uu",",","us",")",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mf","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["float","mg","=","kF",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mh","=","kG",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","mh","=","mh",";","else","mh","=","-","mh",";"]}]}}]},{type:"textline",tokens:["vec3","mi","=","normalize","(","mh",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mj","=","cross","(","mh",",","kH",".","xyz",")","*","kH",".","w",";","mat3","mk","=","mat3","(","kH",".","xyz",",","mj",",","mh",")",";","mat3","ml","=","mk",";"]}]}}]},{type:"textline",tokens:["vec3","mm","=","u_camera_eye_frag","-","kF",";","vec3","mn","=","normalize","(","mm",")",";","vec3","mo","=","kF",";","vec4","mp","=","cL",";","float","mq","=","u_emit",";","float","mr","=","u_specular_alpha",";","float","ms","=","u_ambient",";","vec3","mt",";","vec3","mu",";","vec3","mv",";","vec3","mw",";","float","mx",";","float","my",";"]},{type:"nodes_main"},{type:"textline",tokens:["vec3","uw","=","mt",";","float","ux","=","my",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["uw","=","max","(","uw","-","sqrt","(","0.01","*","-","min","(","mg",",","ZERO_VALUE_NODES",")",")",",","0.5","*","uw",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kD","(","uw",",","mg",",","u_time",",","mx",",","mv",",","u_sun_direction",",","mf",",","u_sun_quaternion",",","kF",",","length","(","cL",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","uy","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","uz","=","gS","(","u_cube_fog",",","mn",")",";","vec4","uA","=","vec4","(","uz",",","u_fog_color_density",".","a",")",";","gy","(","uA",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","uA","=","u_fog_color_density",";","uA",".","rgb","*=","uy",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["hk","(","uw",",","length","(","cL",")",",","mn",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","uA",",","mg",",","uy",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gL","(","uw",",","length","(","cL",")",",","uA",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","ux","<","0.5",")","discard",";","ux","=","UNITY_VALUE_NODES",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","uB","=","texture2DProj","(","u_shadow_mask",",","cK",")",".","rg",";","float","uC","=","uB",".","g",";","uw","=","vec3","(","uC",")",";"]}]}}]},{type:"textline",tokens:["gA","(","uw",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","uw",",","ux",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","uw",",","ux",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kF",";","varying","vec4","cL",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","kH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kJ",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"lS",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["lS","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"lX",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["lX","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"lY",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["lY","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"lZ",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["lZ","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"l_",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["l_","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec3","ma","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mb","=","a_normal",";","vec3","mc","=","vec3","(","a_tangent",")",";","vec3","md","=","a_tangent","[","3","]","*","cross","(","mb",",","mc",")",";"]}]}},{type:"elif",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mb","=","a_normal",";","vec3","mc","=","vec3","(","0.0",")",";","vec3","md","=","vec3","(","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mb","=","vec3","(","0.0",")",";","vec3","mc","=","vec3","(","0.0",")",";","vec3","md","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ma","=","mix","(","ma",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["mb","=","mix","(","mb",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","me","=","vec3","(","a_tangent",")",";","vec3","mf","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","me",")",";","mc","=","mix","(","mc",",","me",",","u_va_frame_factor",")",";","md","=","mix","(","md",",","mf",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bt","(","ma",",","mc",",","md",",","mb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mg","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mh","=","(","u_model_matrix","*","vec4","(","mg",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","mi","=","ag","(","u_camera_eye",",","mh",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","mi","=","aa","(","u_camera_eye",",","mh",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mj","=","(","u_model_matrix","*","vec4","(","mg",",","1.0",")",")",".","xyz",";","mi","=","mi","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","mj",")",";"]}]}}]},{type:"textline",tokens:["d","mk","=","an","(","ma","-","mg",",","mg",",","mc",",","md",",","mb",",","mi",")",";","mk",".","b","=","mh",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","mk","=","an","(","ma",",","mg",",","mc",",","md",",","mb",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ck","(","mk",".","a",",","mk",".","b",",","mb",")",";"]}]}}]},{type:"textline",tokens:["kF","=","mk",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kG","=","mk",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["float","ml","=","(","dot","(","cross","(","mk",".","e",",","mk",".","c",")",",","mk",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","kH","=","vec4","(","mk",".","c",",","ml",")",";"]}]}}]},{type:"textline",tokens:["cL","=","u_view_matrix","*","vec4","(","mk",".","a",",","1.0",")",";","vec4","mm","=","u_proj_matrix","*","cL",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["mm",".","xy","+=","u_subpixel_jitter","*","mm",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","mm",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gr","(","mk",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_B4W_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["float","mn","=","mm",".","x",";","float","mo","=","mm",".","y",";","float","mp","=","mm",".","w",";","cK",".","x","=","(","mn","+","mp",")","/","2.0",";","cK",".","y","=","(","mo","+","mp",")","/","2.0",";","cK",".","z","=","mp",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","-","cL",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","mm",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","ma",";","varying","vec3","kI",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cL",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","mb","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","float","mc","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","mb",")",";","float","md","=","u_diffuse_color",".","a","*","ma","*","(","1.0","-","clamp","(","mc",",","0.0",",","1.0",")",")",";","vec3","me","=","kI","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gL","(","me",",","length","(","cL",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["gA","(","me",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","me",",","md",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","me",",","md",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","ma",";","varying","vec3","kI",";","varying","vec3","cL",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","mb","mT",";","mT","=","mS","(",")",";","vec4","mU","=","u_view_matrix","*","vec4","(","mT",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","mU",";","ma","=","mT",".","c",";","kI","=","mT",".","d",";","cL","=","mU",".","xyz",";","float","mV","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","mT",".","a","*","mV",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","ma",";","varying","vec3","kI",";","varying","vec2","a",";","varying","vec3","kE",";","varying","vec3","kF",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","lu","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lv","=","texture2D","(","u_sampler",",","a",")",";","gy","(","lv",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["lu",".","rgb","=","mix","(","lu",".","rgb",",","lv",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["lu",".","rgb","*=","mix","(","vec3","(","1.0",")",",","lv",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["lu",".","a","=","lv",".","a",";"]}]}}]},{type:"textline",tokens:["lu",".","rgb","*=","kI",";","vec3","lw","=","u_diffuse_intensity","*","lu",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lx","=","u_emit","*","lu",".","rgb",";","vec3","ly","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lz","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","ly",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lA","=","0.5",";","vec3","lz","=","u_environment_energy","*","mix","(","u_horizon_color",",","u_zenith_color",",","lA",")",";"]}]}}]},{type:"textline",tokens:["vec3","lB","=","u_ambient","*","lz",";","float","lC","=","u_specular_params","[","0","]",";","vec2","lD","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","lE","=","lC","*","u_specular_color",";","vec3","lF","=","normalize","(","kE",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hw","lG","=","jY","(","lx",",","lB",",","lw",",","lE",",","kF",",","ly",",","lF",",","lD",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",",","0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hw","lG","=","kc","(","lx",",","lB",",","lw",")",";"]}]}}]},{type:"textline",tokens:["vec3","lH","=","lG",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lH","=","lw",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gL","(","lH",",","length","(","cL",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["float","lI","=","lu",".","a","*","ma",";","gA","(","lH",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","lH",",","lI",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lH",",","lI",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","ma",";","varying","vec3","kI",";","varying","vec2","a",";","varying","vec3","kE",";","varying","vec3","kF",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cL",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","lw","(","vec2","lu",",","vec2","lv",")","{","return","(","atan","(","lv",".","y",",","lv",".","x",")","-","atan","(","lu",".","y",",","lu",".","x",")",")",";","}","void","main","(",")","{","mb","lx",";","lx","=","mS","(",")",";","float","ly",";","mat4","lz",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","ly","=","lx",".","e",";","lz","=","z","(","lx",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","ly","=","lx",".","e",";","lz","=","k","(",")",";","lz","[","3","]","=","vec4","(","lx",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","ly","=","lx",".","e",";","lz","=","o","(","radians","(","90.0",")",")",";","lz","[","3","]","=","vec4","(","lx",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","ly","=","lw","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","lx",".","e",";","lz","=","m","(","radians","(","-","90.0",")",")",";","lz","[","3","]","=","vec4","(","lx",".","b",",","1.0",")",";","}","vec4","lA","=","vec4","(","a_p_bb_vertex","*","2.0","*","lx",".","a","*","u_p_size",",","0.0",",","1.0",")",";","vec4","lB","=","lz","*","q","(","ly",")","*","lA",";","vec4","lC","=","u_view_matrix","*","lB",";","vec4","lD","=","u_proj_matrix","*","lC",";","gl_Position","=","lD",";","ma","=","lx",".","c",";","kI","=","lx",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","kF","=","lB",".","xyz",";","kE","=","u_camera_eye","-","lB",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cL","=","lC",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","mT",";","const","float","mU","=","0.99",";","const","float","mV","=","1.8",";","const","int","mW","=","8",";","float","nf","(","vec3","mX",",","vec3","mY",")","{","float","mZ","=","dot","(","mY",",","mY",")",";","float","m_","=","2.0","*","dot","(","mY",",","mX",")",";","float","na","=","dot","(","mX",",","mX",")","-","1.0",";","float","nb","=","m_","*","m_","-","4.0","*","mZ","*","na",";","float","nc","=","sqrt","(","nb",")",";","float","nd","=","(","-","m_","-","nc",")","/","2.0",";","float","ne","=","na","/","nd",";","return","ne",";","}","float","nm","(","float","ng",",","float","nh",")","{","float","ni","=","3.0","*","(","1.0","-","nh","*","nh",")",";","float","nj","=","2.0","*","(","2.0","+","nh","*","nh",")",";","float","nk","=","1.0","+","ng","*","ng",";","float","nl","=","pow","(","1.0","+","nh","*","nh","-","2.0","*","nh","*","ng",",","1.5",")",";","nl","=","max","(","nl",",","0.00001",")",";","return","(","ni","/","nj",")","*","(","nk","/","nl",")",";","}","float","nu","(","vec3","nn",",","vec3","no",",","float","np",")","{","float","nq","=","dot","(","no",",","-","nn",")",";","if","(","nq","<","0.0",")","{","return","1.0",";","}","vec3","nr","=","nn","+","nq","*","no",";","if","(","length","(","nr",")","<","np",")","{","return","0.0",";","}","else","if","(","length","(","nr",")",">=","np",")","{","vec3","ns","=","normalize","(","nr",")","*","np","-","nn",";","float","nt","=","acos","(","dot","(","normalize","(","ns",")",",","no",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","nt","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","ny","(","float","nv",",","vec3","nw",",","float","nx",")","{","return","nw","-","nw","*","pow","(","u_sky_color",",","vec3","(","nx","/","nv",")",")",";","}","void","main","(",")","{","vec3","nz","=","normalize","(","mT",")",";","vec3","nA","=","u_sun_direction",";","float","nB","=","dot","(","nz",",","nA",")",";","float","nC","=","nm","(","nB",",","-","0.01",")","*","u_rayleigh_brightness","*","nA",".","y",";","float","nD","=","nm","(","nB","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","nA",".","y",")",";","float","nE","=","smoothstep","(","0.0",",","100.0",",","nm","(","nB",",","0.9995",")",")","*","u_spot_brightness",";","vec3","nF","=","vec3","(","0.0",",","mU",",","0.0",")",";","float","nG","=","nf","(","nF",",","nz",")",";","float","nH","=","nG","/","float","(","mW",")",";","float","nI","=","nu","(","nF",",","nz",",","mU","-","0.3",")",";","vec3","nJ","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","nK","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","nL","=","0",";","nL","<","mW",";","nL","++",")","{","float","nM","=","nH","*","float","(","nL",")",";","vec3","nN","=","nF","+","nz","*","nM",";","float","nO","=","nu","(","nN",",","nA",",","mU","-","0.2",")",";","float","nP","=","nf","(","nN",",","nA",")",";","vec3","nQ","=","ny","(","nP",",","vec3","(","mV",")",",","u_scatter_strength",")","*","nO",";","nJ","+=","ny","(","sqrt","(","nM",")",",","u_sky_color","*","nQ",",","u_rayleigh_strength",")",";","nK","+=","ny","(","nM",",","nQ",",","u_mie_strength",")",";","}","nJ","=","nJ","*","nI","*","pow","(","nG",",","u_rayleigh_collection_power",")","/","float","(","mW",")",";","nK","=","(","nK","*","nI","*","pow","(","nG",",","u_mie_collection_power",")",")","/","float","(","mW",")",";","vec3","nR","=","vec3","(","nE","*","nK","+","nD","*","nK","+","nC","*","nJ",")",";","gA","(","nR",")",";","gl_FragColor","=","vec4","(","nR",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","mT",";","void","main","(",")","{","vec4","lu","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","vec4","lv","=","u_cube_view_matrix","*","lu",";","mT","=","lv",".","xyz",";","gl_Position","=","lu",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_sampler",",","a",")",";","gA","(","lu",".","rgb",")",";","gD","(","lu",".","rgb",",","lu",".","a",")",";","gl_FragColor","=","lu",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_texcoord",";","vec3","lu","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","vec4","lv","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","lu",",","0.0",")",";","lv",".","x","/=","lv",".","w",";","lv",".","y","/=","lv",".","w",";","lv","+=","99999.0","*","step","(","lv",".","z",",","0.0",")",";","lv","+=","100.0","*","(","step","(","1.0",",","abs","(","lv",".","x",")",")","+","step","(","1.0",",","abs","(","lv",".","y",")",")",")",";","lv",".","x","=","-","a_lf_dist","*","lv",".","x",";","lv",".","y","=","-","a_lf_dist","*","lv",".","y",";","float","lw","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","vec2","lx","=","vec2","(","a_lf_bb_vertex",".","x","/","lw",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","ly","=","1.9",";","lx","*=","(","1.0","+","ly","*","length","(","lv",".","xy",")",")",";","}","gl_Position","=","vec4","(","lv",".","xy","+","lx",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","mT",";","void","main","(",")","{","vec3","lu","=","textureCube","(","u_sky",",","mT",")",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gy","(","lu",".","rgb",")",";","float","lv","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","lv","=","min","(","-","lv","*","0.03",",","0.8",")",";","float","lw","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","vec3","lx","=","normalize","(","mT",")",";","vec3","ly","=","vec3","(","0.0",")",";","vec4","lz","=","u_underwater_fog_color_density",";","lz",".","rgb","=","mix","(","lz",".","rgb",",","ly",",","min","(","-","lx",".","y","+","lv",",","1.0",")",")","*","lw",";","float","lA","=","clamp","(","sign","(","lx",".","y","-","0.05","*","lv",")",",","0.0",",","1.0",")",";","lu","=","mix","(","lz",".","rgb",",","lu",",","lA",")",";","gA","(","lu",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lu",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","mT",";","void","main","(",")","{","vec4","lu","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","vec4","lv","=","u_sky_vp_inverse","*","lu",";","mT","=","lv",".","xyz",";","gl_Position","=","lu",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","vec3","u_zenith_color",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors1","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors2","[","NUM_LIGHTS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","lu","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kE",";","varying","vec3","kF",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kG",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kH",";","varying","vec3","mU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mV",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","nl","(","in","vec2","mY",",","in","vec3","mZ",",","in","vec3","m_",",","in","vec3","na",",","out","float","nb",")","{","vec3","nc","=","reflect","(","-","m_",",","mZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nd","=","mY",".","xy","+","mZ",".","xz","*","REFL_BUMP","/","kJ",";","nb","=","u_reflect_factor",";","vec3","ne",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["ne","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ne","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["float","nf","=","dot","(","m_",",","mZ",")",";","nb","*=","max","(","1.0","-","1.0","/","nf",",","1.0",")",";","}","else","{","ne","=","texture2D","(","u_reflectmap",",","nd",")",".","rgb",";","gy","(","ne",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["nb","=","u_mirror_factor",";","vec3","ne","=","na","*","textureCube","(","u_mirrormap",",","nc",")",".","rgb",";","gy","(","ne",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nb","=","u_reflect_factor",";","vec3","ne","=","na","*","vec3","(","0.3",",","0.5",",","1.0",")",";","gy","(","ne",")",";"]}]}}]},{type:"textline",tokens:["vec3","ng","=","normalize","(","nc","+","m_",")",";","float","nh","=","1.0","-","dot","(","m_",",","ng",")",";","float","ni","=","u_fresnel_params","[","3","]",";","float","nj","=","u_fresnel_params","[","2","]",";","float","nk","=","ni","+","(","1.0","-","ni",")","*","pow","(","nh",",","nj",")",";","nb","=","min","(","nb","*","nk",",","1.0",")",";","return","ne",";","}","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","nm","=","mat3","(","kH",",","mU",",","kG",")",";"]}]}}]},{type:"textline",tokens:["vec3","nn","=","normalize","(","kG",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mat3","nm","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","nn","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","no","=","kF",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","np","=","vec2","(","mV",".","x",",","-","mV",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","np","=","vec2","(","kF",".","x",",","-","kF",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","np","=","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nq","=","vec3","(","0.0",")",";","vec3","nr","=","texture2D","(","u_normalmap0",",","np","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nq","+=","nr",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ns","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["ns","+=","nr",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["nr","=","texture2D","(","u_normalmap0",",","np","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nq","+=","nr",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["ns","+=","nr",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["nr","=","texture2D","(","u_normalmap0",",","np","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nq","+=","nr",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["ns","+=","nr",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["nr","=","texture2D","(","u_normalmap0",",","np","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","nq","+=","nr",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["ns","+=","nr",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nt","=","nm","*","ns",";","if","(","!","g","(","nt",",","vec3","(","0.0",")",")",")","nt","=","normalize","(","nt",")",";","vec3","nu","=","mix","(","nn",",","nt",",","0.2",")",";","nu","=","normalize","(","nu",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["nn","=","mix","(","nn",",","normalize","(","nm","*","nq",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nn","=","mix","(","nn",",","normalize","(","nm","*","nq",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["nn","=","normalize","(","nn",")",";"]}]}}]},{type:"textline",tokens:["vec3","nv","=","normalize","(","kE",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nw","=","cK",".","xy","/","cK",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["float","nx","=","kJ","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","ny","=","u_diffuse_color",".","a",";","vec4","nz","=","texture2DProj","(","u_scene_depth",",","cK",")",";","float","nA","=","cw","(","nz",")",";","float","nB","=","max","(","nA","-","kJ",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nC","=","nw","+","nn",".","xz","*","u_refr_bump","/","kJ",";","float","nD","=","ll","(","nA",",","nC",",","nw",")",";","float","nE","=","max","(","nD","-","kJ",",","0.0",")",";","float","nF","=","u_view_max_depth","/","ABSORB","*","nE",";","float","nG",";","if","(","u_cam_water_depth","<","0.0",")","nG","=","0.0",";","else","nG","=","min","(","ny","*","nF",",","1.0",")",";","float","nH","=","u_view_max_depth","/","ABSORB","*","nB",";","ny","=","min","(","15.0","*","ny","*","u_view_max_depth","*","nB",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nH","=","u_view_max_depth","/","ABSORB","*","nB",";","if","(","u_cam_water_depth",">","0.0",")","ny","=","min","(","ny","*","nH",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["ny","*=","min","(","5.0","*","nx",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","ny","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","nG","=","1.0","-","ny",";","vec2","nC","=","nw","+","nn",".","xz","*","REFR_BUMP","/","kJ",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nI","=","texture2D","(","u_refractmap",",","nC",")",".","rgb",";","gy","(","nI",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","nJ","=","pow","(","min","(","mW",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","vec3","nK","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","nJ",")",";","nJ","=","pow","(","min","(","mW",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","nK","=","mix","(","u_shore_water_col",",","nK",",","nJ",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nK","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["float","nL","=","max","(","1.0","-","u_view_max_depth","*","nB",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nL","=","1.0","-","ny",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","nM","=","max","(","no","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nN","=","normalize","(","vec3","(","mW",".","r",",","0.0",",","mW",".","g",")",")",";","vec3","nO","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","nN",",","0.8",")",")",";","float","nP","=","1.25","*","max","(","dot","(","nu",",","nO",")","-","0.2",",","0.0",")",";","nP","+=","max","(","dot","(","nu",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","nL","+=","nP","*","(","1.0","-","mW",".","b",")",";","nM","*=","(","1.0","-","0.95","*","pow","(","mW",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["nL","+=","nM",";","nL","=","min","(","u_foam_factor","*","nL",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec4","nQ","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","np","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["float","nR","=","u_specular_params","[","0","]",";","vec2","nS","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","vec3","nT","=","nR","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nU","=","u_environment_energy","*","textureCube","(","u_sky_texture",",","nn",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nU","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["vec3","nV","=","u_ambient","*","nU",";","vec3","nW","=","nV","+","u_sun_intensity",";","float","nX",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nY","=","nl","(","nw",",","nn",",","nv",",","nW",",","nX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","nY","=","nl","(","vec2","(","0.0",")",",","nn",",","nv",",","nW",",","nX",")",";"]}]}}]},{type:"textline",tokens:["vec3","nZ","=","u_diffuse_intensity","*","nK",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hw","n_","=","jY","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","nZ",",","nT",",","kF",",","nn",",","nv",",","nS",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors1",",","u_light_factors2",",","0.0",",","vec4","(","0.0",")",",","0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hw","n_","=","kc","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","nZ",")",";"]}]}}]},{type:"textline",tokens:["nZ","=","n_",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","oa","=","max","(","dot","(","u_sun_direction",",","-","kG",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","nv",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","oa","=","clamp","(","SSS_STRENGTH","*","oa",",","0.0",",","1.0",")",";","nZ","=","mix","(","nZ",",","u_shallow_water_col",",","oa",")",";","nZ","=","mix","(","nZ",",","u_shore_water_col",",","oa",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["nZ","=","mix","(","nI",",","nZ",",","nG",")",";"]}]}}]},{type:"textline",tokens:["nZ","=","mix","(","nZ",",","nY",",","nX",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["float","ob","=","mix","(","nQ",".","g",",","nQ",".","r",",","max","(","4.0","*","(","nL","-","0.75",")",",","0.0",")",")",";","ob","=","mix","(","nQ",".","b",",","ob",",","max","(","2.0","*","nL","-","1.0",",","0.0",")",")",";","ob","=","mix","(","0.0",",","ob",",","nL",")",";","nZ","=","mix","(","nZ",",","nW",",","ob",")",";"]}]}}]},{type:"textline",tokens:["nZ","+=","n_",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","oc","=","gS","(","u_cube_fog",",","nv",")",";","vec4","od","=","vec4","(","oc",",","u_fog_color_density",".","a",")",";","gy","(","od",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","od","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","ht","(","nZ",",","nx",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","gL","(","nZ",",","nx",",","od",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gL","(","nZ",",","nx",",","od",")",";"]}]}}]}]}}]},{type:"textline",tokens:["gA","(","nZ",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ny","=","max","(","ny",",","n_",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["ny","+=","ob",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","nZ",",","ny",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","oe","=","fwidth","(","mX",")",";","vec3","of","=","smoothstep","(","vec3","(","0.0",")",",","oe","*","lu",",","mX",")",";","float","og","=","min","(","min","(","of",".","x",",","of",".","y",")",",","of",".","z",")",";","og","=","clamp","(","og",",","0.0",",","1.0",")",";","nZ","=","mix","(","u_wireframe_edge_color",",","nZ",",","og",")",";","ny","=","mix","(","1.0",",","ny",",","og",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","nZ",",","ny",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","kE",";","varying","vec3","kF",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kG",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","kH",";","varying","vec3","mU",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mV",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mW",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cK",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","kJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","mX",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lA","(","in","vec2","lu",")","{","vec2","lv","=","0.5","+","vec2","(","(","lu",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","lu",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","vec4","lw","=","texture2D","(","u_shore_dist_map",",","lv",")",";","const","vec2","lx","=","vec2","(","1.0","/","255.0",",","1.0",")",";","float","ly","=","dot","(","lw",".","ba",",","lx",")",";","vec2","lz","=","normalize","(","lw",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","lz",",","ly",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","lR","(","inout","vec3","lB",",","in","float","lC",",","in","vec3","lD",")","{","float","lE","=","dM","(","DST_NOISE_SCALE_0","*","(","lB",".","xz","+","DST_NOISE_FREQ_0","*","lC",")",")","*","dM","(","DST_NOISE_SCALE_1","*","(","lB",".","zx","-","DST_NOISE_FREQ_1","*","lC",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","lF","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","float","lG","=","lD",".","b",";","float","lH","=","sqrt","(","lG",")",";","float","lI","=","max","(","lG",",","DIR_MIN_SHR_FAC",")","*","sin","(","lH","/","lF","+","DIR_FREQ","*","lC",")",";","float","lJ","=","max","(","dM","(","DIR_NOISE_SCALE","*","(","lB",".","xz","+","DIR_NOISE_FREQ","*","lC",")",")",",","DIR_MIN_NOISE_FAC",")",";","lI","*=","lJ",";","float","lK","=","WAVES_HEIGHT","*","mix","(","lI",",","lE",",","max","(","lH",",","DST_MIN_FAC",")",")",";","vec2","lL","=","lD",".","rg",";","float","lM","=","WAVES_HOR_FAC","*","lI","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","lG",")",",","0.0",")",";","vec2","lN","=","lM","*","lL",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","lK","=","WAVES_HEIGHT","*","lE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lO","=","2.0","*","(","lB",".","xz","-","0.1","*","lC",")",";","vec2","lP","=","1.3","*","(","lB",".","zx","+","0.03","*","lC",")",";","float","lQ","=","dg","(","0.5","*","lO",")",".","x","+","dg","(","0.5","*","lP",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lB",".","xz","+=","lN",";","lQ","*=","lG",";"]}]}}]},{type:"textline",tokens:["lK","+=","SMALL_WAVES_FAC","*","lQ",";"]}]}}]},{type:"textline",tokens:["lB",".","y","+=","lK",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","mX","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","mX","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","mX","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["vec3","mY","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","mZ","=","abs","(","mY",".","y",")",";","vec2","m_","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","mZ",")",";","mY",".","y","=","WATER_LEVEL",";","mY",".","xz","+=","m_",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["d","na","=","an","(","mY",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["mV","=","na",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["mW","=","lA","(","na",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["float","nb","=","length","(","u_wind",")",";","float","nc","=","u_time",";","nc","*=","nb",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nd","=","mZ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","nd","=","0.1",";"]}]}}]},{type:"textline",tokens:["vec3","ne","=","na",".","a","+","vec3","(","nd",",","0.0",",","0.0",")",";","vec3","nf","=","na",".","a","+","vec3","(","0.0",",","0.0",",","nd",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ng","=","lA","(","ne",".","xz",")",";","vec3","nh","=","lA","(","nf",".","xz",")",";","lR","(","ne",",","nc",",","ng",")",";","lR","(","nf",",","nc",",","nh",")",";","lR","(","na",".","a",",","nc",",","mW",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lR","(","ne",",","nc",",","vec3","(","0.0",")",")",";","lR","(","nf",",","nc",",","vec3","(","0.0",")",")",";","lR","(","na",".","a",",","nc",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","na",".","a",".","y","=","WATER_LEVEL","-","1.0",";","ne",".","y","=","na",".","a",".","y",";","nf",".","y","=","na",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["vec3","ni","=","normalize","(","ne","-","na",".","a",")",";","vec3","nj","=","normalize","(","nf","-","na",".","a",")",";","kG","=","normalize","(","cross","(","nj",",","ni",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["kH","=","nj",";","mU","=","cross","(","kG",",","kH",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["float","nk","=","dot","(","kG",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","nl","=","clamp","(","0.8","-","nk",",","0.0",",","1.0",")",";","kG","=","mix","(","kG",",","vec3","(","0.0",",","1.0",",","0.0",")",",","nl",")",";"]}]}}]}]}}]},{type:"textline",tokens:["kF","=","na",".","a",";","kE","=","u_camera_eye","-","na",".","a",";","vec4","nm","=","u_view_matrix","*","vec4","(","na",".","a",",","1.0",")",";","vec4","nn","=","u_proj_matrix","*","nm",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","no","=","nn",".","x",";","float","np","=","nn",".","y",";","float","nq","=","nn",".","w",";","cK",".","x","=","(","no","+","nq",")","/","2.0",";","cK",".","y","=","(","np","+","nq",")","/","2.0",";","cK",".","z","=","nq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","-","nm",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","nn",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","mX",";","const","float","lu","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lv","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lv","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","lw","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","lx","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","ly","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","lz","=","vec3","(","0.0",")",";","float","lA","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lB","=","sign","(","mX","-","vec3","(","0.02","*","lu",")",")",";","if","(","lB",".","x","<","0.0","||","lB",".","y","<","0.0","||","lB",".","z","<","0.0",")","{","lz","=","lv",";","lA","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lB","=","sign","(","mX","-","vec3","(","0.02","*","lu",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","lB",".","x","<","0.0","||","lB",".","y","<","0.0","||","lB",".","z","<","0.0",")","lz","=","u_wireframe_edge_color",";","else","lz","=","ly",";","lA","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","lB",".","x","<","0.0","||","lB",".","y","<","0.0","||","lB",".","z","<","0.0",")","lA","=","1.0",";","else","lA","=","0.0",";","lz","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","lB",".","x","<","0.0","||","lB",".","y","<","0.0","||","lB",".","z","<","0.0",")","lz","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","lz","=","lw",";","else","lz","=","lx",";","lA","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["vec3","lC","=","fwidth","(","mX",")",";","vec3","lD","=","smoothstep","(","vec3","(","0.0",")",",","lC","*","lu",",","mX",")",";","float","lE","=","min","(","min","(","lD",".","x",",","lD",".","y",")",",","lD",".","z",")",";","lE","=","clamp","(","lE",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","lz","=","vec3","(","mix","(","u_wireframe_edge_color",",","ly",",","lE",")",")",";","lA","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","lz","=","u_wireframe_edge_color",";","lA","=","mix","(","1.0",",","0.0",",","lE",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","lz","=","mix","(","u_wireframe_edge_color",",","lw",",","lE",")",";","else","lz","=","mix","(","u_wireframe_edge_color",",","lx",",","lE",")",";","lA","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["gA","(","lz",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","lz",",","lA",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lz",",","lA",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","mX",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","if","(","a_polyindex","==","0.0",")","mX","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","mX","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","mX","=","vec3","(","0.0",",","0.0",",","1.0",")",";","vec3","lu","=","a_position",";","vec3","lv","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["d","lw","=","an","(","lu",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["lu","=","mix","(","lu",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lx","=","vec3","(","0.0",")",";","vec3","ly","=","vec3","(","0.0",")",";","bt","(","lu",",","lx",",","ly",",","lv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lz","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","lz","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","lw","=","gh","(","lu",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lz",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lA","=","(","u_model_matrix","*","vec4","(","lz",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","lB","=","ag","(","u_camera_eye",",","lA",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","lB","=","aa","(","u_camera_eye",",","lA",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lC","=","(","u_model_matrix","*","vec4","(","lz",",","1.0",")",")",".","xyz",";","lB","=","lB","*","Q","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lC",")",";"]}]}}]},{type:"textline",tokens:["d","lw","=","an","(","lu","-","lz",",","lz",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","lB",")",";","lw",".","b","=","lA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","lw","=","an","(","lu",",","lz",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["ck","(","lw",".","a",",","lw",".","b",",","lv",")",";"]}]}}]}]}}]},{type:"textline",tokens:["vec4","lD","=","u_view_matrix","*","vec4","(","lw",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","lD",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_sampler_left",",","a",")",";","vec4","lv","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","lu","[","0","]",",","lv","[","1","]",",","lv","[","2","]",",","lu","[","3","]","+","lv","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","lx","(","float","lu",",","float","lv",")","{","vec2","lw","=","a","+","vec2","(","lu",",","lv",")","*","u_texel_size",";","return","texture2D","(","u_color",",","lw",")",";","}","float","lB","(","vec4","ly",")","{","vec3","lz","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","lA","=","dot","(","ly",".","rgb",",","lz",")",";","return","lA",";","}","vec4","m_","(",")","{","vec4","lC","=","lx","(","-","1.0",",","-","1.0",")",";","vec4","lD","=","lx","(","1.0",",","-","1.0",")",";","vec4","lE","=","lx","(","-","1.0",",","1.0",")",";","vec4","lF","=","lx","(","1.0",",","1.0",")",";","vec4","lG","=","lx","(","0.0",",","0.0",")",";","float","lH","=","lB","(","lC",")",";","float","lI","=","lB","(","lD",")",";","float","lJ","=","lB","(","lE",")",";","float","lK","=","lB","(","lF",")",";","float","lL","=","lB","(","lG",")",";","float","lM","=","min","(","lL",",","min","(","min","(","lH",",","lI",")",",","min","(","lJ",",","lK",")",")",")",";","float","lN","=","max","(","lL",",","max","(","max","(","lH",",","lI",")",",","max","(","lJ",",","lK",")",")",")",";","vec2","lO",";","lO",".","x","=","-","(","(","lH","+","lI",")","-","(","lJ","+","lK",")",")",";","lO",".","y","=","(","(","lH","+","lJ",")","-","(","lI","+","lK",")",")",";","float","lP","=","max","(","(","lH","+","lI","+","lJ","+","lK",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","float","lQ","=","1.0","/","(","min","(","abs","(","lO",".","x",")",",","abs","(","lO",".","y",")",")","+","lP",")",";","lO","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","lO","*","lQ",")",")","*","u_texel_size",";","vec4","lR","=","0.5","*","(","texture2D","(","u_color",",","a","+","lO","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","lO","*","(","2.0","/","3.0","-","0.5",")",")",")",";","vec4","mY","=","lR","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","lO","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","lO","*","0.5",")",")",";","float","mZ","=","lB","(","mY",")",";","if","(","(","mZ","<","lM",")","||","(","mZ",">","lN",")",")","return","lR",";","else","return","mY",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","oL","(",")","{","vec2","na",";","na",".","x","=","a",".","x",";","na",".","y","=","a",".","y",";","vec4","nb","=","texture2D","(","u_color",",","na",")",";","vec4","nc","=","lx","(","0.0",",","1.0",")",";","vec4","nd","=","lx","(","1.0",",","0.0",")",";","vec4","ne","=","lx","(","0.0",",","-","1.0",")",";","vec4","nf","=","lx","(","-","1.0",",","0.0",")",";","float","ng","=","lB","(","nc",")",";","float","nh","=","lB","(","nd",")",";","float","ni","=","lB","(","ne",")",";","float","nj","=","lB","(","nf",")",";","float","nk","=","lB","(","nb",")",";","float","nl","=","max","(","ng",",","nk",")",";","float","nm","=","min","(","ng",",","nk",")",";","float","nn","=","max","(","nh",",","nl",")",";","float","no","=","min","(","nh",",","nm",")",";","float","np","=","max","(","ni",",","nj",")",";","float","nq","=","min","(","ni",",","nj",")",";","float","nr","=","max","(","np",",","nn",")",";","float","ns","=","min","(","nq",",","no",")",";","float","nt","=","nr","*","FXAA_QUALITY_EDGE_THRESHOLD",";","float","nu","=","nr","-","ns",";","float","nv","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","nt",")",";","bool","nw","=","nu","<","nv",";","if","(","nw",")","return","nb",";","vec4","nx","=","lx","(","-","1.0",",","-","1.0",")",";","vec4","ny","=","lx","(","1.0",",","1.0",")",";","vec4","nz","=","lx","(","1.0",",","-","1.0",")",";","vec4","nA","=","lx","(","-","1.0",",","1.0",")",";","float","nB","=","lB","(","nx",")",";","float","nC","=","lB","(","ny",")",";","float","nD","=","lB","(","nz",")",";","float","nE","=","lB","(","nA",")",";","float","nF","=","ni","+","ng",";","float","nG","=","nj","+","nh",";","float","nH","=","1.0","/","nu",";","float","nI","=","nF","+","nG",";","float","nJ","=","(","-","2.0","*","nk",")","+","nF",";","float","nK","=","(","-","2.0","*","nk",")","+","nG",";","float","nL","=","nD","+","nC",";","float","nM","=","nB","+","nD",";","float","nN","=","(","-","2.0","*","nh",")","+","nL",";","float","nO","=","(","-","2.0","*","ni",")","+","nM",";","float","nP","=","nB","+","nE",";","float","nQ","=","nE","+","nC",";","float","nR","=","(","abs","(","nJ",")","*","2.0",")","+","abs","(","nN",")",";","float","nS","=","(","abs","(","nK",")","*","2.0",")","+","abs","(","nO",")",";","float","nT","=","(","-","2.0","*","nj",")","+","nP",";","float","nU","=","(","-","2.0","*","ng",")","+","nQ",";","float","nV","=","abs","(","nT",")","+","nR",";","float","nW","=","abs","(","nU",")","+","nS",";","float","nX","=","nP","+","nL",";","float","nY","=","u_texel_size",".","x",";","bool","nZ","=","nV",">=","nW",";","float","n_","=","nI","*","2.0","+","nX",";","if","(","!","nZ",")","ni","=","nj",";","if","(","!","nZ",")","ng","=","nh",";","if","(","nZ",")","nY","=","u_texel_size",".","y",";","float","oa","=","(","n_","*","(","1.0","/","12.0",")",")","-","nk",";","float","ob","=","ni","-","nk",";","float","oc","=","ng","-","nk",";","float","od","=","ni","+","nk",";","float","oe","=","ng","+","nk",";","bool","of","=","abs","(","ob",")",">=","abs","(","oc",")",";","float","og","=","max","(","abs","(","ob",")",",","abs","(","oc",")",")",";","if","(","of",")","nY","=","-","nY",";","float","oh","=","clamp","(","abs","(","oa",")","*","nH",",","0.0",",","1.0",")",";","vec2","oi",";","oi",".","x","=","na",".","x",";","oi",".","y","=","na",".","y",";","vec2","oj",";","oj",".","x","=","(","!","nZ",")","?","0.0",":","u_texel_size",".","x",";","oj",".","y","=","(","nZ",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","nZ",")","oi",".","x","+=","nY","*","0.5",";","if","(","nZ",")","oi",".","y","+=","nY","*","0.5",";","vec2","ok",";","ok",".","x","=","oi",".","x","-","oj",".","x",";","ok",".","y","=","oi",".","y","-","oj",".","y",";","vec2","ol",";","ol",".","x","=","oi",".","x","+","oj",".","x",";","ol",".","y","=","oi",".","y","+","oj",".","y",";","float","om","=","(","(","-","2.0",")","*","oh",")","+","3.0",";","float","on","=","lB","(","texture2D","(","u_color",",","ok",")",")",";","float","oo","=","oh","*","oh",";","float","op","=","lB","(","texture2D","(","u_color",",","ol",")",")",";","if","(","!","of",")","od","=","oe",";","float","oq","=","og","*","1.0","/","4.0",";","float","or","=","nk","-","od","*","0.5",";","float","os","=","om","*","oo",";","bool","ot","=","or","<","0.0",";","on","-=","od","*","0.5",";","op","-=","od","*","0.5",";","bool","ou","=","abs","(","on",")",">=","oq",";","bool","ov","=","abs","(","op",")",">=","oq",";","if","(","!","ou",")","ok",".","x","-=","oj",".","x","*","1.5",";","if","(","!","ou",")","ok",".","y","-=","oj",".","y","*","1.5",";","bool","ow","=","(","!","ou",")","||","(","!","ov",")",";","if","(","!","ov",")","ol",".","x","+=","oj",".","x","*","1.5",";","if","(","!","ov",")","ol",".","y","+=","oj",".","y","*","1.5",";","if","(","ow",")","{","if","(","!","ou",")","on","=","lB","(","texture2D","(","u_color",",","ok",".","xy",")",")",";","if","(","!","ov",")","op","=","lB","(","texture2D","(","u_color",",","ol",".","xy",")",")",";","if","(","!","ou",")","on","=","on","-","od","*","0.5",";","if","(","!","ov",")","op","=","op","-","od","*","0.5",";","ou","=","abs","(","on",")",">=","oq",";","ov","=","abs","(","op",")",">=","oq",";","if","(","!","ou",")","ok",".","x","-=","oj",".","x","*","2.0",";","if","(","!","ou",")","ok",".","y","-=","oj",".","y","*","2.0",";","ow","=","(","!","ou",")","||","(","!","ov",")",";","if","(","!","ov",")","ol",".","x","+=","oj",".","x","*","2.0",";","if","(","!","ov",")","ol",".","y","+=","oj",".","y","*","2.0",";","if","(","ow",")","{","if","(","!","ou",")","on","=","lB","(","texture2D","(","u_color",",","ok",".","xy",")",")",";","if","(","!","ov",")","op","=","lB","(","texture2D","(","u_color",",","ol",".","xy",")",")",";","if","(","!","ou",")","on","=","on","-","od","*","0.5",";","if","(","!","ov",")","op","=","op","-","od","*","0.5",";","ou","=","abs","(","on",")",">=","oq",";","ov","=","abs","(","op",")",">=","oq",";","if","(","!","ou",")","ok",".","x","-=","oj",".","x","*","2.0",";","if","(","!","ou",")","ok",".","y","-=","oj",".","y","*","2.0",";","ow","=","(","!","ou",")","||","(","!","ov",")",";","if","(","!","ov",")","ol",".","x","+=","oj",".","x","*","2.0",";","if","(","!","ov",")","ol",".","y","+=","oj",".","y","*","2.0",";","if","(","ow",")","{","if","(","!","ou",")","on","=","lB","(","texture2D","(","u_color",",","ok",".","xy",")",")",";","if","(","!","ov",")","op","=","lB","(","texture2D","(","u_color",",","ol",".","xy",")",")",";","if","(","!","ou",")","on","=","on","-","od","*","0.5",";","if","(","!","ov",")","op","=","op","-","od","*","0.5",";","ou","=","abs","(","on",")",">=","oq",";","ov","=","abs","(","op",")",">=","oq",";","if","(","!","ou",")","ok",".","x","-=","oj",".","x","*","4.0",";","if","(","!","ou",")","ok",".","y","-=","oj",".","y","*","4.0",";","ow","=","(","!","ou",")","||","(","!","ov",")",";","if","(","!","ov",")","ol",".","x","+=","oj",".","x","*","4.0",";","if","(","!","ov",")","ol",".","y","+=","oj",".","y","*","4.0",";","if","(","ow",")","{","if","(","!","ou",")","on","=","lB","(","texture2D","(","u_color",",","ok",".","xy",")",")",";","if","(","!","ov",")","op","=","lB","(","texture2D","(","u_color",",","ol",".","xy",")",")",";","if","(","!","ou",")","on","=","on","-","od","*","0.5",";","if","(","!","ov",")","op","=","op","-","od","*","0.5",";","ou","=","abs","(","on",")",">=","oq",";","ov","=","abs","(","op",")",">=","oq",";","if","(","!","ou",")","ok",".","x","-=","oj",".","x","*","2.0",";","if","(","!","ou",")","ok",".","y","-=","oj",".","y","*","2.0",";","if","(","!","ov",")","ol",".","x","+=","oj",".","x","*","2.0",";","if","(","!","ov",")","ol",".","y","+=","oj",".","y","*","2.0",";","}","}","}","}","float","ox","=","na",".","x","-","ok",".","x",";","float","oy","=","ol",".","x","-","na",".","x",";","if","(","!","nZ",")","ox","=","na",".","y","-","ok",".","y",";","if","(","!","nZ",")","oy","=","ol",".","y","-","na",".","y",";","bool","oz","=","(","on","<","0.0",")","!=","ot",";","float","oA","=","(","oy","+","ox",")",";","bool","oB","=","(","op","<","0.0",")","!=","ot",";","float","oC","=","1.0","/","oA",";","bool","oD","=","ox","<","oy",";","float","oE","=","min","(","ox",",","oy",")",";","bool","oF","=","oD","?","oz",":","oB",";","float","oG","=","os","*","os",";","float","oH","=","(","oE","*","(","-","oC",")",")","+","0.5",";","float","oI","=","oG","*","FXAA_QUALITY_SUBPIX",";","float","oJ","=","oF","?","oH",":","0.0",";","float","oK","=","max","(","oJ",",","oI",")",";","if","(","!","nZ",")","na",".","x","+=","oK","*","nY",";","if","(","nZ",")","na",".","y","+=","oK","*","nY",";","return","texture2D","(","u_color",",","na",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","m_","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","oL","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","lu","=","vec2","(","0.0",",","0.0",")",";","vec2","lv","=","u_texel_size",";","vec4","lw","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lw","*","0.0875447373698",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0858112354248",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0808139781061",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0731235112908",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0635705267419",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0530985673112",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0426125984122",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0328565115809",";","lu","+=","lv",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","lu",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","lu",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","lw",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_main",",","a",")",";","vec4","lv","=","texture2D","(","u_bloom",",","a",")",";","vec4","lw","=","lu",";","lw","+=","lv",";","gl_FragColor","=","vec4","(","lw",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_color",",","a",")",";","vec3","lv","=","lu",".","rgb",";","if","(","u_brightness","<","0.0",")","lv","=","lv","*","(","1.0","+","u_brightness",")",";","else","lv","=","lv","+","(","(","1.0","-","lv",")","*","u_brightness",")",";","lv","=","(","lv","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","lv","*=","u_exposure",";","vec3","lw","=","vec3","(","0.299",",","0.587",",","0.114",")",";","float","lx","=","dot","(","lv",",","lw",")",";","lv","=","mix","(","vec3","(","lx",")",",","lv",",","u_saturation",")",";","gl_FragColor","=","vec4","(","lv",",","lu",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cs","(","clamp","(","ne","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","vec4","nf","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","float","ng","=","ne","(","u_depth",",","a",",","u_camera_range",")",";","ng","*=","u_view_max_depth",";","float","nh",";","if","(","ng","<","u_dof_dist",")","nh","=","(","u_dof_dist","-","ng",")","/","u_dof_front",";","else","nh","=","(","ng","-","u_dof_dist",")","/","u_dof_rear",";","nh","=","clamp","(","nh",",","0.0",",","1.0",")",";","vec4","ni","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","nf",",","ni",",","nh",")",";","}","else","gl_FragColor","=","nf",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","lz","(","float","lu",",","float","lv",",","float","lw",")","{","vec2","lx","=","a","+","vec2","(","lu",",","lv",")","*","u_texel_size",";","vec4","ly","=","texture2D","(","u_sampler",",","lx",")","*","lw",";","return","cw","(","ly",")",";","}","void","main","(",")","{","float","lA","=","(","lz","(","-","1.0",",","-","1.0",",","-","1.0",")","+","lz","(","0.0",",","-","1.0",",","-","1.0",")","+","lz","(","1.0",",","-","1.0",",","-","1.0",")","+","lz","(","-","1.0",",","0.0",",","-","1.0",")","+","lz","(","0.0",",","0.0",",","8.0",")","+","lz","(","1.0",",","0.0",",","-","1.0",")","+","lz","(","-","1.0",",","1.0",",","-","1.0",")","+","lz","(","0.0",",","1.0",",","-","1.0",")","+","lz","(","1.0",",","1.0",",","-","1.0",")",")",";","lA","*=","1000.0",";","gl_FragColor","=","vec4","(","lA",",","lA",",","lA",",","1.0",")",";","}"]}]},exports["postprocessing/glow.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_glow_src",";","uniform","sampler2D","u_glow_mask",";","uniform","sampler2D","u_glow_mask_blurred",";","uniform","vec3","u_glow_color",";","uniform","float","u_draw_glow",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_glow_src",",","a",")",";","gl_FragColor","=","lu",";","if","(","u_draw_glow","!=","0.0",")","{","vec4","lv","=","texture2D","(","u_glow_mask",",","a",")",";","vec4","lw","=","texture2D","(","u_glow_mask_blurred",",","a",")",";","float","lx","=","lw",".","a","-","lv",".","a",";","if","(","lx","!=","0.0",")","{","float","ly","=","smoothstep","(","0.0",",","1.0",",","lw",".","a",")",";","if","(","lv",".","a","==","0.0",")","{","vec3","lz","=","u_glow_color",";","gA","(","lz",")",";","vec4","lA","=","vec4","(","clamp","(","lz",",","0.0",",","1.0",")",",","ly",")",";","gl_FragColor","=","mix","(","lu",",","lA",",","ly",")",";","}","}","}","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","nf",";","varying","vec2","ng",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nh",";","void","main","(",")","{","vec2","ni","=","(","nh",".","xy","-","a",")",";","float","nj","=","length","(","ni",")",";","vec2","nk","=","u_radial_blur_step","*","ni","/","nj",";","float","nl","=","nj","/","u_radial_blur_step",";","nk","*=","min","(","nl",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","nl","=","max","(","nl",",","STEPS_PER_PASS",")",";","vec2","nm","=","a",";","float","nn","=","0.0",";","for","(","float","no","=","0.0",";","no","<","STEPS_PER_PASS",";","no","+=","1.0",")","{","if","(","no","<=","nl",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["float","np","=","ne","(","u_input",",","nm",",","u_camera_range",")",";","nn","+=","max","(","(","1.0","-","pow","(","nj",",","0.3",")",")","*","step","(","0.9",",","np",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","nq","=","texture2D","(","u_input",",","nm",")",";","nn","+=","cw","(","nq",")",";"]}]}}]},{type:"textline",tokens:["}","nm","+=","nk",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nr","=","a","+","ng",";","float","ns","=","dg","(","vec2","(","2.5","*","(","nr",".","x",")",",","2.5","*","(","nr",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","dg","(","vec2","(","5.0","*","(","nr",".","x",")","-","0.66","*","u_time",",","5.0","*","(","nr",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dM","(","vec2","(","7.5","*","(","nr",".","x",")","+","0.33","*","u_time",",","7.5","*","(","nr",".","y",")","-","0.33","*","u_time",")",")",";","ns","*=","clamp","(","1.2","-","sqrt","(","0.2","*","nj",")",",","0.0",",","1.0",")","*","nf",";","nn","=","max","(","ns",",","nn",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","cs","(","nn","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","vec4","u_refl_plane",";","varying","float","nf",";","varying","vec2","ng",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","nh",";","void","lB","(","in","vec4","lu",",","in","vec3","lv",",","out","vec3","lw",")","{","float","lx","=","lu",".","w","*","lv",".","x","+","lu",".","y","*","lv",".","z","-","lu",".","z","*","lv",".","y",";","float","ly","=","lu",".","w","*","lv",".","y","+","lu",".","z","*","lv",".","x","-","lu",".","x","*","lv",".","z",";","float","lz","=","lu",".","w","*","lv",".","z","+","lu",".","x","*","lv",".","y","-","lu",".","y","*","lv",".","x",";","float","lA","=","-","lu",".","x","*","lv",".","x","-","lu",".","y","*","lv",".","y","-","lu",".","z","*","lv",".","z",";","lw",".","x","=","lx","*","lu",".","w","-","lA","*","lu",".","x","-","ly","*","lu",".","z","+","lz","*","lu",".","y",";","lw",".","y","=","ly","*","lu",".","w","-","lA","*","lu",".","y","-","lz","*","lu",".","x","+","lx","*","lu",".","z",";","lw",".","z","=","lz","*","lu",".","w","-","lA","*","lu",".","z","-","lx","*","lu",".","y","+","ly","*","lu",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","lC","=","normalize","(","u_sun_direction",")",";","nh","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","lC",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_camera_eye",".","y","+","a_bb_vertex",".","t","<","-","u_refl_plane",".","w",")","{","nf","=","1.0",";","vec3","lD","=","vec3","(","0.0",",","1.0",",","0.0",")",";","vec3","lE",";","lB","(","u_camera_quat",",","lD",",","lE",")",";","lE","=","normalize","(","lE",")",";","float","lF","=","dot","(","lE",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","float","lG","=","atan","(","lE",".","x",",","lE",".","z",")",";","ng","=","vec2","(","-","lG",",","acos","(","lF",")",")",";","}","else","{","nf","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["nh",".","x","/=","nh",".","w",";","nh",".","y","/=","nh",".","w",";","nh",".","x","=","0.5","*","(","nh",".","x","+","1.0",")",";","nh",".","y","=","0.5","*","(","nh",".","y","+","1.0",")",";","nh","+=","99999.0","*","step","(","nh",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_main",",","a",")",";","vec3","lv","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","gy","(","lu",".","rgb",")",";","float","lw","=","cw","(","texture2D","(","u_god_rays",",","a",")",")",";","vec3","lx","=","lu",".","rgb","+","u_god_rays_intensity","*","vec3","(","lw",")","*","lv",";","gA","(","lx",")",";","gl_FragColor",".","rgb","=","lx",";","gl_FragColor",".","a","=","lu",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_color",",","a",")","*","0.38026",";","lu","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","lu","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","lu","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","lu","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","lu","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","lu","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","lu","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","lu","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","lu",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_input",",","a",")",";","float","lv","=","dot","(","lu",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","lv",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","lu",";","float","lv","=","0.0",";","for","(","float","lw","=","0.025",";","lw","<","1.0",";","lw","+=","0.05",")","for","(","float","lx","=","0.025",";","lx","<","1.0",";","lx","+=","0.05",")","{","lu","=","max","(","texture2D","(","u_input",",","vec2","(","lw",",","lx",")",")",".","r",",","0.01",")",";","lv","+=","log","(","lu",")",";","}","float","ly","=","exp","(","lv","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","ly",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","ni",";","void","main","(",")","{","float","nj","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","float","nk","=","texture2D","(","u_luminance",",","a",")",".","r",";","vec4","nl","=","texture2D","(","u_main",",","a",")",";","float","nm","=","nk","/","nj",";","float","nn","=","u_bloom_edge_lum",";","gl_FragColor","=","nl","*","max","(","nm","-","nn",",","0.0",")","*","ni",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","ni",";","const","vec3","lu","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","lC","(","in","vec4","lv",",","in","vec3","lw",",","out","vec3","lx",")","{","float","ly","=","lv",".","w","*","lw",".","x","+","lv",".","y","*","lw",".","z","-","lv",".","z","*","lw",".","y",";","float","lz","=","lv",".","w","*","lw",".","y","+","lv",".","z","*","lw",".","x","-","lv",".","x","*","lw",".","z",";","float","lA","=","lv",".","w","*","lw",".","z","+","lv",".","x","*","lw",".","y","-","lv",".","y","*","lw",".","x",";","float","lB","=","-","lv",".","x","*","lw",".","x","-","lv",".","y","*","lw",".","y","-","lv",".","z","*","lw",".","z",";","lx",".","x","=","ly","*","lv",".","w","-","lB","*","lv",".","x","-","lz","*","lv",".","z","+","lA","*","lv",".","y",";","lx",".","y","=","lz","*","lv",".","w","-","lB","*","lv",".","y","-","lA","*","lv",".","x","+","ly","*","lv",".","z",";","lx",".","z","=","lA","*","lv",".","w","-","lB","*","lv",".","z","-","ly","*","lv",".","y","+","lz","*","lv",".","x",";","}","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","vec3","lD",";","lC","(","u_camera_quat",",","lu",",","lD",")",";","ni","=","dot","(","-","lD",",","u_sun_direction",")","*","u_bloom_key",";","ni","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","lu","=","texture2D","(","u_mb_tex_curr",",","a",")",";","vec4","lv","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","lu","-","lv",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","lu","+","u_motion_blur_exp","*","lv",";","}","else","{","gl_FragColor","=","lu",";","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","lu","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","lu",".","r","+","lu",".","g","+","lu",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lv","=","vec2","(","0.0",",","0.0",")",";","vec2","lw","=","u_texel_size",";","vec4","lx",";","lx","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lx","*","0.2270270270",";","lv","+=","lw",";","lx","=","texture2D","(","u_color",",","a","+","lv",")",";","gl_FragColor","+=","lx","*","0.1945945946",";","lx","=","texture2D","(","u_color",",","a","-","lv",")",";","gl_FragColor","+=","lx","*","0.1945945946",";","lv","+=","lw",";","lx","=","texture2D","(","u_color",",","a","+","lv",")",";","gl_FragColor","+=","lx","*","0.1216216216",";","lx","=","texture2D","(","u_color",",","a","-","lv",")",";","gl_FragColor","+=","lx","*","0.1216216216",";","lv","+=","lw",";","lx","=","texture2D","(","u_color",",","a","+","lv",")",";","gl_FragColor","+=","lx","*","0.0540540541",";","lx","=","texture2D","(","u_color",",","a","-","lv",")",";","gl_FragColor","+=","lx","*","0.0540540541",";","lv","+=","lw",";","lx","=","texture2D","(","u_color",",","a","+","lv",")",";","gl_FragColor","+=","lx","*","0.0162162162",";","lx","=","texture2D","(","u_color",",","a","-","lv",")",";","gl_FragColor","+=","lx","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","lw","=","u_texel_size",";","vec4","lx","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","lx",";","if","(","lx",".","a","==","0.0",")","{","lx","=","texture2D","(","u_color",",","a","+","lw",")",";","if","(","lx",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","lx",".","a",")",";","else","{","lx","=","texture2D","(","u_color",",","a","-","lw",")",";","if","(","lx",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","lx",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","varying","vec2","a",";","void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nk",";","varying","vec4","nl",";","varying","vec4","nm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","nt","(","vec2","no",",","sampler2D","np",")","{","float","nq","=","texture2D","(","np",",","no",")",".","r",";","float","nr","=","texture2D","(","np",",","nk",".","xy",")",".","r",";","float","ns","=","texture2D","(","np",",","nk",".","zw",")",".","r",";","return","vec3","(","nq",",","nr",",","ns",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nz","(","vec2","nu",",","sampler2D","nv",")","{","vec3","nw","=","nt","(","nu",",","nv",")",";","vec2","nx","=","abs","(","nw",".","xx","-","nw",".","yz",")",";","vec2","ny","=","step","(","SMAA_PREDICATION_THRESHOLD",",","nx",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","ny",")",";","}"]}]}}]},{type:"textline",tokens:["void","nD","(","bvec2","nA",",","inout","vec2","nB",",","vec2","nC",")","{","if","(","nA",".","x",")","nB",".","x","=","nC",".","x",";","if","(","nA",".","y",")","nB",".","y","=","nC",".","y",";","}","void","nD","(","bvec4","nE",",","inout","vec4","nF",",","vec4","nG",")","{","nD","(","nE",".","xy",",","nF",".","xy",",","nG",".","xy",")",";","nD","(","nE",".","zw",",","nF",".","zw",",","nG",".","zw",")",";","}","vec2","nI","(","vec2","nH",")","{","return","sign","(","nH",")","*","floor","(","abs","(","nH",")","+",".5",")",";","}","vec4","nI","(","vec4","nJ",")","{","return","sign","(","nJ",")","*","floor","(","abs","(","nJ",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","n_","(","vec2","nK",",","sampler2D","nL"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","nM"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","nN","=","nz","(","nK",",","nM",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec2","nN","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["vec3","nO","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","float","nP","=","dot","(","texture2D","(","nL",",","nK",")",".","rgb",",","nO",")",";","float","nQ","=","dot","(","texture2D","(","nL",",","nk",".","xy",")",".","rgb",",","nO",")",";","float","nR","=","dot","(","texture2D","(","nL",",","nk",".","zw",")",".","rgb",",","nO",")",";","vec4","nS",";","nS",".","xy","=","abs","(","nP","-","vec2","(","nQ",",","nR",")",")",";","vec2","nT","=","step","(","nN",",","nS",".","xy",")",";","if","(","dot","(","nT",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","float","nU","=","dot","(","texture2D","(","nL",",","nl",".","xy",")",".","rgb",",","nO",")",";","float","nV","=","dot","(","texture2D","(","nL",",","nl",".","zw",")",".","rgb",",","nO",")",";","nS",".","zw","=","abs","(","nP","-","vec2","(","nU",",","nV",")",")",";","vec2","nW","=","max","(","nS",".","xy",",","nS",".","zw",")",";","float","nX","=","dot","(","texture2D","(","nL",",","nm",".","xy",")",".","rgb",",","nO",")",";","float","nY","=","dot","(","texture2D","(","nL",",","nm",".","zw",")",".","rgb",",","nO",")",";","nS",".","zw","=","abs","(","vec2","(","nQ",",","nR",")","-","vec2","(","nX",",","nY",")",")",";","nW","=","max","(","nW",".","xy",",","nS",".","zw",")",";","float","nZ","=","max","(","nW",".","x",",","nW",".","y",")",";","nT",".","xy","*=","step","(","nZ",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","nS",".","xy",")",";","return","nT",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","ob","(","vec2","oa",")","{","oa",".","r","=","oa",".","r","*","abs","(","5.0","*","oa",".","r","-","5.0","*","0.75",")",";","return","nI","(","oa",")",";","}","vec4","ob","(","vec4","oc",")","{","oc",".","rb","=","oc",".","rb","*","abs","(","5.0","*","oc",".","rb","-","5.0","*","0.75",")",";","return","nI","(","oc",")",";","}","vec2","ok","(","sampler2D","od",",","vec2","oe",",","vec2","of",",","out","vec2","og",")","{","vec4","oh","=","vec4","(","oe",",","-","1.0",",","1.0",")",";","vec3","oi","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","oj","=","0",";","oj","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","oj","++",")","{","if","(","oh",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","oh",".","w",">","0.9",")","{","oh",".","xyz","+=","oi","*","vec3","(","of",",","1.0",")",";","og","=","texture2D","(","od",",","oh",".","xy",",","0.0",")",".","rg",";","oh",".","w","=","dot","(","og",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","oh",".","zw",";","}","vec2","os","(","sampler2D","ol",",","vec2","om",",","vec2","on",",","out","vec2","oo",")","{","vec4","op","=","vec4","(","om",",","-","1.0",",","1.0",")",";","op",".","x","+=","0.25","*","u_texel_size",".","x",";","vec3","oq","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","or","=","0",";","or","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","or","++",")","{","if","(","op",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","op",".","w",">","0.9",")","{","op",".","xyz","=","oq","*","vec3","(","on",",","1.0",")","+","op",".","xyz",";","oo","=","texture2D","(","ol",",","op",".","xy",",","0.0",")",".","rg",";","oo","=","ob","(","oo",")",";","op",".","w","=","dot","(","oo",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","op",".","zw",";","}","vec2","oy","(","sampler2D","ot",",","vec2","ou",",","vec2","ov",",","float","ow",")","{","vec2","ox","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","ov","+","ou",";","ox","=","SMAA_AREATEX_PIXEL_SIZE","*","ox","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","ox",".","x","+=","0.5",";","ox",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","ow",";","return","texture2D","(","ot",",","ox",",","0.0",")",".","rg",";","}","vec2","oN","(","sampler2D","oz",",","sampler2D","oA",",","vec2","oB",",","vec2","oC",",","vec4","oD",")","{","vec2","oE","=","vec2","(","0.0",",","0.0",")",";","vec4","oF",";","vec2","oG",";","if","(","oC",".","r",">","0.0",")","{","oF",".","xz","=","ok","(","oz",",","oB",",","vec2","(","-","1.0",",","1.0",")",",","oG",")",";","oF",".","x","+=","float","(","oG",".","y",">","0.9",")",";","}","else","oF",".","xz","=","vec2","(","0.0",",","0.0",")",";","oF",".","yw","=","ok","(","oz",",","oB",",","vec2","(","1.0",",","-","1.0",")",",","oG",")",";","if","(","oF",".","x","+","oF",".","y",">","2.0",")","{","vec4","oH","=","vec4","(","-","oF",".","x","+","0.25",",","oF",".","x",",","oF",".","y",",","-","oF",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","oB",".","xyxy",";","vec4","oI",";","oI",".","xy","=","texture2D","(","oz",",","oH",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","oI",".","zw","=","texture2D","(","oz",",","oH",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","oI",".","yxwz","=","ob","(","oI",".","xyzw",")",";","vec2","oJ","=","vec2","(","2.0",",","2.0",")","*","oI",".","xz","+","oI",".","yw",";","nD","(","bvec2","(","step","(","0.9",",","oF",".","zw",")",")",",","oJ",",","vec2","(","0.0",",","0.0",")",")",";","oE","+=","oy","(","oA",",","oF",".","xy",",","oJ",",","oD",".","z",")",";","}","oF",".","xz","=","os","(","oz",",","oB",",","vec2","(","-","1",",","-","1",")",",","oG",")",";","if","(","texture2D","(","oz",",","oB","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","oF",".","yw","=","os","(","oz",",","oB",",","vec2","(","1",",","1",")",",","oG",")",";","oF",".","y","+=","float","(","oG",".","y",">","0.9",")",";","}","else","oF",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","oF",".","x","+","oF",".","y",">","2.0",")","{","vec4","oK","=","vec4","(","-","oF",".","x",",","-","oF",".","x",",","oF",".","y",",","oF",".","y",")","*","u_texel_size",".","xyxy","+","oB",".","xyxy",";","vec4","oL",";","oL",".","x","=","texture2D","(","oz",",","oK",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","oL",".","y","=","texture2D","(","oz",",","oK",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","oL",".","zw","=","texture2D","(","oz",",","oK",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","vec2","oM","=","vec2","(","2.0",",","2.0",")","*","oL",".","xz","+","oL",".","yw",";","nD","(","bvec2","(","step","(","0.9",",","oF",".","zw",")",")",",","oM",",","vec2","(","0",",","0",")",")",";","oE","+=","oy","(","oA",",","oF",".","xy",",","oM",",","oD",".","w",")",".","gr",";","}","return","oE",";","}"]}]}}]},{type:"textline",tokens:["float","oT","(","sampler2D","oO",",","vec2","oP",",","float","oQ",")","{","vec2","oR","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","vec2","oS","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","oQ",",","1.0",")",";","oR","+=","vec2","(","-","1.0",",","1.0",")",";","oS","+=","vec2","(","0.5",",","-","0.5",")",";","oR","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","oS","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","oO",",","oR","*","oP","+","oS",",","0.0",")",".","r",";","}","float","pa","(","sampler2D","oU",",","sampler2D","oV",",","vec2","oW",",","float","oX",")","{","vec2","oY","=","vec2","(","0.0",",","1.0",")",";","for","(","int","oZ","=","0",";","oZ","<","SMAA_MAX_SEARCH_STEPS",";","oZ","++",")","{","if","(","oW",".","x",">","oX","&&","oY",".","g",">","0.8281","&&","oY",".","r","==","0.0",")","{","oY","=","texture2D","(","oU",",","oW",",","0.0",")",".","rg",";","oW","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","oW",";","}","}","float","o_","=","-","(","255.0","/","127.0",")","*","oT","(","oV",",","oY",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","o_","+","oW",".","x",";","}","float","pi","(","sampler2D","pb",",","sampler2D","pc",",","vec2","pd",",","float","pe",")","{","vec2","pf","=","vec2","(","0.0",",","1.0",")",";","for","(","int","pg","=","0",";","pg","<","SMAA_MAX_SEARCH_STEPS",";","pg","++",")","{","if","(","pd",".","x","<","pe","&&","pf",".","g",">","0.8281","&&","pf",".","r","==","0.0",")","{","pf","=","texture2D","(","pb",",","pd",",","0.0",")",".","rg",";","pd","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","pd",";","}","}","float","ph","=","-","(","255.0","/","127.0",")","*","oT","(","pc",",","pf",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","ph","+","pd",".","x",";","}","float","pq","(","sampler2D","pj",",","sampler2D","pk",",","vec2","pl",",","float","pm",")","{","vec2","pn","=","vec2","(","1.0",",","0.0",")",";","for","(","int","po","=","0",";","po","<","SMAA_MAX_SEARCH_STEPS",";","po","++",")","{","if","(","pl",".","y",">","pm","&&","pn",".","r",">","0.8281","&&","pn",".","g","==","0.0",")","{","pn","=","texture2D","(","pj",",","pl",",","0.0",")",".","rg",";","pl","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pl",";","}","}","float","pp","=","-","(","255.0","/","127.0",")","*","oT","(","pk",",","pn",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","pp","+","pl",".","y",";","}","float","py","(","sampler2D","pr",",","sampler2D","ps",",","vec2","pt",",","float","pu",")","{","vec2","pv","=","vec2","(","1.0",",","0.0",")",";","for","(","int","pw","=","0",";","pw","<","SMAA_MAX_SEARCH_STEPS",";","pw","++",")","{","if","(","pt",".","y","<","pu","&&","pv",".","r",">","0.8281","&&","pv",".","g","==","0.0",")","{","pv","=","texture2D","(","pr",",","pt",",","0.0",")",".","rg",";","pt","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","pt",";","}","}","float","px","=","-","(","255.0","/","127.0",")","*","oT","(","ps",",","pv",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","px","+","pt",".","y",";","}","vec2","pF","(","sampler2D","pz",",","vec2","pA",",","float","pB",",","float","pC",",","float","pD",")","{","vec2","pE","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","nI","(","4.0","*","vec2","(","pB",",","pC",")",")","+","pA",";","pE","=","SMAA_AREATEX_PIXEL_SIZE","*","pE","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","pE",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","pD","+","pE",".","y",";","return","texture2D","(","pz",",","pE",",","0.0",")",".","rg",";","}","void","pN","(","sampler2D","pG",",","inout","vec2","pH",",","vec4","pI",",","vec2","pJ",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pK","=","step","(","pJ",".","xy",",","pJ",".","yx",")",";","vec2","pL","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pK",";","pL","/=","pK",".","x","+","pK",".","y",";","vec2","pM","=","vec2","(","1.0",",","1.0",")",";","pM",".","x","-=","pL",".","x","*","texture2D","(","pG",",","pI",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","pM",".","x","-=","pL",".","y","*","texture2D","(","pG",",","pI",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","pM",".","y","-=","pL",".","x","*","texture2D","(","pG",",","pI",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","pM",".","y","-=","pL",".","y","*","texture2D","(","pG",",","pI",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","pH","*=","clamp","(","pM",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","pV","(","sampler2D","pO",",","inout","vec2","pP",",","vec4","pQ",",","vec2","pR",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","pS","=","step","(","pR",".","xy",",","pR",".","yx",")",";","vec2","pT","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","pS",";","pT","/=","pS",".","x","+","pS",".","y",";","vec2","pU","=","vec2","(","1.0",",","1.0",")",";","pU",".","x","-=","pT",".","x","*","texture2D","(","pO",",","pQ",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","pU",".","x","-=","pT",".","y","*","texture2D","(","pO",",","pQ",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","pU",".","y","-=","pT",".","x","*","texture2D","(","pO",",","pQ",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","pU",".","y","-=","pT",".","y","*","texture2D","(","pO",",","pQ",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","pP","*=","clamp","(","pU",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qn","(","vec2","pW",",","vec2","pX",",","sampler2D","pY",",","sampler2D","pZ",",","sampler2D","p_",",","vec4","qa",")","{","vec4","qb","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","vec2","qc","=","texture2D","(","pY",",","pW",")",".","rg",";","if","(","qc",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["qb",".","rg","=","oN","(","pY",",","pZ",",","pW",",","qc",",","qa",")",";","if","(","qb",".","r","==","-","qb",".","g",")","{"]}]}}]},{type:"textline",tokens:["vec2","qd",";","vec3","qe",";","qe",".","x","=","pa","(","pY",",","p_",",","nk",".","xy",",","nm",".","x",")",";","qe",".","y","=","nl",".","y",";","qd",".","x","=","qe",".","x",";","float","qf","=","texture2D","(","pY",",","qe",".","xy",",","0.0",")",".","r",";","qe",".","z","=","pi","(","pY",",","p_",",","nk",".","zw",",","nm",".","y",")",";","qd",".","y","=","qe",".","z",";","qd","=","abs","(","nI","(","qd","/","u_texel_size",".","xx","-","pX",".","xx",")",")",";","vec2","qg","=","sqrt","(","qd",")",";","float","qh","=","texture2D","(","pY",",","qe",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","qb",".","rg","=","pF","(","pZ",",","qg",",","qf",",","qh",",","qa",".","y",")",";","qe",".","y","=","pW",".","y",";","pN","(","pY",",","qb",".","rg",",","qe",".","xyzy",",","qd",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","qc",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","qc",".","r",">","0.0",")","{","vec2","qi",";","vec3","qj",";","qj",".","y","=","pq","(","pY",",","p_",",","nl",".","xy",",","nm",".","z",")",";","qj",".","x","=","nk",".","x",";","qi",".","x","=","qj",".","y",";","float","qk","=","texture2D","(","pY",",","qj",".","xy",",","0.0",")",".","g",";","qj",".","z","=","py","(","pY",",","p_",",","nl",".","zw",",","nm",".","w",")",";","qi",".","y","=","qj",".","z",";","qi","=","abs","(","nI","(","qi","/","u_texel_size",".","yy","-","pX",".","yy",")",")",";","vec2","ql","=","sqrt","(","qi",")",";","float","qm","=","texture2D","(","pY",",","qj",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","qb",".","ba","=","pF","(","pZ",",","ql",",","qk",",","qm",",","qa",".","x",")",";","qj",".","x","=","pW",".","x",";","pV","(","pY",",","qb",".","ba",",","qj",".","xyxz",",","qi",")",";","}","return","qb",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qE","(","vec2","qo",",","sampler2D","qp",",","sampler2D","qq"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qr"]}]}}]},{type:"textline",tokens:[")","{","vec4","qs",";","qs",".","x","=","texture2D","(","qq",",","nj",".","xy",")",".","a",";","qs",".","y","=","texture2D","(","qq",",","nj",".","zw",")",".","g",";","qs",".","wz","=","texture2D","(","qq",",","qo",")",".","xz",";","if","(","dot","(","qs",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","vec4","qt","=","texture2D","(","qp",",","qo",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qu","=","texture2D","(","qr",",","a",")",";","vec2","qv","=","2.0","*","cE","(","qu",")","-","1.0",";","qt",".","a","=","sqrt","(","2.0","*","length","(","qv",")",")",";"]}]}}]},{type:"textline",tokens:["return","qt",";","}","else","{","bool","qw","=","max","(","qs",".","x",",","qs",".","z",")",">","max","(","qs",".","y",",","qs",".","w",")",";","vec4","qx","=","vec4","(","0.0",",","qs",".","y",",","0.0",",","qs",".","w",")",";","vec2","qy","=","qs",".","yw",";","nD","(","bvec4","(","qw",",","qw",",","qw",",","qw",")",",","qx",",","vec4","(","qs",".","x",",","0.0",",","qs",".","z",",","0.0",")",")",";","nD","(","bvec2","(","qw",",","qw",")",",","qy",",","qs",".","xz",")",";","qy","/=","dot","(","qy",",","vec2","(","1.0",",","1.0",")",")",";","vec4","qz","=","qx","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","qo",".","xyxy",";","vec4","qA","=","qy",".","x","*","texture2D","(","qp",",","qz",".","xy",",","0.0",")",";","qA","+=","qy",".","y","*","texture2D","(","qp",",","qz",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qB","=","texture2D","(","qr",",","qz",".","xy",")",";","vec2","qC","=","2.0","*","cE","(","qB",")","-","1.0",";","vec2","qD","=","qy",".","x","*","qC",";","qB","=","texture2D","(","qr",",","qz",".","zw",")",";","qC","=","2.0","*","cE","(","qB",")","-","1.0",";","qD","+=","qy",".","y","*","qC",";","qA",".","a","=","sqrt","(","2.0","*","length","(","qD",")",")",";"]}]}}]},{type:"textline",tokens:["return","qA",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qQ","(","vec2","qF",",","sampler2D","qG",",","sampler2D","qH"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","qI"]}]}}]},{type:"textline",tokens:[")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qJ","=","texture2D","(","qI",",","a",")",";","vec2","qK",";","qK","=","2.0","*","cE","(","qJ",")","-","1.0",";","vec4","qL","=","texture2D","(","qG",",","qF",")",";","vec4","qM","=","texture2D","(","qH",",","qF","-","qK",")",";","float","qN","=","abs","(","qL",".","a","*","qL",".","a","-","qM",".","a","*","qM",".","a",")","/","2.0",";","float","qO","=","0.5","*","clamp","(","1.0","-","sqrt","(","qN",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","vec4","qP","=","mix","(","qL",",","qM",",","qO",")",";","qP",".","a","=","1.0",";","return","qP",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qL","=","texture2D","(","qG",",","qF",")",";","vec4","qM","=","texture2D","(","qH",",","qF",")",";","return","mix","(","qL",",","qM",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qR","=","vec4","(","n_","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qR","=","qn","(","a",",","nn",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qR","=","qE","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","qR","=","vec4","(","qQ","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec4","qR","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","qR",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","nk",";","varying","vec4","nl",";","varying","vec4","nm",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","nn",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","lv","(","vec2","lu",")","{","nk","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","lu",".","xyxy",";","nl","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","lu",".","xyxy",";","nm","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","lu",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","ly","(","vec2","lw",",","out","vec2","lx",")","{","lx","=","lw","/","u_texel_size",";","nk","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","lw",".","xyxy",";","nl","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","lw",".","xyxy",";","nm","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","nk",".","xz",",","nl",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","lA","(","vec2","lz",")","{","nj","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","lz",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","a_bb_vertex","+","0.5",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["lv","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["ly","(","a",",","nn",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["lA","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","np","(","in","vec2","no",")","{","return","ne","(","u_depth",",","no",",","u_camera_range",")",";","}","void","main","(",")","{","float","nq","=","texture2D","(","u_color",",","a",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","nq",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["vec3","nr","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","a","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","float","ns","=","np","(","a",")",";","float","nt","=","ns","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_8"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nu","=","8.0",";","const","int","nv","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nu","=","16.0",";","const","int","nv","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_24"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nu","=","24.0",";","const","int","nv","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","nu","=","32.0",";","const","int","nv","=","4",";"]}]}}]},{type:"textline",tokens:["float","nw","=","u_ssao_radius_increase","*","0.001",";","const","float","nx","=","1.0","+","2.4","/","nu",";","float","ny","=","0.0",";","for","(","int","nz","=","0",";","nz","<","nv",";","nz","++",")","for","(","int","nA","=","-","1",";","nA","<=","1",";","nA","+=","2",")","for","(","int","nB","=","-","1",";","nB","<=","1",";","nB","+=","2",")","for","(","int","nC","=","-","1",";","nC","<=","1",";","nC","+=","2",")","{","vec3","nD","=","reflect","(","normalize","(","vec3","(","nA",",","nB",",","nC",")",")",",","nr",")","*","(","nw","*=","nx",")",";","vec3","nE","=","vec3","(","a",",","nt",")",";","nE","+=","vec3","(","nD",".","xy",",","nD",".","z","*","nt","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["nE",".","z","-=","1.4","*","(","nE",".","z","-","nt",")","*","step","(","nt",",","nE",".","z",")",";"]}]}}]},{type:"textline",tokens:["float","nF","=","np","(","nE",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","float","nG","=","clamp","(","(","nt","-","nF",")","/","nF",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["ny","+=","mix","(","1.0",",","nG",",","step","(","nF",",","nE",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ny","+=","mix","(","step","(","nE",".","z",",","nF",")",",","0.5",",","nG",")",";"]}]}}]},{type:"textline",tokens:["}","ny","=","ny","/","nu",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["ny","=","clamp","(","ny","*","ny","+","0.6","*","ny",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ny","=","clamp","(","ny","*","ny","+","ny",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["float","nH","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","ns",")",";","ny","=","mix","(","1.0",",","ny",",","nH",")",";","gl_FragColor","=","vec4","(","nq",",","ny",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","np","(","in","vec2","no",")","{","return","ne","(","u_depth",",","no",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","nq","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nr","=","np","(","a",")",";","float","ns","=","0.0",";","float","nt","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["vec2","nu","=","vec2","(","-","2.0",")",";","for","(","int","nv","=","0",";","nv","<","4",";","++","nv",")","{","for","(","int","nw","=","0",";","nw","<","4",";","++","nw",")","{","vec2","nx","=","(","nu","+","vec2","(","float","(","nv",")",",","float","(","nw",")",")",")","*","u_texel_size",";","float","ny","=","texture2D","(","u_ssao_mask",",","a","+","nx",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["float","nz","=","np","(","a","+","nx",")",";","float","nA","=","1.0","-","clamp","(","abs","(","nz","-","nr",")","*","nt",",","0.0",",","1.0",")",";","nq","+=","ny","*","nA",";","ns","+=","nA",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["nq","+=","ny",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nq","/","ns",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","nq","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","float","lu","=","texture2D","(","u_depth",",","a",")",".","x",";","vec4","lv","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","lu","-","1.0",",","1.0",")",";","vec4","lw","=","u_view_proj_inverse","*","lv",";","vec4","lx","=","lw","/","lw",".","w",";","vec4","ly","=","u_view_proj_prev","*","lx",";","ly","/=","ly",".","w",";","vec2","lz","=","(","lv",".","xy","-","ly",".","xy",")","/","4.0","+","0.5",";","lz","=","clamp","(","lz",",","0.0",",","1.0",")",";","gl_FragColor","=","cs","(","lz",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","float","c","=","1.0",";","struct","d","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","g","(","vec3","e",",","vec3","f",")","{","return","any","(","lessThan","(","abs","(","e","-","f",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","j","(","in","vec4","h",",","in","vec3","i",")","{","return","i","+","2.0","*","cross","(","h",".","xyz",",","cross","(","h",".","xyz",",","i",")","+","h",".","w","*","i",")",";","}","mat4","k","(",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","m","(","float","l",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","cos","(","l",")",",","sin","(","l",")",",","b",",","b",",","-","sin","(","l",")",",","cos","(","l",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","o","(","float","n",")","{","return","mat4","(","cos","(","n",")",",","b",",","-","sin","(","n",")",",","b",",","b",",","c",",","b",",","b",",","sin","(","n",")",",","b",",","cos","(","n",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","q","(","float","p",")","{","return","mat4","(","cos","(","p",")",",","sin","(","p",")",",","b",",","b",",","-","sin","(","p",")",",","cos","(","p",")",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","d","s","(","in","d","r",")","{","return","d","(","r",".","a",",","r",".","b",",","normalize","(","r",".","c",")",",","normalize","(","r",".","d",")",",","normalize","(","r",".","e",")",",","r",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","t","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","z","(","vec3","u",",","mat4","v",")","{","vec3","w","=","vec3","(","v","[","0","]","[","0","]",",","v","[","1","]","[","0","]",",","v","[","2","]","[","0","]",")",";","vec3","x","=","vec3","(","v","[","0","]","[","1","]",",","v","[","1","]","[","1","]",",","v","[","2","]","[","1","]",")",";","vec3","y","=","vec3","(","v","[","0","]","[","2","]",",","v","[","1","]","[","2","]",",","v","[","2","]","[","2","]",")",";","x","=","cross","(","y",",","w",")",";","return","mat4","(","vec4","(","w",",","0.0",")",",","vec4","(","x",",","0.0",")",",","vec4","(","y",",","0.0",")",",","vec4","(","u",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","F","(","vec3","A",",","vec3","B",")","{","vec3","C","=","A","-","B",";","C",".","y","=","0.0",";","C","=","normalize","(","C",")",";","vec3","D","=","normalize","(","cross","(","t",",","C",")",")",";","vec3","E","=","normalize","(","cross","(","C",",","D",")",")",";","return","mat4","(","vec4","(","D",",","0.0",")",",","vec4","(","E",",","0.0",")",",","vec4","(","C",",","0.0",")",",","vec4","(","B",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","Q","(","in","vec3","G",",","float","H",",","float","I",",","float","J",",","vec3","L",")","{","float","M","=","fract","(","length","(","L",")","/","0.17",")",";","float","N","=","J","+","M","/","10.0",";","float","O","=","M",";","if","(","J","!=","0.0",")","O","/=","J",";","G","*=","1.0","+","0.5","*","sin","(","H",")",";","float","P","=","length","(","G",")","*","I","*","sin","(","2.0","*","3.14","*","H","*","N","+","O",")",";","return","q","(","P",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","aa","(","in","vec3","R",",","in","vec3","S",",","in","mat4","T",")","{"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","U","=","z","(","S",",","T",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["float","V","=","fract","(","(","S",".","x","*","1.43","+","S",".","y","*","0.123","+","S",".","z","*","6.1",")",")",";","float","W","=","2.0","*","M_PI","*","V",";","vec3","X","=","normalize","(","vec3","(","T","[","0","]","[","2","]",",","0.0",",","T","[","2","]","[","2","]",")",")",";","float","Y","=","acos","(","X","[","2","]",")",";","if","(","X","[","0","]","<","0.0",")","Y","=","2.0","*","M_PI","-","Y",";","float","Z","=","Y","-","W",";","if","(","Z","<","0.0",")","Z","=","2.0","*","M_PI","+","Z",";","float","_","=","W",";","if","(","Z","<=","MAX_BILLBOARD_ANGLE",")","_","+=","Z",";","else","if","(","Z","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","_","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Z","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","Z","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","_","+=","Z","-","M_PI",";","else","if","(","Z","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","_","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","Z","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","_","+=","Z","-","2.0","*","M_PI",";","mat4","U","=","o","(","_",")",";","U","[","3","]","=","vec4","(","S",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","U","=","F","(","R",",","S",")",";"]}]}}]},{type:"textline",tokens:["return","U",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ag","(","in","vec3","ab",",","in","vec3","ac",",","in","mat4","ad",",","mat4","ae",")","{","mat4","af","=","aa","(","ab",",","ac",",","ad",")",";","ae","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","af","*=","ae",";","return","af",";","}"]}]}}]},{type:"textline",tokens:["d","an","(","in","vec3","ah",",","in","vec3","ai",",","in","vec3","aj",",","in","vec3","ak",",","in","vec3","al",",","in","mat4","am",")","{","ah","=","(","am","*","vec4","(","ah",",","1.0",")",")",".","xyz",";","ai","=","(","am","*","vec4","(","ai",",","1.0",")",")",".","xyz",";","aj","=","(","am","*","vec4","(","aj",",","0.0",")",")",".","xyz",";","ak","=","(","am","*","vec4","(","ak",",","0.0",")",")",".","xyz",";","al","=","(","am","*","vec4","(","al",",","0.0",")",")",".","xyz",";","return","s","(","d","(","ah",",","ai",",","aj",",","ak",",","al",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","aq","(","vec2","ao",",","vec3","ap",")","{","return","(","ao","+","0.5",")","*","ap",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","az","(","in","vec4","ar",",","in","vec4","as",",","in","float","at",")","{","float","au","=","ar","[","0","]","*","as","[","0","]","+","ar","[","1","]","*","as","[","1","]","+","ar","[","2","]","*","as","[","2","]","+","ar","[","3","]","*","as","[","3","]",";","if","(","au","<","0.0",")","{","as","*=","-","1.0",";","au","=","-","au",";","}","if","(","abs","(","au",")",">=","1.0",")","return","ar",";","float","av","=","acos","(","au",")",";","float","aw","=","sqrt","(","1.0","-","au","*","au",")",";","if","(","abs","(","aw",")","<","0.001",")","return","vec4","(","ar","*","0.5","+","as","*","0.5",")",";","float","ax","=","sin","(","(","1.0","-","at",")","*","av",")","/","aw",";","float","ay","=","sin","(","at","*","av",")","/","aw",";","return","ar","*","ax","+","as","*","ay",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aO","(","in","vec3","aA",",","in","vec4","aB",",","in","vec4","aC",",","in","vec4","aD",",","in","vec4","aE",",","in","float","aF",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aG","=","az","(","aB",",","aC",",","aF",")",";","vec4","aH","=","mix","(","aD",",","aE",",","aF",")",";","vec3","aI","=","j","(","aG",",","aA",")",";","vec3","aJ","=","aI","*","aH",".","w","+","aH",".","xyz",";","return","aJ",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aK","=","j","(","aB",",","aA",")",";","vec3","aL","=","j","(","aC",",","aA",")",";","vec3","aM","=","aK","*","aD",".","w","+","aD",".","xyz",";","vec3","aN","=","aL","*","aE",".","w","+","aE",".","xyz",";","return","mix","(","aM",",","aN",",","aF",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","aX","(","in","vec3","aP",",","in","vec4","aQ",",","in","vec4","aR",",","in","float","aS",")","{"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aT","=","az","(","aQ",",","aR",",","aS",")",";","vec3","aU","=","j","(","aT",",","aP",")",";","return","aU",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aV","=","j","(","aQ",",","aP",")",";","vec3","aW","=","j","(","aR",",","aP",")",";","return","mix","(","aV",",","aW",",","aS",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aO","(","in","vec3","aY",",","in","vec4","aZ",",","in","vec4","a_",")","{","vec3","ba","=","j","(","aZ",",","aY",")",";","vec3","bb","=","ba","*","a_",".","w","+","a_",".","xyz",";","return","bb",";","}","vec3","aX","(","in","vec3","bc",",","in","vec4","bd",")","{","vec3","be","=","j","(","bd",",","bc",")",";","return","be",";","}"]}]}}]},{type:"textline",tokens:["void","bt","(","inout","vec3","bf",",","inout","vec3","bg",",","inout","vec3","bh",",","inout","vec3","bi",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["float","bj","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","vec3","bk","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bl","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bm","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec3","bn","=","vec3","(","0.0",",","0.0",",","0.0",")",";","vec4","bo","=","a_influence",";","for","(","int","bp","=","0",";","bp","<","4",";","bp","++",")","{","int","bq","=","int","(","bo","[","bp","]",")",";","float","br","=","fract","(","bo","[","bp","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bk","+=","br","*","aO","(","bf",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","u_transb","[","bq","]",",","u_transa","[","bq","]",",","bj",")",";","bl","+=","br","*","aX","(","bg",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","bj",")",";","bm","+=","br","*","aX","(","bh",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","bj",")",";","bn","+=","br","*","aX","(","bi",",","u_quatsb","[","bq","]",",","u_quatsa","[","bq","]",",","bj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bk","+=","br","*","aO","(","bf",",","u_quatsb","[","bq","]",",","u_transb","[","bq","]",")",";","bl","+=","br","*","aX","(","bg",",","u_quatsb","[","bq","]",")",";","bm","+=","br","*","aX","(","bh",",","u_quatsb","[","bq","]",")",";","bn","+=","br","*","aX","(","bi",",","u_quatsb","[","bq","]",")",";"]}]}}]},{type:"textline",tokens:["}","bf","=","bk",";","bg","=","bl",";","bh","=","bm",";","bi","=","bn",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","int","bs","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bs",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bf","=","aO","(","bf",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","u_transb","[","bs","]",",","u_transa","[","bs","]",",","bj",")",";","bg","=","aX","(","bg",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","bj",")",";","bh","=","aX","(","bh",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","bj",")",";","bi","=","aX","(","bi",",","u_quatsb","[","bs","]",",","u_quatsa","[","bs","]",",","bj",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bf","=","aO","(","bf",",","u_quatsb","[","bs","]",",","u_transb","[","bs","]",")",";","bg","=","aX","(","bg",",","u_quatsb","[","bs","]",")",";","bh","=","aX","(","bh",",","u_quatsb","[","bs","]",")",";","bi","=","aX","(","bi",",","u_quatsb","[","bs","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bH","(","inout","vec3","bu",",","in","vec3","bv",",","in","float","bw",",","in","float","bx",",","in","float","by",",","in","vec3","bz",",","in","float","bA",")","{","float","bB","=","length","(","bv",")",";","float","bC","=","bx","*","(","1.0","+","0.1","*","fract","(","bB",")",")",";","float","bD","=","bw","*","bA","*","(","1.0","+","sin","(","2.0","*","3.14","*","by","*","bC","+","bB",")",")",";","float","bE","=","(","bu",".","y","-","bv",".","y",")","*","abs","(","bD",")",";","bE","+=","1.0",";","bE","*=","bE",";","bE","=","bE","*","bE","-","bE",";","vec3","bF","=","bu",";","bF",".","xz","+=","bz",".","xz","*","bE","*","sign","(","bD",")",";","float","bG","=","length","(","bu","-","bv",")",";","bu","=","bv","+","normalize","(","bF","-","bv",")","*","bG",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bJ","(","vec4","bI",")","{","return","bI","*","bI","*","(","3.0","-","2.0","*","bI",")",";","}","vec4","bL","(","vec4","bK",")","{","return","abs","(","fract","(","bK","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bN","(","vec4","bM",")","{","return","bJ","(","bL","(","bM",")",")",";","}","void","cd","(","inout","vec3","bO",",","in","float","bP",",","in","vec3","bQ",",","in","vec3","bR",",","in","vec3","bS",",","in","float","bT",",","in","float","bU",",","in","float","bV",",","in","vec3","bW",")","{","float","bX",";","float","bY",";","float","bZ",";","vec2","b_",";","vec4","ca",";","vec2","cb",";","vec3","cc",";","bX","=","dot","(","bS",",","vec3","(","1.0",")",")",";","bY","=","bX","+","bW",".","g",";","bZ","=","dot","(","bO",",","vec3","(","bW",".","g",")",")",";","b_","=","(","bP","+","vec2","(","bZ",",","bY",")",")",";","ca","=","(","(","fract","(","(","b_",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bR",")","*","bT",";","ca","=","bN","(","ca",")",";","cb","=","ca",".","xz","+","ca",".","yw",";","cb",".","y","=","0.5","-","cb",".","y",";","cc","=","cb",".","xyx","*","bW",".","rbr","*","vec3","(","bU","*","bQ",".","x",",","bV",",","bU","*","bQ",".","z",")",";","bO","+=","cc",";","}"]}]}}]},{type:"textline",tokens:["void","ck","(","inout","vec3","ce",",","inout","vec3","cf",",","in","vec3","cg",")","{","vec3","ch","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","cf",";","vec3","cj","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","ci","=","ce",";","vec3","cj","=","cf",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cd","(","ci",",","u_time",",","cg",",","ch",",","cj",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bH","(","ci",",","cj",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ch",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bH","(","ci",",","cj",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","ch",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["ce","+=","ci","-","cf",";","cf","=","ci",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ce","=","ci",";","cf","=","cj",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cl","=","255.0",";","float","cm","=","0.0",";","float","cn","=","1.0",";","vec4","cs","(","const","in","float","co",")","{","vec4","cp","=","vec4","(","cl","*","cl","*","cl",",","cl","*","cl",",","cl",",","cn",")",";","vec4","cq","=","vec4","(","cm",",","cn","/","cl",",","cn","/","cl",",","cn","/","cl",")",";","vec4","cr","=","fract","(","co","*","cp",")",";","cr","-=","cr",".","xxyz","*","cq",";","return","cr",";","}","float","cw","(","const","in","vec4","ct",")","{","float","cu",";","vec4","cv","=","vec4","(","cn","/","(","cl","*","cl","*","cl",")",",","cn","/","(","cl","*","cl",")",",","cn","/","cl",",","cn",")",";","cu","=","dot","(","ct",",","cv",")",";","return","cu",";","}","vec4","cs","(","const","in","vec2","cx",")","{","vec2","cy","=","vec2","(","cl",",","cn",")",";","vec2","cz","=","vec2","(","cm",",","cn","/","cl",")",";","vec4","cA","=","fract","(","cx",".","xxyy","*","cy",".","xyxy",")",";","cA","-=","cA",".","xxzz","*","cz",".","xyxy",";","if","(","cx",".","r","==","cn",")","cA",".","rg","=","vec2","(","cm",",","cn",")",";","if","(","cx",".","g","==","cn",")","cA",".","ba","=","vec2","(","cm",",","cn",")",";","return","cA",";","}","vec2","cE","(","const","in","vec4","cB",")","{","vec2","cC",";","vec2","cD","=","vec2","(","cn","/","cl",",","cn",")",";","cC",".","r","=","dot","(","cB",".","rg",",","cD",")",";","cC",".","g","=","dot","(","cB",".","ba",",","cD",")",";","return","cC",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cM","=","0.0",";","float","cN","=","1.0",";","vec4","cP","(","vec4","cO",")","{","return","cO","-","floor","(","cO","*","(","cN","/","289.0",")",")","*","289.0",";","}","vec3","cP","(","vec3","cQ",")","{","return","cQ","-","floor","(","cQ","*","(","cN","/","289.0",")",")","*","289.0",";","}","vec2","cP","(","vec2","cR",")","{","return","cR","-","floor","(","cR","*","(","cN","/","289.0",")",")","*","289.0",";","}","vec4","cT","(","vec4","cS",")","{","return","cS","-","floor","(","cS","*","(","cN","/","7.0",")",")","*","7.0",";","}","vec4","cV","(","vec4","cU",")","{","return","cP","(","(","34.0","*","cU","+","5.0",")","*","cU",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","dg","(","vec2","cW",")","{","vec2","cX","=","cP","(","floor","(","cW",")",")",";","vec2","cY","=","fract","(","cW",")",";","vec4","cZ","=","cY",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","c_","=","cY",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","da","=","cV","(","cX",".","x","+","vec4","(","cM",",","cN",",","cM",",","cN",")",")",";","da","=","cV","(","da","+","cX",".","y","+","vec4","(","cM",",","cM",",","cN",",","cN",")",")",";","vec4","db","=","cT","(","da",")","*","K","+","K2",";","vec4","dc","=","cT","(","floor","(","da","*","K",")",")","*","K","+","K2",";","vec4","dd","=","cZ","+","JITTER","*","db",";","vec4","de","=","c_","+","JITTER","*","dc",";","vec4","df","=","dd","*","dd","+","de","*","de",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["df",".","xy","=","min","(","df",".","xy",",","df",".","zw",")",";","df",".","x","=","min","(","df",".","x",",","df",".","y",")",";","return","df",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["df",".","xy","=","(","df",".","x","<","df",".","y",")","?","df",".","xy",":","df",".","yx",";","df",".","xz","=","(","df",".","x","<","df",".","z",")","?","df",".","xz",":","df",".","zx",";","df",".","xw","=","(","df",".","x","<","df",".","w",")","?","df",".","xw",":","df",".","wx",";","df",".","y","=","min","(","df",".","y",",","df",".","z",")",";","df",".","y","=","min","(","df",".","y",",","df",".","w",")",";","return","sqrt","(","df",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dw","(","vec2","dh",",","float","di",")","{","vec2","dj","=","cP","(","floor","(","dh",")",")",";","vec2","dk","=","fract","(","dh",")",";","vec4","dl","=","dk",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","vec4","dm","=","dk",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","vec4","dn","=","cV","(","dj",".","x","+","vec4","(","cM",",","cN",",","cM",",","cN",")",")",";","dn","=","cV","(","dn","+","dj",".","y","+","vec4","(","cM",",","cM",",","cN",",","cN",")",")",";","vec4","dp","=","cT","(","dn",")","*","K","+","K2",";","vec4","dq","=","cT","(","floor","(","dn","*","K",")",")","*","K","+","K2",";","vec4","dr","=","dl","+","JITTER","*","dp",";","vec4","ds","=","dm","+","JITTER","*","dq",";","vec4","dt","=","dr","*","dr","+","ds","*","ds",";","dr","+=","di",";","ds","+=","di",";","vec4","du","=","dr","*","dr","+","ds","*","ds",";","dr","+=","di",";","ds","+=","di",";","vec4","dv","=","dr","*","dr","+","ds","*","ds",";","dt",".","xy","=","min","(","dt",".","xy",",","dt",".","zw",")",";","dt",".","x","=","min","(","dt",".","x",",","dt",".","y",")",";","du",".","xy","=","min","(","du",".","xy",",","du",".","zw",")",";","du",".","x","=","min","(","du",".","x",",","du",".","y",")",";","dv",".","xy","=","min","(","dv",".","xy",",","dv",".","zw",")",";","dv",".","x","=","min","(","dv",".","x",",","dv",".","y",")",";","return","mat3","(","dt",".","xx",",","cM",",","du",".","xx",",","cM",",","dv",".","xx",",","cM",")",";","}","vec3","dy","(","vec3","dx",")","{","return","cP","(","(","(","dx","*","34.0",")","+","cN",")","*","dx",")",";","}","float","dM","(","vec2","dz",")","{","const","vec4","dA","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","vec2","dB","=","floor","(","dz","+","dot","(","dz",",","dA",".","yy",")",")",";","vec2","dC","=","dz","-","dB","+","dot","(","dB",",","dA",".","xx",")",";","vec2","dD",";","dD","=","(","dC",".","x",">","dC",".","y",")","?","vec2","(","cN",",","cM",")",":","vec2","(","cM",",","cN",")",";","vec4","dE","=","dC",".","xyxy","+","dA",".","xxzz",";","dE",".","xy","-=","dD",";","dB","=","cP","(","dB",")",";","vec3","dF","=","dy","(","dy","(","dB",".","y","+","vec3","(","cM",",","dD",".","y",",","cN",")",")","+","dB",".","x","+","vec3","(","cM",",","dD",".","x",",","cN",")",")",";","vec3","dG","=","max","(","0.5","-","vec3","(","dot","(","dC",",","dC",")",",","dot","(","dE",".","xy",",","dE",".","xy",")",",","dot","(","dE",".","zw",",","dE",".","zw",")",")",",","cM",")",";","dG","=","dG","*","dG",";","dG","=","dG","*","dG",";","vec3","dH","=","2.0","*","fract","(","dF","*","dA",".","www",")","-","cN",";","vec3","dI","=","abs","(","dH",")","-","0.5",";","vec3","dJ","=","floor","(","dH","+","0.5",")",";","vec3","dK","=","dH","-","dJ",";","dG","*=","1.79284291400159","-","0.85373472095314","*","(","dK","*","dK","+","dI","*","dI",")",";","vec3","dL",";","dL",".","x","=","dK",".","x","*","dC",".","x","+","dI",".","x","*","dC",".","y",";","dL",".","yz","=","dK",".","yz","*","dE",".","xz","+","dI",".","yz","*","dE",".","yw",";","return","130.0","*","dot","(","dG",",","dL",")",";","}","vec2","dS","(","vec2","dN",")","{","float","dO","=","dot","(","dN",",","vec2","(","12.9898",",","78.233",")",")",";","float","dP","=","dot","(","dN",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","float","dQ","=","fract","(","sin","(","dO",")","*","43758.5453",")","*","2.0","-","cN",";","float","dR","=","fract","(","sin","(","dP",")","*","43758.5453",")","*","2.0","-","cN",";","return","vec2","(","dQ",",","dR",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dT",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dU","=","0.1",";","const","float","dV","=","0.1",";","const","float","dW","=","-","0.01",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dX","=","0.05",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","dY","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dZ","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["bool","eb","(","vec2","d_",",","float","ea",")","{","return","all","(","lessThanEqual","(","d_",",","vec2","(","1.0","+","ea",")",")",")","&&","all","(","greaterThanEqual","(","d_",",","vec2","(","0.0","-","ea",")",")",")",";","}"]}]}}]},{type:"textline",tokens:["float","eo","(","vec3","ec",",","sampler2D","ed",",","float","ee",")","{","float","ef",";","ec",".","z","=","clamp","(","ec",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["ef","=","0.0",";","float","eg","=","dS","(","ec",".","xy",")",".","x","*","M_PI",";","float","eh","=","cos","(","eg",")",";","float","ei","=","sin","(","eg",")",";","mat2","ej","=","mat2","(","eh",",","ei",",","-","ei",",","eh",")",";","vec2","ek",",","el",";","for","(","int","em","=","0",";","em","<","4",";","em","++",")","for","(","int","en","=","0",";","en","<","4",";","en","++",")","{","el",".","x","=","dY","[","em","]","[","en","]",";","el",".","y","=","dZ","[","em","]","[","en","]",";","el","=","ej","*","el",";","ek","=","ec",".","xy","+","el","*","ee","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["!","CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","eb","(","ek",",","dW",")",")","ef","+=","1.0",";","else"]}]}}]},{type:"textline",tokens:["ef","+=","step","(","ec",".","z",",","texture2D","(","ed",",","ek",")",".","r",")",";","}","ef","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ef","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","ef",",","0.0",",","1.0",")",";","}","float","eG","(","vec3","ep",",","sampler2D","eq",",","vec3","er",",","sampler2D","es",",","float","et",",","float","eu",",","float","ev",")","{","float","ew",",","ex",";","ep",".","z","=","clamp","(","ep",".","z",",","0.0",",","1.0",")",";","er",".","z","=","clamp","(","er",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["ew","=","0.0",";","ex","=","0.0",";","float","ey","=","dS","(","ep",".","xy",")",".","x","*","M_PI",";","float","ez","=","cos","(","ey",")",";","float","eA","=","sin","(","ey",")",";","mat2","eB","=","mat2","(","ez",",","eA",",","-","eA",",","ez",")",";","vec2","eC",",","eD",";","for","(","int","eE","=","0",";","eE","<","4",";","eE","++",")","for","(","int","eF","=","0",";","eF","<","4",";","eF","++",")","{","eD",".","x","=","dY","[","eE","]","[","eF","]",";","eD",".","y","=","dZ","[","eE","]","[","eF","]",";","eD","=","eB","*","eD",";","eC","=","ep",".","xy","+","eD","*","et","/","SHADOW_TEX_RES",";","ew","+=","step","(","ep",".","z",",","texture2D","(","eq",",","eC",")",".","r",")",";","eC","=","er",".","xy","+","eD","*","eu","/","SHADOW_TEX_RES",";","ex","+=","step","(","er",".","z",",","texture2D","(","es",",","eC",")",".","r",")",";","}","ew","=","mix","(","ew",",","ex",",","ev",")",";","ew","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ew","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","ew",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","eK","(","vec2","eH",")","{","float","eI","=","min","(","eH",".","x",",","eH",".","y",")",";","float","eJ","=","min","(","1.0","-","eH",".","x",",","1.0","-","eH",".","y",")",";","return","min","(","eI",",","eJ",")",";","}","float","eN","(","float","eL",",","float","eM",")","{","if","(","eM",">=","0.0","&&","eM","<=","dV",")","eL","=","(","eL","-","1.0",")","/","dV","*","eM","+","1.0",";","return","eL",";","}","float","eZ","(","vec3","eO",",","vec3","eP",",","sampler2D","eQ",",","sampler2D","eR",",","float","eS",",","float","eT",",","float","eU",",","float","eV",")","{","float","eW",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["float","eX","=","eK","(","eO",".","xy",")",";","if","(","-","eV",">","eU","&&","eX",">=","0.0","&&","eX","<=","dU","&&","eb","(","eP",".","xy",",","0.0",")",")","{","float","eY","=","1.0","-","eX","/","dU",";","eW","=","eG","(","eO",",","eQ",",","eP",",","eR",",","eS",",","eT",",","eY",")",";","}","else"]}]}}]},{type:"textline",tokens:["eW","=","eo","(","eO",",","eQ",",","eS",")",";","return","eW",";","}","float","fg","(","vec3","e_",",","sampler2D","fa",",","float","fb",",","float","fc",",","float","fd",")","{","float","fe","=","eo","(","e_",",","fa",",","fb",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","fd",">","fc",")","{","float","ff","=","eK","(","e_",".","xy",")",";","fe","=","eN","(","fe",",","ff",")",";","}"]}]}}]},{type:"textline",tokens:["return","fe",";","}","float","fn","(","float","fh",")","{","float","fi","=","1.0",";","vec3","fj","=","cG",".","xyz","/","cG",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fk","=","cH",".","xyz","/","cH",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fl","=","cI",".","xyz","/","cI",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","fm","=","cJ",".","xyz","/","cJ",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","eb","(","fj",".","xy",",","0.0",")",")","{","fi","=","eZ","(","fj",",","fk",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","fh",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","eb","(","fj",".","xy",",","dX",")",")","{","fi","=","fg","(","fj",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","fh",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","eb","(","fk",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","eZ","(","fk",",","fl",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","fh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg","(","fk",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","fh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","eb","(","fl",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["fi","=","eZ","(","fl",",","fm",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","fh",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fi","=","fg","(","fl",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","fh",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","eb","(","fm",".","xy",",","0.0",")",")","fi","=","fg","(","fm",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","fh",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","fi",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","fs","(","inout","vec3","fo",")","{"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fp","=","texture2DProj","(","u_shadow_mask",",","cK",")",".","rg",";","vec3","fq","=","vec3","(","fp",".","r",")",";","float","fr","=","fp",".","g",";","dT","=","vec4","(","fq",",","fr",")",";","fo","*=","dT",".","a",";","return","dT",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","fn","(","cL",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fx","(","vec3","ft",",","float","fu",",","vec2","fv",")","{","vec2","fw","=","vec2","(","(","ft",".","x","-","fv",".","x",")","/","fu",",","-","(","ft",".","z","-","fv",".","y",")","/","fu",")",";","return","fract","(","fw",")",";","}","vec2","fB","(","vec2","fy",",","float","fz",",","vec2","fA",")","{","return","vec2","(","fy",".","x","*","fz",",","-","fy",".","y","*","fz",")","+","fA",";","}","d","fC","(",")","{","return","d","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","d","gh","(","vec3","fD",",","vec3","fE",",","vec3","fF",",","vec3","fG",",","vec3","fH",",","sampler2D","fI",",","sampler2D","fJ",",","vec3","fK",",","float","fL",",","vec3","fM",",","vec4","fN",",","mat4","fO",")","{","vec3","fP","=","j","(","fN",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","float","fQ","=","-","fP",".","x",";","float","fR","=","-","fP",".","z",";","vec2","fS","=","vec2","(","fM",".","x","+","fL","*","(","-","1.0","-","fQ",")","/","2.0",",","fM",".","z","+","fL","*","(","1.0","-","fR",")","/","2.0",")",";","vec2","fT","=","fx","(","fH",",","fL",",","fS",")",";","float","fU","=","fL","/","2.0",";","vec2","fV","=","abs","(","fB","(","fT","-","vec2","(","0.5",")",",","fL",",","vec2","(","0.0",")",")",")",";","float","fW","=","fU","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fV",")",">","fW",")","return","fC","(",")",";","float","fX","=","fL","/","fK",".","z",";","vec2","fY","=","(","fT","-","vec2","(","0.5",")",")","*","fX","+","vec2","(","0.5",")",";","vec3","fZ","=","fP","*","(","fL","/","fK",".","z","-","1.0",")","/","2.0",";","fY",".","x","+=","fZ",".","x",";","fY",".","y","-=","fZ",".","z",";","vec4","f_","=","texture2D","(","fJ",",","fY",")",";","float","ga","=","f_",".","r",";","if","(","ga","<","u_scale_threshold",")","return","fC","(",")",";","float","gb","=","fK",".","y","-","fK",".","x",";","float","gc","=","fK",".","y","-","texture2D","(","fI",",","fY",")",".","r","*","gb",";","vec2","gd","=","fD",".","xz","-","fH",".","xz",";","fH",".","xz","=","fB","(","fT",",","fL",",","fS",")",";","fH",".","y","=","gc",";","fD",".","xz","=","fH",".","xz","+","gd",";","fD",".","y","*=","ga",";","fD",".","y","+=","gc",";","vec3","ge","=","f_",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fD","-=","fH",";","mat4","gf","=","aa","(","fM",",","fH",",","fO",")",";","d","gg","=","an","(","fD",",","fH",",","fE",",","fF",",","fG",",","gf",")",";","gg",".","b","=","fH",";","gg",".","f","=","ge",";","return","s","(","gg",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","s","(","d","(","fD",",","fH",",","fE",",","fF",",","fG",",","ge",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","gn","(","mat4","gi",",","vec4","gj",")","{","vec2","gk","=","(","gi","*","u_v_light_matrix","[","3","]",")",".","xy",";","float","gl","=","SHADOW_TEX_RES","/","2.0",";","gk","=","floor","(","gk","*","gl","+","0.5",")","/","gl","-","gk",";","vec4","gm","=","gi","*","gj",";","gm",".","xy","+=","gk",";","gm","=","u_b_light_matrix","*","gm",";","return","gm",";","}","void","gr","(","vec3","go",")","{","vec3","gp","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";","vec4","gq","=","u_v_light_matrix","*","vec4","(","go","+","u_normal_offset","*","gp",",","1.0",")",";","cG","=","gn","(","u_p_light_matrix0",",","gq",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cH","=","gn","(","u_p_light_matrix1",",","gq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cI","=","gn","(","u_p_light_matrix2",",","gq",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cJ","=","gn","(","u_p_light_matrix3",",","gq",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","gr","(","vec4","gs",")","{","float","gt","=","gs",".","x",";","float","gu","=","gs",".","y",";","float","gv","=","gs",".","w",";","cK",".","x","=","(","gt","+","gv",")","/","2.0",";","cK",".","y","=","(","gu","+","gv",")","/","2.0",";","cK",".","z","=","gv",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","gy","(","inout","vec3","gx",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gx","=","max","(","vec3","(","0.0",")",",","gx",")",";","gx","=","pow","(","gx",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gA","(","inout","vec3","gz",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["gz","=","max","(","vec3","(","0.0",")",",","gz",")",";","gz","=","pow","(","gz",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","gD","(","inout","vec3","gB",",","in","float","gC",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["gB","=","gB","*","gC",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","gL","(","inout","vec3","gG",",","in","float","gH",",","in","vec4","gI",")","{","float","gJ","=","gI",".","w","*","gH",";","float","gK","=","exp","(","-","gJ","*","gJ",")",";","gK","=","clamp","(","gK",",","0.0",",","1.0",")",";","gG","=","mix","(","gI",".","rgb",",","gG",",","gK",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gS","(","in","mat4","gM",",","in","vec3","gN",")","{","vec3","gO","=","mix","(","gM","[","0","]",".","rgb",",","gM","[","1","]",".","rgb",",","max","(","sign","(","gN",".","x",")",",","0.0",")",")",";","vec3","gP","=","mix","(","gM","[","2","]",".","rgb",",","gM","[","3","]",".","rgb",",","max","(","sign","(","gN",".","z",")",",","0.0",")",")",";","vec3","gQ","=","vec3","(","gM","[","0","]",".","a",",","gM","[","1","]",".","a",",","gM","[","2","]",".","a",")",";","vec3","gR","=","mix","(","gO",",","gP",",","abs","(","gN",".","z",")",")",";","gR","=","mix","(","gR",",","gQ",",","abs","(","gN",".","y",")",")",";","return","gR",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gU","(","inout","float","gT",")","{","gT","-=","0.5",";","gT","=","4.0","*","(","gT","*","gT","*","gT",")","+","0.5",";","}","void","hk","(","inout","vec3","gV",",","in","float","gW",",","in","vec3","gX",",","in","float","gY",",","in","vec4","gZ",",","in","vec4","g_",",","in","float","ha",",","in","float","hb",")","{","float","hc","=","g_",".","w","*","gW",";","float","hd","=","exp","(","-","hc","*","hc",")",";","hd","=","clamp","(","hd",",","0.0",",","1.0",")",";","float","he","=","max","(","gX",".","y",",","0.0",")",";","gW","=","max","(","gW","-","max","(","gY","/","he",",","0.0",")",",","0.0",")",";","float","hf","=","gZ",".","w","*","gW",";","float","hg","=","1.0","-","hf",";","hg","=","max","(","hg",",","0.0",")",";","gU","(","hg",")",";","hg","+=","max","(","ha","-","0.5",",","0.0",")",";","if","(","hg","<","hd",")","{","vec3","hh","=","vec3","(","0.0",",","0.02",",","0.05",")",";","vec3","hi","=","gZ",".","rgb",";","gY","=","clamp","(","-","gY","*","0.03",",","0.0",",","0.8",")",";","vec3","hj","=","mix","(","hi",",","hh",",","min","(","he",",","1.0",")",")",";","hj","=","mix","(","hj",",","vec3","(","0.0",")",",","gY",")","*","hb",";","gV","=","mix","(","hj",",","gV",",","hg",")",";","}","if","(","hg",">=","hd",")","{","gV","=","mix","(","g_",".","rgb",",","gV",",","hd",")",";","}","}","void","ht","(","inout","vec3","hl",",","in","float","hm",",","in","float","hn",",","in","vec4","ho",",","in","float","hp",")","{","float","hq","=","ho",".","w","*","hm",";","float","hr","=","1.0","-","hq",";","hr","=","clamp","(","hr",",","0.0",",","1.0",")",";","gU","(","hr",")",";","hn","=","clamp","(","-","hn","*","0.03",",","0.0",",","0.8",")",";","vec3","hs","=","mix","(","ho",".","rgb",",","vec3","(","0.0",")",",","hn",")","*","hp",";","hl","=","mix","(","hs",",","hl",",","hr",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","hu","=","0.0",";","float","hv","=","1.0",";","struct","hw","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","hE","(","vec3","hx",",","vec3","hy",",","vec3","hz",",","vec4","hA",",","float","hB",")","{","vec3","hC","=","normalize","(","hx","+","hy",")",";","float","hD","=","hA","[","0","]","*","max","(","dot","(","hz",",","hC",")",",","hu",")","+","hA","[","1","]",";","return","pow","(","hD",",","hB",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hP","(","vec3","hF",",","vec3","hG",",","vec3","hH",",","float","hI",")","{","vec3","hJ","=","normalize","(","hF","+","hG",")",";","float","hK","=","max","(","dot","(","hH",",","hJ",")",",","0.001",")",";","float","hL","=","max","(","dot","(","hH",",","hG",")",",","0.01",")",";","float","hM","=","max","(","dot","(","hH",",","hF",")",",","0.01",")",";","float","hN","=","tan","(","acos","(","hK",")",")",";","float","hO","=","max","(","hI",",","0.001",")",";","return","hM","*","(","hv","/","(","4.0","*","M_PI","*","hO","*","hO",")",")","*","(","exp","(","-","(","hN","*","hN",")","/","(","hO","*","hO",")",")","/","(","sqrt","(","hL","*","hM",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hX","(","vec3","hQ",",","vec3","hR",",","vec3","hS",",","float","hT",",","float","hU",")","{","vec3","hV","=","normalize","(","hQ","+","hR",")",";","float","hW","=","acos","(","dot","(","hV",",","hS",")",")",";","if","(","hW","<","hT",")","return","hv",";","else","if","(","hW",">=","hT","+","hU","||","hU","==","hu",")","return","hu",";","else","return","hv","-","(","hW","-","hT",")","/","hU",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","is","(","float","hY",",","vec3","hZ",",","vec3","h_",",","vec3","ia",",","float","ib",",","inout","float","ic",")","{","if","(","ib",">","hu",")","{","float","id","=","max","(","dot","(","hZ",",","ia",")",",","hu",")",";","float","ie","=","ib","*","ib",";","float","ig","=","hv","-","0.5","*","(","ie","/","(","ie","+","0.33",")",")",";","vec3","ih","=","h_","-","hY","*","hZ",";","vec3","ii","=","ia","-","id","*","hZ",";","if","(","length","(","ih",")","==","hu","||","length","(","ii",")","==","hu","||","abs","(","hY",")",">","hv","||","abs","(","id",")",">","hv",")","ic","=","ic","*","ig",";","else","{","float","ij","=","acos","(","hY",")",";","float","ik","=","acos","(","id",")",";","vec3","il","=","normalize","(","ih",")",";","vec3","im","=","normalize","(","ii",")",";","float","io",",","ip",";","io","=","max","(","ij",",","ik",")",";","ip","=","min","(","ij",",","ik",")",";","ip","*=","0.95",";","float","iq","=","max","(","dot","(","il",",","im",")",",","hu",")",";","float","ir","=","0.45","*","(","ie","/","(","ie","+","0.09",")",")",";","ic","=","ic","*","(","ig","+","(","ir","*","iq","*","sin","(","io",")","*","tan","(","ip",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","iz","(","vec3","it",",","vec3","iu",",","float","iv",",","float","iw",",","out","float","ix",")","{","float","iy",";","if","(","iv","==","hu",")","{","ix","=","hv",";","}","else","{","iy","=","hv","+","abs","(","dot","(","iu",",","it",")",")",";","iy","=","iw","+","(","hv","-","iw",")","*","pow","(","iy",",","iv",")",";","ix","=","clamp","(","iy",",","hu",",","hv",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS","&&","NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","jg","(","inout","hw","iA",",","vec3","iB",",","vec3","iC",",","vec3","iD",",","vec3","iE",",","vec3","iF",",","vec2","iG",",","vec2","iH",",","float","iI",",","vec3","iJ",",","vec3","iK",",","vec3","iL",",","vec4","iM",",","vec4","iN",",","float","iO",",","vec4","iP",")","{","if","(","iM",".","w","+","iN",".","w","==","hu",")","return",";","vec3","iQ","=","vec3","(","hu",")",";","vec3","iR","=","iL","*","iI",";","float","iS","=","iN",".","z",";","if","(","iS","!=","-","hv",")","{","iQ","=","iJ","-","iD",";","float","iT","=","length","(","iQ",")",";","iR","*=","iS","/","(","iS","+","iT","*","iT",")",";","iQ","=","normalize","(","iQ",")",";","float","iU","=","iN",".","x",";","float","iV","=","iN",".","y",";","if","(","iU",">","-","hv",")","{","float","iW","=","dot","(","iQ",",","iK",")",";","iW","*=","smoothstep","(","hu",",","hv",",","(","iW","-","iU",")","/","iV",")",";","iR","*=","iW",";","}","}","else","iQ","=","iK",";","float","iX","=","hu",";","if","(","iM",".","w","!=","hu",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["iz","(","iE",",","iQ",",","iH","[","0","]",",","iH","[","1","]",",","iX",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","iY","=","max","(","dot","(","iE",",","iQ",")",",","hu",")",";","iX","=","iM","[","0","]","*","iY","+","iM","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["is","(","iY",",","iE",",","iQ",",","iF",",","iH","[","0","]",",","iX",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","float","iZ","=","hu",";","if","(","iN",".","w","!=","hu",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["iZ","=","hE","(","iQ",",","iF",",","iE",",","iM",",","iG","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["iZ","=","hP","(","iQ",",","iF",",","iE",",","iG","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["iZ","=","hX","(","iQ",",","iF",",","iE",",","iG","[","0","]",",","iG","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iZ","=","hu",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","iQ",",","iE",")","*","dot","(","iF",",","iE",")","<","hu",")","{","float","i_","=","iP",".","x",";","float","ja","=","iP",".","y",";","float","jb","=","iP",".","z",";","float","jc","=","iP",".","w",";","float","jd","=","clamp","(","abs","(","dot","(","iQ",",","iE",")",")",",","hu",",","hv",")",";","float","je","=","clamp","(","dot","(","iF",",","-","iQ",")",",","hu",",","hv",")",";","float","jf","=","pow","(","je",",","ja",")",";","iA",".","a","+=","iO","*","vec4","(","iR","*","jd","*","pow","(","iB",",","vec3","(","i_",")",")",",","hv",")",";","iA",".","a","+=","jb","*","mix","(","vec4","(","iB",",","hv",")",",","vec4","(","hv",")",",","jc",")","*","iO","*","vec4","(","iR","*","jd","*","vec3","(","jf",")",",","hv",")",";","}","else","{","iA",".","b","+=","iR","*","iC","*","iZ",";","iA",".","a","+=","vec4","(","iR","*","iB","*","iX",",","iZ",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["iA",".","b","+=","iR","*","iC","*","iZ",";","iA",".","a","+=","vec4","(","iR","*","iB","*","iX",",","iZ",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["hw","jY","(","vec3","jh",",","vec3","ji",",","vec3","jj",",","vec3","jk",",","vec3","jl",",","vec3","jm",",","vec3","jn",",","vec2","jo",",","vec2","jp",",","float","jq",",","vec3","jr","[","NUM_LIGHTS","]",",","vec3","js","[","NUM_LIGHTS","]",",","vec3","jt","[","NUM_LIGHTS","]",",","vec4","ju","[","NUM_LIGHTS","]",",","vec4","jv","[","NUM_LIGHTS","]",",","float","jw",",","vec4","jx",",","int","jy",")","{","hw","jz",";","jz",".","a","=","vec4","(","jh","+","jj","*","ji",",","hu",")",";","jz",".","b","=","vec3","(","hu",")",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"textline",tokens:["float","jA","=","hv",";","if","(","jy","==","0",")","jA","=","jq",";","jg","(","jz",",","jj",",","jk",",","jl",",","jm",",","jn",",","jo",",","jp",",","jA",",","jr","[","0","]",",","js","[","0","]",",","jt","[","0","]",",","ju","[","0","]",",","jv","[","0","]",",","jw",",","jx",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["float","jB","=","hv",";","if","(","jy","==","1",")","jB","=","jq",";","jg","(","jz",",","jj",",","jk",",","jl",",","jm",",","jn",",","jo",",","jp",",","jB",",","jr","[","1","]",",","js","[","1","]",",","jt","[","1","]",",","ju","[","1","]",",","jv","[","1","]",",","jw",",","jx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["float","jC","=","hv",";","if","(","jy","==","2",")","jC","=","jq",";","jg","(","jz",",","jj",",","jk",",","jl",",","jm",",","jn",",","jo",",","jp",",","jC",",","jr","[","2","]",",","js","[","2","]",",","jt","[","2","]",",","ju","[","2","]",",","jv","[","2","]",",","jw",",","jx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["float","jD","=","hv",";","if","(","jy","==","3",")","jD","=","jq",";","jg","(","jz",",","jj",",","jk",",","jl",",","jm",",","jn",",","jo",",","jp",",","jD",",","jr","[","3","]",",","js","[","3","]",",","jt","[","3","]",",","ju","[","3","]",",","jv","[","3","]",",","jw",",","jx",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","jE","=","0",";","jE","<","NUM_LIGHTS",";","jE","++",")","{","vec4","jF","=","ju","[","jE","]",";","vec4","jG","=","jv","[","jE","]",";","if","(","jF",".","w","+","jG",".","w","!=","hu",")","{","vec3","jH","=","vec3","(","hu",")",";","vec3","jI","=","jt","[","jE","]",";","if","(","jE","==","jy",")","jI","*=","jq",";","float","jJ","=","jG",".","z",";","if","(","jJ","!=","-","hv",")","{","jH","=","jr","[","jE","]","-","jl",";","float","jK","=","length","(","jH",")",";","jI","*=","jJ","/","(","jJ","+","jK","*","jK",")",";","jH","=","normalize","(","jH",")",";","float","jL","=","jG",".","x",";","float","jM","=","jG",".","y",";","if","(","jL",">","-","hv",")","{","float","jN","=","dot","(","jH",",","js","[","jE","]",")",";","jN","*=","smoothstep","(","hu",",","hv",",","(","jN","-","jL",")","/","jM",")",";","jI","*=","jN",";","}","}","else","jH","=","js","[","jE","]",";","float","jO","=","hu",";","if","(","jF",".","w","!=","hu",")","{"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["iz","(","jm",",","jH",",","jp","[","0","]",",","jp","[","1","]",",","jO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["float","jP","=","max","(","dot","(","jm",",","jH",")",",","hu",")",";","jO","=","jF","[","0","]","*","jP","+","jF","[","1","]",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["is","(","jP",",","jm",",","jH",",","jn",",","jp","[","0","]",",","jO",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","float","jQ","=","hu",";","if","(","jG",".","w","!=","hu",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["jQ","=","hE","(","jH",",","jn",",","jm",",","jF",",","jo","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["jQ","=","hP","(","jH",",","jn",",","jm",",","jo","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["jQ","=","hX","(","jH",",","jn",",","jm",",","jo","[","0","]",",","jo","[","1","]",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","jH",",","jm",")","*","dot","(","jn",",","jm",")","<","hu",")","{","float","jR","=","jx",".","x",";","float","jS","=","jx",".","y",";","float","jT","=","jx",".","z",";","float","jU","=","jx",".","w",";","float","jV","=","clamp","(","abs","(","dot","(","jH",",","jm",")",")",",","hu",",","hv",")",";","float","jW","=","clamp","(","dot","(","jn",",","-","jH",")",",","hu",",","hv",")",";","float","jX","=","pow","(","jW",",","jS",")",";","jz",".","a","+=","jw","*","vec4","(","jI","*","jV","*","pow","(","jj",",","vec3","(","jR",")",")",",","hv",")",";","jz",".","a","+=","jT","*","mix","(","vec4","(","jj",",","hv",")",",","vec4","(","hv",")",",","jU",")","*","jw","*","vec4","(","jI","*","jV","*","vec3","(","jX",")",",","hv",")",";","}","else","{","jz",".","b","+=","jI","*","jk","*","jQ",";","jz",".","a","+=","vec4","(","jI","*","jj","*","jO",",","jQ",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["jz",".","b","+=","jI","*","jk","*","jQ",";","jz",".","a","+=","vec4","(","jI","*","jj","*","jO",",","jQ",")",";"]}]}}]},{type:"textline",tokens:["}","}"]}]}}]},{type:"textline",tokens:["return","jz",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hw","kc","(","vec3","jZ",",","vec3","j_",",","vec3","ka",")","{","hw","kb",";","kb",".","a","=","vec4","(","jZ","+","ka","*","j_",",","hu",")",";","kb",".","b","=","vec3","(","hu",")",";","return","kb",";","}"]}]}}]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","kD","(","inout","vec3","kd",",","float","ke",",","float","kf",",","float","kg",",","vec3","kh",",","vec3","ki",",","vec3","kj",",","vec4","kk",",","vec3","kl",",","float","km",")","{","if","(","km",">","CAUSTICS_VIEW_DISTANCE",")","return",";","vec4","kn","=","kk",";","vec3","ko","=","kl","+","kh",";","ko",".","xz","=","10.0","*","sin","(","0.1","*","ko",".","xz",")",";","vec3","kp","=","ko","+","2.0","*","cross","(","-","kn",".","xyz",",","cross","(","-","kn",".","xyz",",","ko",")","+","kn",".","w","*","ko",")",";","vec2","kq","=","kp",".","xz",";","vec3","kr","=","ki",";","float","ks","=","max","(","dot","(","kh",",","kr",")",",","0.0",")",";","float","kt","=","0.025",";","kq",".","s","+=","0.5","*","sin","(","dot","(","kl","+","kf",",","vec3","(","1.0",")",")",")",";","kq",".","t","+=","0.7","*","(","-","sin","(","dot","(","kl","-","kf",",","vec3","(","-","0.7",")",")",")",")",";","kq",".","st","+=","0.23","*","cos","(","4.0","*","ke","-","CAUST_SPEED",".","x","*","kf",")",";","kq",".","st","+=","3.0","*","sin","(","ke","-","0.3","*","CAUST_SPEED",".","y","*","kf",")",";","float","ku","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","ke",",","0.0",")",")",";","mat3","kv","=","dw","(","(","kq","/","ku",")",",","kt",")",";","float","kw","=","(","kv","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","float","kx","=","(","kv","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","float","ky","=","(","kv","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","vec3","kz","=","CAUST_BRIGHT","*","vec3","(","kw",",","kx",",","ky",")",";","float","kA","=","kg","*","ks",";","float","kB","=","max","(","sign","(","ke",")",",","0.0",")",";","kA","=","min","(","kA","+","0.5","*","sign","(","-","kh",".","y",")","*","kB",",","1.0",")",";","kA","*=","1.0","-","kB","*","(","0.1","*","ke",")",";","kz","*=","kA",";","kz","*=","kz",";","float","kC","=","min","(","-","ke","+","10.0",",","1.0",")",";","kd","+=","max","(","(","2.0","*","kj","*","kz",")","*","kC",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","kR","(","in","vec3","kK",",","in","vec3","kL",",","in","float","kM",",","in","float","kN",")","{","vec3","kO","=","normalize","(","kL","+","kK",")",";","float","kP","=","1.0","-","dot","(","kK",",","kO",")",";","float","kQ","=","kN","+","(","1.0","-","kN",")","*","pow","(","kP",",","kM",")",";","return","kQ",";","}","void","lf","(","inout","vec3","kS",",","in","vec3","kT",",","in","vec3","kU",",","in","float","kV",",","in","float","kW",",","in","float","kX",")","{","vec3","kY","=","reflect","(","-","kT",",","kU",")",";","float","kZ","=","1.0",";","if","(","kV","!=","0.0",")","kZ","=","kR","(","kT",",","kY",",","kV",",","kW",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","k_","=","u_refl_plane",".","xyz","*","dot","(","kU",",","u_refl_plane",".","xyz",")",";","vec3","la","=","kU","-","k_",";","vec2","lb","=","(","u_view_matrix_frag","*","vec4","(","la",",","0.0",")",")",".","xy",";","vec2","lc","=","cK",".","xy","/","cK",".","z",";","lc","+=","lb","*","REFL_BUMP",";","vec3","ld","=","texture2D","(","u_reflectmap",",","lc",")",".","rgb",";","gy","(","ld",".","rgb",")",";","kS","=","mix","(","kS",",","ld",",","kX","*","kZ",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","le","=","textureCube","(","u_mirrormap",",","kY",")",".","xyz",";","gy","(","le",".","rgb",")",";","kS","=","mix","(","kS",",","le",",","u_mirror_factor","*","kZ",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["float","ll","(","in","float","lg",",","inout","vec2","lh",",","in","vec2","li",")","{","vec4","lj","=","texture2D","(","u_scene_depth",",","lh",")",";","float","lk","=","cw","(","lj",")",";","if","(","lk","<","kJ",")","{","lh","=","li",";","return","lg",";","}","else","{","return","lk",";","}","return","lg",";","}","vec3","lt","(","in","vec3","lm",",","in","vec2","ln",")","{","vec2","lo","=","lm",".","xy","/","lm",".","z",";","vec2","lp","=","lo","+","ln",";","vec4","lq","=","texture2DProj","(","u_scene_depth",",","lm",")",";","float","lr","=","cw","(","lq",")",";","ll","(","lr",",","lp",",","lo",")",";","vec3","ls","=","texture2D","(","u_refractmap",",","lp",")",".","rgb",";","gy","(","ls",")",";","return","ls",";","}"]}]}}]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","mb","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mi","(","inout","float","mc",",","float","md",",","vec2","me",",","vec2","mf",")","{","float","mg","=","mf",".","x","-","me",".","x",";","float","mh","=","(","md","-","me",".","x",")","/","mg",";","mc","=","mix","(","mc",",","mf",".","y",",","clamp","(","mh",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","mp","(","inout","vec3","mj",",","float","mk",",","vec4","ml",",","vec4","mm",")","{","float","mn","=","mm",".","x","-","ml",".","x",";","float","mo","=","(","mk","-","ml",".","x",")","/","mn",";","mj","=","mix","(","mj",",","mm",".","yzw",",","clamp","(","mo",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","mw","(","float","mq",",","float","mr",",","vec2","ms","[","SIZE_RAMP_LENGTH","]",")","{","float","mt","=","mq","/","mr",";","float","mu","=","ms","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mi","(","mu",",","mt",",","ms","[","0","]",",","ms","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mi","(","mu",",","mt",",","ms","[","1","]",",","ms","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mi","(","mu",",","mt",",","ms","[","2","]",",","ms","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mv","=","1",";","mv","<","SIZE_RAMP_LENGTH",";","mv","++",")","mi","(","mu",",","mt",",","ms","[","mv","-","1","]",",","ms","[","mv","]",")",";"]}]}}]},{type:"textline",tokens:["return","mu",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mD","(","float","mx",",","float","my",",","vec4","mz","[","COLOR_RAMP_LENGTH","]",")","{","float","mA","=","mx","/","my",";","vec3","mB","=","mz","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["UNROLL_LOOPS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mp","(","mB",",","mA",",","mz","[","0","]",",","mz","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mp","(","mB",",","mA",",","mz","[","1","]",",","mz","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mp","(","mB",",","mA",",","mz","[","2","]",",","mz","[","3","]",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["for","(","int","mC","=","1",";","mC","<","COLOR_RAMP_LENGTH",";","mC","++",")","mp","(","mB",",","mA",",","mz","[","mC","-","1","]",",","mz","[","mC","]",")",";"]}]}}]},{type:"textline",tokens:["return","mB",";","}"]}]}}]},{type:"textline",tokens:["float","mM","(","float","mE",",","float","mF",",","float","mG",",","float","mH",")","{","float","mI","=","max","(","0.01",",","min","(","mF",",","mG",")",")",";","float","mJ","=","max","(","0.01",",","min","(","mF",",","mH",")",")",";","float","mK","=","mF","-","mJ",";","float","mL","=","clamp","(","mE","/","mI",",","0.0",",","1.0",")","-","step","(","mK",",","mE",")","*","(","mE","-","mK",")","/","mJ",";","return","mL",";","}","mb","mS","(",")","{","mb","mN",";","float","mO",";","if","(","u_p_cyclic","==","1",")","{","mO","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","mO","<","0.0",")","mO","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","mO","=","u_p_time","-","a_p_delay",";","}","if","(","mO","<","0.0","||","mO",">=","a_p_lifetime",")","{","mN",".","a","=","0.0001",";","mN",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","mO","<","0.0","||","mO",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","mP","=","a_position",";","vec3","mQ","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","mP","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","vec3","mQ","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["mP","+=","u_p_nfactor","*","mO","*","mQ",";","mP","+=","a_p_vels",".","xyz","*","mO",";","mP",".","y","-=","u_p_gravity","*","mO","*","mO","/","2.0",";","float","mR","=","max","(","u_p_mass",",","EPSILON",")",";","mP","+=","(","u_p_wind","/","mR",")","*","mO","*","mO","/","2.0",";","mN",".","b","=","mP",";","mN",".","e","=","a_p_vels",".","w","*","mO",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mN",".","a","=","mw","(","mO",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mN",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mN",".","d","=","mD","(","mO",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mN",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["mN",".","c","=","mM","(","mO",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","mN",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ne","(","in","sampler2D","mY",",","in","vec2","mZ",",","in","vec2","m_",")","{","float","na","=","texture2D","(","mY",",","mZ",")",".","r",";","float","nb","=","m_",".","x",";","float","nc","=","m_",".","y",";","float","nd","=","2.0","*","nb","/","(","nb","+","nc","-","(","2.0","*","na","-","1.0",")","*","(","nc","-","nb",")",")",";","return","nd",";","}"]}]}}