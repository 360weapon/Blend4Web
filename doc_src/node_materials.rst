.. _node_materials:

.. index:: нодовые материалы

*****************
Нодовые материалы
*****************

Шейдерные ноды (Shader Nodes) существенно расширяют возможности стандартных материалов Blender, позволяя представить освещение как серию базовых преобразований.

.. index:: материалы; ноды

.. _generic_node_materials:

Стандартные ноды
================

.. index:: материалы; ноды

Полностью поддерживается все возможности Blender, за исключением следующих случаев:

* ``Geometry`` - не поддерживаются выходы ``Local``, ``Orco`` и ``Vertex Alpha``.
* ``Material``, ``Extended Material`` - допускается не больше одной ноды на материал,
  не поддерживаются входы ``Refl``, ``Ambient``, ``SpecTra``, ``Ray Mirror`` и выход ``AO``.
* ``RGB Curves`` - не поддерживается.
* ``Vector Curves`` - не поддерживается.

Кроме того, в контексте рендеринга в реальном времени, следует учитывать низкую производительность некоторых нод. Не рекомендуется к использованию:

* ``Hue/Saturation``
* ``MixRGB`` типы ``Burn``, ``Dodge``, ``Value``, ``Saturation``, ``Hue``, ``Color``

Не рекомендуется создавать сложные материалы, особенно использующие большое
количество нод ``Geometry`` и ``Texture``.

.. _custom_node_materials:

Дополнительные ноды
===================

.. index:: материалы; ноды

Дополнительные ноды расширяют функционал стандартных с учётом специфики работы движка. Ноды оформляются в виде нодовых групп (``Node groups`` или ``Node tree``) со специально выбранным именем и форматом входов. Для удобства, все дополнительные ноды собраны в файл ``special_nodes.blend``.

LINEAR_TO_SRGB и LINEAR_TO_SRGB
-------------------------------

Преобразование цвета из линейного цветового пространства в пространство sRGB и наоборот.

.. seealso:: :ref:`gamma_nodes`

REPLACE
-------

Осуществляет замену входов в зависимости от того, в какой среде (viewport Blender'а или движок) в данный момент работает текущая сцена. При работе в Blender вход ``Color1`` подключается к выходу ``Color``, вход ``Color2`` игнорируется. При работе в движке входы меняются местами (``Color1`` игнорируется, ``Color2`` подключается к выходу). Нода предназначена для отображения во viewport'e одной конструкции нодов, а в движке - другой. 

Используется, как правило, для подключения карт нормалей. Нодовые материалы Blender'а не поддерживают тангентное пространство координат, в связи с чем единственный способ корректного отображения карт нормалей во viewport'e - их подключение внутри нод Material. 

CLAMP
-----

Осуществить операцию ограничения над входом. В результате, все элементы вектора на выходе
получают значения от 0 до 1 включительно.

TIME
----

Осуществляет отсчет времени с момента старта движка в секундах. Может использоваться для анимации любых параметров в нодовых материалах.

NORMAL_VIEW
-----------

Осуществить преобразование нормали в пространство камеры. Преобразование необходимо, поскольку при работе в движке все нормали определены в мировой системе координат. Нормаль используется только для наложения эффектов и не должна подключаться к входу ноды ``Material`` или ``Extended Material``.

PARALLAX
--------

Реализует смещение текстурных координат в соответствии с картой высот.

Входные параметры
.................

*UV*
   Исходные текстурные координаты.

*Height*
   RGBA текстура с картой высот в альфа канале.

*Scale*
   Коэффициент смещения текстурных координат.

*Steps*
   Количество шагов при генерации смещенных текстурных координат. Чем больше данное значение, тем выше качество получаемой текстуры.

Выходные параметры
..................

*UV*
   Измененные текстурные координаты, которые используются как вход для текстурных нод.

TRANSLUCENCY
------------

Реализует эффект полупрозрачности (только по отношению к источникам света) для тонких объектов, таких как ткань, листва, бумага и др. Эффект состоит из двух частей: засвечивание обратной по отношению к источнику стороны объекта и появление светового пятна непосредственно в том месте, где должен был находится источник.

Входные параметры
.................

*Color*
    Одноканальная текстура, определяющая неоднородность материала, белый - максимальный эффект просвечивания, черный - его отсутствие. По умолчанию используется белый.
*Backside Factor*
    Коэффицент коррекции цвета материала на обратной от источника света стороне. Основан на визуальном эффекте большей насыщенности цвета при просвечивании.

    * *Backside Factor < 1* - коррекция в сторону осветления
    * *Backside Factor = 1* - без коррекции
    * *Backside Factor > 1* - коррекция в сторону затемнения

    Значение по умолчанию: 1.
*Spot Hardness*
    Коэффициент размытия светового пятна. При увеличении размеры пятна уменьшаются, края становятся более резкими.
    Значение по умолчанию: 1000.
*Spot Intensity*
    Интенсивность светового пятна. При увеличении становится более ярким.
    Значение по умолчанию: 1.
*Spot Diffuse Factor*
    Коэффициент влияния диффузного цвета материала на цвет светового пятна. 

    * *Spot Diffuse Factor = 0* - световое пятно имеет диффузный цвет
    * *Spot Diffuse Factor = 1* - световое пятно имеет белый цвет

    Значение по умолчанию: 1.

Выходные параметры
..................

*Translucency*
	Выход должен быть подключен ко входу ``Translucency`` ноды ``Extended Material``.
